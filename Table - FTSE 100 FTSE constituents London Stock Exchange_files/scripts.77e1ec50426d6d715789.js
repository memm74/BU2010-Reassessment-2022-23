var InfrontUtil,InfrontConstants,IDS,InterLibraryLink,__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};!function(e){var t=function(){function t(e,t){this.instrumentCurrency={},this.historyCache={},this.currenciesCacheStartEnd={},this.crossSymbols={},this.intradayCache={},this.infront=e,this.streaming=t,this.cacheKey=InfrontUtil.makeUUID(),this.loadedCurrencies=[]}return t.prototype.createConvertedFieldFromCache=function(t,n,i,r){var a=this;void 0===r&&(r=null);var s=null==r?new e.FieldReference(this.cacheKey,InfrontUtil.makeUUID()):r,o=null,l=null;if(InfrontUtil.isString(n)&&InfrontUtil.isString(i))this.doCreateConvertedField(s,t,n,i);else{var c=new InfrontUtil.MultiCallbackHandler(function(){a.doCreateConvertedField(s,t,o,l)}),d=this.infront.getCache();InfrontUtil.isString(n)?o=n:d.asyncGet(c.addCallback(function(e){o=e}),n),InfrontUtil.isString(i)?l=i:d.asyncGet(c.addCallback(function(e){l=e}),i)}return s},t.prototype.doCreateConvertedField=function(n,i,r,a){if(IDS.DEBUG_CREATE_CURRENCY_CONVERT_FIELD&&IDS.log("doCreateConvertedField","target:",n.fieldSpec,"field:",i.fieldSpec,"from:",r||"---","to:",a||"---"),r&&a&&r.toUpperCase()!=a.toUpperCase()){var s=1;"GBX"==r?(r="GBP",s=.01):"GBX"==a&&(a="GBP",s=100);var o=r==t.kUSD?null:new e.Instrument(t.kWFXFeed,t.kUSD+r),l=a==t.kUSD?null:new e.Instrument(t.kWFXFeed,t.kUSD+a),c=null,d=null;o&&(this.loadCurrency(o),c=new e.FieldReference(e.CacheKeyFactory.createInstrumentKey(o),"last_valid")),l&&(this.loadCurrency(l),d=new e.FieldReference(e.CacheKeyFactory.createInstrumentKey(l),"last_valid")),o&&l?this.infront.getCache().createComputedField(n.cacheKey,n.fieldSpec,[i,c,d],function(e){return InfrontUtil.checkArrayItems(e,InfrontUtil.isNumber)?(IDS.DEBUG_CURRENCY_CONVERT&&IDS.log(n.cacheKey,n.fieldSpec,": ("+e[0],"/",e[1]+") *",e[2],"*",s,"=",e[0]/e[1]*e[2]*s),e[0]/e[1]*e[2]*s):"-"}):o?this.infront.getCache().createComputedField(n.cacheKey,n.fieldSpec,[i,c],function(e){return InfrontUtil.noElementsUndefined(e)?(IDS.DEBUG_CURRENCY_CONVERT&&IDS.log(n.cacheKey,n.fieldSpec,": ("+e[0],"/",e[1]+") *",s,"=",e[0]/e[1]*s),e[0]/e[1]*s):"-"}):this.infront.getCache().createComputedField(n.cacheKey,n.fieldSpec,[i,d],function(e){return InfrontUtil.noElementsUndefined(e)?e[0]*e[1]*s:"-"})}else this.infront.getCache().createComputedField(n.cacheKey,n.fieldSpec,[i],function(e){return e[0]})},t.prototype.loadCurrency=function(e){-1==this.loadedCurrencies.indexOf(e.ticker)&&(this.streaming?this.infront.subscribe(e,["LAST_VALID"]):this.infront.snapshot(e,["LAST_VALID"]),this.loadedCurrencies.push(e.ticker))},t.prototype.cacheIntraday=function(t,n,i,r,a,s){var o=this;return new Promise(function(l,c){o.getCrossSymbolsPromise(t,n).then(function(c){if(c&&c.length>0){var d=e.CacheKeyFactory.createInstrumentKey(t);o.instrumentCurrency[d]==n&&l(!0);var u=new e.TradesByDaysOptions;u.resolution=i,u.stepSize=r,u.days_back=a+10,u.maxLookupDays=s,u.fields=["LAST"];for(var h=c.length,p=function(e){var t=Object.create(u);t.onData=function(t){o.intradayCache[e.ticker]?o.intradayCache[e.ticker].concat(t.trades):o.intradayCache[e.ticker]=t.trades,--h<=0&&l(!0)},o.infront.tradesByDays(e,t)},m=0,g=c;m<g.length;m++)p(g[m])}else l(!1)})})},t.prototype.cacheHistory=function(t,n,i,r,a,s){var o=this;return new Promise(function(l,c){o.getCrossSymbolsPromise(t,n).then(function(d){if(d&&d.length>0){var u=e.CacheKeyFactory.createInstrumentKey(t),h=o.instrumentCurrency[u];h==n&&l(!0);var p=o.currenciesCacheStartEnd[h+n];if(p&&p.strt>=i&&p.end<=r&&l(!0),!p){var m=o.currenciesCacheStartEnd[h+n];m&&m.strt>=i&&m.end<=r&&l(!0)}var g=new e.HistoricalTradesOptions;g.start_date=i?InfrontUtil.addDays(i,-10):i,g.end_date=r,g.adjust_dividends=s,g.adjust_splits=a,g.fields=["LAST"],g.onError=function(e,t){InfrontUtil.errorLogCallback(e,t),c("Unable to get currency time series")};for(var f=d.length,v=function(e){var t=Object.create(g);t.onData=function(t){p?(i<p.start&&(p.start=i),r>p.end&&(p.end=r)):o.currenciesCacheStartEnd[e.ticker]={start:i,end:r};for(var n=t.length-1;n>=0;n--)o.historyCache[e.ticker+InfrontUtil.formatDateTime(t[n].date,"yyyyMMdd")]=t[n].last;--f<=0&&l(!0)},o.infront.historicalTrades(e,t)},y=0,b=d;y<b.length;y++)v(b[y])}else l(!1)})})},t.prototype.getIntradayValue=function(e,i,r,a,s){var o=this;if(r==a)return e;var l=null;if(e&&i&&r&&a){var c=0,d=(i.toString(),n[r]),u=n[r];d&&(r=d.value),u&&(a=u.value);var h=function(e,t){var n=o.intradayCache[e];if(n){for(var i=n.length-1;i>=0;i--){var r=n[i];if(r.time<=t)return r.last}return 0}};if(s&&s.length>0){var p,m;if(1==s.length)c=s[0].ticker==r+a?h(s[0].ticker,i):1/h(s[0].ticker,i);else s[0].ticker==t.kUSD+r?(p=h(s[0].ticker,i),m=h(s[1].ticker,i)):(p=h(s[1].ticker,i),m=h(s[0].ticker,i)),p&&m&&(c=m/p);c&&(l=e*c*(d?1/d.factor:1)*(u?u.factor:1))}}return l},t.prototype.getHistoricalValue=function(i,r,a,s){var o=this,l=a,c=s,d=!1;if(l==c)return i;if(c==t.kUSD){d=!0;var u=l;l=c,c=u}var h=null;if(i&&r&&l&&c){var p=0,m=InfrontUtil.formatDateTime(r,"yyyyMMdd"),g=n[l],f=n[l];g&&(l=g.value),f&&(c=f.value);var v=function(e){return InfrontUtil.addDays(e,-1)},y=function(e,t,n){for(var i=o.historyCache[e+m],r=t,a=m;!i;)if(r=v(r),a=InfrontUtil.formatDateTime(r,"yyyyMMdd"),!(i=o.historyCache[e+a])&&r<n){a=InfrontUtil.formatDateTime(n,"yyyyMMdd"),i=o.historyCache[e+a];break}return i&&d&&(i=1/i),i},b=l+c,T=this.currenciesCacheStartEnd[b],S=new e.Instrument(t.kWFXFeed,b);if(S&&T)p=y(b,r,T.start);else if(b=c+l,T=this.currenciesCacheStartEnd[b],(S=new e.Instrument(t.kWFXFeed,b))&&T){var C=y(b,r,T.start);C&&(p=1/C)}else{var I=new e.Instrument(t.kWFXFeed,t.kUSD+l),_=new e.Instrument(t.kWFXFeed,t.kUSD+c);if(I&&_){var M=this.currenciesCacheStartEnd[t.kUSD+c],E=this.currenciesCacheStartEnd[t.kUSD+c];if(M&&E){var w=y(t.kUSD+l,r,M.start)||1/y(l+t.kUSD,r,M.start),A=y(t.kUSD+c,r,E.start)||1/y(c+t.kUSD,r,E.start);w&&A&&(p=A/w)}}}p&&(h=i*p*(g?1/g.factor:1)*(f?f.factor:1))}return h},t.prototype.convertTrades=function(t,n,i){var r=[],a=e.CacheKeyFactory.createInstrumentKey(t),s=this.instrumentCurrency[a];s||this.getInstrumentCurrency(t).then();var o=this.infront.getCurrencyConverter().getCrossSymbols(t,i);if(s&&s==i)return n;if(s&&o&&o.length>0){var l=0;if(1==o.length)(l=this.infront.cache.get(e.CacheKeyFactory.createInstrumentKey(o[0]),["LAST"]))&&o[0].ticker&&o[0].ticker.indexOf(s)>0&&(l=1/l);else if(2==o.length){var c=void 0,d=void 0;o[0].ticker.indexOf(s)?(c=o[0],d=o[1]):(c=o[1],d=o[0]),l=this.infront.cache.get(e.CacheKeyFactory.createInstrumentKey(d),["LAST"])/this.infront.cache.get(e.CacheKeyFactory.createInstrumentKey(c),["LAST"])}if(l)for(var u=0,h=n;u<h.length;u++){var p=h[u],m=Object.create(p);m.open&&(m.open=m.open*l),m.high&&(m.high=m.high*l),m.low&&(m.low=m.low*l),m.last&&(m.last=m.last*l),r.push(m)}else r=n}else r=n;return r},t.prototype.getInstrumentCurrency=function(t){var n=this;return new Promise(function(i,r){if(t){var a=e.CacheKeyFactory.createInstrumentKey(t),s=n.instrumentCurrency[a];s?i(s):n.infront.instrumentInfoPromise(t.feed,t.ticker).then(function(e){s=e.currency,n.instrumentCurrency[a]=s,i(s)})}})},t.prototype.getCrossSymbols=function(n,i){var r=e.CacheKeyFactory.createInstrumentKey(n),a=this.instrumentCurrency[r];return a&&i?i!=t.kUSD?this.crossSymbols[a+i]:this.crossSymbols[i+a]:null},t.prototype.getCrossSymbolsPromise=function(n,i){var r=this;return new Promise(function(a,s){r.getInstrumentCurrency(n).then(function(n){var s=n,o=i;if(s==o&&a(null),o==t.kUSD){var l=s;s=o,o=l}var c=!1,d=!1,u=!1,h=[],p=new e.SearchOptions;p.maxResults=1,p.feeds=[t.kWFXFeed],p.onData=function(e){if(e&&e.length>0&&(!d||u)){for(var n=0,i=e;n<i.length;n++)(g=i[n]).instrument&&h.push(g.instrument);r.crossSymbols[s+o]=h,a(h)}else if(c)if(d)if(u)a(null);else{if(u=!0,e&&e.length>0)for(var l=0,m=e;l<m.length;l++){var g;(g=m[l]).instrument&&h.push(g.instrument)}r.infront.search(t.kUSD+o,p)}else d=!0,r.infront.search(t.kUSD+s,p);else c=!0,r.infront.search(o+s,p)},r.infront.search(s+o,p)})})},t.kUSD="USD",t.kWFXFeed=12,t}();e.CurrencyConverter=t;var n={GBX:{value:"GBP",factor:.01},USX:{value:"USD",factor:.01},ZAC:{value:"ZAR",factor:.01}}}(Infront||(Infront={})),function(e){var t=function(){function e(){}return e.kTraceDebugLogs="false",e.kDefaultClientApplication="WEB",e.kBuildType="release",e.kApplicationVersion="2.3.2",e.kRoutingUrl="https://mwstest.infrontservices.com/mws",e.kVisualRoutingUrl="https://visual.infinancials.com/visual",e}();e.LibraryConstants=t}(Infront||(Infront={})),function(e){function t(e,l,c){if(void 0===c&&(c=!0),null!=e&&null!=l)for(var d in l)l.hasOwnProperty(d)&&(l[d]instanceof Date&&(e[d]=new Date(l[d].getTime())),null===l[d]||s(l[d])||a(l[d])?e[d]=l[d]:r(l[d])?e[d]=c?i(l[d]):l[d]:o(l[d])&&("inf_clone"in l[d]&&a(l[d].inf_clone)?e[d]=l[d].inf_clone():e[d]&&o(e[d])?t(e[d],l[d],c):e[d]=c?n(l[d]):l[d]));return e}function n(e){var l=null;if(e instanceof Date)l=new Date(e.getTime());else if(null===e||s(e)||a(e))l=e;else if(r(e))l=i(e);else if(o(e))if("inf_clone"in e&&a(e.inf_clone))l=t(e.inf_clone(),e,!0);else for(var c in l={},e)e.hasOwnProperty(c)&&(l[c]=n(e[c]));return l}function i(e){if(null==e)return null;for(var t=[],i=0;i<e.length;i++)t[i]=n(e[i]);return t}function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"function"==typeof e}function s(e){return"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function o(e){return null!=e&&"object"==typeof e}function l(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function c(e){return/^[-]?[0-9]+([.][0-9]+)*([,][0-9]+)?([,][0-9]+)*([.][0-9]+)?([\s][0-9]+)*([.,][0-9]+)?$/.test(e)}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function u(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function h(e,t,n){var i,r;n?(i=[n.get("time","january"),n.get("time","february"),n.get("time","march"),n.get("time","april"),n.get("time","may"),n.get("time","june"),n.get("time","july"),n.get("time","august"),n.get("time","september"),n.get("time","october"),n.get("time","november"),n.get("time","december")],r=[n.get("time","sunday"),n.get("time","monday"),n.get("time","tuesday"),n.get("time","wednesday"),n.get("time","thursday"),n.get("time","friday"),n.get("time","saturday")]):(i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]);var a=function(e,t,n){return e.replace(t,function(e){var t=e.length;return 1==t?n:2==t?("0"+n).slice(-2):"sss"===e?("00"+n).slice(-3):e})},s=function(e,t,n,i){return e.replace(t,function(e){var t=e.length;return 3==t?n[i].substr(0,3):4==t?n[i]:e})};return function(e,t){if(e)return t=a(t,/d+/gi,e.getDate()),t=(t=a(t,/M+/g,e.getMonth()+1)).replace(/y+/gi,function(t){var n=t.length,i=e.getFullYear();return 2==n?(i+"").slice(-2):4==n?i:t}),t=a(t,/H+/g,e.getHours()),t=a(t,/h+/g,function(e){return(e+24)%12||12}(e.getHours())),t=a(t,/m+/g,e.getMinutes()),t=a(t,/sss/gi,e.getMilliseconds()),t=(t=a(t,/s+/gi,e.getSeconds())).replace(/a/gi,function(t){var n=function(e){return e>=12?"pm":"am"}(e.getHours());return"A"===t?n.toUpperCase():n}),t=s(t,/d+/gi,r,e.getDay()),s(t,/M+/g,i,e.getMonth())}(e,t)}function p(t,n){return void 0===n&&(n=!0),t&&e.formatSettings.timeFormat!=D?h(t,n?e.formatSettings.timeFormat:e.formatSettings.timeFormat.replace(/(s{1,}?[^a-zA-Z\s])|([^a-zA-Z\s]?s{1,})/g,"")):t?g(t.getHours())+":"+g(t.getMinutes())+(n?":"+g(t.getSeconds()):""):null}function m(t){if(t&&e.formatSettings.dateFormat!=A)return h(t,e.formatSettings.dateFormat);if(t){var n=t.getFullYear().toString().substr(2,2);return g(t.getDate())+"."+g(t.getMonth()+1)+"."+n}return null}function g(e){var t=e.toString();return e<10&&(t="0"+t),t}function f(e,t){return!(!e||!t)&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function v(e){return f(e,new Date)}function y(t,n){return l(t)?e.formatSettings.useBrowserFormatting?b(t,n,e.formatSettings.browserThousandsSeparator,e.formatSettings.browserDecimalSeparator):b(t,n,e.formatSettings.thousandsSeparator,e.formatSettings.decimalSeparator):""}function b(e,t,n,i){var r,a;if(t>0)if(a=e.toFixed(t),n){r=i+a.slice(a.length-t,a.length);for(var s=0,o=a.length-t-2;o>=0;o--)3==s&&"-"!=a[o]?(s=0,r=a[o]+n+r):r=a[o]+r,s++}else r=a.replace(".",i);else if(a=e.toFixed(t),n)for(r="",s=0,o=a.length-1;o>=0;o--){var l=a[o];3==s&&"-"!=l?(s=0,r=l+n+r):r=l+r,s++}else r=a;return r}function T(t,n){var i=n||0,r=Math.abs(t);return e.formatSettings.useKiloMegaFormat?r>1e7?y(t/1e6,i)+e.formatSettings.mega:r>1e5?y(t/1e3,i)+e.formatSettings.kilo:y(t,i):y(t,i)}function S(e,t){return void 0===t&&(t=700),null!=e&&"N/A"!=e&&"N/M"!=e&&"N/M+"!=e&&"N/M-"!=e?e.length>=t-2?e.substring(0,t)+"..":e:null==e?"":e}function C(){var e=new Date;return(e.getHours()<10?"0"+e.getHours():""+e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():""+e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():""+e.getSeconds())}function I(e){return e<10?"0"+e:e}function _(e,t){return void 0===t&&(t=!1),e&&e instanceof Date?t?1e4*e.getUTCFullYear()+100*(e.getUTCMonth()+1)+e.getUTCDate():1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate():null}function M(e,t){return void 0===t&&(t=!1),e?t?1e4*e.getUTCHours()+100*e.getUTCMinutes()+e.getUTCSeconds():1e4*e.getHours()+100*e.getMinutes()+e.getSeconds():null}function E(e,t){0!=e&&(t.setUTCDate(e%100>>0),t.setUTCMonth((e/100%100>>0)-1),t.setUTCFullYear(e/1e4>>0))}var w=Infront.LibraryConstants.kTraceDebugLogs,A="DD.MM.YY",D="HH:mm:ss",O=function(){this.dateFormat=A,this.longDateFormat="DD MMM YYYY",this.dayMonthTimeFormat="MMM d HH:mm:ss",this.dateTimeFormat="DD.MM.YY HH:mm:ss",this.timeFormat=D,this.useBrowserFormatting=!0;var e=1.1,t=e.toLocaleString();this.browserDecimalSeparator=t.substr(1,1);var n=(t=(e=1e3).toLocaleString()).substr(1,1);this.browserThousandsSeparator="0"==n?"":n,this.kilo="k",this.mega="m",this.useKiloMegaFormat=!0};e.FormatSettings=O,e.formatSettings=new O;var k=function(){if(this.versionMajor=-1,this.versionMinor=-1,"undefined"!=typeof navigator){this.uagent=navigator.userAgent.toLowerCase(),this.opera=/mozilla/.test(this.uagent)&&/applewebkit/.test(this.uagent)&&/chrome/.test(this.uagent)&&/safari/.test(this.uagent)&&/opr/.test(this.uagent),this.safari=/applewebkit/.test(this.uagent)&&/safari/.test(this.uagent)&&!/chrome/.test(this.uagent)&&!/crios/.test(this.uagent),this.firefox=/mozilla/.test(this.uagent)&&/firefox/.test(this.uagent),this.chrome=/webkit/.test(this.uagent)&&/chrome/.test(this.uagent),this.crios=/applewebkit/.test(this.uagent)&&/safari/.test(this.uagent)&&/crios/.test(this.uagent),this.msie=/msie/.test(this.uagent),this.versionStr="";for(var e=["opera","safari","firefox","chrome","crios","msie"],t=0;t<e.length;t++){var n=e[t];if(this[n])try{if("opera"===n)this.versionStr=this.uagent.match(new RegExp("(opr)( |/)([0-9]+)"))[3];else if("safari"==n){var i=this.uagent.match(new RegExp("(version)( |/)([0-9.]+)"));this.debug=i,this.versionStr=i[3]}else this.versionStr=this.uagent.match(new RegExp("("+n+")( |/)([0-9]+)"))[3];break}catch(e){}}var r=this.versionStr.split(".");this.versionMajor=/^\d+$/.test(r[0])?parseInt(r[0]):-1,this.versionMinor=r.length>1&&/^\d+$/.test(r[1])?parseInt(r[1]):-1}else this.headless=!0,this.versionStr="0.0",this.versionMajor=0,this.versionMinor=0};e.BrowserInfo=k,e.browserInfo=new k;var R=function(){function e(){this.prefix=e.kCachePrefix}return e.prototype.store=function(e,t,n){if(void 0!==window.localStorage){var i=this.prefix+e,r={value:t,expires:n};window.localStorage.setItem(i,JSON.stringify(r))}},e.prototype.get=function(e){var t=null;if(void 0!==window.localStorage){var n=this.prefix+e,i=JSON.parse(window.localStorage.getItem(n));i&&((new Date).getTime()<Date.parse(i.expires)?t=i.value:window.localStorage.removeItem(n))}return t},e.kCachePrefix="com.goinfront.wtk.localstoragecache",e}();e.LocalStorageCache=R;var N=function(){};e.CallbackWithError=N;var L=function(){function e(e){this.totalCallbacks=0,this.returnedCallbacks=0,this.completeCallback=e,this.log=!1}return e.prototype.setDebug=function(e){this.log=e},e.prototype.addCallback=function(e,t){return this.totalCallbacks++,this.log&&IDS.DEBUG_VERBOSE&&IDS.log("Added Callback"+(t?"("+t+")":"")+" Total: "+this.totalCallbacks+", returned: "+this.returnedCallbacks),this.createCallback(e,t)},e.prototype.addCallbackWithError=function(e,t,n){this.totalCallbacks++;var i=new N;return i.callback=this.createCallback(e,n),i.error=this.createCallback(t,n),this.log&&IDS.DEBUG_VERBOSE&&IDS.log("Added Callback"+(n?"("+n+")":"")+" Total: "+this.totalCallbacks+", returned: "+this.returnedCallbacks),i},e.prototype.createCallback=function(e,t){var n=this;return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];e.apply(n,i),n.returnedCallbacks++,n.log&&IDS.DEBUG_VERBOSE&&IDS.log("Callback returned"+(t?" ("+t+")":"")+" Total: "+n.totalCallbacks+", returned: "+n.returnedCallbacks),n.returnedCallbacks==n.totalCallbacks&&n.completeCallback()}},e}();e.MultiCallbackHandler=L;var P=function(){function e(){this.observers=[]}return e.prototype.addObserver=function(e){this.removeObserver(e),this.observers.push(e)},e.prototype.removeObserver=function(e){for(var t=0;t<this.observers.length;t++)if(this.observers[t]===e){this.observers.splice(t,1);break}},e.prototype.foreach=function(e){for(var t=0;t<this.observers.length;t++)e(this.observers[t])},e.prototype.hasObservers=function(){return this.observers.length>0},e}();e.ObserverManager=P;var F=function(){function e(){this.targets=[]}return e.prototype.addTarget=function(e){this.targets.push(e)},e.prototype.removeTarget=function(e){var t=this.targets.indexOf(e);t>-1&&this.targets.splice(t,1)},e.prototype.updateTargets=function(e,t){var n=new InterLibraryLink.Message;n.type=e,n.value=t;for(var i=0;i<this.targets.length;i++)this.targets[i].receiveMessage(n)},e.prototype.isLinked=function(){return this.targets.length>0},e}();e.LinkTargetManager=F;var x=function(){function e(e,t){this.dataTypes=e,this.callback=t}return e.prototype.accepts=function(){return this.dataTypes?this.dataTypes:[]},e.prototype.receiveMessage=function(e){this.callback&&this.callback(e)},e}();e.InlineLinkTarget=x;var U=function(){function e(){}return e.getNames=function(e){return Object.keys(e).filter(function(e){return isNaN(parseInt(e,10))})},e.getValues=function(e){return Object.keys(e).map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)})},e}();e.EnumExport=U;var B,W,H=function(){function e(){this.parameters={};for(var e=new URL(window.location.href).hash.substr(1).split("&"),t=0;t<e.length;t++){var n=e[t].split("=");2==n.length&&(this.parameters[n[0]]=n[1])}}return e.prototype.has=function(e){return this.parameters.hasOwnProperty(e)},e.prototype.get=function(e){return this.has(e)?this.parameters[e]:null},e}();e.URLHashParameters=H,function(e){e[e.Insert=0]="Insert",e[e.Delete=1]="Delete",e[e.Clear=2]="Clear",e[e.Update=3]="Update"}(B=e.SortedListAction||(e.SortedListAction={})),function(e){e[e.Asc=0]="Asc",e[e.Desc=1]="Desc"}(W=e.SortedListSortOrder||(e.SortedListSortOrder={}));var V=function(){function e(e,t,n,i){this.data=[],this.sortOrder=W.Asc,this.sortOrder=t,this.compareCallback=n||function(e,t){return e<t?-1:e>t?1:0};for(var r=0;r<e.length;r++)this.insert(e[r]);this.updateCallback=i}return e.prototype.validIndex=function(e){return this.data&&e>=0&&e<this.data.length},e.prototype.get=function(e){return this.validIndex(e)?this.data[e]:null},e.prototype.remove=function(e){if(this.validIndex(e)){var t=this.data[e];this.data.splice(e,1),this.updateCallback&&this.updateCallback(B.Delete,[t])}},e.prototype.clear=function(){this.data=[],this.updateCallback&&this.updateCallback(B.Clear,[])},e.prototype.length=function(){return this.data.length},e.prototype.find=function(e){for(var t,n,i=0,r=this.data.length-1;i<=r;)if(t=i+r>>>1,n=this.compareCallback(this.data[t],e),this.sortOrder==W.Desc&&(n=-n),n<0)i=t+1;else{if(!(n>0))return t;r=t-1}return~i},e.prototype.insert=function(e,t){void 0===t&&(t=!0);var n=this.find(e);if(n>=0){if(!t){var i=this.data[n];return this.data[n]=e,this.updateCallback&&this.updateCallback(B.Update,[i,e]),n}}else n=~n;return this.data.splice(n,0,e),this.updateCallback&&this.updateCallback(B.Insert,[e]),n},e}();e.SortedList=V,e.mergeRecursiveCopy=function(e,i,r){void 0===r&&(r=!0);var a=n(e);return t(a,i,r),a},e.mergeRecursive=t,e.deepCopy=n,e.arrayDeepCopy=i,e.isArray=r,e.arraysAreEqual=function e(t,n){if(!t||!n)return!1;if(t.length!=n.length)return!1;for(var i=0;i<t.length;i++)if(t[i]instanceof Array&&n[i]instanceof Array){if(!e(t[i],n[i]))return!1}else if(o(t[i])&&o(n[i])){for(var r in t[i])if(t[i][r]instanceof Array&&n[i][r]instanceof Array){if(!e(t[i][r],n[i][r]))return!1}else if(t[i][r]!=n[i][r]&&!a(t[i][r]))return!1}else if(t[i]!=n[i])return!1;return!0},e.isLocalStorageSupported=function(){var e=!1;if("undefined"!=typeof window){var t=d();try{window.localStorage.setItem(t,"1"),window.localStorage.removeItem(t),e=!0}catch(e){}}return e},e.getClassName=function(e){var t=/function (.{1,})\(/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""},e.isFunction=a,e.isPrimitive=s,e.isObject=o,e.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.isString=function(e){return"string"==typeof e},e.isStringOrNull=function(e){return"string"==typeof e||null===e},e.isNumber=l,e.isBoolean=function(e){return"boolean"==typeof e},e.isDate=function(e){return e instanceof Date},e.isNumeric=c,e.isLetter=function(e){return e.toLowerCase()!=e.toUpperCase()},e.isIntegerString=function(e){return/^[0-9]+$/.test(e)},e.makeUUID=d,e.isSameValue=function(e,t,n){return void 0===n&&(n=0),!e&&!t||(0==n&&(n=Math.abs(.2-.3+.1)),e>t?e-t<=n:t-e<=n)},e.shiftArray=function(e,t){return t?function(e){for(var t=e[0],n=1;n<e.length;n++)e[n-1]=e[n];return e[e.length-1]=t,e}(e):function(e){for(var t=e[e.length-1],n=e.length-2;n>=0;n--)e[n+1]=e[n];return e[0]=t,e}(e)},e.sumArray=function(t){for(var n=0,i=0;i<t.length;i++)e.isNumber(t[i])&&(n+=t[i]);return n},e.noElementsUndefined=function(e){for(var t=!0,n=0;n<e.length;n++)if(void 0===e[n]){t=!1;break}return t},e.arrayContains=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1},e.checkArrayItems=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0},e.addInlineStyle=function(e,t){e.style.cssText=t},e.addClassName=function(t,n){e.isString(n)&&!u(t,n)&&(t.className=t.className?t.className+" "+n:n)},e.isMobileDevice=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},e.removeClassName=function(e,t){var n=e.className.split(" "),i=n.indexOf(t);i>-1&&(n.splice(i,1),e.className=n.join(" "))},e.hasClass=u;var G={click:"onclick"};e.addEventListener=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n);else if(e.attachEvent){var i=t;G.hasOwnProperty(t)&&(i=G[t]),e.attachEvent(i,n)}},e.removeEventListener=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n);else if(e.detachEvent){var i=t;G.hasOwnProperty(t)&&(i=G[t]),e.detachEvent(i,n)}},e.removeAllChildNodes=function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},e.validatePropertyExists=function(e,t){if("string"==typeof t)for(var n in e)if(e.hasOwnProperty(n)&&e[n]==t)return!0;return!1},e.getApiDateString=function(e){return e?e.getFullYear()+"-"+g(e.getMonth()+1)+"-"+g(e.getDate()):null},e.getTradingAlgoParamDateString=function(e){return e?""+e.getFullYear()+g(e.getMonth()+1)+g(e.getDate()):null},e.getTradingAlgoParamTimeString=function(e){return e?""+g(e.getHours())+g(e.getMinutes())+g(e.getSeconds()):null},e.parseIso8601DateString=function(e){var t=null,n=null,i=null,r=null;return 10==e.length&&(n=parseInt(e.substr(0,4)),i=parseInt(e.substr(5,2)),r=parseInt(e.substr(8,2))),n&&i&&r&&((t=new Date).setFullYear(n),t.setMonth(i-1),t.setDate(r)),t},e.parseTradingAlgoParamDateString=function(e){var t=null,n=null,i=null,r=null;if(8==e.length)n=parseInt(e.substr(0,4)),i=parseInt(e.substr(4,2)),r=parseInt(e.substr(6,2));else if(10==e.length){var a=new Date(e);n=a.getFullYear(),i=a.getMonth()+1,r=a.getDate()}return n&&i&&r&&((t=new Date).setFullYear(n),t.setMonth(i-1),t.setDate(r)),t},e.parseTradingAlgoParamTimeString=function(e){var t=null,n=null,i=null,r=null;return 8==e.length&&(n=parseInt(e.substr(0,2)),i=parseInt(e.substr(3,2)),r=parseInt(e.substr(6,2))),n&&i&&r&&((t=new Date).setHours(n),t.setMinutes(i),t.setSeconds(r)),t},e.formatTradingAlgoPriceString=function(e){return e.replace(",",".")},e.formatEnumString=function(e){if(e&&"string"==typeof e){for(var t=e.split("_"),n=0;n<t.length;n++)t[n]=t[n].toLowerCase().replace(/^./,function(e){return e.toUpperCase()});return t.join(" ")}return""},e.formatStandardTimestamp=function(t,n){return void 0===n&&(n=!0),e.isNumber(t.getTime())?v(t)?p(t,n):m(t):""},e.formatDate=function(e){return m(e)},e.formatDateTime=h,e.parsePlainTimeString=function(e){var t=null,n=e.split(":");return 3!=n.length&&2!=n.length||((t=new Date).setHours(parseInt(n[0])),t.setMinutes(parseInt(n[1])),t.setSeconds(3==n.length?parseInt(n[2]):0)),t},e.getPlainTimestring=p,e.getPlainDatestring=m,e.today=function(){var e=new Date;return e.setHours(0,0,0,0),e},e.addDays=function(e,t){var n=new Date(e.getTime());return n.setDate(e.getDate()+t),n},e.addMonths=function(e,t){var n=new Date(e.getTime());return n.setMonth(e.getMonth()+t),n},e.isTimeStampSameDate=function(e,t){return Math.floor(e/864e5)===Math.floor(t/864e5)},e.isSameDate=f,e.isLeapYear=function(e){return!(e%4>0||!(e%100>0)&&e%400>0)},e.daysInMonth=function(t,n){return[31,e.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},e.isToday=v,e.formatPercent=function(e,t){return void 0===t&&(t=2),"number"==typeof e?y(e,t)+"%":""},e.formatNumber=y,e.sign=function(t){return e.isNumber(t)?t>0?1:t<0?-1:0:NaN},e.formatID=function(e){var t,n=e.toString();return((t=n.indexOf("."))>-1||(t=n.indexOf(","))>-1)&&(n=n.substring(0,t)),n},e.formatAndShorten=function(e,t){var n=null;try{n=l(e)?T(e,t):c(e)?T(parseFloat(e),t):S(e,t)}catch(e){}return n},e.formatAndShortenInteger=T,e.parseFloatValue=function(t){return null!=t&&e.isNumeric(t)?parseFloat(t.replace(",",".")):null},e.roundFloat=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},e.parseNumber=function(t){var n=null;if(t){var i=e.formatSettings.useBrowserFormatting?e.formatSettings.browserThousandsSeparator:e.formatSettings.thousandsSeparator,r=e.formatSettings.useBrowserFormatting?e.formatSettings.browserDecimalSeparator:e.formatSettings.decimalSeparator,a=(n=(n=t.split(i).join("")).replace(r,"."))[n.length-1];"%"==a?(n=n.slice(0,n.length-1),e.isNumeric(n)?n/=100:n=null):a==e.formatSettings.mega?(n=n.slice(0,n.length-1),e.isNumeric(n)?n*=1e6:n=null):a==e.formatSettings.kilo?(n=n.slice(0,n.length-1),e.isNumeric(n)?n*=1e3:n=null):n=e.isNumeric(n)?Number(n):null}return n},e.setZeroTimeout=function(e){setTimeout(e,0)},e.parseJson=function(e){var t=null;try{t=JSON.parse(e)}catch(a){for(var n=e.split(""),i=0;i<n.length;i++)n[i].charCodeAt(0)<32&&(n.splice(i,1),i--);var r=n.join("");try{t=JSON.parse(r)}catch(e){IDS.DEBUG_VERBOSE&&IDS.log("Parsing error: "+e)}}return t},e.errorLogCallback=function(e,t){IDS.DEBUG_ERROR_LOG_CALLBACK&&IDS.log(t)},e.isPositive=function(e){return e>=0},e.isNM=function(e){try{return"N/M"==e.trim()||"N/M+"==e.trim()||"N/M-"==e.trim()}catch(e){return!1}},e.isNMPlus=function(e){try{return"N/M+"==e.trim()}catch(e){return!1}},e.isNMMinus=function(e){try{return"N/M-"==e.trim()}catch(e){return!1}},e.isNA=function(e){try{return"N/A"==e.trim()}catch(e){return!1}},e.removeSpaceAndPercent=function(e){var t=e;try{return t=(t=t.replace("%","")).replace(" ","")}catch(t){return e}},e.shorterName=S,e.replaceAll=function(e,t,n){return n.split(e).join(t)},e.debugLog=function(e,t){var n=t||null;if(w){var i="["+C()+"] -- "+e;null!=n?IDS.log(i,n):IDS.log(i)}},e.errorLog=function(e,t){var n=t||null;if(w){var i="[ERROR]["+C()+"] -- "+e;null!=n?IDS.log(i,n):IDS.log(i)}},e.allNullProperties=function(e){for(var t in e)if(null!==e[t]&&""!=e[t])return!1;return!0},e.getTime=C,e.htmlSanitize=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e?e.replace(/[&<>"'/]/gi,function(e){return t[e]}):e},e.padHex=function(e,t,n){void 0===t&&(t=8),void 0===n&&(n="0");var i=e?e.toString(16):"0";return i.length>=t?i:new Array(t-i.length+1).join(n)+i},e.getEnumStr=function(e,t,n){void 0===n&&(n=32);for(var i="",r=0;r<n;r++,0!=e)if(0!=(e&1<<r)){var a=t(1<<r);a&&(i+=i?", "+a:a),e-=1<<r}return i},e.getEnumStrings=function(e,t,n){void 0===n&&(n=32);for(var i=[],r=0;r<n;r++,0!=e)if(0!=(e&1<<r)){var a=t(1<<r);a&&i.push(a),e-=1<<r}return i},e.padToDblDigit=I,e.makeDbg=function(e){return'<dbg = style="color: #8ee3ff; border: solid 1px #005d7b; padding: 0 3px; border-radius: 2px">'+e+"</dbg>"},e.roundToPrecision=function(e,t){void 0===t&&(t=3);var n=Math.pow(10,t);return Math.round(e*n)/n},e.DateToInt=_,e.TimeToInt=M,e.DateNuToDate=E,e.DateFromDateNu=function(e){if(0==e)return null;var t=new Date(0);return E(e,t),t},e.DateFromDateAndTimeNu=function(e,t){var n=new Date;return n.setFullYear(e/1e4>>0,((e/100>>0)%100>>0)-1,e%100>>0),n.setUTCHours(t/1e4>>0,(t/100>>0)%100>>0,t%100>>0),n},e.DateNuToStr=function(e){if(0==e)return"";var t=(e/100%100>>0)-1,n=e%100>>0;return(e/1e4>>0).toString()+"."+I(t)+"."+I(n)},e.TimeNuToDate=function(e,t,n){t.setUTCHours(e/1e4>>0),t.setUTCMinutes(e/100%100>>0),t.setUTCSeconds(e%100>>0),t.setMinutes(t.getMinutes()-n)},e.GetNowDateAsInt=function(){return _(new Date)},e.GetNowTimeAsInt=function(){return M(new Date)},e.ToCommonframeworkDate=function(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),r=n<10?"0"+n.toString():n.toString(),a=i<10?"0"+i.toString():i.toString();return t.toString()+"-"+r+"-"+a},e.ToCommonframeworkTime=function(e){var t=e.getHours(),n=e.getMinutes(),i=e.getSeconds();return(t<10?"0"+t.toString():t.toString())+":"+(n<10?"0"+n.toString():n.toString())+":"+(i<10?"0"+i.toString():i.toString())},e.ToCommonframeworkTimeOffset=function(e){if(!e||-1===e||24e4===e)return"+00:00";var t=e<0?"-":"+",n=(e=Math.abs(e))/1e4>>>0,i=e%1e4>>>0;return t+((n<10?"0"+n.toString():n.toString())+":")+(i<10?"0"+i.toString():i.toString())}}(InfrontUtil||(InfrontUtil={})),function(e){var t=function(){function e(e,t,n){var i=this;this.object=e,this.transmitter=t,this.formatter=n,this.formatter&&this.formatter.listen&&this.formatter.listen(function(){void 0!==i.cachedValue&&i.valueUpdated(i.cachedValue)})}return e.prototype.cleanup=function(){this.formatter&&this.formatter.cleanupFormatter&&this.formatter.cleanupFormatter()},e.prototype.valueUpdated=function(e){this.advancedValueUpdated(e,null)},e.prototype.advancedValueUpdated=function(e,t){this.cachedValue=e;var n=this.formatter?this.formatter.format(e):e;return this.transmitter.transmit(this.object,n),!1},e}();e.GenericBinding=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.advancedValueUpdated=function(t,n){return e.prototype.advancedValueUpdated.call(this,t,n),!0},t}(t);e.AsyncGetBinding=n;var i=function(){function i(){}return i.createInlineBinding=function(n){return new t(null,new e.InlineTransmitter(n),null)},i.createAsyncGetBinding=function(t){return new n(null,new e.InlineTransmitter(t),null)},i.createValueBinding=function(n,i){return void 0===i&&(i="innerHTML"),new t(n,new e.FieldTransmitter(i),null)},i.createDOMElementBinding=function(n){return new t(n,new e.DOMElementTransmitter,null)},i.createNumberFormatValueBinding=function(n,i,r,a){return new t(n,new e.FieldTransmitter(i),r instanceof e.Observable?new e.DynamicNumberFormatter(r,a):new e.NumberFormatter(r,a))},i.createVolumeNumberBinding=function(n,i,r){return new t(n,new e.FieldTransmitter(i),new e.VolumeFormatter(r))},i.createShortenNumberBinding=function(n,i,r){return new t(n,new e.FieldTransmitter(i),new e.ShortenNumberFormatter(r))},i.createIDBinding=function(n,i){return new t(n,new e.FieldTransmitter(i),new e.IDFormatter)},i.createPercentBinding=function(n,i,r,a){return void 0===r&&(r="innerHTML"),new t(n,new e.FieldTransmitter(r),new e.PercentFormatter(i,a))},i.createTimestampBinding=function(n,i,r){return void 0===i&&(i=!0),void 0===r&&(r="innerHTML"),new t(n,new e.FieldTransmitter(r),new e.TimestampFormatter(i))},i.createDateBinding=function(n,i){return void 0===i&&(i="innerHTML"),new t(n,new e.FieldTransmitter(i),new e.DateFormatter)},i.createIdsDateBinding=function(n,i){return void 0===i&&(i="innerHTML"),new t(n,new e.FieldTransmitter(i),new e.IdsDateFormatter)},i.createTranslateBinding=function(n,i,r){return void 0===r&&(r="innerHTML"),new t(n,new e.FieldTransmitter(r),new e.InlineFormatter(i))},i.createBinding=function(e,n,i){return new t(e,i,n)},i.createObjectFieldBinding=function(n,i,r){return void 0===r&&(r="innerHTML"),new t(n,new e.FieldTransmitter(r),new e.ObjectFieldFormatter(i))},i.createHTMLAttributeBinding=function(n,i,r){return new t(n,new e.HTMLAttributeTransmitter(i),new e.InlineFormatter(r))},i}();e.BindingFactory=i;var r=function(){function e(e,t,n){this.boundEl=e,this.condition=n,this.className=t}return e.prototype.valueUpdated=function(e){this.condition(e)?InfrontUtil.addClassName(this.boundEl,this.className):InfrontUtil.removeClassName(this.boundEl,this.className)},e}();e.ClassBinding=r;var a=function(){function e(e){void 0===e&&(e=!0);var t=this;this.observers=[],this.changeListener=function(e){return t.selectedUpdated()},this.value=null}return e.prototype.getSelectedIndex=function(){return this.element?this.element.selectedIndex:this.value},e.prototype.bind=function(e){var t=this;this.element=e,null!=e&&null!=this.value&&(e.selectedIndex=this.value),InfrontUtil.addEventListener(e,"change",this.changeListener),this.notifyListenersOnBind&&InfrontUtil.setZeroTimeout(function(){t.selectedUpdated()})},e.prototype.unbind=function(){this.element&&(InfrontUtil.removeEventListener(this.element,"change",this.changeListener),this.element=null)},e.prototype.selectedUpdated=function(){for(var e=0;e<this.observers.length;e++)this.observers[e](this.element.selectedIndex)},e.prototype.setSelected=function(e,t){void 0===t&&(t=!0),this.value=e,this.element&&(this.element.selectedIndex=e,t&&this.selectedUpdated())},e.prototype.observe=function(e){this.observers.push(e)},e.prototype.setDisabled=function(e){this.element&&(e?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled"))},e}();e.SelectInputBinding=a;var s=function(){function e(){var e=this;this.observers=[],this.changeListener=function(t){return e.selectedUpdated()}}return e.prototype.bind=function(e){this.element=e,InfrontUtil.addEventListener(e,"change",this.changeListener),this.selectedUpdated()},e.prototype.unbind=function(){this.element&&(InfrontUtil.removeEventListener(this.element,"change",this.changeListener),this.element=null)},e.prototype.observe=function(e){this.observers.push(e)},e.prototype.selectedUpdated=function(){for(var e=0;e<this.observers.length;e++)this.observers[e](this.element.value)},e.prototype.setDisabled=function(e){this.element&&(e?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled"))},e.prototype.setSelected=function(e){this.element&&(this.element.selectedIndex=e)},e}();e.SelectStringValueInputBinding=s;var o=function(){function e(e){var t=this;this.boundElements=[],this.onChange=e,this.value=null,this.onClickEvent=function(e){t.elementClicked(e.srcElement)}}return e.prototype.getValue=function(){return this.value},e.prototype.setSelectedValue=function(e){for(var t=0;t<this.boundElements.length;t++);},e.prototype.elementClicked=function(e){var t=e.value;this.value!=t&&(this.value=t,this.onChange&&this.onChange(this.value))},e.prototype.bind=function(e){-1==this.boundElements.indexOf(e)&&(this.boundElements.push(e),InfrontUtil.addEventListener(e,"click",this.onClickEvent),e.checked&&(this.value=e.value))},e.prototype.unbind=function(){for(var e=0;e<this.boundElements.length;e++)InfrontUtil.removeEventListener(this.boundElements[e],"click",this.onClickEvent);this.boundElements=[]},e}();e.RadioInputBinding=o;var l=function(){function e(e){var t=this;this.onChange=e,this.value=null,this.onClickEvent=function(e){t.elementClicked(e.srcElement)}}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){this.value=e,this.element&&(this.element.checked=e)},e.prototype.elementClicked=function(e){this.value!=e.checked&&(this.value=e.checked,this.onChange&&this.onChange(this.value))},e.prototype.bind=function(e){this.element=e,this.value&&(e.checked=this.value),InfrontUtil.addEventListener(e,"click",this.onClickEvent),e.checked&&(this.value=e.checked)},e.prototype.unbind=function(){InfrontUtil.removeEventListener(this.element,"click",this.onClickEvent),this.element=null},e}();e.CheckBoxInputBinding=l;var c=function(){function e(){var e=this;this.lastvalue=null,this.observers=[],this.keyUpListener=function(t){return e.keyUp(t)},this.keyDownListener=function(t){return e.keyDown(t)},this.focusListener=function(t){return e.focus()},this.blurListener=function(t){return e.blur()},this.keyCodeObservers={},this.placeholder=null}return e.prototype.bind=function(t){this.element=t,this.lastvalue&&(this.element.value=this.lastvalue),InfrontUtil.addEventListener(t,"keyup",this.keyUpListener),InfrontUtil.addEventListener(t,"keydown",this.keyDownListener),this.scrolling&&InfrontUtil.addEventListener(t,"mousewheel",this.scrollCallback),this.onClickCallback&&InfrontUtil.addEventListener(t,"click",this.onClickCallback),InfrontUtil.addEventListener(t,"focus",this.focusListener),InfrontUtil.addEventListener(t,"blur",this.blurListener),null!=this.placeholder&&""===this.element.value&&(this.element.value=this.placeholder,this.element.setAttribute("placeholder",this.placeholder),InfrontUtil.addClassName(this.element,e.kPlaceholderClass)),this.validate()},e.prototype.unbind=function(){this.element&&(InfrontUtil.removeEventListener(this.element,"keyup",this.keyUpListener),InfrontUtil.removeEventListener(this.element,"keydown",this.keyDownListener),InfrontUtil.removeEventListener(this.element,"focus",this.focusListener),InfrontUtil.removeEventListener(this.element,"blur",this.blurListener),this.scrolling&&InfrontUtil.removeEventListener(this.element,"mousewheel",this.scrollCallback),this.onClickCallback&&InfrontUtil.removeEventListener(this.element,"click",this.onClickCallback),this.element=null)},e.prototype.setNumeric=function(e){this.numeric=e},e.prototype.setScrolling=function(e,t){this.scrolling=!0,this.scrollCallback=t},e.prototype.setOnClick=function(e){this.onClickCallback=e},e.prototype.isNumeric=function(t){if(0==t.altKey&&(0==t.shiftKey||t.keyCode==e.kKeycodeTab)&&0==t.ctrlKey){switch(t.keyCode){case e.kKeycodeLeftArrow:case e.kKeycodeRightArrow:case e.kKeycodeUpArrow:case e.kKeycodeDownArrow:case e.kKeycodeEnter:case e.kKeycodeEscape:case e.kKeycodeTab:case e.kKeycodeBackspace:case e.kKeycodeDelete:case e.kKeycodeNumpadComma:return!0}return t.keyCode>95&&t.keyCode<106||t.keyCode>47&&t.keyCode<58||188==t.keyCode||190==t.keyCode}},e.prototype.setValidator=function(e){this.validator=e,this.validate()},e.prototype.isValid=function(){return!this.validator||this.validator(this.lastvalue)},e.prototype.validate=function(){this.element&&(this.validator&&!this.validator(this.lastvalue)?InfrontUtil.addClassName(this.element,e.kInvalidClass):InfrontUtil.removeClassName(this.element,e.kInvalidClass))},e.prototype.setPlaceholder=function(e){this.placeholder=e},e.prototype.setEnabled=function(e){this.element&&(e?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled"))},e.prototype.isEnabled=function(){var e=!0;return this.element&&this.element.getAttribute("disabled")&&(e=!1),e},e.prototype.focus=function(){null!=this.placeholder&&this.element.value===this.placeholder&&(this.element.value="",this.element.setAttribute("placeholder",this.placeholder),InfrontUtil.removeClassName(this.element,e.kPlaceholderClass)),this.focusCallback&&this.focusCallback()},e.prototype.blur=function(){this.blurCallback&&this.blurCallback(),this.valueUpdated(),null!=this.placeholder&&""===this.element.value&&(this.element.value=this.placeholder,this.element.setAttribute("placeholder",this.placeholder),InfrontUtil.addClassName(this.element,e.kPlaceholderClass))},e.prototype.keyDown=function(t){if(this.numeric&&(this.isNumeric(t)||t.preventDefault()),!t.defaultPrevented&&t.keyCode){var n=t.keyCode.toString();if(this.keyCodeObservers.hasOwnProperty(n)){for(var i=this.keyCodeObservers[n],r=0;r<i.length;r++)i[r](t.keyCode);t.keyCode!=e.kKeycodeTab&&t.keyCode!=e.kKeycodeBackspace&&t.preventDefault()}}},e.prototype.keyUp=function(e){this.numeric&&(this.isNumeric(e)||e.preventDefault()),e.defaultPrevented||(e.keyCode,this.valueUpdated(),e.preventDefault())},e.prototype.valueUpdated=function(){this.element&&this.lastvalue!=this.element.value&&(this.lastvalue=this.element.value,this.updateObservers(),this.validate())},e.prototype.updateObservers=function(){for(var e=0;e<this.observers.length;e++)this.observers[e](this.lastvalue)},e.prototype.onFocus=function(e){this.focusCallback=e},e.prototype.onBlur=function(e){this.blurCallback=e},e.prototype.observe=function(e){this.observers.push(e)},e.prototype.observeSpecialKeys=function(e,t){var n;"number"==typeof e?(n=[]).push(e):n=e;for(var i=0;i<n.length;i++)this.addKeyCodeObserver(n[i],t)},e.prototype.addKeyCodeObserver=function(e,t){var n=e.toString();this.keyCodeObservers.hasOwnProperty(n)||(this.keyCodeObservers[n]=[]),this.keyCodeObservers[n].push(t)},e.prototype.get=function(){return this.lastvalue},e.prototype.set=function(e,t){void 0===t&&(t=!0),InfrontUtil.isNumber(e)&&(e=e.toString()),this.element&&(this.element.value=e),this.lastvalue=e,t&&this.updateObservers(),this.validate()},e.prototype.requestFocus=function(){this.element&&this.element.focus()},e.prototype.requestBlur=function(){this.element&&this.element.blur()},e.prototype.getElement=function(){return this.element},e.kPlaceholderClass="cell-input--placeholder",e.kInvalidClass="cell-input--invalid",e.kKeycodeLeftArrow=37,e.kKeycodeRightArrow=39,e.kKeycodeUpArrow=38,e.kKeycodeDownArrow=40,e.kKeycodeEnter=13,e.kKeycodeEscape=27,e.kKeycodeTab=9,e.kKeycodeBackspace=8,e.kKeycodeDelete=46,e.kKeycodeNumpadComma=110,e.kKeycodeSpace=32,e}();e.TextInputBinding=c;var d=function(){function e(e,t,n){this.el=e,this.factory=t,this.observer=n}return e.prototype.reInit=function(e){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)},e.prototype.itemAdded=function(e,t){var n=this.factory.createRow(e,t);if(t<this.el.childNodes.length){var i=this.el.childNodes[t];this.el.insertBefore(n,i)}else this.el.appendChild(n);null!=this.observer&&this.observer.htmlElementTreeAdded(n,e,t)},e.prototype.itemRemoved=function(e,t){var n=this.el.childNodes[t];n&&(this.el.removeChild(n),null!=this.observer&&this.observer.htmlElementTreeRemoved(n,e,t))},e.prototype.itemMoved=function(e,t,n){var i=this.el.childNodes[t];if(i){this.el.removeChild(i);var r=n>t?n-1:n;if(r>=this.el.childNodes.length)this.el.appendChild(i);else{var a=this.el.childNodes[r];this.el.insertBefore(i,a)}null!=this.observer&&this.observer.htmlElementTreeMoved(i,e,t,n)}},e}();e.ArrayBinding=d;var u=function(){function e(e,t,n,i,r,a){var s=this;this.startIndex=0,this.endIndex=0,this.element=e,this.topExpander=t,this.bottomExpander=n,this.rowFactory=i,this.observer=r,this.rowHeight=a,this.data=[],this.element.addEventListener("scroll",function(){return s.updateView()})}return e.prototype.reInit=function(e){for(this.data=[];this.topExpander.nextElementSibling!=this.bottomExpander;)this.element.removeChild(this.topExpander.nextElementSibling);for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)},e.prototype.itemAdded=function(e,t){if(this.data.splice(t,0,e),t<this.startIndex)this.startIndex++;else if(t>this.endIndex);else{var n=t-this.startIndex+1,i=this.element.children[n];this.insertNewRowBefore(t,i),this.endIndex++}1==this.data.length&&(this.startIndex=0,this.endIndex=0),this.updateView()},e.prototype.itemRemoved=function(e,t){if(t<this.startIndex)this.startIndex--;else if(t>this.endIndex);else{var n=t-this.startIndex+1,i=this.element.children[n];this.removeRow(t,i),this.endIndex--}this.data.splice(t,1),0==this.data.length&&(this.startIndex=0,this.endIndex=0),this.updateView()},e.prototype.itemMoved=function(e,t,n){if(this.isInViewport(t)&&this.isInViewport(n)){var i=t-this.startIndex+1,r=this.element.children[i];this.element.removeChild(r);var a=(n>t?n-1:n)-this.startIndex+1,s=this.element.childNodes[a];this.element.insertBefore(r,s),this.observer&&this.observer.htmlElementTreeMoved(r,e,t,n)}else if(this.isInViewport(t)){var o=t-this.startIndex+1,l=this.element.children[o];this.removeRow(t,l),n<this.startIndex?this.startIndex++:n>this.endIndex&&this.endIndex--}else if(this.isInViewport(n)){var c=n-this.startIndex+1,d=this.element.children[c];this.insertNewRowBefore(n,d),t<this.startIndex?this.startIndex--:t>this.endIndex&&this.endIndex++}else t<this.startIndex&&n>this.endIndex?(this.startIndex--,this.endIndex--):t>this.endIndex&&n<this.startIndex&&(this.startIndex++,this.endIndex++);this.data.splice(t,1),this.data.splice(n,0,e),this.updateView()},e.prototype.isInViewport=function(e){return e>=this.startIndex&&e<=this.endIndex},e.prototype.updateView=function(){var e=this.element.scrollTop,t=this.element.offsetHeight,n=Math.ceil(t/this.rowHeight),i=Math.min(n,this.data.length),r=Math.max(Math.floor(e/this.rowHeight),0),a=Math.max(this.data.length-(r+n),0),s=r,o=s+i-1;if(s!=this.startIndex||o!=this.endIndex)if(s>this.startIndex+n||o<this.startIndex){for(var l=this.startIndex;l<=this.endIndex;l++)this.removeRow(l,this.topExpander.nextSibling);for(l=s;l<=o;l++)this.insertNewRowBefore(l,this.bottomExpander);this.startIndex=s,this.endIndex=o}else{for(;s>this.startIndex;)this.topExpander.nextSibling&&this.removeRow(this.startIndex,this.topExpander.nextSibling),this.startIndex++;for(;this.endIndex>o;)this.bottomExpander.previousSibling&&this.removeRow(this.endIndex,this.bottomExpander.previousSibling),this.endIndex--;for(;s<this.startIndex;)this.insertNewRowBefore(--this.startIndex,this.topExpander.nextSibling);for(;this.endIndex<o;)this.insertNewRowBefore(++this.endIndex,this.bottomExpander)}var c=r*this.rowHeight;this.topExpander.style.height=c+"px";var d=a*this.rowHeight;this.bottomExpander.style.height=d+"px"},e.prototype.insertNewRowBefore=function(e,t){var n=this.createRow(e);this.element.insertBefore(n,t),this.observer&&this.observer.htmlElementTreeAdded(n,this.data[e],e)},e.prototype.removeRow=function(e,t){this.element.removeChild(t),this.observer&&this.observer.htmlElementTreeRemoved(t,this.data[e],e)},e.prototype.createRow=function(e){var t=this.data[e];return this.rowFactory.createRow(t,e)},e}();e.FastArrayBinding=u;var h=function(){function e(e){this.createRowFunction=e}return e.prototype.createRow=function(e,t){return this.createRowFunction(e,t)},e}();e.InlineRowFactory=h}(Infront||(Infront={})),function(e){var t=function(){function e(){this.data=[],this.obs=[],this.lengthObservable=new l,this.isReInitializing=!1,this.id="ObservableArray"+e.counter++,this.updateLengthObservable()}return e.prototype.get=function(){return this.data},e.prototype.insert=function(e,t){this.data.splice(t,0,e),this.updateInserted(e,t)},e.prototype.remove=function(e){var t=this.data.indexOf(e);t>-1&&(this.data.splice(t,1),this.updateRemoved(e,t))},e.prototype.removeItemAt=function(e){var t=null;return e>=0&&e<this.data.length&&(t=this.data[e],this.data.splice(e,1),this.updateRemoved(t,e)),t},e.prototype.push=function(e){this.data.push(e),this.updateInserted(e,this.data.length-1)},e.prototype.pop=function(){return this.removeItemAt(this.data.length-1)},e.prototype.move=function(e,t){var n=this.data.indexOf(e);n>-1?(n!=t&&(this.data.splice(n,1),this.data.splice(t>n?t-1:t,0,e)),this.updateMoved(e,n,t)):IDS.DEBUG_VERBOSE&&IDS.log("Trying to move missing object. ("+this.id+")")},e.prototype.clear=function(){for(;this.data.length>0;)this.removeItemAt(this.data.length-1);this.updateLengthObservable()},e.prototype.updateLengthObservable=function(){this.isReInitializing||this.lengthObservable.set(this.data.length)},e.prototype.sort=function(e){var t=[].concat(this.data);t.sort(e);for(var n=0;n<t.length;n++)this.move(t[n],n)},e.prototype.foreach=function(e){for(var t=0;t<this.data.length;t++)e(this.data[t])},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n=null,i=t?this.data.length-1:0;t?i>=0:i<this.data.length;t?i--:i++)if(e(this.data[i])){n=this.data[i];break}return n},e.prototype.replaceWith=function(e){if(this.isReInitializing=!0,this.clear(),e)for(var t=0;t<e.length;t++)this.data.push(e[t]);for(var n=0;n<this.obs.length;n++)this.obs[n].reInit(this.data);this.isReInitializing=!1,this.updateLengthObservable()},e.prototype.length=function(){return this.data.length},e.prototype.item=function(e){return this.data[e]},e.prototype.lastItem=function(){return this.data.length>0?this.data[this.data.length-1]:null},e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.contains=function(e){return this.data.lastIndexOf(e)>-1},e.prototype.observe=function(e){this.obs.push(e),e.reInit(this.data)},e.prototype.unbind=function(e){var t=this.obs.indexOf(e);t>=0&&this.obs.splice(t,1)},e.prototype.updateInserted=function(e,t){for(var n=0;n<this.obs.length;n++)this.obs[n].itemAdded(e,t);this.updateLengthObservable()},e.prototype.updateRemoved=function(e,t){for(var n=0;n<this.obs.length;n++)this.obs[n].itemRemoved(e,t);this.updateLengthObservable()},e.prototype.updateMoved=function(e,t,n){for(var i=0;i<this.obs.length;i++)this.obs[i].itemMoved(e,t,n)},e.counter=0,e}();e.ObservableArray=t;var n=function(e){function t(t,n){void 0===n&&(n=!0);var i=e.call(this)||this;return i.allowDuplicates=n,i.compareFunction=t,i}return __extends(t,e),t.prototype.findInsertIndex=function(e,t,n){if(n-t<5){for(var i=t,r=t;r<=n;r++)if(this.compareFunction(e,this.data[r])>=0&&(r>=n||this.compareFunction(e,this.data[r+1])<=0)){i=r+1;break}return i}var a=Math.floor(t+(n-t)/2);return this.compareFunction(e,this.data[a])>0?this.findInsertIndex(e,a,n):this.findInsertIndex(e,t,a)},t.prototype.replaceWith=function(t){var n=[].concat(t);n.sort(this.compareFunction),e.prototype.replaceWith.call(this,n)},t.prototype.push=function(t){var n=this.findInsertIndex(t,0,this.data.length-1);(this.allowDuplicates||this.data.length<=n||0!=this.compareFunction(t,this.data[n])&&(0==n||0!=this.compareFunction(t,this.data[n-1])))&&e.prototype.insert.call(this,t,n)},t.prototype.findObjectItemIndex=function(e,t){return this.data.map(function(e){return e[t]}).indexOf(e[t])},t.prototype.insert=function(e,t){this.push(e)},t.prototype.setCompareFunction=function(e){this.compareFunction=e,this.sort(this.compareFunction)},t}(t);e.SortedObservableArray=n;var i=function(){function e(e,t,n){void 0===n&&(n=null),this.cap=t,this.obs=[],this.backing=e,this.backing&&this.backing.observe(this),this.paddingItem=n}return e.prototype.createTempDataArray=function(){for(var e=[],t=this.backing.length(),n=null!=this.paddingItem?this.cap:Math.min(t,this.cap),i=0;i<n;i++)i<t?e.push(this.backing.item(i)):null!=this.paddingItem&&e.push(this.paddingItem);return e},e.prototype.setCap=function(e){this.cap!=e&&(this.cap=e,this.reInit(null))},e.prototype.observe=function(e){this.obs.push(e),this.backing&&e.reInit(this.createTempDataArray())},e.prototype.unbind=function(e){var t=this.obs.indexOf(e);t>=0&&this.obs.splice(t,1)},e.prototype.reInit=function(e){for(var t=this.createTempDataArray(),n=0;n<this.obs.length;n++)this.obs[n].reInit(t)},e.prototype.itemAdded=function(e,t){t<this.cap&&(this.updateInserted(e,t),this.backing.length()>this.cap?this.updateRemoved(this.backing.item(this.cap),this.cap):null!=this.paddingItem&&this.updateRemoved(this.paddingItem,this.cap))},e.prototype.itemRemoved=function(e,t){t<this.cap&&(this.updateRemoved(e,t),this.backing.length()>=this.cap?this.updateInserted(this.backing.item(this.cap-1),this.cap-1):null!=this.paddingItem&&this.updateInserted(this.paddingItem,this.cap-1))},e.prototype.itemMoved=function(e,t,n){t<this.cap&&n<this.cap?this.updateMoved(e,t,n):t<this.cap?this.itemRemoved(e,t):n<this.cap&&this.itemAdded(e,n)},e.prototype.updateInserted=function(e,t){for(var n=0;n<this.obs.length;n++)this.obs[n].itemAdded(e,t)},e.prototype.updateRemoved=function(e,t){for(var n=0;n<this.obs.length;n++)this.obs[n].itemRemoved(e,t)},e.prototype.updateMoved=function(e,t,n){for(var i=0;i<this.obs.length;i++)this.obs[i].itemMoved(e,t,n)},e}();e.ObservableArrayCap=i;var r=function(e){function t(t,n,i){void 0===i&&(i=null);var r=e.call(this,null,n,i)||this;return r.cache=t,r.cacheKey=null,r.bound=!1,r}return __extends(t,e),t.prototype.reInit=function(t){this.bound&&!this.backing&&(this.backing=this.cache.getArray(this.cacheKey)),e.prototype.reInit.call(this,t)},t.prototype.unbindFromCache=function(){this.backing=null,this.bound=!1,this.cacheKey&&this.cache.unbindFromArray(this.cacheKey,this)},t.prototype.bindToCache=function(e){this.bound=!0,this.cacheKey=e,this.cache.bindToArray(e,this)},t}(i);e.CachedObservableArrayCap=r;var a=function(){function e(e,t){void 0===t&&(t=null),this.target=e,this.filter=t}return e.prototype.setSource=function(e){this.source.unbind(this),this.target.clear(),this.source=e,this.source.observe(this)},e.prototype.reInit=function(e){var t=[];if(this.filter)for(var n=0;n<e.length;n++)this.filter(e[n])&&t.push(e[n]);else t=e;this.target.replaceWith(t)},e.prototype.itemAdded=function(e,t){InfrontUtil.isFunction(this.filter)&&!this.filter(e)||this.target.insert(e,t)},e.prototype.itemRemoved=function(e,t){this.target.remove(e)},e.prototype.itemMoved=function(e,t,n){},e.prototype.destroy=function(){this.target=null,this.source&&this.source.unbind(this),this.source=null,this.filter=null},e}();e.ObservableArraySync=a;var s,o=function(){function e(e){this.array=e,this.rowCount=new l,this.rowCount.set(0),this.array.observe(this)}return e.prototype.unbind=function(){this.array.unbind(this)},e.prototype.update=function(){this.rowCount.set(this.array.length())},e.prototype.reInit=function(e){this.update()},e.prototype.itemAdded=function(e,t){this.update()},e.prototype.itemRemoved=function(e,t){this.update()},e.prototype.itemMoved=function(e,t,n){this.update()},e}();e.ObservableArrayRowCounter=o,function(e){e[e.None=0]="None",e[e.Asynchronous=1]="Asynchronous",e[e.Synchronous=2]="Synchronous"}(s=e.InitialUpdate||(e.InitialUpdate={}));var l=function(){function e(e){void 0===e&&(e=null),this.bindings=[],this.value=e,this.infrontObservable=!0}return e.prototype.updateBinding=function(e){e.advancedValueUpdated?e.advancedValueUpdated(this.value,null)&&this.unbind(e):e.valueUpdated(this.value)},e.prototype.observe=function(e,t){var n=this;void 0===t&&(t=s.Asynchronous),this.bindings.push(e),null!=this.value&&t!=s.None&&(t==s.Asynchronous?InfrontUtil.setZeroTimeout(function(){n.bindings.indexOf(e)>-1&&n.updateBinding(e)}):this.updateBinding(e))},e.prototype.unbind=function(e){var t=this.bindings.indexOf(e);t>=0&&(this.bindings.splice(t,1),e.cleanup&&e.cleanup())},e.prototype.updateBindings=function(e){for(var t=[],n=0;n<this.bindings.length;n++)this.bindings[n].advancedValueUpdated?this.bindings[n].advancedValueUpdated(this.get(),e)&&t.push(this.bindings[n]):this.bindings[n].valueUpdated(this.get());for(;t.length>0;)this.unbind(t.pop())},e.prototype.set=function(e){if(this.value!=e){var t=this.value;this.value=e,this.updateBindings(t)}},e.prototype.get=function(){return this.value},e.prototype.isNull=function(){return null===this.value},e.prototype.count=function(){return this.bindings.length},e.isObservable=function(t){return t instanceof e},e}();e.Observable=l;var c=function(e){function t(t){var n=e.call(this)||this;return n.translate=t,n}return __extends(t,e),t.prototype.valueUpdated=function(e){InfrontUtil.isFunction(this.translate)?this.set(this.translate(e)):this.set(e)},t}(l);e.ObservableBinding=c;var d=function(e){function t(t,n,i){void 0===i&&(i=!1);var r=e.call(this)||this;r.args=t,r.computation=n,r.needAllArgs=i;for(var a=0;a<r.args.length;a++)r.args[a].observe(r,s.None);return r.valueUpdated(null),r}return __extends(t,e),t.prototype.set=function(e){},t.prototype.valueUpdated=function(t){for(var n=[],i=0,r=this.args;i<r.length;i++){var a=r[i];n.push(a.get())}if(!this.needAllArgs||-1==n.indexOf(null)){var s=this.computation(n);e.prototype.set.call(this,s)}},t.prototype.unbindAll=function(){for(var e=0;e<this.args.length;e++)this.args[e].unbind(this)},t}(l);e.ComputedObservable=d;var u=function(e){function t(t,n,i){var r=e.call(this)||this;r.computation=i,r.cache=t,r.fields=n,r.unbinds=[];for(var a=0;a<n.length;a++)r.unbinds.push(t.customBind(n[a].cacheKey,n[a].fieldSpec,r));return r.valueUpdated(null),r}return __extends(t,e),t.prototype.set=function(e){},t.prototype.valueUpdated=function(t){for(var n=[],i=0;i<this.fields.length;i++){var r=this.cache.get(this.fields[i].cacheKey,this.fields[i].fieldSpec);n.push(r)}var a=this.computation(n);e.prototype.set.call(this,a)},t.prototype.unbindAll=function(){for(var e=0;e<this.unbinds.length;e++)this.unbinds[e]()},t}(l);e.CacheComputedObservable=u;var h=function(t){function n(e,n,i,r,a){var s=t.call(this)||this;return s.cache=e,s.cacheKeyCreator=r,s.weightFieldCacheKeyCreator=a,s.avgField=n,s.weightField=i,s.valueMap={},s.weightMap={},s.unbindMap={},s}return __extends(n,t),n.prototype.set=function(e){},n.prototype.update=function(){var e=0,n=0;for(var i in this.valueMap)this.valueMap.hasOwnProperty(i)&&(e+=this.weightMap[i],n+=this.valueMap[i]*this.weightMap[i]);t.prototype.set.call(this,n/e)},n.prototype.reInit=function(e){for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)},n.prototype.itemAdded=function(t,n){var i=this,r=this.cacheKeyCreator(t),a=[],s=e.BindingFactory.createInlineBinding(function(e){i.valueMap[r]=e,i.update()});if(a.push(this.cache.customBind(r,this.avgField,s)),this.weightField){var o=this.weightFieldCacheKeyCreator(t),l=e.BindingFactory.createInlineBinding(function(e){i.weightMap[r]=e,i.update()});a.push(this.cache.customBind(o,this.weightField,l))}else this.weightMap[r]=1;this.unbindMap[r]=function(){for(var e=0;e<a.length;e++)a[e]()}},n.prototype.itemRemoved=function(e,t){var n=this.cacheKeyCreator(e);this.unbindMap[n](),delete this.unbindMap[n],delete this.valueMap[n],delete this.weightMap[n],this.update()},n.prototype.itemMoved=function(e,t,n){},n}(l);e.CacheWeightedAverageObservable=h;var p=function(t){function n(n,i,r,a,s){void 0===s&&(s=e.ComputationStrategy.PASSIVE);var o=t.call(this)||this;return o.field=InfrontUtil.isArray(i)?i:[i],o.cache=n,o.cacheKeyCreator=r,o.computation=a,o.strategy=s,o.valueMap={},o.unbindMap={},o.observedKeys=[],o}return __extends(n,t),n.prototype.set=function(e){},n.prototype.update=function(){var n=!0;if(this.strategy==e.ComputationStrategy.PASSIVE)for(var i=0;i<this.observedKeys.length;i++)n=n&&this.valueMap.hasOwnProperty(this.observedKeys[i])&&InfrontUtil.isNumber(this.valueMap[this.observedKeys[i]]);else if(this.strategy==e.ComputationStrategy.FIRST_RESULT)for(i=0;i<this.observedKeys.length;i++)if(!this.valueMap.hasOwnProperty(this.observedKeys[i])&&!this.cache.has(this.observedKeys[i],e.BindingCache.kCacheTimestampField)){n=!1;break}if(n){var r=[];for(var a in this.valueMap)this.valueMap.hasOwnProperty(a)&&r.push(this.valueMap[a]);t.prototype.set.call(this,this.computation(r))}},n.prototype.reInit=function(e){for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)},n.prototype.itemAdded=function(t,n){var i=this,r=this.cacheKeyCreator(t);this.observedKeys.push(r);var a=e.BindingFactory.createInlineBinding(function(e){i.unbindMap.hasOwnProperty(r)&&(i.valueMap[r]=e,i.update())});this.unbindMap[r]=this.cache.customBind(r,this.field,a)},n.prototype.itemRemoved=function(e,t){var n=this.cacheKeyCreator(e);this.unbindMap[n](),delete this.unbindMap[n],delete this.valueMap[n];var i=this.observedKeys.indexOf(n);i>-1&&this.observedKeys.splice(i,1),this.update()},n.prototype.itemMoved=function(e,t,n){},n}(l);e.CacheColumnComputedObservable=p;var m=function(e){function t(){var t=e.call(this)||this;return t.overrideActive=!1,t}return __extends(t,e),t.prototype.set=function(t){this.overrideActive?this.actualValue=t:e.prototype.set.call(this,t)},t.prototype.override=function(e){this.set(e),this.overrideActive=!0},t.prototype.clearOverride=function(){this.overrideActive=!1,e.prototype.set.call(this,this.actualValue)},t}(l);e.OverridableObservable=m}(Infront||(Infront={})),function(e){var t;!function(e){e[e.Ok=200]="Ok",e[e.BadRequest=400]="BadRequest",e[e.BadOrExpiredToken=401]="BadOrExpiredToken",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.StoredObjectNotFound=404]="StoredObjectNotFound",e[e.Timeout=408]="Timeout",e[e.Conflict=409]="Conflict"}(t=e.CalculatorStatus||(e.CalculatorStatus={}));var n=function(){function e(){}return e.prototype.assign=function(e){var t=!0;try{for(var n=JSON.parse(e),i=0,r=Object.keys(n);i<r.length;i++){var a=r[i];this[a.split("-").join("_")]=n[a]}}catch(e){t=!1,IDS.log("Invalid json data",e)}return t},e}();e.ApiAccessToken=n;var i=function(){this.tokenRefreshCount=0};e.CalculationRequest=i;var r=function(){function e(){}return e.prototype.getParams=function(){for(var e="",t=0,n=Object.keys(this);t<n.length;t++){var i=n[t];if(!InfrontUtil.isFunction(this[i])&&!InfrontUtil.isObject(this[i])){var r=this[i],a=i+"="+encodeURIComponent(r);e+=0==e.length?a:"&"+a}}return e},e}();e.CalculationRequestOptions=r;var a=function(){function t(){var t=this;this.data={},this.arrays={},this.getCurrency=function(){return t.currency||(t.currency=t.getValue(e.getCurrencyField(t.objectType))),t.currency?t.currency:""}}return t.prototype.clear=function(){for(var e=0,t=Object.keys(this.arrays);e<t.length;e++){var n=t[e];this.arrays[n].clear()}for(var i=0,r=Object.keys(this.data);i<r.length;i++)n=r[i],this.data[n].set(void 0);this.currency=void 0},t.prototype.getVal=function(t,n){void 0===n&&(n=!0);var i=this.data[t];return!i&&n&&(i=this.data[t]=new e.ValueCalculator(e.getCalculatorField(this.objectType,t),this.getCurrency)),i},t.prototype.getArray=function(t,n){void 0===n&&(n=!0);var i=this.arrays[t];return!i&&n&&(i=this.arrays[t]=new e.ObservableArray),i},t.prototype.getField=function(e){return this.getVal(e)},t.prototype.getValue=function(e){var t=this.getVal(e,!1);return null==t?null:t.get()},t.prototype.setValue=function(e,t){var n=this.getVal(e);return n.set(t),n},t.prototype.inspect=function(){var t={};t.objectType=this.objectType;for(var n=0,i=Object.keys(this.arrays);n<i.length;n++){var r=i[n],a=this.arrays[r];t[e.calculatorTagToStr(this.objectType,Number(r))]=a.data}for(var s=0,o=Object.keys(this.data);s<o.length;s++){r=o[s];var l=this.data[r];t[e.calculatorTagToStr(this.objectType,Number(r))]=l.getRaw()}return t},t.prototype.updateCurrencyFields=function(){for(var e=0,t=Object.keys(this.data);e<t.length;e++){var n=t[e],i=this.data[n];i.isCurrencyField()&&i.updateBindings(null)}},t.prototype.formatNumber=function(e,t){return 0!=e||t.displayZeroValues?InfrontUtil.formatNumber(e,t.decimals):"-"},t.prototype.processObject=function(t,n){for(var i=0,r=Object.keys(n);i<r.length;i++){var a=r[i],s=n[a];if(InfrontUtil.isArray(s)){var o=e.getTagForObjectType(this.objectType,a),l=this.getArray(o);this.processArray(l,a,s)}else InfrontUtil.isObject(s)||this.processValue(a,s)}this.updateCurrencyFields()},t.prototype.processArray=function(t,n,i){for(var r=0;r<i.length;r++){var a=i[r];if(InfrontUtil.isObject(a))for(var s=0,o=Object.keys(a);s<o.length;s++){var l=o[s],c=e.getArrayField(this.objectType,n,l),d=a[l],u=c.displayField?c.displayField:l;switch(c.fieldType){case e.CalculatorFieldType.NumericField:d=this.formatNumber(d,c);break;case e.CalculatorFieldType.DateField:var h=InfrontUtil.parseIso8601DateString(d);d=InfrontUtil.formatDate(h);break;case e.CalculatorFieldType.CurrencyField:d=this.formatNumber(d,c);break;case e.CalculatorFieldType.PercentField:d=this.formatNumber(100*d,c)}null==d&&(d=""),a[u]=d}t.push(a)}},t.prototype.processValue=function(t,n){var i=e.getTagForObjectType(this.objectType,t);this.setValue(i,n)},t}();e.BaseCalculatorObject=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.inspect=function(){var t=e.prototype.inspect.call(this);return t.status=this.status,t.statusText=this.statusText,t},t.prototype.readMetaNode=function(e){},t.prototype.assign=function(e){var t=!0;this.clear();try{var n=JSON.parse(e);InfrontUtil.isObject(n)&&(this.readDataNode(n._data),this.readMetaNode(n._meta))}catch(e){t=!1,IDS.log("Invalid json data",e)}return t},t}(a);e.CalculatorResponse=s;var o=function(){function e(e){if(InfrontUtil.isObject(e))for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];this[i]="evaluation_date"==i?InfrontUtil.parseIso8601DateString(e[i]):e[i]}}return e.prototype.hasValidContent=function(){return null!=this.currency&&null!=this.present_value_fix&&null!=this.present_value_float},e}();e.CashFlowItem=o;var l=function(t){function n(){var n=t.call(this)||this;return n.objectType=e.CalculatorObjectType.Swap,n}return __extends(n,t),n.prototype.readDataNode=function(e){t.prototype.processObject.call(this,this,e[0].swap)},n}(s);e.CalculatorSwapResponse=l;var c=function(t){function n(){var n=t.call(this)||this;return n.objectType=e.CalculatorObjectType.Bond,n}return __extends(n,t),n.prototype.readDataNode=function(e){t.prototype.processObject.call(this,this,e[0].bond_info)},n}(s);e.CalculatorBondResponse=c;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grant_type="password",t}return __extends(t,e),t}(r);e.ApiGetTokenRequest=d;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grant_type="refresh_token",t}return __extends(t,e),t}(r);e.ApiRefreshTokenRequest=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r);e.CalculateSwapRequest=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r);e.CalculateBondsRequest=p;var m=function(){function e(e){var t=this;this.requestCalculatorData=function(e){var n=new XMLHttpRequest,i=t.calculatorUrl+e.command+"?"+e.options.getParams();n.withCredentials=!1,IDS.log("requestCalculatorData",i),n.addEventListener("readystatechange",function(){4===this.readyState&&e.processResponse(this)}),n.open("GET",i),n.setRequestHeader("Authorization","Bearer "+t.token.access_token),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("cache-control","no-cache"),n.send(null)},this.idsCore=e,this.getServerSettings()}return e.prototype.getServerSettings=function(){var e=this.idsCore.login.getFeatureStrings();this.credentials=new d,this.accessUrl=e.vwd_accessUrl,this.calculatorUrl=e.vwd_calculatorUrl,this.credentials.username=e.vwd_username,this.credentials.password=e.vwd_password,this.credentials.client_id=e.vwd_client_id,this.credentials.client_secret=e.vwd_client_secret},e.prototype.sendTokenRequest=function(e){var t=this.credentials.getParams(),n=new XMLHttpRequest;n.withCredentials=!0,n.addEventListener("readystatechange",function(){4===this.readyState&&e(this.responseText)}),IDS.log("sendTokenRequest",this.accessUrl),n.open("POST",this.accessUrl),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t)},e.prototype.ensureValidTokenAndSendRequest=function(e){var t=this;this.token?e.requestMethod(e):this.sendTokenRequest(function(i){t.token=new n;var r=t.token.assign(i);if(IDS.log((r?"Valid":"Invalid")+" token received",r?"":t.token),r)e.requestMethod(e);else{var a=e.options.response;a.status=590,e.callback(a)}})},e.prototype.tokenIsExpired=function(e){return e.status===t.BadOrExpiredToken},e.prototype.needTokenRefresh=function(e,t){var i=this,r=t.tokenRefreshCount<1&&this.tokenIsExpired(e);return r&&(t.tokenRefreshCount++,this.sendTokenRequest(function(e){i.token=new n,i.token.assign(e),i.requestCalculatorData(t)})),r},e.prototype.getSwap=function(e,n){var r=this,a=new i;a.command="swaps",a.options=e,a.requestMethod=this.requestCalculatorData,a.callback=n,a.processResponse=function(i){if(!r.needTokenRefresh(i,a)){var s=e.response?e.response:new l;s.status=i.status,s.statusText=i.statusText,n&&(i.status===t.Ok&&s.assign(i.responseText),n(s))}},this.ensureValidTokenAndSendRequest(a)},e.prototype.getFixedBond=function(e,n){var r=this,a=new i;a.command="fix-bonds",a.options=e,a.requestMethod=this.requestCalculatorData,a.callback=n,a.processResponse=function(i){if(!r.needTokenRefresh(i,a)){var s=e.response?e.response:new c;s.status=i.status,s.statusText=i.statusText,n&&(i.status===t.Ok&&s.assign(i.responseText),n(s)),IDS.log("getFixBond response:",s)}},this.ensureValidTokenAndSendRequest(a)},e.prototype.getFloatingBond=function(e,n){var r=this,a=new i;a.command="floating-bonds",a.options=e,a.requestMethod=this.requestCalculatorData,a.callback=n,a.processResponse=function(i){if(!r.needTokenRefresh(i,a)){var s=e.response?e.response:new c;s.status=i.status,s.statusText=i.statusText,n&&(i.status===t.Ok&&s.assign(i.responseText),n(s)),IDS.log("getFloatingBond response:",s)}},this.ensureValidTokenAndSendRequest(a)},e}();e.CalculatorServer=m}(Infront||(Infront={})),function(e){var t,n;!function(e){e[e.Ok=0]="Ok",e[e.Error=1]="Error",e[e.WorkingOnServer=2]="WorkingOnServer"}(t=e.ResponseEnum||(e.ResponseEnum={})),function(e){e[e.NoCache=0]="NoCache",e[e.CacheData=1]="CacheData",e[e.ReloadedFromServer=2]="ReloadedFromServer",e[e.ConcatenatedFromServer=3]="ConcatenatedFromServer"}(n=e.ResponseCacheEnum||(e.ResponseCacheEnum={}));var i=function(e,i,r){void 0===e&&(e=t.Ok),void 0===r&&(r=n.NoCache),this.type=e,this.cache=r,this.errorMsg=i};e.ResponseHeader=i;var r=function(){};e.CommonFrameworkResponse=r;var a=function(e,t){void 0===t&&(t=!1),this.buf=e,this.fromCache=t};e.ResponseItem=a;var s=function(){function e(e){void 0===e&&(e=0),this.data=[],this.responseNu=0,this.requestTime=performance.now(),this.type=e}return e.prototype.responseTimeStr=function(e,t){return void 0===e&&(e=""),(t?"id="+t.toString()+" ":"")+e+" "+(performance.now()-this.requestTime).toFixed()+" ms"},e}();e.BaseRequest=s;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s);e.Request=o;var l=function(e,t,n,i){this.id=e,this.lower_bound=t,this.upper_bound=n,this.size=i};e.TickItem=l}(IDS||(IDS={})),function(e){var t=function(){function e(){}return e.prototype.AddCallback=function(e){this.callbacks||(this.callbacks=[]),this.callbacks.push(e)},e.prototype.RemoveCallback=function(e){if(this.callbacks){var t=this.callbacks.indexOf(e);-1!=t&&this.callbacks.splice(t,1),0==this.callbacks.length&&(this.callbacks=void 0)}},e.prototype.NotifyCallbacks=function(e){if(this.callbacks)for(var t=0,n=[].concat(this.callbacks);t<n.length;t++)(0,n[t])(e)},e.prototype.SingleNotifyCallback=function(e){this.callbacks&&this.callbacks.length>0&&this.callbacks[0](e)},e.prototype.length=function(){return this.callbacks?this.callbacks.length:0},e}();e.CallbackHandler=t}(Infront||(Infront={})),function(e){var t;!function(e){e[e.Stocks=1]="Stocks",e[e.News=2]="News",e[e.Bonds=4]="Bonds",e[e.EuroOptions=8]="EuroOptions",e[e.Futures=16]="Futures",e[e.Commodities=32]="Commodities",e[e.Indices=64]="Indices",e[e.Forex=128]="Forex",e[e.UsOptions=256]="UsOptions",e[e.Funds=512]="Funds",e[e.Chat=1024]="Chat",e[e.UrlNews=2048]="UrlNews",e[e.Orders=4096]="Orders",e[e.Investors=8192]="Investors",e[e.Warrants=16384]="Warrants",e[e.Features=32768]="Features",e[e.SymbolExt=65536]="SymbolExt",e[e.CalendarUpdates=131072]="CalendarUpdates",e[e.FxDepositRates=262144]="FxDepositRates",e[e.Mtf=524288]="Mtf",e[e.ResearchNews=1048576]="ResearchNews",e[e.WebFeature=2097152]="WebFeature",e[e.Si=4194304]="Si"}(t=e.FeedType||(e.FeedType={})),function(e){e[e.Orderbook=1]="Orderbook",e[e.Trades=2]="Trades",e[e.AllTrades=4]="AllTrades",e[e.TradeBrokers=8]="TradeBrokers",e[e.PushData=16]="PushData",e[e.OrderEntryTicker=32]="OrderEntryTicker",e[e.OrderBookBrokers=64]="OrderBookBrokers",e[e.OrderEntryIsin=128]="OrderEntryIsin",e[e.SubscribeSymbols=256]="SubscribeSymbols",e[e.Fractions=512]="Fractions",e[e.DynTickSize=1024]="DynTickSize",e[e.ExchMsg=2048]="ExchMsg",e[e.Lists=4096]="Lists",e[e.Chains=8192]="Chains",e[e.DefaultSymbols=16384]="DefaultSymbols",e[e.PagesOnly=32768]="PagesOnly",e[e.HistInvestorInfo=65536]="HistInvestorInfo",e[e.SpecialPrices=131072]="SpecialPrices",e[e.FeedFlag=262144]="FeedFlag",e[e.Utf8=524288]="Utf8",e[e.Derivatives=1048576]="Derivatives",e[e.SeparateBboMbo=2097152]="SeparateBboMbo",e[e.Mbo=4194304]="Mbo",e[e.IgnoreUrl=8388608]="IgnoreUrl",e[e.Consolidated=16777216]="Consolidated",e[e.SeparateTrades=33554432]="SeparateTrades",e[e.RssNews=67108864]="RssNews",e[e.NoSharing=134217728]="NoSharing",e[e.HideIsin=268435456]="HideIsin",e[e.FxForwards=536870912]="FxForwards",e[e.FxCurrencyCross=1073741824]="FxCurrencyCross",e[e.SecondaryFeed=2147483648]="SecondaryFeed"}(e.FeedProperty||(e.FeedProperty={})),e.FeedtypeSymbols=t.Stocks|t.Bonds|t.EuroOptions|t.Futures|t.Commodities|t.Indices|t.Forex|t.UsOptions|t.Funds|t.Warrants}(Infront||(Infront={})),function(e){var t=function(){function t(t){this.staticRequests=[],this.bypassStaticCache=!1,this.date=new Date,this.ofsMins=0,this.syms={},this.mwsRefData=new e.CallbackHandler,this.content=IDS.SymbolContentEnum.None,this.pendingContent=IDS.SymbolContentEnum.None,this.feednu=t}return t.prototype.MWSDistRefData=function(){IDS.DEBUG_SYMBOL_DATA_CS_DIST&&IDS.log("MWSDistRefData",this.feednu,this.syms),this.pendingContent=IDS.SymbolContentEnum.None,this.mwsRefData.NotifyCallbacks(this.syms)},t.prototype.StaticRequested=function(e){return-1===this.staticRequests.indexOf(e)&&(this.staticRequests.push(e),!0)},t.prototype.StaticReceived=function(e){var t=this,n=this.staticRequests.indexOf(e);this.timerToken&&(clearTimeout(this.timerToken),this.timerToken=null),-1!==n&&(this.staticRequests.splice(n,1),0===this.staticRequests.length?this.MWSDistRefData():this.timerToken=setTimeout(function(){IDS.DEBUG_SYMBOL_DATA_CS_DIST&&IDS.log("Timeout: gave up waiting for:",t.staticRequests),t.MWSDistRefData()},2e3))},t.prototype.hasAllStatic=function(){return 0===this.staticRequests.length},t.prototype.resetSymbols=function(){for(var e in this.syms)this.syms[e].data={}},t.FeedTypeToStr=function(t){switch(t){case e.FeedType.Stocks:return"STOCKS";case e.FeedType.News:return"NEWS";case e.FeedType.Bonds:return"BONDS";case e.FeedType.EuroOptions:return"EUROOPTIONS";case e.FeedType.Futures:return"FUTURES";case e.FeedType.Commodities:return"COMMODITIES";case e.FeedType.Indices:return"INDICES";case e.FeedType.Forex:return"FOREX";case e.FeedType.UsOptions:return"USOPTIONS";case e.FeedType.Funds:return"FUNDS";case e.FeedType.Chat:return"CHAT";case e.FeedType.UrlNews:return"URLNEWS";case e.FeedType.Orders:return"ORDERS";case e.FeedType.Warrants:return"WARRANTS";case e.FeedType.Features:return"FEATURES";case e.FeedType.SymbolExt:return"SYMBOL_EXT";case e.FeedType.CalendarUpdates:return"CALENDAR_UPDATES";case e.FeedType.FxDepositRates:return"FX_DEPOSIT_RATES";case e.FeedType.Mtf:return"MTF";case e.FeedType.WebFeature:return"WEB_FEATURE";case e.FeedType.Si:return"SI"}return""},t.FeedPropertyToStr=function(t){switch(t){case e.FeedProperty.Orderbook:return"Orderbook";case e.FeedProperty.Trades:return"Trades";case e.FeedProperty.AllTrades:return"AllTrades";case e.FeedProperty.TradeBrokers:return"TradeBrokers";case e.FeedProperty.PushData:return"PushData";case e.FeedProperty.OrderEntryTicker:return"OrderEntryTicker";case e.FeedProperty.OrderBookBrokers:return"OrderBookBrokers";case e.FeedProperty.OrderEntryIsin:return"OrderEntryIsin";case e.FeedProperty.SubscribeSymbols:return"SubscribeSymbols";case e.FeedProperty.Fractions:return"Fractions";case e.FeedProperty.DynTickSize:return"DynTickSize";case e.FeedProperty.ExchMsg:return"ExchMsg";case e.FeedProperty.Lists:return"Lists";case e.FeedProperty.Chains:return"Chains";case e.FeedProperty.DefaultSymbols:return"DefaultSymbols";case e.FeedProperty.PagesOnly:return"PagesOnly";case e.FeedProperty.HistInvestorInfo:return"HistInvestorInfo";case e.FeedProperty.SpecialPrices:return"SpecialPrices";case e.FeedProperty.FeedFlag:return"FeedFlag";case e.FeedProperty.Utf8:return"Utf8";case e.FeedProperty.Derivatives:return"Derivatives";case e.FeedProperty.SeparateBboMbo:return"SeparateBboMbo";case e.FeedProperty.Mbo:return"Mbo";case e.FeedProperty.IgnoreUrl:return"IgnoreUrl";case e.FeedProperty.Consolidated:return"Consolidated";case e.FeedProperty.SeparateTrades:return"SeparateTrades";case e.FeedProperty.RssNews:return"RssNews";case e.FeedProperty.NoSharing:return"NoSharing";case e.FeedProperty.HideIsin:return"HideIsin"}return"-?-"},t}();e.Feed=t;var n=function(){function e(){this.feeds={}}return e.prototype.addFeed=function(e){this.feeds[e.feednu]=e},e}();e.FeedList=n}(Infront||(Infront={})),function(e){function t(e,t){return e<<16|t}e.MakePidSidIndex=t,e.DecodePidSidIndex=function(e){return new n(e>>16,65535&e)};var n=function(){function e(e,t){this.pid=e,this.sid=t}return e.prototype.Index=function(){return t(this.pid,this.sid)},e.prototype.toStr=function(e){return void 0===e&&(e=":"),this.pid>=0&&this.sid>=0?this.pid.toString()+e+this.sid.toString():"<invalid PidSid>"},e.prototype.isLoginServer=function(){return 0==this.pid&&0==this.sid},e.prototype.isPidSid=function(e,t){return e===this.pid&&t===this.sid},e}();e.PidSid=n;var i=function(){function t(){this.feeds={}}return t.prototype.GetFeed=function(t,n){var i=this.feeds[t];return i||(n?i=this.feeds[t]=new e.Feed(t):null)},t}();e.PidSidDb=i}(Infront||(Infront={})),function(e){function t(e,t){return e.orderId<t.orderId?-1:e.orderId>t.orderId?1:0}function n(e,t){return e.price<t.price?-1:e.price>t.price?1:0}var i,r=InfrontUtil.SortedList;!function(e){e[e.BID=1]="BID",e[e.ASK=2]="ASK"}(i=e.OrderbookSide||(e.OrderbookSide={}));var a=function(){};e.OrderBase=a;var s=function(){};e.MblLevel=s;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a);e.MblOrder=o;var l=function(){function e(e){this.levels=[],this.symbol=e}return e.prototype.init=function(){this.bids=[],this.asks=[],this.getOrder(1,!0),this.getOrder(1,!1)},e.prototype.getOrder=function(e,t){return t?(this.bids||(this.bids=[]),this.bids.length&&this.bids[this.bids.length-1].level==e?this.bids[this.bids.length-1]:(this.bids.push(new o),(n=this.bids[this.bids.length-1]).level=e,n)):(this.asks||(this.asks=[]),this.asks.length&&this.asks[this.asks.length-1].level==e?this.asks[this.asks.length-1]:(this.asks.push(new o),(n=this.asks[this.asks.length-1]).level=e,n));var n},e.prototype.deleteOrder=function(e,t){if(t){if(0==this.bids.length||!this.bids[this.bids.length-1])return;if(this.bids[this.bids.length-1].level!=e)return;this.bids.splice(this.bids.length-1,1)}else{if(0==this.asks.length||!this.asks[this.asks.length-1])return;if(this.asks[this.asks.length-1].level!=e)return;this.asks.splice(this.asks.length-1,1)}},e.prototype.insertOrder=function(e,t,n,i){if(!e)return!1;var r;switch(r=t?e.bid?e.bid:e.bid=new a:e.ask?e.ask:e.ask=new a,n){case IDS.RealtimeTags.NuBids:case IDS.RealtimeTags.NuAsks:r.orders=i;break;case IDS.RealtimeTags.Bid:case IDS.RealtimeTags.Ask:r.price=i;break;case IDS.RealtimeTags.BidSize:case IDS.RealtimeTags.AskSize:r.volume=i}return!0},e.prototype.publishOrderbook=function(){if(this.bids)for(var e=0,t=this.bids;e<t.length;e++){var n=t[e];if(1==n.level)this.levels[n.level]||(this.levels[n.level]=new s),this.levels[n.level].bid||(this.levels[n.level].bid=new a),n.price||(n.price=this.symbol.getValueOrNull(IDS.RealtimeTags.Bid)),n.volume||(n.volume=this.symbol.getValueOrNull(IDS.RealtimeTags.BidSize)),n.orders||(n.orders=this.symbol.getValueOrNull(IDS.RealtimeTags.NuBids)),n.price?this.levels[n.level].bid.price=n.price:n.price=this.levels[n.level].bid.price,n.volume?this.levels[n.level].bid.volume=n.volume:n.volume=this.levels[n.level].bid.volume,n.orders?this.levels[n.level].bid.orders=n.orders:n.orders=this.levels[n.level].bid.orders;else{var i=this.levels[n.level];i&&(n.orders||(n.orders=i.bid.orders),n.price||(n.price=i.bid.price),n.volume||(n.volume=i.bid.volume))}}if(this.asks)for(var r=0,o=this.asks;r<o.length;r++){var l=o[r];if(1==l.level)this.levels[l.level]||(this.levels[l.level]=new s),this.levels[l.level].ask||(this.levels[l.level].ask=new a),l.price||(l.price=this.symbol.getValueOrNull(IDS.RealtimeTags.Ask)),l.volume||(l.volume=this.symbol.getValueOrNull(IDS.RealtimeTags.AskSize)),l.orders||(l.orders=this.symbol.getValueOrNull(IDS.RealtimeTags.NuAsks)),l.price?this.levels[l.level].ask.price=l.price:l.price=this.levels[l.level].ask.price,l.volume?this.levels[l.level].ask.volume=l.volume:l.volume=this.levels[l.level].ask.volume,l.orders?this.levels[l.level].ask.orders=l.orders:l.orders=this.levels[l.level].ask.orders;else{var c=this.levels[l.level];c&&(l.orders||(l.orders=c.ask.orders),l.price||(l.price=c.ask.price),l.volume||(l.volume=c.ask.volume))}}this.symbol.orderbookCallbacks.NotifyCallbacks(this)},e.prototype.reset=function(){this.levels=[],this.bids=[],this.asks=[]},e}();e.MblOrderBook=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(a);e.MboOrder=c;var d=function(){function e(){var e=this;this.price=0,this.volume=0,this.ordersNum=0,this.orders=new r([],0,t,function(t,n){return e.update(t,n)})}return e.prototype.update=function(e,t){switch(this.ordersNum=this.orders.length(),e){case InfrontUtil.SortedListAction.Insert:t.length>0&&(this.volume+=t[0].volume),t[0].level=this;break;case InfrontUtil.SortedListAction.Delete:t.length>0&&(this.volume-=t[0].volume),delete t[0].level;break;case InfrontUtil.SortedListAction.Update:t.length>1&&(this.volume+=t[1].volume-t[0].volume);break;case InfrontUtil.SortedListAction.Clear:this.volume=0}},e}();e.MboLevel=d;var u=function(){function e(e){this.bidLevelsUpdated=[],this.askLevelsUpdated=[],this.symbol=e,this.orders=new r([],0,t),this.bidLevels=new r([],1,n),this.askLevels=new r([],0,n)}return e.prototype.insertOrder=function(e,t){if(void 0===t&&(t=!1),e&&e.orderId){var n=this.orders.find(e);if(n>=0)return this.updateOrder(n,e,t);this.orders.insert(e);var r=void 0,a=void 0;e.bidAsk==i.BID?(r=this.bidLevels,a=this.bidLevelsUpdated):(r=this.askLevels,a=this.askLevelsUpdated);var s=r.find({price:e.price}),o=void 0;if(s<0){(o=new d).price=e.price;for(var l=r.insert(o);l<r.length();l++)a[l]=r.get(l)}else o=r.get(s),a[s]=o;return o.orders.insert(e),t&&this.publishOrderbook(),!0}return!1},e.prototype.updateOrder=function(e,t,n){var i,r;if("number"==typeof e)r=e,i=t,n=!0===n;else{if(n=!0===t,!(i=e)||!i.orderId)return!1;if(-1==(r=this.orders.find(i)))return this.insertOrder(i,n)}var a=this.orders.get(r),s=a.volume,o=i.volume,l=a.level;return a.volume=i.volume,l.volume+=o-s,a.orders=i.orders,a.time=i.time,a.bidAsk!=i.bidAsk?(this.deleteOrder(a.orderId,!1),a.bidAsk=i.bidAsk,a.price=i.price,this.insertOrder(a,!1)):a.price!=i.price&&(this.deleteOrder(a.orderId,!1),a.price=i.price,this.insertOrder(a,!1)),n&&this.publishOrderbook(),!0},e.prototype.deleteOrder=function(e,t){void 0===t&&(t=!1);var n=this.orders.find({orderId:e});if(!(n>=0))return!1;var r,a=this.orders.get(n),s=void 0,o=void 0,l=void 0;if(a.bidAsk==i.BID?(o=this.bidLevels,l=this.bidLevelsUpdated):(o=this.askLevels,l=this.askLevelsUpdated),(r=o.find({price:a.price}))>=0){var c=(s=o.get(r)).orders.find(a);if(c>=0&&s.orders.remove(c),s.orders.length()<=0){o.remove(r);for(var d=r;d<o.length();d++)l[d]=o.get(d)}else l[r]=s}return this.orders.remove(n),t&&this.publishOrderbook(),!0},e.prototype.publishOrderbook=function(e){if(void 0===e&&(e=!1),this.symbol){var t=this.getUpdatedOrderbook();(t&&(t.asks.length||t.bids.length)||e)&&this.symbol.orderbookCallbacks.NotifyCallbacks(t)}},e.prototype.getUpdatedOrderbook=function(){var e,t,n=new l(this.symbol),i=!1;for(var r in n.bids=[],n.asks=[],this.bidLevelsUpdated)e=new o,(t=this.bidLevelsUpdated[r])&&(e.level=Number(r)+1,e.orders=t.ordersNum,e.price=t.price,e.volume=t.volume,i=!0),n.bids.push(e);for(var r in this.askLevelsUpdated)e=new o,(t=this.askLevelsUpdated[r])&&(e.level=Number(r)+1,e.orders=t.ordersNum,e.price=t.price,e.volume=t.volume,i=!0),n.asks.push(e);return this.bidLevelsUpdated=[],this.askLevelsUpdated=[],i?n:null},e.prototype.reset=function(){this.orders.clear(),this.bidLevels.clear(),this.askLevels.clear(),this.bidLevelsUpdated=[],this.askLevelsUpdated=[]},e.prototype.ordersCount=function(){return this.orders.length()},e}();e.MboOrderBook=u;var h=function(t){this.level=-1,this.price=new e.Observable,this.price.set(0),this.volume=new e.Observable,this.volume.set(0),this.numOrders=new e.Observable,this.numOrders.set(0),this.formattedPrice=new e.Observable(null)};e.OrderbookRow=h}(Infront||(Infront={})),function(e){var t;!function(e){e[e.Last=0]="Last",e[e.YYLast=1]="YYLast",e[e.BidAsk=2]="BidAsk",e[e.IndOpen=3]="IndOpen",e[e.IndLast=4]="IndLast"}(t=e.LastChangeCalcMethodEnum||(e.LastChangeCalcMethodEnum={}));var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,t)||this}return __extends(t,e),t.prototype.SetDateRaw=function(e){if(this.value||(this.value=new Date(0)),InfrontUtil.isDate(this.value)&&e>this.value.getTime()){var t=this.value;this.value.setTime(e),this.updateBindings(t)}},t.prototype.Inc=function(e){if(e){var t=this.value;this.value+=e,this.updateBindings(t)}},t.prototype.setWithoutNotify=function(e){this.value=e},t}(e.Observable);e.Value=n;var i=function(e){function t(t,n,i){var r=e.call(this)||this;return r.last=t,r.ylast=n,r.percent=i,t.observe(r),n.observe(r),r}return __extends(t,e),t.prototype.valueUpdated=function(e){this.last.get()&&this.ylast.get()?this.percent?this.set((this.last.get()-this.ylast.get())/this.ylast.get()*100):this.set(this.last.get()-this.ylast.get()):this.set(0)},t.prototype.unbindAll=function(){this.last.unbind(this),this.ylast.unbind(this)},t}(n);e.ValueChange=i;var r=function(n){function i(e,t,i,r,a,s,o,l,c,d,u,h){var p=n.call(this)||this;return p.symbol=e,p.last=t,p.ylast=i,p.yylast=r,p.bid=a,p.ask=s,p.indOpen=o,p.indLast=l,p.symbolType=c,p.tradeMoves=d,p.onFloorVolume=u,p.percent=h,t.observe(p),i.observe(p),r.observe(p),a.observe(p),s.observe(p),o.observe(p),l.observe(p),c.observe(p),d.observe(p),u.observe(p),p}return __extends(i,n),i.prototype.isBidAskPriceTypeNormal=function(e){var t=!0;if(e>9999.979&&e<9999.991){var n=Math.round(100*e);t=!(999999==n||999998==n)}return t},i.prototype.isIndex=function(){var t=this.symbolType.get();return t==e.SymbolType.Index||t==e.SymbolType.None&&this.symbol.feedInfo&&this.symbol.feedInfo.hasOnly(e.FeedType.Indices)},i.prototype.isFund=function(){var t=this.symbolType.get();return t==e.SymbolType.Funds||t==e.SymbolType.None&&this.symbol.feedInfo&&this.symbol.feedInfo.hasOnly(e.FeedType.Funds)},i.prototype.noTradesToday=function(){return(this.isIndex()||this.isFund()?!this.symbol.hasRealTimeTrade&&!this.tradeMoves.get():!(this.symbol.hasRealTimeTrade||this.tradeMoves.get()&&this.onFloorVolume.get()))&&(!this.last.get()||InfrontUtil.isSameValue(this.last.get(),this.ylast.get(),i.kEpsilon))},i.prototype.getChangeCalcMethod=function(){var e=t.Last;return this.noTradesToday()&&(this.indLast.get()?e=t.IndLast:this.indOpen.get()?e=t.IndOpen:this.ask.get()&&this.bid.get()&&InfrontUtil.isSameValue(this.ask.get(),this.bid.get(),i.kEpsilon)&&this.isBidAskPriceTypeNormal(this.bid.get())&&(e=t.BidAsk),e==t.Last&&this.yylast.get()&&(e=t.YYLast)),e},i.prototype.setValue=function(e,t){e&&t&&t.get()&&e.get()?this.percent?this.set((t.get()-e.get())/e.get()*100):this.set(t.get()-e.get()):this.set(0)},i.prototype.valueUpdated=function(e){switch(this.getChangeCalcMethod()){case t.Last:this.setValue(this.ylast,this.last);break;case t.YYLast:this.setValue(this.yylast,this.ylast);break;case t.BidAsk:this.setValue(this.ylast,this.bid);break;case t.IndOpen:this.setValue(this.ylast,this.indOpen);break;case t.IndLast:this.setValue(this.ylast,this.indLast)}},i.prototype.unbindAll=function(){this.last.unbind(this),this.ylast.unbind(this),this.yylast.unbind(this),this.bid.unbind(this),this.ask.unbind(this),this.indOpen.unbind(this),this.indLast.unbind(this),this.symbolType.unbind(this),this.tradeMoves.unbind(this)},i.kEpsilon=1e-6,i}(n);e.ValueChangeEx=r;var a=function(e){function t(t){var n=e.call(this)||this;return n.inputs=t,t.forEach(function(e){e.observe(n)}),n}return __extends(t,e),t.prototype.valueUpdated=function(e){for(var t=0,n=this.inputs;t<n.length;t++){var i=n[t];if(i.get())return void this.set(i.get())}this.set(null)},t.prototype.unbindAll=function(){var e=this;this.inputs.forEach(function(t){t.unbind(e)})},t}(n);e.ValueCascaded=a;var s=function(e){function t(t){var n=e.call(this)||this;return n.time=t,t.observe(n),n}return __extends(t,e),t.prototype.set=function(e){var t=this.value;this.value=e,this.updateBindings(t)},t.prototype.valueUpdated=function(){if(this.time.get()){var e=this.time.get();e.valueOf()%864e5!=0?this.set(e):this.set(null)}else this.set(null)},t.prototype.unbindAll=function(){this.time.unbind(this)},t}(n);e.ValueTime=s;var o=function(e){function t(t){var n=e.call(this)||this;return n.time=t,t.observe(n),n}return __extends(t,e),t.prototype.valueUpdated=function(){if(this.time.get()){var e=this.time.get();e.valueOf()>864e5?this.set(e):this.set(null)}else this.set(null)},t.prototype.unbindAll=function(){this.time.unbind(this)},t}(n);e.ValueDate=o;var l=function(e){function t(t){var n=e.call(this)||this;return n.type=t,t.observe(n),n}return __extends(t,e),t.prototype.valueUpdated=function(){this.type.get()?this.set(IDS.Symbol.SymbolTypeToStr(this.type.get())):this.set(null)},t}(n);e.ValueSymbolType=l;var c=function(e){function t(t){var n=e.call(this)||this;return n.subType=t,t.observe(n),n}return __extends(t,e),t.prototype.valueUpdated=function(){this.subType.get()?this.set(IDS.Symbol.SymbolSubTypeToStr(this.subType.get())):this.set(null)},t}(n);e.ValueSymbolSubType=c;var d=function(e){function t(t,n,i){var r=e.call(this)||this;return r.name=t,r.inputs=n,r.computation=i,r.inputs&&r.inputs.forEach(function(e){e.observe(r)}),r.set(null),r}return __extends(t,e),t.prototype.UpdateReferences=function(e,t){var n=this;this.inputs=e,this.computation=t,this.inputs.forEach(function(e){e.observe(n)}),this.valueUpdated()},t.prototype.NoReferences=function(){return!this.inputs||0==this.inputs.length},t.prototype.unbindAll=function(){var e=this;this.inputs.forEach(function(t){t.unbind(e)})},t.prototype.valueUpdated=function(){for(var e=[],t=0,n=this.inputs;t<n.length;t++){var i=n[t];e.push(i.get())}this.set(this.computation(e))},t}(n);e.ValueComputed=d;var u=function(t){function n(e,n,i){void 0===i&&(i=null);var r=t.call(this,i)||this;return r.fieldDefinition=e,r.getCurrency=n,r}return __extends(n,t),n.prototype.getRaw=function(){return this.value},n.prototype.isCurrencyField=function(){return this.fieldDefinition.fieldType===e.CalculatorFieldType.CurrencyField},n.prototype.get=function(){var t=this.value;if(this.fieldDefinition)switch(this.fieldDefinition.fieldType){case e.CalculatorFieldType.TextField:break;case e.CalculatorFieldType.NumericField:t=this.fieldDefinition.displayZeroValues||0!==t?InfrontUtil.formatNumber(t,this.fieldDefinition.decimals):"";break;case e.CalculatorFieldType.PercentField:InfrontUtil.isNumber(t)&&(t=this.fieldDefinition.displayZeroValues||0!==t?InfrontUtil.formatNumber(100*t,this.fieldDefinition.decimals)+" %":"");break;case e.CalculatorFieldType.CurrencyField:if(""!=t&&null!=t)if(this.fieldDefinition.displayZeroValues||0!==t){var n=this.getCurrency();t=InfrontUtil.formatNumber(t,this.fieldDefinition.decimals)+" "+n}else t=""}else InfrontUtil.isNumber(t)&&(t=InfrontUtil.formatNumber(t,0));return null==t&&(t=""),t},n}(n);e.ValueCalculator=u}(Infront||(Infront={})),function(e){var t,n=Infront.FeedProperty,i=Infront.CallbackHandler,r=Infront.MblOrderBook,a=Infront.MboOrderBook,s=Infront.Value,o=Infront.ValueChangeEx,l=Infront.ValueCascaded,c=Infront.ValueChange,d=Infront.ValueSymbolType,u=Infront.ValueSymbolSubType,h=Infront.ValueTime,p=Infront.ValueComputed;!function(e){e[e.None=0]="None",e[e.Basic=1]="Basic",e[e.Mbl=2]="Mbl",e[e.Mbo=4]="Mbo",e[e.Trades=8]="Trades",e[e.Consolidated=16]="Consolidated",e[e.Unconsolidated=32]="Unconsolidated",e[e.HistPerformance=64]="HistPerformance",e[e.StaticData=128]="StaticData"}(t=e.SymbolContentEnum||(e.SymbolContentEnum={}));var m=function(){function e(e){this.content=e}return e.prototype.getFeedProperties=function(){var e=0;return this.content&t.Mbl&&(e|=n.Orderbook),this.content&t.Mbo&&(e|=n.Mbo),this.content&t.Trades&&(e|=n.Trades),e},e.prototype.getCommon=function(e){return this.content&e},e.prototype.getDiff=function(e){return this.content^e},e.SymbolContentToStr=function(e){switch(e){case t.None:return"None";case t.Basic:return"Basic";case t.Mbl:return"Mbl";case t.Mbo:return"Mbo";case t.Trades:return"Trades";case t.Consolidated:return"Consolidated";case t.Unconsolidated:return"Unconsolidated";case t.HistPerformance:return"HistPerformance";case t.StaticData:return"StaticData"}},e.SymbolContentStr=function(t){for(var n="",i=0;i<12;i++,0!=t)if(0!=(t&1<<i)){var r=e.SymbolContentToStr(1<<i);r&&(n=n+=r+" "),t-=1<<i}return n},e}();e.SymbolContent=m;var g=function(){function n(n,s,c,p,m){this.computedFields={},this.date=new Date(0),this.data={},this.mbo=new a(this),this.mbl=new r(this),this.genericCallbacks=new i,this.orderbookCallbacks=new i,this.tradesCallbacks=new i,this.content=t.None,this.hasStaticContent=!1,this.hasRealTimeTrade=!1,this.ps=n,this.fs=s,this.fsService=c,this.feedInfo=p,this.feed=m,this.getValue(e.RealtimeTags.Feed,!0).setWithoutNotify(this.fs.feed),this.getValue(e.RealtimeTags.Symbol,!0).setWithoutNotify(this.fs.ticker),this.data[e.RealtimeTags.Change]=new o(this,this.getValue(e.RealtimeTags.Last,!0),this.getValue(e.RealtimeTags.YestClose,!0),this.getValue(e.RealtimeTags.YyLast,!0),this.getValue(e.RealtimeTags.Bid,!0),this.getValue(e.RealtimeTags.Ask,!0),this.getValue(e.RealtimeTags.IndicOpen,!0),this.getValue(e.RealtimeTags.IndicTrade,!0),this.getValue(e.RealtimeTags.SymbolType,!0),this.getValue(e.RealtimeTags.TradeMoves,!0),this.getValue(e.RealtimeTags.OnExchVolume,!0),!1),this.data[e.RealtimeTags.ChangePct]=new o(this,this.getValue(e.RealtimeTags.Last,!0),this.getValue(e.RealtimeTags.YestClose,!0),this.getValue(e.RealtimeTags.YyLast,!0),this.getValue(e.RealtimeTags.Bid,!0),this.getValue(e.RealtimeTags.Ask,!0),this.getValue(e.RealtimeTags.IndicOpen,!0),this.getValue(e.RealtimeTags.IndicTrade,!0),this.getValue(e.RealtimeTags.SymbolType,!0),this.getValue(e.RealtimeTags.TradeMoves,!0),this.getValue(e.RealtimeTags.OnExchVolume,!0),!0),this.addChange(e.RealtimeTags.Bid,e.RealtimeTags.YestBidClose,e.RealtimeTags.BidChange,!1),this.addChange(e.RealtimeTags.Bid,e.RealtimeTags.YestBidClose,e.RealtimeTags.BidChangePct,!0),this.addChange(e.RealtimeTags.Last,e.RealtimeTags.Open,e.RealtimeTags.OpenChange,!1),this.addChange(e.RealtimeTags.Last,e.RealtimeTags.Open,e.RealtimeTags.OpenChangePct,!0),this.data[e.MwsRealtimeTags.LastTradedAt]=new l([this.getValue(e.RealtimeTags.Last,!0),this.getValue(e.RealtimeTags.YestClose,!0)]),this.data[e.MwsRealtimeTags.MarketPrice]=new l([this.getValue(e.RealtimeTags.Last,!0),this.getValue(e.RealtimeTags.Bid,!0),this.getValue(e.RealtimeTags.Ask,!0),this.getValue(e.RealtimeTags.YestClose,!0)]),this.data[e.MwsRealtimeTags.Time]=new h(this.getValue(e.RealtimeDateTime.TradeTime,!0)),this.data[e.MwsRealtimeTags.SymbolType]=new d(this.getValue(e.RealtimeTags.SymbolType,!0)),this.data[e.MwsRealtimeTags.SymbolSubType]=new u(this.getValue(e.RealtimeTags.SymbolSubType,!0))}return n.prototype.addChange=function(e,t,n,i){var r=this.getValue(e,!0),a=this.getValue(t,!0);this.data[n]=new c(r,a,i)},n.prototype.reset=function(){for(var e in this.data)this.data[e].set(null);this.mbo.reset(),this.mbl.reset(),this.data={}},n.prototype.resetOrderbook=function(){this.mbl.reset(),this.mbo.reset()},n.prototype.hasContent=function(e){return(this.content&e)===e},n.prototype.inspect=function(){for(var t={},i=0,r=Object.keys(this.data);i<r.length;i++){var a=r[i],s=Number(a);if(s<e.MwsRealtimeTagStart){var o=this.data[a].get();switch(s){case e.RealtimeTags.SymbolType:t[e.tagToStr(e.TagSet.Realtime,s)]=n.SymbolTypeToStr(o);break;case e.RealtimeTags.SymbolSubType:t[e.tagToStr(e.TagSet.Realtime,s)]=n.SymbolSubTypeToStr(o);break;default:t[e.tagToStr(e.TagSet.Realtime,s)]=o}}}return t},n.prototype.getValue=function(t,n){void 0===n&&(n=!1);var i=this.data[t];if(!i&&n)switch(t){case e.RealtimeTags.ContractSize:i=this.data[t]=new s(this.fsService.defaultContractSize);break;case e.RealtimeTags.PriceDisplay:i=this.data[t]=new s(this.fsService.getDecimalEnum())}if(!i){if(!n)return null;i=this.data[t]=new s}return i},n.prototype.getForwardCurveAllValuesOrNull=function(){var t={};return t.availability=this.getValueOrNull(e.ForwardCurve.Availability),t.month1_ask=this.getValueOrNull(e.ForwardCurve.Month1Ask),t.month1_bid=this.getValueOrNull(e.ForwardCurve.Month1Bid),t.month2_ask=this.getValueOrNull(e.ForwardCurve.Month2Ask),t.month2_bid=this.getValueOrNull(e.ForwardCurve.Month2Bid),t.month3_ask=this.getValueOrNull(e.ForwardCurve.Month3Ask),t.month3_bid=this.getValueOrNull(e.ForwardCurve.Month3Bid),t.month4_ask=this.getValueOrNull(e.ForwardCurve.Month4Ask),t.month4_bid=this.getValueOrNull(e.ForwardCurve.Month4Bid),t.month5_ask=this.getValueOrNull(e.ForwardCurve.Month5Ask),t.month5_bid=this.getValueOrNull(e.ForwardCurve.Month5Bid),t.month6_ask=this.getValueOrNull(e.ForwardCurve.Month6Ask),t.month6_bid=this.getValueOrNull(e.ForwardCurve.Month6Bid),t.month7_ask=this.getValueOrNull(e.ForwardCurve.Month7Ask),t.month7_bid=this.getValueOrNull(e.ForwardCurve.Month7Bid),t.month8_ask=this.getValueOrNull(e.ForwardCurve.Month8Ask),t.month8_bid=this.getValueOrNull(e.ForwardCurve.Month8Bid),t.month9_ask=this.getValueOrNull(e.ForwardCurve.Month9Ask),t.month9_bid=this.getValueOrNull(e.ForwardCurve.Month9Bid),t.month10_ask=this.getValueOrNull(e.ForwardCurve.Month10Ask),t.month10_bid=this.getValueOrNull(e.ForwardCurve.Month10Bid),t.month11_ask=this.getValueOrNull(e.ForwardCurve.Month11Ask),t.month11_bid=this.getValueOrNull(e.ForwardCurve.Month11Bid),t.month12_ask=this.getValueOrNull(e.ForwardCurve.Month12Ask),t.month12_bid=this.getValueOrNull(e.ForwardCurve.Month12Bid),t.value_date=this.getValueOrNull(e.ForwardCurve.ValueDate),InfrontUtil.allNullProperties(t)?null:t},n.prototype.getValueOrNull=function(t){var n=this.getValue(t);if(null==n)return null;switch(t){case e.RealtimeTags.SymbolType:return n.get()||this.feedInfo.getDefaultSymbolType();default:return n.get()}},n.prototype.getComputedValue=function(t,n){var i,r=this;if(void 0===n&&(n=!1),!(i=this.computedFields[t])&&n)switch(t.toUpperCase()){case"FEED_CODE":(i=this.computedFields[t]=new p(t,null,null)).set(this.feedInfo.exchCode);break;case"VWAP":i=this.computedFields[t]=new p(t,[this.getValue(e.RealtimeTags.OnExchTurnover,!0),this.getValue(e.RealtimeTags.OnExchVolume,!0)],function(e){return e[1]>0?InfrontUtil.roundToPrecision(e[0]/e[1],r.GetDecimals()):0});break;default:i=this.computedFields[t]=new p(t,null,null)}return i},n.prototype.GetExchangeCode=function(){return this.getComputedValue("FEED_CODE",!0).get()},n.prototype.GetComputedTagValueOrNull=function(e){var t=this.computedFields[e];return null==t?null:t.get()},n.prototype.setComputedValue=function(e,t){return this.computedFields[e]=t,t},n.prototype.CacheUpdated=function(t){void 0===t&&(t=!0),t&&this.getComputedValue(e.MwsCacheTimestampField,!0).set(Date.now()),this.genericCallbacks.NotifyCallbacks(this)},n.prototype.MWSRegisterGeneric=function(t){this.genericCallbacks.AddCallback(t),e.DEBUG_CALLBACKS_SYMBOL&&e.log(this.fs.toString(),"RegisterGeneric callback. Total:",this.genericCallbacks.length())},n.prototype.MWSUnregisterGeneric=function(t){this.genericCallbacks.RemoveCallback(t),e.DEBUG_CALLBACKS_SYMBOL&&e.log(this.fs.toString(),"UnregisterGeneric callback. Total:",this.genericCallbacks.length())},n.prototype.registerOrderbookCallback=function(t){this.orderbookCallbacks.AddCallback(t),e.DEBUG_CALLBACKS_SYMBOL&&e.log(this.fs.toString(),"RegisterOrderbook callback. Total:",this.orderbookCallbacks.length())},n.prototype.unregisterOrderbookCallback=function(n){this.orderbookCallbacks.RemoveCallback(n),e.DEBUG_CALLBACKS_SYMBOL&&e.log(this.fs.toString(),"UnregisterOrderbook callback. Total:",this.orderbookCallbacks.length()),0==this.orderbookCallbacks.length()&&(this.content&=~t.Mbl,this.content&=~t.Mbo,this.mbl.reset(),this.mbo.reset())},n.prototype.registerTradesCallback=function(t){this.tradesCallbacks.AddCallback(t),e.DEBUG_CALLBACKS_SYMBOL&&e.log(this.fs.toString(),"RegisterTrades callback. Total:",this.tradesCallbacks.length())},n.prototype.unregisterTradesCallback=function(t){this.tradesCallbacks.RemoveCallback(t),e.DEBUG_CALLBACKS_SYMBOL&&e.log(this.fs.toString(),"UnregisterTrades callback. Total:",this.tradesCallbacks.length())},n.prototype.distTrades=function(e){this.tradesCacheCallback&&this.tradesCacheCallback(e),this.tradesCallbacks.NotifyCallbacks(e)},n.prototype.GetDecimals=function(){switch(this.getValueOrNull(e.RealtimeTags.PriceDisplay)){case e.PriceDisplay.Display_0decimals:return 0;case e.PriceDisplay.Display_1decimals:return 1;case e.PriceDisplay.Display_2decimals:return 2;case e.PriceDisplay.Display_3decimals:return 3;case e.PriceDisplay.Display_4decimals:return 4;case e.PriceDisplay.Display_5decimals:return 5;case e.PriceDisplay.Display_6decimals:return 6;case e.PriceDisplay.Display_7decimals:return 7;case e.PriceDisplay.Display_8decimals:return 8;default:return 3}},n.prototype.ToMwsInstrument=function(){return{feed:this.getValueOrNull(e.RealtimeTags.Feed),ticker:this.getValueOrNull(e.RealtimeTags.Symbol),exchange_instrument_id:e.RealtimeTags.ExchangeSymbol,mic:this.getValueOrNull(e.RealtimeTags.MIC),full_name:this.getValueOrNull(e.RealtimeTags.FullName),isin:this.getValueOrNull(e.RealtimeTags.ISIN),issuer:this.getValueOrNull(e.RealtimeTags.Issuer),sector:this.getValueOrNull(e.RealtimeTags.Sector),issuer_full_name:this.getValueOrNull(e.RealtimeTags.IssuerFullName),instrument_type:n.SymbolTypeToStr(this.getValueOrNull(e.RealtimeTags.SymbolType)),instrument_subtype:n.SymbolSubTypeToStr(this.getValueOrNull(e.RealtimeTags.SymbolSubType)),currency:this.getValueOrNull(e.RealtimeTags.Currency),company_url:this.getValueOrNull(e.RealtimeTags.CompanyURL),min_iceberg_size:this.getValueOrNull(e.RealtimeTags.MinimumIcebergSize),under_ticker:this.getValueOrNull(e.RealtimeTags.UnderlyingTicker),under_feed:this.getValueOrNull(e.RealtimeTags.UnderlyingFeed),segment:this.getValueOrNull(e.RealtimeTags.PrimarySegment),segment_description:this.getValueOrNull(e.RealtimeTags.PrimarySegmentDescription),precision_code:this.GetDecimals(),is_tradable:this.getValueOrNull(e.RealtimeTags.IsTradable)}},n.prototype.ToMws=function(){return{ask:this.getValueOrNull(e.RealtimeTags.Ask),bid:this.getValueOrNull(e.RealtimeTags.Bid),last:this.getValueOrNull(e.RealtimeTags.Last),contract_size:this.getValueOrNull(e.RealtimeTags.ContractSize),lv_prev_close:this.getValueOrNull(e.RealtimeTags.YyLast),tick_size_id:this.getValueOrNull(e.RealtimeTags.TickId),instrument:this.ToMwsInstrument(),forward_curves:this.getForwardCurveAllValuesOrNull()}},n.SymbolTypeToStr=function(e){switch(e){case Infront.SymbolType.None:return"NONE";case Infront.SymbolType.Stock:return"STOCK";case Infront.SymbolType.News:return"NEWS";case Infront.SymbolType.Bond:return"BOND";case Infront.SymbolType.EuroOption:return"EURO_OPTION";case Infront.SymbolType.Futures:return"FUTURES";case Infront.SymbolType.Commodity:return"COMMODITY";case Infront.SymbolType.Index:return"INDEX";case Infront.SymbolType.Forex:return"FOREX";case Infront.SymbolType.UsOption:return"US_OPTION";case Infront.SymbolType.Funds:return"FUND";case Infront.SymbolType.Option:return"OPTION";case Infront.SymbolType.Combo:return"COMBO";case Infront.SymbolType.CFD:return"CFD";case Infront.SymbolType.Certificate:return"CERTIFICATE";case Infront.SymbolType.Unknown:return"UNKNOWN"}return""},n.SymbolSubTypeToStr=function(e){switch(e){case Infront.SymbolSubType.None:return"none";case Infront.SymbolSubType.OptionCall:return"Call";case Infront.SymbolSubType.OptionPut:return"Put";case Infront.SymbolSubType.OptionFuture:return"Future";case Infront.SymbolSubType.OptionForward:return"Forward";case Infront.SymbolSubType.OptionCallWarrant:return"Call Warrant";case Infront.SymbolSubType.OptionSecLending:return"Security Lending";case Infront.SymbolSubType.OptionPutWarrant:return"Put Warrant";case Infront.SymbolSubType.OptionCalendarSpread:return"Calendar Spread";case Infront.SymbolSubType.OptionVolatilityTrade:return"Volatility Trade";case Infront.SymbolSubType.OptionBarrierCall:return"Barrier Call";case Infront.SymbolSubType.OptionBarrierPut:return"Barrier Put";case Infront.SymbolSubType.OptionBarrier:return"Barrier";case Infront.SymbolSubType.OptionBarrierDownInCall:return"Barrier Down and In Call";case Infront.SymbolSubType.OptionBarrierDownInPut:return"Barrier Down and In Put";case Infront.SymbolSubType.OptionBarrierDownOutCall:return"Barrier Down and Out Call";case Infront.SymbolSubType.OptionBarrierDownOutPut:return"Barrier Down and Out Put";case Infront.SymbolSubType.OptionBarrierUpInCall:return"Barrier Up and In Call";case Infront.SymbolSubType.OptionBarrierUpInPut:return"Barrier Up and In Put";case Infront.SymbolSubType.OptionBarrierUpOutCall:return"Barrier Up and Out Call";case Infront.SymbolSubType.OptionBarrierUpOutPut:return"Barrier Up and Out Put";case Infront.SymbolSubType.BondConvertible:return"Convertible";case Infront.SymbolSubType.BondPremium:return"Premium";case Infront.SymbolSubType.BondSwap:return"Swap";case Infront.SymbolSubType.BondUTC:return"UTC";case Infront.SymbolSubType.BondCertificate:return"Certificate";case Infront.SymbolSubType.StockBonus:return"Bonus";case Infront.SymbolSubType.StockRight:return"Stock Right";case Infront.SymbolSubType.StockSubscriptionOption:return"Subscription Option";case Infront.SymbolSubType.ForexSpot:return"ForexSpot";case Infront.SymbolSubType.ForexDeposit:return"ForexDeposit";case Infront.SymbolSubType.ForexFRA:return"ForexFRA";case Infront.SymbolSubType.ForexForward:return"ForexForward";case Infront.SymbolSubType.ForexDepositIndicative:return"ForexDepositIndicative";case Infront.SymbolSubType.ForexFreeFRA:return"ForexFreeFRA";case Infront.SymbolSubType.ForexOption:return"ForexOption";case Infront.SymbolSubType.OptionBinaryConCall:return"Binary CON Call";case Infront.SymbolSubType.OptionBinaryConPut:return"Binary CON Put";case Infront.SymbolSubType.OptionBinaryGapCall:return"Binary GAP Call";case Infront.SymbolSubType.OptionBinaryGapPut:return"Binary GAP Put";case Infront.SymbolSubType.OptionBinaryAonCall:return"Binary AON Call";case Infront.SymbolSubType.OptionBinaryAonPut:return"Binary AON Put";case Infront.SymbolSubType.OptionBinarySupershare:return"Binary Supershare";case Infront.SymbolSubType.CertBasket:return"Certificate Basket";case Infront.SymbolSubType.CertDiscount:return"Certificate Discount";case Infront.SymbolSubType.CertLeverage:return"Certificate Leverage";case Infront.SymbolSubType.CertBonus:return"Certificate Bonus";case Infront.SymbolSubType.CertOther:return"Certificate Other";case Infront.SymbolSubType.CertInvestment:return"Certificate Investment";case Infront.SymbolSubType.CertParticipation:return"Certificate Participation";case Infront.SymbolSubType.CertCashOrShare:return"Certificate Cash or Share";case Infront.SymbolSubType.CertExpress:return"Certificate Express";case Infront.SymbolSubType.CertGuarantee:return"Certificate Guarantee";case Infront.SymbolSubType.CertIndex:return"Certificate Index";case Infront.SymbolSubType.CertOutperform:return"Certificate Outperform";case Infront.SymbolSubType.CertBalance:return"Certificate Balance";case Infront.SymbolSubType.CertBullBear:return"Certificate Bull Bear";case Infront.SymbolSubType.CertLongShort:return"Certificate Long Short";case Infront.SymbolSubType.CertMiniFuture:return"Certificate Mini Future";case Infront.SymbolSubType.CertIr:return"Certificate Ir";case Infront.SymbolSubType.CertCredit:return"Certificate Credit";case Infront.SymbolSubType.CertCoupon:return"Certificate Coupon";case Infront.SymbolSubType.CertPremium:return"Certificate Premium";case Infront.SymbolSubType.CertGrowth:return"Certificate Growth";case Infront.SymbolSubType.CertTracker:return"Certificate Tracker";case Infront.SymbolSubType.BondEquityIndex:return"Bond Equity Index";case Infront.SymbolSubType.BondPortfolio:return"Bond Portfolio";case Infront.SymbolSubType.BondHedge:return"Bond Hedge";case Infront.SymbolSubType.BondMarket:return"Bond Market";case Infront.SymbolSubType.BondCredit:return"Bond Credit";case Infront.SymbolSubType.BondCommodity:return"Bond Commodity";case Infront.SymbolSubType.BondStrategy:return"Bond Strategy";case Infront.SymbolSubType.BondInterval:return"Bond Interval";case Infront.SymbolSubType.BondTreasuryNotes:return"Bond Treasury Notes";case Infront.SymbolSubType.BondTreasury:return"Bond Treasury";case Infront.SymbolSubType.BondCorporate:return"Bond Corporate";case Infront.SymbolSubType.BondMunicipal:return"Bond Municipal";case Infront.SymbolSubType.BondLoanInstitution:return"Bond Loan Institution";case Infront.SymbolSubType.BondLeasingCompany:return"Bond Leasing Company";case Infront.SymbolSubType.BondHousing:return"Bond Housing";case Infront.SymbolSubType.BondForeign:return"Bond Foreign";case Infront.SymbolSubType.BondBankSavings:return"Bond Bank Savings";case Infront.SymbolSubType.BondTreasuryBills:return"Bond Treasury Bills";case Infront.SymbolSubType.BondFloater:return"Bond Floater";case Infront.SymbolSubType.BondStrips:return"Bond Strips";case Infront.SymbolSubType.BondZero:return"Bond Zero";case Infront.SymbolSubType.BondGovernment:return"Bond Government";case Infront.SymbolSubType.BondOther:return"Bond Other";case Infront.SymbolSubType.BondMoneyMarket:return"Bond Money Market";case Infront.SymbolSubType.BondMortgage:return"Bond Mortgage";case Infront.SymbolSubType.BondBenchmark:return"Bond Benchmark";case Infront.SymbolSubType.FundUcitsEtf:return"Fund Ucits Etf";case Infront.SymbolSubType.FundETN:return"FundETN";case Infront.SymbolSubType.FundMutual:return"FundMutual";case Infront.SymbolSubType.UcitsEtf:return"UcitsEtf";case Infront.SymbolSubType.Etf:return"Etf";case Infront.SymbolSubType.DerivativeIrSwap:return"DerivativeIrSwap";case Infront.SymbolSubType.IndicatorSpread:return"IndicatorSpread";case Infront.SymbolSubType.DerivativeOniSpread:return"DerivativeOniSpread";case Infront.SymbolSubType.DerivativeSwaption:return"DerivativeSwaption";case Infront.SymbolSubType.DerivativeTenorBasis:return"DerivativeTenorBasis";case Infront.SymbolSubType.DerivativeCurrencyBasis:return"DerivativeCurrencyBasis";case Infront.SymbolSubType.DerivativeCapsFloor:return"DerivativeCapsFloor";case Infront.SymbolSubType.DerivativeCrossCurrencySwap:return"DerivativeCrossCurrencySwap";case Infront.SymbolSubType.OptionStock:return"Stock";default:return e?"<"+e.toString(16)+">":"undefined"}},n.StrToSymbolType=function(e){switch(e){case"NONE":return Infront.SymbolType.None;case"STOCK":return Infront.SymbolType.Stock;case"NEWS":return Infront.SymbolType.News;case"BOND":return Infront.SymbolType.Bond;case"EURO_OPTION":return Infront.SymbolType.EuroOption;case"FUTURES":return Infront.SymbolType.Futures;case"COMMODITY":return Infront.SymbolType.Commodity;case"INDEX":return Infront.SymbolType.Index;case"FOREX":return Infront.SymbolType.Forex;case"US_OPTION":return Infront.SymbolType.UsOption;case"FUND":return Infront.SymbolType.Funds;case"OPTION":return Infront.SymbolType.Option;case"COMBO":return Infront.SymbolType.Combo;case"CFD":return Infront.SymbolType.CFD;case"CERTIFICATE":return Infront.SymbolType.Certificate;case"UNKNOWN":return Infront.SymbolType.Unknown}return 0},n.StrToSymbolSubType=function(e){switch(e){case"NONE":return Infront.SymbolSubType.None;case"UNKNOWN":return Infront.SymbolSubType.Unknown;case"OPTION_CALL":return Infront.SymbolSubType.OptionCall;case"OPTION_PUT":return Infront.SymbolSubType.OptionPut;case"OPTION_FUTURE":return Infront.SymbolSubType.OptionFuture;case"OPTION_FORWARD":return Infront.SymbolSubType.OptionForward;case"OPTION_CALL_WARRANT":return Infront.SymbolSubType.OptionCallWarrant;case"OPTION_SEC_LENDING":return Infront.SymbolSubType.OptionSecLending;case"OPTION_PUT_WARRANT":return Infront.SymbolSubType.OptionPutWarrant;case"OPTION_CALENDAR_SPREAD":return Infront.SymbolSubType.OptionCalendarSpread;case"OPTION_VOLATILITY_TRADE":return Infront.SymbolSubType.OptionVolatilityTrade;case"OPTION_BARRIER_CALL":return Infront.SymbolSubType.OptionBarrierCall;case"OPTION_BARRIER_PUT":return Infront.SymbolSubType.OptionBarrierPut;case"OPTION_BARRIER":return Infront.SymbolSubType.OptionBarrier;case"OPTION_BARRIER_DOWN_IN_CALL":return Infront.SymbolSubType.OptionBarrierDownInCall;case"OPTION_BARRIER_DOWN_IN_PUT":return Infront.SymbolSubType.OptionBarrierDownInPut;case"OPTION_BARRIER_DOWN_OUT_CALL":return Infront.SymbolSubType.OptionBarrierDownOutCall;case"OPTION_BARRIER_DOWN_OUT_PUT":return Infront.SymbolSubType.OptionBarrierDownOutPut;case"OPTION_BARRIER_UP_IN_CALL":return Infront.SymbolSubType.OptionBarrierUpInCall;case"OPTION_BARRIER_UP_IN_PUT":return Infront.SymbolSubType.OptionBarrierUpInPut;case"OPTION_BARRIER_UP_OUT_CALL":return Infront.SymbolSubType.OptionBarrierUpOutCall;case"OPTION_BARRIER_UP_OUT_PUT":return Infront.SymbolSubType.OptionBarrierUpOutPut}return 0},n}();e.Symbol=g}(IDS||(IDS={})),function(e){var t=function(){function t(){this.pidSidDb={}}return t.prototype.GetFeedDb=function(t,n,i){var r=this.pidSidDb[t.Index()];return r||i?(r||(r=this.pidSidDb[t.Index()]=new e.PidSidDb),r.GetFeed(n,i)):null},t.prototype.GetSymbols=function(e,t){var n=[];for(var i in this.pidSidDb){var r=this.pidSidDb[i];if(r){var a=r.GetFeed(e,!1);if(a){var s=a.syms[t];s&&n.push(s)}}}return 0==n.length?null:n},t}();e.Db=t}(Infront||(Infront={})),function(e){!function(e){e[e.PASSIVE=0]="PASSIVE",e[e.AGGRESSIVE=1]="AGGRESSIVE",e[e.FIRST_RESULT=2]="FIRST_RESULT"}(e.ComputationStrategy||(e.ComputationStrategy={}));var t=function(){function e(e,t){this.cacheKey=e,this.fieldSpec=t}return e.prototype.getSpecAsArray=function(){return InfrontUtil.isArray(this.fieldSpec)?this.fieldSpec:[this.fieldSpec]},e.prototype.toString=function(){return this.cacheKey+"/"+this.getSpecAsArray().reduce(function(e,t,n,i){return e+"/"+t},"")},e}();e.FieldReference=t;var n,i=function(){};!function(e){e[e.CachedArrays=0]="CachedArrays",e[e.CachedObservables=1]="CachedObservables",e[e.UnboundObservers=2]="UnboundObservers",e[e.UnboundArrayObservers=3]="UnboundArrayObservers"}(n=e.CacheSource||(e.CacheSource={}));var r=function(){function t(){this.cachedObservables={},this.cachedArrays={},this.unboundObservers={},this.unboundArrayObservers={},this.snapshotCallback=null,this.feedCallback=null}return t.prototype.SetIDS=function(e){this.streamingManager=e},t.prototype.GetIDS=function(){return this.streamingManager},t.prototype.createArray=function(t,n,r,a){var s;if(void 0===a&&(a=!0),this.cachedArrays.hasOwnProperty(t))(s=this.cachedArrays[t]).itemKeyCreator||(s.itemKeyCreator=n);else if((s=new i).array=r?new e.SortedObservableArray(r,a):new e.ObservableArray,n&&(s.itemKeyCreator=n),this.cachedArrays[t]=s,this.unboundArrayObservers.hasOwnProperty(t)){for(var o=this.unboundArrayObservers[t],l=o.pop();l;)s.array.observe(l),l=o.pop();delete this.unboundArrayObservers[t]}},t.prototype.updateArrayItem=function(e,t){if(this.cachedArrays.hasOwnProperty(e)){var n=this.cachedArrays[e];if(n.itemKeyCreator){var i=n.itemKeyCreator(t);this.update(i,t),-1==n.array.indexOf(i)&&n.array.push(i)}}},t.prototype.updateArrayItems=function(e,t){if(this.cachedArrays.hasOwnProperty(e)){var n=this.cachedArrays[e];if(n.itemKeyCreator)for(var i=0;i<t.length;i++){var r=n.itemKeyCreator(t[i]);this.update(r,t[i]),-1==n.array.indexOf(r)&&n.array.push(r)}}},t.prototype.insertKeyIntoArray=function(e,t){this.cachedArrays.hasOwnProperty(e)&&this.cachedArrays[e].array.push(t)},t.prototype.deleteArrayItem=function(e,t){var n=this.lookupArrayContainer(e);if(n&&n.itemKeyCreator){var i=n.itemKeyCreator(t),r=n.array.indexOf(i);r>-1&&n.array.removeItemAt(r)}},t.prototype.clearArray=function(e){var t=this.lookupArrayContainer(e);if(t){for(var n=0;n<t.array.length();n++)this.delete(t.array.item(n));t.array.clear()}},t.prototype.lookupArrayContainer=function(e){var t=null;return this.cachedArrays.hasOwnProperty(e)&&(t=this.cachedArrays[e]),t},t.prototype.bindToArray=function(e,t){var n=this;return this.cachedArrays.hasOwnProperty(e)?this.cachedArrays[e].array.observe(t):(this.unboundArrayObservers.hasOwnProperty(e)||(this.unboundArrayObservers[e]=[]),this.unboundArrayObservers[e].push(t)),function(){n.unbindFromArray(e,t)}},t.prototype.unbindFromArray=function(e,t){if(this.cachedArrays.hasOwnProperty(e))this.cachedArrays[e].array.unbind(t);else if(this.unboundArrayObservers.hasOwnProperty(e))for(var n=this.unboundArrayObservers[e],i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}},t.prototype.getArray=function(e){var t=this.lookupArrayContainer(e);return t?t.array:null},t.prototype.update=function(e,t,n){void 0===n&&(n=!0),null!=e&&null!=t&&(this.updateObservableFields(e,t),n&&this.updateCacheTimestamp(e))},t.prototype.updateIdsValue=function(e,t,n){var i=e.indexOf("|"),r=e.substr(0,i),a=Number(r);if(a>0){var s=e.substr(i+1,e.length-i-1);this.streamingManager.SetCustomSymbolValue(a,s,t,n)}},t.prototype.deleteValue=function(e){this.cachedObservables[e]&&(this.cachedObservables[e].set(null),delete this.cachedObservables[e])},t.prototype.delete=function(e){if(e.length>4){var t=[];for(var n in this.cachedObservables)this.cachedObservables.hasOwnProperty(n)&&n.substr(0,e.length)==e&&"/"==n.substr(e.length,1)&&t.push(n);for(var i=0;i<t.length;i++)this.deleteValue(t[i])}},t.prototype.customBindFR=function(e,t){return this.customBind(e.cacheKey,e.fieldSpec,t)},t.prototype.inlineBind=function(t,n,i){return this.customBind(t,n,e.BindingFactory.createInlineBinding(i))},t.prototype.inlineSymbolBind=function(t,n,i){return this.customSymbolBind(t,n,e.BindingFactory.createInlineBinding(i))},t.prototype.customBind=function(e,t,n){var i=this;if(!n||!t)return function(){};var r=-1,a=!1,s=0;if(InfrontUtil.isString(e)){a=-1!=(r=e.indexOf("|"))&&-1!=e.indexOf("|",r+1);var o=e.substr(0,r);s=Number(o)}if(this.streamingManager&&-1!=r&&!a&&s>0){var l=e.substr(r+1,e.length-r-1);return this.streamingManager.MWSCustomBind(s,l,t,n)}var c=InfrontUtil.isArray(t)?t:[t],d=this.createObserverKey(e,c);return this.cachedObservables.hasOwnProperty(d)?this.cachedObservables[d].observe(n):(this.unboundObservers.hasOwnProperty(d)||(this.unboundObservers[d]=[],IDS.DEBUG_CACHE_UNBOUND_OBSERVERS&&IDS.log("Add unbound observer",d)),this.unboundObservers[d].push(n)),function(){i.unbind(e,c,n)}},t.prototype.customSymbolBind=function(e,t,n){return n&&t?this.streamingManager.SymbolCustomBind(e.feed,e.ticker,t,n):null},t.prototype.modifyableBind=function(t,n,i){var r,a=this,s=e.BindingFactory.createInlineBinding(function(e){r&&r(),i.valueUpdated(null),r=a.customBind(e,n,i)});return t.observe(s),function(){r&&r(),t.unbind(s)}},t.prototype.unbind=function(e,t,n){var i=this.createObserverKey(e,t);if(this.cachedObservables.hasOwnProperty(i))this.cachedObservables[i].unbind(n);else if(this.unboundObservers.hasOwnProperty(i)){var r=this.unboundObservers[i],a=r.indexOf(n);a>-1&&r.splice(a,1),0==r.length&&delete this.unboundObservers[i]}},t.prototype.addUnboundObservers=function(e,t){if(this.unboundObservers.hasOwnProperty(e)){for(var n=this.unboundObservers[e],i=0;i<n.length;i++)t.observe(n[i]);IDS.DEBUG_CACHE_UNBOUND_OBSERVERS&&IDS.log("Resolve unbound observer",e),delete this.unboundObservers[e]}},t.prototype.createObserverKey=function(e,n){for(var i=null!=e?e:t.kDefaultCacheKey,r=0;r<n.length;r++)i=i+"/"+n[r];return i},t.prototype.bind=function(t,n,i){var r=null;if(null!=i){var a=e.BindingFactory.createValueBinding(i,"innerHTML");r=this.customBind(t,n,a)}return r},t.prototype.has=function(e,t){var n=this.createObserverKey(e,InfrontUtil.isArray(t)?t:[t]);return this.cachedObservables.hasOwnProperty(n)},t.prototype.get=function(e,t){var n=null;if(null!=e&&null!=t){var i=-1,r=!1,a=0;if(InfrontUtil.isString(e)){r=-1!=(i=e.indexOf("|"))&&-1!=e.indexOf("|",i+1);var s=e.substr(0,i);a=Number(s)}if(this.streamingManager&&-1!=i&&!r&&a>0){if(a>0){var o=e.substr(i+1,e.length-i-1);n=this.streamingManager.getSymbolValue(a,o,InfrontUtil.isArray(t)?t:[t])}}else{var l=InfrontUtil.isArray(t)?t:[t],c=this.createObserverKey(e,l),d=this.cachedObservables[c];null!=d&&(n=d.get())}}return n},t.prototype.asyncGet=function(t,n,i){var r,a;void 0===i&&(i=null),"string"==typeof n?(r=n,a=i):(r=n.cacheKey,a=n.fieldSpec),this.customBind(r,a,e.BindingFactory.createAsyncGetBinding(function(e){t(e)}))},t.prototype.symbolAsyncGet=function(t,n,i){this.customSymbolBind(t,n,e.BindingFactory.createAsyncGetBinding(function(e){i(e)}))},t.prototype.guaranteedAsyncGet=function(n,i,r){var a,s,o=this;void 0===r&&(r=null),"string"==typeof i?(a=i,s=r):(a=i.cacheKey,s=i.fieldSpec),this.customBind(a,t.kCacheTimestampField,e.BindingFactory.createAsyncGetBinding(function(e){n(o.get(a,s))}))},t.prototype.getInstrument=function(t){var n=null,i=this.get(t,[e.MWSConstants.instrument,e.MWSConstants.feed]),r=this.get(t,[e.MWSConstants.instrument,e.MWSConstants.ticker]);if(i&&r){n=new e.Instrument(i,r);var a=this.get(t,[e.MWSConstants.instrument,e.MWSConstants.isin]);a&&(n.isin=a);var s=this.get(t,[e.MWSConstants.instrument,e.MWSConstants.currency]);s&&(n.currency=s);var o=this.get(t,[e.MWSConstants.instrument,e.MWSConstants.full_name]);o&&(n.full_name=o)}return n},t.prototype.search=function(e){var t;t=e instanceof RegExp?e:new RegExp(e);var n=[],i={},r=null,a=null;for(var s in this.cachedObservables)if(this.cachedObservables.hasOwnProperty(s)&&t.test(s)){var o=s.split("/");r!=o[0]&&(r=o[0],i.hasOwnProperty(r)||(i[r]={},n.push(i[r])),a=i[r]);for(var l=this.cachedObservables[s].get(),c=a,d=1;d<o.length;d++)if(d==o.length-1)"_"!=o[d].substr(0,1)&&(c[o[d]]=l);else if(c.hasOwnProperty(o[d]))c=c[o[d]];else{var u={};c[o[d]]=u,c=u}}return n},t.prototype.debugSearch=function(e){var t=e.toLowerCase(),n={};for(var i in this.cachedObservables)this.cachedObservables.hasOwnProperty(i)&&i.indexOf(t)>-1&&(n[i]=this.cachedObservables[i]);IDS.log(n)},t.prototype.createComputedField=function(t,n,i,r){if(this.streamingManager){var a=IDS.FromMws.SplitInstrumentKey(t);if(a)return void this.streamingManager.MWSCreateComputedField(a.feed,a.ticker,n,i,r)}if(!this.fieldExists(t,n)){var s=new e.CacheComputedObservable(this,i,r),o=[n],l=this.createObserverKey(t,o);this.cachedObservables[l]=s,this.addUnboundObservers(l,s)}},t.prototype.createSymbolComputedField=function(e,t,n,i){if(e)return this.streamingManager.CreateSymbolComputedField(e.feed,e.ticker,t,n,i)},t.prototype.createFieldComputation=function(t,n,i,r,a,s){var o=new e.CacheColumnComputedObservable(this,n,a,s,r);i.observe(o);var l=this.createObserverKey(t.cacheKey,t.getSpecAsArray());return this.cachedObservables[l]=o,this.addUnboundObservers(l,o),function(){i.unbind(o)}},t.prototype.createWeightedAverage=function(t,n,i,r,a,s){var o=new e.CacheWeightedAverageObservable(this,n,i,a,s);r.observe(o);var l=this.createObserverKey(t.cacheKey,t.getSpecAsArray());return this.cachedObservables[l]=o,this.addUnboundObservers(l,o),function(){r.unbind(o)}},t.prototype.createInCacheFieldComputation=function(t,n,i,r,a,s,o){if(this.cachedArrays.hasOwnProperty(i)){var l=this.cachedArrays[i],c=this.createObserverKey(t,InfrontUtil.isArray(n)?n:[n]),d=new e.CacheColumnComputedObservable(this,r,s||l.cacheKeyCreator,o,a);return l.array.observe(d),this.cachedObservables[c]=d,this.addUnboundObservers(c,d),function(){l.unbind(d)}}},t.prototype.updateCacheTimestamp=function(n){var i=this.createObserverKey(n,[t.kCacheTimestampField]);this.cachedObservables.hasOwnProperty(i)||(this.cachedObservables[i]=new e.Observable,this.addUnboundObservers(i,this.cachedObservables[i])),this.cachedObservables[i].set(Date.now())},t.prototype.updateObservableFields=function(t,n){for(var i in n)if(n.hasOwnProperty(i)){var r=t+"/"+i;null==n[i]||InfrontUtil.isPrimitive(n[i])||InfrontUtil.isArray(n[i])?(this.cachedObservables.hasOwnProperty(r)||(this.cachedObservables[r]=new e.Observable,this.addUnboundObservers(r,this.cachedObservables[r])),this.cachedObservables[r].set(n[i])):InfrontUtil.isObject(n[i])&&this.updateObservableFields(r,n[i])}},t.prototype.fieldExists=function(e,t){var n=InfrontUtil.isArray(t)?t:[t],i=this.createObserverKey(e,n);return this.cachedObservables.hasOwnProperty(i)},t.prototype.getGuaranteedSnapshotOnDataCallback=function(e){var t=this;return function(n){n.hasOwnProperty("instrument")?t.update(s.createInstrumentKey(n.instrument),n):e&&t.updateCacheTimestamp(s.createInstrumentKey(e))}},t.prototype.getGuaranteedSnapshotOnErrorCallback=function(e,t){var n=this;return void 0===t&&(t=!1),function(t,i){e&&n.updateCacheTimestamp(s.createInstrumentKey(e))}},t.prototype.getSnapshotOnDataCallback=function(){var e=this;return null==this.snapshotCallback&&(this.snapshotCallback=function(t){t.hasOwnProperty("instrument")&&e.update(s.createInstrumentKey(t.instrument),t)}),this.snapshotCallback},t.prototype.getFeedOnDataCallback=function(){var e=this;return null==this.feedCallback&&(this.feedCallback=function(t){t.hasOwnProperty("feed")&&e.update(s.createFeedKey(t.feed),t)}),this.feedCallback},t.objectHasField=function(e,n){return e.hasOwnProperty(n[0])&&(1==n.length||t.objectHasField(e[n[0]],n.slice(1)))},t.prototype.inspectCache=function(e,t,i){void 0===t&&(t="Cache"),void 0===i&&(i=n.CachedObservables);var r,a={};switch(i){case n.CachedArrays:r=this.cachedArrays;break;case n.CachedObservables:r=this.cachedObservables;break;case n.UnboundArrayObservers:r=this.unboundArrayObservers;break;case n.UnboundObservers:r=this.unboundObservers}Object.keys(r).filter(function(t){return!e||t.indexOf(e)>-1}).forEach(function(e){r.hasOwnProperty(e)&&(a[e]=r[e])}),IDS.log(t+":",a)},t.kCacheTimestampField="_cache_time_stamp",t.kDefaultCacheKey="DEFAULT",t}();e.BindingCache=r;var a=function(){function e(e,t){this.cache=e,this.tradingManager=t}return e.prototype.getOrder=function(e,t){var n,i=null;if(n=t?this.tradingManager.getPortfolio(t):this.tradingManager.getCurrentPortfolio()){var r="order_"+n.name+"\\|"+e,a=this.cache.search(r);a.length>0&&(i=a[0])}return i},e}();e.DataAccess=a;var s=function(){function t(){}return t.createInstrumentKey=function(t){return t&&t.hasOwnProperty(e.MWSConstants.feed)&&null!=t[e.MWSConstants.feed]?t[e.MWSConstants.feed]+"|"+t[e.MWSConstants.ticker]:t&&t.hasOwnProperty(e.MWSConstants.market)&&null!=t[e.MWSConstants.market]?t[e.MWSConstants.market]+"|"+this.createInstrumentKeyVariantHandler(t):""},t.createInstrumentKeyVariantHandler=function(t){var n=t[e.MWSConstants.ticker];return t.hasOwnProperty(e.MWSConstants.currency)&&null!=t[e.MWSConstants.currency]&&(n=t[e.MWSConstants.currency]+"|"+n),t.hasOwnProperty(e.MWSConstants.isin)&&null!=t[e.MWSConstants.isin]?n=t[e.MWSConstants.isin]+"|"+n:t.hasOwnProperty(e.MWSConstants.exchange_instrument_id)&&null!=t[e.MWSConstants.exchange_instrument_id]&&(n=t[e.MWSConstants.exchange_instrument_id]+"|"+n),n},t.createInstrumentKeyVariantIsin=function(t){return t[e.MWSConstants.market]+"|"+t[e.MWSConstants.ticker]},t.createInstrumentFromKey=function(t){var n=t.split("|"),i=n.length;return i>2?new e.Instrument(Number(n[i-2]),n[i-1]):new e.Instrument(Number(n[0]),n[1])},t.createFeedKey=function(e){return"feed_"+e},t.createBrokerKey=function(e,t,n){return e+"|broker_"+n+"|"+t},t.createInstrumentBrokerstatsKey=function(t,n,i){return t+"|broker_"+i+"|"+n[e.MWSConstants.feed]+"|"+n[e.MWSConstants.ticker]},t.createPortfolioKey=function(e){return"portfolio_"+(null==e?"":e.name)},t.createPortfolioDataKey=function(e){return t.createPortfolioKey(e)+"|data"},t.createPortfolioPositionsKey=function(e){return t.createPortfolioKey(e)+"|positions"},t.createPortfolioCashPositionsKey=function(e){return t.createPortfolioKey(e)+"|cashPositions"},t.createPortfolioOrdersKey=function(e){return t.createPortfolioKey(e)+"|orders"},t.createPortfolioTradesKey=function(e){return t.createPortfolioKey(e)+"|trades"},t.createPortfolioValuesKey=function(e){return t.createPortfolioKey(e)+"|values"},t.createPortfolioAlertsKey=function(e){return t.createPortfolioKey(e)+"|alerts"},t.createOrderKey=function(n){return t.createOrderIdKey(n[e.MWSConstants.portfolio],n[e.MWSConstants.order_id])},t.createOrderIdKey=function(e,t){return"order_"+e+"|"+t},t.createTradeKey=function(t){return"trade_"+t[e.MWSConstants.portfolio]+"|"+t[e.MWSConstants.trade_id]},t.createCashPositionKey=function(t){return t.hasOwnProperty(e.MWSConstants.cash)?"cash_"+t[e.MWSConstants.portfolio]+"|"+t[e.MWSConstants.cash][e.MWSConstants.currency]:t.hasOwnProperty(e.MWSConstants.currency)?"cash_"+t[e.MWSConstants.portfolio]+"|"+t[e.MWSConstants.currency]:void 0},t.createValueKey=function(n){return t.createPotentialValueKey(n[e.MWSConstants.portfolio],n.name)},t.createPotentialValueKey=function(t,n){return"value_"+t+"|"+e.TradingManager.createPortfolioValueId(n)},t.createPositionKey=function(n){return n.hasOwnProperty(e.MWSConstants.cash)?t.createCashPositionKey(n):t.createPotentialPositionKey(n[e.MWSConstants.portfolio],n[e.MWSConstants.instrument])},t.createPotentialPositionKey=function(e,n){return e+"|"+t.createInstrumentKey(n)},t.createNetTradesKey=function(e){return t.createPortfolioKey(e)+"|net_trades"},t.createNetTradeKey=function(e,n){return"net_trade_"+t.createPortfolioKey(e)+"|"+t.createInstrumentKey(n)},t.createVisualKey=function(e){return"visual|"+e},t.createTradesArrayKey=function(e){return"trades_"+t.createInstrumentKey(e)},t}();e.CacheKeyFactory=s;var o=function(){function e(t,n,i,r,a){this.cache=t,this.filterKey=e.kFilterUnbindKeyPrefix+e.filterCounter++,this.observer=n,this.fields=i,this.filterFunc=a,this.cacheKeyCreator=r,this.unbinds={},this.values={}}return e.prototype.updateItem=function(e,t){var n=this.getLocalKey(e,!0);this.values.hasOwnProperty(n)&&this.values[n]==t||(this.values[n]=t,t?this.observer.itemAdded(e,0):this.observer.itemRemoved(e,0))},e.prototype.reInit=function(e){for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)},e.prototype.itemAdded=function(e,n){for(var i=this,r=this.cacheKeyCreator(e,null),a=[],s=0;s<this.fields.length;s++)a.push(new t(this.cacheKeyCreator(e,this.fields[s]),this.fields[s]));this.cache.createComputedField(r,this.filterKey,a,this.filterFunc),this.updateItem(e,this.cache.get(r,this.filterKey));var o=this.getLocalKey(e,!0);this.unbinds[o]=this.cache.inlineBind(r,this.filterKey,function(t){i.updateItem(e,t)})},e.prototype.itemRemoved=function(e,t){var n;null!=(n=this.getLocalKey(e))&&this.unbinds.hasOwnProperty(n)&&(this.unbinds[n](),delete e[this.filterKey],this.values.hasOwnProperty(n)&&delete this.values[n]),this.observer.itemRemoved(e,0)},e.prototype.itemMoved=function(e,t,n){},e.prototype.reset=function(){for(var e in this.unbinds)this.unbinds.hasOwnProperty(e)&&(this.unbinds[e](),delete this.unbinds[e]);this.values={}},e.prototype.destroy=function(){this.observer=null,this.reset()},e.prototype.getLocalKey=function(e,t){if(void 0===t&&(t=!1),"string"==typeof e)return e;var n=null;return e.hasOwnProperty(this.filterKey)?n=e[this.filterKey]:t&&(e[this.filterKey]=InfrontUtil.makeUUID(),n=e[this.filterKey]),n},e.kFilterUnbindKeyPrefix="_CacheBasedFilter",e.filterCounter=0,e}();e.CacheBasedFilter=o}(Infront||(Infront={})),function(e){var t=function(){};e.InfrontObject=t;var n=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=e.call(this)||this;return i.feed=t,i.ticker=n,i}return __extends(t,e),t.isValid=function(e){return e&&InfrontUtil.isNumber(e.feed)&&InfrontUtil.isString(e.ticker)},t.prototype.equals=function(e){return void 0!==e&&null!=e&&e.hasOwnProperty("feed")&&e.hasOwnProperty("ticker")&&e.feed==this.feed&&e.ticker==this.ticker},t.isSameInstrument=function(e,n){return t.isInstrument(e)&&t.isInstrument(n)&&e.feed==n.feed&&e.ticker==n.ticker},t.prototype.inf_clone=function(){return t.inf_clone(this)},t.inf_clone=function(e){return new t(e.feed,e.ticker)},t.isInstrument=function(e){return InfrontUtil.isObject(e)&&e.hasOwnProperty("feed")&&e.hasOwnProperty("ticker")},t.GetValueOrNull=function(e,t){var n=null;if(e&&t)if(t instanceof IDS.Symbol){for(var i=IDS.FromMws.Tags([e]),r=0,a=i.normalTags;r<a.length;r++){var s=a[r];n=t.getValueOrNull(s)}for(var o=0,l=i.computedTags;o<l.length;o++)s=l[o],n=t.GetComputedTagValueOrNull(s)}else n=t[e]?t[e]:null;return n},t.prototype.toJson=function(){var e={};return e.feed=this.feed,e.ticker=this.ticker,JSON.stringify(e)},t.prototype.formatted=function(){return this.ticker+" ["+this.feed.toString()+"]"},t.prototype.toString=function(e){return void 0===e&&(e=":"),this.feed.toString()+e+this.ticker},t.jsonToInstrument=function(e){if(e&&""!=e){var n=JSON.parse(e);return new t(n.feed,n.ticker)}return null},t.InstrumentDataType=function(e){switch(e){case"NONE":return 0;case"STOCK":return 1;case"NEWS":return 2;case"BOND":return 4;case"EURO_OPTION":return 8;case"FUTURES":return 16;case"COMMODITY":return 32;case"INDEX":return 64;case"FOREX":return 128;case"US_OPTION":return 256;case"FUND":return 512;case"OPTION":return 1024;case"COMBO":return 2048;case"CFD":return 4096;case"CERTIFICATE":return 8192;case"INDICATOR":return 16384;case"UNKNOWN":return 255}return 0},t.InstrumentSubType=function(e){return 0},t}(t);e.Instrument=n;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.Chain=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.ChainNode=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.PidSidsObject=a;var s=function(){this.min_delay_secs=0,this.max_delay_secs=0,this.data_types=[],this.additional_info={}};e.FeedMetaData=s;var o=function(){function t(){}return t.prototype.findParam=function(e){for(var t=null,n=0;n<this.params.length;n++)if(this.params[n].id.toLowerCase()==e.toLowerCase()){t=this.params[n];break}return t},t.parseFromResultObject=function(n){var i=new t;return i.id=n[e.MWSConstants.id],i.label=n[e.MWSConstants.label],i.description=n[e.MWSConstants.description],i.params=n[e.MWSConstants.params],i},t}();e.Strategy=o;var l=function(){function e(){}return e.FREE_TEXT="FREE_TEXT",e.DOUBLE="DOUBLE",e.STOP_PRICE="STOP_PRICE",e.INIT_CODE="INIT_CODE",e.PARENT="PARENT",e.DONE_CODE="DONE_CODE",e.VALID_SESSION="VALID_SESSION",e.TIME="TIME",e.DATE="DATE",e.DATETIME="DATETIME",e.DROPDOWN="DROPDOWN",e.BOOL="BOOL",e.INT="INT",e.INSTRUMENT="INSTRUMENT",e.PRICE="PRICE",e.VOLUME_LOTS="VOLUME_LOTS",e.MULTI_LINE="MULTI_LINE",e}();e.AlgoParam=l;var c=function(){function e(e,t){this.label=e,this.value=t}return e.prototype.setLabel=function(e){return this.label=e,this},e.prototype.setValue=function(e){return this.value=e,this},e}();e.DropdownParam=c;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.forOrderTypes=[],t}return __extends(t,e),t}(l);e.CustomFieldItem=d,function(e){e[e.FlashLevel1=0]="FlashLevel1",e[e.FlashLevel2=1]="FlashLevel2",e[e.FlashLevel3=2]="FlashLevel3",e[e.Url=3]="Url",e[e.Regular=4]="Regular"}(e.NewsType||(e.NewsType={})),function(e){e[e.Buy=0]="Buy",e[e.Sell=1]="Sell"}(e.BuyOrSell||(e.BuyOrSell={}));var u=function(e){function t(t,n,i,r){var a=e.call(this)||this;return a.efcode=t,a.name=n,a.isin=i,a.ticker=r,a}return __extends(t,e),t.prototype.equals=function(e){return void 0!==e&&null!=e&&e.hasOwnProperty("efcode")&&e.hasOwnProperty("isin")&&e.efcode==this.efcode&&e.isin==this.isin},t.prototype.inf_clone=function(){return new t(this.efcode,this.name,this.isin,this.ticker)},t.prototype.getCompany=function(){return void 0!==this.isin&&null!=this.isin?this.isin:this.efcode},t}(t);e.InfinInstrument=u;var h=function(t){function n(n,i,r,a,s){void 0===n&&(n="WORLD"),void 0===i&&(i=e.UniverseType.REGION);var o=t.call(this)||this;return o.code=n,o.type=i,o.marketPlaces=r,o.sector=a,o.country=s,o}return __extends(n,t),n.prototype.equals=function(e){return void 0!==e&&null!=e&&e.hasOwnProperty("code")&&e.code==this.code&&e.hasOwnProperty("type")&&e.type==this.type},n.prototype.inf_clone=function(){return new n(this.code,this.type,this.marketPlaces,this.sector,this.country)},n.prototype.setCode=function(e){this.code=e},n.prototype.setType=function(e){this.type=e},n.prototype.setSector=function(e){this.sector=e},n.prototype.setCountry=function(e){this.country=e},n.prototype.setMarketPlaces=function(e){this.marketPlaces=e},n.prototype.getCode=function(){return this.code},n.prototype.getType=function(){return this.type},n.prototype.getAdditionalSector=function(){return this.sector},n.prototype.getAdditionalCountry=function(){return this.country},n.prototype.getAdditionalMkpList=function(){return this.marketPlaces},n}(t);e.UniverseObject=h;var p=function(e){function t(t){var n=e.call(this)||this;return n.isin=t,n}return __extends(t,e),t.prototype.equals=function(e){return void 0!==e&&null!=e&&e.hasOwnProperty("isin")&&e.isin==this.isin},t.prototype.inf_clone=function(){return new t(this.isin)},t}(t);e.EtaObject=p;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.FieldObject=m;var g=function(e){function t(t,n){var i=e.call(this)||this;return i.value=t,i.description=n,i}return __extends(t,e),t}(t);e.DropdownObj=g}(Infront||(Infront={})),function(e){var t=function(){function e(){}return e.ASK="ASK",e.BID="BID",e}();e.OrderType=t;var n=function(){function e(){}return e.ACC_VOLUME="ACC_VOLUME",e.TURNOVER="TURNOVER",e.ONEXCH_VOLUME="ONEXCH_VOLUME",e.ONEXCH_TURNOVER="ONEXCH_TURNOVER",e.BID="BID",e.BID_SIZE="BID_SIZE",e.ASK_SIZE="ASK_SIZE",e.NUM_BIDS="NUM_BIDS",e.NUM_ASKS="NUM_ASKS",e.ORDERBOOK="ORDERBOOK",e.VWAP="VWAP",e.AVG_VOLUME="AVG_VOLUME",e.AVG_VALUE="AVG_VALUE",e.OPEN="OPEN",e.ASK="ASK",e.HIGH="HIGH",e.LOW="LOW",e.LAST="LAST",e.LAST_VALID="LAST_VALID",e.PREVIOUS_CLOSE="PREVIOUS_CLOSE",e.TIME="TIME",e.CHANGE="CHANGE",e.PCT_CHANGE="PCT_CHANGE",e.NUM_TRADES="NUM_TRADES",e.GICS="GICS",e.NUM_SHARES="NUM_SHARES",e.RSI14="RSI14",e.MACD="MACD",e.MA50="MA50",e.MA100="MA100",e.MA200="MA200",e.CONTRACT_SIZE="CONTRACT_SIZE",e.TRADING_STATUS="TRADING_STATUS",e.TICK_SIZE_ID="TICK_SIZE_ID",e.SEGMENT="SEGMENT",e.SEGMENT_DESCRIPTION="SEGMENT_DESCRIPTION",e.SECTOR="SECTOR",e.INDIC_PRICE="INDIC_PRICE",e.INDIC_VOLUME="INDIC_VOLUME",e.TRADING_POWER="TRADING_POWER",e.BASE_TRADING_POWER="BASE_TRADING_POWER",e.PHYSICAL_UNIT="PHYSICAL_UNIT",e.SECONDARY_SEGMENT="SECONDARY_SEGMENT",e}();e.Fields=n;var i=function(){function e(){}return e.FUND_DETAILS="FUND_DETAILS",e.HIST_PERFORMANCE="HIST_PERFORMANCE",e.REF_DATA_DETAILS="REF_DATA_DETAILS",e}();e.FieldGroups=i;var r=function(){function e(){}return e.ROOT_OBJECT="fund_details",e.FUND_STYLEBOX=[e.ROOT_OBJECT,"portfolio","equity_style_box"],e.START_DATE=[e.ROOT_OBJECT,"operation","start_date"],e.INVESTMENT_MANDATE=[e.ROOT_OBJECT,"investment_mandate"],e.PROSPECTIVE_BOOK_VALUE_YIELD=[e.ROOT_OBJECT,"portfolio","prospective_book_value_yield"],e.PROSPECTIVE_EARNINGS_YIELD=[e.ROOT_OBJECT,"portfolio","prospective_earnings_yield"],e.TOP_COUNTRIES=[e.ROOT_OBJECT,"portfolio","exposure","top_countries"],e.TOP_SECTORS=[e.ROOT_OBJECT,"portfolio","exposure","top_sectors"],e.TOP_HOLDINGS=[e.ROOT_OBJECT,"portfolio","top_holdings"],e.ASSET_ALLOCATION=[e.ROOT_OBJECT,"portfolio","asset_allocation"],e.MIN_INIT_INVESTMENT=[e.ROOT_OBJECT,"operation","min_init_investment"],e.FOR_SALE_IN=[e.ROOT_OBJECT,"operation","for_sale_in"],e.FOR_SALE_IN_SHORT=[e.ROOT_OBJECT,"operation","for_sale_in"],e.FOR_SALE_IN_COUNT=[e.ROOT_OBJECT,"operation","for_sale_in"],e.FUND_MANAGER=[e.ROOT_OBJECT,"operation","fund_manager"],e.HOMEPAGE=[e.ROOT_OBJECT,"operation","homepage"],e.TRACKING_ERROR=[e.ROOT_OBJECT,"performance","tracking_error"],e.ACTIVE_SHARE=[e.ROOT_OBJECT,"portfolio","active_share"],e.RISK_LEVEL=[e.ROOT_OBJECT,"performance","risk_level"],e.STAR_RATING=[e.ROOT_OBJECT,"performance","star_rating"],e}();e.FundDetailsMap=r;var a=function(){function e(){}return e.TIME_DESC="TIME_DESC",e.TIME_ASC="TIME_ASC",e.VOLUME_DESC="VOLUME_DESC",e.VOLUME_ASC="VOLUME_ASC",e.PRICE_DESC="PRICE_DESC",e.PRICE_ASC="PRICE_ASC",e}();e.IntradayTradesSortValues=a;var s=function(){function e(){}return e.PCT_CHANGE_DESC="PCT_CHANGE_DESC",e.PCT_CHANGE_ASC="PCT_CHANGE_ASC",e.LV_PCT_CHANGE_DESC="LV_PCT_CHANGE_DESC",e.LV_PCT_CHANGE_ASC="LV_PCT_CHANGE_ASC",e.TURNOVER_DESC="TURNOVER_DESC",e.TURNOVER_ASC="TURNOVER_ASC",e.TICKER_DESC="TICKER_DESC",e.TICKER_ASC="TICKER_ASC",e.VOLUME_DESC="VOLUME_DESC",e.VOLUME_ASC="VOLUME_ASC",e.ONE_W_PCT_CHANGE_DESC="ONE_W_PCT_CHANGE_DESC",e.ONE_W_PCT_CHANGE_ASC="ONE_W_PCT_CHANGE_ASC",e.ONE_M_PCT_CHANGE_DESC="ONE_M_PCT_CHANGE_DESC",e.ONE_M_PCT_CHANGE_ASC="ONE_M_PCT_CHANGE_ASC",e.THREE_M_PCT_CHANGE_DESC="THREE_M_PCT_CHANGE_DESC",e.THREE_M_PCT_CHANGE_ASC="THREE_M_PCT_CHANGE_ASC",e.SIX_M_PCT_CHANGE_DESC="SIX_M_PCT_CHANGE_DESC",e.SIX_M_PCT_CHANGE_ASC="SIX_M_PCT_CHANGE_ASC",e.ONE_Y_PCT_CHANGE_DESC="ONE_Y_PCT_CHANGE_DESC",e.ONE_Y_PCT_CHANGE_ASC="ONE_Y_PCT_CHANGE_ASC",e.TWO_Y_PCT_CHANGE_DESC="TWO_Y_PCT_CHANGE_DESC",e.TWO_Y_PCT_CHANGE_ASC="TWO_Y_PCT_CHANGE_ASC",e.THREE_Y_PCT_CHANGE_DESC="THREE_Y_PCT_CHANGE_DESC",e.THREE_Y_PCT_CHANGE_ASC="THREE_Y_PCT_CHANGE_ASC",e.FIVE_Y_PCT_CHANGE_DESC="FIVE_Y_PCT_CHANGE_DESC",e.FIVE_Y_PCT_CHANGE_ASC="FIVE_Y_PCT_CHANGE_ASC",e.YTD_PCT_CHANGE_DESC="YTD_PCT_CHANGE_DESC",e.YTD_PCT_CHANGE_ASC="YTD_PCT_CHANGE_ASC",e.CUST_1_ASC="CUST_1_ASC",e.CUST_1_DESC="CUST_1_DESC",e.CUST_2_ASC="CUST_2_ASC",e.CUST_2_DESC="CUST_2_DESC",e.CUST_3_ASC="CUST_3_ASC",e.CUST_3_DESC="CUST_3_DESC",e.CUST_4_ASC="CUST_4_ASC",e.CUST_4_DESC="CUST_4_DESC",e.CUST_5_ASC="CUST_5_ASC",e.CUST_5_DESC="CUST_5_DESC",e}();e.SortOrder=s;var o=function(){function e(){}return e.NONE="NONE",e.STOCK="STOCK",e.NEWS="NEWS",e.BOND="BOND",e.EURO_OPTION="EURO_OPTION",e.FUTURES="FUTURES",e.COMMODITY="COMMODITY",e.INDEX="INDEX",e.FOREX="FOREX",e.US_OPTION="US_OPTION",e.FUND="FUND",e.OPTION="OPTION",e.COMBO="COMBO",e.CFD="CFD",e.CERTIFICATE="CERTIFICATE",e.UNKNOWN="UNKNOWN",e}();e.InstrumentType=o;var l=function(){function e(){}return e.INSTRUMENT="INSTRUMENT",e.CHAIN="CHAIN",e.FEED="FEED",e}();e.SearchItemType=l;var c=function(){function e(){}return e.kLoginFailed="onLoginFailed",e.kOnReady="onReady",e.kOnDisconnect="onDisconnect",e}();e.EventNames=c;var d=function(){function e(){}return e.INTRADAY="INTRADAY",e.TWO_DAYS="TWO_DAYS",e.ONE_WEEK="ONE_WEEK",e.ONE_MONTH="ONE_MONTH",e.THREE_MONTHS="THREE_MONTHS",e.SIX_MONTHS="SIX_MONTHS",e.ONE_YEAR="ONE_YEAR",e.YTD="YTD",e}();e.BrokerStatsPeriodes=d,function(e){e.ONE_WEEK="1W",e.ONE_MONTH="1M",e.THREE_MONTH="3M",e.SIX_MONTH="6M",e.ONE_YEAR="1Y",e.TWO_YEAR="2Y",e.THREE_YEAR="3Y",e.FIVE_YEAR="5Y",e.YTD="YTD"}(e.HistoricalPeriodes||(e.HistoricalPeriodes={}));var u=function(){function e(){}return e.COUNTRY="Country",e.ASSET="Asset",e.SECTOR="Sector",e}();e.FundAllocationType=u}(InfrontConstants||(InfrontConstants={})),function(e){var t=function(){function e(){}return e.feed="feed",e.ticker="ticker",e.type="type",e.date="date",e.description="description",e.orders="orders",e.trades="trades",e.price="price",e.country="country",e.iso_country="iso_country",e.iso_8601_format=!0,e.error_code="error_code",e.error_message="error_message",e.instrument="instrument",e.volume="volume",e.amount="amount",e.id="id",e.label="label",e.currency="currency",e.instrument_type="instrument_type",e.instrument_subtype="instrument_subtype",e.full_name="full_name",e.isin="isin",e.market="market",e.contract_size="contract_size",e.strike_price="strike_price",e.precision_code="precision_code",e.exchange_instrument_id="exchange_instrument_id",e.last="last",e.last_valid="last_valid",e.bid="bid",e.ask="ask",e.asks="asks",e.bids="bids",e.hist_performance="hist_performance",e.pct_change="pct_change",e.change="change",e.previous_close="previous_close",e.tick_size_id="tick_size_id",e.lv_prev_close="lv_prev_close",e.level="level",e.news_sources="sources",e.source_name="name",e.source_short="short_name",e.news_source_region="region",e.news_regions="regions",e.news_region_code="code",e.news_id="news_id",e.news_feed="news_feed",e.headline="headline",e.category="category",e.time="time",e.language="language",e.url="url",e.symbols="symbols",e.mime_type="mime_type",e.body="body",e.up="up",e.down="down",e.unchanged="unchanged",e.up_pct="up_pct",e.down_pct="down_pct",e.unchanged_pct="unchanged_pct",e.turnover="turnover",e.type_instrument="INSTRUMENT",e.chain="chain",e.urls="urls",e.splits="splits",e.dividends="dividends",e.factor="factor",e.error_displayable="error_displayable",e.request_data="request_data",e.update_data="update_data",e.session_token="session_token",e.session_timeout="session_timeout",e.features="features",e.decimals="decimals",e.tr_routings="tr_routings",e.provider="provider",e.service="service",e.tradable_feeds="tradable_feeds",e.input_fields="input_fields",e.nodes="nodes",e.key="key",e.may_persist="may_persist",e.mask="mask",e.keyboard="keyboard",e.connections="connections",e.HF_OPEN="OPEN",e.HF_HIGH="HIGH",e.HF_LOW="LOW",e.HF_LAST="LAST",e.HF_VOLUME="VOLUME",e.buyer="buyer",e.seller="seller",e.buyer_full="buyer_full",e.seller_full="seller_full",e.seq_id="seq_id",e.value="value",e.base_currency="base_currency",e.order_id="order_id",e.avg_price="avg_price",e.trading_power="trading_power",e.base_trading_power="base_trading_power",e.is_shortable="is_shortable",e.margin_rate="margin_rate",e.pid="pid",e.sid="sid",e.portfolios="portfolios",e.positions="positions",e.total_invested="total_invested",e.values="values",e.alerts="alerts",e.position="position",e.alert="alert",e.portfolio="portfolio",e.cash="cash",e.invested="invested",e.multiplier="multiplier",e.collateral="collateral",e.profit="profit",e.base_invested="base_invested",e.ytd_base_invested="ytd_base_invested",e.base_value="base_value",e.base_result="base_result",e.market_price="market_price",e.base_collateral="base_collateral",e.order="order",e.customer_id="customer_id",e.buy_or_sell="buy_or_sell",e.open_volume="open_volume",e.order_type="order_type",e.changed="changed",e.valid_until="valid_until",e.order_status="order_status",e.volume_filled="volume_filled",e.accumulated_traded="accumulated_traded",e.transaction_id="transaction_id",e.exchange_order_id="exchange_order_id",e.read_only="read_only",e.custom_tags="custom_tags",e.algo_id="algo_id",e.algo_params="algo_params",e.created="created",e.comment="comment",e.fail_code="fail_code",e.parent_order="parent_order",e.params="params",e.default="default",e.mandatory="mandatory",e.min="min",e.max="max",e.dropdown_items="dropdown_items",e.modify="modify",e.trade_id="trade_id",e.trade_time="trade_time",e.trade="trade",e.net_trade="net_trade",e.net_trades="net_trades",e.buy_vwap="buy_vwap",e.sell_vwap="sell_vwap",e.buy_volume="buy_volume",e.sell_volume="sell_volume",e.net_volume="net_volume",e.buy_value="buy_value",e.sell_value="sell_value",e.net_value="net_value",e.net_price="net_price",e.algos="algos",e.custom_fields="custom_fields",e.string_value="string_value",e.upper_bound="upper_bound",e.lower_bound="lower_bound",e.size="size",e.state="state",e.data="data",e.message="message",e.payload="payload",e.instruments="instruments",e.underlying="underlying",e.under_feed="under_feed",e.under_ticker="under_ticker",e.expiry_date="expiry_date",e.issuer="issuer",e.issuer_full_name="issuer_full_name",e.md_instrument_update="md_instrument_update",e.termination_code="termination_code",e.termination_reason="termination_reason",e.api_version="1.5.1",e}();e.MWSConstants=t;var n=function(){function e(){}return e.SUPERUSER_FORBIDDEN=1,e.EXTERNAL=2,e.TOKEN_VALIDATION_ERROR=15,e.RETRY=42,e.SESSION_TOKEN_REUSED=77,e.TOKEN_ERROR=79,e.BAD_REQUEST=400,e.FORBIDDEN=403,e.NOT_FOUND=404,e.METHOD_NOT_ALLOWED=405,e.NOT_IMPLEMENTED=501,e.SERVICE_TIMEOUT=504,e}();e.MWSErrorCodes=n;var i=function(){function e(){}return e.isBuy=function(t){return t&&t.toUpperCase()==e.BUY},e.isSell=function(t){return t&&t.toUpperCase()==e.SELL},e.BUY="BUY",e.SELL="SELL",e}();e.MWSBuyOrSell=i;var r=function(){function e(){}return e.NORMAL="NORMAL",e.FILL_OR_KILL="FILL_OR_KILL",e.FILL_AND_KILL="FILL_AND_KILL",e.FILL_OR_NOTHING="FILL_OR_NOTHING",e.CROSS="CROSS",e.BEST_POSSIBLE="BEST_POSSIBLE",e.AT_MARKET="AT_MARKET",e.MARKET="MARKET",e.MARKET_TO_LIMIT="MARKET_TO_LIMIT",e.AT_MARKET_AND_KILL="AT_MARKET_AND_KILL",e.QUOTE_ORDER="QUOTE_ORDER",e.LIMIT_OR_MARKET_ON_CLOSE="LIMIT_OR_MARKET_ON_CLOSE",e.STOP_LIMIT="STOP_LIMIT",e.STOP_LOSS="STOP_LOSS",e.CONTINGENT="CONTINGENT",e.FLEX="FLEX",e.INTEREST="INTEREST",e.ACCEPT="ACCEPT",e.PARENT="PARENT",e.STRATEGY="STRATEGY",e.FIX="FIX",e.LIMIT_TO_MARKET="LIMIT_TO_MARKET",e.BEST_TO_LIMIT="BEST_TO_LIMIT",e.MULTI_LEG="MULTI_LEG",e.MARKET_FOK="MARKET_FOK",e.MARKET_FAK="MARKET_FAK",e.PEGGED="PEGGED",e.AT_OPEN="AT_OPEN",e.AT_CLOSE="AT_CLOSE",e.OCO="OCO",e.ICEBERG="ICEBERG",e}();e.OrderType=r;var a=function(){function t(){}return t.FLASH_LEVEL_1="FLASH_LEVEL_1",t.FLASH_LEVEL_2="FLASH_LEVEL_2",t.FLASH_LEVEL_3="FLASH_LEVEL_3",t.URL="URL",t.REGULAR="REGULAR",t.typeMap=function(){var n={};return n[t.FLASH_LEVEL_1]=e.NewsType.FlashLevel1,n[t.FLASH_LEVEL_2]=e.NewsType.FlashLevel2,n[t.FLASH_LEVEL_3]=e.NewsType.FlashLevel3,n[t.URL]=e.NewsType.Url,n[t.REGULAR]=e.NewsType.Regular,n}(),t}();e.MWSNewsType=a;var s=function(){function e(){}return e.TICKS="TICKS",e.MINUTES="MINUTES",e.HOURS="HOURS",e.SECONDS="SECONDS",e}();e.Resolution=s;var o=function(){function e(){}return e.ACC_VOLUME="ACC_VOLUME",e.TURNOVER="TURNOVER",e.ONEXCH_VOLUME="ONEXCH_VOLUME",e.ONEXCH_TURNOVER="ONEXCH_TURNOVER",e.BID="BID",e.ASK="ASK",e.BID_SIZE="BID_SIZE",e.ASK_SIZE="ASK_SIZE",e.NUM_BIDS="NUM_BIDS",e.NUM_ASKS="NUM_ASKS",e.ORDERBOOK="ORDERBOOK",e.VWAP="VWAP",e.AVG_VOLUME="AVG_VOLUME",e.AVG_VALUE="AVG_VALUE",e.OPEN="OPEN",e.HIGH="HIGH",e.LOW="LOW",e.LAST="LAST",e.PREVIOUS_CLOSE="PREVIOUS_CLOSE",e.TIME="TIME",e.CHANGE="CHANGE",e.PCT_CHANGE="PCT_CHANGE",e.NUM_TRADES="NUM_TRADES",e.GICS="GICS",e.NUM_SHARES="NUM_SHARES",e.RSI14="RSI14",e.MACD="MACD",e.MA50="MA50",e.MA100="MA100",e.MA200="MA200",e.CONTRACT_SIZE="CONTRACT_SIZE",e.TRADING_STATUS="TRADING_STATUS",e.TICK_SIZE_ID="TICK_SIZE_ID",e.SEGMENT="SEGMENT",e.SEGMENT_DESCRIPTION="SEGMENT_DESCRIPTION",e.SECTOR="SECTOR",e.INDIC_PRICE="INDIC_PRICE",e.INDIC_VOLUME="INDIC_VOLUME",e.TRADES="TRADES",e.FUND_DETAILS="FUND_DETAILS",e.PHYSICAL_UNIT="PHYSICAL_UNIT",e.SECONDARY_SEGMENT="SECONDARY_SEGMENT",e}();e.QuoteFields=o;var l=function(){function e(){}return e.BID="BID",e.ASK="ASK",e.OPEN="OPEN",e.HIGH="HIGH",e.LOW="LOW",e.LAST="LAST",e.VOLUME="VOLUME",e.TURNOVER="TURNOVER",e}();e.IntradayFields=l;var c=function(){function e(){}return e.NUMERIC="NUMERIC",e.ALPHANUMERIC="ALPHANUMERIC",e}();e.KeyboardType=c;var d=function(){function e(){}return e.FEED="FEED",e.INDEX="INDEX",e.GLOBAL="GLOBAL",e}();e.ChainTypes=d;var u=function(){function e(){}return e.TIME_DESC="TIME_DESC",e.TIME_ASC="TIME_ASC",e.VOLUME_DESC="VOLUME_DESC",e.VOLUME_ASC="VOLUME_ASC",e.PRICE_DESC="PRICE_DESC",e.PRICE_ASC="PRICE_ASC",e}();e.IntradaySorting=u;var h=function(){function e(){}return e.instrument="instrument",e.read_only="read_only",e.custom_tags="custom_tags",e.algo_id="algo_id",e.algo_params="algo_params",e.eta="eta",e.field="field",e.company="company",e.efcode="efcode",e.isin="isin",e.ticker="ticker",e.market_cap="market_cap",e.companyInfos="companyInfos",e}();e.VisualConstants=h;var p=function(){function e(){}return e.kickout=2,e.INVALID_SESSION_TOKEN=99998,e.unknown=99999,e}();e.TerminationCodes=p;var m=function(){function e(){}return e.GT="GT",e.LT="LT",e}();e.InfrontAlertOperators=m;var g=function(){function e(){}return e.INSTRUMENT_ALERT="INSTRUMENT_ALERT",e.NEWS_ALERT="NEWS_ALERT",e}();e.InfrontAlertTypes=g;var f=function(){function t(){this.md_field=""}return t.prototype.ToIds=function(t){var n=new IDS.API.AlertValue;switch(t){case IDS.AlertType.Instrument:n.mdField=IDS.FromMws.StrToAlertMdField(this.md_field);break;case IDS.AlertType.Chain:case IDS.AlertType.List:case IDS.AlertType.News:case IDS.AlertType.Portfolio:n.mdField=null}return e.Instrument.isInstrument(this.instrument)&&(n.feed=this.instrument.feed,n.ticker=this.instrument.ticker),n},t.toServerAlertValue=function(t,n){var i=new IDS.API.AlertValue;switch(n){case IDS.AlertType.Instrument:i.mdField=IDS.FromMws.StrToAlertMdField(t.md_field);break;case IDS.AlertType.Chain:case IDS.AlertType.List:case IDS.AlertType.News:case IDS.AlertType.Portfolio:i.mdField=null}return e.Instrument.isInstrument(t.instrument)&&(i.feed=t.instrument.feed,i.ticker=t.instrument.ticker),i},t}();e.InfrontAlertValue=f;var v=function(e){function t(){var t=e.call(this)||this;return t.md_value=new f,t}return __extends(t,e),t.prototype.ToIds=function(e){var t=new IDS.API.AlertNode(IDS.FromMws.StrToOperator(this.operator),!0,e);return t.double=this.double,this.md_value.md_field&&(t.mdValue=this.md_value.ToIds(e)),this.left&&(t.left=this.left.ToIds(e)),this.right&&(t.right=this.right.ToIds(e)),t},t.toServerAlertNode=function(e,n){var i=new IDS.API.AlertNode(IDS.FromMws.StrToOperator(e.operator),!0,n);return i.double=e.double,e.md_value&&e.md_value.md_field&&(i.mdValue=f.toServerAlertValue(e.md_value,n)),e.left&&(i.left=t.toServerAlertNode(e.left,n)),e.right&&(i.right=t.toServerAlertNode(e.right,n)),i},t}(e.InfrontObject);e.InfrontAlertNode=v;var y=function(e){function t(){var t=e.call(this)||this;return t.comment="",t.enabled=!0,t.trigger_type="",t.type="",t.rule=new v,t.rule.left=new v,t.rule.right=new v,t}return __extends(t,e),t.prototype.hasInstrument=function(){return null!=this.rule.left.md_value&&null!=this.rule.left.md_value.instrument},t.prototype.getInstrument=function(){return this.rule.left.md_value.instrument},t.prototype.ToIds=function(){var e=new IDS.API.ServerAlert(this.id);return e.type=IDS.FromMws.StrToAlertType(this.type),e.enabled=this.enabled,e.revisionIndex=this.index,e.comment=this.comment,e.triggerType=IDS.FromMws.StrToAlertTriggerType(this.trigger_type),e.rule=this.rule.ToIds(IDS.FromMws.StrToAlertType(this.type)),e},t.toServerAlert=function(e){var t=new IDS.API.ServerAlert(e.id);return t.type=IDS.FromMws.StrToAlertType(e.type),t.enabled=e.enabled,t.revisionIndex=e.index,t.comment=e.comment,t.triggerType=IDS.FromMws.StrToAlertTriggerType(e.trigger_type),t.rule=v.toServerAlertNode(e.rule,IDS.FromMws.StrToAlertType(e.type)),t},t}(e.InfrontObject);e.InfrontAlert=y;var b=function(){function e(){}return e.STOCKS="STOCKS",e.NEWS="NEWS",e.BONDS="BONDS",e.EUROOPTIONS="EUROOPTIONS",e.FUTURES="FUTURES",e.COMMODITIES="COMMODITIES",e.INDICES="INDICES",e.FOREX="FOREX",e.USOPTIONS="USOPTIONS",e.FUNDS="FUNDS",e.CHAT="CHAT",e.URLNEWS="URLNEWS",e.ORDERS="ORDERS",e.WARRANTS="WARRANTS",e.FEATURES="FEATURES",e.SYMBOL_EXT="SYMBOL_EXT",e.CALENDAR_UPDATES="CALENDAR_UPDATES",e.FX_DEPOSIT_RATES="FX_DEPOSIT_RATES",e.MTF="MTF",e.WEB_FEATURE="WEB_FEATURE",e}();e.FeedDataTypes=b}(Infront||(Infront={})),function(e){var t=function(){function e(){this.ie=/MSIE /.test(navigator.userAgent),this.ieo=/MSIE [67]/.test(navigator.userAgent),this.lookup=null}return e.prototype.decode=function(e){if(e.length%4)throw new Error("InvalidCharacterError: 'B64.decode' failed: The string to be decoded is not correctly encoded.");var t=this.fromUtf8(e),n=0,i=t.length,r=null;if(this.ieo){for(var a=[];n<i;)t[n]<128?a.push(String.fromCharCode(t[n++])):t[n]>191&&t[n]<224?a.push(String.fromCharCode((31&t[n++])<<6|63&t[n++])):a.push(String.fromCharCode((15&t[n++])<<12|(63&t[n++])<<6|63&t[n++]));r=a.join("")}else{for(var s="";n<i;)t[n]<128?s+=String.fromCharCode(t[n++]):t[n]>191&&t[n]<224?s+=String.fromCharCode((31&t[n++])<<6|63&t[n++]):s+=String.fromCharCode((15&t[n++])<<12|(63&t[n++])<<6|63&t[n++]);r=s}return r},e.prototype.encode=function(t){var n,i,r,a=this.toUtf8(t),s=-1,o=a.length,l=[void 0,void 0,void 0,void 0],c=null;if(this.ie){for(var d=[];++s<o;)n=a[s],i=a[++s],l[0]=n>>2,l[1]=(3&n)<<4|i>>4,isNaN(i)?l[2]=l[3]=64:(r=a[++s],l[2]=(15&i)<<2|r>>6,l[3]=isNaN(r)?64:63&r),d.push(e.alphabet.charAt(l[0]),e.alphabet.charAt(l[1]),e.alphabet.charAt(l[2]),e.alphabet.charAt(l[3]));c=d.join("")}else{for(var u="";++s<o;)n=a[s],i=a[++s],l[0]=n>>2,l[1]=(3&n)<<4|i>>4,isNaN(i)?l[2]=l[3]=64:(r=a[++s],l[2]=(15&i)<<2|r>>6,l[3]=isNaN(r)?64:63&r),u+=e.alphabet[l[0]]+e.alphabet[l[1]]+e.alphabet[l[2]]+e.alphabet[l[3]];c=u}return c},e.prototype.fromUtf8=function(t){var n,i=-1,r=[],a=[void 0,void 0,void 0,void 0];if(!this.lookup){for(n=e.alphabet.length,this.lookup={};++i<n;)this.lookup[e.alphabet.charAt(i)]=i;i=-1}for(n=t.length;++i<n&&(a[0]=this.lookup[t.charAt(i)],a[1]=this.lookup[t.charAt(++i)],r.push(a[0]<<2|a[1]>>4),a[2]=this.lookup[t.charAt(++i)],64!=a[2])&&(r.push((15&a[1])<<4|a[2]>>2),a[3]=this.lookup[t.charAt(++i)],64!=a[3]);)r.push((3&a[2])<<6|a[3]);return r},e.prototype.toUtf8=function(e){var t,n=-1,i=e.length,r=[];if(/^[\x00-\x7f]*$/.test(e))for(;++n<i;)r.push(e.charCodeAt(n));else for(;++n<i;)(t=e.charCodeAt(n))<128?r.push(t):t<2048?r.push(t>>6|192,63&t|128):r.push(t>>12|224,t>>6&63|128,63&t|128);return r},e.alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();e.Base64=t}(Infront||(Infront={})),function(e){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(){for(var e=0;e<S.length;e++)S[e][0](S[e][1]);S=[],h=!1}function i(e,t){S.push([e,t]),h||(h=!0,T(n,0))}function r(e){var t=e.owner,n=t.state_,i=t.data_,r=e[n],o=e.then;if("function"==typeof r){n=v;try{i=r(i)}catch(e){l(o,e)}}a(o,i)||(n===v&&s(o,i),n===y&&l(o,i))}function a(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var i=t.then;if("function"==typeof i)return i.call(t,function(i){n||(n=!0,t!==i?s(e,i):o(e,i))},function(t){n||(n=!0,l(e,t))}),!0}}catch(t){return n||l(e,t),!0}return!1}function s(e,t){e!==t&&a(e,t)||o(e,t)}function o(e,t){e.state_===g&&(e.state_=f,e.data_=t,i(d,e))}function l(e,t){e.state_===g&&(e.state_=f,e.data_=t,i(u,e))}function c(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)r(t[n])}function d(e){e.state_=v,c(e)}function u(e){e.state_=y,c(e)}var h,p=e.Promise,m=p&&"resolve"in p&&"reject"in p&&"all"in p&&"race"in p&&function(){var e;return new p(function(t){e=t}),"function"==typeof e}(),g="pending",f="sealed",v="fulfilled",y="rejected",b=function(){},T="undefined"!=typeof setImmediate?setImmediate:setTimeout,S=[],C=function(){function e(t){if(this.state_=g,"function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof e==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function n(e){l(t,e)}try{e(function(e){s(t,e)},n)}catch(e){n(e)}}(t,this)}return e.prototype.then=function(t,n){var a={owner:this,then:new e(b),fulfilled:t,rejected:n};return this.state_===v||this.state_===y?i(r,a):this.then_.push(a),a.then},e.prototype.catch=function(e){return this.then(null,e)},e.all=function(n){if(!t(n))throw new TypeError("You must pass an array to Promise.all().");return new e(function(e,t){function i(t){return s++,function(n){a[t]=n,--s||e(a)}}for(var r,a=[],s=0,o=0;o<n.length;o++)(r=n[o])&&"function"==typeof r.then?r.then(i(o),t):a[o]=r;s||e(a)})},e.race=function(n){if(!t(n))throw new TypeError("You must pass an array to Promise.race().");return new e(function(e,t){for(var i,r=0;r<n.length;r++)(i=n[r])&&"function"==typeof i.then?i.then(e,t):e(i)})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e}();m||(e.Promise=C)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(e){var t=function(){function e(e,t){this.httpPoolSize=e,this.usingNodeJS=t}return e.prototype.transportForUrl=function(e,t){var i=e.toLowerCase(),r=null;return"https"===i.slice(0,5)||"http"===i.slice(0,4)?r=new n(e,t,this.httpPoolSize,this.usingNodeJS):("wss"===i.slice(0,3)||"ws"===i.slice(0,2))&&(r=new a(e,t,10,!1,this.usingNodeJS)),r},e}();e.TransportFactory=t;var n=function(){function e(e,t,n,r){void 0===r&&(r=!1);var a=this;this.observer=t,this.nextTransport=0,this.transports=[];for(var s=0;s<n;s++){var o=new i(e,this,r);this.transports.push(o)}setTimeout(function(){a.observer.transportConnected(a)},1)}return e.prototype.sendMessage=function(e){this.transports[this.nextTransport].sendMessage(e),this.nextTransport=this.nextTransport<this.transports.length-1?this.nextTransport+1:0},e.prototype.supportsStreaming=function(){return!1},e.prototype.close=function(e){var t=this;void 0===e&&(e=!1),this.transports=[],setTimeout(function(){t.observer.transportDisconnected(t,e)},1)},e.prototype.transportConnected=function(e){},e.prototype.transportDisconnected=function(e){},e.prototype.transportReconnected=function(e){},e.prototype.transportReconnecting=function(e){},e.prototype.transportError=function(e,t,n,i){this.observer.transportError(this,t,n,i)},e.prototype.messageReceived=function(e,t){this.observer.messageReceived(this,t)},e.prototype.reconnectToUrl=function(e){for(var t=0;t<this.transports.length;t++)this.transports[t].reconnectToUrl(e)},e.prototype.prepareLogout=function(){for(var e=0;e<this.transports.length;e++)this.transports[e].prepareLogout()},e}();e.HTTPTransportPool=n;var i=function(){function e(e,t,n){var i,r=this;this.pipeline=new Array,this.url=e,this.observer=t,i=n?require("xhr2"):XMLHttpRequest,this.xhr=new i,"withCredentials"in this.xhr?(this.corsSupported=!0,this.usingXDomainRequest=!1):"undefined"!=typeof XDomainRequest?(this.xhr=new XDomainRequest,this.corsSupported=!0,this.usingXDomainRequest=!0):(this.corsSupported=!1,this.usingXDomainRequest=!1),this.xhr.onload=function(e){return r.onLoad(e)},this.xhr.onerror=function(e){return r.onError(e)},this.transportAvailable=!0}return e.prototype.sendMessage=function(e){this.pipeline.push(e),this.transportAvailable&&this.processNext()},e.prototype.processNext=function(){var e=this;this.pipeline.length>0&&(this.transportAvailable=!1,setTimeout(function(){e.sendNextMessage()},1))},e.prototype.sendNextMessage=function(){this.xhr.open("POST",this.url),this.corsSupported&&(this.xhr.withCredentials=!0),this.xhr.send(this.pipeline[0])},e.prototype.onError=function(e){this.observer.transportError(this,this.pipeline[0],-1,"Error while processing HTTP POST"),this.currentMessageFinished()},e.prototype.onLoad=function(e){this.observer.messageReceived(this,this.xhr.responseText),this.currentMessageFinished()},e.prototype.currentMessageFinished=function(){this.pipeline.splice(0,1),this.transportAvailable=!0,this.processNext()},e.prototype.close=function(e){var t=this;void 0===e&&(e=!1),this.xhr.onload=null,this.xhr.onerror=null,this.xhr=null,setTimeout(function(){t.observer.transportDisconnected(t,e)},1)},e.prototype.supportsStreaming=function(){return!1},e.prototype.prepareLogout=function(){},e.prototype.reconnectToUrl=function(e){var t=this;this.url=e,null==this.xhr.onload&&(this.xhr.onload=function(e){return t.onLoad(e)}),null==this.xhr.onerror&&(this.xhr.onerror=function(e){return t.onError(e)})},e}();e.HTTPTransport=i;var r=function(){function t(t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var a=this;this.isUnloading=!1,this.observer=n,this.url=t,this.useMock="dev"==e.LibraryConstants.kBuildType&&i,this.usingNodeJS=r,this.messageQueue=[],this.createSocket(),this.beforeUnloadListener=function(e){return a.close(!0)},this.usingNodeJS||window.addEventListener("beforeunload",this.beforeUnloadListener,!1)}return t.prototype.createSocket=function(){var e=this;try{if(this.usingNodeJS){var t=require("ws");this.websocket=new t(this.url)}else this.useMock?this.websocket=new s(this.url):this.websocket=new WebSocket(this.url);this.websocket.onopen=function(){return e.onWebsocketOpen()},this.websocket.onerror=function(t){return e.onWebsocketError(t)},this.websocket.onmessage=function(t){return e.onWebsocketMessage(t)},this.websocket.onclose=function(){return e.onWebsocketClose()}}catch(e){IDS.DEBUG_VERBOSE&&IDS.log(e.toString()),this.observer&&this.observer.transportError(this,null,-1,e.toString())}},t.prototype.onWebsocketOpen=function(){this.observer.transportConnected(this);for(var e=0;e<this.messageQueue.length;e++)this.sendMessage(this.messageQueue[e]);this.messageQueue=[]},t.prototype.onWebsocketError=function(e){this.observer.transportError(this,null,-1,e.toString())},t.prototype.onWebsocketMessage=function(e){this.observer.messageReceived(this,e.data)},t.prototype.onWebsocketClose=function(){this.observer.transportDisconnected(this,this.isUnloading)},t.prototype.sendMessage=function(e){this.websocket.readyState==t.CONNECTING?this.messageQueue.push(e):this.websocket.readyState==t.OPEN?this.websocket.send(e):this.observer.transportError(this,null,-1,"Connection closed")},t.prototype.supportsStreaming=function(){return!0},t.prototype.close=function(e){void 0===e&&(e=!1),this.isUnloading=e,this.usingNodeJS||window.removeEventListener("beforeunload",this.beforeUnloadListener,!1),this.websocket.close()},t.isWebsocketsSupported=function(e){void 0===e&&(e=!1);try{return e&&require("ws"),!0}catch(e){IDS.DEBUG_VERBOSE&&IDS.log(e)}return!(InfrontUtil.browserInfo.safari&&InfrontUtil.browserInfo.versionMajor<7)&&void 0!==window.WebSocket},t.prototype.prepareLogout=function(){},t.prototype.reconnectToUrl=function(e){this.websocket&&this.websocket.readyState!=t.CLOSED||(this.url=e,this.createSocket())},t.CONNECTING=0,t.OPEN=1,t.CLOSING=2,t.CLOSED=3,t}();e.WebsocketTransport=r;var a=function(e){function t(t,n,i,r,a){void 0===r&&(r=!1),void 0===a&&(a=!1);var s=e.call(this,t,n,r,a)||this;return s.directlyClosed=!1,s.reconnecting=!1,s.maxRetryCount=i>=0?i:0,s.retryCount=s.maxRetryCount,s.reconnectTime=(new Date).getTime(),s.successfullyConnected=!1,s}return __extends(t,e),t.prototype.sendMessage=function(t){this.websocket.readyState!=r.OPEN?this.messageQueue.push(t):e.prototype.sendMessage.call(this,t)},t.prototype.onWebsocketOpen=function(){this.directlyClosed=!1,this.successfullyConnected=!0,this.reconnecting?this.observer.transportReconnected(this):this.observer.transportConnected(this),this.reconnecting=!1;for(var e=0;e<this.messageQueue.length;e++)this.sendMessage(this.messageQueue[e]);this.messageQueue=[]},t.prototype.onWebsocketError=function(e){IDS.DEBUG_VERBOSE&&IDS.log(e)},t.prototype.onWebsocketClose=function(){var e=this,n=(new Date).getTime();n-this.reconnectTime>t.kRetryResetThreshold&&(this.retryCount=this.maxRetryCount),0==this.retryCount||this.directlyClosed?(this.reconnecting=!1,this.observer.transportDisconnected(this,this.isUnloading)):(this.observer.transportReconnecting(this),this.reconnectTime=n,this.reconnecting=this.successfullyConnected,this.retryCount--,setTimeout(function(){e.createSocket()},Math.pow(2,this.maxRetryCount-this.retryCount)))},t.prototype.close=function(t){void 0===t&&(t=!1),this.directlyClosed=!0,e.prototype.close.call(this,t)},t.prototype.prepareLogout=function(){this.directlyClosed=!0},t.prototype.reconnectToUrl=function(t){this.reconnecting=!0,e.prototype.reconnectToUrl.call(this,t)},t.kRetryResetThreshold=6e4,t}(r);e.ReconnectWebsocketTransport=a;var s=function(){function e(e){var t=this;this.websocket=new WebSocket(e),this.websocket.onclose=function(e){return t.pOnclose(e)},this.websocket.onerror=function(e){return t.pOnerror(e)},this.websocket.onmessage=function(e){return t.pOnmessage(e)},this.websocket.onopen=function(){return t.pOnopen()},this.readyState=0,window.infrontMockWebsocket=this}return e.prototype.send=function(e){this.websocket.send(e)},e.prototype.pOnclose=function(e){this.readyState=this.websocket.readyState,this.onclose(e)},e.prototype.pOnerror=function(e){this.readyState=this.websocket.readyState,this.onerror(e)},e.prototype.pOnmessage=function(e){this.onmessage(e)},e.prototype.pOnopen=function(){this.readyState=this.websocket.readyState,this.onopen()},e.prototype.close=function(){this.websocket.close()},e.prototype.forceError=function(){var e={};e.initErrorEvent("error",!0,!0,"Simulated websocket-error","",0),this.pOnerror(e),this.close()},e}()}(Infront||(Infront={})),function(e){var t=function(){};e.RequestOptions=t;var n,i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.SubscriptionOptions=i,function(e){e[e.InfinData=0]="InfinData",e[e.Connect=1]="Connect",e[e.MarketData=2]="MarketData",e[e.Trading=3]="Trading"}(n=e.MessageType||(e.MessageType={}));var r=function(e,t){this.message=e,this.messageType=t};e.MessageContainer=r;var a=function(){},s=function(){function e(){this.map={}}return e.prototype.add=function(e,t){this.map[e]=t},e.prototype.get=function(e){var t=null;return this.map.hasOwnProperty(e)&&(t=this.map[e]),t},e.prototype.remove=function(e){var t=this.get(e);return null!=t&&delete this.map[e],t},e.prototype.getAll=function(){var e=[];for(var t in this.map)this.map.hasOwnProperty(t)&&e.push(this.map[t]);return e},e}(),o=function(){function t(t,n,i){this.observer=t,this.responseObservers=new s,this.subscriptionObservers={},this.specialEventObservers={},this.transportFactory=new e.TransportFactory(n,i),this.marketDataTransport=null,this.tradingTransport=null,this.visualTransport=null,this.routingTransport=null,this.visualConnectTransport=null,this.visualConnectUrl=null,this.marketDataUrl=null,this.visualUrl=null,this.tradingUrl=null,this.serverPool=new IDS.ServerPool,this.serverPool.RegisterEndLogin(this),this.streamingManager=this.serverPool.streamingManager}return t.prototype.StartIDS=function(e,t,n,i,r){return!!this.serverPool&&(this.serverPool.Start(e,t,n,i,r),!0)},t.prototype.EndLogin=function(e,t,n){void 0===n&&(n=""),e&&(IDS.DEBUG_LOGIN?IDS.log("%cIAS login done","color: #3f7;"):IDS.DEBUG_LOGIN&&IDS.log("%cIAS login failed: "+n,"color: #f60; font-size: 24px;"))},t.prototype.registerSpecialEventObserver=function(e,t){this.specialEventObservers.hasOwnProperty(e)||(this.specialEventObservers[e]=[]),this.specialEventObservers[e].push(t)},t.prototype.reconnectMarketData=function(e){this.marketDataUrl=e,this.getMarketDataTransport().reconnectToUrl(e)},t.prototype.prepareTradingLogout=function(){this.tradingTransport&&this.tradingTransport.prepareLogout()},t.prototype.prepareMDLogout=function(){this.marketDataTransport&&this.marketDataTransport.prepareLogout()},t.prototype.supportsStreaming=function(e){switch(e){case n.MarketData:return this.marketDataTransport.supportsStreaming();case n.Trading:return this.tradingTransport.supportsStreaming();case n.Connect:return this.visualConnectTransport.supportsStreaming();case n.InfinData:return this.visualTransport.supportsStreaming()}return!1},t.prototype.disconnectMarketData=function(){this.marketDataTransport.close()},t.prototype.disconnectTrading=function(){this.tradingTransport.close()},t.prototype.disconnectVisual=function(){this.visualTransport.close()},t.prototype.setMarketDataSessionToken=function(e){this.marketDataSessionToken=e},t.prototype.setTradingSessionToken=function(e){this.tradingSessionToken=e},t.prototype.setVisualSessionToken=function(e){this.visualSessionToken=e},t.prototype.setVisualConnectUrl=function(e){this.visualConnectTransport=null,this.visualConnectUrl=e},t.prototype.getVisualConnectUrl=function(){return this.visualConnectUrl},t.prototype.setVisualUrl=function(e){this.visualTransport=null,this.visualUrl=e},t.prototype.getVisualUrl=function(){return this.visualUrl},t.prototype.sendSubscriptionRequest=function(t,n){var i=this,r=t.getUpdateData();t[e.MWSConstants.update_data]=r;var a=null;this.subscriptionObservers.hasOwnProperty(r)?a=this.subscriptionObservers[r]:(a=new c,this.subscriptionObservers[r]=a);var s=new l;s.updateCallback=function(e){e.hasOwnProperty(t.getEventKey())&&n.onData(e[t.getEventKey()])},s.sourceRequest=t,a.add(s),this.sendMessage(t,!1,function(r){i.validateResult(r,t)?0===r[e.MWSConstants.error_code]&&n.onSuccess(r[t.getResponseKey()]):n.onError(-1,"Malformed response from server")});var o=t.createUnsubscribeRequest();return function(e){i.sendRequest(o,e),a.remove(s)}},t.prototype.instrumentSubscribe=function(e,t){this.sendRequest(e,t,!1)},t.prototype.sendRequest=function(t,n,i){var r=this;void 0===i&&(i=!0),this.sendMessage(t,i,function(i){if(r.validateResult(i,t))if(0===i[e.MWSConstants.error_code]){var a=i[t.getResponseKey()];n.onSuccess(a)}else"error_displayable"in i?n.onError(i[e.MWSConstants.error_code],i.error_displayable):n.onError(i[e.MWSConstants.error_code],i.error_message);else n.onError(-1,"Malformed response from server")})},t.prototype.sendMessage=function(i,s,o){var l=t.getUniqueRequestData(),c={};if(c[i.getMessageKey()]=i,c[e.MWSConstants.request_data]=l,i.getMessageType()!=n.Connect&&i.getMessageType()!=n.InfinData){var d=this.getSessionToken(i.getMessageType());"md_login_request"==i.getMessageKey()||null!=d&&"string"==typeof d||InfrontUtil.errorLog("Trying to send a normal message without session-key: "+i.getMessageKey()),null!=d&&(c[e.MWSConstants.session_token]=this.getSessionToken(i.getMessageType()))}var u=JSON.stringify(c),h=new a;h.messageRoot=c,h.callback=o,h.encodedMessage=u,h.sourceMessage=i,h.resendOnReconnect=s,h.sentTimestamp=Date.now(),this.responseObservers.add(l,h);var p=new r(u,i.getMessageType());this.routeMessage(p)},t.prototype.setSessionTerminatedObserver=function(e){this.sessionTerminatedObserver=e},t.prototype.transportConnected=function(e){},t.prototype.transportDisconnected=function(e,t){t||(e===this.marketDataTransport?(this.observer.marketDataDisconnected(),this.marketDataSessionToken=null):e===this.tradingTransport&&(this.observer.tradingDisconnected(),this.tradingTransport=null,this.tradingSessionToken=null))},t.prototype.transportReconnecting=function(e){e===this.tradingTransport&&this.observer.tradingReconnecting()},t.prototype.transportReconnected=function(t){if(t.supportsStreaming()){var i=null;if(t==this.marketDataTransport?(i=n.MarketData,this.onMarketdataReconnect&&this.onMarketdataReconnect()):t==this.tradingTransport&&(i=n.Trading,this.observer.tradingReconnected()),null!=i){for(var a=this.responseObservers.getAll(),s=Date.now(),o=0,l=a;o<l.length;o++){var c=l[o];if(c.resendOnReconnect&&c.sourceMessage.getMessageType()==i){c.sentTimestamp=s;var d=c.messageRoot,u=c.sourceMessage.getMessageType();d[e.MWSConstants.session_token]&&(d[e.MWSConstants.session_token]=this.getSessionToken(u));var h=new r(JSON.stringify(d),u);this.routeMessage(h)}}for(var p in this.subscriptionObservers)if(this.subscriptionObservers.hasOwnProperty(p))for(var m=this.subscriptionObservers[p].getAll(),g=0;g<m.length;g++)this.sendMessage(m[g].sourceRequest,!1,function(e){})}}},t.prototype.transportError=function(e,t,n,i){},t.prototype.messageReceived=function(n,i){var r=InfrontUtil.parseJson(i);if(null!=r){if(r.hasOwnProperty(e.MWSConstants.error_code)&&r[e.MWSConstants.error_code]==e.MWSErrorCodes.TOKEN_ERROR&&n.close(),n==this.marketDataTransport&&r.hasOwnProperty(t.kSessionTerminatedKey))return this.marketDataTransport.close(),void(this.sessionTerminatedObserver&&this.sessionTerminatedObserver(r[t.kSessionTerminatedKey]));for(var a in n==this.tradingTransport&&r.hasOwnProperty(t.kTrSessionTerminatedKey)&&(r[t.kTrSessionTerminatedKey][e.MWSConstants.termination_code]==e.MWSErrorCodes.TOKEN_VALIDATION_ERROR?e.EventCallbackMap.eventMap.publish(new e.TradingTokenInvalidEvent):e.EventCallbackMap.eventMap.publish(new e.TradingTerminatedEvent(this.tradingUrl,r[t.kTrSessionTerminatedKey][e.MWSConstants.termination_code],r[t.kTrSessionTerminatedKey][e.MWSConstants.termination_reason]))),r)if(this.specialEventObservers.hasOwnProperty(a))for(var s=this.specialEventObservers[a],o=0;o<s.length;o++)s[o](r);if(r.hasOwnProperty(e.MWSConstants.request_data)){if(n==this.tradingTransport&&r.hasOwnProperty(e.MWSConstants.error_code)&&r[e.MWSConstants.error_code]==e.MWSErrorCodes.TOKEN_VALIDATION_ERROR){var l=new e.TradingTokenInvalidEvent;e.EventCallbackMap.eventMap.publish(l)}var c=this.responseObservers.remove(r[e.MWSConstants.request_data]);null!=c&&(n!=this.tradingTransport&&this.checkSlowResponse(c,r,n),c.callback(r))}else if(r.hasOwnProperty(e.MWSConstants.update_data)){var d=r[e.MWSConstants.update_data];this.subscriptionObservers.hasOwnProperty(d)&&this.subscriptionObservers[d].call(r)}}},t.prototype.checkSlowResponse=function(e,t,n){if(this.onSlowResponse){var i=Date.now();if(i-e.sentTimestamp>500){var r=InfrontUtil.deepCopy(e.sourceMessage);r.hasOwnProperty("password")&&delete r.password;var a=JSON.stringify(e.sourceMessage,["fields","instruments","instrument","feeds","feed","ticker"]).slice(0,100);this.onSlowResponse(e.sourceMessage.getMessageKey(),a,null,e.sentTimestamp,i,this.getTransportUrl(n))}}},t.prototype.stringifyRequestMessage=function(e,t){if(t&&"function"!=typeof t)return InfrontUtil.isArray(t)?t.length>0?t[0]+"|"+t.length:"[]":"object"!=typeof t?(""+t).substring(0,50):t},t.prototype.getTransportUrl=function(e){switch(e){case this.marketDataTransport:return this.marketDataUrl;case this.tradingTransport:return this.tradingUrl;case this.visualTransport:return this.visualUrl;default:return"Unknown transport"}},t.prototype.routeMessage=function(e){var t=null;switch(e.messageType){case n.MarketData:t=this.getMarketDataTransport();break;case n.Trading:t=this.getTradingTransport();break;case n.Connect:t=this.getVisualConnectTransport();break;case n.InfinData:t=this.getVisualTransport()}null!=t&&t.sendMessage(e.message)},t.prototype.getMarketDataTransport=function(){return null==this.marketDataTransport&&null!=this.marketDataUrl&&(this.marketDataTransport=this.transportFactory.transportForUrl(this.marketDataUrl,this)),this.marketDataTransport},t.prototype.getVisualConnectTransport=function(){return null==this.visualConnectTransport&&null!=this.visualConnectUrl&&(this.visualConnectTransport=this.transportFactory.transportForUrl(this.visualConnectUrl,this)),this.visualConnectTransport},t.prototype.getVisualTransport=function(){return null==this.visualTransport&&null!=this.visualUrl&&(this.visualTransport=this.transportFactory.transportForUrl(this.visualUrl,this)),this.visualTransport},t.prototype.getTradingTransport=function(){return null==this.tradingTransport&&null!=this.tradingUrl&&(this.tradingTransport=this.transportFactory.transportForUrl(this.tradingUrl,this)),this.tradingTransport},t.prototype.getSessionToken=function(e){switch(e){case n.MarketData:return this.marketDataSessionToken;case n.Trading:return this.tradingSessionToken;case n.InfinData:return this.visualSessionToken;default:return null}},t.prototype.validateResult=function(t,n){return t.hasOwnProperty(e.MWSConstants.error_code)&&(0!=t[e.MWSConstants.error_code]||t.hasOwnProperty(n.getResponseKey()))},t.getUniqueRequestData=function(){return(t.messageCounter++).toString()},t.kSessionTerminatedKey="md_session_terminated",t.kTrSessionTerminatedKey="tr_session_terminated",t.messageCounter=0,t}();e.MessageService=o;var l=function(){},c=function(){function e(){this.observers=[]}return e.prototype.call=function(e){for(var t=[],n=0;n<this.observers.length;n++){var i=this.observers[n];-1===t.indexOf(i.updateCallback)&&(i.updateCallback(e),t.push(i.updateCallback))}},e.prototype.add=function(e){this.observers.push(e)},e.prototype.remove=function(e){var t=this.observers.indexOf(e);t>-1&&this.observers.splice(t,1)},e.prototype.getAll=function(){return this.observers},e}(),d=function(){function e(e,t,n){this._getMessageKey=function(){return e},this._getResponseKey=function(){return t},this._getMessageType=function(){return n}}return e.prototype.getMessageType=function(){return this._getMessageType()},e.prototype.getMessageKey=function(){return this._getMessageKey()},e.prototype.getResponseKey=function(){return this._getResponseKey()},e}();e.GenericRequest=d;var u=function(e){function t(){return e.call(this,"md_get_owc_request","md_get_owc_response",n.MarketData)||this}return __extends(t,e),t}(d);e.GetOWCRequest=u;var h=function(e){function t(t){var i=e.call(this,"md_subscribe_owc_request","md_subscribe_owc_response",n.MarketData)||this;return i._getUpdateData=function(){return t},i}return __extends(t,e),t.prototype.getEventKey=function(){return"md_owc_update"},t.prototype.createUnsubscribeRequest=function(){var e=new p;return e.update_data=this.getUpdateData(),e},t.prototype.getUpdateData=function(){return this._getUpdateData()},t}(d);e.SubscribeOWCRequest=h;var p=function(e){function t(){return e.call(this,"md_unsubscribe_owc_request","md_unsubscribe_owc_response",n.MarketData)||this}return __extends(t,e),t}(d);e.UnsubscribeOWCRequest=p;var m=function(e){function t(t){var i=e.call(this,"md_subscribe_news_request","md_subscribe_news_response",n.MarketData)||this;return i._getUpdateData=function(){return t},i}return __extends(t,e),t.prototype.getEventKey=function(){return"md_news_update"},t.prototype.createUnsubscribeRequest=function(){var e=new g;return e.update_data=this.getUpdateData(),e},t.prototype.getUpdateData=function(){return this._getUpdateData()},t}(d);e.SubscribeNewsRequest=m;var g=function(e){function t(){return e.call(this,"md_unsubscribe_news_request","md_unsubscribe_news_response",n.MarketData)||this}return __extends(t,e),t}(d);e.UnsubscribeNewsRequest=g;var f=function(e){function t(){return e.call(this,"md_keep_alive_request","md_keep_alive_response",n.MarketData)||this}return __extends(t,e),t}(d);e.MarketDataKeepAliveRequest=f;var v=function(e){function t(){return e.call(this,"md_get_feed_metadata_request","md_get_feed_metadata_response",n.MarketData)||this}return __extends(t,e),t}(d);e.GetFeedMetadataRequest=v;var y=function(e){function t(){var t=e.call(this,"md_get_snapshot_request","md_get_snapshot_response",n.MarketData)||this;return t.instruments=[],t}return __extends(t,e),t.prototype.setInstrument=function(e){this.instruments[0]=e},t.prototype.setInstruments=function(e){this.instruments=e},t.prototype.setFields=function(e){this.fields=e},t.prototype.getInstrument=function(){return this.instruments.length>0?this.instruments[0]:null},t.prototype.getFields=function(){return this.fields},t}(d);e.GetSnapshotRequest=y;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getMessageKey=function(){return"md_subscribe_instrument_request"},t.prototype.getResponseKey=function(){return"md_subscribe_instrument_response"},t.prototype.getEventKey=function(){return"md_instrument_update"},t.prototype.getUpdateData=function(){return"md_instrument_update"},t.prototype.createUnsubscribeRequest=function(){var e=new T;return e.fields=this.fields,e.instruments=this.instruments,e},t}(y);e.InstrumentSubscriptionRequest=b;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getMessageKey=function(){return"md_unsubscribe_instrument_request"},t.prototype.getResponseKey=function(){return"md_unsubscribe_instrument_response"},t}(y);e.InstrumentUnsubscribeRequest=T;var S=function(e){function t(){return e.call(this,"md_instrument_search_request","md_instrument_search_response",n.MarketData)||this}return __extends(t,e),t}(d);e.InstrumentSearchRequest=S;var C=function(e){function t(){return e.call(this,"md_get_calendar_request","md_get_calendar_response",n.MarketData)||this}return __extends(t,e),t}(d);e.CalendarRequest=C;var I=function(e){function t(){return e.call(this,"md_get_infinancials_request","md_get_infinancials_response",n.MarketData)||this}return __extends(t,e),t}(d);e.GetInfinancialsUrlRequest=I;var _=function(e){function t(t,i){return e.call(this,t,i,n.Trading)||this}return __extends(t,e),t}(d);e.TradingRequest=_;var M=function(e){function t(){return e.call(this,"vs_login_request","vs_login_response",n.Connect)||this}return __extends(t,e),t}(d);e.VisualLoginRequest=M;var E=function(e){function t(){return e.call(this,"component","component_response",n.InfinData)||this}return __extends(t,e),t}(d);e.ComponentRequest=E;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.ScreenerRequest=w;var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.EurofinRequest=A;var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.UniverseRequest=D;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.ChartRequest=O;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.EvolutionChartRequest=k;var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.EtaRequest=R;var N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.EstimatesRequest=N;var L=function(e){function t(){return e.call(this,"search_request","search_response",n.InfinData)||this}return __extends(t,e),t}(d);e.SearchRequest=L;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(E);e.FundamentalsRequest=P;var F=function(e){function t(){return e.call(this,"md_get_fund_details_request","md_get_fund_details_response",n.MarketData)||this}return __extends(t,e),t}(d);e.FundDetailsRequest=F}(Infront||(Infront={})),function(e){e.DEBUG_VISUAL=!1;var t=function(){function e(){this.map={}}return e.prototype.registerEventCallback=function(e,t){e in this.map||(this.map[e]=[]),this.map[e].push(t)},e.prototype.unregisterEventCallback=function(e,t){if(e in this.map)for(var n=0;n<this.map[e].length;n++)if(this.map[e][n]===t){this.map[e].splice(n,1);break}},e.prototype.publish=function(e){if(this.map.hasOwnProperty(e.name))for(var t=this.map[e.name],n=0;n<t.length;n++)t[n](e)},e}();e.EventCallbackMap=t}(Infront||(Infront={})),void 0===Infront.EventCallbackMap.eventMap&&(Infront.EventCallbackMap.eventMap=new Infront.EventCallbackMap),function(e){function t(){return new e.MarketDataKeepAliveRequest}var n,i,r,a,s=e.MWSConstants;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Disconnected=3]="Disconnected"}(n=e.InfrontStatus||(e.InfrontStatus={})),function(e){e[e.Username=0]="Username",e[e.OAUTH=1]="OAUTH",e[e.ExistingSession=2]="ExistingSession",e[e.JWT=3]="JWT",e[e.NONE=4]="NONE"}(i=e.AuthenticationType||(e.AuthenticationType={})),function(e){e[e.USER_PASS=0]="USER_PASS",e[e.JWT_AUTO=1]="JWT_AUTO",e[e.IDP_SUPER_USER=2]="IDP_SUPER_USER",e[e.IDP_AUTO=3]="IDP_AUTO"}(r=e.TradingLoginModes||(e.TradingLoginModes={})),function(e){e[e.Require=0]="Require",e[e.Prefer=1]="Prefer",e[e.Unimportant=2]="Unimportant"}(a=e.ConnectionSecurity||(e.ConnectionSecurity={}));var o=function(){};e.TradingLoginOptions=o;var l=function(){function e(){}return e.prototype.getAuthenticationType=function(){return void 0!==this.user_id?i.Username:void 0!==this.auth_token?i.OAUTH:void 0!==this.session_token&&void 0!==this.session_urls?i.ExistingSession:void 0!==this.signed_token?i.JWT:i.NONE},e}();e.LoginOptions=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l);e.ControllerOptions=c;var d=function(){};e.InfrontEvent=d;var u=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onReady",t}(d);e.ReadyEvent=u;var h=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onSystemAlert",t}(d);e.SystemAlertsEvent=h;var p=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="vsOnReady",t}(d);e.VisualReadyEvent=p;var m,g=function(e){function t(n){var i=e.call(this)||this;return i.name=t.kEventName,i.message=n,i}return __extends(t,e),t.kEventName="onPortfolioCurrencyChanged",t}(d);e.PortfolioCurrencyChangedEvent=g,function(e){e[e.KICKOUT=0]="KICKOUT",e[e.DISCONNECT=1]="DISCONNECT",e[e.INVALID_SESSION_TOKEN=2]="INVALID_SESSION_TOKEN",e[e.UNKNOWN=3]="UNKNOWN"}(m=e.DisconnectEventReason||(e.DisconnectEventReason={}));var f=function(e){function t(){var n=e.call(this)||this;return n.reason=m.UNKNOWN,n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onDisconnect",t}(d);e.DisconnectEvent=f;var v=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="vsOnLoginFailed",t}(d);e.VisualLoginFailedEvent=v;var y=function(e){function t(n,i){var r=e.call(this)||this;return r.name=t.kEventName,r.pid=n,r.sid=i,r}return __extends(t,e),t.kEventName="onTradingLogin",t}(d);e.TradingConnectedEvent=y;var b=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onTradingDisconnect",t}(d);e.TradingDisconnectedEvent=b;var T=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onTradingReconnecting",t}(d);e.TradingReconnectingEvent=T;var S=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onTradingReconnected",t}(d);e.TradingReconnectedEvent=S;var C=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n.error_code=-1,n}return __extends(t,e),t.kEventName="onTradingLoginFailed",t}(d);e.TradingLoginFailedEvent=C;var I=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onTradingLoginCanceled",t}(d);e.TradingLoginCanceledEvent=I;var _=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onTradingTokenInvalid",t}(d);e.TradingTokenInvalidEvent=_;var M=function(e){function t(n,i,r){var a=e.call(this)||this;return a.name=t.kEventName,a.termination_code=i,a.termination_reason=r,a.tradingName=n,a}return __extends(t,e),t.kEventName="onTradingLostConnection",t}(d);e.TradingLostConnectionEvent=M;var E=function(e){function t(n,i,r){var a=e.call(this)||this;return a.name=t.kEventName,a.termination_code=i,a.termination_reason=r,a.tradingUrl=n,a}return __extends(t,e),t.kEventName="onTradingTerminated",t}(d);e.TradingTerminatedEvent=E;var w=function(e){function t(n,i,r,a,s){var o=e.call(this)||this;return o.name=t.kEventName,o.ps=n.toStr(),o.gateway=i,o.error_code=r,o.error_description=a,o.orderId=s,o}return __extends(t,e),t.kEventName="onTradingError",t}(d);e.TradingErrorEvent=w;var A=function(e){function t(n){var i=e.call(this)||this;return i.name=t.kEventName,i.source=n,i}return __extends(t,e),t.kEventName="onAlertChanged",t}(d);e.AlertsChangedEvent=A;var D=function(e){function t(n){var i=e.call(this)||this;return i.name=t.kEventName,i.source=n,i}return __extends(t,e),t.kEventName="onWatchlistInstrumentAdded",t}(d);e.WatchlistInstrumentAddedEvent=D;var O=function(e){function t(n){var i=e.call(this)||this;return i.name=t.kEventName,i.source=n,i}return __extends(t,e),t.kEventName="onWatchlistInstrumentRemoved",t}(d);e.WatchlistInstrumentRemovedEvent=O;var k=function(e){function t(){var n=e.call(this)||this;return n.name=t.kEventName,n}return __extends(t,e),t.kEventName="onLoginFailed",t}(d);e.LoginFailedEvent=k;var R=function(e){function t(n,i){var r=e.call(this)||this;return r.name=t.kEventName,r.ps=n,r.serverType=i,r}return __extends(t,e),t.kEventName="onMinorDisconnect",t}(d);e.LowLevelDisconnectEvent=R;var N=function(e){function t(n,i){var r=e.call(this)||this;return r.name=t.kEventName,r.ps=n,r.serverType=IDS.serverTypeToStr(i),r}return __extends(t,e),t.kEventName="onMinorConnect",t}(d);e.LowLevelConnectEvent=N;var L=function(e){function t(n,i){var r=e.call(this)||this;return r.name=t.kEventName,r.ps=n,r.serverType=IDS.serverTypeToStr(i),r}return __extends(t,e),t.kEventName="onWireReconnect",t}(d);e.WireReconnectEvent=L;var P=function(){this.sessionToken=null,this.url=null,this.sessionTimeout=null,this.routingResponse=null,this.pid=null,this.sid=null,this.userId=null,this.password=null,this.features=[]};e.StoredMwsSession=P;var F=function(){function e(e){this.name=e,this.loaded=!1,this.load(),this.loaded||(this.values=new P)}return e.prototype.set=function(e,t,n,i,r,a,s,o,l){void 0===o&&(o=-1),void 0===l&&(l=-1),this.values.sessionToken=n,this.values.url=i,this.values.sessionTimeout=r,this.values.routingResponse=a,this.values.userId=e,this.values.password=t,this.values.features=s,-1!=o&&(this.values.pid=o),-1!=l&&(this.values.sid=l),this.store(),this.loaded=!0},e.prototype.clear=function(){this.values=new P,this.loaded=!1,InfrontUtil.isLocalStorageSupported()&&window.sessionStorage.removeItem(this.key())},e.prototype.store=function(){if(InfrontUtil.isLocalStorageSupported()){var e=JSON.stringify(this.values);window.sessionStorage.setItem(this.key(),e)}},e.prototype.load=function(){if(InfrontUtil.isLocalStorageSupported()&&window.sessionStorage[this.key()]){var e=window.sessionStorage.getItem(this.key());try{this.values=JSON.parse(e),this.loaded=!0}catch(e){this.loaded=!1}}},e.prototype.key=function(){return e.kInfrontStoragePrefix+this.name},e.prototype.hasCredentials=function(){return!!this.loaded&&null!=this.values.userId&&null!=this.values.password},e.kInfrontStoragePrefix="com.goinfront.wtk.",e}();e.LocallyStoredSession=F;var x=function(){function o(t){this.tradingServer=null,this.readyEventPublished=!1,this.infront=t,this.status=n.Uninitialized,this.tradingStatus=n.Uninitialized,this.eventMap=e.EventCallbackMap.eventMap,this.storedVSSession=new F(o.kStoredVisualSessionName),this.storedTRSession=new F(o.kStoredTradingSessionName)}return o.prototype.init=function(n){var i=this,r=new c;r.streaming=!1,r.store_session=!1,r.client_application=e.LibraryConstants.kDefaultClientApplication,r.disableWebsocket=!1,r.httpPoolSize=4,r.keepSessionAlive=!0,r.usingNodeJS=!1,r.tradingOptions=null,r.infrontWidgetAccess=!0,r.visualWidgetAccess=!0,r.visualRoutingUrl=e.LibraryConstants.kVisualRoutingUrl,r.visualConnectPath="/access/connect",r.visualComponentPath="/component/",r.token_type="JWT",this.options=InfrontUtil.mergeRecursive(r,n),this.userId=this.options.user_id,this.password=this.options.password,this.useSecureIdsConnection="https:"===location.protocol||this.options.secureConnection==a.Require,this.sidPidMatches=[],this.options.routing_response&&(this.routingResponse=this.options.routing_response),!this.options.disableWebsocket&&e.WebsocketTransport.isWebsocketsSupported(this.options.usingNodeJS)?this.options.secureConnection==a.Require?this.protocolPriorityList=["wss://","https://"]:this.options.secureConnection==a.Prefer?this.protocolPriorityList=["wss://","ws://","https://","http://"]:this.protocolPriorityList=["ws://","wss://","http://","https://"]:this.options.secureConnection==a.Require?this.protocolPriorityList=["https://"]:this.options.secureConnection==a.Prefer?this.protocolPriorityList=["https://","http://"]:this.protocolPriorityList=["http://","https://"],this.messageService=new e.MessageService(this,this.options.httpPoolSize,this.options.usingNodeJS),this.options.onSlowResponse&&(this.messageService.onSlowResponse=this.options.onSlowResponse),this.messageService.setVisualConnectUrl(this.options.visualRoutingUrl+this.options.visualConnectPath),this.messageService.setVisualUrl(this.options.visualRoutingUrl+this.options.visualComponentPath),this.messageService.setSessionTerminatedObserver(function(e){return i.sessionTerminated(e)}),this.keepAliveSender=new U(this.messageService,6e4,this,t),this.streamingManager=this.messageService.streamingManager,this.options.store_session||this.options.visualWidgetAccess&&this.storedVSSession.clear();var s=this.storedTRSession.values,o=s.sessionToken,l=s.sessionTimeout;this.marketDataLoginSuccess(o,l),this.options.visualWidgetAccess&&(e.DEBUG_VISUAL&&InfrontUtil.debugLog("Visual Access change routing url"),this.storedVSSession.loaded?this.setValuesAndDoVisualLogin(this.storedVSSession.values.userId,this.storedVSSession.values.password,this.storedVSSession.values.sessionToken,this.storedVSSession.values.routingResponse):this.startVisualNewSessionCreation())},o.prototype.logOut=function(){this.tradingLogout(),this.storedVSSession.clear(),this.streamingManager.getServerPool().reset()},o.prototype.setValuesAndDoVisualLogin=function(e,t,n,i){e&&(this.userId=e),t&&(this.password=t),n&&this.messageService.setVisualSessionToken(n),i&&(this.routingResponse=i),this.visualLogin()},o.prototype.setNodesToUrl=function(e){var t=InfrontUtil.isString(e)?[e]:e;this.nodes=[{connections:t}]},o.prototype.startVisualNewSessionCreation=function(){e.DEBUG_VISUAL&&InfrontUtil.debugLog("[Controller]VisualAccess - startVisualNewSessionCreation"),this.messageService.setVisualSessionToken(null),this.visualLogin()},o.prototype.visualLogin=function(){var t=this;if(e.DEBUG_VISUAL&&InfrontUtil.debugLog("[Controller]visualLogin function"),this.options.getAuthenticationType()===i.NONE)this.status=n.Disconnected,this.eventMap.publish(new k);else if(this.options.getAuthenticationType()===i.Username||this.options.getAuthenticationType()===i.OAUTH||this.options.getAuthenticationType()==i.JWT){var r=new e.VisualLoginRequest;this.options.getAuthenticationType()==i.Username?(r.login_id=this.userId,r.password=this.password):this.options.getAuthenticationType()==i.JWT&&(r.token_type=this.options.token_type,r.signed_token=this.options.signed_token),r.client_application=this.options.client_application,r.country_code="fr",r.api_version=s.api_version;var a=new e.RequestOptions;a.onError=function(e,i){t.status=n.Disconnected;var r=new v;r.message=i,t.eventMap.publish(r)},a.onSuccess=function(n){var i=n[s.session_token],r=n.hasOwnProperty(s.session_timeout)?n[s.session_timeout]:null;e.DEBUG_VISUAL&&InfrontUtil.debugLog("[Controller]visualLoginSuccess request."),t.visualLoginSuccess(i,r)},this.messageService.sendRequest(r,a)}},o.prototype.marketDataLoginSuccess=function(e,t){this.status=n.Connected,this.messageService.setMarketDataSessionToken(e),this.startIDS(e)},o.prototype.startIDS=function(e){var t=this;void 0===e&&(e=void 0),this.status=n.Connecting;var i=new IDS.EndLogin;i.EndLogin=function(i,r,a){if(i){if(t.tradingStatus==n.Connecting)return;var s=function(){t.publishReadyEvent(e),t.status=n.Connected};t.establishTradingSession(s),setTimeout(function(){t.readyEventPublished||(t.tradingLoginFailed(IDS.FailCodes.ErrorNotLoggedIn,"Could not connect to trading gateway",!0),s())},1e4)}else r==IDS.HeaderResponses.ExcludeUser?t.publishDisconnectedEvent(m.KICKOUT,a):t.publishLoginFailedEvent(a)},this.messageService.StartIDS(this.userId,this.password,this.useSecureIdsConnection,this.options.signed_token,this.options.loginUrls)&&this.streamingManager.getServerPool().RegisterEndLogin(i)},o.prototype.publishReadyEvent=function(e){if(void 0===e&&(e=void 0),!this.readyEventPublished){this.readyEventPublished=!0;var t=new u;t.sessionToken=e,this.currentNode&&(t.urls=this.currentNode.connections),this.eventMap.publish(t)}},o.prototype.publishLoginFailedEvent=function(e){var t=new k;t.message=e,this.eventMap.publish(t)},o.prototype.publishDisconnectedEvent=function(e,t){var n=new f;n.reason=e,n.message=t,this.eventMap.publish(n)},o.prototype.visualLoginSuccess=function(e,t){this.status=n.Connected,this.messageService.setVisualSessionToken(e),this.storedVSSession.set(this.userId,this.password,e,this.messageService.getVisualUrl(),t,this.routingResponse,[]);var i=new p;i.sessionToken=e,this.eventMap.publish(i)},o.prototype.establishTradingSession=function(e){var t=this.getTradingLoginMode();this.storedTRSession.hasCredentials()?this.loginWithStoredTRSession(e):t==r.IDP_AUTO?this.loginWithTradingOptionsIDP(e):t==r.JWT_AUTO?this.loginWithTradingOptionsJWT(e):(IDS.DEBUG_TRADING&&IDS.log("Trading auto login not supported."),e())},o.prototype.tradingConnectedEventFromStorage=function(){return new y(this.storedTRSession.values.pid,this.storedTRSession.values.sid)},o.prototype.hasTradingAccess=function(e){if(!e)return!1;var t=this.streamingManager.getServerPool().login.getServiceInfo(e);return t&&t.serviceType==IDS.ServiceType.OrderEntry},o.prototype.loginWithStoredTRSession=function(t){var i=this,r=new e.PidSid(this.storedTRSession.values.pid,this.storedTRSession.values.sid);if(this.tradingServer=this.streamingManager.getServerPool().GetTrading(r,this,this.streamingManager),this.tradingServer.Register(this.infront.tradingManager),this.infront.setTradingServer(this.tradingServer),this.tradingStatus=n.Connecting,this.tradingUserId=this.storedTRSession.values.userId,this.tradingPassword=this.storedTRSession.values.password,this.tradingToken=this.storedTRSession.values.sessionToken,!this.tradingUserId&&!this.tradingPassword)return this.storedTRSession.clear(),void t();this.tradingLogin({ResponseTradingLogin:function(e,n){n.failCode>0&&(i.storedTRSession.clear(),i.tradingLoginFailed(n.failCode,n.getFailMessage())),t()},ResponseError:function(e){i.storedTRSession.clear(),i.tradingLoginFailed(IDS.FailCodes.ErrorNotLoggedIn,e.errorMsg),t()}})},o.prototype.loginWithTradingOptionsIDP=function(t){var i=this;this.tradingToken=this.options.tradingOptions.signed_token,this.tradingTokenType=this.options.tradingOptions.token_type;var r=this.options.tradingOptions.valid_sids_pids[0]||void 0,a=r?new e.PidSid(r.pid,r.sid):void 0;if(!this.hasTradingAccess(a))return this.tradingLoginMode,this.tradingStatus=n.Uninitialized,void t();this.tradingServer=this.streamingManager.getServerPool().GetTrading(a,this,this.streamingManager),this.tradingServer.Register(this.infront.tradingManager),this.infront.setTradingServer(this.tradingServer),this.tradingStatus=n.Connecting,this.tradingUserId=this.options.tradingOptions.user_id,this.tradingLogin({ResponseTradingLogin:function(e,n){n.failCode>0&&i.tradingLoginFailed(n.failCode,n.getFailMessage(),!0),t()},ResponseError:function(e){i.tradingLoginFailed(IDS.FailCodes.ErrorNotLoggedIn,e.errorMsg,!0),t()}})},o.prototype.loginWithTradingOptionsJWT=function(t){var i=this;if(this.options.tradingOptions){this.options.tradingOptions.signed_token?(this.tradingUserId=this.options.tradingOptions.user_id,this.tradingToken=this.options.tradingOptions.signed_token,this.tradingTokenType=this.options.tradingOptions.token_type):(this.tradingUserId=this.options.tradingOptions.user_id,this.tradingPassword=this.options.tradingOptions.password,this.tradingPin=this.options.tradingOptions.pin);var r=void 0;if(this.options.tradingOptions.provider&&this.options.tradingOptions.service&&(r=new e.PidSid(this.options.tradingOptions.provider,this.options.tradingOptions.service)),!this.hasTradingAccess(r))return this.tradingLoginMode,this.tradingStatus=n.Uninitialized,void t();this.tradingServer=this.streamingManager.getServerPool().GetTrading(r,this,this.streamingManager),this.tradingServer.Register(this.infront.tradingManager),this.infront.setTradingServer(this.tradingServer),this.tradingStatus=n.Connecting,this.tradingLogin({ResponseTradingLogin:function(e,n){n.failCode>0&&i.tradingLoginFailed(n.failCode,n.getFailMessage(),!0),t()},ResponseError:function(e){i.tradingLoginFailed(IDS.FailCodes.ErrorNotLoggedIn,e.errorMsg,!0),t()}})}},o.prototype.startTradingLogin=function(e,t,i,a,s){var o=this;this.tradingToken=null,this.tradingTokenType=null,this.tradingServer?(this.getTradingLoginMode()==r.IDP_SUPER_USER&&this.getSidPidMatches().indexOf(this.tradingEndpoint)>=0?(this.tradingToken=this.options.tradingOptions.signed_token,this.tradingTokenType=this.options.tradingOptions.token_type):(this.tradingUserId=i,this.tradingPassword=a,this.tradingPin=s),this.tradingStatus=n.Connecting,this.tradingLogin()):InfrontUtil.setZeroTimeout(function(){o.tradingLoginFailed(0,null)})},o.prototype.getTradableFeeds=function(){return this.tradingEndpoint&&this.tradingEndpoint.hasOwnProperty(s.tradable_feeds)?this.tradingEndpoint[s.tradable_feeds]:null},o.prototype.getTradingRoutings=function(){return this.routingResponse&&this.routingResponse.hasOwnProperty(s.tr_routings)?this.routingResponse[s.tr_routings]:null},o.prototype.getSidPidMatches=function(){return 0==this.sidPidMatches.length&&this.generate_pid_sid_matches(),this.sidPidMatches},o.prototype.getTradingLoginMode=function(){return this.tradingLoginMode||this.determineTradingLoginMode(),this.tradingLoginMode},o.prototype.determineTradingLoginMode=function(){var e=r.USER_PASS,t=this.options.tradingOptions;t&&"JWT"==t.token_type?e=r.JWT_AUTO:t&&"IDP"==t.token_type&&(e=1==t.valid_sids_pids.length?r.IDP_AUTO:r.IDP_SUPER_USER),this.tradingLoginMode=e},o.prototype.generate_pid_sid_matches=function(){var e=this.getTradingRoutings();if(this.options.tradingOptions&&e)for(var t=this.options.tradingOptions.valid_sids_pids||[],n=0;n<t.length;n++)for(var i=0;i<e.length;i++)e[i][s.provider]==t[n].pid&&e[i][s.service]==t[n].sid&&this.sidPidMatches.push(e[i])},o.prototype.findTradingService=function(e,t){var n=null;if(this.routingResponse&&this.routingResponse.hasOwnProperty(s.tr_routings))for(var i=this.routingResponse[s.tr_routings],r=0;r<i.length;r++)if(i[r][s.provider]==e&&i[r][s.service]==t){n=i[r];break}return n},o.prototype.ResponseTradingLogin=function(e,t){t.failCode>0?this.tradingLoginFailed(t.failCode,InfrontUtil.htmlSanitize(t.getFailMessage())):this.tradingLoginSuccess(t.ToMws(),t.pidSid)},o.prototype.ResponseError=function(e){this.tradingLoginMode=r.USER_PASS,this.tradingStatus=n.Disconnected,this.getMessageService().setTradingSessionToken(null),this.tradingLoginFailed(0,e.errorMsg)},o.prototype.tradingLogin=function(e){void 0===e&&(e=void 0),this.tradingServer.Register(this),e&&this.tradingServer.Register(e),this.tradingServer.Login(this.tradingUserId,this.tradingPassword,this.tradingPin,this.tradingToken,this.tradingTokenType)},o.prototype.tradingLoginFailed=function(e,t,n){void 0===n&&(n=!1),!n&&this.tradingEndpoint&&this.tradingEndpoint.hasOwnProperty(s.nodes)&&(this.tradingNodes=[].concat(this.tradingEndpoint[s.nodes]));var i=new C;t&&(i.message=t),InfrontUtil.isNumber(e)&&(i.error_code=e),this.eventMap.publish(i)},o.prototype.tradingLoginSuccess=function(e,t){var i=e[s.session_token],r=e.hasOwnProperty(s.session_timeout)?e[s.session_timeout]:null,a=e.hasOwnProperty(s.features)?e[s.features]:[],o=this.currentTradingNode?this.pickPrioritizedUrl(this.currentTradingNode.connections):"";this.storedTRSession.set(this.tradingUserId,this.tradingPassword,i,o,r,void 0,a,t.pid,t.sid),this.tradingStatus=n.Connected,this.getMessageService().setTradingSessionToken(i),this.eventMap.publish(new y(t.pid,t.sid))},o.prototype.tradingLogout=function(){this.tradingServer&&this.tradingServer.Unregister(this),this.storedTRSession.clear()},o.prototype.getTradingFeatures=function(){return this.storedTRSession.values.features},o.prototype.doDisconnect=function(e,t){if(this.status!=n.Disconnected){this.status=n.Disconnected,this.keepAliveSender.stop();var i=new f;i.message=t,i.reason=e,this.eventMap.publish(i)}},o.prototype.sessionTerminated=function(t){var n;switch(t[s.termination_reason]){case e.TerminationCodes.kickout:n=m.KICKOUT;break;case e.TerminationCodes.INVALID_SESSION_TOKEN:n=m.INVALID_SESSION_TOKEN;break;default:n=m.UNKNOWN}this.doDisconnect(n,t[s.termination_reason])},o.prototype.marketDataDisconnected=function(){this.doDisconnect(m.DISCONNECT,null)},o.prototype.tradingDisconnected=function(){this.tradingStatus=n.Disconnected,this.storedTRSession.clear(),this.eventMap.publish(new b)},o.prototype.tradingReconnecting=function(){this.tradingStatus=n.Disconnected,this.eventMap.publish(new T)},o.prototype.tradingReconnected=function(){this.tradingStatus=n.Connected,this.eventMap.publish(new S)},o.prototype.registerEventObserver=function(e,t){this.eventMap.registerEventCallback(e,t)},o.prototype.unregisterEventObserver=function(e,t){this.eventMap.unregisterEventCallback(e,t)},o.prototype.getMessageService=function(){return this.messageService},o.prototype.getStatus=function(){return this.status},o.prototype.getTradingStatus=function(){return this.tradingStatus},o.prototype.getTradingSession=function(){return this.storedTRSession},o.prototype.isStreaming=function(){return this.options.streaming},o.prototype.isTradingStreaming=function(){return!0},o.prototype.keepAliveFailed=function(e,t){this.status=n.Disconnected,this.keepAliveSender.stop()},o.prototype.pickPrioritizedUrl=function(e){for(var t=0;t<this.protocolPriorityList.length;t++)for(var n=0;n<e.length;n++)if(0===e[n].indexOf(this.protocolPriorityList[t]))return e[n];return null},o.prototype.publishEvent=function(e){this.eventMap.publish(e)},o.kStoredMarketDataSessionName="marketDataSession",o.kStoredVisualSessionName="visualDataSession",o.kStoredTradingSessionName="tradingSession",o}();e.Controller=x;var U=function(){function t(e,t,n,i){this.messageService=e,this.interval=t,this.running=!1,this.observer=n,this.messageFactory=i}return t.prototype.start=function(){var e=this;this.running||(this.handle=setInterval(function(){e.sendKeepAliveMessage()},this.interval),this.running=!0)},t.prototype.stop=function(){this.running&&(clearInterval(this.handle),this.running=!1)},t.prototype.setInterval=function(e){this.interval=e,this.running&&(this.stop(),this.start())},t.prototype.sendKeepAliveMessage=function(){var t=this,n=this.messageFactory(),i=new e.RequestOptions;i.onError=function(e,n){t.observer.keepAliveFailed(e,n)},i.onSuccess=function(e){},this.messageService.sendRequest(n,i)},t}()}(Infront||(Infront={})),function(e){var t=function(){function t(e){this.feeds={},this.feedsInRequest={},this.controller=e}return t.prototype.getFeedMetaData=function(e){if(this.feeds.hasOwnProperty(""+e))return this.feeds[e];var t=this.controller.streamingManager;if(t){var i=t.getServerPool().login.getFeedMetadata(e)||null;return i&&i.country&&(i.iso_country=n.getAlpha2(i.country)),this.storeIdsFeedMetadata(i,e),i}return null},t.prototype.getFeed=function(t,n){var i=this,r=Number(t).toString();if(this.feeds.hasOwnProperty(r))setTimeout(function(){n(i.feeds[r])},0);else if(this.feedsInRequest.hasOwnProperty(r))this.feedsInRequest[r].push(n);else{var a=this.controller.streamingManager;if(a){var s=a.getServerPool().login.getFeedMetadata(t);s?(this.feedsInRequest.hasOwnProperty(r)||(this.feedsInRequest[r]=[]),this.feedsInRequest[r].push(n),this.storeFeedMetadata(s),this.processCallbacks(r)):setTimeout(function(){n(null)})}else{var o=new e.GetFeedMetadataRequest;o.feed=t;var l=new e.RequestOptions;l.onError=function(e,t){setTimeout(function(){i.processCallbacks(r)})},l.onSuccess=function(e){i.storeFeedMetadata(e),i.processCallbacks(r)},this.feedsInRequest.hasOwnProperty(r)||(this.feedsInRequest[r]=[]),this.feedsInRequest[r].push(n),this.controller.getMessageService().sendRequest(o,l)}}},t.prototype.getFeeds=function(e,t){for(var n=[],i=new InfrontUtil.MultiCallbackHandler(function(){t(n)}),r=0;r<e.length;r++)this.getFeed(e[r],i.addCallback(function(e){e&&n.push(e)}))},t.prototype.dumpFeed=function(e){this.getFeed(e,function(e){IDS.log(e)})},t.prototype.processCallbacks=function(e){for(var t=this.feedsInRequest[e],n=this.feeds[e],i=0;i<t.length;i++)t[i](n);delete this.feedsInRequest[e]},t.prototype.storeFeedMetadata=function(t){var i=Number(t.feed).toString(),r=InfrontUtil.mergeRecursive(new e.FeedMetaData,t);r.iso_country=n.getAlpha2(r.country),this.feeds[i]=r},t.prototype.storeIdsFeedMetadata=function(e,t){this.feeds[t]=e},t}();e.FeedHandler=t;var n=function(){function e(){}return e.getAlpha2=function(t){if(InfrontUtil.isNumber(t)){var n=t.toString();if(e.WT_COUNTRY_CODES.hasOwnProperty(n))return e.WT_COUNTRY_CODES[n].a2}return null},e.getCountryName=function(t){if(InfrontUtil.isNumber(t)){var n=t.toString();if(e.WT_COUNTRY_CODES.hasOwnProperty(n))return e.WT_COUNTRY_CODES[n].country_name}return null},e.WT_COUNTRY_CODES={0:{a2:"",country_name:"Global"},1:{a2:"US",country_name:"United States"},2:{a2:"CA",country_name:"Canada"},7:{a2:"RU",country_name:"Russian Federation"},20:{a2:"EG",country_name:"Egypt"},27:{a2:"ZA",country_name:"South Africa"},30:{a2:"GR",country_name:"Greece"},31:{a2:"NL",country_name:"Netherlands"},32:{a2:"BE",country_name:"Belgium"},33:{a2:"FR",country_name:"France"},34:{a2:"ES",country_name:"Spain"},36:{a2:"HU",country_name:"Hungary"},39:{a2:"IT",country_name:"Italy"},40:{a2:"RO",country_name:"Romania"},41:{a2:"CH",country_name:"Switzerland"},43:{a2:"AT",country_name:"Austria"},44:{a2:"GB",country_name:"United Kingdom"},45:{a2:"DK",country_name:"Denmark"},46:{a2:"SE",country_name:"Sweden"},47:{a2:"NO",country_name:"Norway"},48:{a2:"PL",country_name:"Poland"},49:{a2:"DE",country_name:"Germany"},52:{a2:"MX",country_name:"Mexico"},54:{a2:"AR",country_name:"Argentina"},55:{a2:"BR",country_name:"Brazil"},56:{a2:"CL",country_name:"Chile"},58:{a2:"VE",country_name:"Venezuela, Bolivarian Republic of"},60:{a2:"MY",country_name:"Malaysia"},61:{a2:"AU",country_name:"Australia"},62:{a2:"ID",country_name:"Indonesia"},63:{a2:"PH",country_name:"Philippines"},64:{a2:"NZ",country_name:"New Zealand"},65:{a2:"SG",country_name:"Singapore"},66:{a2:"TH",country_name:"Thailand"},81:{a2:"JP",country_name:"Japan"},82:{a2:"KR",country_name:"Korea, Republic of"},84:{a2:"VN",country_name:"Vietnam"},86:{a2:"CN",country_name:"China"},90:{a2:"TR",country_name:"Turkey"},91:{a2:"IN",country_name:"India"},92:{a2:"PA",country_name:"Pakistan"},212:{a2:"MA",country_name:"Morocco"},216:{a2:"TN",country_name:"Tunisia"},230:{a2:"MU",country_name:"Mauritius"},233:{a2:"GH",country_name:"Ghana"},234:{a2:"NG",country_name:"Nigeria"},250:{a2:"RW",country_name:"Rwanda"},254:{a2:"KE",country_name:"Kenya"},255:{a2:"TZ",country_name:"Tanzania, United Republic of"},256:{a2:"UG",country_name:"Uganda"},258:{a2:"MZ",country_name:"Mozambique"},260:{a2:"ZM",country_name:"Zambia"},263:{a2:"ZW",country_name:"Zimbabwe"},264:{a2:"NA",country_name:"Namibia"},265:{a2:"MW",country_name:"Malawi"},267:{a2:"BW",country_name:"Botswana"},268:{a2:"SZ",country_name:"Swaziland"},351:{a2:"PT",country_name:"Portugal"},352:{a2:"LU",country_name:"Luxembourg"},353:{a2:"IE",country_name:"Ireland"},354:{a2:"IS",country_name:"Iceland"},356:{a2:"MT",country_name:"Malta"},358:{a2:"FI",country_name:"Finland"},359:{a2:"BG",country_name:"Bulgaria"},370:{a2:"LT",country_name:"Lithuania"},371:{a2:"LV",country_name:"Latvia"},372:{a2:"EE",country_name:"Estonia"},380:{a2:"UA",country_name:"Ukraine"},385:{a2:"HR",country_name:"Croatia"},386:{a2:"SI",country_name:"Slovenia"},420:{a2:"CZ",country_name:"Czech Republic"},852:{a2:"HK",country_name:"Hong Kong"},886:{a2:"TW",country_name:"Taiwan, Province of China"},972:{a2:"IL",country_name:"Israel"},996:{a2:"KG",country_name:"Kyrgyzstan"},99:{a2:"",country_name:"Infront (997)"}},e}();e.Countries=n}(Infront||(Infront={})),function(e){e.urlLanguage=null,e.urlList=null,e.urlTheme=null,function(e){e[e.COUNTRY=0]="COUNTRY",e[e.MARKETPLACE=1]="MARKETPLACE",e[e.REGION=2]="REGION",e[e.REGION_SECTOR=3]="REGION_SECTOR",e[e.COUNTRY_SECTOR=4]="COUNTRY_SECTOR",e[e.MARKETPLACE_SECTOR=5]="MARKETPLACE_SECTOR"}(e.UniverseType||(e.UniverseType={}));var t=function(){};e.BaseDataOptions=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.DataOptions=n;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.QuoteOptions=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i);e.QuoteListOptions=r;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subscribe=!0,t}return __extends(t,e),t.prototype.getSymbols=function(){return this.instruments?this.instruments:[]},t}(n);e.WireDataOptions=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.idsRankType=function(){var e=IDS.RankType.Turnover;switch(this.sortOrder){case InfrontConstants.SortOrder.TURNOVER_DESC:e=IDS.RankType.Turnover;break;case InfrontConstants.SortOrder.PCT_CHANGE_DESC:case InfrontConstants.SortOrder.ONE_W_PCT_CHANGE_DESC:case InfrontConstants.SortOrder.ONE_M_PCT_CHANGE_DESC:case InfrontConstants.SortOrder.ONE_Y_PCT_CHANGE_DESC:case InfrontConstants.SortOrder.YTD_PCT_CHANGE_DESC:e=IDS.RankType.Increase;break;case InfrontConstants.SortOrder.PCT_CHANGE_ASC:case InfrontConstants.SortOrder.ONE_W_PCT_CHANGE_ASC:case InfrontConstants.SortOrder.ONE_M_PCT_CHANGE_ASC:case InfrontConstants.SortOrder.ONE_Y_PCT_CHANGE_ASC:case InfrontConstants.SortOrder.YTD_PCT_CHANGE_ASC:e=IDS.RankType.Decrease;break;case InfrontConstants.SortOrder.CUST_1_DESC:e=IDS.RankType.CUST_1_DESC;break;case InfrontConstants.SortOrder.CUST_1_ASC:e=IDS.RankType.CUST_1_ASC;break;case InfrontConstants.SortOrder.CUST_2_DESC:e=IDS.RankType.CUST_2_DESC;break;case InfrontConstants.SortOrder.CUST_2_ASC:e=IDS.RankType.CUST_2_ASC;break;case InfrontConstants.SortOrder.CUST_3_DESC:e=IDS.RankType.CUST_3_DESC;break;case InfrontConstants.SortOrder.CUST_3_ASC:e=IDS.RankType.CUST_3_ASC;break;case InfrontConstants.SortOrder.CUST_4_DESC:e=IDS.RankType.CUST_4_DESC;break;case InfrontConstants.SortOrder.CUST_4_ASC:e=IDS.RankType.CUST_4_ASC;break;case InfrontConstants.SortOrder.CUST_5_DESC:e=IDS.RankType.CUST_5_DESC;break;case InfrontConstants.SortOrder.CUST_5_ASC:e=IDS.RankType.CUST_5_ASC;break;default:IDS.DEBUG_VERBOSE&&IDS.log("Invalid sort type: "+this.sortOrder)}return e},t}(n);e.RankedListOptions=s;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.FeedColumnsOptions=o;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.ReferenceDataOptions=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.ChainOptions=c;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.ChainsOptions=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.NewsItemsOptions=u;var h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.ToIds=function(){var t=new IDS.API.ServerAlert(this.alert_id);return t.type=IDS.FromMws.StrToAlertType(this.type),t.comment=this.comment,t.triggerType=IDS.FromMws.StrToAlertTriggerType(this.trigger_type),t.rule=e.InfrontAlertNode.toServerAlertNode(this.rule,IDS.FromMws.StrToAlertType(this.type)),t},n}(n);e.AlertsOptions=h;var p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.ToIds=function(){return e.InfrontAlert.toServerAlert(this.alert)},n}(n);e.ModifyAlertOptions=p;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.freeTextTagMustMatch=[IDS.RealtimeTags.SearchFreeText],t}return __extends(t,e),t}(n);e.SearchOptions=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.BrokerStatsOptions=g;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.TickSizesOptions=f;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.CalendarOptions=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.IntradayTradesOptions=y;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.InstrumentIntradayTradesOptions=b;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.InsertOrderOptions=T;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.ActivateOrderOptions=S;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.ModifyOrderOptions=C;var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.RiskLevelOptions=I;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.DeleteOrderOptions=_;var M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.GetAlgosOptions=M;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.GetCustomFieldsOptions=E;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(y);e.TradesByDaysOptions=w;var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.HistoricalTradesOptions=A;var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.streaming=!1,t}return __extends(t,e),t}(n);e.MarketActivityOptions=D;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.TradingPowerOptions=O;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.InfinancialsUrlOptions=k;var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.ComponentOptions=R;var N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(R);e.ChartOptions=N;var L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(R);e.EvolutionChartOptions=L;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.EtaOptions=P;var F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(R);e.UniverseOptions=F;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.FundamentalsOptions=x;var U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n);e.EurofinOptions=U;var B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isIdentical=function(e){if(!e)return!1;for(var t=!0,n=0,i=Object.keys(this);n<i.length;n++){var r=i[n],a=this[r];if(!e.hasOwnProperty(r)){t=!1;break}if(e[r]!==a){t=!1;break}}return t},t.prototype.populateRequest=function(e){e.response=this.response;for(var t=0,n=Object.keys(this);t<n.length;t++){var i=n[t],r=this[i];if(!InfrontUtil.isFunction(r)&&this.hasOwnProperty(i)){var a=i.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"");r instanceof Date?e[a]=InfrontUtil.ToCommonframeworkDate(r):InfrontUtil.isNumber(r)?e[a]=r.toString():e[a]=r}}return e},t}(n);e.CalculateOptions=B;var W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(B);e.CalculateSwapOptions=W;var H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(B);e.CalculateBondOptions=H;var V,G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.ControllerOptions);e.InfrontOptions=G,function(e){e[e.Unchanged=0]="Unchanged",e[e.Up=1]="Up",e[e.Down=2]="Down"}(V=e.ChangeDirection||(e.ChangeDirection={}));var z=function(){function e(e){this.instrument=e}return e.prototype.setDirection=function(e){e=InfrontUtil.roundToPrecision(e);var t=V.Unchanged;e>0?t=V.Up:e<0&&(t=V.Down);var n=t!==this.direction;return this.direction=t,n},e}();e.MarketActivityItem=z;var q=function(){function e(){this.items={},this.unbinds=[]}return e.prototype.addInstrument=function(e){var t=e.toString(":");this.items[t]||(this.items[t]=new z(e))},e.prototype.getInstruments=function(){for(var e=[],t=0,n=Object.keys(this.items);t<n.length;t++){var i=n[t];e.push(this.items[i].instrument)}return e},e.prototype.update=function(e,t){var n=this.items[e.toString(":")];return!!n&&n.setDirection(t)},e.prototype.unbind=function(){for(var e=0;e<this.unbinds.length;e++)this.unbinds[e]&&this.unbinds[e]()},e.prototype.get=function(){for(var e=Object.keys(this.items).length,t=0,n=0,i=0,r=Object.keys(this.items);i<r.length;i++){var a=r[i],s=this.items[a];s.direction===V.Up?t++:s.direction===V.Down&&n++}var o=e-t-n;return{up:t,down:n,unchanged:o,up_pct:Math.round(100/e*t),down_pct:Math.round(100/e*n),unchanged_pct:Math.round(100/e*o)}},e}();e.MarketActivity=q;var Y=function(){function t(n){this.language="",this.initialized=!1,this._idsTradingServer=null,this.options=n,this.options.baseCurrency||(this.options.baseCurrency=t.kDefaultBaseCurrency),this.controller=new e.Controller(this),this.watchListManager=new e.WatchListManager(this.controller,this),this.feedHandler=new e.FeedHandler(this.controller),this.tradingManager=new e.TradingManager(this),this.cache=new e.BindingCache,IDS.DEBUG_VERSION&&(IDS.log("%c  Infront Web Toolkit  ","background-color: #003a50; color: #fff; font-size: 18px; font-family: 'Segoe UI', 'Open Sans', Arial; padding: 2px;"),IDS.log("%cCommonWebFramework ver: "+e.LibraryConstants.kApplicationVersion,"color: #3ca9c9;  font-size: 14px; margin-bottom: 15px;"))}return t.prototype.setTradingServer=function(e){this._idsTradingServer=e},t.prototype.getTradingServer=function(){return this._idsTradingServer},t.prototype.getBaseCurrency=function(){return this.options.baseCurrency},t.prototype.getCurrencyConverter=function(){return this.currencyConverter||(this.currencyConverter=new e.CurrencyConverter(this,!1)),this.currencyConverter},t.prototype.publishEvent=function(e){this.controller.publishEvent(e)},t.prototype.getCache=function(){return this.cache},t.prototype.clearIndexedDb=function(){},t.prototype.getFeedHandler=function(){return this.feedHandler},t.prototype.setLoginInformation=function(e){InfrontUtil.mergeRecursive(this.options,e)},t.prototype.getTradingRoutings=function(){return this.loginServer().getTradingRoutes(!0)},t.prototype.getCurrentTGW=function(){var e="";return this.getTradingServer()&&(e=this.loginServer().getTradingRouteName(this.getTradingServer().ps)),e},t.prototype.getSidPidMatches=function(){return this.controller.getSidPidMatches()},t.prototype.getTradableFeeds=function(){return this.loginServer().getTradableFeeds()},t.prototype.getFeedExchangeCode=function(e){return this.loginServer().getFeedExchangeCode(e)},t.prototype.tradingLogin=function(t,n,i,r,a){var s=new e.PidSid(t,n);this.getTradingServer()&&this.getTradingServer().ps.isPidSid(t,n)||(this.getTradingServer()&&(this.getTradingServer().clearOutstandingRequests(),this.serverPool.Dispose(this.getTradingServer().ps,this.getTradingServer().serverType,this,"tradingLogin")),this.setTradingServer(this.streamingManager.getServerPool().GetTrading(s,this,this.streamingManager))),this.controller.tradingServer=this.getTradingServer(),this.controller.startTradingLogin(t,n,i,r,a),this.getTradingServer().Register(this.tradingManager)},t.prototype.cancelTradingLogin=function(){this.getTradingServer()&&(this.getTradingServer().clearOutstandingRequests(),this.serverPool.Dispose(this.getTradingServer().ps,this.getTradingServer().serverType,this,"cancelTradingLogin"),this.setTradingServer(void 0),this.controller.tradingServer=void 0)},t.prototype.tradingLogout=function(){this.tradingManager.stopPortfolioPolling(),this.controller.tradingLogout(),this.getTradingServer().unsubscribeAll(),this.controller.tradingDisconnected(),this.serverPool.Dispose(this.getTradingServer().ps,this.getTradingServer().serverType,this,"tradingLogout"),this.setTradingServer(void 0),this.controller.tradingServer=void 0},t.prototype.getTradingManager=function(){return this.tradingManager},t.prototype.getTradingFeatures=function(){return this.controller.getTradingFeatures()},t.prototype.init=function(){this.initialized||(this.initialized=!0,this.controller.init(this.options),this.streamingManager=this.controller.streamingManager,this.instrumentManager=new e.InstrumentManager(this.controller.getMessageService(),this),this.serverPool=this.streamingManager.getServerPool(),this.instrumentManager.SetIDS(this.streamingManager))},t.prototype.loginServer=function(){return this.streamingManager.getServerPool().login},t.prototype.logout=function(){this.controller.logOut()},t.prototype.registerEventObserver=function(e,t){this.controller.registerEventObserver(e,t)},t.prototype.unregisterEventObserver=function(e,t){this.controller.unregisterEventObserver(e,t)},t.prototype.registerTradingConnectedEventObserverWithCallbackIfConnected=function(t){var n=this;this.getTradingStatus()==e.InfrontStatus.Connected&&InfrontUtil.setZeroTimeout(function(){t(n.controller.tradingConnectedEventFromStorage())}),this.registerEventObserver(e.TradingConnectedEvent.kEventName,t)},t.prototype.registerWatchlistInstrumentAddedObserver=function(t){this.registerEventObserver(e.WatchlistInstrumentAddedEvent.kEventName,t)},t.prototype.registerWatchlistInstrumentRemovedObserver=function(t){this.registerEventObserver(e.WatchlistInstrumentRemovedEvent.kEventName,t)},t.prototype.getStatus=function(){return this.controller.getStatus()},t.prototype.getTradingStatus=function(){return this.controller.getTradingStatus()},t.prototype.getTradingSession=function(){return this.controller.getTradingSession()},t.prototype.isStreaming=function(){return this.controller.isStreaming()},t.prototype.cleanInstrumentsArgument=function(t){for(var n=InfrontUtil.isArray(t)?t:[t],i=[],r=0;r<n.length;r++)e.Instrument.isValid(n[r])&&i.push(n[r]);return i},t.prototype.instrumentInfoPromise=function(t,n){var i=this;return new Promise(function(r,a){var s=i.streamingManager.getSymbol(t,n,!0);if(s||a("Symbol not found: "+t.toString()+":"+n),s.hasStaticContent)r(s.ToMwsInstrument());else{var o=s.getValue(IDS.RealtimeTags.SymbolType,!0),l=e.BindingFactory.createAsyncGetBinding(function(e){InfrontUtil.setZeroTimeout(function(){r(s.ToMwsInstrument())})});o.observe(l,e.InitialUpdate.Asynchronous);var c=[];c.push(new e.Instrument(t,n)),i.streamingManager.GetSymbols(c,new IDS.SymbolContent(IDS.SymbolContentEnum.StaticData),!1)}})},t.prototype.instrumentInfo=function(t,n,i){var r,a;return InfrontUtil.isObject(t)?(r=t,a=n):(r=new e.Instrument(t,n),a=i),this.getSymbols([r],["INSTRUMENT_TYPE"],function(e){if(e instanceof IDS.Symbol){IDS.DEBUG_INSTRUMENT_INFO&&IDS.log("Instrument info:",e.fs.toString(),e.inspect());var t=e.ToMws();a.onData([t])}},0,!1,!0)},t.prototype.companyDataPromise=function(e,t){var n=this;return new Promise(function(i,r){var a=n.serverPool.login.getPidSid(e,IDS.ServiceType.Historical);if(a){var s={ResponseCompanyData:function(e,t){i(t.primary)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};n.serverPool.GetHistory(a,n,"HistPerformance  - feed: "+e.toString()).GetCompanyData(e,t,s)}else r("Could not find historical server for this data")})},t.prototype.fundamentalDataPromise=function(e,t,n,i){var r=this;return new Promise(function(a,s){var o=r.serverPool.login.getPidSid(e,IDS.ServiceType.Historical);if(o){var l={ResponseCompanyData:function(e,t){a(t.primary)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};r.serverPool.GetHistory(o,r,"HistPerformance  - feed: "+e.toString()).GetFundamentalData(e,t,n,i,l)}else s("Could not find historical server for this data")})},t.prototype.getTrades=function(t,n,i,r){for(var a=this,s=[],o=function(){},l=0,c=t;l<c.length;l++){var d=c[l];if(i){var u=new IDS.CommonFrameworkResponse;u.Reply=function(e,t){t.ToMws(),a.instrumentManager.instrumentUpdate({md_instrument_update:t}),n&&n(t)};var h=new IDS.Realtime.TimeSeriesRequest;h.instrument=new e.Instrument(d.feed,d.ticker),h.limitNumberOfTrades=i,this.streamingManager.GetTimeSeries(h,null,u)}var p=e.CacheKeyFactory.createTradesArrayKey(d);this.cache.createArray(p,null,function(t,n){return n[e.MWSConstants.seq_id]?n[e.MWSConstants.seq_id]-t[e.MWSConstants.seq_id]:n.dateTime-t.dateTime},!1),r&&s.push(d)}if(r){for(var m=function(e){a.instrumentManager.instrumentUpdate({md_instrument_update:e})},g=0,f=s;g<f.length;g++)d=f[g],this.streamingManager.MWSRegisterTradesObserver(d.feed,d.ticker,m,n);o=function(){for(var e=0,t=s;e<t.length;e++){var i=t[e];a.streamingManager.MWSUnregisterTradesObserver(i.feed,i.ticker,n)}}}return o},t.prototype.getOrderbook=function(e,t){for(var n=[],i=0,r=e;i<r.length;i++){var a=r[i];n.push(this.streamingManager.MWSOrderbook(a.feed,a.ticker,function(e){t&&t(e)}))}return this.instrumentManager.createOrderbookCache(e),function(){for(var e=0,t=n;e<t.length;e++){var i=t[e];i&&i()}}},t.prototype.setJsonSymbolValue=function(e,t,n,i,r){if(void 0===r&&(r=""),null==i||InfrontUtil.isPrimitive(i)||InfrontUtil.isArray(i))this.streamingManager.setSymbolValue(e,t,[n],i);else if(InfrontUtil.isObject(i))for(var a in i)if(i.hasOwnProperty(a)){var s=r.length>0?r+"/"+a:a;this.setJsonSymbolValue(e,t,a,i[a],s)}},t.prototype.getFundDetails=function(e,t){for(var n=this,i=0,r=null,a=0,s=e;a<s.length;a++){var o=s[a];if(o.feed!=i&&(i=o.feed,r=this.loginServer().getPidSid(i,IDS.ServiceType.AuxiliaryData)),r){var l=this.streamingManager.getSymbol(i,o.ticker,!0);if(l&&!l.fundDetailsRequested){var c=this.serverPool.GetMorningstar(r,this,"getFundDetails");l.fundDetailsRequested=!0;var d=new IDS.CommonFrameworkResponse;d.Reply=function(e,t){if(t&&t.hasOwnProperty("blob")){var i=JSON.parse(t.blob);for(var r in i)i.hasOwnProperty(r)&&n.setJsonSymbolValue(t.feed,t.symbol,r,i[r],r)}},c.GetJson(i,o.ticker,o.isin,o.currency,this.language,d),this.serverPool.Dispose(r,c.serverType,this,"getFundDetails")}}}},t.prototype.getSymbols=function(t,n,i,r,a,s){var o=this;void 0===s&&(s=!1);for(var l,c,d=!1,u=IDS.SymbolContentEnum.StaticData,h=0,p=n;h<p.length;h++){var m=p[h];if(IDS.FromMws.HistPerformanceTag(m)){u|=IDS.SymbolContentEnum.HistPerformance;break}switch(m){case e.QuoteFields.TRADES:u|=IDS.SymbolContentEnum.Trades;break;case e.QuoteFields.ORDERBOOK:u|=IDS.SymbolContentEnum.Mbl;break;case e.QuoteFields.FUND_DETAILS:d=!0;break;default:u|=IDS.SymbolContentEnum.Basic}}if(u&IDS.SymbolContentEnum.Trades&&(l=this.getTrades(t,i,r,a)),i&&u!=IDS.SymbolContentEnum.Trades)for(var g=0,f=t;g<f.length;g++){var v=f[g];this.streamingManager.MWSRegisterObserver(v.feed,v.ticker,i)}u&IDS.SymbolContentEnum.Mbl&&(c=this.getOrderbook(t,i)),u&IDS.SymbolContentEnum.Mbo&&(c=this.getOrderbook(t,i)),d&&this.getFundDetails(t,i);for(var y=0,b=t;y<b.length;y++){var T=b[y];if(u&IDS.SymbolContentEnum.HistPerformance){var S=this.streamingManager.getSymbol(T.feed,T.ticker,!0);S?this.streamingManager.getHistPerformance(S):IDS.DEBUG_NO_ACCESS_TO_FEED&&IDS.log("No access to:",T.feed,T.ticker,T)}}return this.streamingManager.GetSymbols(t,new IDS.SymbolContent(u),a,s||!this.controller.isStreaming()),function(){l&&l(),c&&c();for(var e=0,r=t;e<r.length;e++){var a=r[e];o.streamingManager.MWSUnregisterObserver(a.feed,a.ticker,i)}o.unsubscribe(t,n,i)}},t.prototype.subscribe=function(e,t,n,i,r){void 0===n&&(n=!1),void 0===r&&(r=0);var a=this.cleanInstrumentsArgument(e);return this.getSymbols(a,t,i,r,this.isStreaming())},t.prototype.unsubscribe=function(t,n,i){for(var r=this.cleanInstrumentsArgument(t),a=0,s=0,o=n;s<o.length;s++)switch(o[s]){case e.QuoteFields.TRADES:a|=IDS.SymbolContentEnum.Trades;break;case e.QuoteFields.ORDERBOOK:a|=IDS.SymbolContentEnum.Mbl;break;default:a|=IDS.SymbolContentEnum.Basic}this.streamingManager.UnsubscribeSymbols(r,new IDS.SymbolContent(a))},t.prototype.testSnapshots=function(e,t){var n=this;return new Promise(function(i,r){var a=[],s=[e],o=e.feed,l=new IDS.SymbolContent(IDS.SymbolContentEnum.Basic),c=n.loginServer().getPidSid(o,IDS.ServiceType.Realtime);c||(c=n.loginServer().getPidSid(o,IDS.ServiceType.Delayed)),Array.isArray(t)&&t.length||(t=n.loginServer().getHosts(c));for(var d=[],u=function(r){IDS.overrideHost=t[r];var s=new IDS.Realtime.RealtimeServer(c,n.serverPool,!1),o={lowLevelData:function(n,o,l){if(n.segment==IDS.SegmentInfo.Last){var c=s.getDbSymbol(e.feed,e.ticker,!0),d={values:c.data,host:t[r],message:"OK"};a.push(d),c.reset(),a.length==t.length&&i(a),s.destroyBase()}},lowLevelError:function(e,n,o){var l={values:{},host:t[r],message:o};a.push(l),a.length==t.length&&i(a),s.destroyBase(),IDS.DEBUG_VERBOSE&&IDS.log("LowLevelError",o)}};s.conn.Register(o),d.push(s)},h=0;h<t.length;h++)u(h);if(d.length>0){var p=d[0].GetDbSymbol(e.feed,e.ticker,!0);p.data={};for(var m=0,g=d;m<g.length;m++){var f=g[m];p.content=0,f.GetSymbols(s,l,!1)}}})},t.prototype.snapshot=function(e,t,n,i,r,a){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===a&&(a=!1);var s=this.cleanInstrumentsArgument(e);this.instrumentManager.snapshot(s,t,n,i,r,a)},t.prototype.rankedList=function(e,t){var n={ResponseRanking:function(e,n){n.toMws(),t.onData(n.items)},ResponseError:function(e){InfrontUtil.errorLogCallback(500,e.errorMsg)}};this.streamingManager.GetRanking(e,t.idsRankType(),n,!1)},t.prototype.rankedListSubscription=function(e,t){var n=t.idsRankType(),i={ResponseRanking:function(e,n){t.onData(n.items)},OnRealtimeRanking:function(i,r){r.type==n&&r.instrument.feed==e&&t.onData([r])},ResponseError:function(e){InfrontUtil.errorLogCallback(500,e.errorMsg)}};return this.streamingManager.GetRanking(e,n,i,!0,i)},t.prototype.chain=function(t,n,i){if(void 0!==t&&void 0!==n&&InfrontUtil.isObject(i)){var r=this.loginServer().getPidSidForFeedAndProperty(IDS.GlobalChainsFeed,e.FeedProperty.Chains);if(r){var a=this.serverPool.GetChain(r,this),s=new IDS.CommonFrameworkResponse;s.Reply=function(e,t){if(e.type!==IDS.ResponseEnum.Error){for(var n=[],r=0,a=t.items;r<a.length;r++){var s=a[r];n.push(s.instrument)}i.onData({items:n})}else i.onError(404,e.errorMsg)},a.RequestChainContent(n,t,i.provider,null,s),this.serverPool.Dispose(r,a.serverType,this,"model.chain")}else i.onError(404,"Could not find chain server for feed "+n.toString())}},t.prototype.chains=function(t,n){var i=this.loginServer().getPidSidForFeedAndProperty(IDS.GlobalChainsFeed,e.FeedProperty.Chains);if(i){var r=this.serverPool.GetChain(i,this);if(r){var a={ResponseChainList:function(t,i){var r=i.items,a=[];if(r)for(var s=function(t,n){for(var i=t.length,r=0;r<t.length;r++)if(t[r].label==n)return r;var a={label:n};return a[e.MWSConstants.nodes]=[],t.push(a),i},o=function(e){var t=e.split(".");if(t.length>0&&InfrontUtil.isNumeric(t[0].trim())){for(var n="",i=1;i<t.length;i++)n+=t[i];return{description:n.trim(),numeric:Number(t[0].trim())}}return{description:e.trim(),numeric:null}},l=0,c=r;l<c.length;l++){var d=c[l],u=d.description,h="",p=u.split("|");if(p.length>0){h=(T=o(p[0])).description;var m,g,f=T.description,v=s(a,f);a[v].sortField=T.numeric;for(var y=a[v][e.MWSConstants.nodes],b=1;b<p.length-1;b++)h+=" | "+(m=o(p[b])).description,y[g=s(y,f=m.description)].sortField=m.numeric,y=y[g][e.MWSConstants.nodes];if(p.length-1>0)h+=" | "+(m=o(p[p.length-1])).description,delete y[g=s(y,f=m.description)][e.MWSConstants.nodes],y[g].chain=d,y[g].chain.label=f,y[g].chain.fullPath=h,y[g].chain.sortField=m.numeric;else delete a[v][e.MWSConstants.nodes],d.label=f,d.fullPath=h,d.sortField=T.numeric,a[v].chain=d}else{var T=o(u);d.label=T.description,d.fullPath=T.description,d.sortField=T.numeric,a.push({chain:d})}}n.onData(a)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};r.RequestChains(t,a),this.serverPool.Dispose(i,r.serverType,this,"model.chains")}}else n.onError(404,"Could not find chain server for feed "+t.toString())},t.prototype.feedColumns=function(e){var t=new IDS.CommonFrameworkResponse;t.Reply=function(t,n){e.onData(n.feedColumns)},this.loginServer().getFeedColumns(e.feedNumber,t)},t.prototype.monitorServerConnection=function(e,t){var n=this,i=function(){},r=this.loginServer().getPidSid(e,IDS.ServiceType.Realtime);if(r||(r=this.loginServer().getPidSid(e,IDS.ServiceType.Delayed)),r){this.realtimeTestServer||(this.realtimeTestServer=this.streamingManager.getServerPool().GetRealtime(r,this)),this.realtimeTestServer.conn.monitorServerConnection=!0;var a={OnRealtimePing:function(){t()}};this.realtimeTestServer.observe(a),i=function(){n.realtimeTestServer.unbind(a)}}return i},t.prototype.testReferenceData=function(e){var t,n=this;return IDS.DEBUG&&(t=new Promise(function(t,i){var r=[],a=new IDS.SymbolContent(IDS.SymbolContentEnum.Basic),s=n.loginServer().getPidSid(e,IDS.ServiceType.Realtime);if(s||(s=n.loginServer().getPidSid(e,IDS.ServiceType.Delayed)),s){for(var o=n.loginServer().getHosts(s),l=[],c=function(i){IDS.overrideHost=i;var a=new IDS.Realtime.RealtimeServer(s,n.serverPool,!1);if(a){var c={lowLevelData:function(n,s,l){if(n.segment==IDS.SegmentInfo.Last){var c=a.GetDbFeed(e,!0),d={},u=Object.keys(c.syms).length;for(var h in c.syms)d[h]=c.syms[h].data;c.syms={};var p={host:i,symbolCount:u,symbolData:d,message:"OK"};r.push(p),r.length==o.length&&t(r),a.destroyBase()}},lowLevelError:function(e,n,s){var l={host:i,symbolCount:0,symbolData:[],message:s};r.push(l),r.length==o.length&&t(r),a.destroyBase(),IDS.DEBUG_VERBOSE&&IDS.log("LowLevelError",s)}};a.bypassStaticCache=!0,a.conn.Register(c),l.push(a)}},d=0,u=o;d<u.length;d++)c(u[d]);if(l.length>0){var h=l[0].GetDbFeed(e,!0);if(h)for(var p=0,m=l;p<m.length;p++){var g=m[p];h.content=IDS.SymbolContentEnum.None,g.GetFeeds([e],a,!1)}}}})),t},t.prototype.referenceData=function(t){if(t.feedNumber||t.instrument){if(t.feedNumber){var n=null;n=this.streamingManager.GetFeedSymbols(t.feedNumber,function(i){n&&n();var r=[];for(var a in i){var s=i[a],o=new e.Instrument(s.fs.feed,s.fs.ticker);o.full_name=s.getValueOrNull(IDS.RealtimeTags.FullName),o.isin=s.getValueOrNull(IDS.RealtimeTags.ISIN),o.currency=s.getValueOrNull(IDS.RealtimeTags.Currency),o.issuer=s.getValueOrNull(IDS.RealtimeTags.Issuer),o.issuer_full_name=s.getValueOrNull(IDS.RealtimeTags.IssuerFullName),o.under_feed=s.getValueOrNull(IDS.RealtimeTags.UnderlyingFeed),o.under_ticker=s.getValueOrNull(IDS.RealtimeTags.UnderlyingTicker),o.segment=s.getValueOrNull(IDS.RealtimeTags.PrimarySegment),o.segment_description=s.getValueOrNull(IDS.RealtimeTags.PrimarySegmentDescription),o.instrument_type=IDS.Symbol.SymbolTypeToStr(s.getValueOrNull(IDS.RealtimeTags.SymbolType)),o.instrument_subtype=IDS.Symbol.SymbolSubTypeToStr(s.getValueOrNull(IDS.RealtimeTags.SymbolSubType)),o.symbol_status=s.getValueOrNull(IDS.RealtimeTags.SymbolStatusText),o.is_tradable=s.getValueOrNull(IDS.RealtimeTags.IsTradable),s.getValueOrNull(IDS.RealtimeTags.Expiry)&&(o.expiry_date=InfrontUtil.getApiDateString(InfrontUtil.DateFromDateNu(s.getValueOrNull(IDS.RealtimeTags.Expiry)))),r.push(o)}t.onData({instruments:r,symbols:i})})}if(t.instrument)return this.streamingManager.GetSymbols([t.instrument],new IDS.SymbolContent(IDS.SymbolContentEnum.Basic),!1)}},t.prototype.newsSources=function(e){e.onData(this.loginServer().getNewsSources())},t.prototype.getAlertServer=function(e){if(!this.alertsServer){var t=this.loginServer().getFirstPidSidForServiceType(IDS.ServiceType.Alert);t&&(this.alertsServer=this.serverPool.GetAlert(t,this,e))}return this.alertsServer},t.prototype.alertsData=function(e){var t=this.getAlertServer("alertsData");if(t){var n=new IDS.CommonFrameworkResponse;n.Reply=function(t,n){IDS.DEBUG_ALERTS_CS&&IDS.log("getAlerts response:",n),e.onData(n)},t.getAlerts(null,n)}},t.prototype.addAlert=function(e){var t=this.getAlertServer("addAlert");if(t){var n=new IDS.CommonFrameworkResponse;n.Reply=function(t,n){IDS.DEBUG_ALERTS_CS&&IDS.log("addAlert response:",n),e.onData(n)},e.alert_id=InfrontUtil.makeUUID(),t.addAlert(e.ToIds(),null,n)}},t.prototype.deleteAlert=function(e){var t=this.getAlertServer("deleteAlert");if(t){var n=new IDS.CommonFrameworkResponse;n.Reply=function(t,n){IDS.DEBUG_ALERTS_CS&&IDS.log("deleteAlert response:",n),e.onData(n)},t.deleteAlert(e.index,e.alert_id,null,n)}},t.prototype.modifyAlert=function(e){var t=this.getAlertServer("modifyAlert");if(t){var n=new IDS.CommonFrameworkResponse;n.Reply=function(t,n){IDS.DEBUG_ALERTS_CS&&IDS.log("modifyAlert response:",n),e.onData(n)},t.modifyAlert(e.ToIds(),null,n)}},t.prototype.alerts=function(t){var n=function(){},i=this.getAlertServer("subscribe alerts");if(i){var r={StreamingAlertUpdate:function(t,n){IDS.DEBUG_ALERTS_CS&&IDS.log("Alert subscription update:",n),e.EventCallbackMap.eventMap.publish(new e.AlertsChangedEvent)},StreamingAlertEvent:function(e,n){IDS.DEBUG_ALERTS_CS&&IDS.log("Alert subscription event:",n),t.onData(n)},ResponseError:function(e){IDS.DEBUG_VERBOSE&&IDS.log(e.errorMsg)}};i.subscribeAlerts(r),n=function(){i.unsubscribeAlerts(r)}}return n},t.prototype.addAlertDevice=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i="default");var r=this.getAlertServer("addAlertDevice");if(r){var a=new IDS.CommonFrameworkResponse;a.Reply=function(e,t){IDS.DEBUG_ALERTS_CS&&IDS.log("addAlertDevice response:",t)},e==IDS.AlertDeviceType.Apns&&(i="default"),r.addOrDeleteAlertDevice(e,t,n,i,null,a)}},t.prototype.getEmailDevice=function(){var e=this;return this.emailDevicePromise||(this.emailDevicePromise=new Promise(function(t,n){var i=e.getAlertServer("getEmailDevice");if(i){var r=new IDS.CommonFrameworkResponse;r.Reply=function(e,i){e.type==IDS.ResponseEnum.Ok?t(i):n(e.errorMsg)},i.getEmailDevice(null,r)}})),this.emailDevicePromise},t.prototype.setEmailDevice=function(e,t){this.addAlertDevice(IDS.AlertDeviceType.Email,e,t)},t.prototype.getNewsServer=function(e){return this.newsServer||(this.newsServer=new IDS.API.News.NewsManager(this.serverPool,e)),this.newsServer},t.prototype.newsItems=function(e){var t=this.getNewsServer("get newsItems");if(t){var n={ResponseHeadline:function(n,i){t.ResponseHeadline(n,i),e.feedNumbers&&InfrontUtil.isArray(e.feedNumbers)&&t.clearPending(e.feedNumbers),e.onData(i.ToMws())},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}},i=new IDS.Realtime.HeadlineRequestParams;if(i.maxItems=e.maxItems?e.maxItems:50,i.date=e.startTime,i.limitDate=e.endTime,i.newsIdHint=e.newsIdHint,e.feedNumbers){for(var r=0,a=e.feedNumbers;r<a.length;r++){var s=a[r];s>0&&i.feeds.push(s)}t.GetFeedsHeadlines(i,n,null,!1)}else if(e.instrument||e.instruments){if(e.instrument&&i.symbols.push(e.instrument),e.instruments)for(var o=0,l=e.instruments;o<l.length;o++){var c=l[o];i.symbols.push(c)}t.GetSymbolHeadlines(i,n,null,!1)}else e.onData([])}},t.prototype.subscribeNewsItems=function(e){var t=this.getNewsServer("subscribeNewsItems");if(t){var n={OnNewsHeadline:function(t){e.onData(t.ToMws())},OnNewsHeadlineMulti:function(t){for(var n=[],i=0,r=t;i<r.length;i++){var a=r[i];n.push(a.ToMws())}IDS.DEBUG_VERBOSE&&IDS.log("Multi headlines:",n),e.onData(n)},OnNewsReset:function(t,n){IDS.DEBUG_VERBOSE&&IDS.log("News reset",t,n),e.onData([])}};if(e.feedNumbers)return t.SubscribeFeeds(e.feedNumbers,n);if(e.instrument||e.instruments){var i=[];if(e.instrument&&i.push(e.instrument),e.instruments)for(var r=0,a=e.instruments;r<a.length;r++){var s=a[r];i.push(s)}return t.SubscribeSymbols(i,n)}}},t.prototype.newsItem=function(e,t,n,i){var r=new IDS.CommonFrameworkResponse;r.Reply=function(e,t){t&&i.onData({body:t.ToMws()})},new IDS.API.News.NewsManager(this.serverPool).GetStory(n,1,r)},t.prototype.wireData=function(e){var t=function(){},n=new IDS.Wire.WireRequestOptions;if(n.instruments=e.getSymbols(),n.thresholdMotionDetection=e.thresholdMotionDetection,n.thresholdNews=e.thresholdNews,!this.wireServer){var i=this.loginServer().getFirstPidSidForServiceType(IDS.ServiceType.Wire);if(!i)return IDS.log("% No access to Wire server","color: #f60; font-size: 14px;"),t;this.wireServer=this.serverPool.GetWire(i,this)}var r={ResponseWireData:function(t,n){e.onData(n)},ConnectionStatus:function(t,n){e.onConnectionStatus(n)},ResponseError:function(t){e.onError(t.type,t.errorMsg)}};return this.wireServer.GetWire(n,r,e.subscribe)},t.prototype.lookupInstrument=function(e,t){var n=new m;n.useAccesses=!0,n.onData=function(e){var n=e;n.length>0&&n[0].hasOwnProperty("type")&&"INSTRUMENT"==n[0].type?t.onData(n[0].instrument):t.onError(404,"Not found")},n.onError=t.onError,this.search(e,n)},t.prototype.search=function(t,n){if(!n.infinancialsSearch&&this.streamingManager){var i=void 0,r=void 0,a=this.loginServer().getSymbolSearchFeeds();if(a.length>0&&(i=a[0],this.searchServer||(this.searchServer=this.serverPool.GetSearch(i,this,"model.search")),r=this.searchServer),r){var s,o=[],l=void 0,c=n.maxResults?n.maxResults:30,d=this.loginServer().getAccessFeeds(i);if(n.itemTypes){l=0;for(var u=0,h=n.itemTypes;u<h.length;u++)switch(g=h[u]){case"INSTRUMENT":l|=IDS.ItemType.Symbol;break;case"CHAIN":l|=IDS.ItemType.Chain;break;case"COMPANY":l|=IDS.ItemType.Company;break;case"SCREEN":l|=IDS.ItemType.Screen;break;default:IDS.DEBUG_VERBOSE&&IDS.log("unknown ItemType:",g)}}if(n.instrumentTypes){s=0;for(var p=0,m=n.instrumentTypes;p<m.length;p++){var g=m[p];s|=e.Instrument.InstrumentDataType(g)}}var f=function(e){var t=new IDS.SearchSymbol;if(t.maxItems=c,t.feed=d,n.sector&&(t.useTag=[IDS.RealtimeTags.InfrontSector],t.useTagClearsPrev=!1),null!=l&&(t.itemType=l),s&&(t.symbolType=s),InfrontUtil.isString(e))t.freeText=e,n.freeTextTagMustMatch&&(t.freeTextTagMustMatch=n.freeTextTagMustMatch),n.feeds&&(t.feed=n.feeds);else if(n.feeds)t.feed=n.feeds;else{var i=[e];t.feed=[];for(var r=0,a=i;r<a.length;r++){var o=a[r];t.feed.push(o.feed),t.symbol=o.ticker}}return t};if(InfrontUtil.isArray(t))for(var v=0,y=t;v<y.length;v++){var b=y[v];o.push(f(b))}else o.push(f(t));if(o.length>0){var T=new IDS.CommonFrameworkResponse;T.Reply=function(e,t){e.type==IDS.ResponseEnum.Error?n.onError(404,e.errorMsg):n.onData(t.items)},IDS.SearchServer.Search(this.searchServer,o,null,T)}}else n.onError(404,"Could not find search server")}else{var S=n.infinancialsSearch?new e.SearchRequest:new e.InstrumentSearchRequest;InfrontUtil.isString(t)?S.query=t:S.instruments=[t],n.instrumentTypes&&(S.instrument_types=n.instrumentTypes),n.maxResults&&(S.max_results=n.maxResults),n.itemTypes&&(S.item_types=n.itemTypes),n.feeds&&(S.feeds=n.feeds),n.ticker&&(S.ticker=n.ticker),n.useAccesses&&(S.use_accesses=n.useAccesses);var C=new e.RequestOptions;C.onError=n.onError,C.onSuccess=function(e){e.hasOwnProperty("items")?n.onData(e.items):e.hasOwnProperty("results")?n.onData(e.results):n.onData([])}}},t.prototype.underlyings=function(e,t,n,i){var r,a,s=this.loginServer().getSymbolSearchFeeds();if(s.length>0&&(r=s[0],this.searchServer||(this.searchServer=this.serverPool.GetSearch(r,this,"model.underlyings")),a=this.searchServer),a){var o=new IDS.SearchSymbol;o.feed=[e],o.useTag=[IDS.RealtimeTags.UnderlyingFeed,IDS.RealtimeTags.UnderlyingTicker,IDS.RealtimeTags.UnderlyingDescr],""===t?o.emptyTags=[IDS.RealtimeTags.Issuer]:t&&(o.issuer=t),""===n?(o.emptyTags||(o.emptyTags=[]),o.emptyTags.push(IDS.RealtimeTags.IssuerFullName)):n&&(o.issuerFullName=n);var l=new IDS.CommonFrameworkResponse;l.Reply=function(e,t){e.type==IDS.ResponseEnum.Error?i.onError(404,e.errorMsg):i.onData(t.items)},IDS.SearchServer.Search(this.searchServer,o,null,l)}else i.onError(404,"Could not find search server")},t.prototype.issuers=function(e,t,n){var i,r,a=this.loginServer().getSymbolSearchFeeds();if(a.length>0&&(i=a[0],this.searchServer||(this.searchServer=this.serverPool.GetSearch(i,this,"model.issuers")),r=this.searchServer),r){var s=new IDS.SearchSymbol;s.feed=[e],t&&(s.option=new IDS.FindOptionPart,s.option.optionSearch=!1,s.option.underTicker=t),s.useTag=[IDS.RealtimeTags.Issuer,IDS.RealtimeTags.IssuerFullName];var o=new IDS.CommonFrameworkResponse;o.Reply=function(e,t){e.type==IDS.ResponseEnum.Error?n.onError(404,e.errorMsg):n.onData(t.items)},IDS.SearchServer.Search(this.searchServer,s,null,o)}else n.onError(404,"Could not find search server")},t.prototype.expiryDates=function(e,t,n,i){var r,a,s=this.loginServer().getSymbolSearchFeeds();if(s.length>0&&(r=s[0],this.searchServer||(this.searchServer=this.serverPool.GetSearch(r,this,"model.search")),a=this.searchServer),a){var o=new IDS.SearchSymbol;o.feed=[e],o.option=new IDS.FindOptionPart,o.option.underFeed=t,o.option.underTicker=n,o.useTag=[IDS.RealtimeTags.Expiry,IDS.RealtimeTags.ExpiryType,IDS.RealtimeTags.SymbolSubType];var l=new IDS.CommonFrameworkResponse;l.Reply=function(e,t){e.type==IDS.ResponseEnum.Error?i.onError(404,e.errorMsg):i.onData(t.items)},IDS.SearchServer.Search(this.searchServer,o,null,l)}else i.onError(404,"Could not find search server")},t.prototype.underlyingOptions=function(t,n,i,r,a,s,o){var l,c,d=this.loginServer().getSymbolSearchFeeds();if(d.length>0&&(l=d[0],this.searchServer||(this.searchServer=this.serverPool.GetSearch(l,this,"model.search")),c=this.searchServer),c){var u=[],h=!1;if(r&&r.length>0){for(var p=0,m=r;p<m.length;p++){var g=m[p];(y=new IDS.SearchSymbol).feed=[t],y.option=new IDS.FindOptionPart,y.option.underFeed=n,y.option.underTicker=i,y.option.expiry=g,y.symbolType=s,y.symbolSubType=e.SymbolSubType.OptionPut,u.push(y),(y=new IDS.SearchSymbol).feed=[t],y.option=new IDS.FindOptionPart,y.option.underFeed=n,y.option.underTicker=i,y.option.expiry=g,y.symbolType=s,y.symbolSubType=e.SymbolSubType.OptionCall,u.push(y)}h=!0}if(a&&a.length>0){for(var f=0,v=a;f<v.length;f++){var y;g=v[f],(y=new IDS.SearchSymbol).feed=[t],y.option=new IDS.FindOptionPart,y.option.underFeed=n,y.option.underTicker=i,y.option.expiry=g,y.symbolType=s,y.symbolSubType=e.SymbolSubType.OptionForward,u.push(y),(y=new IDS.SearchSymbol).feed=[t],y.option=new IDS.FindOptionPart,y.option.underFeed=n,y.option.underTicker=i,y.option.expiry=g,y.symbolType=s,y.symbolSubType=e.SymbolSubType.OptionFuture,u.push(y)}h=!0}if(h){var b=new IDS.CommonFrameworkResponse;b.Reply=function(e,t){e.type==IDS.ResponseEnum.Error?o.onError(404,e.errorMsg):o.onData(t.items)},IDS.SearchServer.Search(this.searchServer,u,null,b)}}else o.onError(404,"Could not find search server")},t.prototype.feedInstruments=function(e,t,n,i,r,a,s,o,l,c){var d,u,h=this.loginServer().getSymbolSearchFeeds();if(h.length>0&&(d=h[0],this.searchServer||(this.searchServer=this.serverPool.GetSearch(d,this,"model.search")),u=this.searchServer),u){var p=function(){var a=new IDS.SearchSymbol;return a.feed=[e],a.useTagClearsPrev=!1,o||(n&&t?(a.option=new IDS.FindOptionPart,a.option.underFeed=t,a.option.underTicker=n):a.emptyTags=[IDS.RealtimeTags.UnderlyingTicker]),l||(i||r?(a.issuer=i,a.issuerFullName=r):(a.emptyTags||(a.emptyTags=[]),a.emptyTags.push(IDS.RealtimeTags.Issuer))),a.useTag=[IDS.RealtimeTags.Issuer,IDS.RealtimeTags.IssuerFullName,IDS.RealtimeTags.Expiry],null!=s&&(a.symbolType=s),a},m=[],g=!1;if(a&&a.length>0){for(var f=0,v=a;f<v.length;f++){var y=v[f];(b=p()).option&&(b.option.expiry=y),m.push(b)}g=!0}else{var b=p();m.push(b),g=!0}if(g){var T=new IDS.CommonFrameworkResponse;T.Reply=function(e,t){e.type==IDS.ResponseEnum.Error?c.onError(404,e.errorMsg):c.onData(t.items)},IDS.SearchServer.Search(this.searchServer,m,null,T)}}else c.onError(404,"Could not find search server")},t.prototype.brokerStats=function(e,t){if(!t.feed&&t.instrument&&(t.feed=t.instrument.feed),t.feed){var n={OnBrokerStats:function(e,n){t.onData([n])},OnBrokerStatsMulti:function(e,n){t.onData(n)},OnBrokerStatsReset:function(e){IDS.DEBUG_VERBOSE&&IDS.log("OnBrokerStatsReset",e)}},i=new IDS.API.BrokerStats.Scope(e);i.type=IDS.API.BrokerStats.Type.AccOneSymbol,i.broker=t.broker,i.feed=t.feed,i.subscribe=!1,t.instrument&&(i.feed=t.instrument.feed,i.symbol=t.instrument.ticker),new IDS.API.BrokerStats.BrokerStatsManager(this.serverPool,i,n)}else t.onError(404,"BrokerStats - feed is required")},t.prototype.tickSizes=function(e,t){var n={ResponseTickSize:function(e,n){var i=n.items.length>0?n.items[0].items:[];IDS.DEBUG_TICK_SIZE_CS&&IDS.log("Tick sizes:",i),t.onData(i)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};if(this.trHasServerProp(IDS.ServerProperties.PerSymbolTickSize,e)){var i=this.loginServer().getFeedMetadata(e),r=new IDS.TickSizeRequest;r.feed=e,r.symbol=t.ticker,r.isin=t.isin,r.mic=i.mic,this.getTradingServer().GetTickSizes(r,n)}else{if(!(t.id>0)){var a=this.loginServer().getTickSizes(e,t.id);return void t.onData(a||[])}var s=new IDS.Realtime.TickSizeRequest;s.items.push(new IDS.Realtime.TickSizeRequestItem(e,t.id)),this.streamingManager.GetTickSize(s,n)}},t.prototype.getFeatureFeeds=function(){return this.loginServer().getFeatureFeeds()},t.prototype.getFeatureStrings=function(){return this.loginServer().getFeatureStrings()},t.prototype.getLoginInfo=function(){return this.loginServer().loginInfo},t.prototype.marketLists=function(e){e.onData(this.loginServer().getMarkets())},t.prototype.getCalendarServer=function(e){var t,n;if(e.feeds)for(var i=0,r=e.feeds;i<r.length;i++){var a=r[i];if(t=this.loginServer().getPidSid(a,IDS.ServiceType.Calendar))break}else t=this.loginServer().getPidSid(null,IDS.ServiceType.Calendar);return t&&(n=this.serverPool.GetCalendar(t,this))?this.serverPool.Dispose(t,n.serverType,this,"getCalendarServer"):e.onError(404,"You don't have access to the calendar service"),n},t.prototype.marketListsPromise=function(){var e=this;return this.marketListPromise||(this.marketListPromise=new Promise(function(t,n){t(e.loginServer().getMarkets())})),this.marketListPromise},t.prototype.calendar=function(e){var t=this.getCalendarServer(e);if(t){var n=new IDS.EventsRequest;if(n.sources=e.feeds,n.countries=e.countries,n.dateFrom=e.startDate,n.dateTo=e.endDate,e.instrument&&(n.instruments||(n.instruments=[]),n.instruments.push(e.instrument)),e.instruments){if(n.instruments||(n.instruments=[]),!e.instruments.length)return;for(var i=0;i<e.instruments.length;i++)n.instruments.push(e.instruments[i])}var r=new IDS.CommonFrameworkResponse;r.Reply=function(t,n){n&&n.events&&(t.type==IDS.ResponseEnum.Error?e.onError(404,t.errorMsg):e.onData(n.events))},t.GetEvents(n,null,r)}},t.prototype.tradesByDays=function(t,n){var i=this,r=new IDS.Realtime.TimeSeriesRequest;if(r.resolution=IDS.Realtime.TimeSeriesResolution.Minute,r.instrument=t,r.daysBack=0,n.days_back&&(r.daysBack=n.days_back),r.stepSize=1,n.stepSize&&(r.stepSize=n.stepSize),n.maxLookupDays&&(r.maxLookupDays=n.maxLookupDays),r.numberOfDays=n.num_days,r.daysBack>0&&!n.num_days&&(r.numberOfDays=r.daysBack+1),n.resolution)switch(n.resolution){case e.Resolution.MINUTES:r.resolution=IDS.Realtime.TimeSeriesResolution.Minute;break;case e.Resolution.HOURS:r.resolution=IDS.Realtime.TimeSeriesResolution.Hour;break;case e.Resolution.SECONDS:r.resolution=IDS.Realtime.TimeSeriesResolution.Second;break;case e.Resolution.TICKS:r.resolution=IDS.Realtime.TimeSeriesResolution.TickByTick}n.fields?r.tags=IDS.FromMws.Tags(n.fields).normalTags:r.tags.push(IDS.RealtimeTags.Last);var a=new IDS.CommonFrameworkResponse;if(a.Reply=function(e,r){var a;e.type==IDS.ResponseEnum.Error?n.onError(404,e.errorMsg):(r.ToMws(),r.items?a={trades:r.items,first_trade_of_day_offsets:r.newDayOffsets}:r.trades&&(a={trades:r.trades,first_trade_of_day_offsets:r.newDayOffsets}),n.targetCurrency?i.getCurrencyConverter().getInstrumentCurrency(t).then(function(e){for(var r=n.targetCurrency,s=i.getCurrencyConverter().getCrossSymbols(t,r),o=[],l=0,c=a.trades;l<c.length;l++){var d=c[l],u=Object.create(d);u.open=i.getCurrencyConverter().getIntradayValue(u.open,u.time,e,r,s)||u.open,u.high=i.getCurrencyConverter().getIntradayValue(u.high,u.time,e,r,s)||u.high,u.low=i.getCurrencyConverter().getIntradayValue(u.low,u.time,e,r,s)||u.low,u.last=i.getCurrencyConverter().getIntradayValue(u.last,u.time,e,r,s)||u.last,o.push(u)}a.trades=o,n.onData(a)}):n.onData(a))},n.targetCurrency)this.getCurrencyConverter().cacheIntraday(t,n.targetCurrency,n.resolution,n.stepSize,n.days_back,n.maxLookupDays).then(function(){i.streamingManager.GetTimeSeries(r,null,a)||n.onError(404,"No intraday trades server found for ["+t.feed.toString()+"] "+t.ticker)});else if(!this.streamingManager.GetTimeSeries(r,null,a))return void n.onError(404,"No intraday trades server found for ["+t.feed.toString()+"] "+t.ticker)},t.prototype.ensureValidHistoricalTrades=function(e,t,n,i){var r=[];n&&n.setUTCHours(0,0,0,0),i&&i.setUTCHours(23,59,59,999);for(var a=0,s=e;a<s.length;a++){var o=s[a];if((null==n||n<=o.date)&&(null==i||i>=o.date))switch(t){case IDS.RealtimeTags.Last:o.last&&r.push(o);break;case IDS.RealtimeTags.Open:o.open&&r.push(o);break;case IDS.RealtimeTags.High:o.high&&r.push(o);break;case IDS.RealtimeTags.Low:o.low&&r.push(o);break;case IDS.RealtimeTags.AcVolume:o.volume&&r.push(o);break;case IDS.RealtimeTags.Turnover:o.turnover&&r.push(o);break;case IDS.RealtimeTags.IndicTrade:o.indicTrade&&r.push(o);break;case IDS.RealtimeTags.IndicIncVol:o.indicIncVol&&r.push(o);break;case IDS.RealtimeTags.IndicHigh:o.indicHigh&&r.push(o);break;case IDS.RealtimeTags.IndicLow:o.indicLow&&r.push(o);break;case IDS.RealtimeTags.Nms:o.nms&&r.push(o);break;case IDS.RealtimeTags.IndicOpen:o.indicOpen&&r.push(o);break;case IDS.RealtimeTags.IndicOpenVol:o.indicOpenVol&&r.push(o);break;case IDS.RealtimeTags.OnExchVolume:o.onFloorVolume&&r.push(o)}}return r},t.prototype.ensureValidHist=function(e,t,n,i,r,a,s,o,l){void 0===s&&(s=!1),void 0===o&&(o=void 0),void 0===l&&(l=void 0);var c=[],d=r&&e.adjustments||[],u=e.dividends||[],h=r&&d.length>0||a&&u.length>0,p=1,m=1,g=!0,f=!0,v=h?d.length-1:-1,y=u.length>0?e.dividends.length-1:-1;n&&n.setUTCHours(0,0,0,0),i&&i.setUTCHours(23,59,59,999),d.sort(function(e,t){return e.date-t.date}),u.sort(function(e,t){return e.date-t.date});for(var b=e.items.length-1;b>=0;b--){var T=Object.create(e.items[b]),S=IDS.tagToStr(IDS.TagSet.Realtime,t).toLowerCase();if((null==n||n<=T.date)&&(null==i||i>=T.date)){if(h){v>0&&T.date<InfrontUtil.DateFromDateNu(d[v-1].date)&&(g=--v>0),g&&d[v]&&(g=!1,p*=d[v].factor),y>0&&T.date<InfrontUtil.DateFromDateNu(u[y-1].date)&&(f=--y>0),f&&u[y]&&(f=!1,m*=1-u[y].dividend/T.last);var C=!!d[v]&&T.date<InfrontUtil.DateFromDateNu(d[v].date),I=!!u[y]&&T.date<InfrontUtil.DateFromDateNu(u[y].date),_=v>0&&C&&T.date>=InfrontUtil.DateFromDateNu(d[v-1].date)||0==v&&C,M=y>0&&I&&T.date>=InfrontUtil.DateFromDateNu(u[y-1].date)||0==y&&I;_&&r&&(T.open*=p,T.high*=p,T.low*=p,T.last*=p,T.volume/=p,T.onFloorVolume/=p),M&&a&&(T.open*=m,T.high*=m,T.low*=m,T.last*=m,T.volume/=m,T.onFloorVolume/=m)}s&&(T.open=this.getCurrencyConverter().getHistoricalValue(T.open,T.date,o,l)||T.open,T.high=this.getCurrencyConverter().getHistoricalValue(T.high,T.date,o,l)||T.high,T.low=this.getCurrencyConverter().getHistoricalValue(T.low,T.date,o,l)||T.low,T.last=this.getCurrencyConverter().getHistoricalValue(T.last,T.date,o,l)||T.last),T[S]&&c.unshift(T)}}return c},t.prototype.historicalTrades=function(e,t){var n=this,i=this.loginServer().getPidSid(e.feed,IDS.ServiceType.Historical);if(i){var r=this.serverPool.GetHistory(i,this,"historicalTrades"),a=new IDS.CommonFrameworkResponse;a.Reply=function(i,r){var a;if(i.type==IDS.ResponseEnum.Error)t.onError(404,i.errorMsg);else if(t.targetCurrency)n.getCurrencyConverter().getInstrumentCurrency(e).then(function(i){a=n.ensureValidHist(r,IDS.RealtimeTags.Last,t.start_date,t.end_date,t.adjust_splits,t.adjust_dividends,!0,i,t.targetCurrency),IDS.DEBUG_TRADES_CS_FILTER&&IDS.log("Filtered historical trades:",a),t.onData(a);var s=n.streamingManager.getSymbol(e.feed,e.ticker);s&&s.CacheUpdated()});else{a=n.ensureValidHist(r,IDS.RealtimeTags.Last,t.start_date,t.end_date,t.adjust_splits,t.adjust_dividends),IDS.DEBUG_TRADES_CS_FILTER&&IDS.log("Filtered historical trades:",a),t.onData(a);var s=n.streamingManager.getSymbol(e.feed,e.ticker);s&&s.CacheUpdated()}};var s=void 0,o=void 0;t.start_date&&(s=Number(InfrontUtil.getTradingAlgoParamDateString(t.start_date))),t.end_date&&(o=Number(InfrontUtil.getTradingAlgoParamDateString(t.end_date)));var l=new IDS.TimeSeriesRequest(s,o);t.targetCurrency?this.getCurrencyConverter().cacheHistory(e,t.targetCurrency,t.start_date,t.end_date,t.adjust_splits,t.adjust_dividends).then(function(){r.GetTimeSeries(e.feed,e.ticker,l,null,a),n.serverPool.Dispose(i,r.serverType,n,"historicalTrades")}):(r.GetTimeSeries(e.feed,e.ticker,l,null,a),this.serverPool.Dispose(i,r.serverType,this,"historicalTrades"))}else t.onError(404,"No historical trades server for feed "+e.ticker)},t.prototype.companyHistory=function(e,t){var n=this,i=this.loginServer().getPidSid(e.feed,IDS.ServiceType.Historical);if(i){var r=this.serverPool.GetHistory(i,this,"historicalTrades"),a=new IDS.CommonFrameworkResponse;a.Reply=function(i,r){if(i.type==IDS.ResponseEnum.Error)t.onError(404,i.errorMsg);else{var a=[],s=[],o=[];if(r.hasOwnProperty("items")&&(o=n.ensureValidHist(r,IDS.RealtimeTags.Last,t.start_date,t.end_date,t.adjust_splits,t.adjust_dividends)),r.hasOwnProperty("adjustments"))for(var l=0,c=r.adjustments;l<c.length;l++){var d=c[l];a.push({date:IDS.MWSMakeDate(d.date),factor:d.factor})}if(r.hasOwnProperty("dividends"))for(var u=0,h=r.dividends;u<h.length;u++)d=h[u],s.push({date:IDS.MWSMakeDate(d.date),amount:d.dividend,currency:d.currency});var p={trades:o,splits:a,dividends:s};IDS.DEBUG_TRADES_CS&&IDS.log("companyHistory:",p),t.onData(p);var m=n.streamingManager.getSymbol(e.feed,e.ticker);m&&m.CacheUpdated()}};var s=void 0,o=void 0;t.start_date&&(s=Number(InfrontUtil.getTradingAlgoParamDateString(t.start_date))),t.end_date&&(o=Number(InfrontUtil.getTradingAlgoParamDateString(t.end_date)));var l=new IDS.TimeSeriesRequest(s,o);l.includeAdjustments=!0,r.GetTimeSeries(e.feed,e.ticker,l,null,a),this.serverPool.Dispose(i,r.serverType,this,"companyHistory")}},t.prototype.instrumentIntradayTrades=function(e,t){var n=new IDS.CommonFrameworkResponse;n.Reply=function(e,n){n.ToMws(),t.onData(n)};var i=new IDS.Realtime.TimeSeriesRequest;i.instrument=e,i.limitNumberOfTrades=t.items,i.tradesStart=t.offset,i.tradesEnd=t.highestSequenceId,this.streamingManager.GetTimeSeries(i,null,n)},t.prototype.marketActivity=function(t,n){var i=this,r=function(){},a=this.loginServer().getPidSidForFeedAndProperty(IDS.GlobalChainsFeed,e.FeedProperty.Chains);if(a){var s=new q;if(n.chain){var o=this.serverPool.GetChain(a,this),l=new IDS.CommonFrameworkResponse;l.Reply=function(e,t){if(e.type!==IDS.ResponseEnum.Error){for(var r=function(){var e=l.instrument,t={valueUpdated:function(t){s.update(e,t)&&n.onData(s.get())}};s.addInstrument(e),s.unbinds.push(i.streamingManager.SymbolCustomBind(e.feed,e.ticker,IDS.RealtimeTags.Change,t,IDS.DEBUG_BINDINGS))},a=0,o=t.items;a<o.length;a++){var l=o[a];r()}i.streamingManager.GetSymbols(s.getInstruments(),new IDS.SymbolContent(IDS.SymbolContentEnum.Basic),n.streaming)}else n.onError(404,e.errorMsg)},o.RequestChainContent(t,n.chain,0,null,l),this.serverPool.Dispose(a,o.serverType,this,"marketActivity"),r=function(){s.unbind(),n.streaming&&i.streamingManager.UnsubscribeSymbols(s.getInstruments(),new IDS.SymbolContent(IDS.SymbolContentEnum.Basic))}}}else IDS.DEBUG_VERBOSE&&IDS.log("%cNo access to chains feed","color: #f60; font-size: 14px;");return r},t.prototype.getWatchlistTitles=function(){return this.watchListManager.getWatchlistTitles()},t.prototype.isWatchlistReadOnly=function(e){return 1==this.watchListManager.readOnly[e]},t.prototype.getWatchlistContents=function(e){return this.watchListManager.getListContent(e)},t.prototype.addWatchlist=function(e){return this.watchListManager.addListTitle(e)},t.prototype.addWatchlistInstrument=function(e,t){return this.watchListManager.addListInstrument(e,t)},t.prototype.removeWatchlistInstrument=function(e,t){return this.watchListManager.removeListInstrument(e,t)},t.prototype.saveUserList=function(t,n){var i=new e.Watchlist(this.streamingManager,!1);return i.setEntries(n),this.watchListManager.saveList(t,i)},t.prototype.updateUserList=function(e,t){return this.watchListManager.updateList(e,t)},t.prototype.deleteUserList=function(e){return this.watchListManager.removeList(e)},t.prototype.setExternalLoginId=function(e,t){this.watchListManager&&(this.watchListManager.extLoginId=e,this.watchListManager.namespace=t)},t.prototype.infinancialsUrl=function(t){var n=new e.GetInfinancialsUrlRequest;n.instrument=t.instrument,n.widgets=t.widgets,n.width=t.width,n.height=t.height,n.dark_theme=t.darkTheme;var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(n){n.hasOwnProperty(e.MWSConstants.url)?t.onData(n[e.MWSConstants.url]):t.onError(404,"Object not found")},this.controller.getMessageService().sendRequest(n,i)},t.prototype.trGetPortfolioNames=function(e){var t={ResponseTradingPortfolioNames:function(t,n){e.onData({portfolios:n.items})},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};this.getTradingServer().GetPortfolioNames(t)},t.prototype.trGetTradingPower=function(e,t){var n={ResponseTradingPower:function(e,n){t.onData(n.ToMws())},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}},i=null;t.instrument&&(i=t.instrument),this.getTradingServer().GetTradingPower(e,i,n)},t.prototype.trPortfolio=function(e,t){var n={ResponsePortfolioPositions:function(e,n){t.onData(n.ToMws())},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};return this.getTradingServer()&&this.getTradingServer().GetPortfolio(e,n),function(){}},t.prototype.setActivePortfolio=function(e){var t=this,n={ResponsePortfolioPositions:function(n,i){t.getTradingManager()&&(t.getTradingManager().currentPortfolioReady=!1,t.getTradingManager().setCurrentPortfolioName(e))},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};return this.getTradingServer()&&this.getTradingServer().GetPortfolio(e,n),function(){}},t.prototype.trOrderTypes=function(e){var t={ResponseMarketProperties:function(t,n){e.onData({markets:n.ToMws()})},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};this.getTradingServer().GetMarketProperties(t)},t.prototype.trOrdersAndTrades=function(e,t){var n=this.getTradingServer();n.includeDeletedOrders=!0;var i={ResponseOrderList:function(e,i){t.onData(i.portfolio.ToMws(n.includeDeletedOrders))},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};return n.GetOrdersAndTrades(e,i),function(){}},t.prototype.trNetTrades=function(e,t){var n=this,i=function(){};if(this.controller.isTradingStreaming()){var r={PortfolioName:e,ResponseNetTrades:function(e,n){t.onData(n)},ResponseError:function(e){IDS.DEBUG_VERBOSE&&IDS.log(e.errorMsg)}};this.getTradingServer().Register(r),i=function(){n.getTradingServer().Unregister(r)}}var a={ResponseNetTrades:function(e,n){t.onData(n)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};return this.getTradingServer().GetNetTrades(e,a),i},t.prototype.trInsertOrder=function(t){var n=this.streamingManager.getSymbol(t.instrument.feed,t.instrument.ticker);if(n){var i=this.loginServer().getFeedMetadata(t.instrument.feed),r=new IDS.OrderRequest;r.symbolRef=n,r.orderType=IDS.FromMws.StrToOrderType(t.orderType),r.orderType===IDS.OrderTypes.Strategy?r.orderStatus=IDS.OrderStatus.Working:r.orderStatus=IDS.OrderStatus.Exchange,r.portfolio=t.portfolio,r.market=this.getTradingServer().GetMarketplaceForFeed(t.instrument.feed),r.price=t.price,r.volume=t.volume,r.openVolume=t.openVolume,r.comment=t.comment,r.position=t.buyOrSell===e.BuyOrSell.Buy?IDS.Position.buy:IDS.Position.sell,r.customFields=t.customFields,r.algoId=t.algoId,r.algoParams=t.algoParams,r.feedNu=t.instrument.feed,r.symbol=t.instrument.ticker,r.mic=i.mic,r.validUntil=-1!=t.validUntil?InfrontUtil.DateToInt(t.validUntil):void 0;var a={ResponseInsertOrder:function(e,n){n.failCode===IDS.FailCodes.ErrorOk?t.onData(n.ToMws()):t.onError(500,n.getFailMessage())},ResponseError:function(e){t.onError(500,e.errorMsg)}};this.getTradingServer().InsertOrder(r,a)}else IDS.DEBUG_VERBOSE&&IDS.log("%ctrInsertOrder: Could not find symbol","color: #f60; font-size: 14px;")},t.prototype.trDeleteOrder=function(e,t,n){var i={ResponseDeleteOrder:function(e,t){t.failCode===IDS.FailCodes.ErrorOk?n.onData(t.ToMws()):n.onError(500,t.getFailMessage())},ResponseError:function(e){n.onError(500,e.errorMsg)}};this.getTradingServer().DeleteOrder(e,t.toString(),i)},t.prototype.trModifyOrder=function(e,t,n){var i=new IDS.OrderRequest,r=this.streamingManager.getSymbol(n.instrument.feed,n.instrument.ticker);if(r){i.symbolRef=r,i.feedNu=n.instrument.feed,i.symbol=n.instrument.ticker,i.portfolio=e,i.orderId=t.toString(),i.price=n.price,i.volume=n.volume,i.openVolume=n.openVolume,i.activeOrder=n.activeOrder,i.validUntil=-1!=n.validUntil?InfrontUtil.DateToInt(n.validUntil):void 0,i.customerReference=n.customerReference,i.comment=n.comment,i.customFields=n.customFields,i.algoId=n.algoId,i.algoParams=n.algoParams;var a={ResponseModifyOrder:function(e,t){t.failCode===IDS.FailCodes.ErrorOk?n.onData(t.ToMws()):n.onError(500,t.getFailMessage())},ResponseError:function(e){n.onError(500,e.errorMsg)}};this.getTradingServer().ModifyOrder(i,a)}else IDS.DEBUG_VERBOSE&&IDS.log("%ctrModifyOrder: Could not find symbol","color: #f60; font-size: 14px;")},t.prototype.trRiskLevel=function(e){var t={ResponseRiskLevel:function(t,n){e.onData(n)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};this.getTradingServer().RequestRiskLevel(e.portfolio,e.orderId.toString(),t)},t.prototype.trGetAlgos=function(e){var t=this.trGetMarketplaceForFeed(e.feed);if(t){var n={ResponseAlgorithms:function(n,i){IDS.DEBUG_TRADING_ALGOS&&IDS.log("Algos for",t,i.ToMws(e.feed,t)),e.onData(i.ToMws(e.feed,t))},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};this.getTradingServer().GetAlgorithms(n)}},t.prototype.trGetCustomFields=function(e){var t=this.trGetMarketplaceForFeed(e.feed);if(t){var n={ResponseCustomFields:function(n,i){IDS.DEBUG_TRADING_CUST_FIELDS&&IDS.log("Custom fields for",t,i.ToMws(t)),e.onData({custom_fields:i.ToMws(t)})},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};this.getTradingServer().GetCustomFields(n)}},t.prototype.trGetCustomFieldLabel=function(e,t){return this.getTradingServer().GetCustomFieldLabel(e,t)},t.prototype.activateOrder=function(e){var t={ResponseActivateOrder:function(t,n){n.failCode===IDS.FailCodes.ErrorOk?e.onData(n.ToMws()):e.onError(500,n.getFailMessage())},ResponseError:function(t){e.onError(500,t.errorMsg)}};this.getTradingServer().ActivateOrder(e.portfolio,e.order_id.toString(),!0,t)},t.prototype.deactivateOrder=function(e){var t={ResponseActivateOrder:function(t,n){n.failCode===IDS.FailCodes.ErrorOk?e.onData(n.ToMws()):e.onError(500,n.getFailMessage())},ResponseError:function(t){e.onError(500,t.errorMsg)}};this.getTradingServer().ActivateOrder(e.portfolio,e.order_id.toString(),!1,t)},t.prototype.trGetMarketplaceForFeed=function(e){return this.getTradingServer().GetMarketplaceForFeed(e)},t.prototype.trHasServerProp=function(e,t){var n=t?this.getTradingServer().GetMarketplaceForFeed(t):null;return this.getTradingServer().supportServerPropertyForMarketPlace(e,n)},t.prototype.trHasServerProp2=function(e,t){var n=t?this.getTradingServer().GetMarketplaceForFeed(t):null;return this.getTradingServer().supportServerProperty2ForMarketPlace(e,n)},t.prototype.trHasServerProp3=function(e,t){var n=t?this.getTradingServer().GetMarketplaceForFeed(t):null;return this.getTradingServer().supportServerProperty3ForMarketPlace(e,n)},t.prototype.trHasUserProp=function(e){return this.getTradingServer().hasUserProp(e)},t.prototype.logOut=function(){this.controller.logOut()},t.prototype.componentData=function(t){var n=new e.ComponentRequest;n.response="json",n.id=t.id,n.company=t.company,null!=t.peergroup&&(n.peergroup=t.peergroup),null!=t.custom&&(n.custom=t.custom),null!=t.currency&&(n.currency=t.currency),null!=t.source&&(n.source=t.source);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.eurofinData=function(t){var n=new e.EurofinRequest;n.response="json",n.id=t.id,n.pgaction=t.action,t.company&&(n.company=t.company),t.name&&(n.pgname=t.name),t.entries&&(n.pgentries=t.entries),t.arr_names&&(n.pgnames=t.arr_names),t.arr_entries&&(n.pglistentries=t.arr_entries);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.chartComponentData=function(t){var n=new e.ChartRequest;n.response="json",n.id=t.id,n.company=t.company,null!=t.peergroup&&(n.peergroup=t.peergroup),null!=t.chart&&(n.chart=t.chart),null!=t.custom&&(n.custom=t.custom),null!=t.source&&(n.source=t.source),null!=t.currency&&(n.currency=t.currency);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.evolutionComponentData=function(t){var n=new e.EvolutionChartRequest;n.response="json",n.id=t.id,n.company=t.company,null!=t.peergroup&&(n.peergroup=t.peergroup),null!=t.predefinedSeries&&(n.predefinedSeries=t.predefinedSeries),null!=t.fields&&(n.fields=t.fields),null!=t.periods&&(n.periods=t.periods);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.etaComponentData=function(t){var n=new e.EtaRequest;n.response="json",n.id=t.id,n.company=t.company,null!=t.mode&&(n.mode=t.mode),null!=t.view&&(n.view=t.view);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.sectorIndiceComponentData=function(t){var n=new e.UniverseRequest;n.response="json",n.id=t.id,null!=t.index&&(n.index=t.index),null!=t.region&&(n.region=t.region);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.leagueTablesData=function(t){var n=new e.UniverseRequest;n.response="json",n.id=t.id,n.type=t.type,null!=t.index&&(n.index=t.index),null!=t.sector&&(n.sector=t.sector),null!=t.country&&(n.country=t.country),null!=t.region&&(n.region=t.region),null!=t.field&&(n.field=t.field),null!=t.nbtop&&(n.nbtop=t.nbtop),null!=t.nbbot&&(n.nbbot=t.nbbot),null!=t.marketplace&&(n.marketplace=t.marketplace);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.screenerData=function(t,n){var i=new e.RequestOptions;i.onError=n.onError,i.onSuccess=function(e){n.onData(e)},this.controller.getMessageService().sendRequest(t,i)},t.prototype.fundamentalsData=function(t){var n=new e.FundamentalsRequest;n.response="json",n.id=t.id,n.company=t.company,null!=t.mode&&(n.mode=t.mode),null!=t.currency&&(n.currency=t.currency);var i=new e.RequestOptions;i.onError=t.onError,i.onSuccess=function(e){t.onData(e)},this.controller.getMessageService().sendRequest(n,i)},t.prototype.getConnectionStatus=function(e,t){var n={ResponseServerStatus:function(t){e.onData(t)},StreamingServerStatus:function(t){e.onData([t])}};return this.serverPool.getConnectionStatus(n,t)},t.prototype.calculateSwap=function(t){this.calculatorServer||(this.calculatorServer=new e.CalculatorServer(this.serverPool));var n=new e.CalculateSwapRequest;t.populateRequest(n),this.calculatorServer.getSwap(n,function(e){200===e.status?t.onData&&t.onData(e):t.onError(e.status,e.statusText)})},t.prototype.calculateFixBond=function(t){this.calculatorServer||(this.calculatorServer=new e.CalculatorServer(this.serverPool));var n=new e.CalculateBondsRequest;t.populateRequest(n),this.calculatorServer.getFixedBond(n,function(e){200===e.status?t.onData&&t.onData(e):t.onError(e.status,e.statusText)})},t.prototype.calculateFloatingBond=function(t){this.calculatorServer||(this.calculatorServer=new e.CalculatorServer(this.serverPool));var n=new e.CalculateBondsRequest;t.populateRequest(n),this.calculatorServer.getFloatingBond(n,function(e){200===e.status?t.onData&&t.onData(e):t.onError(e.status,e.statusText)})},t.kDefaultBaseCurrency="USD",t}();e.Model=Y}(Infront||(Infront={})),function(e){var t=function(e){this.instruments=[],this.numTrades=0,this.fields=e},n=function(){function e(e,t){this.fieldCounts={},this.pendingSubFields=[],this.pendingUnsubFields=[],this.instrument=e,this.instrumentKey=t}return e.prototype.checkIfFieldShouldSubOrUnsub=function(e,t){if(this.fieldCounts[e]>=1&&0==t){var n=this.pendingUnsubFields.indexOf(e);-1==n?this.pendingSubFields.push(e):this.pendingUnsubFields.splice(n,1)}else if(0==this.fieldCounts[e]&&t>0){var i=this.pendingSubFields.indexOf(e);-1==i?this.pendingUnsubFields.push(e):this.pendingSubFields.splice(i,1),delete this.fieldCounts[e]}},e.prototype.addFieldCount=function(e,t){this.fieldCounts.hasOwnProperty(e)||(this.fieldCounts[e]=0);var n=this.fieldCounts[e];this.fieldCounts[e]+=t,this.checkIfFieldShouldSubOrUnsub(e,n),this.fieldCounts[e]>50&&InfrontUtil.errorLog("Warning: More than 10 subs for "+this.instrument.ticker+" / "+e,this)},e.prototype.getSubscribeFields=function(e){void 0===e&&(e=!0);var t=[];if(e)t=this.pendingSubFields.slice();else for(var n in this.fieldCounts)t.push(n);return t},e.prototype.getPendingUnsubscribeFields=function(){return this.pendingUnsubFields.slice()},e.prototype.clearPendingSubscribeFields=function(){this.pendingSubFields=[]},e.prototype.clearPendingUnsubscribeFields=function(){this.pendingUnsubFields=[]},e}(),i=function(){function i(){this.subscriptionCounts={}}return i.prototype.getInstrumentCountObj=function(t){var i=e.CacheKeyFactory.createInstrumentKey(t);return i?(this.subscriptionCounts.hasOwnProperty(i)||(this.subscriptionCounts[i]=new n(t,i)),this.subscriptionCounts[i]):null},i.prototype.addCountFor=function(e,t,n){void 0===n&&(n=1);for(var i=0,r=e;i<r.length;i++){var a=r[i];if(InfrontUtil.isNumber(a.feed)&&InfrontUtil.isString(a.ticker)){var s=this.getInstrumentCountObj(a);if(s)for(var o=0,l=t;o<l.length;o++){var c=l[o];s.addFieldCount(c,n)}}}},i.prototype.getSubscriptionRequests=function(e){void 0===e&&(e=!0);var t,n={};for(var i in this.subscriptionCounts){var r=this.subscriptionCounts[i];t=r.getSubscribeFields(e),r.clearPendingSubscribeFields(),this.addFieldInstrumentToRequestDict(n,t,r.instrument)}return n},i.prototype.addFieldInstrumentToRequestDict=function(e,n,i){if(n.length>0){var r=n.join("");e[r]||(e[r]=new t(n)),e[r].instruments.push(i)}},i.prototype.getUnsubscribeRequests=function(){var e,t={};for(var n in this.subscriptionCounts){var i=this.subscriptionCounts[n];e=i.getPendingUnsubscribeFields(),i.clearPendingUnsubscribeFields(),this.addFieldInstrumentToRequestDict(t,e,i.instrument)}return t},i}(),r=function(){function t(t,n){var r=this;this.nextTradeNumReq=0,this.delayedSubscribeTimerID=null,this.delayedUnsubscribeTimerID=null,this.subscriptionCounter=new i,this.infront=n,this.cache=n.getCache(),this.messageService=t,t.registerSpecialEventObserver(e.MWSConstants.md_instrument_update,function(e){r.instrumentUpdate(e)}),t.onMarketdataReconnect=function(){r.resubscribeAllInstruments()},this.observers={}}return t.prototype.SetIDS=function(e){this.streamingManager=e,this.cache.SetIDS(this.streamingManager)},t.prototype.sendSubscribeRequest=function(n,i,r,a){var s=this;void 0===r&&(r=!1),void 0===a&&(a=t.kDefaultNumTrades),0==(i=this.removeNonSubscriptionFields(i)).length&&i.push(InfrontConstants.Fields.LAST);var o=new e.InstrumentSubscriptionRequest;if(o.instruments=n,o.fields=i,this.hasTradesField(i)&&(o.num_trades=a||t.kDefaultNumTrades),o.fields.indexOf(e.QuoteFields.TRADES)>-1&&this.createTradesCache(o.instruments),o.fields.indexOf(e.QuoteFields.ORDERBOOK)>-1&&this.createOrderbookCache(o.instruments),o.fields.length>0){var l=new e.RequestOptions;l.onError=r?function(t,i){for(var r=0;r<n.length;r++)s.cache.updateCacheTimestamp(e.CacheKeyFactory.createInstrumentKey(n[r]));InfrontUtil.errorLogCallback(t,i)}:InfrontUtil.errorLogCallback,l.onSuccess=function(e){},this.messageService.instrumentSubscribe(o,l)}},t.prototype.createTradesCache=function(t){for(var n=0;n<t.length;n++){var i=e.CacheKeyFactory.createTradesArrayKey(t[n]);this.cache.createArray(i,null,function(t,n){return n[e.MWSConstants.seq_id]-t[e.MWSConstants.seq_id]},!1)}},t.prototype.createOrderbookCache=function(e){},t.prototype.requestFundDetails=function(t){for(var n,i=this,r=function(){var r=t[s],o=e.CacheKeyFactory.createInstrumentKey(r),l=new e.FundDetailsRequest;l.instrument=r,(n=new e.RequestOptions).onError=InfrontUtil.errorLogCallback,n.onSuccess=function(e){var t={};t[InfrontConstants.FundDetailsMap.ROOT_OBJECT]=JSON.parse(e.details_as_json),i.cache.update(o,t)},a.messageService.sendRequest(l,n)},a=this,s=0;s<t.length;s++)r()},t.prototype.resubscribeAllInstruments=function(){if(this.infront.isStreaming()){var e=this.subscriptionCounter.getSubscriptionRequests(!1);for(var n in e){var i=e[n];this.sendSubscribeRequest(i.instruments,i.fields,!1,t.kDefaultNumTrades)}}},t.prototype.snapshot=function(e,t,n,i,r,a){var s=this;void 0===n&&(n=!1),void 0===r&&(r=0),void 0===a&&(a=!1),this.loadTGWFields(e,t);for(var o=[],l=0,c=e;l<c.length;l++){var d=c[l].toString();-1===o.indexOf(d)&&o.push(d)}this.infront.getSymbols(e,t,function(e){if(e instanceof IDS.Symbol){IDS.DEBUG_SNAPSHOT&&IDS.log("Snapshot:",e.fs.toString(),e.inspect());var t=e.ToMws();s.cache.getSnapshotOnDataCallback()(t),i&&i([t])}},r,!1,a)},t.prototype.removeNonSubscriptionFields=function(e){var t=Array.prototype.concat.apply([],e),n=t.indexOf("IS_SHORTABLE");n>-1&&t.splice(n,1);var i=t.indexOf("MARGIN_RATE");return i>-1&&t.splice(i,1),this.removeFundsDetailsFields(t)},t.prototype.removeFundsDetailsFields=function(e){var t=Array.prototype.concat.apply([],e),n=t.indexOf(InfrontConstants.FieldGroups.FUND_DETAILS);return n>-1&&t.splice(n,1),t},t.prototype.hasTradesField=function(t){return t.indexOf(e.QuoteFields.TRADES)>=0},t.prototype.hasFundDetailsFields=function(e){return e.indexOf(InfrontConstants.FieldGroups.FUND_DETAILS)>=0},t.prototype.loadTGWFields=function(t,n){if(this.infront.getTradingStatus()==e.InfrontStatus.Connected&&(n.indexOf("IS_SHORTABLE")>-1||n.indexOf("MARGIN_RATE")>-1||n.indexOf("TRADES")>-1))for(var i=0;i<t.length;i++)this.singleLoadTGWFields(t[i])},t.prototype.singleLoadTGWFields=function(t){var n=this,i=e.CacheKeyFactory.createInstrumentKey(t),r=new e.TradingPowerOptions;r.instrument=t,r.onData=function(r){var a={};a[e.MWSConstants.instrument]=t,r.hasOwnProperty(e.MWSConstants.is_shortable)&&(a[e.MWSConstants.is_shortable]=r[e.MWSConstants.is_shortable]),r.hasOwnProperty(e.MWSConstants.margin_rate)&&(a[e.MWSConstants.margin_rate]=r[e.MWSConstants.margin_rate]),n.cache.update(i,a)},r.onError=InfrontUtil.errorLogCallback;var a=this.infront.getTradingManager().getCurrentPortfolio();a&&this.infront.trGetTradingPower(a.name,r)},t.prototype.instrumentUpdate=function(t){if(t.hasOwnProperty(e.MWSConstants.md_instrument_update)&&t[e.MWSConstants.md_instrument_update].hasOwnProperty(e.MWSConstants.instrument)){var n=t[e.MWSConstants.md_instrument_update],i=e.CacheKeyFactory.createInstrumentKey(n[e.MWSConstants.instrument]);if(this.cache.update(i,t[e.MWSConstants.md_instrument_update]),n.hasOwnProperty(e.MWSConstants.trades)&&this.processTrades(n),this.observers.hasOwnProperty(i))for(var r=this.observers[i],a=0;a<r.length;a++)r[a](t[e.MWSConstants.md_instrument_update])}},t.prototype.processTrades=function(t){var n=e.CacheKeyFactory.createTradesArrayKey(t[e.MWSConstants.instrument]),i=this.cache.getArray(n);if(i){var r=t[e.MWSConstants.trades];if(0==i.length())i.replaceWith(r);else for(var a=0,s=r;a<s.length;a++){var o=s[a];i.push(o)}}},t.prototype.processIdsOrderbook=function(e,t){},t.prototype.processOrderbook=function(e){},t.prototype.processOrderbookUpdate=function(e,t,n,i){},t.kDefaultNumTrades=25,t.kBunchingDelay=50,t.kLazyUnsubDelay=3e4,t}();e.InstrumentManager=r}(Infront||(Infront={})),function(e){var t=Infront.Instrument,n=function(){function e(){this.num=0,this.volume=0,this.turnover=0}return e.prototype.Add=function(e){this.num+=e.num,this.turnover+=e.turnover,this.volume+=e.volume},e.prototype.AddTrade=function(e,t){this.num++,this.turnover+=e.last*e.volume,t||(this.volume+=e.volume)},e.prototype.Assign=function(e){this.num=e.num,this.turnover=e.turnover,this.volume=e.volume},e}();e.BrokerSingle=n;var i,r=function(){function e(){this.dateTime=new Date(0),this.buy=new n,this.sell=new n,this.internal=new n,this.aggressiveBuy=new n,this.aggressiveSell=new n}return e.prototype.Add=function(e){this.buy.Add(e.buy),this.sell.Add(e.sell),this.internal.Add(e.internal),this.aggressiveBuy.Add(e.aggressiveBuy),this.aggressiveSell.Add(e.aggressiveSell)},e.prototype.toMws=function(){this.fullname=this.name,this.date=InfrontUtil.ToCommonframeworkDate(this.dateTime),this.time=InfrontUtil.ToCommonframeworkTime(this.dateTime),this.symbol&&(this.instrument=new t(this.feed,this.symbol)),this.buys=this.buy.num,this.buy_volume=this.buy.volume,this.buy_value=this.buy.turnover,this.sells=this.sell.num,this.sell_volume=this.sell.volume,this.sell_value=this.sell.turnover,this.int_trades=this.internal.num,this.int_volume=this.internal.volume,this.int_value=this.internal.turnover,this.total_volume=this.buy.volume+this.sell.volume+2*this.internal.volume,this.buy.volume&&(this.avg_buy=this.buy.turnover/this.buy.volume),this.sell.volume&&(this.avg_sell=this.sell.turnover/this.sell.volume),this.total_value=this.buy.turnover+this.sell.turnover+2*this.internal.turnover,this.trades=this.buy.num+this.sell.num+2*this.internal.num,this.net_buy_value=this.buy.turnover-this.sell.turnover,this.hit_value=this.aggressiveSell.turnover,this.buy.turnover&&(this.hit_value_pct=this.aggressiveSell.turnover/this.buy.turnover*100),this.take_value=this.aggressiveBuy.turnover,this.sell.turnover&&(this.take_value_pct=this.aggressiveSell.turnover/this.sell.turnover*100)},e}();e.BrokerStatItem=r,function(e){e[e.Flash=1]="Flash",e[e.Body=2]="Body",e[e.Deleted=4]="Deleted",e[e.Expired=8]="Expired",e[e.AttachmentWithBody=16]="AttachmentWithBody",e[e.Popup=32]="Popup",e[e.DisableListing=64]="DisableListing",e[e.Event=128]="Event"}(i=e.NewsFlags||(e.NewsFlags={}));var a=function(){function t(){this.dateTime=new Date(0),this.symbols=[],this.isUpdated=!1,this.isHistory=!1}return Object.defineProperty(t.prototype,"news_id",{get:function(){return this.newsId},set:function(e){this.newsId=e,this.isHistory=e&&e.indexOf("HIST:")>=0},enumerable:!0,configurable:!0}),t.prototype.GetHeadlineType=function(){return this.isFlash?e.MWSHeadlineType.FlashLevel1:this.url&&this.url.length>0?e.MWSHeadlineType.Url:e.MWSHeadlineType.Regular},t.prototype.GetInstruments=function(){for(var e=[],t=0,n=this.symbols;t<n.length;t++){var i=n[t];e.push(i)}return e},t.prototype.AddStr=function(e,t){return e?e+" - "+t:t},t.prototype.GetSymbolsStr=function(){for(var e="",t=0;t<this.symbols.length;t++){var n=t<3?this.symbols[t].ticker:"...";if(e=e.length>0?e+"  - "+n:n,3==t)break}return e},t.prototype.GetDebugPrefix=function(){var t="";return e.DEBUG_NEWS_SHOW_FEED&&(t=this.AddStr(t,"["+this.news_feed+"]")),e.DEBUG_NEWS_SHOW_ID&&(t=this.AddStr(t,this.news_id)),e.DEBUG_NEWS_SHOW_SYMBOL&&(t=this.AddStr(t,this.GetSymbolsStr())),e.DEBUG_NEWS_SHOW_TIME&&(t=this.AddStr(t,this.dateTime.getFullYear()+"-"+InfrontUtil.padToDblDigit(this.dateTime.getMonth()+1)+"-"+InfrontUtil.padToDblDigit(this.dateTime.getDate())+" "+InfrontUtil.padToDblDigit(this.dateTime.getHours())+":"+InfrontUtil.padToDblDigit(this.dateTime.getMinutes())+":"+InfrontUtil.padToDblDigit(this.dateTime.getSeconds()))),""===t?"":InfrontUtil.makeDbg(t)+"&nbsp;"},t.prototype.IsDeleted=function(){return!!(this.flags&i.Deleted)},t.prototype.ToMws=function(){return{news_id:this.news_id,news_feed:this.news_feed,headline:e.DEBUG_NEWS?this.GetDebugPrefix()+this.headline:this.headline,type:this.GetHeadlineType(),time:this.dateTime.toISOString().split(".")[0]+"Z",language:this.language,url:this.url,category:this.category,instruments:this.GetInstruments(),is_updated:this.isUpdated,is_deleted:this.IsDeleted()}},t.prototype.debug=function(){return{news_id:this.news_id,time:this.dateTime.toISOString().split(".")[0],headline:this.headline}},t.prototype.merge=function(e){if(this.isHistory==e.isHistory||this.headline!=e.headline||this.news_feed!=e.news_feed)return!1;this.isHistory&&this.streamingId==this.news_id&&(this.streamingId=e.news_id),e.isHistory&&(this.news_id=e.news_id),(!this.flags&&e.flags||e.flags&&!e.isHistory)&&(this.flags=e.flags),(!this.isFlash&&e.isFlash||e.isFlash&&!e.isHistory)&&(this.isFlash=e.isFlash),(!this.language&&e.language||e.language&&!e.isHistory)&&(this.language=e.language),(!this.url&&e.url||e.url&&!e.isHistory)&&(this.url=e.url),(!this.industry&&e.industry||e.industry&&!e.isHistory)&&(this.industry=e.industry),(!this.category&&e.category||e.category&&!e.isHistory)&&(this.category=e.category),(!this.topic&&e.topic||e.topic&&!e.isHistory)&&(this.topic=e.topic),(!this.storyNumber&&e.storyNumber||e.storyNumber&&!e.isHistory)&&(this.storyNumber=e.storyNumber),(!this.country&&e.country||e.country&&!e.isHistory)&&(this.country=e.country),(!this.productCode&&e.productCode||e.productCode&&!e.isHistory)&&(this.productCode=e.productCode),(!this.moneyCode&&e.moneyCode||e.moneyCode&&!e.isHistory)&&(this.moneyCode=e.moneyCode),(!this.author&&e.author||e.author&&!e.isHistory)&&(this.author=e.author),(!this.governmentCode&&e.governmentCode||e.governmentCode&&!e.isHistory)&&(this.governmentCode=e.governmentCode),(!this.statisticsCode&&e.statisticsCode||e.statisticsCode&&!e.isHistory)&&(this.statisticsCode=e.statisticsCode),(!this.isUpdated&&e.isUpdated||e.isUpdated&&!e.isHistory)&&(this.isUpdated=e.isUpdated);for(var t=0,n=e.symbols;t<n.length;t++){for(var i=n[t],r=!1,a=0,s=this.symbols;a<s.length;a++){var o=s[a];if(o.feed==i.feed&&o.ticker==i.ticker){r=!0;break}}r||this.symbols.push(i)}return!0},t}();e.HeadlineItem=a;var s=function(){function n(){this.dateTime=new Date(0)}return n.prototype.ToMws=function(){this.date=InfrontUtil.ToCommonframeworkDate(this.dateTime),this.time=InfrontUtil.ToCommonframeworkTime(this.dateTime),this.instrument=new t(this.feed,this.symbol),this.categoryType=e.CalendarCategory[this.category]},n}();e.CalendarEventItem=s}(IDS||(IDS={})),function(e){!function(e){e[e.ItemIsValid=0]="ItemIsValid",e[e.CrcMismatch=1]="CrcMismatch",e[e.InvalidCacheItem=2]="InvalidCacheItem",e[e.ItemNotInCache=3]="ItemNotInCache",e[e.SymbolCrcMissing=4]="SymbolCrcMissing",e[e.CouldNotAccessCache=5]="CouldNotAccessCache"}(e.StaticDataCacheEnum||(e.StaticDataCacheEnum={}));var t=function(){function t(e){this.symDb=e}return t.prototype.Parse=function(t,n,i,r){void 0===r&&(r=!1);var a,s,o,l=new e.Tag,c=0;for(t&&(a=this.symDb.GetSymbols(t.fs.feed,t.fs.ticker));n.Next(i,l,e.TagSet.Realtime);){switch(e.DEBUG_SYMBOL_STATIC_CS_TAGS&&e.logToConsole(e.TagSet.Realtime,l,i),l.tag){case e.RealtimeTags.Feed:s=l.Int(i);continue;case e.RealtimeTags.Symbol:o=l.String(i),a=this.symDb.GetSymbols(s,o),c=n.pos;continue;case e.RealtimeTags.Type:c=n.pos;continue;case e.RealtimeTags.SymbolDbNumber:l.Int(i);break;case e.RealtimeTags.StaticCRC:l.Int(i);continue;case e.RealtimeTags.Separator:if(a&&a.length&&null!==c&&!r){this.StoreSymbolToIxDb(a[0],i,c,n.pos-c),a[0].feed.bypassStaticCache||a[0].feed.StaticReceived(a[0].fs),e.DEBUG_SYMBOL_STATIC_CS&&e.log("symbolStatic",a);for(var d=0,u=a;d<u.length;d++)(t=u[d]).content|=e.SymbolContentEnum.StaticData,t.hasStaticContent=!0,t.CacheUpdated()}c=null,a=null}var h=l.tag in e.IsDateTag?InfrontUtil.DateFromDateNu(l.Int(i)):l.get(i);if(a)for(var p=0,m=a;p<m.length;p++)(t=m[p]).getValue(l.tag,!0).set(h)}a&&a.length&&null!==c&&!r&&(this.StoreSymbolToIxDb(a[0],i,c,n.pos-c),a[0].feed.bypassStaticCache||a[0].feed.StaticReceived(a[0].fs))},t.prototype.StoreSymbolToIxDb=function(e,t,n,i){return!1},t.prototype.LoadSymbolFromIxDb=function(e,t){},t}();e.StaticDataCache=t}(IDS||(IDS={})),function(e){var t=function(){function t(e){this.controller=e,this.systemAlertsData()}return t.prototype.systemAlerts=function(t){var n=this,i=new e.SubscribeOWCRequest(InfrontUtil.makeUUID()),r=new e.SubscriptionOptions;r.onError=t.onError,r.onSuccess=function(e){},r.onData=function(e){n.processOWCMessage(e)};var a=this.controller.getMessageService().sendSubscriptionRequest(i,r),s=new e.RequestOptions;return s.onError=t.onError,s.onSuccess=function(){},function(){a(s)}},t.prototype.processOWCMessage=function(t){var n=new e.SystemAlertsEvent;n.systemMessage=t,this.controller.publishEvent(n)},t.prototype.systemAlertsData=function(){var t=this,n=new e.GetOWCRequest,i=new e.RequestOptions,r=new e.DataOptions;r.onData=function(e){if(null!=e&&InfrontUtil.isArray(e))for(var n=0,i=e;n<i.length;n++){var r=i[n];t.processOWCMessage(r)}},r.onError=InfrontUtil.errorLogCallback,i.onError=r.onError,i.onSuccess=function(e){e.hasOwnProperty("messages")&&r.onData(e.messages)},this.systemAlerts(r),this.controller.getMessageService().sendRequest(n,i)},t}();e.SystemAlerts=t}(Infront||(Infront={})),function(e){var t=function(e){function t(n,i){var r=e.call(this)||this;return r.name=t.kEventName,r.trades=InfrontUtil.isArray(n)?n:[n],r.portfolio=i,r}return __extends(t,e),t.kEventName="onTradeExecuted",t}(e.InfrontEvent);e.TradeExecutedEvent=t;var n=function(){};e.TradingPower=n;var i=function(e,t){this.name=e,this.description=t};e.Portfolio=i;var r=function(){function n(t){var n=this;this.tradeExecutedEventBuffer={},this.tradeExecutedTimeoutId=null,this.tradesInitialized={},this.positionsInitialized={},this.currentPortfolioCurrency="",this.infront=t,this.observerManager=new InfrontUtil.ObserverManager,this.currencyConverter=new e.CurrencyConverter(this.infront,!1),this.portfolioPollingTimeout=null,this.started=!1,this.initialized=!1,this.portfoliosLoaded=!1,this.subscribeToAll=0,this.currentPortfolioReady=!1,this.readyPortfolios=[],this.todaysPLEnabled=!1,this.strategyManager=new a(this.infront),this.infront.registerEventObserver(e.TradingConnectedEvent.kEventName,function(e){return n.didTradingLogin(e.pid,e.sid)}),this.infront.registerEventObserver(e.TradingDisconnectedEvent.kEventName,function(e){return n.didTradingLogout()})}return n.prototype.init=function(){this.initialized=!0,this.getPortfolios()},n.prototype.didTradingLogin=function(e,t){this.infront.trHasServerProp(IDS.ServerProperties.NoPortfolioTradesUpdate)?this.pollPortfolioValues=!1:this.pollPortfolioValues=!0,IDS.DEBUG_TRADING_FEATURES&&IDS.log("Portfolio polling:",this.pollPortfolioValues),this.init()},n.prototype.didTradingLogout=function(){if(this.portfolios)for(var e=0;e<this.portfolios.length;e++)this.clearDataStructuresForPortfolio(this.portfolios[e]);this.portfolios=null,this.initialized=!1,this.portfoliosLoaded=!1,this.setCurrentPortfolio(null),this.subscribeToAll=0},n.prototype.StreamingTradingPower=function(e,t){var n=new i(t.portfolio,"");this.receiveTradingPower(n,t)},n.prototype.StreamingPortfolioPositions=function(e,t){var n=new i(t.portfolio,"");this.receivePortfolioResponse(n,t.ToMws())},n.prototype.StreamingOrderStatus=function(e,t){var n=new i(t.portfolio,"");this.receiveOrders(n,{order:t.ToMws()})},n.prototype.StreamingTrade=function(e,t,n){var r=new i(t.portfolio,"");this.receiveTrades(r,{trade:t.ToMws()},n)},n.prototype.ResponseError=function(e){IDS.DEBUG_VERBOSE&&IDS.log("%c"+e.errorMsg,"color: #f60; font-size: 14px;")},n.prototype.doSubscribeToAllPortfolios=function(){for(var e=[],t=0;t<this.portfolios.length;t++)e.push(this.subscribe(this.portfolios[t]));this.unsubscribeAll=function(){for(;e.length>0;)e.pop()()}},n.prototype.subscribeToAllPortfolios=function(){0==this.subscribeToAll&&this.portfoliosLoaded&&(this.unsubscribe(),this.doSubscribeToAllPortfolios()),this.subscribeToAll++},n.prototype.unsubscribeFromAllPortfolios=function(){this.subscribeToAll--,0==this.subscribeToAll&&(this.unsubscribe(),this.subscribe(this.currentPortfolio))},n.prototype.getPortfolios=function(){var t=this;if(this.initialized&&this.started){this.portfolios=null;var n=new e.DataOptions;n.onData=function(n){n.hasOwnProperty(e.MWSConstants.portfolios)&&t.updatePortfolios(n[e.MWSConstants.portfolios])},n.onError=InfrontUtil.errorLogCallback,this.infront.trGetPortfolioNames(n)}},n.prototype.getPortfolio=function(e){for(var t=0;t<this.portfolios.length;t++)if(this.portfolios[t].name==e)return this.portfolios[t];return null},n.prototype.createDataStructuresForPortfolio=function(t){this.infront.getCache().createArray(e.CacheKeyFactory.createPortfolioPositionsKey(t),e.CacheKeyFactory.createPositionKey),this.infront.getCache().createArray(e.CacheKeyFactory.createPortfolioCashPositionsKey(t),e.CacheKeyFactory.createCashPositionKey),this.infront.getCache().createArray(e.CacheKeyFactory.createPortfolioOrdersKey(t),e.CacheKeyFactory.createOrderKey),this.infront.getCache().createArray(e.CacheKeyFactory.createPortfolioTradesKey(t),e.CacheKeyFactory.createTradeKey),this.infront.getCache().createArray(e.CacheKeyFactory.createPortfolioValuesKey(t),e.CacheKeyFactory.createValueKey)},n.prototype.clearDataStructuresForPortfolio=function(t){this.infront.getCache().clearArray(e.CacheKeyFactory.createPortfolioPositionsKey(t)),this.infront.getCache().clearArray(e.CacheKeyFactory.createPortfolioCashPositionsKey(t)),this.infront.getCache().clearArray(e.CacheKeyFactory.createPortfolioOrdersKey(t)),this.infront.getCache().clearArray(e.CacheKeyFactory.createPortfolioTradesKey(t)),this.infront.getCache().clearArray(e.CacheKeyFactory.createPortfolioValuesKey(t))},n.prototype.updatePortfolios=function(e){var t=this;if(e&&e.length>0){this.portfolios=[];for(var n=0;n<e.length;n++){var r=new i(e[n].name,e[n].description);this.portfolios.push(r),this.createDataStructuresForPortfolio(r)}this.externallySetActivePortfolioName?this.setCurrentPortfolioName(this.externallySetActivePortfolioName):this.setCurrentPortfolio(this.portfolios[0]),this.subscribeToAll>0&&this.doSubscribeToAllPortfolios(),this.observerManager.foreach(function(e){e.availablePortfoliosChanged(t.portfolios)}),this.portfoliosLoaded=!0,this.processDeferredCalls()}else this.portfolios=null,this.setCurrentPortfolio(null)},n.prototype.setCurrentPortfolioName=function(e){if(this.portfolios&&this.portfolios.length>0){for(var t=0;t<this.portfolios.length;t++)if(this.portfolios[t].name==e){this.setCurrentPortfolio(this.portfolios[t]);break}var n=new i(e,"");this.createDataStructuresForPortfolio(n),this.setCurrentPortfolio(n)}else this.externallySetActivePortfolioName=e},n.prototype.setCurrentPortfolio=function(e){var t=this;null!=this.portfolioPollingTimeout&&(clearTimeout(this.portfolioPollingTimeout),this.portfolioPollingTimeout=null),(e?e.name:"")!=(this.currentPortfolio?this.currentPortfolio.name:"")&&(this.externallySetActivePortfolioName=null,this.currentPortfolio=e,0==this.subscribeToAll&&(this.unsubscribe(),this.unsubscribeAll=this.subscribe(e)),this.currentPortfolioReady=!1,this.observerManager.foreach(function(n){n.currentPortfolioChanged(t.currentPortfolio),(t.currentPortfolioReady||null==e)&&n.currentPortfolioReady(t.currentPortfolio)}))},n.prototype.getCurrentPortfolio=function(){return this.currentPortfolio},n.prototype.portfolioReady=function(e){e&&-1==this.readyPortfolios.indexOf(e.name)&&this.readyPortfolios.push(e.name),this.currentPortfolioReady||e.name!=this.currentPortfolio.name||(this.currentPortfolioReady=!0,this.observerManager.foreach(function(t){t.currentPortfolioReady(e)}),this.startPortfolioPolling(e))},n.prototype.observe=function(e){var t=this;this.started||(this.started=!0,this.getPortfolios()),this.observerManager.addObserver(e),null!=this.portfolios&&InfrontUtil.setZeroTimeout(function(){e.currentPortfolioChanged(t.currentPortfolio),e.availablePortfoliosChanged(t.portfolios),t.readyPortfolios.indexOf(t.currentPortfolio.name)>-1&&e.currentPortfolioReady(t.currentPortfolio)})},n.prototype.removeObserver=function(e){this.observerManager.removeObserver(e)},n.prototype.receiveTradingPower=function(t,n){var i=this.infront.getCache();if(n){var r=__assign({portfolio:n.portfolio,trading_power:n.tradingPower,base_trading_power:n.tradingPower,currency:n.currency,base_currency:n.baseCurrency?n.baseCurrency:n.currency},n.symbol&&{symbol:n.symbol},n.loanToValueRatio&&{margin_rate:n.loanToValueRatio},void 0!==n.shortable&&{is_shortable:n.shortable}),a=e.CacheKeyFactory.createPortfolioDataKey(t);i.update(a,r);var s=r.base_currency;if(this.currentPortfolioCurrency!=s){this.currentPortfolioCurrency=s;var o=new e.PortfolioCurrencyChangedEvent(s);this.infront.publishEvent(o)}var l=e.CacheKeyFactory.createPortfolioValuesKey(t);i.updateArrayItem(l,{portfolio:t.name,value:n.tradingPower,currency:s,key:e.MWSConstants.trading_power,name:"Trading Power"}),IDS.DEBUG_CACHE_TRADING_POWER&&i.inspectCache(a,"TradingPower cache"),IDS.DEBUG_CACHE_TRADING_POWER&&i.inspectCache(l,"TradingPower cache",e.CacheSource.CachedArrays)}},n.prototype.updatePositionInstrument=function(t){var n=this,i=t[e.MWSConstants.instrument],r=e.CacheKeyFactory.createPositionKey(t),a=new e.DataOptions;a.onData=function(t){var a={};if(InfrontUtil.isArray(t)?a[e.MWSConstants.instrument]=t[0][e.MWSConstants.instrument]:a[e.MWSConstants.instrument]=t[e.MWSConstants.instrument],n.infront.getCache().update(r,a),i.hasOwnProperty(e.MWSConstants.ticker)&&i.hasOwnProperty(e.MWSConstants.feed)){var s=e.CacheKeyFactory.createInstrumentKey(i);n.infront.getCache().update(s,a)}},a.onError=InfrontUtil.errorLogCallback,this.infront.instrumentInfo(i.feed,i.ticker,a)},n.prototype.setUpMarketValueField=function(t){var i=e.CacheKeyFactory.createPositionKey(t),r=e.Instrument.inf_clone(t[e.MWSConstants.instrument]),a=e.Instrument.isValid(r),s=e.CacheKeyFactory.createInstrumentKey(r),o=new e.FieldReference(s,[e.MWSConstants.instrument,e.MWSConstants.currency]),l=new e.FieldReference(i,[e.MWSConstants.instrument,e.MWSConstants.currency]);this.infront.getCache().createComputedField(i,n.kCompositeCurrency,[l,o],function(e){return e[0]||e[1]});var c=e.CacheKeyFactory.createPortfolioDataKey(this.currentPortfolio),d=new e.FieldReference(c,[e.MWSConstants.base_currency]),u=new e.FieldReference(i,e.MWSConstants.volume);if(a){var h=new e.FieldReference(s,e.MWSConstants.last_valid),p=new e.FieldReference(s,e.BindingCache.kCacheTimestampField),m=new e.FieldReference(i,e.MWSConstants.multiplier),g=new e.FieldReference(i,e.MWSConstants.market_price);this.infront.getCache().createComputedField(i,n.kMarketValue,[u,h,p,m,g],function(e){return InfrontUtil.isNumber(e[0])&&InfrontUtil.isNumber(e[1])?e[0]*e[1]*e[3]:InfrontUtil.isNumber(0)&&InfrontUtil.isNumber(e[4])&&InfrontUtil.isNumber(e[2])?e[0]*e[4]*e[3]:InfrontUtil.isNumber(e[2])?0:void 0})}else{var f={};f[n.kMarketValue]=t[e.MWSConstants.volume]*t[e.MWSConstants.market_price]*t[e.MWSConstants.multiplier],this.infront.getCache().update(i,f)}var v=new e.FieldReference(i,n.kMarketValue),y=new e.FieldReference(i,n.kBaseMarketValue),b=new e.FieldReference(i,[e.MWSConstants.instrument,e.MWSConstants.currency]);this.currencyConverter.createConvertedFieldFromCache(v,b,d,y);var T=new e.FieldReference(i,n.kPLToday),S=new e.FieldReference(i,n.kBasePLToday);this.currencyConverter.createConvertedFieldFromCache(T,b,d,S);var C=new e.FieldReference(i,e.MWSConstants.invested);this.infront.getCache().createComputedField(i,n.kPLTodayPct,[C,T],n.pctCalculation),this.infront.getCache().createComputedField(i,n.kResult,[C,v],n.resultCalculation);var I=new e.FieldReference(i,e.MWSConstants.base_invested);t.hasOwnProperty(e.MWSConstants.base_invested)&&this.infront.getCache().createComputedField(i,n.kBaseResult,[I,y],n.resultCalculation);var _=new e.FieldReference(i,n.kResult),M=new e.FieldReference(i,n.kBaseCurrencyResult);this.currencyConverter.createConvertedFieldFromCache(_,b,d,M),this.infront.getCache().createComputedField(i,n.kResultPct,[C,_],n.pctCalculation);var E=new e.FieldReference(i,n.kBaseResult);this.infront.getCache().createComputedField(i,n.kBaseResultPct,[I,E],n.pctCalculation),this.infront.getCache().createComputedField(i,n.kAvgPrice,[u,C],n.divCalculation);var w=new e.FieldReference(i,n.kSCollateral),A=new e.FieldReference(i,n.kBaseCollateral);this.currencyConverter.createConvertedFieldFromCache(w,b,d,A),e.Instrument.isValid(r)&&this.infront.subscribe(r,["LAST","LAST_VALID","PREVIOUS_CLOSE"],!0)},n.prototype.setUpTodaysPLField=function(t,i){var r=this,a=e.CacheKeyFactory.createPositionKey(i),s=new e.Instrument(i[e.MWSConstants.instrument][e.MWSConstants.feed],i[e.MWSConstants.instrument][e.MWSConstants.ticker]);this.infront.getCache().customBind(a,[n.kBaseMarketValue],e.BindingFactory.createInlineBinding(function(e){r.calculatePositionPL(t,s)}))},n.prototype.setUpCashPositionMarketValueField=function(t){var i=new e.FieldReference(e.CacheKeyFactory.createPortfolioDataKey(this.currentPortfolio),[e.MWSConstants.base_currency]),r=e.CacheKeyFactory.createCashPositionKey(t),a=new e.FieldReference(r,e.MWSConstants.amount),s=new e.FieldReference(r,[e.MWSConstants.cash,e.MWSConstants.currency]),o=new e.FieldReference(r,n.kBaseMarketValue);this.currencyConverter.createConvertedFieldFromCache(a,s,i,o)},n.prototype.getStrategy=function(e,t,n){this.strategyManager.getStrategy(e,t,n)},n.prototype.processOrderObject=function(t){var i=this;if(t.hasOwnProperty(e.MWSConstants.algo_params)&&t.hasOwnProperty(e.MWSConstants.algo_id)&&t[e.MWSConstants.algo_id].length>0){var r=t[e.MWSConstants.algo_params];this.strategyManager.getStrategy(t[e.MWSConstants.instrument][e.MWSConstants.feed],t[e.MWSConstants.algo_id],function(n){if(n){for(var a={},s=0;s<r.length;s++){var o=r[s][e.MWSConstants.id].toLowerCase();a[o]=i.processAlgoParam(o,r[s][e.MWSConstants.value],n)}var l={};l[e.MWSConstants.algo_params]=a,i.infront.getCache().update(e.CacheKeyFactory.createOrderKey(t),l)}}),delete t[e.MWSConstants.algo_params]}var a={};if(Object.keys(t.custom_tags).forEach(function(e,n){var r=i.infront.trGetCustomFieldLabel(t.instrument.market,t.custom_tags[e].value);r&&(a[t.custom_tags[e].id]=r)}),t.custom_tags_fields=a,t.hasOwnProperty(e.MWSConstants.custom_tags)){for(var s=t[e.MWSConstants.custom_tags],o={},l=0;l<s.length;l++)o[s[l][e.MWSConstants.id].toString().toLowerCase()]=s[l][e.MWSConstants.value];t[e.MWSConstants.custom_tags]=o}t.hasOwnProperty(e.MWSConstants.read_only)||(t[e.MWSConstants.read_only]=!1),t.hasOwnProperty(e.MWSConstants.fail_code)||(t[e.MWSConstants.fail_code]=null),t.hasOwnProperty(e.MWSConstants.error_message)||(t[e.MWSConstants.error_message]=null);var c=e.CacheKeyFactory.createInstrumentKey(new e.Instrument(t[e.MWSConstants.instrument][e.MWSConstants.feed],t[e.MWSConstants.instrument][e.MWSConstants.ticker])),d=e.CacheKeyFactory.createOrderKey(t),u=new e.FieldReference(c,[this.infront.isStreaming()?"last":"last_valid"]),h=new e.FieldReference(d,["price"]);return this.infront.getCache().createComputedField(d,n.kOrderHealthKey,[u,h],function(e){if(InfrontUtil.isNumber(e[0])&&InfrontUtil.isNumber(e[1])){var t=e[1]-e[0],n=100*Math.abs(t/e[1]);return n>2?"BAD":n<.5?"GOOD":"NEUTRAL"}return null}),this.infront.subscribe(t[e.MWSConstants.instrument],["LAST","LAST_VALID"],!0),t},n.prototype.processAlgoParam=function(t,n,i){var r,a=i.findParam(t);if(a)switch(a.type){case e.AlgoParam.PRICE:case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:r=parseFloat(n);break;case e.AlgoParam.DATE:var s=n;r=s.substr(0,4)+"-"+s.substr(4,2)+"-"+s.substr(6,2);break;case e.AlgoParam.TIME:case e.AlgoParam.DATETIME:case e.AlgoParam.FREE_TEXT:case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.DROPDOWN:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:case e.AlgoParam.MULTI_LINE:default:r=n}else r=n;return r},n.prototype.processPosition=function(t,n){n.hasOwnProperty(e.MWSConstants.portfolio)||(n[e.MWSConstants.portfolio]=t.name),n.hasOwnProperty(e.MWSConstants.cash)?(n[e.MWSConstants.instrument]={instrument_type:"CASH",ticker:n[e.MWSConstants.cash][e.MWSConstants.currency]},n[e.MWSConstants.amount]<0&&(n[e.MWSConstants.amount]=n[e.MWSConstants.amount]),this.setUpCashPositionMarketValueField(n),this.infront.getCache().updateArrayItem(e.CacheKeyFactory.createPortfolioCashPositionsKey(t),n)):n.hasOwnProperty(e.MWSConstants.volume)&&0!=n[e.MWSConstants.volume]?(n.hasOwnProperty(e.MWSConstants.multiplier)||(n[e.MWSConstants.multiplier]=1),n.hasOwnProperty(e.MWSConstants.base_result)&&delete n[e.MWSConstants.base_result],n.hasOwnProperty(e.MWSConstants.market_price)&&InfrontUtil.isNumber(n[e.MWSConstants.market_price])||(n[e.MWSConstants.invested]?n[e.MWSConstants.market_price]=n[e.MWSConstants.invested]/n[e.MWSConstants.volume]:n[e.MWSConstants.market_price]=0),this.infront.getCache().updateArrayItem(e.CacheKeyFactory.createPortfolioPositionsKey(t),n),this.setUpMarketValueField(n),this.setUpTodaysPLField(t,n),this.updatePositionInstrument(n)):n.hasOwnProperty(e.MWSConstants.volume)&&0==n[e.MWSConstants.volume]&&(this.infront.getCache().deleteArrayItem(e.CacheKeyFactory.createPortfolioPositionsKey(t),n),this.infront.getCache().update(e.CacheKeyFactory.createPotentialPositionKey(t.name,n[e.MWSConstants.instrument]),{volume:0}))},n.prototype.calculatePositionPLForPortfolio=function(t){var n=this;if(this.positionsInitialized[t.name]&&this.tradesInitialized[t.name]){var i=this.infront.getCache();i.getArray(e.CacheKeyFactory.createPortfolioPositionsKey(t)).foreach(function(r){var a=i.get(r,[e.MWSConstants.instrument,e.MWSConstants.feed]),s=i.get(r,[e.MWSConstants.instrument,e.MWSConstants.ticker]),o=new e.Instrument(a,s);n.calculatePositionPL(t,o)})}},n.prototype.calculatePositionPL=function(t,i){if(this.todaysPLEnabled){var r,a,s,o,l=this.infront.getCache(),c=e.CacheKeyFactory.createPotentialPositionKey(t.name,i),d=e.CacheKeyFactory.createInstrumentKey(i),u=[];l.getArray(e.CacheKeyFactory.createPortfolioTradesKey(t)).foreach(function(t){var n=l.get(t,[e.MWSConstants.instrument,e.MWSConstants.feed]),r=l.get(t,[e.MWSConstants.instrument,e.MWSConstants.ticker]);if(i.feed==n&&i.ticker==r){var a={};a.volume=l.get(t,[e.MWSConstants.volume]),a.price=l.get(t,[e.MWSConstants.price]),a.buySell=l.get(t,[e.MWSConstants.buy_or_sell]),a.tradeTime=Date.parse(l.get(t,[e.MWSConstants.trade_time])),a.signedVolume=("SELL"==a.buySell?-1:1)*a.volume,u.push(a)}}),u=u.sort(function(e,t){return e-t});var h=new InfrontUtil.MultiCallbackHandler(function(){o=l.get(c,[e.MWSConstants.market_price]),-1==s&&(s=o,a=o);var t=l.get(d,e.MWSConstants.contract_size);InfrontUtil.isNumber(t)||(t=1);var i=s-a;InfrontUtil.isNumber(i)||(i=0);var h=n.doCalculatePositionPL(r,a,s,i,t,u),p={};p[n.kPLToday]=h,l.update(c,p)});l.asyncGet(h.addCallback(function(e){r=e}),c,e.MWSConstants.volume),e.Instrument.isValid(i)?(l.asyncGet(h.addCallback(function(e){a=e}),d,e.MWSConstants.previous_close),l.asyncGet(h.addCallback(function(e){s=e}),d,e.MWSConstants.last_valid)):(a=-1,s=-1)}},n.doCalculatePositionPL=function(e,t,n,i,r,a){function s(e,n,i,a){var s,o;a?(o=e,0!=u&&(s=d/(u*r),o=InfrontUtil.sign(e)*Math.min(Math.abs(e),Math.abs(u)),c+=o*(s-i),u+=o,d+=o*s,o=e-o),0!=o&&(c+=o*((s=t)-i),0!=h&&(Math.abs(h)>Math.abs(o)?h+=o:h=0))):(u+=e,d+=n),l+=e}function o(e,t){void 0===t&&(t=null);var n=null!=t?t:e.signedVolume;return e.price*n}var l,c,d,u,h,p;if(0==t||0==n)return"-";l=e,c=0,d=0,u=0;for(var m=0;m<a.length;m++)l-=a[m].signedVolume;for(h=l,m=0;m<a.length;m++){var g=a[m],f=0!=l&&InfrontUtil.sign(g.signedVolume)!=InfrontUtil.sign(l);f?(s(p=InfrontUtil.sign(g.signedVolume)*Math.min(g.volume,Math.abs(l)),o(g,Math.abs(p)),g.price,f),0!=(p=g.signedVolume-p)&&s(p,o(g,Math.abs(p)),g.price,f)):s(g.signedVolume,o(g),g.price,f)}return(i*h+(0!=u?u*(n-d/(u*r)):0)+c)*r},n.prototype.calculateAvgPrice=function(t,i){var r=e.CacheKeyFactory.createOrderIdKey(t.name,i),a=e.CacheKeyFactory.createPortfolioTradesKey(t),s=0,o=0,l=this.infront.getCache();l.getArray(a).foreach(function(t){if(l.get(t,e.MWSConstants.order_id)===i){var n=l.get(t,e.MWSConstants.volume),r=l.get(t,e.MWSConstants.price),a=s+n;0!=a&&(o=(o*s+r*n)/a,s=a)}});var c={};c[n.kSAvgPrice]=o,l.update(r,c)},n.prototype.receivePortfolioResponse=function(t,i){var r,a=this.infront.getCache();if(i.hasOwnProperty(e.MWSConstants.positions)){for(var s=i[e.MWSConstants.positions],o=[],l=0;l<s.length;l++){var c=e.CacheKeyFactory.createPositionKey(s[l]);-1!=o.indexOf(c)&&0==s[l][e.MWSConstants.volume]||(this.processPosition(t,s[l]),o.push(c))}this.positionsInitialized[t.name]=!0,this.calculatePositionPLForPortfolio(t)}if(i.hasOwnProperty(e.MWSConstants.position)&&this.processPosition(t,i[e.MWSConstants.position]),i.hasOwnProperty(e.MWSConstants.values)){var d=i[e.MWSConstants.values],u=[],h=[];for(l=0;l<d.length;l++){var p=n.createPortfolioValueId(d[l].name);p===e.MWSConstants.cash&&h.push(d[l]),p!=n.kTradingpower&&p!=n.kTrading_power&&(d[l].key=p,u.push(d[l]))}var m=e.CacheKeyFactory.createPortfolioValuesKey(t);a.updateArrayItems(m,u),IDS.DEBUG_CACHE_PORTFOLIO&&a.inspectCache(m,"Portfolio cache",e.CacheSource.CachedArrays);var g=e.CacheKeyFactory.createPortfolioCashPositionsKey(t);a.updateArrayItems(g,h),IDS.DEBUG_CACHE_PORTFOLIO&&a.inspectCache(g,"Portfolio cache",e.CacheSource.CachedArrays)}if(i.hasOwnProperty(e.MWSConstants.value)){var f=i[e.MWSConstants.value],v=n.createPortfolioValueId(f.name);v!=n.kTradingpower&&v!=n.kTrading_power&&(f.key=v,a.updateArrayItem(e.CacheKeyFactory.createPortfolioValuesKey(t),f))}(i.hasOwnProperty(e.MWSConstants.alerts)&&a.updateArrayItems(e.CacheKeyFactory.createPortfolioAlertsKey(t),i[e.MWSConstants.alerts]),i.hasOwnProperty(e.MWSConstants.alert)&&a.updateArrayItem(e.CacheKeyFactory.createPortfolioAlertsKey(t),i[e.MWSConstants.alert]),i.hasOwnProperty(e.MWSConstants.total_invested)&&((r={})[e.MWSConstants.total_invested]=i[e.MWSConstants.total_invested],a.update(e.CacheKeyFactory.createPortfolioDataKey(t),r)),i.hasOwnProperty(e.MWSConstants.volume))&&((r={})[e.MWSConstants.volume]=i[e.MWSConstants.volume],a.updateArrayItem(e.CacheKeyFactory.createPotentialPositionKey(i.portfolio,i.instrument),r));this.portfolioReady(t)},n.prototype.subscribePortfolio=function(t){var n=this;this.positionsInitialized[t.name]=!1;var i=new e.DataOptions;return i.onError=function(e,i){IDS.DEBUG_VERBOSE&&IDS.log(i),n.positionsInitialized[t.name]=!0,n.portfolioReady(t)},i.onData=function(e){n.receivePortfolioResponse(t,e)},this.infront.trPortfolio(t.name,i)},n.prototype.startPortfolioPolling=function(e){var t,i=this;(this.stopPortfolioPolling(),this.pollPortfolioValues)&&(t=function(){i.updatePortfolioValues(e),i.continuousPortfolioPollingTimeout=setTimeout(t,n.kPortfolioPollingInterval)},this.continuousPortfolioPollingTimeout=setTimeout(t,n.kPortfolioPollingInterval))},n.prototype.stopPortfolioPolling=function(){null!=this.continuousPortfolioPollingTimeout&&(clearTimeout(this.continuousPortfolioPollingTimeout),this.continuousPortfolioPollingTimeout=null)},n.prototype.sendTradeExecutedEvent=function(i){var r=this,a=i[e.MWSConstants.portfolio];this.tradeExecutedEventBuffer.hasOwnProperty(i[e.MWSConstants.portfolio])||(this.tradeExecutedEventBuffer[a]=[]),this.tradeExecutedEventBuffer[a].push(i),null==this.tradeExecutedTimeoutId&&(this.tradeExecutedTimeoutId=setTimeout(function(){for(var n in r.tradeExecutedEventBuffer)if(r.tradeExecutedEventBuffer.hasOwnProperty(n)){var i=new t(r.tradeExecutedEventBuffer[n],n);e.EventCallbackMap.eventMap.publish(i)}r.tradeExecutedTimeoutId=null,r.tradeExecutedEventBuffer={}},n.kTradeExecutedEventDelay))},n.prototype.updatePortfolioValues=function(t){var i=this;null==this.portfolioPollingTimeout&&(this.portfolioPollingTimeout=setTimeout(function(){var r=new e.DataOptions;r.onError=function(e,t){i.portfolioPollingTimeout=null},r.onData=function(r){if(r.hasOwnProperty(e.MWSConstants.positions))for(var a=0,s=r[e.MWSConstants.positions];a<s.length;a++){var o=s[a];o.hasOwnProperty(e.MWSConstants.cash)&&i.processPosition(t,o)}if(r.hasOwnProperty(e.MWSConstants.values)){for(var l=r[e.MWSConstants.values],c=[],d=0;d<l.length;d++){var u=n.createPortfolioValueId(l[d].name);u!=n.kTradingpower&&u!=n.kTrading_power&&(l[d].key=u,c.push(l[d]))}i.infront.getCache().updateArrayItems(e.CacheKeyFactory.createPortfolioValuesKey(t),c)}i.portfolioPollingTimeout=null},r.streaming=!1,i.infront.trPortfolio(t.name,r)},n.kPortfolioPollingDelay))},n.prototype.receiveOrders=function(t,i){var r={},a=this.infront.getCache(),s=e.CacheKeyFactory.createPortfolioOrdersKey(t);if(r[n.kInitializedField]=!0,i.hasOwnProperty(e.MWSConstants.orders))for(var o=i[e.MWSConstants.orders],l=0;l<o.length;l++){var c=e.CacheKeyFactory.createOrderIdKey(t.name,o[l][e.MWSConstants.order_id]);a.updateArrayItem(s,this.processOrderObject(o[l])),a.update(c,r),IDS.DEBUG_CACHE_ORDERS&&a.inspectCache(s,"Orders cache",e.CacheSource.CachedArrays),IDS.DEBUG_CACHE_ORDERS&&a.inspectCache(c,c+" cache")}i.hasOwnProperty(e.MWSConstants.order)&&(a.updateArrayItem(s,this.processOrderObject(i[e.MWSConstants.order])),c=e.CacheKeyFactory.createOrderIdKey(t.name,i[e.MWSConstants.order][e.MWSConstants.order_id]),a.update(c,r),this.pollPortfolioValues&&this.updatePortfolioValues(t),IDS.DEBUG_CACHE_ORDERS&&a.inspectCache(s,"Orders cache",e.CacheSource.CachedArrays),IDS.DEBUG_CACHE_ORDERS&&a.inspectCache(c,c+" cache"))},n.prototype.subscribeOrdersAndTrades=function(t){var n=this,i=new e.DataOptions;return i.onError=InfrontUtil.errorLogCallback,i.onData=function(e){n.receiveOrders(t,e),n.receiveTrades(t,e,!1),n.tradesInitialized[t.name]=!0},this.tradesInitialized[t.name]=!1,this.infront.trOrdersAndTrades(t.name,i)},n.prototype.receiveTrades=function(t,n,i){var r=this.infront.getCache(),a=e.CacheKeyFactory.createPortfolioTradesKey(t);if(n.hasOwnProperty(e.MWSConstants.trades)){r.updateArrayItems(a,n[e.MWSConstants.trades]),this.tradesInitialized[t.name]=!0,this.calculatePositionPLForPortfolio(t);for(var s=n[e.MWSConstants.trades],o=[],l=0;l<s.length;l++){var c=s[l][e.MWSConstants.order_id];-1==o.indexOf(c)&&(this.calculateAvgPrice(t,c),o.push(c))}}if(n.hasOwnProperty(e.MWSConstants.trade)){var d=n[e.MWSConstants.trade];r.updateArrayItem(a,d);var u=new e.Instrument(d[e.MWSConstants.instrument][e.MWSConstants.feed],d[e.MWSConstants.instrument][e.MWSConstants.ticker]);this.calculatePositionPL(t,u),this.calculateAvgPrice(t,d[e.MWSConstants.order_id]),i||this.sendTradeExecutedEvent(d),this.pollPortfolioValues&&this.updatePortfolioValues(t)}IDS.DEBUG_CACHE_TRADES&&r.inspectCache(a,"Trades cache",e.CacheSource.CachedArrays)},n.prototype.unsubscribe=function(){this.unsubscribeAll&&(this.unsubscribeAll(),this.unsubscribeAll=null)},n.prototype.setComputedCacheValues=function(t){var i=e.CacheKeyFactory.createPortfolioValuesKey(t),r=e.CacheKeyFactory.createPotentialValueKey(t.name,n.kTotalBaseMarketValue),a=e.CacheKeyFactory.createPortfolioDataKey(t),s=e.CacheKeyFactory.createPortfolioCashPositionsKey(t),o=n.createPortfolioValueId("Sum Cash"),l=e.CacheKeyFactory.createPotentialValueKey(t.name,"Sum Cash");this.infront.getCache().createInCacheFieldComputation(l,"value",s,n.kBaseMarketValue,e.ComputationStrategy.PASSIVE,function(e){return e},InfrontUtil.sumArray),this.infront.getCache().update(l,{name:"Sum Cash",key:o,portfolio:t.name});var c=new e.FieldReference(a,"base_currency");this.infront.getCache().createComputedField(l,"currency",[c],function(e){return e[0]}),this.infront.getCache().insertKeyIntoArray(i,l);var d="Portfolio value",u=n.createPortfolioValueId(d),h=e.CacheKeyFactory.createPotentialValueKey(t.name,d),p=new e.FieldReference(r,"value"),m=new e.FieldReference(l,"value");this.infront.getCache().createComputedField(h,"value",[p,m],function(e){return("number"==typeof e[0]?e[0]:0)+("number"==typeof e[1]?e[1]:0)}),this.infront.getCache().createComputedField(h,"currency",[c],function(e){return e[0]}),this.infront.getCache().update(h,{name:d,key:u,portfolio:t.name}),this.infront.getCache().insertKeyIntoArray(i,h)},n.prototype.subscribe=function(e){var t=[];return e&&(t.push(this.subscribePortfolio(e)),t.push(this.subscribeOrdersAndTrades(e)),this.setComputedCacheValues(e)),function(){for(;t.length>0;)t.pop()()}},n.prototype.processDeferredCalls=function(){if(this.deferredCalls){for(var e=0;e<this.deferredCalls.length;e++)this.deferredCalls[e]();this.deferredCalls=null}},n.prototype.deferToPostPortfolioLoad=function(e){this.portfoliosLoaded?e():(this.deferredCalls||(this.deferredCalls=[]),this.deferredCalls.push(e))},n.prototype.enableTodaysPL=function(){this.todaysPLEnabled||(this.todaysPLEnabled=!0,this.currentPortfolio&&this.calculatePositionPLForPortfolio(this.currentPortfolio))},n.prototype.needValue=function(e){var t=this,i=null;if(e){switch(e.toLowerCase()){case n.kTotalBaseMarketValue:i=function(){t.needTotalBaseMarketValue()};break;case n.kTotalBaseResult:i=function(){t.needTotalResult()};break;case n.kTotalBasePLToday:this.enableTodaysPL(),i=function(){t.needTotalBasePlToday()};break;case n.kTotalBaseResultPct:this.needValue(n.kTotalBaseInvested),this.needValue(n.kTotalBaseResult),i=function(){t.createPercentageValueForAllPortfolios(n.kTotalBaseResultPct,n.kTotalBaseInvested,n.kTotalBaseResult)};break;case n.kTotalBasePLTodayPct:this.needValue(n.kTotalBaseMarketValue),this.needValue(n.kTotalBasePLToday),this.enableTodaysPL(),i=function(){t.createPercentageValueForAllPortfolios(n.kTotalBasePLTodayPct,n.kTotalBaseMarketValue,n.kTotalBasePLToday)};break;case n.kTotalBaseInvested:i=function(){t.needTotalBaseInvested()};break;case"own_capital_change":i=function(){t.needOwnCapitalChange()};break;case"own_capital_change_percent":i=function(){t.needOwnCapitalChangePercent()};break;case n.kTotalTrades:i=function(){t.needTotalTrades()};break;case n.kTotalOrders:i=function(){t.needTotalOrders()}}null!=i&&this.deferToPostPortfolioLoad(i)}},n.prototype.needTotalResult=function(){this.createSummedValueForAllPortfolios(n.kBaseResult,n.kTotalBaseResult)},n.prototype.needTotalBasePlToday=function(){this.createSummedValueForAllPortfolios(n.kBasePLToday,n.kTotalBasePLToday)},n.prototype.needTotalBaseMarketValue=function(){this.createSummedValueForAllPortfolios(n.kBaseMarketValue,n.kTotalBaseMarketValue)},n.prototype.needTotalBaseInvested=function(){this.createSummedValueForAllPortfolios(e.MWSConstants.base_invested,n.kTotalBaseInvested)},n.prototype.needTotalTrades=function(){for(var t=this,i=function(){var i=r.portfolios[a],s=e.CacheKeyFactory.createPotentialValueKey(i.name,n.kTotalTrades),o=e.CacheKeyFactory.createPortfolioValuesKey(i),l=e.CacheKeyFactory.createPortfolioTradesKey(i),c=e.BindingFactory.createInlineBinding(function(e){t.infront.getCache().update(s,{value:e})});r.infront.getCache().getArray(l).lengthObservable.observe(c),r.infront.getCache().getArray(o).contains(s)||r.infront.getCache().getArray(o).push(s)},r=this,a=0;a<this.portfolios.length;a++)i()},n.prototype.needTotalOrders=function(){for(var t=this,i=function(){var i=r.portfolios[a],s=e.CacheKeyFactory.createPotentialValueKey(i.name,n.kTotalOrders),o=e.CacheKeyFactory.createPortfolioValuesKey(i),l=e.CacheKeyFactory.createPortfolioOrdersKey(i),c=e.BindingFactory.createInlineBinding(function(e){t.infront.getCache().update(s,{value:e})});r.infront.getCache().getArray(l).lengthObservable.observe(c),r.infront.getCache().getArray(o).contains(s)||r.infront.getCache().getArray(o).push(s)},r=this,a=0;a<this.portfolios.length;a++)i()},n.prototype.needOwnCapitalChange=function(){for(var t=0;t<this.portfolios.length;t++){var n=this.portfolios[t],i=e.CacheKeyFactory.createPotentialValueKey(n.name,"own_capital_change"),r=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL"),"value"),a=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL_MORNING"),"value"),s=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL"),"currency"),o=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL_MORNING"),"currency");this.infront.getCache().createComputedField(i,"currency",[s,o],function(e){return e[0]==e[1]?e[0]:"MIXED"}),this.infront.getCache().createComputedField(i,"value",[r,a],function(e){return InfrontUtil.isNumber(e[0])&&InfrontUtil.isNumber(e[1])?e[0]-e[1]:0}),this.infront.getCache().update(i,{key:"own_capital_change",name:"Own Capital Change",portfolio:n.name});var l=e.CacheKeyFactory.createPortfolioValuesKey(n);this.infront.getCache().getArray(l).contains(i)||this.infront.getCache().getArray(l).push(i)}},n.prototype.needOwnCapitalChangePercent=function(){for(var t=0;t<this.portfolios.length;t++){var n=this.portfolios[t],i=e.CacheKeyFactory.createPotentialValueKey(n.name,"own_capital_change_percent"),r=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL"),"value"),a=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL_MORNING"),"value"),s=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL"),"currency"),o=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(n.name,"OWN_CAPITAL_MORNING"),"currency");this.infront.getCache().createComputedField(i,"currency",[s,o],function(e){return e[0]==e[1]?e[0]:"MIXED"}),this.infront.getCache().createComputedField(i,"value",[r,a],function(e){return InfrontUtil.isNumber(e[0])&&InfrontUtil.isNumber(e[1])?InfrontUtil.formatNumber((e[0]-e[1])/Math.abs(e[1])*100,2)+"%":0}),this.infront.getCache().update(i,{key:"own_capital_change_percent",name:"Own Capital Change Percent",portfolio:n.name});var l=e.CacheKeyFactory.createPortfolioValuesKey(n);this.infront.getCache().getArray(l).contains(i)||this.infront.getCache().getArray(l).push(i)}},n.prototype.createPercentageValueForAllPortfolios=function(e,t,n){for(var i=0;i<this.portfolios.length;i++)this.createPercentagePortfolioValue(this.portfolios[i],e,t,n)},n.prototype.createPercentagePortfolioValue=function(t,i,r,a){var s=e.CacheKeyFactory.createPotentialValueKey(t.name,i),o=this.infront.getCache();if(!o.has(s,"value")){var l=n.createPortfolioValueId(i),c=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(t.name,r),"value"),d=new e.FieldReference(e.CacheKeyFactory.createPotentialValueKey(t.name,a),"value");o.createComputedField(s,"value",[c,d],n.pctCalculation),o.update(s,{name:i,key:l,portfolio:t.name});var u=e.CacheKeyFactory.createPortfolioValuesKey(t);o.insertKeyIntoArray(u,s)}},n.prototype.createSummedValueForAllPortfolios=function(e,t){if(this.portfolios)for(var n=0;n<this.portfolios.length;n++)this.createSummedPortfolioValue(this.portfolios[n],e,t)},n.prototype.createSummedPortfolioValue=function(t,i,r){var a=e.CacheKeyFactory.createPotentialValueKey(t.name,r);if(!this.infront.getCache().has(a,"value")){var s=e.CacheKeyFactory.createPortfolioValuesKey(t),o=e.CacheKeyFactory.createPortfolioPositionsKey(t),l=n.createPortfolioValueId(r),c=e.CacheKeyFactory.createPortfolioDataKey(t);this.infront.getCache().createInCacheFieldComputation(a,"value",o,i,e.ComputationStrategy.AGGRESSIVE,function(e){return e},InfrontUtil.sumArray);var d=new e.FieldReference(c,"base_currency");this.infront.getCache().createComputedField(a,"currency",[d],function(e){return e[0]}),this.infront.getCache().update(a,{name:r,key:l,portfolio:t.name}),this.infront.getCache().insertKeyIntoArray(s,a);var u=e.CacheKeyFactory.createPortfolioValuesKey(t);this.infront.getCache().getArray(u).contains(a)||this.infront.getCache().getArray(u).push(a)}},n.createPortfolioValueId=function(e){return e.replace(new RegExp(" ","g"),"_").toLowerCase()},n.kPortfolioPollingInterval=6e4,n.kPortfolioPollingDelay=5e3,n.kInitializedField="_initialized",n.resultCalculation=function(e){return e[1]-e[0]},n.divCalculation=function(e){return Math.abs(e[0])>0?e[1]/e[0]:0},n.pctCalculation=function(e){return e[0]>0?InfrontUtil.isNumber(e[0])&&InfrontUtil.isNumber(e[1])?e[1]/e[0]*100:null:-1*(InfrontUtil.isNumber(e[0])&&InfrontUtil.isNumber(e[1])?e[1]/e[0]*100:null)},n.kTradingpower="tradingpower",n.kTrading_power="trading_power",n.kCompositeCurrency="s_pos_currency",n.kMarketValue="market_value",n.kBaseMarketValue="base_market_value",n.kPLToday="pl_today",n.kPLTodayPct="pl_today_pct",n.kBasePLToday="base_pl_today",n.kResult="result",n.kResultPct="result_pct",n.kBaseResult="base_result",n.kBaseResultPct="base_result_pct",n.kBaseCurrencyResult="base_currency_result",n.kAvgPrice="avg_price",n.kBaseCollateral="base_collateral",n.kTotalBaseMarketValue="total_base_market_value",n.kTotalBaseResult="total_base_result",n.kTotalBasePLToday="total_base_pl_today",n.kTotalBaseInvested="total_base_invested",n.kTotalBasePLTodayPct="total_base_pl_today_pct",n.kTotalBaseResultPct="total_base_result_pct",n.kSumCashField="sum_cash",n.kSAvgPrice="s_avg_price",n.kOrderHealthKey="_OrderHealth",n.kSCollateral="s_collateral",n.kTotalTrades="total_trades",n.kTotalOrders="total_orders",n.kTradeExecutedEventDelay=100,n}();e.TradingManager=r;var a=function(){function t(e){this.infront=e,this.strategies={},this.feedsInRequest=[],this.pendingRequests=[]}return t.prototype.getStrategy=function(t,n,i){var r=this;if(this.strategies[t])InfrontUtil.setZeroTimeout(function(){r.findAndSendStrategy(r.strategies[t],n,i)});else if(this.feedsInRequest.indexOf(t)>-1)this.pendingRequests.push({feed:t,strategyId:n,callback:i});else{this.feedsInRequest.push(t);var a=new e.GetAlgosOptions;a.feed=t,a.onData=function(a){r.removeFeedInRequest(t);for(var s=a.algos,o=[],l=0;l<s.length;l++)o.push(e.Strategy.parseFromResultObject(s[l]));r.strategies[t]=o,r.findAndSendStrategy(o,n,i),r.processPendingRequests()},a.onError=function(e,n){r.removeFeedInRequest(t),i(null)},this.infront.trGetAlgos(a)}},t.prototype.processPendingRequests=function(){for(var e=this.pendingRequests.length-1;e>=0;e--)if(this.strategies.hasOwnProperty(this.pendingRequests[e].feed.toString())){var t=this.pendingRequests[e];this.findAndSendStrategy(this.strategies[t.feed],t.strategyId,t.callback),this.pendingRequests.splice(e,1)}},t.prototype.findAndSendStrategy=function(e,t,n){for(var i=null,r=0;r<e.length;r++)if(e[r].id==t){i=e[r];break}n(i)},t.prototype.removeFeedInRequest=function(e){var t=this.feedsInRequest.indexOf(e);t>-1&&this.feedsInRequest.splice(t,1)},t}()}(Infront||(Infront={})),function(e){!function(e){e[e.AddAlert=16]="AddAlert",e[e.DeleteAlert=17]="DeleteAlert",e[e.ModifyAlert=18]="ModifyAlert",e[e.GetAlerts=19]="GetAlerts",e[e.AddDevice=20]="AddDevice",e[e.GetAlertLog=21]="GetAlertLog",e[e.DeleteDevice=22]="DeleteDevice",e[e.MarkEvents=23]="MarkEvents",e[e.EnableAlert=24]="EnableAlert",e[e.DisableAlert=25]="DisableAlert",e[e.GetEmailDevice=32]="GetEmailDevice",e[e.GetOwcLog=33]="GetOwcLog",e[e.MarkOwcRead=34]="MarkOwcRead",e[e.IntrusionLevel1Notification=0]="IntrusionLevel1Notification",e[e.IntrusionLevel2Browser=1]="IntrusionLevel2Browser",e[e.IntrusionLevel3Error=2]="IntrusionLevel3Error"}(e.AlertRequest||(e.AlertRequest={})),function(e){e[e.Separator=0]="Separator",e[e.Id=1]="Id",e[e.LoginId=2]="LoginId",e[e.Type=3]="Type",e[e.Description=4]="Description",e[e.Enabled=5]="Enabled",e[e.Feed=6]="Feed",e[e.Ticker=7]="Ticker",e[e.Double=8]="Double",e[e.Int=9]="Int",e[e.DeviceId=10]="DeviceId",e[e.DeviceType=11]="DeviceType",e[e.TriggerType=12]="TriggerType",e[e.TimeoutMinutes=13]="TimeoutMinutes",e[e.RevisionIndex=14]="RevisionIndex",e[e.Comment=15]="Comment",e[e.List=34]="List",e[e.ChainName=35]="ChainName",e[e.ChainDescription=36]="ChainDescription",e[e.ChainProvider=37]="ChainProvider",e[e.InstrumentType=48]="InstrumentType",e[e.InstrumentSubtype=49]="InstrumentSubtype",e[e.TriggerDate=50]="TriggerDate",e[e.TriggerTime=51]="TriggerTime",e[e.EventId=52]="EventId",e[e.NotificationMsg=53]="NotificationMsg",e[e.EventRead=54]="EventRead",e[e.Operator=64]="Operator",e[e.UpdateType=65]="UpdateType",e[e.ActionType=66]="ActionType",e[e.Hostname=67]="Hostname",e[e.DeviceClient=68]="DeviceClient",e[e.PortfolioTitle=69]="PortfolioTitle",e[e.MarketDataField=81]="MarketDataField",e[e.PortfolioDataField=113]="PortfolioDataField"}(e.AlertTag||(e.AlertTag={})),function(e){e[e.Instrument=1]="Instrument",e[e.Chain=2]="Chain",e[e.List=3]="List",e[e.News=4]="News",e[e.Portfolio=5]="Portfolio"}(e.AlertType||(e.AlertType={})),function(e){e[e.KeepActive=1]="KeepActive",e[e.Disable=2]="Disable",e[e.Timeout=3]="Timeout",e[e.RenewDaily=4]="RenewDaily"}(e.AlertTriggerType||(e.AlertTriggerType={})),function(e){e[e.Alert=1]="Alert",e[e.Event=2]="Event",e[e.Owc=3]="Owc"}(e.AlertUpdateType||(e.AlertUpdateType={})),function(e){e[e.Added=1]="Added",e[e.Modified=2]="Modified",e[e.Deleted=3]="Deleted"}(e.AlertActionType||(e.AlertActionType={})),function(e){e[e.Last=1]="Last",e[e.Bid=2]="Bid",e[e.BidSize=3]="BidSize",e[e.Ask=4]="Ask",e[e.AskSize=5]="AskSize",e[e.Change=6]="Change",e[e.ChangePct=7]="ChangePct",e[e.Volume=8]="Volume",e[e.Turnover=9]="Turnover"}(e.AlertMarketDataField||(e.AlertMarketDataField={})),function(e){e[e.Or=1]="Or",e[e.And=2]="And",e[e.Eq=3]="Eq",e[e.Ne=4]="Ne",e[e.Gt=5]="Gt",e[e.Gte=6]="Gte",e[e.Lt=7]="Lt",e[e.Lte=8]="Lte"}(e.AlertOperator||(e.AlertOperator={})),function(e){e[e.Apns=1]="Apns",e[e.Gcm=2]="Gcm",e[e.Email=3]="Email"}(e.AlertDeviceType||(e.AlertDeviceType={})),function(e){e[e.MsgId=4096]="MsgId",e[e.IntrusionLevel=4097]="IntrusionLevel",e[e.Format=4098]="Format",e[e.Headline=4099]="Headline",e[e.Message=4100]="Message",e[e.Url=4101]="Url",e[e.ExpireDate=4102]="ExpireDate",e[e.ExpiryTime=4103]="ExpiryTime",e[e.PublishDate=4104]="PublishDate",e[e.PublishTime=4105]="PublishTime",e[e.MessageRead=4112]="MessageRead"}(e.AlertOwc||(e.AlertOwc={})),function(e){e[e.Last=1]="Last",e[e.Change=2]="Change",e[e.PctChange=3]="PctChange"}(e.AlertPortfolioDataField||(e.AlertPortfolioDataField={}))}(IDS||(IDS={})),function(e){function t(e){switch(e){case l.currency:return new h(o.TextField);case l.fix_accrued_interest:case l.float_accrued_interest:return new h(o.CurrencyField,2);case l.accrued_interest:return new h(o.CurrencyField,2,null,!0);case l.present_value:case l.present_value_fix_leg:case l.present_value_float_leg:case l.total_sum:case l.total_sum_fix_leg:case l.total_sum_float_leg:return new h(o.CurrencyField,0);default:return new h(o.TextField)}}function n(e){switch(e){case c.currency:return new h(o.TextField);case c.discount_factor_fix:return new h(o.PercentField,2,"discountFactorFloat");case c.discount_factor_float:return new h(o.PercentField,2,"discountFactorFix");case c.evaluation_date:return new h(o.DateField,2,"date");case c.amount_fix:return new h(o.NumericField,2,"fixedAmount");case c.amount_float:return new h(o.NumericField,2,"floatingAmount");case c.forward_rate_float:return new h(o.PercentField,4,"floatingRate");case c.forward_rate_fix:return new h(o.PercentField,4,"fixedRate");case c.present_value_fix:return new h(o.NumericField,2,"fixedCashFlow");case c.present_value_float:return new h(o.NumericField,2,"floatingCashFlow");default:return new h(o.TextField)}}function i(e){switch(e){case d.accrued_interest_days:return new h(o.NumericField,0,null,!0);case d.accrued_interest_in_percent:return new h(o.NumericField,2,null,!0);case d.accrued_interest:return new h(o.CurrencyField,2,null,!0);case d.basis_point_value_in_points:return new h(o.NumericField,0,null,!0);case d.clean_price_in_percent:return new h(o.PercentField,4,null,!0);case d.convexity:return new h(o.NumericField,0,null,!0);case d.currency:return new h(o.TextField,0);case d.dirty_price_in_percent:return new h(o.PercentField,4,null,!0);case d.duration:return new h(o.NumericField,0,null,!0);case d.gross_yield_in_percent:return new h(o.PercentField,4,null,!0);case d.maturity_in_years:case d.modified_duration:return new h(o.NumericField,0,null,!0);case d.net_yield_in_percent:return new h(o.PercentField,4,null,!0);case d.present_value:return new h(o.NumericField,2,null,!0);case d.yield_in_percent:return new h(o.PercentField,4,null,!0);default:return new h(o.TextField)}}function r(e){switch(e){case u.amount:return new h(o.NumericField,2);case u.amount_in_percent:return new h(o.PercentField,4,"amountPercent");case u.balance:return new h(o.NumericField,2);case u.balance_in_percent:return new h(o.PercentField,4,"balancePercent");case u.description:return new h(o.TextField);case u.evaluation_date:return new h(o.DateField,2,"date");default:return new h(o.TextField)}}function a(e,t){switch(e){case s.Swap:return l[t];case s.SwapCashFlow:return c[t];case s.Bond:return d[t];case s.BondCashFlow:return u[t];default:return 0}}var s,o;!function(e){e[e.Unknown=0]="Unknown",e[e.Swap=1]="Swap",e[e.SwapCashFlow=2]="SwapCashFlow",e[e.Bond=3]="Bond",e[e.BondCashFlow=4]="BondCashFlow"}(s=e.CalculatorObjectType||(e.CalculatorObjectType={})),function(e){e[e.TextField=0]="TextField",e[e.NumericField=1]="NumericField",e[e.PercentField=2]="PercentField",e[e.VolumeField=3]="VolumeField",e[e.CurrencyField=4]="CurrencyField",e[e.DateField=5]="DateField"}(o=e.CalculatorFieldType||(e.CalculatorFieldType={}));var l,c,d,u,h=function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=null),void 0===i&&(i=!1),this.fieldType=e,this.decimals=t,this.displayZeroValues=i,this.displayField=n};e.CalculatorFieldDefinition=h,function(e){e[e.Unknown=0]="Unknown",e[e.currency=1]="currency",e[e.fix_accrued_interest=2]="fix_accrued_interest",e[e.float_accrued_interest=3]="float_accrued_interest",e[e.accrued_interest=4]="accrued_interest",e[e.present_value=5]="present_value",e[e.present_value_fix_leg=6]="present_value_fix_leg",e[e.present_value_float_leg=7]="present_value_float_leg",e[e.swap_cash_flows=8]="swap_cash_flows",e[e.total_sum=9]="total_sum",e[e.total_sum_fix_leg=10]="total_sum_fix_leg",e[e.total_sum_float_leg=11]="total_sum_float_leg",e[e.premium=12]="premium",e[e.par_rate=13]="par_rate",e[e.principal=14]="principal"}(l=e.CalculatorSwapTag||(e.CalculatorSwapTag={})),e.getCalculatorSwapField=t,function(e){e[e.Unknown=0]="Unknown",e[e.currency=1]="currency",e[e.discount_factor_fix=2]="discount_factor_fix",e[e.discount_factor_float=3]="discount_factor_float",e[e.evaluation_date=4]="evaluation_date",e[e.amount_fix=5]="amount_fix",e[e.amount_float=6]="amount_float",e[e.forward_rate_float=7]="forward_rate_float",e[e.forward_rate_fix=8]="forward_rate_fix",e[e.present_value_fix=9]="present_value_fix",e[e.present_value_float=10]="present_value_float"}(c=e.CalculatorSwapCashFlowTag||(e.CalculatorSwapCashFlowTag={})),e.getCalculatorSwapCashFlowField=n,function(e){e[e.unknown=0]="unknown",e[e.accrued_interest_days=1]="accrued_interest_days",e[e.accrued_interest_in_percent=2]="accrued_interest_in_percent",e[e.accrued_interest=3]="accrued_interest",e[e.basis_point_value_in_points=4]="basis_point_value_in_points",e[e.clean_price_in_percent=5]="clean_price_in_percent",e[e.convexity=6]="convexity",e[e.currency=7]="currency",e[e.dirty_price_in_percent=8]="dirty_price_in_percent",e[e.duration=9]="duration",e[e.gross_yield_in_percent=10]="gross_yield_in_percent",e[e.maturity_in_years=11]="maturity_in_years",e[e.modified_duration=12]="modified_duration",e[e.net_yield_in_percent=13]="net_yield_in_percent",e[e.present_value=14]="present_value",e[e.yield_in_percent=15]="yield_in_percent",e[e.bond_cash_flows=16]="bond_cash_flows"}(d=e.CalculatorBondInfoTag||(e.CalculatorBondInfoTag={})),e.getCalculatorBondField=i,function(e){e[e.unknown=0]="unknown",e[e.amount=1]="amount",e[e.amount_in_percent=2]="amount_in_percent",e[e.balance=3]="balance",e[e.balance_in_percent=4]="balance_in_percent",e[e.description=5]="description",e[e.evaluation_date=6]="evaluation_date"}(u=e.CalculatorBondCashFlowTag||(e.CalculatorBondCashFlowTag={})),e.getCalculatorBondCashFlowField=r,e.getCalculatorField=function(e,n){switch(e){case s.Swap:return t(n);case s.Bond:return i(n);default:return new h(o.TextField)}},e.getArrayField=function(e,t,i){var p=a(e,t);switch(e){case s.Swap:if(p==l.swap_cash_flows)return n(c[i]);break;case s.Bond:if(p==d.bond_cash_flows)return r(u[i]);break;default:return new h(o.TextField)}return new h(o.TextField)},e.getTagForObjectType=a,e.calculatorTagToStr=function(e,t){switch(e){case s.Swap:return l[t];case s.SwapCashFlow:return c[t];case s.Bond:return d[t];default:return"-unknown-"}},e.getCurrencyField=function(e){switch(e){case s.Swap:return l.currency;case s.SwapCashFlow:return c.currency;case s.Bond:return d.currency;default:return 0}},e.objectTypeToStr=function(e){return s[e]}}(Infront||(Infront={})),function(e){!function(e){e[e.FilterData=5]="FilterData",e[e.CalendarData=6]="CalendarData",e[e.Story=9]="Story",e[e.FxSettlementDate=10]="FxSettlementDate",e[e.NextDividend=11]="NextDividend"}(e.CalendarRequest||(e.CalendarRequest={})),function(e){e[e.Separator=0]="Separator",e[e.Symbol=5]="Symbol",e[e.Feed=6]="Feed",e[e.Id=20]="Id",e[e.Text=27]="Text",e[e.DataSource=32]="DataSource",e[e.Date=33]="Date",e[e.DateFrom=34]="DateFrom",e[e.DateTo=35]="DateTo",e[e.Time=36]="Time",e[e.Country=37]="Country",e[e.Region=38]="Region",e[e.RegionCountry=39]="RegionCountry",e[e.EventId=40]="EventId",e[e.Category=41]="Category",e[e.CategoryName=42]="CategoryName",e[e.Description=43]="Description",e[e.ResultPrevious=44]="ResultPrevious",e[e.ResultExpected=45]="ResultExpected",e[e.ResultActual=46]="ResultActual",e[e.WebLink=47]="WebLink",e[e.CountryLimitCorpEvent=48]="CountryLimitCorpEvent",e[e.ExternId=49]="ExternId",e[e.Type=50]="Type",e[e.ResultUnit=51]="ResultUnit",e[e.IsCategoryMacro=52]="IsCategoryMacro",e[e.IsCategoryDefault=53]="IsCategoryDefault",e[e.IsMoreDataAvail=54]="IsMoreDataAvail",e[e.Properties=55]="Properties",e[e.EventParentId=56]="EventParentId",e[e.MaxItems=57]="MaxItems",e[e.SettleDate=64]="SettleDate",e[e.FxCurrency1=65]="FxCurrency1",e[e.FxCurrency2=66]="FxCurrency2",e[e.ActualFeed=67]="ActualFeed",e[e.ActualSymbol=68]="ActualSymbol",e[e.ExpectedFeed=69]="ExpectedFeed",e[e.ExpectedSymbol=70]="ExpectedSymbol",e[e.SkipDate=71]="SkipDate",e[e.SkipCurrency=72]="SkipCurrency",e[e.SkipDescription=73]="SkipDescription",e[e.NextDividend=74]="NextDividend",e[e.NextExDividendDate=75]="NextExDividendDate",e[e.NextDividendPayDate=76]="NextDividendPayDate",e[e.NextDividendAnnouncement=77]="NextDividendAnnouncement",e[e.DividendCurrency=78]="DividendCurrency",e[e.ResultRevised=79]="ResultRevised",e[e.ResultDelta=80]="ResultDelta",e[e.RevisedFeed=81]="RevisedFeed",e[e.RevisedSymbol=82]="RevisedSymbol",e[e.DeltaFeed=83]="DeltaFeed",e[e.DeltaSymbol=84]="DeltaSymbol",e[e.SettleDateOffset=85]="SettleDateOffset"}(e.CalendarTags||(e.CalendarTags={})),function(e){e[e.Announcement=1]="Announcement",e[e.Arrangement=2]="Arrangement",e[e.Assimilation=3]="Assimilation",e[e.Bankruptcy=4]="Bankruptcy",e[e.Bonus=5]="Bonus",e[e.BonusRights=6]="BonusRights",e[e.BuyBack=7]="BuyBack",e[e.Call=8]="Call",e[e.CapitalReduction=9]="CapitalReduction",e[e.CertificateExchange=10]="CertificateExchange",e[e.ClassAction=11]="ClassAction",e[e.CompanyMeeting=12]="CompanyMeeting",e[e.Consolidation=13]="Consolidation",e[e.ConversionTerms=14]="ConversionTerms",e[e.ConversionTermsChange=15]="ConversionTermsChange",e[e.CurrencyDenomination=16]="CurrencyDenomination",e[e.Demerger=17]="Demerger",e[e.Distribution=18]="Distribution",e[e.Divestment=19]="Divestment",e[e.Dividend=20]="Dividend",e[e.DividendReinvestmentPlan=21]="DividendReinvestmentPlan",e[e.Entitlement=22]="Entitlement",e[e.FinancialYearChange=23]="FinancialYearChange",e[e.Franking=24]="Franking",e[e.IncorporationChange=25]="IncorporationChange",e[e.ISINCodeChange=26]="ISINCodeChange",e[e.IssuerNameChange=27]="IssuerNameChange",e[e.Liquidation=28]="Liquidation",e[e.ListingStatusChange=29]="ListingStatusChange",e[e.LocalCodeChange=30]="LocalCodeChange",e[e.LotChange=31]="LotChange",e[e.Merger=32]="Merger",e[e.NewListing=33]="NewListing",e[e.PerValueDenomination=34]="PerValueDenomination",e[e.PreferentialOffer=35]="PreferentialOffer",e[e.PurchaseOffer=36]="PurchaseOffer",e[e.RedemptionTerms=37]="RedemptionTerms",e[e.ReturnOfCapital=38]="ReturnOfCapital",e[e.Rights=39]="Rights",e[e.SecurityDescriptionChange=40]="SecurityDescriptionChange",e[e.SecurityReclassification=41]="SecurityReclassification",e[e.SecuritySwap=42]="SecuritySwap",e[e.SedolChange=43]="SedolChange",e[e.Subdivision=44]="Subdivision",e[e.Takeover=45]="Takeover",e[e.Adjustment=46]="Adjustment",e[e.Result=47]="Result",e[e.CapitalMarketDay=48]="CapitalMarketDay",e[e.InterimReport=49]="InterimReport",e[e.MacroPriority1=1001]="MacroPriority1",e[e.MacroPriority2=1002]="MacroPriority2",e[e.MacroPriority3=1003]="MacroPriority3",e[e.MacroUnknown=1099]="MacroUnknown"}(e.CalendarType||(e.CalendarType={})),function(e){e[e.Announcement=1]="Announcement",e[e.ResultDividend=2]="ResultDividend",e[e.CorporateAction=3]="CorporateAction",e[e.IPO=4]="IPO",e[e.Dividends=5]="Dividends",e[e.Results=6]="Results",e[e.MacroGeneral=1001]="MacroGeneral",e[e.MacroAuction=1002]="MacroAuction",e[e.MacroUnknown=1003]="MacroUnknown"}(e.CalendarCategory||(e.CalendarCategory={}))}(IDS||(IDS={})),function(e){var t,n;!function(e){e[e.IdsInt=0]="IdsInt",e[e.Float=1]="Float",e[e.Double=2]="Double",e[e.Int32=3]="Int32",e[e.BCD=4]="BCD",e[e.DeltaBCD=5]="DeltaBCD",e[e.DeltaIdsInt=6]="DeltaIdsInt",e[e.String=17]="String",e[e.Binary=22]="Binary",e[e.Int64=26]="Int64",e[e.Null=32]="Null",e[e.NullWithoutData=4660]="NullWithoutData"}(e.DataType||(e.DataType={})),function(e){e[e.PID=1]="PID",e[e.SeqNu=2]="SeqNu",e[e.Access=4]="Access",e[e.SID=7]="SID",e[e.Request=8]="Request",e[e.ResponseId=9]="ResponseId",e[e.Response=10]="Response",e[e.UserData=11]="UserData",e[e.LoginId=12]="LoginId",e[e.ReplyNu=13]="ReplyNu",e[e.TickCount=17]="TickCount",e[e.RtSeqNu=21]="RtSeqNu",e[e.AppNumber=23]="AppNumber",e[e.AppVersion=24]="AppVersion",e[e.Compress=25]="Compress",e[e.UnCompressLen=26]="UnCompressLen",e[e.UniqueId=39]="UniqueId",e[e.Properties=59]="Properties",e[e.TemplStartTags=27]="TemplStartTags",e[e.TemplTag=14]="TemplTag",e[e.TemplDataType=15]="TemplDataType",e[e.TemplAccess=40]="TemplAccess",e[e.End=63]="End"}(t=e.HeaderTags||(e.HeaderTags={})),e.HeaderTagsToStr=function(e){switch(e){case t.PID:return"PID";case t.SeqNu:return"SeqNu";case t.Access:return"Access";case t.SID:return"SID";case t.Request:return"Request";case t.ResponseId:return"ResponseId";case t.Response:return"Response";case t.UserData:return"UserData";case t.LoginId:return"LoginId";case t.ReplyNu:return"ReplyNu";case t.TickCount:return"TickCount";case t.RtSeqNu:return"RtSeqNu";case t.AppNumber:return"AppNumber";case t.AppVersion:return"AppVersion";case t.Compress:return"Compress";case t.UnCompressLen:return"UnCompressLen";case t.UniqueId:return"UniqueId";case t.Properties:return"Properties";case t.TemplStartTags:return"TemplStartTags";case t.TemplTag:return"TemplTag";case t.TemplDataType:return"TemplDataType";case t.TemplAccess:return"TemplAccess";case t.End:return"End"}},function(e){e[e.Ping=0]="Ping",e[e.LoginProvider=1]="LoginProvider",e[e.CloseConnection=2]="CloseConnection",e[e.StartRealtime=3]="StartRealtime",e[e.Subscribe=4096]="Subscribe",e[e.Unsubscribe=4097]="Unsubscribe",e[e.ChangeSubscriptions=4100]="ChangeSubscriptions",e[e.LoginAuthentication=4101]="LoginAuthentication"}(e.HeaderRequests||(e.HeaderRequests={})),function(e){e[e.Ok=0]="Ok",e[e.ErrLogin=1]="ErrLogin",e[e.NotLoggedIn=2]="NotLoggedIn",e[e.NoAccess=3]="NoAccess",e[e.Error=4]="Error",e[e.ExcludeUser=5]="ExcludeUser",e[e.Restart=6]="Restart",e[e.RestartPS=9]="RestartPS",e[e.ReqCrypto=10]="ReqCrypto",e[e.NoData=12]="NoData"}(n=e.HeaderResponses||(e.HeaderResponses={})),function(e){e[e.AppnuUnknown=0]="AppnuUnknown",e[e.AppnuTheonlinetrader=1]="AppnuTheonlinetrader",e[e.AppnuWebquote=2]="AppnuWebquote",e[e.AppnuXquote=3]="AppnuXquote",e[e.AppnuMtrader=4]="AppnuMtrader",e[e.AppnuIpad=5]="AppnuIpad",e[e.AppnuWebToolkit=6]="AppnuWebToolkit",e[e.AppnuWebToolkitDirect=7]="AppnuWebToolkitDirect",e[e.AppnuExcelContribution=8]="AppnuExcelContribution"}(e.EndUserApplications||(e.EndUserApplications={})),e.HeaderResponsesToStr=function(e){switch(e){case n.Ok:return"Ok";case n.ErrLogin:return"ErrLogin";case n.NotLoggedIn:return"NotLoggedIn";case n.NoAccess:return"NoAccess";case n.Error:return"Error";case n.ExcludeUser:return"ExcludeUser";case n.Restart:return"Restart";case n.RestartPS:return"RestartPS";case n.ReqCrypto:return"ReqCrypto";case n.NoData:return"NoData"}}}(IDS||(IDS={})),function(e){var t,n,i,r,a;!function(e){e[e.Separator=0]="Separator",e[e.Login=5]="Login",e[e.Password=6]="Password",e[e.PID=8]="PID",e[e.LoginId=9]="LoginId",e[e.ProviderName=10]="ProviderName",e[e.SID=11]="SID",e[e.ServiceName=12]="ServiceName",e[e.Host=13]="Host",e[e.Port=14]="Port",e[e.ConnectionType=15]="ConnectionType",e[e.AccessFeed=16]="AccessFeed",e[e.Tag=35]="Tag",e[e.ColNu=36]="ColNu",e[e.Length=37]="Length",e[e.Attributes=39]="Attributes",e[e.OwnerProviderId=74]="OwnerProviderId",e[e.SupportEmail=53]="SupportEmail",e[e.LoginServers=91]="LoginServers",e[e.PrivateNetworkId=150]="PrivateNetworkId",e[e.HelpUrl=17]="HelpUrl",e[e.PublicKey=7]="PublicKey",e[e.UserType=77]="UserType",e[e.Info1=18]="Info1",e[e.Info2=19]="Info2",e[e.Info3=20]="Info3",e[e.Info4=21]="Info4",e[e.Info5=22]="Info5",e[e.Url2=23]="Url2",e[e.FreeService=24]="FreeService",e[e.TagSet=32]="TagSet",e[e.Encrypt=119]="Encrypt",e[e.ServiceType=106]="ServiceType",e[e.Country=25]="Country",e[e.ExchCode=26]="ExchCode",e[e.FeedContent=27]="FeedContent",e[e.Feed=28]="Feed",e[e.FeedDescription=31]="FeedDescription",e[e.MainIndex=40]="MainIndex",e[e.FullName=52]="FullName",e[e.Address=54]="Address",e[e.Phone=55]="Phone",e[e.AccessExp=57]="AccessExp",e[e.AppVersion=59]="AppVersion",e[e.ForceUpgradeVer=60]="ForceUpgradeVer",e[e.UpgradeDescr=61]="UpgradeDescr",e[e.FileDate=62]="FileDate",e[e.UpgradePath=63]="UpgradePath",e[e.Priority=64]="Priority",e[e.MainIndexFeed=151]="MainIndexFeed",e[e.StartTime=79]="StartTime",e[e.EndTime=80]="EndTime",e[e.IpAddr=82]="IpAddr",e[e.RemoteIp=179]="RemoteIp",e[e.BrokerCode=84]="BrokerCode",e[e.BrokerDescr=85]="BrokerDescr",e[e.BrokerMainUrl=86]="BrokerMainUrl",e[e.BrokerCountry=87]="BrokerCountry",e[e.DbHint=88]="DbHint",e[e.ChangeDate=89]="ChangeDate",e[e.BrokerProperties=90]="BrokerProperties",e[e.WrapToFeed=93]="WrapToFeed",e[e.GetFromFeed=95]="GetFromFeed",e[e.UnderlyingFeed=105]="UnderlyingFeed",e[e.OptionsFeed=161]="OptionsFeed",e[e.ParentFeed=154]="ParentFeed",e[e.GmtFeedOffset=128]="GmtFeedOffset",e[e.GmtLocalOffset=129]="GmtLocalOffset",e[e.Language=132]="Language",e[e.TickFromPrice=121]="TickFromPrice",e[e.TickToPrice=122]="TickToPrice",e[e.TickSize=123]="TickSize",e[e.TickSizeId=136]="TickSizeId",e[e.RtType=143]="RtType",e[e.RtSubType=144]="RtSubType",e[e.LimitApp=146]="LimitApp",e[e.LogoNumber=147]="LogoNumber",e[e.AppName=148]="AppName",e[e.VolIndex=153]="VolIndex",e[e.VolIndexFeed=152]="VolIndexFeed",e[e.AdditionalInfo=56]="AdditionalInfo",e[e.MarketCodeReuters=157]="MarketCodeReuters",e[e.MarketCodeMic=158]="MarketCodeMic",e[e.FeedProperties=44]="FeedProperties",e[e.DefaultDecimals=38]="DefaultDecimals",e[e.DefaultContractSize=124]="DefaultContractSize",e[e.MinDelaySeconds=111]="MinDelaySeconds",e[e.MaxDelaySeconds=112]="MaxDelaySeconds",e[e.FeedDescrUrl=127]="FeedDescrUrl",e[e.MaxMblLevels=162]="MaxMblLevels",e[e.SsoToken=180]="SsoToken",e[e.AppNu=58]="AppNu",e[e.Marketplace=120]="Marketplace",e[e.ExpireDate=78]="ExpireDate",e[e.ExpireTime=80]="ExpireTime",e[e.CustomerId=163]="CustomerId",e[e.CustomerId2=164]="CustomerId2",e[e.CustomCode=182]="CustomCode",e[e.AuthVersion=183]="AuthVersion",e[e.Signature=184]="Signature",e[e.Thumbprint=185]="Thumbprint",e[e.Uuid=186]="Uuid",e[e.Namespace=187]="Namespace",e[e.ExtLoginId=188]="ExtLoginId",e[e.SetupTemplateNumber=20492]="SetupTemplateNumber",e[e.SetupTemplateTag=20493]="SetupTemplateTag",e[e.SetupTemplateDataType=20494]="SetupTemplateDataType",e[e.SetupTemplateStaticData=20495]="SetupTemplateStaticData",e[e.SetupTemplateEnd=20497]="SetupTemplateEnd"}(e.LoginTags||(e.LoginTags={})),function(e){e[e.Ping=0]="Ping",e[e.Login=5]="Login",e[e.Providers=6]="Providers",e[e.ProviderAccess=7]="ProviderAccess",e[e.Logout=8]="Logout",e[e.Exchanges=9]="Exchanges",e[e.ProvFeeds=12]="ProvFeeds",e[e.Columns=15]="Columns",e[e.ExternalLinks=35]="ExternalLinks",e[e.Marketplaces=37]="Marketplaces",e[e.TickSize=38]="TickSize",e[e.VideoLink=40]="VideoLink",e[e.TranslateFeed=49]="TranslateFeed",e[e.Authentication=50]="Authentication",e[e.IASLoginDone=28]="IASLoginDone"}(e.LoginRequests||(e.LoginRequests={})),function(e){e[e.Realtime=0]="Realtime",e[e.Delayed=1]="Delayed",e[e.Historical=2]="Historical",e[e.Chat=3]="Chat",e[e.OrderEntry=4]="OrderEntry",e[e.Internal=5]="Internal",e[e.Mngmt=6]="Mngmt",e[e.File=7]="File",e[e.Spool=8]="Spool",e[e.Fundamentals=9]="Fundamentals",e[e.Symbols=10]="Symbols",e[e.SpoolDist=11]="SpoolDist",e[e.Logger=12]="Logger",e[e.NewsContrib=13]="NewsContrib",e[e.Storage=14]="Storage",e[e.StorageUpload=15]="StorageUpload",e[e.Chains=16]="Chains",e[e.OeMngmt=17]="OeMngmt",e[e.OwnOrders=18]="OwnOrders",e[e.AuxiliaryData=19]="AuxiliaryData",e[e.Calendar=20]="Calendar",e[e.IndexWeight=21]="IndexWeight",e[e.OeMonitoring=22]="OeMonitoring",e[e.OrderMonitor=23]="OrderMonitor",e[e.Im=24]="Im",e[e.FxTrading=25]="FxTrading",e[e.FreeTextSearch=26]="FreeTextSearch",e[e.Calc=27]="Calc",e[e.Consolidated=28]="Consolidated",e[e.CommunicationsDirectory=29]="CommunicationsDirectory",e[e.RemoteControl=30]="RemoteControl",e[e.Alert=31]="Alert",e[e.AccHistCalcHist=32]="AccHistCalcHist",e[e.SymbolsExtra=33]="SymbolsExtra",e[e.MotionDetection=34]="MotionDetection",e[e.RemoteControlMaster=35]="RemoteControlMaster",e[e.Feedback=36]="Feedback",e[e.News=37]="News",e[e.SymbolMapping=37]="SymbolMapping",e[e.PortfolioTracker=38]="PortfolioTracker",e[e.PriceContribution=39]="PriceContribution",e[e.Kid=40]="Kid",e[e.UserStats=41]="UserStats",e[e.Wire=48]="Wire"}(t=e.ServiceType||(e.ServiceType={})),e.serviceTypeToStr=function(e){switch(e){case t.Realtime:return"Realtime";case t.Delayed:return"Delayed";case t.Historical:return"Historical";case t.Chat:return"Chat";case t.OrderEntry:return"OrderEntry";case t.Internal:return"Internal";case t.Mngmt:return"Mngmt";case t.File:return"File";case t.Spool:return"Spool";case t.Fundamentals:return"Fundamentals";case t.Symbols:return"Symbols";case t.SpoolDist:return"SpoolDist";case t.Logger:return"Logger";case t.NewsContrib:return"NewsContrib";case t.Storage:return"Storage";case t.StorageUpload:return"StorageUpload";case t.Chains:return"Chains";case t.OeMngmt:return"OeMngmt";case t.OwnOrders:return"OwnOrders";case t.AuxiliaryData:return"AuxiliaryData";case t.Calendar:return"Calendar";case t.IndexWeight:return"IndexWeight";case t.OeMonitoring:return"OeMonitoring";case t.OrderMonitor:return"OrderMonitor";case t.Im:return"Im";case t.FxTrading:return"FxTrading";case t.FreeTextSearch:return"FreeTextSearch";case t.Calc:return"Calc";case t.Consolidated:return"Consolidated";case t.CommunicationsDirectory:return"CommunicationsDirectory";case t.RemoteControl:return"RemoteControl";case t.Alert:return"Alert";case t.AccHistCalcHist:return"AccHistCalcHist";case t.SymbolsExtra:return"SymbolsExtra";case t.MotionDetection:return"MotionDetection";case t.RemoteControlMaster:return"RemoteControlMaster";case t.Feedback:return"Feedback";case t.News:return"News/SymbolMapping";case t.PortfolioTracker:return"PortfolioTracker";case t.PriceContribution:return"PriceContribution";case t.Kid:return"Kid";case t.UserStats:return"UserStats";case t.Wire:return"Wire";default:return"?"}},function(e){e[e.BrowserStory=1]="BrowserStory",e[e.HtmlStory=2]="HtmlStory",e[e.UseUtf8=4]="UseUtf8",e[e.DisableImpliedPrices=8]="DisableImpliedPrices"}(n=e.Info1||(e.Info1={})),e.info1ToStr=function(e){switch(e){case n.BrowserStory:return"BrowserStory";case n.HtmlStory:return"HtmlStory";case n.UseUtf8:return"UseUtf8";case n.DisableImpliedPrices:return"DisableImpliedPrices"}},function(e){e[e.OeOneDayOrder=1]="OeOneDayOrder",e[e.OeNoMyOrders=4096]="OeNoMyOrders",e[e.OeReqPin=8192]="OeReqPin",e[e.OeHtmlLogin=16384]="OeHtmlLogin",e[e.OeNoPassword=32768]="OeNoPassword",e[e.OeInteractiveHtmlLogin=65536]="OeInteractiveHtmlLogin",e[e.OeBranding=131072]="OeBranding",e[e.OeReqMobile=262144]="OeReqMobile",e[e.OeSuppGetLoginMethods=524288]="OeSuppGetLoginMethods",e[e.OeKidRequired=1048576]="OeKidRequired",e[e.OeKidIHaveRead=2097152]="OeKidIHaveRead",e[e.OeNoKidBlocksTrading=4194304]="OeNoKidBlocksTrading",e[e.OeRiskLevelBreachBlocksTrading=8388608]="OeRiskLevelBreachBlocksTrading",e[e.OeIdsJsCertified=16777216]="OeIdsJsCertified",e[e.ChatNoAlias=1]="ChatNoAlias"}(i=e.Info2||(e.Info2={})),e.info2ToStr=function(e){switch(e){case i.OeOneDayOrder:return"OeOneDayOrder";case i.OeNoMyOrders:return"OeNoMyOrders";case i.OeReqPin:return"OeReqPin";case i.OeHtmlLogin:return"OeHtmlLogin";case i.OeNoPassword:return"OeNoPassword";case i.OeInteractiveHtmlLogin:return"OeInteractiveHtmlLogin";case i.OeBranding:return"OeBranding";case i.OeReqMobile:return"OeReqMobile";case i.OeSuppGetLoginMethods:return"OeSuppGetLoginMethods";case i.OeKidRequired:return"OeKidRequired";case i.OeKidIHaveRead:return"OeKidIHaveRead";case i.OeNoKidBlocksTrading:return"OeNoKidBlocksTrading";case i.OeRiskLevelBreachBlocksTrading:return"OeRiskLevelBreachBlocksTrading";case i.OeIdsJsCertified:return"OeIdsJsCertified"}},function(e){e[e.FullSsl=1]="FullSsl",e[e.ClientCert=2]="ClientCert",e[e.CertInFile=4]="CertInFile"}(r=e.Info3||(e.Info3={})),e.info3ToStr=function(e){switch(e){case r.FullSsl:return"FullSsl";case r.ClientCert:return"ClientCert";case r.CertInFile:return"CertInFile"}},function(e){e[e.OnlySsl3=1]="OnlySsl3",e[e.TLS12=2]="TLS12"}(a=e.Info4||(e.Info4={})),e.info4ToStr=function(e){switch(e){case a.OnlySsl3:return"OnlySsl3";case a.TLS12:return"TLS12"}},function(e){e[e.Login=0]="Login",e[e.Realtime=1]="Realtime",e[e.Chat=2]="Chat",e[e.OrderEntry=3]="OrderEntry",e[e.File=4]="File",e[e.Fundamental=8]="Fundamental",e[e.Calendar=10]="Calendar",e[e.FreeForm=11]="FreeForm",e[e.Communications=12]="Communications",e[e.RemoteSupport=13]="RemoteSupport",e[e.Alert=15]="Alert",e[e.Feedback=16]="Feedback",e[e.Wire=17]="Wire"}(e.TagSet||(e.TagSet={}))}(IDS||(IDS={})),function(e){var t,n;!function(e){e[e.Trade=1]="Trade",e[e.Static=2]="Static",e[e.NewsText=3]="NewsText",e[e.RankInc=9]="RankInc",e[e.RankDec=10]="RankDec",e[e.RankTurnover=11]="RankTurnover",e[e.DeferredTrade=12]="DeferredTrade",e[e.AuctionEquilibrium=20]="AuctionEquilibrium",e[e.Cust_1_Inc=40]="Cust_1_Inc",e[e.Cust_1_Dec=41]="Cust_1_Dec",e[e.Cust_2_Inc=42]="Cust_2_Inc",e[e.Cust_2_Dec=43]="Cust_2_Dec",e[e.Cust_3_Inc=44]="Cust_3_Inc",e[e.Cust_3_Dec=45]="Cust_3_Dec",e[e.Cust_4_Inc=46]="Cust_4_Inc",e[e.Cust_4_Dec=47]="Cust_4_Dec",e[e.Cust_5_Inc=48]="Cust_5_Inc",e[e.Cust_5_Dec=49]="Cust_5_Dec"}(e.RealtimeType||(e.RealtimeType={})),function(e){e[e.Date=31]="Date",e[e.TradeTime=17]="TradeTime",e[e.ActualTradeDate=627]="ActualTradeDate",e[e.ActualTradeTime=626]="ActualTradeTime",e[e.DivDate=532]="DivDate",e[e.IssueDate=8238]="IssueDate",e[e.AdjustDate=4131]="AdjustDate",e[e.NewsExpiryDate=768]="NewsExpiryDate",e[e.NewsExpiryTime=769]="NewsExpiryTime",e[e.NewsAlertTime=770]="NewsAlertTime",e[e.LAST_TRADE_DATE=1544]="LAST_TRADE_DATE",e[e.LAST_TRADE_DATE_DIV=1579]="LAST_TRADE_DATE_DIV",e[e.TradeDate=1805]="TradeDate",e[e.reportDate=8449]="reportDate",e[e.UsTime=83]="UsTime",e[e.MsTime=84]="MsTime",e[e.BidTime=86]="BidTime",e[e.AskTime=87]="AskTime",e[e.StartOfIndexPeriod=1049]="StartOfIndexPeriod",e[e.EndOfIndexPeriod=1056]="EndOfIndexPeriod",e[e.MaturityDate=8228]="MaturityDate",e[e.FirstCouponDate=8475]="FirstCouponDate",e[e.NextCouponDate=8777]="NextCouponDate",e[e.BondFixingDate=8780]="BondFixingDate",e[e.EstimatesReportedDate=8529]="EstimatesReportedDate",e[e.StartDateEstimate=8530]="StartDateEstimate",e[e.EndDateEstimate=8531]="EndDateEstimate",e[e.StartDateReported=8532]="StartDateReported",e[e.EndDateReported=8533]="EndDateReported"}(e.RealtimeDateTime||(e.RealtimeDateTime={})),function(e){e[e.MovingAverage=1]="MovingAverage",e[e.ExponentialMovingAverage=2]="ExponentialMovingAverage",e[e.VolumeWeigtehAveragePrice=3]="VolumeWeigtehAveragePrice",e[e.AverageDailyVolume=4]="AverageDailyVolume",e[e.StdDevOfDailyVolume=5]="StdDevOfDailyVolume",e[e.AverageDailyExchangeVolume=6]="AverageDailyExchangeVolume",e[e.StdDevOfExchangeVolume=7]="StdDevOfExchangeVolume",e[e.LinearRegressionSlopeOfLastPrice=8]="LinearRegressionSlopeOfLastPrice",e[e.StdDevOfLastPrice=9]="StdDevOfLastPrice",e[e.SimpleAvgOfLastPrice=10]="SimpleAvgOfLastPrice",e[e.StdDevOfDailyChange=11]="StdDevOfDailyChange",e[e.AvgDailyChange=12]="AvgDailyChange",e[e.LinearRegressionSlopeOfLastStderr=13]="LinearRegressionSlopeOfLastStderr",e[e.LinearRegressionSlopeOfLastPredict=14]="LinearRegressionSlopeOfLastPredict",e[e.LastVolatility=15]="LastVolatility",e[e.LnDeltaCount=16]="LnDeltaCount",e[e.LnDeltaSum=17]="LnDeltaSum",e[e.LnDeltaSquareSum=18]="LnDeltaSquareSum",e[e.AvgTrueRange=19]="AvgTrueRange",e[e.AvgBid=20]="AvgBid",e[e.AvgAsk=21]="AvgAsk",e[e.AvgTurnover=22]="AvgTurnover",e[e.AvgDivYieldFactor=23]="AvgDivYieldFactor",e[e.CalculatedHistoryType=8576]="CalculatedHistoryType",e[e.CalculatedHistoryParam=8577]="CalculatedHistoryParam",e[e.CalculatedHistoryValue=8578]="CalculatedHistoryValue"}(e.RealtimeCalculatedHistoryTags||(e.RealtimeCalculatedHistoryTags={})),function(e){e[e.StartOfIndexPeriod=1049]="StartOfIndexPeriod",e[e.EndOfIndexPeriod=1056]="EndOfIndexPeriod",e[e.MaturityDate=8228]="MaturityDate",e[e.FirstCouponDate=8475]="FirstCouponDate",e[e.IssueDate=8238]="IssueDate",e[e.LastTradeDate=1544]="LastTradeDate",e[e.NextCouponDate=8777]="NextCouponDate",e[e.BondFixingDate=8780]="BondFixingDate",e[e.EstimatesReportedDate=8529]="EstimatesReportedDate",e[e.StartDateEstimate=8530]="StartDateEstimate",e[e.EndDateEstimate=8531]="EndDateEstimate",e[e.StartDateReported=8532]="StartDateReported",e[e.EndDateReported=8533]="EndDateReported"}(e.IsDateTag||(e.IsDateTag={})),function(e){e[e.Separator=0]="Separator",e[e.EOP=1]="EOP",e[e.Type=2]="Type",e[e.TemplateNu=47]="TemplateNu",e[e.TemplatePMap=56]="TemplatePMap",e[e.RepeatedTemplates=60]="RepeatedTemplates",e[e.Symbol=5]="Symbol",e[e.Feed=6]="Feed",e[e.Subscribe=66]="Subscribe",e[e.Unsubscribe=67]="Unsubscribe",e[e.AcVolume=16]="AcVolume",e[e.YestClose=14]="YestClose",e[e.YestBidClose=15]="YestBidClose",e[e.Open=23]="Open",e[e.High=24]="High",e[e.Low=25]="Low",e[e.SourceSeqnu=18]="SourceSeqnu",e[e.Last=9]="Last",e[e.Yield=35]="Yield",e[e.IncVolume=10]="IncVolume",e[e.IsTradable=1152]="IsTradable",e[e.IsTrade=28]="IsTrade",e[e.TradeSeparator=46]="TradeSeparator",e[e.Market=52]="Market",e[e.TradeId=41]="TradeId",e[e.Buyer=12]="Buyer",e[e.Seller=13]="Seller",e[e.TrTypeNu=50]="TrTypeNu",e[e.TrTypeStr=11]="TrTypeStr",e[e.HitterTaker=568]="HitterTaker",e[e.OnExchVolume=70]="OnExchVolume",e[e.OnExchTurnover=71]="OnExchTurnover",e[e.Turnover=26]="Turnover",e[e.YYield=73]="YYield",e[e.YBidYield=74]="YBidYield",e[e.YyLast=76]="YyLast",e[e.YAsk=58]="YAsk",e[e.BidYield=36]="BidYield",e[e.AskYield=37]="AskYield",e[e.BaReset=259]="BaReset",e[e.NuBids=42]="NuBids",e[e.NuAsks=43]="NuAsks",e[e.BidAnalytics=79]="BidAnalytics",e[e.AskAnalytics=80]="AskAnalytics",e[e.TradeAnalytics=81]="TradeAnalytics",e[e.BaLevel=40]="BaLevel",e[e.OrderId=44]="OrderId",e[e.Bid=7]="Bid",e[e.Ask=8]="Ask",e[e.BidSize=33]="BidSize",e[e.AskSize=34]="AskSize",e[e.BaBroker=75]="BaBroker",e[e.BaBuyerId=617]="BaBuyerId",e[e.BaSellerId=618]="BaSellerId",e[e.BaBuyMarket=628]="BaBuyMarket",e[e.BaAskMarket=629]="BaAskMarket",e[e.CleanBid=581]="CleanBid",e[e.CleanAsk=582]="CleanAsk",e[e.BidModifier=583]="BidModifier",e[e.AskModifier=584]="AskModifier",e[e.LastModifier=585]="LastModifier",e[e.CleanOpen=586]="CleanOpen",e[e.CleanHigh=587]="CleanHigh",e[e.CleanLow=588]="CleanLow",e[e.CleanLast=589]="CleanLast",e[e.SymbolDbNumber=522]="SymbolDbNumber",e[e.StaticCRC=523]="StaticCRC",e[e.Currency=521]="Currency",e[e.SymbolType=518]="SymbolType",e[e.SymbolSubType=513]="SymbolSubType",e[e.FullName=29]="FullName",e[e.ISIN=30]="ISIN",e[e.ExchangeSymbol=8200]="ExchangeSymbol",e[e.Issuer=8461]="Issuer",e[e.Sector=8197]="Sector",e[e.InfrontSector=632]="InfrontSector",e[e.InfrontSectorName=9124]="InfrontSectorName",e[e.InfrontSectorDescription=9125]="InfrontSectorDescription",e[e.InfrontSectorDefinition=103]="InfrontSectorDefinition",e[e.PrimarySegment=8199]="PrimarySegment",e[e.SecondarySegment=8198]="SecondarySegment",e[e.PrimarySegmentDescription=8244]="PrimarySegmentDescription",e[e.SecondarySegmentDescription=8246]="SecondarySegmentDescription",e[e.Leverage=8241]="Leverage",e[e.MIC=8245]="MIC",e[e.Country=8194]="Country",e[e.SymbolStatus=38]="SymbolStatus",e[e.SymbolStatusText=549]="SymbolStatusText",e[e.BoardLot=530]="BoardLot",e[e.NuShares=531]="NuShares",e[e.SharesPerOption=550]="SharesPerOption",e[e.OpenInterest=515]="OpenInterest",e[e.PhysicalUnit=9345]="PhysicalUnit",e[e.SectorId=8213]="SectorId",e[e.ContractSize=8216]="ContractSize",e[e.NotForDisplay=8224]="NotForDisplay",e[e.UnderlyingFeed=543]="UnderlyingFeed",e[e.UnderlyingTicker=544]="UnderlyingTicker",e[e.UnderlyingBase=572]="UnderlyingBase",e[e.UnderlyingDescr=8226]="UnderlyingDescr",e[e.Expiry=514]="Expiry",e[e.Strike=512]="Strike",e[e.TickId=565]="TickId",e[e.TickTo=566]="TickTo",e[e.TickSize=567]="TickSize",e[e.Multiplier=580]="Multiplier",e[e.EarningsYield=630]="EarningsYield",e[e.DividendYield=631]="DividendYield",e[e.Settle=526]="Settle",e[e.FundBaseCurrency=8595]="FundBaseCurrency",e[e.FundType=8468]="FundType",e[e.IssuerFullName=8469]="IssuerFullName",e[e.EpsEstimate=8470]="EpsEstimate",e[e.EbitEstimate=8471]="EbitEstimate",e[e.Eps=8483]="Eps",e[e.NetSales=8484]="NetSales",e[e.NetSalesEstimate=8485]="NetSalesEstimate",e[e.NetProfit=8486]="NetProfit",e[e.NetProfitEstimate=8487]="NetProfitEstimate",e[e.Ebit=8488]="Ebit",e[e.Ebitda=8489]="Ebitda",e[e.EbitdaEstimate=8490]="EbitdaEstimate",e[e.Pe=8491]="Pe",e[e.PeEstimate=8492]="PeEstimate",e[e.FundIncomeType=8276]="FundIncomeType",e[e.FundProspectiveBookValueYield=8278]="FundProspectiveBookValueYield",e[e.FundInvestmentStyle=8743]="FundInvestmentStyle",e[e.MorningstarRating=8713]="MorningstarRating",e[e.MorningstarRating3Y=8714]="MorningstarRating3Y",e[e.MorningstarSecId=8740]="MorningstarSecId",e[e.FundOngoingCharge=8760]="FundOngoingCharge",e[e.FundAnnualReportDate=8761]="FundAnnualReportDate",e[e.FundManagementFee=1607]="FundManagementFee",e[e.FundActualManagementFee=1608]="FundActualManagementFee",e[e.FundPortfolioManager=8275]="FundPortfolioManager",e[e.FundRegionExposure=8742]="FundRegionExposure",e[e.FundRiskMeasure=8741]="FundRiskMeasure",e[e.FundTopHolding=8277]="FundTopHolding",e[e.FundTotalExpense=8750]="FundTotalExpense",e[e.FundTotalAssets=8751]="FundTotalAssets",e[e.FundStdDev1Year=8744]="FundStdDev1Year",e[e.FundStdDev3Years=8745]="FundStdDev3Years",e[e.FundStdDev5Years=8746]="FundStdDev5Years",e[e.NetAssetValue=8585]="NetAssetValue",e[e.PERF_SOY=1625]="PERF_SOY",e[e.PERF_1D=1631]="PERF_1D",e[e.PERF_1W=1619]="PERF_1W",e[e.PERF_1M=1620]="PERF_1M",e[e.PERF_3M=1621]="PERF_3M",e[e.PERF_6M=1622]="PERF_6M",e[e.PERF_1Y=1626]="PERF_1Y",e[e.PERF_2Y=1627]="PERF_2Y",e[e.PERF_3Y=1628]="PERF_3Y",e[e.PERF_5Y=1629]="PERF_5Y",e[e.PERF_10Y=1630]="PERF_10Y",e[e.FundNameSwedish=8637]="FundNameSwedish",e[e.AmortizationType=8472]="AmortizationType",e[e.FxCurrency1=8502]="FxCurrency1",e[e.FxCurrency2=8503]="FxCurrency2",e[e.FxTenor=8497]="FxTenor",e[e.BloombergTicker=8624]="BloombergTicker",e[e.BloombergGlobalId=8625]="BloombergGlobalId",e[e.BloombergGlobalIdComposite=8626]="BloombergGlobalIdComposite",e[e.NextDividendValue=8627]="NextDividendValue",e[e.NextDividendDate=8628]="NextDividendDate",e[e.NextDividendCurrency=8629]="NextDividendCurrency",e[e.BondApproxYield=8757]="BondApproxYield",e[e.BondType=8563]="BondType",e[e.CurrentCoupon=8721]="CurrentCoupon",e[e.CouponRate=536]="CouponRate",e[e.CouponsPerYear=8239]="CouponsPerYear",e[e.CouponType=8564]="CouponType",e[e.BondDescription=8788]="BondDescription",e[e.ExpiryType=8592]="ExpiryType",e[e.IssuerId=8970]="IssuerId",e[e.IssuerIndustry=2052]="IssuerIndustry",e[e.IssuerIsin=8968]="IssuerIsin",e[e.BondMainType=8787]="BondMainType",e[e.BondMinDenomination=8756]="BondMinDenomination",e[e.OfficialClose=8593]="OfficialClose",e[e.OfficialCloseDate=8594]="OfficialCloseDate",e[e.InfinancialsSector=8599]="InfinancialsSector",e[e.EusipaCode=9054]="EusipaCode",e[e.BasisPointSpread=9068]="BasisPointSpread",e[e.SearchFreeText=8575]="SearchFreeText",e[e.FreeTextTagMustMatch=8596]="FreeTextTagMustMatch",e[e.SearchItemType=8591]="SearchItemType",e[e.SearchRangeTag=8640]="SearchRangeTag",e[e.SearchRangeLowerLimit=8642]="SearchRangeLowerLimit",e[e.SearchRangeUpperLimit=8643]="SearchRangeUpperLimit",e[e.SearchEmptyTag=8978]="SearchEmptyTag",e[e.IndexDescription=8712]="IndexDescription",e[e.SortNu=517]="SortNu",e[e.CompanyId=8608]="CompanyId",e[e.CompanyURL=8609]="CompanyURL",e[e.CompanyName=8612]="CompanyName",e[e.UseTag=1291]="UseTag",e[e.OptionSearch=1290]="OptionSearch",e[e.StartDate=545]="StartDate",e[e.StopDate=546]="StopDate",e[e.StartTime=1299]="StartTime",e[e.StopTime=1300]="StopTime",e[e.CacheSerialNu=12288]="CacheSerialNu",e[e.AdjustValue=4129]="AdjustValue",e[e.Dividend=533]="Dividend",e[e.DividendCurrency=571]="DividendCurrency",e[e.SetupTemplateNumber=20492]="SetupTemplateNumber",e[e.SetupTemplateTag=20493]="SetupTemplateTag",e[e.SetupTemplateDataType=20494]="SetupTemplateDataType",e[e.SetupTemplateStaticData=20495]="SetupTemplateStaticData",e[e.MaxItems=1289]="MaxItems",e[e.ChainFeed=8219]="ChainFeed",e[e.ChainName=8214]="ChainName",e[e.ChainDescr=8215]="ChainDescr",e[e.ChainType=8221]="ChainType",e[e.ChainHierarchy=8581]="ChainHierarchy",e[e.ProviderId=8236]="ProviderId",e[e.PriceDisplay=8222]="PriceDisplay",e[e.MinimumIcebergSize=8556]="MinimumIcebergSize",e[e.MinimumIcebergValue=8559]="MinimumIcebergValue",e[e.MarketCap=4105]="MarketCap",e[e.Theoretical=4106]="Theoretical",e[e.Delta=4107]="Delta",e[e.Elast=4112]="Elast",e[e.TradesStart=1283]="TradesStart",e[e.TradesEnd=1284]="TradesEnd",e[e.TradeResolutionType=1285]="TradeResolutionType",e[e.TradeResolution=1286]="TradeResolution",e[e.DaysBack=1287]="DaysBack",e[e.NumberOfDays=1303]="NumberOfDays",e[e.ResetFeed=542]="ResetFeed",e[e.ResetSymbol=258]="ResetSymbol",e[e.RankOperation=806]="RankOperation",e[e.FullMmt=57]="FullMmt",e[e.CompressedMmt=59]="CompressedMmt",e[e.ESMA_Trade_Type=1314]="ESMA_Trade_Type",e[e.ESMAType=9232]="ESMAType",e[e.RSI14Gain=8493]="RSI14Gain",e[e.RSI14Loss=8494]="RSI14Loss",e[e.RSI14Periods=8495]="RSI14Periods",e[e.YVolume=9120]="YVolume",e[e.YTurnover=9121]="YTurnover",e[e.YExchangeVolume=9122]="YExchangeVolume",e[e.YExchangeTurnover=9123]="YExchangeTurnover",e[e.IndicTrade=551]="IndicTrade",e[e.IndicIncVol=552]="IndicIncVol",e[e.IndicHigh=553]="IndicHigh",e[e.IndicLow=554]="IndicLow",e[e.Nms=555]="Nms",e[e.IndicOpen=556]="IndicOpen",e[e.IndicOpenVol=557]="IndicOpenVol",e[e.ParticipationLevel=1057]="ParticipationLevel",e[e.BreakEven=1058]="BreakEven",e[e.AsianAverage=1059]="AsianAverage",e[e.EstimatesCurrency=8528]="EstimatesCurrency",e[e.CalculatedHistoryType=8576]="CalculatedHistoryType",e[e.Change=4096]="Change",e[e.BidChange=4097]="BidChange",e[e.ChangePct=4098]="ChangePct",e[e.BidChangePct=4099]="BidChangePct",e[e.OpenChange=4122]="OpenChange",e[e.OpenChangePct=4123]="OpenChangePct",e[e.LastTradedAt=1545]="LastTradedAt",e[e.AdjustMode=1616]="AdjustMode",e[e.HistFieldsMode=1617]="HistFieldsMode",e[e.NoiiFlag=4147]="NoiiFlag",e[e.NoiiBid=4148]="NoiiBid",e[e.NoiiAsk=4149]="NoiiAsk",e[e.NoiiBidSize=4150]="NoiiBidSize",e[e.NoiiAskSize=4151]="NoiiAskSize",e[e.OrderbookMoves=64]="OrderbookMoves",e[e.TradeMoves=65]="TradeMoves",e[e.UsTime=83]="UsTime",e[e.MsTime=84]="MsTime",e[e.Last5MinsAgo=85]="Last5MinsAgo",e[e.Language=1297]="Language",e[e.SimplifiedJson=8689]="SimplifiedJson",e[e.ClientTheme=9317]="ClientTheme",e[e.ExchInstrType=8247]="ExchInstrType",e[e.FileName=4153]="FileName",e[e.PingResolution=637]="PingResolution",e[e.PingSource=638]="PingSource",e[e.PingData=639]="PingData",e[e.CheckpointPhase1=20485]="CheckpointPhase1",e[e.CheckpointPhase2=20486]="CheckpointPhase2",e[e.CheckpointPhase3=20487]="CheckpointPhase3",e[e.SetupTimezone=20488]="SetupTimezone",e[e.SpoolSourceProcess=20489]="SpoolSourceProcess",e[e.SpoolSourceMachine=20490]="SpoolSourceMachine",e[e.RecommendationType=1063]="RecommendationType",e[e.MaxChartLookupDays=1315]="MaxChartLookupDays",e[e.AverageDailyTurnover=12872]="AverageDailyTurnover",e[e.AverageDailyVolume=9236]="AverageDailyVolume",e[e.DayCountConvention=8480]="DayCountConvention",e[e.BondReferenceRate=8722]="BondReferenceRate",e[e.BondFaceValue=8723]="BondFaceValue",e[e.BondTrusteeCompany=8724]="BondTrusteeCompany",e[e.BondPayingCompany=8725]="BondPayingCompany",e[e.BondIssueType=8726]="BondIssueType",e[e.BondDirtyPrice=8727]="BondDirtyPrice",e[e.BondCouponReferenceFeed=8728]="BondCouponReferenceFeed",e[e.BondCouponReferenceSymbol=8729]="BondCouponReferenceSymbol",e[e.BondCouponSpread=8730]="BondCouponSpread",e[e.BondOption=8731]="BondOption",e[e.BondNextPutDate=8733]="BondNextPutDate",e[e.BondNextCallDate=8734]="BondNextCallDate",e[e.BondNextCouponAdjustmentDate=8735]="BondNextCouponAdjustmentDate",e[e.BondRedemptionPrice=8737]="BondRedemptionPrice",e[e.TradeSizeInitial=8964]="TradeSizeInitial",e[e.TradeSizeIncrement=8965]="TradeSizeIncrement",e[e.NumSettlementDays=8966]="NumSettlementDays",e[e.PriceType=8967]="PriceType",e[e.IssuerISIN=8968]="IssuerISIN",e[e.CountryOfIncorporation=8969]="CountryOfIncorporation",e[e.InfrontYield=2340]="InfrontYield",e[e.InfrontBidYield=2341]="InfrontBidYield",e[e.InfrontAskYield=2342]="InfrontAskYield",e[e.InfrontYYield=2343]="InfrontYYield",e[e.InfrontISpread=2344]="InfrontISpread",e[e.InfrontGSpread=2345]="InfrontGSpread",e[e.InfrontZSpread=2346]="InfrontZSpread",e[e.InfrontYieldChange=2347]="InfrontYieldChange"}(e.RealtimeTags||(e.RealtimeTags={})),function(e){e[e.Display_default=0]="Display_default",e[e.Display_0decimals=1]="Display_0decimals",e[e.Display_1decimals=2]="Display_1decimals",e[e.Display_2decimals=3]="Display_2decimals",e[e.Display_3decimals=4]="Display_3decimals",e[e.Display_4decimals=5]="Display_4decimals",e[e.Display_5decimals=6]="Display_5decimals",e[e.Display_6decimals=7]="Display_6decimals",e[e.Display_7decimals=8]="Display_7decimals",e[e.Display_8decimals=9]="Display_8decimals"}(e.PriceDisplay||(e.PriceDisplay={})),function(e){e[e.Undefined=0]="Undefined",e[e.Liquid=1]="Liquid",e[e.NoneLiquid=2]="NoneLiquid"}(e.ESMATypes||(e.ESMATypes={})),function(e){e[e.AuctionTime=590]="AuctionTime",e[e.AuctionState=591]="AuctionState",e[e.Auction1Volume=574]="Auction1Volume",e[e.Auction1Price=575]="Auction1Price",e[e.Auction2Volume=576]="Auction2Volume",e[e.Auction2Price=577]="Auction2Price",e[e.Auction3Volume=578]="Auction3Volume",e[e.Auction3Price=579]="Auction3Price",e[e.AuctionType=8248]="AuctionType"}(e.AuctionTags||(e.AuctionTags={})),function(e){e[e.Headline=19]="Headline",e[e.Id=20]="Id",e[e.SymbolFeed=21]="SymbolFeed",e[e.Symbol=22]="Symbol",e[e.Text=27]="Text",e[e.StoryNu=39]="StoryNu",e[e.Isin=256]="Isin",e[e.FgColor=260]="FgColor",e[e.BgColor=261]="BgColor",e[e.StoryURL=519]="StoryURL",e[e.Flash=548]="Flash",e[e.Category=559]="Category",e[e.PNAC=560]="PNAC",e[e.Flags=563]="Flags",e[e.AlertType=771]="AlertType",e[e.AlertText=772]="AlertText",e[e.Topic=1294]="Topic",e[e.Industry=1295]="Industry",e[e.Country=1296]="Country",e[e.Language=1297]="Language",e[e.ProductCode=1305]="ProductCode",e[e.MoneyCode=1306]="MoneyCode",e[e.StatisticsCode=1307]="StatisticsCode",e[e.GovernmentCode=1308]="GovernmentCode",e[e.Author=1309]="Author",e[e.NewsEnd=8705]="NewsEnd",e[e.StreamingId=8707]="StreamingId"}(e.NewsTags||(e.NewsTags={})),function(e){e[e.LAST_1W=1536]="LAST_1W",e[e.LAST_1M=1537]="LAST_1M",e[e.LAST_3M=1538]="LAST_3M",e[e.LAST_6M=1539]="LAST_6M",e[e.LAST_1Y=1540]="LAST_1Y",e[e.LAST_SOW=1541]="LAST_SOW",e[e.LAST_SOM=1542]="LAST_SOM",e[e.LAST_SOY=1543]="LAST_SOY",e[e.LAST_TRADE=1545]="LAST_TRADE",e[e.HIGH_1W=1546]="HIGH_1W",e[e.HIGH_1M=1547]="HIGH_1M",e[e.HIGH_3M=1548]="HIGH_3M",e[e.HIGH_6M=1549]="HIGH_6M",e[e.HIGH_1Y=1550]="HIGH_1Y",e[e.LOW_1W=1551]="LOW_1W",e[e.LOW_1M=1552]="LOW_1M",e[e.LOW_3M=1553]="LOW_3M",e[e.LOW_6M=1554]="LOW_6M",e[e.LOW_1Y=1555]="LOW_1Y",e[e.LAST_2Y=1556]="LAST_2Y",e[e.LAST_3Y=1557]="LAST_3Y",e[e.LAST_5Y=1558]="LAST_5Y",e[e.HIGH_2Y=1559]="HIGH_2Y",e[e.HIGH_3Y=1560]="HIGH_3Y",e[e.HIGH_5Y=1561]="HIGH_5Y",e[e.LOW_2Y=1562]="LOW_2Y",e[e.LOW_3Y=1563]="LOW_3Y",e[e.LOW_5Y=1564]="LOW_5Y",e[e.HIGH_SOW=1565]="HIGH_SOW",e[e.HIGH_SOM=1566]="HIGH_SOM",e[e.HIGH_SOY=1567]="HIGH_SOY",e[e.LOW_SOW=1568]="LOW_SOW",e[e.LOW_SOM=1569]="LOW_SOM",e[e.LOW_SOY=1570]="LOW_SOY",e[e.VOL_1W=1649]="VOL_1W",e[e.VOL_1M=1650]="VOL_1M",e[e.VOL_3M=1651]="VOL_3M",e[e.VOL_6M=1652]="VOL_6M",e[e.VOL_1Y=1653]="VOL_1Y",e[e.VOL_2Y=1654]="VOL_2Y",e[e.VOL_3Y=1655]="VOL_3Y",e[e.VOL_5Y=1657]="VOL_5Y",e[e.VOL_SOW=1658]="VOL_SOW",e[e.VOL_SOM=1659]="VOL_SOM",e[e.VOL_SOY=1660]="VOL_SOY",e[e.DAYCOUNT_1W=1665]="DAYCOUNT_1W",e[e.DAYCOUNT_1M=1666]="DAYCOUNT_1M",e[e.DAYCOUNT_3M=1667]="DAYCOUNT_3M",e[e.DAYCOUNT_6M=1668]="DAYCOUNT_6M",e[e.DAYCOUNT_1Y=1669]="DAYCOUNT_1Y",e[e.DAYCOUNT_2Y=1670]="DAYCOUNT_2Y",e[e.DAYCOUNT_3Y=1671]="DAYCOUNT_3Y",e[e.DAYCOUNT_5Y=1673]="DAYCOUNT_5Y",e[e.DAYCOUNT_SOW=1674]="DAYCOUNT_SOW",e[e.DAYCOUNT_SOM=1675]="DAYCOUNT_SOM",e[e.DAYCOUNT_SOY=1676]="DAYCOUNT_SOY",e[e.YIELD_1W=1713]="YIELD_1W",e[e.YIELD_1M=1714]="YIELD_1M",e[e.YIELD_3M=1715]="YIELD_3M",e[e.YIELD_6M=1716]="YIELD_6M",e[e.YIELD_1Y=1717]="YIELD_1Y",e[e.YIELD_2Y=1718]="YIELD_2Y",e[e.YIELD_3Y=1719]="YIELD_3Y",e[e.YIELD_5Y=1721]="YIELD_5Y",e[e.YIELD_SOW=1722]="YIELD_SOW",e[e.YIELD_SOM=1723]="YIELD_SOM",e[e.YIELD_SOY=1724]="YIELD_SOY",e[e.RSI14_GAIN=8493]="RSI14_GAIN",e[e.RSI14_LOSS=8494]="RSI14_LOSS",e[e.RSI14_PERIODS=8495]="RSI14_PERIODS",e[e.LAST_1W_DIV=1571]="LAST_1W_DIV",e[e.LAST_1M_DIV=1572]="LAST_1M_DIV",e[e.LAST_3M_DIV=1573]="LAST_3M_DIV",e[e.LAST_6M_DIV=1574]="LAST_6M_DIV",e[e.LAST_1Y_DIV=1575]="LAST_1Y_DIV",e[e.LAST_SOW_DIV=1576]="LAST_SOW_DIV",e[e.LAST_SOM_DIV=1577]="LAST_SOM_DIV",e[e.LAST_SOY_DIV=1578]="LAST_SOY_DIV",e[e.LAST_TRADE_DIV=1580]="LAST_TRADE_DIV",e[e.HIGH_1W_DIV=1581]="HIGH_1W_DIV",e[e.HIGH_1M_DIV=1582]="HIGH_1M_DIV",e[e.HIGH_3M_DIV=1583]="HIGH_3M_DIV",e[e.HIGH_6M_DIV=1584]="HIGH_6M_DIV",e[e.HIGH_1Y_DIV=1585]="HIGH_1Y_DIV",e[e.LOW_1W_DIV=1586]="LOW_1W_DIV",e[e.LOW_1M_DIV=1587]="LOW_1M_DIV",e[e.LOW_3M_DIV=1588]="LOW_3M_DIV",e[e.LOW_6M_DIV=1589]="LOW_6M_DIV",e[e.LOW_1Y_DIV=1590]="LOW_1Y_DIV",e[e.LAST_2Y_DIV=1591]="LAST_2Y_DIV",e[e.LAST_3Y_DIV=1592]="LAST_3Y_DIV",e[e.LAST_5Y_DIV=1593]="LAST_5Y_DIV",e[e.HIGH_2Y_DIV=1594]="HIGH_2Y_DIV",e[e.HIGH_3Y_DIV=1595]="HIGH_3Y_DIV",e[e.HIGH_5Y_DIV=1596]="HIGH_5Y_DIV",e[e.LOW_2Y_DIV=1597]="LOW_2Y_DIV",e[e.LOW_3Y_DIV=1598]="LOW_3Y_DIV",e[e.LOW_5Y_DIV=1599]="LOW_5Y_DIV",e[e.HIGH_SOW_DIV=1600]="HIGH_SOW_DIV",e[e.HIGH_SOM_DIV=1601]="HIGH_SOM_DIV",e[e.HIGH_SOY_DIV=1602]="HIGH_SOY_DIV",e[e.LOW_SOW_DIV=1603]="LOW_SOW_DIV",e[e.LOW_SOM_DIV=1604]="LOW_SOM_DIV",e[e.LOW_SOY_DIV=1605]="LOW_SOY_DIV",e[e.VOL_1W_DIV=1633]="VOL_1W_DIV",e[e.VOL_1M_DIV=1634]="VOL_1M_DIV",e[e.VOL_3M_DIV=1635]="VOL_3M_DIV",e[e.VOL_6M_DIV=1636]="VOL_6M_DIV",e[e.VOL_1Y_DIV=1637]="VOL_1Y_DIV",e[e.VOL_2Y_DIV=1638]="VOL_2Y_DIV",e[e.VOL_3Y_DIV=1639]="VOL_3Y_DIV",e[e.VOL_5Y_DIV=1641]="VOL_5Y_DIV",e[e.VOL_SOW_DIV=1642]="VOL_SOW_DIV",e[e.VOL_SOM_DIV=1643]="VOL_SOM_DIV",e[e.VOL_SOY_DIV=1644]="VOL_SOY_DIV",e[e.RSI14_GAIN_DIV=8499]="RSI14_GAIN_DIV",e[e.RSI14_LOSS_DIV=8500]="RSI14_LOSS_DIV",e[e.RSI14_PERIODS_DIV=8501]="RSI14_PERIODS_DIV"}(e.PerformanceTags||(e.PerformanceTags={})),function(e){e[e.SEK_PERF_SOY=1696]="SEK_PERF_SOY",e[e.SEK_PERF_1M=1697]="SEK_PERF_1M",e[e.SEK_PERF_3M=1698]="SEK_PERF_3M",e[e.SEK_PERF_6M=1699]="SEK_PERF_6M",e[e.SEK_PERF_1Y=1700]="SEK_PERF_1Y",e[e.SEK_PERF_2Y=1701]="SEK_PERF_2Y",e[e.SEK_PERF_3Y=1702]="SEK_PERF_3Y",e[e.SEK_PERF_5Y=1703]="SEK_PERF_5Y",e[e.SEK_PERF_10Y=1704]="SEK_PERF_10Y",e[e.SEK_PERF_1D=1705]="SEK_PERF_1D",e[e.SEK_PERF_1W=1706]="SEK_PERF_1W",e[e.SEK_PERF_SINCE_INCEPTION=1707]="SEK_PERF_SINCE_INCEPTION"}(e.MorningstarSEKPerformanceTags||(e.MorningstarSEKPerformanceTags={})),function(e){e[e.id=8608]="id",e[e.descr=8448]="descr",e[e.capital=8450]="capital",e[e.shortTermDebt=8451]="shortTermDebt",e[e.longTermDebt=8452]="longTermDebt",e[e.revenue=8453]="revenue",e[e.earnings=8454]="earnings",e[e.url=8609]="url",e[e.peerFeed=8610]="peerFeed",e[e.peerSymbol=8611]="peerSymbol",e[e.name=8612]="name",e[e.source=8613]="source",e[e.beta_1Y=8614]="beta_1Y",e[e.indexFeed=8616]="indexFeed",e[e.indexSymbol=8615]="indexSymbol",e[e.enterpriseValue=8617]="enterpriseValue",e[e.enterpriseCurrency=8618]="enterpriseCurrency",e[e.infinancialsSectorCode=8619]="infinancialsSectorCode",e[e.primaryShares=8620]="primaryShares",e[e.secondaryShares=8621]="secondaryShares",e[e.CEO=8622]="CEO",e[e.chairman=8623]="chairman",e[e.officer1Name=8656]="officer1Name",e[e.officer1Title=8657]="officer1Title",e[e.officer2Name=8658]="officer2Name",e[e.officer2Title=8659]="officer2Title",e[e.officer3Name=8660]="officer3Name",e[e.officer3Title=8661]="officer3Title",e[e.officer4Name=8662]="officer4Name",e[e.officer4Title=8663]="officer4Title",e[e.officer5Name=8664]="officer5Name",e[e.officer5Title=8665]="officer5Title"}(e.CompanyTags||(e.CompanyTags={})),function(e){e[e.Source=9472]="Source",e[e.Item=9473]="Item",e[e.Period=9474]="Period",e[e.PeriodDisplay=9475]="PeriodDisplay",e[e.Actual=9476]="Actual",e[e.EstimateMean=9477]="EstimateMean",e[e.EstimateMedian=9478]="EstimateMedian",e[e.EstimateHigh=9479]="EstimateHigh",e[e.EstimateLow=9480]="EstimateLow",e[e.EstimateCount=9481]="EstimateCount",e[e.EstimateDeviation=9482]="EstimateDeviation"}(e.FundamentalTags||(e.FundamentalTags={})),function(e){e[e.broker=592]="broker",e[e.descr=593]="descr",e[e.someUnknownFlag=594]="someUnknownFlag",e[e.nuBuys=595]="nuBuys",e[e.nuSells=596]="nuSells",e[e.nuInternal=597]="nuInternal",e[e.buyVolume=598]="buyVolume",e[e.sellVolume=599]="sellVolume",e[e.intVolume=600]="intVolume",e[e.buyTurnover=601]="buyTurnover",e[e.sellTurnover=602]="sellTurnover",e[e.intTurnover=603]="intTurnover",e[e.openBuy=604]="openBuy",e[e.highBuy=605]="highBuy",e[e.lowBuy=606]="lowBuy",e[e.lastBuy=607]="lastBuy",e[e.openSell=608]="openSell",e[e.highSell=609]="highSell",e[e.lowSell=610]="lowSell",e[e.lastSell=611]="lastSell",e[e.openInt=612]="openInt",e[e.highInt=613]="highInt",e[e.lowInt=614]="lowInt",e[e.lastInt=615]="lastInt",e[e.BrokerId=616]="BrokerId",e[e.BuyerId=617]="BuyerId",e[e.SellerId=618]="SellerId",e[e.accumulateFlag=619]="accumulateFlag",e[e.nuHitBid=620]="nuHitBid",e[e.hitBidVolume=621]="hitBidVolume",e[e.hitBidTurnover=622]="hitBidTurnover",e[e.nuHitAsk=623]="nuHitAsk",e[e.hitAskVolume=624]="hitAskVolume",e[e.hitAskTurnover=625]="hitAskTurnover"}(e.BrokerStatTags||(e.BrokerStatTags={})),function(e){e[e.PortfolioManager=8275]="PortfolioManager",e[e.IncomeType=8276]="IncomeType",e[e.TopHolding=8277]="TopHolding",e[e.ProspectiveBookValueYield=8278]="ProspectiveBookValueYield",e[e.ProspectiveDividendYield=8279]="ProspectiveDividendYield",e[e.TransferAgents=8280]="TransferAgents",e[e.IsLeverageFund=8281]="IsLeverageFund",e[e.HistoricDividendYield=8282]="HistoricDividendYield",e[e.Alpha12M=8283]="Alpha12M",e[e.Beta12M=8284]="Beta12M",e[e.TrackingError12M=8285]="TrackingError12M",e[e.TreynorRatio12M=8286]="TreynorRatio12M",e[e.InformationRatio12M=8287]="InformationRatio12M",e[e.AnalystRating=8288]="AnalystRating",e[e.SharpeRatio=8600]="SharpeRatio",e[e.AnnualizedTotal3Year=8601]="AnnualizedTotal3Year",e[e.AnnualizedTotal5Year=8602]="AnnualizedTotal5Year",e[e.MorningstarRefIndex=8603]="MorningstarRefIndex",e[e.ReferenceFeed=9376]="ReferenceFeed",e[e.ReferenceSymbol=9377]="ReferenceSymbol",e[e.SustainabilityRating=9237]="SustainabilityRating",e[e.SustainabilityRatingDate=9238]="SustainabilityRatingDate"}(e.RealtimeFundTags||(e.RealtimeFundTags={})),function(e){e[e.Id=3e4]="Id",e[e.FundManager=30002]="FundManager",e[e.Sustainability=30003]="Sustainability",e[e.BuyButton=30004]="BuyButton",e[e.Fee=30005]="Fee",e[e.Risk=30006]="Risk",e[e.Recommendation=30007]="Recommendation",e[e.MainSupply=30008]="MainSupply",e[e.FundText=30009]="FundText",e[e.StandardTexts=30010]="StandardTexts",e[e.Currency=30011]="Currency",e[e.RecommendationTexts=30012]="RecommendationTexts",e[e.Products=30013]="Products",e[e.Links=30014]="Links",e[e.MetaData_00=30032]="MetaData_00",e[e.MetaData_01=30033]="MetaData_01",e[e.MetaData_02=30034]="MetaData_02",e[e.MetaData_03=30035]="MetaData_03",e[e.MetaData_04=30036]="MetaData_04",e[e.MetaData_05=30037]="MetaData_05",e[e.MetaData_06=30038]="MetaData_06",e[e.MetaData_07=30039]="MetaData_07",e[e.MetaData_08=30040]="MetaData_08",e[e.MetaData_09=30041]="MetaData_09",e[e.MetaData_10=30042]="MetaData_10",e[e.MetaData_11=30043]="MetaData_11",e[e.MetaData_12=30044]="MetaData_12",e[e.MetaData_13=30045]="MetaData_13",e[e.MetaData_14=30046]="MetaData_14",e[e.MetaData_15=30047]="MetaData_15",e[e.MetaData_16=30048]="MetaData_16",e[e.MetaData_17=30049]="MetaData_17",e[e.MetaData_18=30050]="MetaData_18",e[e.MetaData_19=30051]="MetaData_19",e[e.MetaData_20=30052]="MetaData_20",e[e.MetaData_21=30053]="MetaData_21",e[e.MetaData_22=30054]="MetaData_22",e[e.MetaData_23=30055]="MetaData_23",e[e.MetaData_24=30056]="MetaData_24",e[e.MetaData_25=30057]="MetaData_25",e[e.MetaData_26=30058]="MetaData_26",e[e.MetaData_27=30059]="MetaData_27",e[e.MetaData_28=30060]="MetaData_28",e[e.MetaData_29=30061]="MetaData_29",e[e.MetaData_30=30062]="MetaData_30",e[e.MetaData_31=30063]="MetaData_31"}(e.RealtimeContributedFundTags||(e.RealtimeContributedFundTags={})),function(e){e[e.LastTradedAt=268435456]="LastTradedAt",e[e.Time=268435457]="Time",e[e.LastTradeDate=268435458]="LastTradeDate",e[e.SymbolType=268435459]="SymbolType",e[e.SymbolSubType=268435460]="SymbolSubType",e[e.MarketPrice=268435461]="MarketPrice"}(t=e.MwsRealtimeTags||(e.MwsRealtimeTags={})),e.MwsRealtimeTagStart=t.LastTradedAt,function(e){e[e.TradableSHB=4]="TradableSHB"}(e.TradableType||(e.TradableType={})),function(e){e[e.Auction=1]="Auction",e[e.ShortSell=2]="ShortSell",e[e.NoHighLow=256]="NoHighLow",e[e.NoVolume=512]="NoVolume",e[e.Deleted=1024]="Deleted",e[e.DeleteIDC=2048]="DeleteIDC",e[e.InsertIDC=4096]="InsertIDC",e[e.UseLast=8192]="UseLast",e[e.Modify=16384]="Modify",e[e.NoBrokerStats=32768]="NoBrokerStats",e[e.MmtNegotiated=65536]="MmtNegotiated",e[e.MmtCrossing=131072]="MmtCrossing",e[e.MmtBenchmark=262144]="MmtBenchmark",e[e.MmtDelayed=524288]="MmtDelayed",e[e.MmtExCumDiv=1048576]="MmtExCumDiv",e[e.MmtOutsideSpread=2097152]="MmtOutsideSpread",e[e.MmtRepo=4194304]="MmtRepo",e[e.MmtOffbookAuto=8388608]="MmtOffbookAuto",e[e.Equilibrium=16777216]="Equilibrium",e[e.PreTrade=33554432]="PreTrade",e[e.PostTrade=67108864]="PostTrade",e[e.NoChartUpdate=134217728]="NoChartUpdate"}(e.TrTypeNu||(e.TrTypeNu={})),function(e){e[e.Id=565]="Id",e[e.ToPrice=566]="ToPrice",e[e.TickSize=567]="TickSize"}(e.TickSizeTags||(e.TickSizeTags={})),function(e){e[e.SymbolData=10]="SymbolData",e[e.AllSymbolData=5]="AllSymbolData",e[e.Symbols=6]="Symbols",e[e.SymbolStatic=26]="SymbolStatic",e[e.History=12]="History",e[e.HistPerformance=31]="HistPerformance",e[e.FindSymbol=33]="FindSymbol",e[e.ChainList=38]="ChainList",e[e.ChainContent=39]="ChainContent",e[e.Headlines=8]="Headlines",e[e.NewsStory=9]="NewsStory",e[e.CompanyData=69]="CompanyData",e[e.CompanySymbols=70]="CompanySymbols",e[e.BrokerStat=15]="BrokerStat",e[e.BrokerSymbolStat=28]="BrokerSymbolStat",e[e.SymbolBrokerStat=16]="SymbolBrokerStat",e[e.Trades=7]="Trades",e[e.Intraday=27]="Intraday",e[e.TickSize=49]="TickSize",e[e.Ranking=32]="Ranking",e[e.FundJsonData=95]="FundJsonData",e[e.FindPortfolioSymbols=101]="FindPortfolioSymbols",e[e.Fundamental=102]="Fundamental",e[e.CalculatedHistory=63]="CalculatedHistory"}(e.RealtimeRequests||(e.RealtimeRequests={})),function(e){e[e.Providers=0]="Providers",e[e.Exchanges=1]="Exchanges",e[e.ProvFeeds=2]="ProvFeeds",e[e.ProvFormat=3]="ProvFormat",e[e.FeedTag=5]="FeedTag",e[e.Version=6]="Version",e[e.FtpGotFile=7]="FtpGotFile",e[e.OwnerInfo=8]="OwnerInfo",e[e.Brokers=9]="Brokers",e[e.Alert=10]="Alert",e[e.NewsTicker=11]="NewsTicker",e[e.BrokerLinks=12]="BrokerLinks",e[e.ExternalLinks=13]="ExternalLinks",e[e.Marketplaces=14]="Marketplaces",e[e.ProxyTypes=15]="ProxyTypes",e[e.Proxies=16]="Proxies",e[e.TickSize=17]="TickSize",e[e.FileDownload=18]="FileDownload",e[e.Videos=20]="Videos"}(e.EnumTypes||(e.EnumTypes={})),function(e){e[e.Server=1]="Server",e[e.Client=2]="Client"}(e.AdjustMode||(e.AdjustMode={})),function(e){e[e.Classic=1]="Classic",e[e.All=2]="All"}(e.HistFieldsMode||(e.HistFieldsMode={})),function(e){e[e.None=0]="None",e[e.HitBid=1]="HitBid",e[e.HitAsk=2]="HitAsk"}(e.HitterTaker||(e.HitterTaker={})),function(e){e[e.InsertOrUpdate=0]="InsertOrUpdate",e[e.Delete=1]="Delete",e[e.DeleteAll=2]="DeleteAll"}(e.RankOperation||(e.RankOperation={})),function(e){e[e.Increase=9]="Increase",e[e.Decrease=10]="Decrease",e[e.Turnover=11]="Turnover",e[e.CUST_1_DESC=40]="CUST_1_DESC",e[e.CUST_1_ASC=41]="CUST_1_ASC",e[e.CUST_2_DESC=42]="CUST_2_DESC",e[e.CUST_2_ASC=43]="CUST_2_ASC",e[e.CUST_3_DESC=44]="CUST_3_DESC",e[e.CUST_3_ASC=45]="CUST_3_ASC",e[e.CUST_4_DESC=46]="CUST_4_DESC",e[e.CUST_4_ASC=47]="CUST_4_ASC",e[e.CUST_5_DESC=48]="CUST_5_DESC",e[e.CUST_5_ASC=49]="CUST_5_ASC"}(n=e.RankType||(e.RankType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Conv_30E_360=1]="Conv_30E_360",e[e.Conv_ACT_360=2]="Conv_ACT_360",e[e.Conv_ACT_ACT=3]="Conv_ACT_ACT",e[e.Conv_30U_360=4]="Conv_30U_360",e[e.Conv_ACT_365_FIXED=5]="Conv_ACT_365_FIXED",e[e.Conv_ACT_PER=6]="Conv_ACT_PER",e[e.Conv_TBILL1=7]="Conv_TBILL1",e[e.Conv_TBILL2=8]="Conv_TBILL2",e[e.Conv_BSU_252=9]="Conv_BSU_252",e[e.Conv_ACT_365_LEAP=10]="Conv_ACT_365_LEAP",e[e.Conv_NONE=11]="Conv_NONE",e[e.Conv_ACT_ACT_ISMA_ULTIMO=12]="Conv_ACT_ACT_ISMA_ULTIMO",e[e.Conv_30_365=13]="Conv_30_365"}(e.DayCountConvention||(e.DayCountConvention={})),function(e){e[e.Availability=9280]="Availability",e[e.Month1Bid=9281]="Month1Bid",e[e.Month1Ask=9282]="Month1Ask",e[e.Month2Bid=9283]="Month2Bid",e[e.Month2Ask=9284]="Month2Ask",e[e.Month3Bid=9285]="Month3Bid",e[e.Month3Ask=9286]="Month3Ask",e[e.Month4Bid=9287]="Month4Bid",e[e.Month4Ask=9288]="Month4Ask",e[e.Month5Bid=9289]="Month5Bid",e[e.Month5Ask=9290]="Month5Ask",e[e.Month6Bid=9291]="Month6Bid",e[e.Month6Ask=9292]="Month6Ask",e[e.Month7Bid=9293]="Month7Bid",e[e.Month7Ask=9294]="Month7Ask",e[e.Month8Bid=9295]="Month8Bid",e[e.Month8Ask=9296]="Month8Ask",e[e.Month9Bid=9297]="Month9Bid",e[e.Month9Ask=9298]="Month9Ask",e[e.Month10Bid=9299]="Month10Bid",e[e.Month10Ask=9300]="Month10Ask",e[e.Month11Bid=9301]="Month11Bid",e[e.Month11Ask=9302]="Month11Ask",e[e.Month12Bid=9303]="Month12Bid",e[e.Month12Ask=9304]="Month12Ask",e[e.ValueDate=9305]="ValueDate"}(e.ForwardCurve||(e.ForwardCurve={}));var i=function(){function e(){}return e.rankTypeToStr=function(t){switch(t){case n.Turnover:return e.Turnover;case n.Increase:return e.Increase;case n.Decrease:return e.Decrease;case n.CUST_1_DESC:return e.LargeCapIncrease;case n.CUST_1_ASC:return e.LargeCapDecrease;case n.CUST_2_DESC:return e.MidCapIncrease;case n.CUST_2_ASC:return e.MidCapDecrease;case n.CUST_3_DESC:return e.SmallCapIncrease;case n.CUST_3_ASC:return e.SmallCapDecrease;case n.CUST_4_DESC:return e.FirstNorthIncrease;case n.CUST_4_ASC:return e.FirstNorthDecrease;case n.CUST_5_DESC:return e.Custom5Inc;case n.CUST_5_ASC:return e.Custom5Dec;default:return""}},e.Turnover="!RANK_TURNOVER",e.Increase="!RANK_POSITIVE",e.Decrease="!RANK_NEGATIVE",e.LargeCapIncrease="!RANK_CUST1_POSITIVE",e.LargeCapDecrease="!RANK_CUST1_NEGATIVE",e.MidCapIncrease="!RANK_CUST2_POSITIVE",e.MidCapDecrease="!RANK_CUST2_NEGATIVE",e.SmallCapIncrease="!RANK_CUST3_POSITIVE",e.SmallCapDecrease="!RANK_CUST3_NEGATIVE",e.FirstNorthIncrease="!RANK_CUST4_POSITIVE",e.FirstNorthDecrease="!RANK_CUST4_NEGATIVE",e.Custom5Inc="!RANK_CUST5_POSITIVE",e.Custom5Dec="!RANK_CUST5_NEGATIVE",e}();e.RankSymbols=i,function(e){e[e.Number=20492]="Number",e[e.Tag=20493]="Tag",e[e.DataType=20494]="DataType",e[e.StaticData=20495]="StaticData"}(e.TemplateSetup||(e.TemplateSetup={})),e.GetRankFeed=function(e){return 8388608|e},e.MakeMmt=function(e){var t="",n=e>>1&7;switch(n){case 1:t+="1";break;case 2:t+="2";break;case 3:t+="3";break;case 4:t+="4";break;case 5:t+="5";break;case 6:t+="6";break;case 7:t+="7";break;default:t+="-"}switch(n=(480&e)>>5){case 1:t+="2";break;case 2:t+="1";break;case 3:t+="3";break;case 4:t+="4";break;case 5:t+="5";break;case 6:t+="6";break;case 7:t+="7";break;case 8:t+="O";break;case 9:t+="K";break;case 10:t+="I";break;case 11:t+="U";break;default:t+="-"}return t+="--",t+=16&e?"X":"-",t+="--",t+=512&e?"E":"-",t+="-P",(t+=1&e?"H":"-")+"---"},e.MakeEsma=function(e){var t="";switch(e[0]){case"1":t="LB";break;case"2":t="QB";break;case"3":t="DB";break;case"4":t="OB";break;case"5":t="PA";break;case"6":t="RQ";break;case"7":t="AH"}switch(e[1]){case"1":t+=",AU";break;case"O":t+=",OA";break;case"K":t+=",CA";break;case"I":t+=",IA";break;case"U":t+=",UA";break;case"2":t+=",CT";break;case"3":t+=",AC";break;case"4":t+=",OT";break;case"5":t+=",ON";break;case"6":t+=",OF";break;case"7":t+=",SI"}switch(e[2]){case"D":t+=",D";break;case"R":t+=",RPRI";break;case"Z":t+=",TPAC";break;case"Y":t+=",XFPH"}switch(e[3]){case"N":t+=",N";break;case"1":t+=",NLIQ";break;case"2":t+=",OILQ";break;case"3":t+=",PRIC";break;case"4":t+=",ILQD";break;case"5":t+=",SIZE"}switch("X"==e[4]&&(t+=",ACTX"),"C"==e[5]&&(t+=",CANC"),"A"==e[5]&&(t+=",AMND"),"B"==e[6]&&(t+=",BENC"),"S"==e[6]&&(t+=",RFPT"),"E"==e[7]&&(t+=",SDIV"),"M"==e[8]&&(t+=",M"),"Q"==e[8]&&(t+=",Q"),"T"==e[9]&&(t+=",NPFT"),"J"==e[9]&&(t+=",TNCP"),"H"==e[10]&&(t+=",ALGO"),e[11]){case"1":t+=",NI";break;case"2":t+=",LRGS";break;case"3":t+=",ILQD";break;case"4":t+=",SIZE"}switch(e[12]){case"1":t+=",LMTF";break;case"2":t+=",DATF";break;case"3":t+=",VOLO";break;case"4":t+=",FWAF";break;case"5":t+=",IDAF";break;case"6":t+=",VOLW";break;case"7":t+=",FULF";break;case"8":t+=",FULA";break;case"9":t+=",FULV";break;case"V":t+=",FULJ";break;case"W":t+=",COAF"}return"1"==e[13]&&(t+=",DUPL"),t}}(IDS||(IDS={})),function(e){var t,n=Infront.Instrument;e.MwsCacheTimestampField="_cache_time_stamp",function(i){var r=function(e,t,n){this.yest=e,this.today=t,this.percent=n};i.PerfComputedTags=r;var a=function(){this.normalTags=[],this.computedTags=[]};i.TagSet=a,i.Tags=function(t){for(var n=new a,i=0,r=t;i<r.length;i++){var s=r[i];try{var o=s.toUpperCase();o=o.replace("INSTRUMENT/","")}catch(e){continue}switch(o){case"FEED":n.normalTags.push(e.RealtimeTags.Feed);break;case"TICKER":n.normalTags.push(e.RealtimeTags.Symbol);break;case"ISIN":n.normalTags.push(e.RealtimeTags.ISIN);break;case"FULL_NAME":n.normalTags.push(e.RealtimeTags.FullName);break;case"TRADING_STATUS":n.normalTags.push(e.RealtimeTags.SymbolStatusText);break;case"INSTRUMENT_TYPE":n.normalTags.push(e.MwsRealtimeTags.SymbolType);break;case"INSTRUMENT_SUBTYPE":n.normalTags.push(e.MwsRealtimeTags.SymbolSubType);break;case"SEGMENT":n.normalTags.push(e.RealtimeTags.PrimarySegment);break;case"SECONDARY_SEGMENT":n.normalTags.push(e.RealtimeTags.SecondarySegment);break;case"SEGMENT_DESCRIPTION":n.normalTags.push(e.RealtimeTags.PrimarySegmentDescription);break;case"SECTOR":n.normalTags.push(e.RealtimeTags.Sector);break;case"LAST":n.normalTags.push(e.RealtimeTags.Last);break;case"LAST_VALID":n.normalTags.push(e.MwsRealtimeTags.LastTradedAt);break;case"OPEN":n.normalTags.push(e.RealtimeTags.Open);break;case"HIGH":n.normalTags.push(e.RealtimeTags.High);break;case"LOW":n.normalTags.push(e.RealtimeTags.Low);break;case"BID":n.normalTags.push(e.RealtimeTags.Bid);break;case"ASK":n.normalTags.push(e.RealtimeTags.Ask);break;case"ACC_VOLUME":n.normalTags.push(e.RealtimeTags.AcVolume);break;case"VOLUME":n.normalTags.push(e.RealtimeTags.IncVolume),n.normalTags.push(e.RealtimeTags.AcVolume);break;case"TURNOVER":n.normalTags.push(e.RealtimeTags.Turnover);break;case"ONEXCH_VOLUME":n.normalTags.push(e.RealtimeTags.OnExchVolume);break;case"ONEXCH_TURNOVER":n.normalTags.push(e.RealtimeTags.OnExchTurnover);break;case"BID_SIZE":n.normalTags.push(e.RealtimeTags.BidSize);break;case"ASK_SIZE":n.normalTags.push(e.RealtimeTags.AskSize);break;case"NUM_BIDS":n.normalTags.push(e.RealtimeTags.NuBids);break;case"NUM_ASKS":n.normalTags.push(e.RealtimeTags.NuAsks);break;case"CHANGE":n.normalTags.push(e.RealtimeTags.Change);break;case"PCT_CHANGE":n.normalTags.push(e.RealtimeTags.ChangePct);break;case"PREVIOUS_CLOSE":n.normalTags.push(e.RealtimeTags.YestClose);break;case"LAST_TRADE_DATE":n.normalTags.push(e.RealtimeDateTime.LAST_TRADE_DATE);break;case"TIME":n.normalTags.push(e.RealtimeDateTime.TradeTime);break;case"DATE":n.normalTags.push(e.RealtimeDateTime.Date);break;case"SORT_NU":n.normalTags.push(e.RealtimeTags.SortNu);break;case"ESMA_TYPE":n.normalTags.push(e.RealtimeTags.ESMAType);break;case"WTD_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_SOW);break;case"MTD_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_SOM);break;case"YTD_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_SOY);break;case"ONE_W_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_1W);break;case"ONE_M_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_1M);break;case"THREE_M_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_3M);break;case"SIX_M_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_6M);break;case"ONE_Y_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_1Y);break;case"ONE_Y_LAST_DIV":n.normalTags.push(e.PerformanceTags.LAST_1Y_DIV);break;case"TWO_Y_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_2Y);break;case"THREE_Y_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_3Y);break;case"FIVE_Y_CLOSE":n.normalTags.push(e.PerformanceTags.LAST_5Y);break;case"WTD_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_SOW);break;case"MTD_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_SOM);break;case"YTD_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_SOY);break;case"ONE_W_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_1W);break;case"ONE_M_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_1M);break;case"THREE_M_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_3M);break;case"SIX_M_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_6M);break;case"ONE_Y_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_1Y);break;case"TWO_Y_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_2Y);break;case"THREE_Y_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_3Y);break;case"FIVE_Y_HIGH":n.normalTags.push(e.PerformanceTags.HIGH_5Y);break;case"WTD_LOW":n.normalTags.push(e.PerformanceTags.LOW_SOW);break;case"MTD_LOW":n.normalTags.push(e.PerformanceTags.LOW_SOM);break;case"YTD_LOW":n.normalTags.push(e.PerformanceTags.LOW_SOY);break;case"ONE_W_LOW":n.normalTags.push(e.PerformanceTags.LOW_1W);break;case"ONE_M_LOW":n.normalTags.push(e.PerformanceTags.LOW_1M);break;case"THREE_M_LOW":n.normalTags.push(e.PerformanceTags.LOW_3M);break;case"SIX_M_LOW":n.normalTags.push(e.PerformanceTags.LOW_6M);break;case"ONE_Y_LOW":n.normalTags.push(e.PerformanceTags.LOW_1Y);break;case"TWO_Y_LOW":n.normalTags.push(e.PerformanceTags.LOW_2Y);break;case"THREE_Y_LOW":n.normalTags.push(e.PerformanceTags.LOW_3Y);break;case"FIVE_Y_LOW":n.normalTags.push(e.PerformanceTags.LOW_5Y);break;case"VOL_1M":n.normalTags.push(e.PerformanceTags.VOL_1M);break;case"DAYCOUNT_1M":n.normalTags.push(e.PerformanceTags.DAYCOUNT_1M);break;case"ONE_D_PERF":n.normalTags.push(e.RealtimeTags.PERF_1D);break;case"ONE_W_PERF":n.normalTags.push(e.RealtimeTags.PERF_1W);break;case"ONE_M_PERF":n.normalTags.push(e.RealtimeTags.PERF_1M);break;case"THREE_M_PERF":n.normalTags.push(e.RealtimeTags.PERF_3M);break;case"SIX_M_PERF":n.normalTags.push(e.RealtimeTags.PERF_6M);break;case"ONE_Y_PERF":n.normalTags.push(e.RealtimeTags.PERF_1Y);break;case"TWO_Y_PERF":n.normalTags.push(e.RealtimeTags.PERF_2Y);break;case"THREE_Y_PERF":n.normalTags.push(e.RealtimeTags.PERF_3Y);break;case"FIVE_Y_PERF":n.normalTags.push(e.RealtimeTags.PERF_5Y);break;case"TEN_Y_PERF":n.normalTags.push(e.RealtimeTags.PERF_10Y);break;case"YTD_PERF":n.normalTags.push(e.RealtimeTags.PERF_SOY);break;case"ONE_M_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_1M);break;case"THREE_M_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_3M);break;case"SIX_M_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_6M);break;case"ONE_Y_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_1Y);break;case"TWO_Y_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_2Y);break;case"THREE_Y_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_3Y);break;case"FIVE_Y_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_5Y);break;case"TEN_Y_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_10Y);break;case"YTD_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_SOY);break;case"ONE_D_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_1D);break;case"ONE_W_PERF_SEK":n.normalTags.push(e.MorningstarSEKPerformanceTags.SEK_PERF_1W);break;case"LAST_TRADE":n.normalTags.push(e.PerformanceTags.LAST_TRADE);break;case"IS_TRADEABLE":n.normalTags.push(e.RealtimeTags.IsTradable);break;case"STAR_RATING":n.normalTags.push(e.RealtimeTags.MorningstarRating);break;case"STAR_RATING_3Y":n.normalTags.push(e.RealtimeTags.MorningstarRating3Y);break;case"FUND_ONGOING_CHARGE":n.normalTags.push(e.RealtimeTags.FundOngoingCharge);break;case"RISK_LEVEL":n.normalTags.push(e.RealtimeTags.FundRiskMeasure);break;case"CURRENCY":n.normalTags.push(e.RealtimeTags.Currency);break;case"FUND_TYPE":n.normalTags.push(e.RealtimeTags.FundType);break;case"FUND_REFERENCE_FEED":n.normalTags.push(e.RealtimeFundTags.ReferenceFeed);break;case"FUND_REFERENCE_SYMBOL":n.normalTags.push(e.RealtimeFundTags.ReferenceSymbol);break;case"FUND_PROSPECTIVE_BOOK_VALUE_YIELD":n.normalTags.push(e.RealtimeTags.FundProspectiveBookValueYield);break;case"FUND_TOTAL_ASSETS":n.normalTags.push(e.RealtimeTags.FundTotalAssets);break;case"START_DATE":n.normalTags.push(e.RealtimeTags.StartDate);break;case"FUND_TOTAL_EXPENSE":n.normalTags.push(e.RealtimeTags.FundTotalExpense);break;case"ISSUER":n.normalTags.push(e.RealtimeTags.Issuer);break;case"ISSUER_FULL_NAME":n.normalTags.push(e.RealtimeTags.IssuerFullName);break;case"NET_ASSET_VALUE":n.normalTags.push(e.RealtimeTags.NetAssetValue);break;case"LAST_VALID_DATE":n.normalTags.push(e.MwsRealtimeTags.LastTradeDate);break;case"NUM_SHARES":n.normalTags.push(e.RealtimeTags.NuShares);break;case"FUND_SHARPE_RATIO":n.normalTags.push(e.RealtimeFundTags.SharpeRatio);break;case"FUND_SUSTAINABILITY_RATING":n.normalTags.push(e.RealtimeFundTags.SustainabilityRating);break;case"FUND_SUSTAINABILITY_RATING_DATE":n.normalTags.push(e.RealtimeFundTags.SustainabilityRatingDate);break;case"FUND_MORNINGSTAR_REF_INDEX":n.normalTags.push(e.RealtimeFundTags.MorningstarRefIndex);break;case"FUND_STD_DEV_1Y":n.normalTags.push(e.RealtimeTags.FundStdDev1Year);break;case"FUND_STD_DEV_3Y":n.normalTags.push(e.RealtimeTags.FundStdDev3Years);break;case"FUND_STD_DEV_5Y":n.normalTags.push(e.RealtimeTags.FundStdDev5Years);break;case"MORNINGSTAR_SECID":n.normalTags.push(e.RealtimeTags.MorningstarSecId);break;case"FUND_ANNUAL_REPORT_DATE":n.normalTags.push(e.RealtimeTags.FundAnnualReportDate);break;case"ANALYST_RATING":n.normalTags.push(e.RealtimeFundTags.AnalystRating);break;case"SUSTAINABILITY_RATING":n.normalTags.push(e.RealtimeFundTags.SustainabilityRating);break;case"FUND_MANAGEMENT_FEE":n.normalTags.push(e.RealtimeTags.FundManagementFee);break;case"FUND_ACTUAL_MANAGEMENT_FEE":n.normalTags.push(e.RealtimeTags.FundActualManagementFee);break;case"ESMA_ADV":n.normalTags.push(e.RealtimeCalculatedHistoryTags.AverageDailyVolume);break;case"HIST_PERFORMANCE":case"INSTRUMENT":case"FUND_DETAILS":case"PERFORMANCE":case"PORTFOLIO":case"EXPOSURE":break;case"FUND_NAME_SWEDISH":n.normalTags.push(e.RealtimeTags.FundNameSwedish);break;case"CONTRIBUTED_ID":n.normalTags.push(e.RealtimeContributedFundTags.Id);break;case"CONTRIBUTED_FUND_MANAGER":n.normalTags.push(e.RealtimeContributedFundTags.FundManager);break;case"CONTRIBUTED_SUSTAINABILITY":n.normalTags.push(e.RealtimeContributedFundTags.Sustainability);break;case"CONTRIBUTED_BUY_BUTTON":n.normalTags.push(e.RealtimeContributedFundTags.BuyButton);break;case"CONTRIBUTED_FEE":n.normalTags.push(e.RealtimeContributedFundTags.Fee);break;case"CONTRIBUTED_RISK":n.normalTags.push(e.RealtimeContributedFundTags.Risk);break;case"CONTRIBUTED_RECOMMENDATION":n.normalTags.push(e.RealtimeContributedFundTags.Recommendation);break;case"CONTRIBUTED_MAIN_SUPPLY":n.normalTags.push(e.RealtimeContributedFundTags.MainSupply);break;case"CONTRIBUTED_FUND_TEXT":n.normalTags.push(e.RealtimeContributedFundTags.FundText);break;case"CONTRIBUTED_STANDARD_TEXTS":n.normalTags.push(e.RealtimeContributedFundTags.StandardTexts);break;case"CONTRIBUTED_CURRENCY":n.normalTags.push(e.RealtimeContributedFundTags.Currency);break;case"CONTRIBUTED_RECOMMENDATION_TEXTS":n.normalTags.push(e.RealtimeContributedFundTags.RecommendationTexts);break;case"CONTRIBUTED_PRODUCTS":n.normalTags.push(e.RealtimeContributedFundTags.Products);break;case"CONTRIBUTED_LINKS":n.normalTags.push(e.RealtimeContributedFundTags.Links);break;case"CONTRIBUTED_METADATA_00":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_00);break;case"CONTRIBUTED_METADATA_01":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_01);break;case"CONTRIBUTED_METADATA_02":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_02);break;case"CONTRIBUTED_METADATA_03":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_03);break;case"CONTRIBUTED_METADATA_04":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_04);break;case"CONTRIBUTED_METADATA_05":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_05);break;case"CONTRIBUTED_METADATA_06":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_06);break;case"CONTRIBUTED_METADATA_07":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_07);break;case"CONTRIBUTED_METADATA_08":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_08);break;case"CONTRIBUTED_METADATA_09":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_09);break;case"CONTRIBUTED_METADATA_10":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_10);break;case"CONTRIBUTED_METADATA_11":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_11);break;case"CONTRIBUTED_METADATA_12":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_12);break;case"CONTRIBUTED_METADATA_13":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_13);break;case"CONTRIBUTED_METADATA_14":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_14);break;case"CONTRIBUTED_METADATA_15":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_15);break;case"CONTRIBUTED_METADATA_16":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_16);break;case"CONTRIBUTED_METADATA_17":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_17);break;case"CONTRIBUTED_METADATA_18":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_18);break;case"CONTRIBUTED_METADATA_19":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_19);break;case"CONTRIBUTED_METADATA_20":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_20);break;case"CONTRIBUTED_METADATA_21":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_21);break;case"CONTRIBUTED_METADATA_22":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_22);break;case"CONTRIBUTED_METADATA_23":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_23);break;case"CONTRIBUTED_METADATA_24":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_24);break;case"CONTRIBUTED_METADATA_25":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_25);break;case"CONTRIBUTED_METADATA_26":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_26);break;case"CONTRIBUTED_METADATA_27":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_27);break;case"CONTRIBUTED_METADATA_28":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_28);break;case"CONTRIBUTED_METADATA_29":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_29);break;case"CONTRIBUTED_METADATA_30":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_30);break;case"CONTRIBUTED_METADATA_31":n.normalTags.push(e.RealtimeContributedFundTags.MetaData_31);break;case"INDIC_TRADE":n.normalTags.push(e.RealtimeTags.IndicTrade);break;case"INDIC_INCVOL":n.normalTags.push(e.RealtimeTags.IndicIncVol);break;case"INDIC_HIGH":n.normalTags.push(e.RealtimeTags.IndicHigh);break;case"INDIC_LOW":n.normalTags.push(e.RealtimeTags.IndicLow);break;case"NMS":n.normalTags.push(e.RealtimeTags.Nms);break;case"INDIC_OPEN":n.normalTags.push(e.RealtimeTags.IndicOpen);break;case"INDIC_OPEN_VOL":n.normalTags.push(e.RealtimeTags.IndicOpenVol);break;case"BOND_FACE_VALUE":n.normalTags.push(e.RealtimeTags.BondFaceValue);break;case"THEORETICAL":n.normalTags.push(e.RealtimeTags.Theoretical);break;case"PARTICIPATION_LEVEL":n.normalTags.push(e.RealtimeTags.ParticipationLevel);break;case"MATURITY_DATE":n.normalTags.push(e.RealtimeDateTime.MaturityDate);break;case"EXPIRY_DATE":n.normalTags.push(e.RealtimeTags.Expiry);break;case"END_OF_INDEX_PERIOD":n.normalTags.push(e.RealtimeDateTime.EndOfIndexPeriod);break;case"ISSUE_DATE":n.normalTags.push(e.RealtimeDateTime.IssueDate);break;case"UNDER_TICKER":n.normalTags.push(e.RealtimeTags.UnderlyingTicker);break;case"UNDER_FEED":n.normalTags.push(e.RealtimeTags.UnderlyingFeed);break;case"NEXT_COUPON_DATE":n.normalTags.push(e.RealtimeDateTime.NextCouponDate);break;case"COUPON_RATE":n.normalTags.push(e.RealtimeTags.CouponRate);break;case"COUPONS_PER_YEAR":n.normalTags.push(e.RealtimeTags.CouponsPerYear);break;case"BID_YIELD":n.normalTags.push(e.RealtimeTags.BidYield);break;case"ASK_YIELD":n.normalTags.push(e.RealtimeTags.AskYield);break;case"RECOMMENDATION_TYPE":n.normalTags.push(e.RealtimeTags.RecommendationType);break;case"ASIAN_AVERAGE":n.normalTags.push(e.RealtimeTags.AsianAverage);break;case"STRIKE":n.normalTags.push(e.RealtimeTags.Strike);break;case"CONTRACT_SIZE":n.normalTags.push(e.RealtimeTags.ContractSize);break;case"DELTA":n.normalTags.push(e.RealtimeTags.Delta);break;case"ELAST":n.normalTags.push(e.RealtimeTags.Elast);break;case"BREAK_EVEN":n.normalTags.push(e.RealtimeTags.BreakEven);break;case"START_OF_INDEX_PERIOD":n.normalTags.push(e.RealtimeDateTime.StartOfIndexPeriod);break;case"NAV":n.normalTags.push(e.RealtimeTags.NetAssetValue);break;case"IDS_REALTIME_REFERENCE_FEED":n.normalTags.push(e.RealtimeFundTags.ReferenceFeed);break;case"IDS_REALTIME_REFERENCE_SYMBOL":n.normalTags.push(e.RealtimeFundTags.ReferenceSymbol);break;case"NUM_TRADES":n.normalTags.push(e.RealtimeTags.TradeMoves);break;case"INFRONT_SECTOR":n.normalTags.push(e.RealtimeTags.InfinancialsSector);break;case"ATR30_HISTORICAL":n.normalTags.push(e.RealtimeCalculatedHistoryTags.AvgTrueRange);break;case"ADV":n.normalTags.push(e.RealtimeCalculatedHistoryTags.AverageDailyVolume);break;case"PHYSICAL_UNIT":n.normalTags.push(e.RealtimeTags.PhysicalUnit);break;default:n.computedTags.push(s)}}return n};var s=["WTD_CLOSE","MTD_CLOSE","YTD_CLOSE","ONE_W_CLOSE","ONE_M_CLOSE","THREE_M_CLOSE","SIX_M_CLOSE","ONE_Y_CLOSE","TWO_Y_CLOSE","THREE_Y_CLOSE","FIVE_Y_CLOSE","WTD_CHANGE","MTD_CHANGE","YTD_CHANGE","ONE_W_CHANGE","ONE_M_CHANGE","THREE_M_CHANGE","SIX_M_CHANGE","ONE_Y_CHANGE","TWO_Y_CHANGE","THREE_Y_CHANGE","FIVE_Y_CHANGE","WTD_PCT_CHANGE","MTD_PCT_CHANGE","YTD_PCT_CHANGE","ONE_W_PCT_CHANGE","ONE_M_PCT_CHANGE","THREE_M_PCT_CHANGE","SIX_M_PCT_CHANGE","ONE_Y_PCT_CHANGE","TWO_Y_PCT_CHANGE","THREE_Y_PCT_CHANGE","FIVE_Y_PCT_CHANGE","WTD_HIGH","MTD_HIGH","YTD_HIGH","ONE_W_HIGH","ONE_M_HIGH","THREE_M_HIGH","SIX_M_HIGH","ONE_Y_HIGH","TWO_Y_HIGH","THREE_Y_HIGH","FIVE_Y_HIGH","WTD_LOW","MTD_LOW","YTD_LOW","ONE_W_LOW","ONE_M_LOW","THREE_M_LOW","SIX_M_LOW","ONE_Y_LOW","TWO_Y_LOW","THREE_Y_LOW","FIVE_Y_LOW","LAST_TRADE","LAST_TRADE_DATE","HIST_PERFORMANCE","ATR30","ADV"];i.HistPerformanceTag=function(e){return-1!=s.indexOf(e.toUpperCase())},i.ComputedPerformanceTag=function(t){try{var n=t.toUpperCase()}catch(e){return null}switch(n){case"WTD_CHANGE":return new r(e.PerformanceTags.LAST_SOW,e.MwsRealtimeTags.LastTradedAt,!1);case"MTD_CHANGE":return new r(e.PerformanceTags.LAST_SOM,e.MwsRealtimeTags.LastTradedAt,!1);case"YTD_CHANGE":return new r(e.PerformanceTags.LAST_SOY,e.MwsRealtimeTags.LastTradedAt,!1);case"ONE_W_CHANGE":return new r(e.PerformanceTags.LAST_1W,e.MwsRealtimeTags.LastTradedAt,!1);case"ONE_M_CHANGE":return new r(e.PerformanceTags.LAST_1M,e.MwsRealtimeTags.LastTradedAt,!1);case"THREE_M_CHANGE":return new r(e.PerformanceTags.LAST_3M,e.MwsRealtimeTags.LastTradedAt,!1);case"SIX_M_CHANGE":return new r(e.PerformanceTags.LAST_6M,e.MwsRealtimeTags.LastTradedAt,!1);case"ONE_Y_CHANGE":return new r(e.PerformanceTags.LAST_1Y,e.MwsRealtimeTags.LastTradedAt,!1);case"TWO_Y_CHANGE":return new r(e.PerformanceTags.LAST_2Y,e.MwsRealtimeTags.LastTradedAt,!1);case"THREE_Y_CHANGE":return new r(e.PerformanceTags.LAST_3Y,e.MwsRealtimeTags.LastTradedAt,!1);case"FIVE_Y_CHANGE":return new r(e.PerformanceTags.LAST_5Y,e.MwsRealtimeTags.LastTradedAt,!1);case"WTD_PCT_CHANGE":return new r(e.PerformanceTags.LAST_SOW,e.MwsRealtimeTags.LastTradedAt,!0);case"MTD_PCT_CHANGE":return new r(e.PerformanceTags.LAST_SOM,e.MwsRealtimeTags.LastTradedAt,!0);case"YTD_PCT_CHANGE":return new r(e.PerformanceTags.LAST_SOY,e.MwsRealtimeTags.LastTradedAt,!0);case"ONE_W_PCT_CHANGE":return new r(e.PerformanceTags.LAST_1W,e.MwsRealtimeTags.LastTradedAt,!0);case"ONE_M_PCT_CHANGE":return new r(e.PerformanceTags.LAST_1M,e.MwsRealtimeTags.LastTradedAt,!0);case"THREE_M_PCT_CHANGE":return new r(e.PerformanceTags.LAST_3M,e.MwsRealtimeTags.LastTradedAt,!0);case"SIX_M_PCT_CHANGE":return new r(e.PerformanceTags.LAST_6M,e.MwsRealtimeTags.LastTradedAt,!0);case"ONE_Y_PCT_CHANGE":return new r(e.PerformanceTags.LAST_1Y,e.MwsRealtimeTags.LastTradedAt,!0);case"TWO_Y_PCT_CHANGE":return new r(e.PerformanceTags.LAST_2Y,e.MwsRealtimeTags.LastTradedAt,!0);case"THREE_Y_PCT_CHANGE":return new r(e.PerformanceTags.LAST_3Y,e.MwsRealtimeTags.LastTradedAt,!0);case"FIVE_Y_PCT_CHANGE":return new r(e.PerformanceTags.LAST_5Y,e.MwsRealtimeTags.LastTradedAt,!0);case"ONE_Y_TOTAL_RETURN":return new r(e.PerformanceTags.LAST_1Y_DIV,e.MwsRealtimeTags.LastTradedAt,!1);case"ONE_Y_TOTAL_RETURN_PCT":return new r(e.PerformanceTags.LAST_1Y_DIV,e.MwsRealtimeTags.LastTradedAt,!0);case"YTD_TOTAL_RETURN":return new r(e.PerformanceTags.LAST_SOY_DIV,e.MwsRealtimeTags.LastTradedAt,!1);case"YTD_TOTAL_RETURN_PCT":return new r(e.PerformanceTags.LAST_SOY_DIV,e.MwsRealtimeTags.LastTradedAt,!0)}return null},i.ForwardCurves=function(t){switch(t){case"availability":return e.ForwardCurve.Availability;case"month12_bid":return e.ForwardCurve.Month12Bid;case"month12_ask":return e.ForwardCurve.Month12Ask;case"month11_bid":return e.ForwardCurve.Month11Bid;case"month11_ask":return e.ForwardCurve.Month11Ask;case"month10_bid":return e.ForwardCurve.Month10Bid;case"month10_ask":return e.ForwardCurve.Month10Ask;case"month9_bid":return e.ForwardCurve.Month9Bid;case"month9_ask":return e.ForwardCurve.Month9Ask;case"month8_bid":return e.ForwardCurve.Month8Bid;case"month8_ask":return e.ForwardCurve.Month8Ask;case"month7_bid":return e.ForwardCurve.Month7Bid;case"month7_ask":return e.ForwardCurve.Month7Ask;case"month6_bid":return e.ForwardCurve.Month6Bid;case"month6_ask":return e.ForwardCurve.Month6Ask;case"month5_bid":return e.ForwardCurve.Month5Bid;case"month5_ask":return e.ForwardCurve.Month5Ask;case"month4_bid":return e.ForwardCurve.Month4Bid;case"month4_ask":return e.ForwardCurve.Month4Ask;case"month3_bid":return e.ForwardCurve.Month3Bid;case"month3_ask":return e.ForwardCurve.Month3Ask;case"month2_bid":return e.ForwardCurve.Month2Bid;case"month2_ask":return e.ForwardCurve.Month2Ask;case"month1_bid":return e.ForwardCurve.Month1Bid;case"month1_ask":return e.ForwardCurve.Month1Ask;case"value_date":return e.ForwardCurve.ValueDate}return null},i.SplitInstrumentKey=function(e){var t=null,i=e.indexOf("|");if(i>-1){if(-1!=e.indexOf("|",i+1))return null;var r=Number(e.substr(0,i));r>0&&(t=new n(r,e.substr(i+1,e.length-i-1)))}return t},i.LoginDataType=function(e){switch(e){case"NONE":return Infront.SymbolType.None;case"STOCKS":return Infront.SymbolType.Stock;case"NEWS":return Infront.SymbolType.News;case"BONDS":return Infront.SymbolType.Bond;case"EUROOPTIONS":return Infront.SymbolType.EuroOption;case"FUTURES":return Infront.SymbolType.Futures;case"COMMODITIES":return Infront.SymbolType.Commodity;case"INDEX":return Infront.SymbolType.Index;case"FOREX":return Infront.SymbolType.Forex;case"USOPTIONS":return Infront.SymbolType.UsOption;case"FUNDS":return Infront.SymbolType.Funds;case"CHAT":return 1024;case"URLNEWS":return 2048;case"ORDERS":return 4096;case"WARRANTS":return 16384;case"FEATURES":return 32768;case"SYMBOL_EXT":return 65536;case"CALENDAR_UPDATES":return 131072;case"FX_DEPOSIT_RATES":return 262144;case"MTF":return 524288;case"WEB_FEATURE":return 2097152}return 0},i.StrToOrderType=function(n){for(var i in e.OrderTypes){var r=Number(i);if(!isNaN(r)&&t.OrderTypeToStr(r)==n)return r}return null},i.StrToAlertType=function(t){switch(t){case"INSTRUMENT_ALERT":return e.AlertType.Instrument;case"CHAIN_ALERT":return e.AlertType.Chain;case"LIST_ALERT":return e.AlertType.List;case"NEWS_ALERT":return e.AlertType.News;case"PORTFOLIO_ALERT":return e.AlertType.Portfolio}},i.StrToAlertTriggerType=function(t){switch(t){case"KEEP_ACTIVE":return e.AlertTriggerType.KeepActive;case"DISABLE":return e.AlertTriggerType.Disable;case"TIMEOUT":return e.AlertTriggerType.Timeout;case"RENEW_DAILY":return e.AlertTriggerType.RenewDaily}},i.StrToAlertMdField=function(t){switch(t){case"LAST":return e.AlertMarketDataField.Last;case"BID":return e.AlertMarketDataField.Bid;case"BID_SIZE":return e.AlertMarketDataField.BidSize;case"ASK":return e.AlertMarketDataField.Ask;case"ASK_SIZE":return e.AlertMarketDataField.AskSize;case"CHANGE":return e.AlertMarketDataField.Change;case"PCT_CHANGE":return e.AlertMarketDataField.ChangePct;case"VOLUME":return e.AlertMarketDataField.Volume;case"TURNOVER":return e.AlertMarketDataField.Turnover}},i.StrToOperator=function(t){switch(t){case"OR":return e.AlertOperator.Or;case"AND":return e.AlertOperator.And;case"EQ":return e.AlertOperator.Eq;case"NE":return e.AlertOperator.Ne;case"GT":return e.AlertOperator.Gt;case"GTE":return e.AlertOperator.Gte;case"LT":return e.AlertOperator.Lt;case"TTE":return e.AlertOperator.Lte}}}(e.FromMws||(e.FromMws={})),function(t){t.Tags=function(e){return[]},t.ServiceTypeToStr=function(t){switch(t){case e.ServiceType.Realtime:return"Realtime";case e.ServiceType.Delayed:return"Delayed";case e.ServiceType.Historical:return"Historical";case e.ServiceType.Chat:return"Chat";case e.ServiceType.OrderEntry:return"OrderEntry";case e.ServiceType.Fundamentals:return"Fundamentals";case e.ServiceType.Symbols:return"Symbols";case e.ServiceType.Storage:return"Storage";case e.ServiceType.StorageUpload:return"StorageUpload";case e.ServiceType.Chains:return"Chains";case e.ServiceType.AuxiliaryData:return"AuxiliaryData";case e.ServiceType.Calendar:return"Calendar";case e.ServiceType.IndexWeight:return"IndexWeight";case e.ServiceType.Consolidated:return"Consolidated";case e.ServiceType.Alert:return"Alert";case e.ServiceType.AccHistCalcHist:return"AccHistCalcHist";case e.ServiceType.MotionDetection:return"MotionDetection";case e.ServiceType.News:return"News";case e.ServiceType.PortfolioTracker:return"PortfolioTracker";case e.ServiceType.Kid:return"Kid";default:return"<"+t.toString(16)+">"}},t.HeadlineTypeToStr=function(e){switch(e){case o.FlashLevel1:return"FLASH_LEVEL_1";case o.FlashLevel2:return"FLASH_LEVEL_2";case o.FlashLevel3:return"FLASH_LEVEL_3";case o.Url:return"URL";case o.Regular:return"REGULAR"}},t.OrderTypeToStr=function(t){switch(t){case e.OrderTypes.Normal:return"NORMAL";case e.OrderTypes.FillOrKill:return"FILL_OR_KILL";case e.OrderTypes.FillAndKill:return"FILL_AND_KILL";case e.OrderTypes.FillOrNothing:return"FILL_OR_NOTHING";case e.OrderTypes.CrossOrder:return"CROSS";case e.OrderTypes.BestPossible:return"BEST_POSSIBLE";case e.OrderTypes.AtMarket:return"AT_MARKET";case e.OrderTypes.Market:return"MARKET";case e.OrderTypes.MarketToLimit:return"MARKET_TO_LIMIT";case e.OrderTypes.AtMarketAndKill:return"AT_MARKET_AND_KILL";case e.OrderTypes.QuoteRequest:return"QUOTE_ORDER";case e.OrderTypes.LimitOrMarketOnTheClose:return"LIMIT_OR_MARKET_ON_CLOSE";case e.OrderTypes.StopLimit:return"STOP_LIMIT";case e.OrderTypes.StopLoss:return"STOP_LOSS";case e.OrderTypes.Contingent:return"CONTINGENT";case e.OrderTypes.Flex:return"FLEX";case e.OrderTypes.Interest:return"INTEREST";case e.OrderTypes.Accept:return"ACCEPT";case e.OrderTypes.Parent:return"PARENT";case e.OrderTypes.Strategy:return"STRATEGY";case e.OrderTypes.Fix:return"FIX";case e.OrderTypes.LimitToMarket:return"LIMIT_TO_MARKET";case e.OrderTypes.BestToLimit:return"BEST_TO_LIMIT";case e.OrderTypes.MultiLeg:return"MULTI_LEG";case e.OrderTypes.MarketFillOrKill:return"MARKET_FOK";case e.OrderTypes.MarketFillAndKill:return"MARKET_FAK";case e.OrderTypes.Pegged:return"PEGGED";case e.OrderTypes.AtOpen:return"AT_OPEN";case e.OrderTypes.AtClose:return"AT_CLOSE";case e.OrderTypes.Oco:return"OCO";case e.OrderTypes.Iceberg:return"ICEBERG";default:return"NORMAL"}},t.OrderStatusToStr=function(t){switch(t){case e.OrderStatus.Inactive:return"INACTIVE_ORDER";case e.OrderStatus.Request:return"ORDER_REQUEST";case e.OrderStatus.Exchange:return"EXCHANGE_ORDER";case e.OrderStatus.Internal:return"INTERNAL_ORDER";case e.OrderStatus.Delete:return"DELETE_REQUEST";case e.OrderStatus.Offline:return"OFFLINE_ORDER";case e.OrderStatus.Deleted:return"DELETED_ORDER";case e.OrderStatus.Monitor:return"MONITOR_ORDER";case e.OrderStatus.Working:return"WORKING_ORDER";case e.OrderStatus.ModifiedNew:return"MODTONEW_ORDER";case e.OrderStatus.ErrorSystem:return"SYS_ERR_ORDER";case e.OrderStatus.ErrorTradingPower:return"TRD_POWER_ERR_ORDER";case e.OrderStatus.ErrorLimit:return"LIMIT_ERR_ORDER";case e.OrderStatus.ErrorCommunication:return"COMM_ERR_ORDER";case e.OrderStatus.Expired:return"EXPIRED_ORDER";case e.OrderStatus.Executed:return"EXECUTED_ORDER";case e.OrderStatus.Rejected:return"REJECTED_ORDER";case e.OrderStatus.PendingInsert:return"PENDING_INSERT_ORDER";case e.OrderStatus.PendingModify:return"PENDING_MODIFY_ORDER";case e.OrderStatus.PendingDelete:return"PENDING_DELETE_ORDER";case e.OrderStatus.Simulate:return"SIMULATE";case e.OrderStatus.CareRequest:return"CARE_REQUEST";case e.OrderStatus.DoneForDay:return"DONE_FOR_DAY";case e.OrderStatus.Pending:return"PENDING_INSERT_ORDER";case e.OrderStatus.DeletedExecuted:return"EXECUTED_ORDER";case e.OrderStatus.DeletedRefused:return"DELETED_ORDER";case e.OrderStatus.Parent:return"PARENT_ORDER";case e.OrderStatus.DeletedModify:case e.OrderStatus.Abandoned:return"DELETED_ORDER";default:return""}},t.ParamTypeToStr=function(t){switch(t){case e.ParamType.Parent:return"PARENT";case e.ParamType.FreeText:return"FREE_TEXT";case e.ParamType.Double:return"DOUBLE";case e.ParamType.StopPrice:return"STOP_PRICE";case e.ParamType.ValidSession:return"VALID_SESSION";case e.ParamType.InitCode:return"INIT_CODE";case e.ParamType.DoneCode:return"DONE_CODE";case e.ParamType.Time:return"TIME";case e.ParamType.Date:return"DATE";case e.ParamType.Datetime:return"DATETIME";case e.ParamType.SingleChoiceListEntry:case e.ParamType.SingleChoiceListDefault:case e.ParamType.DropdownFreeText:case e.ParamType.DropdownFreeTextDefault:case e.ParamType.DropdownFreeTextNoSave:case e.ParamType.Dropdown:return"DROPDOWN";case e.ParamType.Bool:return"BOOL";case e.ParamType.Int:return"INT";case e.ParamType.Instrument:return"INSTRUMENT";case e.ParamType.Price:return"PRICE";case e.ParamType.VolumeLots:return"VOLUME_LOTS";case e.ParamType.MultiLine:return"MULTI_LINE";default:return""}},t.AlertTypeToStr=function(t){switch(t){case e.AlertType.Instrument:return"INSTRUMENT_ALERT";case e.AlertType.Chain:return"CHAIN_ALERT";case e.AlertType.List:return"LIST_ALERT";case e.AlertType.News:return"NEWS_ALERT";case e.AlertType.Portfolio:return"PORTFOLIO_ALERT"}},t.AlertUpdateTypeToStr=function(t){switch(t){case e.AlertUpdateType.Alert:return"ALERT";case e.AlertUpdateType.Event:return"EVENT";case e.AlertUpdateType.Owc:return"OWC"}},t.AlertActionTypeToStr=function(t){switch(t){case e.AlertActionType.Added:return"ADDED";case e.AlertActionType.Modified:return"MODIFIED";case e.AlertActionType.Deleted:return"DELETED"}},t.AlertOperatorToStr=function(t){switch(t){case e.AlertOperator.Or:return"OR";case e.AlertOperator.And:return"AND";case e.AlertOperator.Eq:return"EQ";case e.AlertOperator.Ne:return"NE";case e.AlertOperator.Gt:return"GT";case e.AlertOperator.Gte:return"GTE";case e.AlertOperator.Lt:return"LT";case e.AlertOperator.Lte:return"LTE";default:return"??"}},t.AlertTriggerTypeToStr=function(t){switch(t){case e.AlertTriggerType.KeepActive:return"KEEP_ACTIVE";case e.AlertTriggerType.Disable:return"DISABLE";case e.AlertTriggerType.Timeout:return"TIMEOUT";case e.AlertTriggerType.RenewDaily:return"RENEW_DAILY"}},t.AlertMdFieldToStr=function(t){switch(t){case e.AlertMarketDataField.Last:return"LAST";case e.AlertMarketDataField.Bid:return"BID";case e.AlertMarketDataField.BidSize:return"BID_SIZE";case e.AlertMarketDataField.Ask:return"ASK";case e.AlertMarketDataField.AskSize:return"ASK_SIZE";case e.AlertMarketDataField.Change:return"CHANGE";case e.AlertMarketDataField.ChangePct:return"PCT_CHANGE";case e.AlertMarketDataField.Volume:return"VOLUME";case e.AlertMarketDataField.Turnover:return"TURNOVER"}},t.AlertPortfolioDataFieldToStr=function(t){switch(t){case e.AlertPortfolioDataField.Last:return"LAST";case e.AlertPortfolioDataField.Change:return"CHANGE";case e.AlertPortfolioDataField.PctChange:return"PCT_CHANGE"}}}(t=e.ToMws||(e.ToMws={}));var i=function(){};e.MWSChain=i;var r=function(e,t,n,i,r){this.key=e,this.label=t,this.may_persist=n,this.mask=i,this.keyboard=r?"NUMERIC":"ALPHANUMERIC"};e.MWSTradingInputField=r;var a=function(){function t(t){this.tradable_feeds=[],this.input_fields=[],this.addInputField("user_id","User",!0,!1,!1),0==(t&e.Info2.OeHtmlLogin)&&this.addInputField("password","Password",!1,!0,!1),0!=(t&e.Info2.OeReqPin)&&this.addInputField("pin","PIN",!1,!1,!0)}return t.prototype.addInputField=function(e,t,n,i,a){this.input_fields.push(new r(e,t,n,i,a))},t}();e.MWSTradingRoutes=a;var s=function(){};e.MWSFieldReference=s;var o,l=function(){};e.MWSHistoricalPerformance=l,e.MWSMakeFullDateTime=function(e,t,n){void 0===n&&(n=!0);var i=new Date;return i.setFullYear(e/1e4>>0,((e/100>>0)%100>>0)-1,e%100>>0),i.setUTCHours(t/1e4>>0,(t/100>>0)%100>>0,t%100>>0),n?i.toISOString():i.toISOString().split(".")[0]+"Z"},e.MWSMakeDate=function(e){var t=new Date;return t.setFullYear(e/1e4>>0,((e/100>>0)%100>>0)-1,e%100>>0),t.setUTCHours(0),t.toISOString().split("T")[0]},function(e){e[e.FlashLevel1=0]="FlashLevel1",e[e.FlashLevel2=1]="FlashLevel2",e[e.FlashLevel3=2]="FlashLevel3",e[e.Url=3]="Url",e[e.Regular=4]="Regular"}(o=e.MWSHeadlineType||(e.MWSHeadlineType={}));var c=function(){};e.MWSTradeItem=c;var d=function(){this.instrument=new n(null,null),this.trades=[]};e.MWSTrade=d;var u=function(){};e.MWSNewsSource=u;var h=function(){};e.MWSNewsRegion=h;var p=function(){this.sources=[],this.regions=[]};e.MWSNewsSources=p;var m=function(){function e(){this.data_types=[]}return e.prototype.pluralize=function(e,t,n){return e>1?e.toString()+" "+n+" ":1==e?e.toString()+" "+t+" ":""},e.prototype.getTimeStr=function(e){var t=Math.floor(e/1440);e-=1440*t;var n=Math.floor(e/60);e-=1440*n;var i="";return i+=this.pluralize(t,"day","days"),(i+=this.pluralize(n,"hour","hours"))+this.pluralize(e,"minute","minutes")},e.prototype.setAccessStr=function(){var e=Math.floor(this.max_delay_secs/60);0===this.max_delay_secs?this.access="Realtime":this.access="Delayed "+this.getTimeStr(e)},e}();e.MwsMarketInfo=m,e.CountryIdToCode=function(e){switch(e){case 1:return"US";case 2:return"CA";case 7:return"RU";case 20:return"EG";case 27:return"ZA";case 30:return"GR";case 31:return"NL";case 32:return"BE";case 33:return"FR";case 34:return"ES";case 36:return"HU";case 39:return"IT";case 40:return"RO";case 41:return"CH";case 43:return"AT";case 44:return"GB";case 45:return"DK";case 46:return"SE";case 47:return"NO";case 48:return"PL";case 49:return"DE";case 52:return"MX";case 54:return"AR";case 55:return"BR";case 56:return"CL";case 58:return"VE";case 60:return"MY";case 61:return"AU";case 62:return"ID";case 63:return"PH";case 64:return"NZ";case 65:return"SG";case 66:return"TH";case 81:return"JP";case 82:return"KR";case 84:return"VN";case 86:return"CN";case 90:return"TR";case 91:return"IN";case 92:return"PA";case 212:return"MA";case 216:return"TN";case 230:return"MU";case 233:return"GH";case 234:return"NG";case 250:return"RW";case 254:return"KE";case 255:return"TZ";case 256:return"UG";case 258:return"MZ";case 260:return"ZM";case 263:return"ZW";case 264:return"NA";case 265:return"MW";case 267:return"BW";case 268:return"SZ";case 351:return"PT";case 352:return"LU";case 353:return"IE";case 354:return"IS";case 356:return"MT";case 358:return"FI";case 359:return"BG";case 370:return"LT";case 371:return"LV";case 372:return"EE";case 380:return"UA";case 385:return"HR";case 386:return"SI";case 420:return"CZ";case 852:return"HK";case 886:return"TW";case 972:return"IL";case 996:return"KG";default:return""}},e.CountryIdToString=function(e){switch(e){case 54:return"Argentina";case 61:return"Australia";case 43:return"Austria";case 32:return"Belgium";case 359:return"Bulgaria";case 55:return"Brazil";case 267:return"Botswana";case 41:return"Switzerland";case 56:return"Chile";case 86:return"China";case 225:return"C\xf4te d'Ivoire";case 420:return"Czech Republic";case 49:return"Germany";case 45:return"Denmark";case 20:return"Egypt";case 34:return"Spain";case 372:return"Estonia";case 358:return"Finland";case 33:return"France";case 44:return"United Kingdom";case 233:return"Ghana";case 350:return"Gibraltar";case 30:return"Greece";case 852:return"Hong Kong";case 385:return"Croatia";case 36:return"Hungary";case 62:return"Indonesia";case 91:return"India";case 353:return"Ireland";case 354:return"Iceland";case 972:return"Israel";case 39:return"Italy";case 81:return"Japan";case 254:return"Kenya";case 996:return"Kyrgyzstan";case 82:return"Korea, Republic of";case 370:return"Lithuania";case 352:return"Luxembourg";case 371:return"Latvia";case 212:return"Morocco";case 52:return"Mexico";case 356:return"Malta";case 258:return"Mozambique";case 230:return"Mauritius";case 265:return"Malawi";case 60:return"Malaysia";case 264:return"Namibia";case 234:return"Nigeria";case 31:return"Netherlands";case 47:return"Norway";case 64:return"New Zealand";case 92:return"Pakistan";case 63:return"Philippines";case 48:return"Poland";case 351:return"Portugal";case 40:return"Romania";case 7:return"Russian Federation";case 250:return"Rwanda";case 65:return"Singapore";case 386:return"Slovenia";case 46:return"Sweden";case 268:return"Swaziland";case 66:return"Thailand";case 216:return"Tunisia";case 90:return"Turkey";case 886:return"Taiwan, Province of China";case 255:return"Tanzania, United Republic of";case 256:return"Uganda";case 380:return"Ukraine";case 1:return"United States";case 58:return"Venezuela, Bolivarian Republic of";case 84:return"Viet Nam";case 27:return"South Africa";case 260:return"Zambia";case 263:return"Zimbabwe";default:return"World"}};var g=function(){function e(){}return e.isBuy=function(t){return t.toUpperCase()==e.BUY},e.isSell=function(t){return t.toUpperCase()==e.SELL},e.BUY="BUY",e.SELL="SELL",e}();e.MWSBuyOrSell=g,e.LoginDataType=function(e){switch(e){case"NONE":return Infront.SymbolType.None;case"STOCKS":return Infront.SymbolType.Stock;case"NEWS":return Infront.SymbolType.News;case"BONDS":return Infront.SymbolType.Bond;case"EUROOPTIONS":return Infront.SymbolType.EuroOption;case"FUTURES":return Infront.SymbolType.Futures;case"COMMODITIES":return Infront.SymbolType.Commodity;case"INDEX":return Infront.SymbolType.Index;case"FOREX":return Infront.SymbolType.Forex;case"USOPTIONS":return Infront.SymbolType.UsOption;case"FUNDS":return Infront.SymbolType.Funds;case"CHAT":return 1024;case"URLNEWS":return 2048;case"ORDERS":return 4096;case"WARRANTS":return 16384;case"FEATURES":return 32768;case"SYMBOL_EXT":return 65536;case"CALENDAR_UPDATES":return 131072;case"FX_DEPOSIT_RATES":return 262144;case"MTF":return 524288;case"WEB_FEATURE":return 2097152}return 0}}(IDS||(IDS={})),function(e){!function(e){e[e.Upload=32]="Upload",e[e.Download=33]="Download",e[e.ChangeMetaData=34]="ChangeMetaData",e[e.Browse=35]="Browse",e[e.AllCategories=36]="AllCategories",e[e.Delete=37]="Delete",e[e.CreateCategories=38]="CreateCategories"}(e.StorageRequest||(e.StorageRequest={})),function(e){e[e.Separator=0]="Separator",e[e.Title=256]="Title",e[e.Description=257]="Description",e[e.Crc32=258]="Crc32",e[e.Size=259]="Size",e[e.UniqueTitleLimit=260]="UniqueTitleLimit",e[e.Category=272]="Category",e[e.Property=273]="Property",e[e.FilterCategory=274]="FilterCategory",e[e.FilterProperty=275]="FilterProperty",e[e.ExcludeCategory=276]="ExcludeCategory",e[e.UserIdentifier=279]="UserIdentifier",e[e.UserNamespace=280]="UserNamespace",e[e.CreatePolicy=288]="CreatePolicy",e[e.UniquePolicy=289]="UniquePolicy",e[e.DownloadPolicy=290]="DownloadPolicy",e[e.CheckPolicy=291]="CheckPolicy",e[e.StorageCookie=292]="StorageCookie",e[e.CreatedDate=304]="CreatedDate",e[e.CreatedTime=305]="CreatedTime",e[e.PublishDate=306]="PublishDate",e[e.PublishTime=307]="PublishTime",e[e.ExpiryDate=308]="ExpiryDate",e[e.ExpiryTime=309]="ExpiryTime",e[e.ContentId=512]="ContentId",e[e.ContentData=513]="ContentData",e[e.MultiPacket=8496]="MultiPacket",e[e.ResponseCode=8512]="ResponseCode",e[e.ResponseMessage=8513]="ResponseMessage"}(e.StorageTags||(e.StorageTags={})),function(e){e[e.Ignore=0]="Ignore",e[e.PropertyOnly=1]="PropertyOnly",e[e.CategoryOnly=2]="CategoryOnly",e[e.PropertyAndCategory=3]="PropertyAndCategory"}(e.StorageCreatePolicy||(e.StorageCreatePolicy={})),function(e){e[e.CreateNew=0]="CreateNew",e[e.DeleteOld=1]="DeleteOld",e[e.Category=2]="Category",e[e.CategoryTitle=3]="CategoryTitle",e[e.CategoryUniqueTitle=4]="CategoryUniqueTitle"}(e.StorageUniquePolicy||(e.StorageUniquePolicy={})),function(e){e[e.Middle=0]="Middle",e[e.Begin=1]="Begin",e[e.End=2]="End",e[e.BeginAndEnd=3]="BeginAndEnd"}(e.StorageMultiPacket||(e.StorageMultiPacket={})),function(e){e.Mobile_List="mobile-list",e.Market_List="market-list",e.Option_List="option-list"}(e.StorageTypes||(e.StorageTypes={})),function(e){e.Symbollist="Symbollist",e.IsPortfolio="isportfolio",e.Account="Account",e.PortfolioID="PortfolioID",e.Currency="Currency",e.Symbol="Symbol",e.ReferenceIndex="ReferenceIndexSymbol",e.FeedNu="FeedNu",e.SymbolTicker="SymbolTicker",e.HoldingSymbolType="SymbolType",e.HoldingSubType="SubType",e.HoldingGroup="Group",e.HoldingWeight="Weight",e.HoldingVolume="Volume",e.HoldingAvgPrice="AveragePrice",e.Feed="Feed",e.Ticker="Ticker",e.Provider="provider",e.Service="service"}(e.StorageXmlTags||(e.StorageXmlTags={}))}(IDS||(IDS={})),function(e){var t;!function(e){e[e.None=0]="None",e[e.Stock=1]="Stock",e[e.News=2]="News",e[e.Bond=4]="Bond",e[e.EuroOption=8]="EuroOption",e[e.Futures=16]="Futures",e[e.Commodity=32]="Commodity",e[e.Index=64]="Index",e[e.Forex=128]="Forex",e[e.UsOption=256]="UsOption",e[e.Funds=512]="Funds",e[e.Option=1024]="Option",e[e.Combo=2048]="Combo",e[e.CFD=4096]="CFD",e[e.Certificate=8192]="Certificate",e[e.Indicator=16384]="Indicator",e[e.Unknown=255]="Unknown"}(t=e.SymbolType||(e.SymbolType={})),function(e){e[e.Synthetic=-1]="Synthetic",e[e.Unknown=255]="Unknown",e[e.None=0]="None",e[e.OptionCall=1]="OptionCall",e[e.OptionPut=2]="OptionPut",e[e.OptionFuture=3]="OptionFuture",e[e.OptionForward=4]="OptionForward",e[e.OptionCallWarrant=5]="OptionCallWarrant",e[e.OptionSecLending=6]="OptionSecLending",e[e.OptionPutWarrant=7]="OptionPutWarrant",e[e.OptionCalendarSpread=8]="OptionCalendarSpread",e[e.OptionVolatilityTrade=9]="OptionVolatilityTrade",e[e.OptionBarrierCall=10]="OptionBarrierCall",e[e.OptionBarrierPut=11]="OptionBarrierPut",e[e.OptionBarrier=12]="OptionBarrier",e[e.OptionBarrierDownInCall=13]="OptionBarrierDownInCall",e[e.OptionBarrierDownInPut=14]="OptionBarrierDownInPut",e[e.OptionBarrierDownOutCall=15]="OptionBarrierDownOutCall",e[e.OptionBarrierDownOutPut=16]="OptionBarrierDownOutPut",e[e.OptionBarrierUpInCall=17]="OptionBarrierUpInCall",e[e.OptionBarrierUpInPut=18]="OptionBarrierUpInPut",e[e.OptionBarrierUpOutCall=19]="OptionBarrierUpOutCall",e[e.OptionBarrierUpOutPut=20]="OptionBarrierUpOutPut",e[e.BondConvertible=32]="BondConvertible",e[e.BondPremium=33]="BondPremium",e[e.BondSwap=34]="BondSwap",e[e.BondUTC=35]="BondUTC",e[e.BondCertificate=36]="BondCertificate",e[e.StockBonus=64]="StockBonus",e[e.StockRight=65]="StockRight",e[e.StockSubscriptionOption=66]="StockSubscriptionOption",e[e.ForexSpot=96]="ForexSpot",e[e.ForexDeposit=97]="ForexDeposit",e[e.ForexFRA=98]="ForexFRA",e[e.ForexForward=99]="ForexForward",e[e.ForexDepositIndicative=100]="ForexDepositIndicative",e[e.ForexFreeFRA=101]="ForexFreeFRA",e[e.ForexOption=102]="ForexOption",e[e.OptionBinaryConCall=128]="OptionBinaryConCall",e[e.OptionBinaryConPut=129]="OptionBinaryConPut",e[e.OptionBinaryGapCall=130]="OptionBinaryGapCall",e[e.OptionBinaryGapPut=131]="OptionBinaryGapPut",e[e.OptionBinaryAonCall=132]="OptionBinaryAonCall",e[e.OptionBinaryAonPut=133]="OptionBinaryAonPut",e[e.OptionBinarySupershare=134]="OptionBinarySupershare",e[e.OptionStock=103]="OptionStock",e[e.CertBasket=144]="CertBasket",e[e.CertDiscount=145]="CertDiscount",e[e.CertLeverage=146]="CertLeverage",e[e.CertBonus=147]="CertBonus",e[e.CertOther=148]="CertOther",e[e.CertInvestment=149]="CertInvestment",e[e.CertParticipation=150]="CertParticipation",e[e.CertCashOrShare=151]="CertCashOrShare",e[e.CertExpress=152]="CertExpress",e[e.CertGuarantee=153]="CertGuarantee",e[e.CertIndex=154]="CertIndex",e[e.CertOutperform=155]="CertOutperform",e[e.CertBalance=156]="CertBalance",e[e.CertBullBear=157]="CertBullBear",e[e.CertLongShort=158]="CertLongShort",e[e.CertMiniFuture=159]="CertMiniFuture",e[e.CertIr=160]="CertIr",e[e.CertCredit=161]="CertCredit",e[e.CertCoupon=162]="CertCoupon",e[e.CertPremium=163]="CertPremium",e[e.CertGrowth=164]="CertGrowth",e[e.CertTracker=166]="CertTracker",e[e.BondEquityIndex=274]="BondEquityIndex",e[e.BondPortfolio=275]="BondPortfolio",e[e.BondHedge=277]="BondHedge",e[e.BondMarket=278]="BondMarket",e[e.BondCredit=279]="BondCredit",e[e.BondCommodity=280]="BondCommodity",e[e.BondStrategy=281]="BondStrategy",e[e.BondInterval=282]="BondInterval",e[e.BondTreasuryNotes=256]="BondTreasuryNotes",e[e.BondTreasury=257]="BondTreasury",e[e.BondCorporate=258]="BondCorporate",e[e.BondMunicipal=259]="BondMunicipal",e[e.BondLoanInstitution=260]="BondLoanInstitution",e[e.BondLeasingCompany=261]="BondLeasingCompany",e[e.BondHousing=262]="BondHousing",e[e.BondForeign=263]="BondForeign",e[e.BondBankSavings=264]="BondBankSavings",e[e.BondTreasuryBills=265]="BondTreasuryBills",e[e.BondFloater=266]="BondFloater",e[e.BondStrips=267]="BondStrips",e[e.BondZero=268]="BondZero",e[e.BondGovernment=269]="BondGovernment",e[e.BondOther=270]="BondOther",e[e.BondMoneyMarket=271]="BondMoneyMarket",e[e.BondMortgage=272]="BondMortgage",e[e.BondBenchmark=273]="BondBenchmark",e[e.FundUcitsEtf=509]="FundUcitsEtf",e[e.FundETN=510]="FundETN",e[e.FundMutual=511]="FundMutual",e[e.UcitsEtf=509]="UcitsEtf",e[e.Etf=513]="Etf",e[e.DerivativeIrSwap=514]="DerivativeIrSwap",e[e.IndicatorSpread=515]="IndicatorSpread",e[e.DerivativeOniSpread=516]="DerivativeOniSpread",e[e.DerivativeSwaption=517]="DerivativeSwaption",e[e.DerivativeTenorBasis=518]="DerivativeTenorBasis",e[e.DerivativeCurrencyBasis=519]="DerivativeCurrencyBasis",e[e.DerivativeCapsFloor=520]="DerivativeCapsFloor",e[e.DerivativeCrossCurrencySwap=521]="DerivativeCrossCurrencySwap"}(e.SymbolSubType||(e.SymbolSubType={})),e.SymbolSearchTypes=t.Stock|t.Bond|t.EuroOption|t.Futures|t.Commodity|t.Index|t.Forex|t.UsOption|t.Funds}(Infront||(Infront={})),function(e){var t,n,i,r,a,s,o,l,c,d,u,h;!function(e){e[e.InsertOrder=5]="InsertOrder",e[e.DeleteOrder=6]="DeleteOrder",e[e.DeleteAllOrders=7]="DeleteAllOrders",e[e.OrderList=9]="OrderList",e[e.TradeList=10]="TradeList",e[e.Portfolio=11]="Portfolio",e[e.PortfolioNames=12]="PortfolioNames",e[e.Login=13]="Login",e[e.Logout=14]="Logout",e[e.TradingPower=15]="TradingPower",e[e.CustomerOrderList=17]="CustomerOrderList",e[e.CustomerTradeList=18]="CustomerTradeList",e[e.ModifyOrder=19]="ModifyOrder",e[e.ActivateOrder=21]="ActivateOrder",e[e.MarketProperties=22]="MarketProperties",e[e.QuoteRequest=23]="QuoteRequest",e[e.CreatePortfolio=24]="CreatePortfolio",e[e.MoveTrade=25]="MoveTrade",e[e.CustomFields=26]="CustomFields",e[e.TickSize=27]="TickSize",e[e.ClientAccount=28]="ClientAccount",e[e.Algorithms=29]="Algorithms",e[e.OrderConfirm=30]="OrderConfirm",e[e.OrderConfirmData=31]="OrderConfirmData",e[e.PositionUnblock=32]="PositionUnblock",e[e.DayTradePosGet=33]="DayTradePosGet",e[e.DayTradePosClose=34]="DayTradePosClose",e[e.OrderHistory=35]="OrderHistory",e[e.RiskLevel=86]="RiskLevel"}(e.TradingRequest||(e.TradingRequest={})),function(e){e[e.Separator=0]="Separator",e[e.CustomerId=13]="CustomerId",e[e.Login=13]="Login",e[e.Password=24]="Password",e[e.Pin=126]="Pin",e[e.RequestId=81]="RequestId",e[e.LoginToken=130]="LoginToken",e[e.LoginTokenType=346]="LoginTokenType",e[e.LoginSignedToken=347]="LoginSignedToken",e[e.LoginChallenge=43]="LoginChallenge",e[e.CustomerAdditionalId=280]="CustomerAdditionalId",e[e.Comment=23]="Comment",e[e.ServerProperties=103]="ServerProperties",e[e.ServerProperties2=802]="ServerProperties2",e[e.ServerProperties3=804]="ServerProperties3",e[e.ServerProperties4=805]="ServerProperties4",e[e.UserProperties=104]="UserProperties",e[e.Subscribe=66]="Subscribe",e[e.Unsubscribe=67]="Unsubscribe",e[e.Ask=1]="Ask",e[e.Bid=2]="Bid",e[e.OpenVolume=6]="OpenVolume",e[e.OrderType=7]="OrderType",e[e.Portfolio=8]="Portfolio",e[e.SubMarket=10]="SubMarket",e[e.Price=9]="Price",e[e.AveragePrice=158]="AveragePrice",e[e.ValidDate=11]="ValidDate",e[e.Volume=12]="Volume",e[e.ExpiryDate=15]="ExpiryDate",e[e.AutoActivate=27]="AutoActivate",e[e.AutoDelete=28]="AutoDelete",e[e.CustomerReference=29]="CustomerReference",e[e.BrokerClientId=30]="BrokerClientId",e[e.Ecn=31]="Ecn",e[e.Currency=64]="Currency",e[e.Date=3]="Date",e[e.Time=82]="Time",e[e.TimeUs=164]="TimeUs",e[e.ExchInstrId=16]="ExchInstrId",e[e.Isin=17]="Isin",e[e.Market=18]="Market",e[e.Sedol=19]="Sedol",e[e.StrikePrice=20]="StrikePrice",e[e.Underlying=21]="Underlying",e[e.Valoren=22]="Valoren",e[e.InstrType=25]="InstrType",e[e.InstrSubType=118]="InstrSubType",e[e.Symbol=26]="Symbol",e[e.InstrDescr=131]="InstrDescr",e[e.Mic=330]="Mic",e[e.ExecutionMarket=278]="ExecutionMarket",e[e.TradeCustomNu=364]="TradeCustomNu",e[e.TradeCustomData=365]="TradeCustomData",e[e.LastTradeDate=139]="LastTradeDate",e[e.LastTrade=140]="LastTrade",e[e.SharesPerOption=141]="SharesPerOption",e[e.Language=142]="Language",e[e.UnderlyingBase=143]="UnderlyingBase",e[e.UnderlyingFeed=119]="UnderlyingFeed",e[e.UnderlyingIsin=279]="UnderlyingIsin",e[e.ComponentCode=120]="ComponentCode",e[e.ChangeHist=121]="ChangeHist",e[e.FailCode=32]="FailCode",e[e.FailDescription=33]="FailDescription",e[e.FailEventId=367]="FailEventId",e[e.OrderStatus=34]="OrderStatus",e[e.OrderId=35]="OrderId",e[e.VolumeFilled=36]="VolumeFilled",e[e.AccFilled=37]="AccFilled",e[e.AccTradedVolume=38]="AccTradedVolume",e[e.AccVolume=39]="AccVolume",e[e.OrderFailCode=40]="OrderFailCode",e[e.OrderStatusText=44]="OrderStatusText",e[e.OrderStatusNew=45]="OrderStatusNew",e[e.OrderFailDescription=41]="OrderFailDescription",e[e.DisplayPortfolio=46]="DisplayPortfolio",e[e.DefaultPortfolio=371]="DefaultPortfolio",e[e.OwnerDesk=47]="OwnerDesk",e[e.TransactionId=801]="TransactionId",e[e.Accrued=48]="Accrued",e[e.Buyer=49]="Buyer",e[e.Seller=50]="Seller",e[e.BuyOrSell=51]="BuyOrSell",e[e.Client=52]="Client",e[e.Counterpart=53]="Counterpart",e[e.ExchOrderId=54]="ExchOrderId",e[e.ExchTime=55]="ExchTime",e[e.ExchTradeId=56]="ExchTradeId",e[e.Fee=57]="Fee",e[e.FxRate=58]="FxRate",e[e.Invested=59]="Invested",e[e.SettleDate=60]="SettleDate",e[e.TradeDate=61]="TradeDate",e[e.ExchTradeId2=62]="ExchTradeId2",e[e.PositionValue=260]="PositionValue",e[e.PositionPrice=264]="PositionPrice",e[e.CustomMoneyKindId=268]="CustomMoneyKindId",e[e.CustomMoneyKindData=269]="CustomMoneyKindData",e[e.CustomMoneyKindType=270]="CustomMoneyKindType",e[e.PortfolioState=271]="PortfolioState",e[e.PortfolioStateDescription=272]="PortfolioStateDescription",e[e.StopOutState=295]="StopOutState",e[e.LoanToValueRatio=275]="LoanToValueRatio",e[e.Multiplier=306]="Multiplier",e[e.Collateral=322]="Collateral",e[e.BaseInvested=324]="BaseInvested",e[e.ProfitLoss=325]="ProfitLoss",e[e.BaseCurrency=327]="BaseCurrency",e[e.OriginalCurrency=276]="OriginalCurrency",e[e.BaseResult=328]="BaseResult",e[e.Shortable=361]="Shortable",e[e.RealizedResult=362]="RealizedResult",e[e.RiskData=385]="RiskData",e[e.DeletedTrade=65]="DeletedTrade",e[e.ParentId=66]="ParentId",e[e.TradeId=67]="TradeId",e[e.TradeTime=68]="TradeTime",e[e.TradeTimeUs=163]="TradeTimeUs",e[e.VerifiedTrade=69]="VerifiedTrade",e[e.PortfolioType=305]="PortfolioType",e[e.PortfolioDescr=258]="PortfolioDescr",e[e.PositionType=259]="PositionType",e[e.LoginId=80]="LoginId",e[e.User=83]="User",e[e.ChangeInAccrued=84]="ChangeInAccrued",e[e.ChangeInVolume=85]="ChangeInVolume",e[e.ChangeInInvested=86]="ChangeInInvested",e[e.Feed=87]="Feed",e[e.PacketType=88]="PacketType",e[e.TradingPower=89]="TradingPower",e[e.TradingPowerStatus=90]="TradingPowerStatus",e[e.MoneyKind=91]="MoneyKind",e[e.StartDate=92]="StartDate",e[e.EndDate=93]="EndDate",e[e.IsInternalUser=94]="IsInternalUser",e[e.CreateDate=95]="CreateDate",e[e.ChangeDate=96]="ChangeDate",e[e.ChangeTime=97]="ChangeTime",e[e.ChangeTimeUs=165]="ChangeTimeUs",e[e.LimitPerDay=108]="LimitPerDay",e[e.LimitPerOrder=109]="LimitPerOrder",e[e.SafetyLimitOverride=110]="SafetyLimitOverride",e[e.CustomNu=112]="CustomNu",e[e.CustomLabel=113]="CustomLabel",e[e.CustomForOrderTypes=114]="CustomForOrderTypes",e[e.CustomDisplay=115]="CustomDisplay",e[e.CustomType=116]="CustomType",e[e.CustomData=117]="CustomData",e[e.MaxValidDays=122]="MaxValidDays",e[e.MarketProperties=123]="MarketProperties",e[e.MarketProperties2=803]="MarketProperties2",e[e.BasketNameAndSerial=124]="BasketNameAndSerial",e[e.LockReport=154]="LockReport",e[e.TickFromPrice=127]="TickFromPrice",e[e.TickToPrice=128]="TickToPrice",e[e.TickSize=129]="TickSize",e[e.BloombergTicker=160]="BloombergTicker",e[e.BloombergGlobalId=161]="BloombergGlobalId",e[e.BloombergGlobalIdComposite=162]="BloombergGlobalIdComposite",e[e.PrimarySegment=376]="PrimarySegment",e[e.SecondarySegment=377]="SecondarySegment",e[e.LimitCurrency=287]="LimitCurrency",e[e.QuoteConfig=318]="QuoteConfig",e[e.DefaultOrderWarning=319]="DefaultOrderWarning",e[e.PositionNumber=372]="PositionNumber",e[e.OrderPermissionFlg=771]="OrderPermissionFlg",e[e.AlgoId=512]="AlgoId",e[e.AlgoBrokerId=513]="AlgoBrokerId",e[e.AlgoUserId=514]="AlgoUserId",e[e.AlgoLabel=515]="AlgoLabel",e[e.AlgoDescr=516]="AlgoDescr",e[e.AlgoParamId=517]="AlgoParamId",e[e.AlgoParamLabel=518]="AlgoParamLabel",e[e.AlgoParamData=519]="AlgoParamData",e[e.AlgoParamDescr=520]="AlgoParamDescr",e[e.AlgoParamMandatory=521]="AlgoParamMandatory",e[e.AlgoParamDefault=522]="AlgoParamDefault",e[e.AlgoParamType=523]="AlgoParamType",e[e.AlgoParamMaxLen=524]="AlgoParamMaxLen",e[e.AlgoParamMultiLine=525]="AlgoParamMultiLine",e[e.AlgoParamMin=526]="AlgoParamMin",e[e.AlgoParamMax=527]="AlgoParamMax",e[e.AlgoParamElement=528]="AlgoParamElement",e[e.AlgoParamFeed=534]="AlgoParamFeed",e[e.AlgoProperties=535]="AlgoProperties",e[e.AlgoParamProperty=536]="AlgoParamProperty",e[e.AlgoParamCustomNuRef=537]="AlgoParamCustomNuRef",e[e.Provider=2048]="Provider",e[e.Service=2049]="Service"}(e.TradingTag||(e.TradingTag={})),function(e){e[e.ModifyOrder=1]="ModifyOrder",e[e.MonitorOrder=2]="MonitorOrder",e[e.ActivateOrder=4]="ActivateOrder",e[e.RequestTrades=8]="RequestTrades",e[e.ModifyMonitorOrder=16]="ModifyMonitorOrder",e[e.OrderTypes=32]="OrderTypes",e[e.ModifyOrderActivate=64]="ModifyOrderActivate",e[e.ModifyOrderBuySell=128]="ModifyOrderBuySell",e[e.ModifyOrderType=256]="ModifyOrderType",e[e.CustomFields=512]="CustomFields",e[e.NoCommentField=1024]="NoCommentField",e[e.DisableActivate=2048]="DisableActivate",e[e.ModifyRemainingVolume=4096]="ModifyRemainingVolume",e[e.ModifyNotPortfolio=8192]="ModifyNotPortfolio",e[e.PerSymbolTickSize=16384]="PerSymbolTickSize",e[e.ModifyNormalToMonitor=32768]="ModifyNormalToMonitor",e[e.NoPortfolio=65536]="NoPortfolio",e[e.ZeroNegPrice=131072]="ZeroNegPrice",e[e.SliceOrders=262144]="SliceOrders",e[e.ClientAccountInfo=524288]="ClientAccountInfo",e[e.AlwaysParent=1048576]="AlwaysParent",e[e.NoTradingPower=2097152]="NoTradingPower",e[e.AlgoTrading=4194304]="AlgoTrading",e[e.OrderConfirmation=8388608]="OrderConfirmation",e[e.PositionUnblock=16777216]="PositionUnblock",e[e.DayTradeClose=33554432]="DayTradeClose",e[e.PortfolioByDate=67108864]="PortfolioByDate",e[e.OrderHistory=134217728]="OrderHistory",e[e.OrderValidTime=268435456]="OrderValidTime",e[e.ChangePassword=536870912]="ChangePassword",e[e.NoPortfolioTradesUpdate=1073741824]="NoPortfolioTradesUpdate",e[e.NoAlgoModify=2147483648]="NoAlgoModify"}(t=e.ServerProperties||(e.ServerProperties={})),e.ServerPropToStr=function(e){switch(e>>>0){case t.ModifyOrder:return"ModifyOrder";case t.MonitorOrder:return"MonitorOrder";case t.ActivateOrder:return"ActivateOrder";case t.RequestTrades:return"RequestTrades";case t.ModifyMonitorOrder:return"ModifyMonitorOrder";case t.OrderTypes:return"OrderTypes";case t.ModifyOrderActivate:return"ModifyOrderActivate";case t.ModifyOrderBuySell:return"ModifyOrderBuySell";case t.ModifyOrderType:return"ModifyOrderType";case t.CustomFields:return"CustomFields";case t.NoCommentField:return"NoCommentField";case t.DisableActivate:return"DisableActivate";case t.ModifyRemainingVolume:return"ModifyRemainingVolume";case t.ModifyNotPortfolio:return"ModifyNotPortfolio";case t.PerSymbolTickSize:return"PerSymbolTickSize";case t.ModifyNormalToMonitor:return"ModifyNormalToMonitor";case t.NoPortfolio:return"NoPortfolio";case t.ZeroNegPrice:return"ZeroNegPrice";case t.SliceOrders:return"SliceOrders";case t.ClientAccountInfo:return"ClientAccountInfo";case t.AlwaysParent:return"AlwaysParent";case t.NoTradingPower:return"NoTradingPower";case t.AlgoTrading:return"AlgoTrading";case t.OrderConfirmation:return"OrderConfirmation";case t.PositionUnblock:return"PositionUnblock";case t.DayTradeClose:return"DayTradeClose";case t.PortfolioByDate:return"PortfolioByDate";case t.OrderHistory:return"OrderHistory";case t.OrderValidTime:return"OrderValidTime";case t.ChangePassword:return"ChangePassword";case t.NoPortfolioTradesUpdate:return"NoPortfolioTradesUpdate";case t.NoAlgoModify:return"NoAlgoModify";default:return"<"+Number(e).toString(16)+">"}},function(e){e[e.SupportOrderTrigger=1]="SupportOrderTrigger",e[e.SupportTradeReports=2]="SupportTradeReports",e[e.SupportQuote=4]="SupportQuote",e[e.SupportReqForQuote=8]="SupportReqForQuote",e[e.SupportMassDelQuote=16]="SupportMassDelQuote",e[e.AllowComboLegPrice=32]="AllowComboLegPrice",e[e.SimulateSell=64]="SimulateSell",e[e.MoneyKindsHeader=128]="MoneyKindsHeader",e[e.HideRefreshPortfolio=256]="HideRefreshPortfolio",e[e.GmtTimestamps=512]="GmtTimestamps",e[e.SupportFilters=1024]="SupportFilters",e[e.AlgoModifyRemainingVolume=2048]="AlgoModifyRemainingVolume",e[e.FindExtTrade=4096]="FindExtTrade",e[e.PortfolioHierarchy=8192]="PortfolioHierarchy",e[e.ATDL=16384]="ATDL",e[e.BasketSupport=32768]="BasketSupport",e[e.DisableMultiDelete=65536]="DisableMultiDelete",e[e.SupportFxDeals=131072]="SupportFxDeals",e[e.SelectFxCurrency=262144]="SelectFxCurrency",e[e.DisableClientRef=524288]="DisableClientRef",e[e.NewsNotification=1048576]="NewsNotification",e[e.SupportQuoteConfig=2097152]="SupportQuoteConfig",e[e.StaticPortfolios=4194304]="StaticPortfolios",e[e.ModifyAlgoType=8388608]="ModifyAlgoType",e[e.ModifyReqOrder=16777216]="ModifyReqOrder",e[e.Allocations=33554432]="Allocations",e[e.NoVolumeModify=67108864]="NoVolumeModify",e[e.ShowOldOrders=134217728]="ShowOldOrders",e[e.SupportModifyTrade=268435456]="SupportModifyTrade",e[e.OrderMassCancel=536870912]="OrderMassCancel",e[e.AutomaticUserCreation=1073741824]="AutomaticUserCreation",e[e.NoValidityModify=2147483648]="NoValidityModify"}(n=e.ServerProperties2||(e.ServerProperties2={})),e.ServerProp2ToStr=function(e){switch(e>>>0){case n.SupportOrderTrigger:return"SupportOrderTrigger";case n.SupportTradeReports:return"SupportTradeReports";case n.SupportQuote:return"SupportQuote";case n.SupportReqForQuote:return"SupportReqForQuote";case n.SupportMassDelQuote:return"SupportMassDelQuote";case n.AllowComboLegPrice:return"AllowComboLegPrice";case n.SimulateSell:return"SimulateSell";case n.MoneyKindsHeader:return"MoneyKindsHeader";case n.HideRefreshPortfolio:return"HideRefreshPortfolio";case n.GmtTimestamps:return"GmtTimestamps";case n.SupportFilters:return"SupportFilters";case n.AlgoModifyRemainingVolume:return"AlgoModifyRemainingVolume";case n.FindExtTrade:return"FindExtTrade";case n.PortfolioHierarchy:return"PortfolioHierarchy";case n.ATDL:return"ATDL";case n.BasketSupport:return"BasketSupport";case n.DisableMultiDelete:return"DisableMultiDelete";case n.SupportFxDeals:return"SupportFxDeals";case n.SelectFxCurrency:return"SelectFxCurrency";case n.DisableClientRef:return"DisableClientRef";case n.NewsNotification:return"NewsNotification";case n.SupportQuoteConfig:return"SupportQuoteConfig";case n.StaticPortfolios:return"StaticPortfolios";case n.ModifyAlgoType:return"ModifyAlgoType";case n.ModifyReqOrder:return"ModifyReqOrder";case n.Allocations:return"Allocations";case n.NoVolumeModify:return"NoVolumeModify";case n.ShowOldOrders:return"ShowOldOrders";case n.SupportModifyTrade:return"SupportModifyTrade";case n.OrderMassCancel:return"OrderMassCancel";case n.AutomaticUserCreation:return"AutomaticUserCreation";case n.NoValidityModify:return"NoValidityModify";default:return"<"+Number(e).toString(16)+">"}},function(e){e[e.NoOpenVolumeModify=1]="NoOpenVolumeModify",e[e.RiskLevel=2]="RiskLevel",e[e.Unused_03=4]="Unused_03",e[e.Unused_04=8]="Unused_04",e[e.Unused_05=16]="Unused_05"}(i=e.ServerProperties3||(e.ServerProperties3={})),e.ServerProp3ToStr=function(e){switch(e){case i.NoOpenVolumeModify:return"NoOpenVolumeModify";case i.RiskLevel:return"RiskLevel";default:return"<"+Number(e).toString(16)+">"}},function(e){e[e.ActivateOnce=1]="ActivateOnce",e[e.TpNoFeed=2]="TpNoFeed"}(r=e.ServerProperties4||(e.ServerProperties4={})),e.ServerProp4ToStr=function(e){switch(e){case r.ActivateOnce:return"ActivateOnce";case r.TpNoFeed:return"TpNoFeed";default:return"<"+Number(e).toString(16)+">"}},function(e){e[e.InactiveOnly=1]="InactiveOnly",e[e.CreatePortfolio=2]="CreatePortfolio",e[e.MoveToPortfolio=4]="MoveToPortfolio",e[e.AllPortfolios=8]="AllPortfolios",e[e.MyOrders=16]="MyOrders",e[e.LockChildBroker=32]="LockChildBroker",e[e.ReadOnly=64]="ReadOnly",e[e.AcceptReject=128]="AcceptReject",e[e.StopOut=256]="StopOut",e[e.HandleParents=512]="HandleParents",e[e.FxTrader=1024]="FxTrader",e[e.KidRequiredIgnored=2048]="KidRequiredIgnored",e[e.RiskLevelChecks=4096]="RiskLevelChecks",e[e.LiquidityCheck=8192]="LiquidityCheck",e[e.Reserved_15=16384]="Reserved_15",e[e.Reserved_16=32768]="Reserved_16",e[e.Reserved_17=65536]="Reserved_17",e[e.Reserved_18=131072]="Reserved_18",e[e.Reserved_19=262144]="Reserved_19",e[e.Reserved_20=524288]="Reserved_20",e[e.Reserved_21=1048576]="Reserved_21",e[e.Reserved_22=2097152]="Reserved_22",e[e.Reserved_23=4194304]="Reserved_23",e[e.Reserved_24=8388608]="Reserved_24",e[e.Reserved_25=16777216]="Reserved_25",e[e.Reserved_26=33554432]="Reserved_26",e[e.Reserved_27=67108864]="Reserved_27",e[e.Reserved_28=134217728]="Reserved_28",e[e.Reserved_29=268435456]="Reserved_29",e[e.Reserved_30=536870912]="Reserved_30",e[e.Reserved_31=1073741824]="Reserved_31",e[e.Reserved_32=2147483648]="Reserved_32"}(a=e.UserProperties||(e.UserProperties={})),e.UserPropToStr=function(e){switch(e){case a.InactiveOnly:return"InactiveOnly";case a.CreatePortfolio:return"CreatePortfolio";case a.MoveToPortfolio:return"MoveToPortfolio";case a.AllPortfolios:return"AllPortfolios";case a.MyOrders:return"MyOrders";case a.LockChildBroker:return"LockChildBroker";case a.ReadOnly:return"ReadOnly";case a.AcceptReject:return"AcceptReject";case a.StopOut:return"StopOut";case a.HandleParents:return"HandleParents";case a.FxTrader:return"FxTrader";case a.KidRequiredIgnored:return"KidRequiredIgnored";case a.RiskLevelChecks:return"RiskLevelChecks";case a.LiquidityCheck:return"LiquidityCheck";case a.Reserved_15:return"Reserved_15";case a.Reserved_16:return"Reserved_16";case a.Reserved_17:return"Reserved_17";case a.Reserved_18:return"Reserved_18";case a.Reserved_19:return"Reserved_19";case a.Reserved_20:return"Reserved_20";case a.Reserved_21:return"Reserved_21";case a.Reserved_22:return"Reserved_22";case a.Reserved_23:return"Reserved_23";case a.Reserved_24:return"Reserved_24";case a.Reserved_25:return"Reserved_25";case a.Reserved_26:return"Reserved_26";case a.Reserved_27:return"Reserved_27";case a.Reserved_28:return"Reserved_28";case a.Reserved_29:return"Reserved_29";case a.Reserved_30:return"Reserved_30";case a.Reserved_31:return"Reserved_31";case a.Reserved_32:return"Reserved_32";default:return"<"+Number(e).toString(16)+">"}},function(e){e[e.Order=1]="Order",e[e.OrderStatus=2]="OrderStatus",e[e.Trade=3]="Trade",e[e.Portfolio=4]="Portfolio",e[e.Response=5]="Response",e[e.PortfolioNames=6]="PortfolioNames",e[e.TradingPower=7]="TradingPower",e[e.QuoteResponse=8]="QuoteResponse",e[e.TradeReport=9]="TradeReport",e[e.QuoteStatusFeed=10]="QuoteStatusFeed",e[e.RfqFeed=11]="RfqFeed",e[e.BasketList=14]="BasketList",e[e.FxDealing=16]="FxDealing",e[e.FxDealingStatus=17]="FxDealingStatus",e[e.FxAdStatus=18]="FxAdStatus",e[e.FxAdCcySetting=19]="FxAdCcySetting",e[e.FxAdCrossSetting=20]="FxAdCrossSetting",e[e.FxAdListEnd=21]="FxAdListEnd",e[e.InterfaceStatusUpdate=22]="InterfaceStatusUpdate",e[e.FxTraderMessage=23]="FxTraderMessage"}(s=e.PacketTypes||(e.PacketTypes={})),e.packetTypeToStr=function(e){switch(e){case s.Order:return"Order";case s.OrderStatus:return"OrderStatus";case s.Trade:return"Trade";case s.Portfolio:return"Portfolio";case s.Response:return"Response";case s.PortfolioNames:return"PortfolioNames";case s.TradingPower:return"TradingPower";case s.QuoteResponse:return"QuoteResponse";case s.TradeReport:return"TradeReport";case s.QuoteStatusFeed:return"QuoteStatusFeed";case s.RfqFeed:return"RfqFeed";case s.BasketList:return"BasketList";case s.FxDealing:return"FxDealing";case s.FxDealingStatus:return"FxDealingStatus";case s.FxAdStatus:return"FxAdStatus";case s.FxAdCcySetting:return"FxAdCcySetting";case s.FxAdCrossSetting:return"FxAdCrossSetting";case s.FxAdListEnd:return"FxAdListEnd";case s.InterfaceStatusUpdate:return"InterfaceStatusUpdate";case s.FxTraderMessage:return"FxTraderMessage";default:return"<"+Number(e).toString(16)+">"}},function(e){e[e.ErrorOk=0]="ErrorOk",e[e.ErrorNoSuchInstrument=1]="ErrorNoSuchInstrument",e[e.ErrorNoOrderId=2]="ErrorNoOrderId",e[e.ErrorNoCustomerId=3]="ErrorNoCustomerId",e[e.ErrorNoPortfolio=4]="ErrorNoPortfolio",e[e.ErrorUnknownSymbol=5]="ErrorUnknownSymbol",e[e.ErrorLoginDenied=6]="ErrorLoginDenied",e[e.ErrorNotLoggedIn=7]="ErrorNotLoggedIn",e[e.ErrorUnknownRequest=8]="ErrorUnknownRequest",e[e.ErrorNotUnique=9]="ErrorNotUnique",e[e.ErrorMissingKey=10]="ErrorMissingKey",e[e.ErrorIllegalValue=11]="ErrorIllegalValue",e[e.ErrorUnknownKey=12]="ErrorUnknownKey",e[e.ErrorInternalError=13]="ErrorInternalError",e[e.ErrorNoAccess=14]="ErrorNoAccess",e[e.ErrorMarketServerNoConnection=256]="ErrorMarketServerNoConnection",e[e.ErrorMarketServerLostConnection=257]="ErrorMarketServerLostConnection",e[e.ErrorMarketServerInternalError=258]="ErrorMarketServerInternalError",e[e.ErrorMarketServerSystemError=259]="ErrorMarketServerSystemError",e[e.ErrorMarketServerNoOrderActivator=260]="ErrorMarketServerNoOrderActivator",e[e.ErrorMarketServerConnectionError=261]="ErrorMarketServerConnectionError",e[e.ErrorMarketServerNoAccess=262]="ErrorMarketServerNoAccess",e[e.ErrorMarketServerNoData=263]="ErrorMarketServerNoData",e[e.ErrorMarketServerTimeout=264]="ErrorMarketServerTimeout",e[e.ErrorLoginMoreDataNeeded=265]="ErrorLoginMoreDataNeeded",e[e.ErrorCustomUnknownPortfolio=65535]="ErrorCustomUnknownPortfolio"}(o=e.FailCodes||(e.FailCodes={})),e.failCodeToStr=function(e){switch(e){case o.ErrorOk:return"Ok";case o.ErrorNoSuchInstrument:return"No such instrument";case o.ErrorNoOrderId:return"No order ID";case o.ErrorNoCustomerId:return"No customer ID";case o.ErrorNoPortfolio:return"No portfolio";case o.ErrorUnknownSymbol:return"Unknown symbol";case o.ErrorLoginDenied:return"Login denied";case o.ErrorNotLoggedIn:return"Not logged in";case o.ErrorUnknownRequest:return"Unknown request";case o.ErrorNotUnique:return"Not unique";case o.ErrorMissingKey:return"Missing key";case o.ErrorIllegalValue:return"Illegal value";case o.ErrorUnknownKey:return"Unknown key";case o.ErrorInternalError:return"Internal error";case o.ErrorNoAccess:return"No access";case o.ErrorMarketServerNoConnection:return"No connection to market server";case o.ErrorMarketServerLostConnection:return"Lost connection to market server";case o.ErrorMarketServerInternalError:return"Market server internal error";case o.ErrorMarketServerSystemError:return"Market server system error";case o.ErrorMarketServerNoOrderActivator:return"Market server no order activator";case o.ErrorMarketServerConnectionError:return"Market server connection error";case o.ErrorMarketServerNoAccess:return"No access to market server";case o.ErrorMarketServerNoData:return"Market server no data";case o.ErrorMarketServerTimeout:return"Market server timeout";case o.ErrorLoginMoreDataNeeded:return"More data needed for login";case o.ErrorCustomUnknownPortfolio:return"Unknown portfolio";default:return""}},function(e){e[e.Undefined=1]="Undefined",e[e.Equity=2]="Equity",e[e.Fx=3]="Fx",e[e.Static=4]="Static"}(e.PortfolioTypes||(e.PortfolioTypes={})),function(e){e[e.Normal=0]="Normal",e[e.FillOrKill=1]="FillOrKill",e[e.FillAndKill=2]="FillAndKill",e[e.FillOrNothing=3]="FillOrNothing",e[e.Dummy=4]="Dummy",e[e.CrossOrder=5]="CrossOrder",e[e.BestPossible=6]="BestPossible",e[e.AtMarket=7]="AtMarket",e[e.Market=8]="Market",e[e.Limit=9]="Limit",e[e.MarketToLimit=10]="MarketToLimit",e[e.AtMarketAndKill=11]="AtMarketAndKill",e[e.QuoteRequest=12]="QuoteRequest",e[e.LimitOrMarketOnTheClose=13]="LimitOrMarketOnTheClose",e[e.StopLimit=14]="StopLimit",e[e.StopLoss=15]="StopLoss",e[e.Contingent=16]="Contingent",e[e.Flex=17]="Flex",e[e.Interest=18]="Interest",e[e.Accept=19]="Accept",e[e.Parent=29]="Parent",e[e.Strategy=30]="Strategy",e[e.Fix=31]="Fix",e[e.LimitToMarket=32]="LimitToMarket",e[e.BestToLimit=33]="BestToLimit",e[e.MultiLeg=34]="MultiLeg",e[e.MarketFillOrKill=35]="MarketFillOrKill",e[e.MarketFillAndKill=36]="MarketFillAndKill",e[e.Pegged=37]="Pegged",e[e.AtOpen=38]="AtOpen",e[e.AtClose=39]="AtClose",e[e.Oco=40]="Oco",e[e.Iceberg=41]="Iceberg"}(e.OrderTypes||(e.OrderTypes={})),function(e){e[e.Inactive=0]="Inactive",e[e.Request=1]="Request",e[e.Exchange=2]="Exchange",e[e.Active=2]="Active",e[e.Internal=3]="Internal",e[e.Delete=4]="Delete",e[e.Offline=5]="Offline",e[e.Deleted=6]="Deleted",e[e.Monitor=7]="Monitor",e[e.Working=8]="Working",e[e.ModifiedNew=9]="ModifiedNew",e[e.ErrorSystem=10]="ErrorSystem",e[e.ErrorTradingPower=11]="ErrorTradingPower",e[e.ErrorLimit=12]="ErrorLimit",e[e.ErrorCommunication=13]="ErrorCommunication",e[e.Expired=14]="Expired",e[e.Executed=15]="Executed",e[e.Rejected=16]="Rejected",e[e.PendingInsert=17]="PendingInsert",e[e.PendingModify=18]="PendingModify",e[e.PendingDelete=19]="PendingDelete",e[e.Simulate=20]="Simulate",e[e.CareRequest=21]="CareRequest",e[e.DoneForDay=22]="DoneForDay",e[e.Pending=4096]="Pending",e[e.DeletedExecuted=4097]="DeletedExecuted",e[e.DeletedRefused=4098]="DeletedRefused",e[e.Parent=4099]="Parent",e[e.DeletedModify=4100]="DeletedModify",e[e.Abandoned=4101]="Abandoned"}(l=e.OrderStatus||(e.OrderStatus={})),e.orderStatusToStr=function(e){switch(e){case l.Inactive:return"Inactive";case l.Request:return"Request";case l.Exchange:return"Exchange";case l.Internal:return"Internal";case l.Delete:return"Delete";case l.Offline:return"Offline";case l.Deleted:return"Deleted";case l.Monitor:return"Monitor";case l.Working:return"Working";case l.ModifiedNew:return"ModifiedNew";case l.ErrorSystem:return"ErrorSystem";case l.ErrorTradingPower:return"ErrorTradingPower";case l.ErrorLimit:return"ErrorLimit";case l.ErrorCommunication:return"ErrorCommunication";case l.Expired:return"Expired";case l.Executed:return"Executed";case l.Rejected:return"Rejected";case l.PendingInsert:return"PendingInsert";case l.PendingModify:return"PendingModify";case l.PendingDelete:return"PendingDelete";case l.Simulate:return"Simulate";case l.CareRequest:return"CareRequest";case l.DoneForDay:return"DoneForDay";case l.Pending:return"Pending";case l.DeletedExecuted:return"DeletedExecuted";case l.DeletedRefused:return"DeletedRefused";case l.Parent:return"Parent";case l.DeletedModify:return"DeletedModify";case l.Abandoned:return"Abandoned";default:return"<"+Number(e).toString(16)+">"}},function(e){e[e.Parent=-1]="Parent",e[e.SingleChoiceListEntry=0]="SingleChoiceListEntry",e[e.SingleChoiceListDefault=1]="SingleChoiceListDefault",e[e.FreeText=2]="FreeText",e[e.Double=4]="Double",e[e.StopPrice=8]="StopPrice",e[e.ValidSession=16]="ValidSession",e[e.InitCode=32]="InitCode",e[e.DoneCode=64]="DoneCode",e[e.Time=3]="Time",e[e.Date=5]="Date",e[e.Datetime=6]="Datetime",e[e.Dropdown=7]="Dropdown",e[e.Bool=9]="Bool",e[e.Int=10]="Int",e[e.Instrument=11]="Instrument",e[e.Price=12]="Price",e[e.VolumeLots=13]="VolumeLots",e[e.DropdownFreeText=14]="DropdownFreeText",e[e.DropdownFreeTextDefault=15]="DropdownFreeTextDefault",e[e.DropdownFreeTextNoSave=16]="DropdownFreeTextNoSave",e[e.MultiLine=1066]="MultiLine"}(e.ParamType||(e.ParamType={})),function(e){e[e.SmartOrder=1]="SmartOrder",e[e.Default=2]="Default",e[e.DarkOrder=4]="DarkOrder",e[e.PairsOrder=8]="PairsOrder",e[e.PairsRatio=16]="PairsRatio",e[e.SuitableOnMobile=32]="SuitableOnMobile",e[e.ShowExecuteNotBs=64]="ShowExecuteNotBs",e[e.DisableStdVolume=128]="DisableStdVolume",e[e.DisableCtdComment=256]="DisableCtdComment",e[e.PairsDifferentSymbols=512]="PairsDifferentSymbols"}(c=e.AlgoProperties||(e.AlgoProperties={})),e.algoPropertiesToStr=function(e){switch(e){case c.SmartOrder:return"SmartOrder";case c.Default:return"Default";case c.DarkOrder:return"DarkOrder";case c.PairsOrder:return"PairsOrder";case c.PairsRatio:return"PairsRatio";case c.SuitableOnMobile:return"SuitableOnMobile";case c.ShowExecuteNotBs:return"ShowExecuteNotBs";case c.DisableStdVolume:return"DisableStdVolume";case c.DisableCtdComment:return"DisableCtdComment";case c.PairsDifferentSymbols:return"PairsDifferentSymbols";default:return"unknown"}},function(e){e[e.common=1]="common",e[e.SpreadLimit=2]="SpreadLimit",e[e.SpreadUnit=4]="SpreadUnit",e[e.PairsId=8]="PairsId",e[e.SpreadSide=16]="SpreadSide",e[e.NoModify=32]="NoModify",e[e.Deprecated=64]="Deprecated",e[e.OnlyForTrades=128]="OnlyForTrades",e[e.TradeModifiable=256]="TradeModifiable",e[e.NewUiSection=512]="NewUiSection",e[e.Hidden=1024]="Hidden",e[e.Numeric=2048]="Numeric",e[e.ReadOnly=4096]="ReadOnly",e[e.RiskResendOnChange=8192]="RiskResendOnChange",e[e.DoNotSendForOrders=16384]="DoNotSendForOrders",e[e.CustomWidth=32768]="CustomWidth",e[e.RiskLevel=65536]="RiskLevel",e[e.CopyToAlgos=131072]="CopyToAlgos"}(d=e.ParamProperties||(e.ParamProperties={})),e.paramPropertiesToStr=function(e){switch(e){case d.common:return"common";case d.SpreadLimit:return"SpreadLimit";case d.SpreadUnit:return"SpreadUnit";case d.PairsId:return"PairsId";case d.SpreadSide:return"SpreadSide";case d.NoModify:return"NoModify";case d.Deprecated:return"Deprecated";case d.OnlyForTrades:return"OnlyForTrades";case d.TradeModifiable:return"TradeModifiable";case d.NewUiSection:return"NewUiSection";case d.Hidden:return"Hidden";case d.Numeric:return"Numeric";case d.ReadOnly:return"ReadOnly";case d.RiskResendOnChange:return"RiskResendOnChange";case d.DoNotSendForOrders:return"DoNotSendForOrders";case d.CustomWidth:return"CustomWidth";case d.RiskLevel:return"RiskLevel";case d.CopyToAlgos:return"CopyToAlgos";default:return"unknown"}},function(e){e[e.Undefined=0]="Undefined",e[e.Balance=1]="Balance",e[e.Carry=2]="Carry",e[e.Cash=3]="Cash",e[e.Correction=4]="Correction",e[e.Coupon=5]="Coupon",e[e.CreditLimit=6]="CreditLimit",e[e.Fee=7]="Fee",e[e.Financing=8]="Financing",e[e.FuturesLimit=9]="FuturesLimit",e[e.Lending=10]="Lending",e[e.Margins=11]="Margins",e[e.ShortSpotLimit=12]="ShortSpotLimit",e[e.ShortOptionsLimit=13]="ShortOptionsLimit",e[e.SumCash=14]="SumCash",e[e.AvailableCredit=15]="AvailableCredit",e[e.TotalLoan=16]="TotalLoan",e[e.Custom=17]="Custom",e[e.PortfolioState=18]="PortfolioState",e[e.StopoutState=19]="StopoutState",e[e.Collateral=20]="Collateral"}(u=e.MoneyKind||(e.MoneyKind={})),function(e){e[e.Value=0]="Value",e[e.String=1]="String",e[e.Url=2]="Url",e[e.Percent=3]="Percent"}(h=e.CustomMoneyKindType||(e.CustomMoneyKindType={})),e.CustomMoneyKindTypeToStr=function(e){switch(e){case h.Value:return"NUMBER";case h.String:return"STRING";case h.Url:return"URL";case h.Percent:return"PERCENT";default:return"unknown"}},e.moneyKindToStr=function(e){switch(e){case u.Undefined:return"Undefined";case u.Balance:return"Balance";case u.Carry:return"Carry";case u.Cash:return"Cash";case u.Correction:return"Correction";case u.Coupon:return"Coupon";case u.CreditLimit:return"Credit limit";case u.Fee:return"Fee";case u.Financing:return"Financing";case u.FuturesLimit:return"Futures limit";case u.Lending:return"Lending";case u.Margins:return"Margins";case u.ShortSpotLimit:return"Short spot limit";case u.ShortOptionsLimit:return"Short options limit";case u.SumCash:return"SumCash";case u.AvailableCredit:return"Available credit";case u.TotalLoan:return"Total loan";case u.Custom:return"Custom";case u.PortfolioState:return"Portfolio state";case u.StopoutState:return"Stop out state";case u.Collateral:return"Collateral";default:return""}}}(IDS||(IDS={})),function(e){var t;!function(e){e[e.GetSnapshot=105]="GetSnapshot"}(e.WireRequest||(e.WireRequest={})),function(e){e[e.Separator=0]="Separator",e[e.BeginSection=1]="BeginSection",e[e.EndSection=2]="EndSection",e[e.Feed=17]="Feed",e[e.NewsCategory=18]="NewsCategory",e[e.CalendarDescription=19]="CalendarDescription",e[e.CalendarSubject=20]="CalendarSubject",e[e.CalendarType=21]="CalendarType",e[e.CalendarFlag=22]="CalendarFlag",e[e.CalendarSource=23]="CalendarSource",e[e.Date=24]="Date",e[e.Time=25]="Time",e[e.Headline=26]="Headline",e[e.NewsId=27]="NewsId",e[e.NewsFlag=28]="NewsFlag",e[e.NewsContentType=29]="NewsContentType",e[e.Symbol=30]="Symbol",e[e.Language=31]="Language",e[e.MotionDetectionType=32]="MotionDetectionType",e[e.MotionDetectionSubType=33]="MotionDetectionSubType",e[e.MotionDetectionValue=34]="MotionDetectionValue",e[e.CalendarExternalID=35]="CalendarExternalID",e[e.CalendarExpected=36]="CalendarExpected",e[e.CalendarPrevious=37]="CalendarPrevious",e[e.CalendarActual=38]="CalendarActual",e[e.CalendarNumberUnit=39]="CalendarNumberUnit",e[e.MotionDetectionSubValue=40]="MotionDetectionSubValue",e[e.MultiPacket=8496]="MultiPacket",e[e.NewsSourceId=9071]="NewsSourceId",e[e.NewsStoryId=9072]="NewsStoryId",e[e.NewsArticleId=9073]="NewsArticleId",e[e.PriorityValue=9074]="PriorityValue",e[e.EventId=9075]="EventId",e[e.EventScore=9076]="EventScore",e[e.EventType=9077]="EventType",e[e.EventSubType=9078]="EventSubType",e[e.MotionDetectionScore=9079]="MotionDetectionScore",e[e.NewsSigScore=9080]="NewsSigScore",e[e.EventAmount=9081]="EventAmount",e[e.Caption=9082]="Caption",e[e.EventArticleCount=9083]="EventArticleCount",e[e.BlockSeparator=9084]="BlockSeparator",e[e.SymbolScore=9085]="SymbolScore",e[e.SubscriptionId=9086]="SubscriptionId",e[e.FlashCount=9087]="FlashCount",e[e.Status=65534]="Status",e[e.StatusDescription=65535]="StatusDescription"}(e.WireTag||(e.WireTag={})),function(e){e[e.Middle=0]="Middle",e[e.Begin=1]="Begin",e[e.End=2]="End",e[e.BeginAndEnd=3]="BeginAndEnd"}(e.WireMultiPacket||(e.WireMultiPacket={})),function(e){e[e.Generic=0]="Generic",e[e.Event=1]="Event",e[e.Instruments=2]="Instruments",e[e.NewsCaption=3]="NewsCaption",e[e.FlashElements=4]="FlashElements",e[e.MotionPacket=5]="MotionPacket",e[e.CalendarItem=6]="CalendarItem",e[e.Feeds=7]="Feeds",e[e.Header=8]="Header"}(t=e.WireBlockType||(e.WireBlockType={})),function(e){e[e.OpenChange=1]="OpenChange",e[e.HighLow=2]="HighLow",e[e.UnusualVolume=3]="UnusualVolume",e[e.EMA10VsLast=4]="EMA10VsLast",e[e.ChangeVsIndex=5]="ChangeVsIndex",e[e.MaCross=6]="MaCross",e[e.RecentNews=7]="RecentNews",e[e.FiveMinChange=8]="FiveMinChange",e[e.RegressionLine=9]="RegressionLine",e[e.LargeTrade=10]="LargeTrade",e[e.LargeTradeDeferred=11]="LargeTradeDeferred"}(e.MotionDetectionType||(e.MotionDetectionType={})),e.WireBlockTypeToStr=function(e){switch(e){case t.Generic:return"Generic";case t.Event:return"Event";case t.Instruments:return"Instruments";case t.NewsCaption:return"NewsCaption";case t.FlashElements:return"FlashElements";case t.MotionPacket:return"MotionPacket";case t.CalendarItem:return"CalendarItem";case t.Feeds:return"Feeds";case t.Header:return"Header"}}}(IDS||(IDS={})),function(e){var t=function(){};e.BaseServer=t;var n=function(t){function n(n,i,r){var a=t.call(this)||this;return a.serverPool=n,a.ps=i,a.serverType=r,a.loginServer=n.login,a.tagSet=i.isLoginServer()?e.TagSet.Login:a.serverPool.login.getTagSet(a.ps),e.DEBUG_SERVER_OBJECTS&&e.log("New server class",e.serverTypeToStr(r),"PidSid:",i.toStr(),"Tagset:",e.tagsetToStr(a.tagSet)),a}return __extends(n,t),n.prototype.outstandingRequests=function(){return this.conn?this.conn.OutstandingRequests():0},n.prototype.clearOutstandingRequests=function(){this.conn&&this.conn.ClearOutstandingRequests()},n.prototype.publishEvent=function(t){e.DEBUG_SERVER_EVENTS&&e.log(this.ps.toStr(),"ServerEvent",t),Infront.EventCallbackMap.eventMap.publish(t)},n.prototype.lowLevelConnect=function(e,t){this.publishEvent(new Infront.LowLevelConnectEvent(e,this.serverType))},n.prototype.lowLevelDisconnect=function(e,t,n){t>0&&this.publishEvent(new Infront.LowLevelDisconnectEvent(e,this.serverType))},n.prototype.destroyBase=function(){this.conn&&(this.conn.Destroy(),this.conn=void 0)},n}(t);e.BaseIDSServer=n}(IDS||(IDS={})),function(e){var t=Infront.PidSid,n=Infront.FeedMetaData,i=Infront.FeedType,r=Infront.FeedProperty,a=Infront.FeedtypeSymbols,s=Infront.Feed,o=Infront.SymbolType,l=Infront.SymbolSearchTypes;e.loginServers=["login.infrontservices.com","login1.infrontservices.com","login2.infrontservices.com","login3.infrontservices.com"],e.GlobalChainsFeed=990,e.SymbolMappingServerFeed=832,e.InfinancialsFullContentFeed=902,e.InfinancialsFeed=903,e.WireFeed=823;var c=function(){};e.FeedColumn=c;var d=function(){this.feedColumns=[]};e.FeedColumnsResponse=d;var u=function(){};e.EndLogin=u;var h=function(){};e.LoginInfo=h;var p=function(){};e.HostInfo=p;var m=function(){function n(){this.hosts={},this.feeds={}}return n.prototype.isJsCertified=function(t){void 0===t&&(t=!1);var n=0!=(this.info2&e.Info2.OeIdsJsCertified);return e.DEBUG_LOGIN_DETAIL&&!n&&t&&e.log("Server '"+this.getFullName()+"'","not js certified. To enable set info2 =",(this.info2|e.Info2.OeIdsJsCertified).toString(16)),n},n.prototype.getFullName=function(){return(this.providerName?this.providerName:this.parent?this.parent.name:"")+" "+this.name},n.prototype.getPsStr=function(){return this.parent?new t(this.parent.PID,this.SID).toStr():""},n.prototype.logServerName=function(){e.log("%c"+this.getPsStr()+" "+this.getFullName()+" TagSet: "+e.tagsetToStr(this.tagSet)+" ServiceType: "+e.serviceTypeToStr(this.serviceType),"color: #fc0;")},n.prototype.logInfo=function(t){void 0===t&&(t=!1),e.logSeparator(),this.logServerName(),e.log("info1",InfrontUtil.padHex(this.info1)+":",InfrontUtil.getEnumStr(this.info1,e.info1ToStr)),e.log("info2",InfrontUtil.padHex(this.info2)+":",InfrontUtil.getEnumStr(this.info2,e.info2ToStr)),e.log("info3",InfrontUtil.padHex(this.info3)+":",InfrontUtil.getEnumStr(this.info3,e.info3ToStr)),e.log("info4",InfrontUtil.padHex(this.info4)+":",InfrontUtil.getEnumStr(this.info4,e.info4ToStr)),e.logSeparator()},n}();e.ServiceInfo=m;var g=function(){this.services={}};e.ProviderInfo=g;var f=function(){};e.WrapFeedInfo=f;var v=function(){function e(){this.country=0,this.gmtFeedOffset=0,this.gmtFeedOffsetMins=0,this.gmtLocalOffset=0,this.wrapFeeds={}}return e.prototype.hasSymbolType=function(e){return(this.content&e)===e},e.prototype.isFeatureFeed=function(){return 0!=(this.content&i.WebFeature)},e.prototype.isSymbolFeed=function(){return 0!=(this.content&a)},e.prototype.hasOnly=function(e){return this.content===e},e.prototype.getDefaultSymbolType=function(){return this.hasOnly(i.Indices)?o.Index:o.Stock},e.prototype.feedDataTypes=function(){return InfrontUtil.getEnumStrings(this.content,s.FeedTypeToStr,24)},e}();e.FeedInfo=v;var y=function(){function n(){}return n.prototype.pidSid=function(){return new t(this.PID,this.SID)},n.prototype.psStr=function(){return this.PID+":"+this.SID},n.prototype.getDecimalEnum=function(){return e.PriceDisplay.Display_0decimals+this.defaultDecimals},n.prototype.propertyStrings=function(){return InfrontUtil.getEnumStr(this.properties,s.FeedPropertyToStr,24)},n.prototype.propertyStringList=function(){return InfrontUtil.getEnumStrings(this.properties,s.FeedPropertyToStr,24)},n.prototype.getServiceType=function(){var e;return this.service&&(e=this.service.serviceType),e},n.prototype.hasBrokerOrders=function(){return this.service.serviceType==e.ServiceType.OwnOrders},n.prototype.hasOrderBook=function(){return 0!=(this.properties&r.Mbo)||0!=(this.properties&r.Orderbook)},n.prototype.orderbookIsMBO=function(){return 0!=(this.properties&r.SeparateBboMbo)},n.prototype.separateBBOandLevel1=function(){return 0!=(this.properties&r.Mbo)},n.prototype.getWrappedToFeed=function(){return this.feedInfo.wrapToFeed},n.prototype.isWrappedToFeed=function(){return!!this.feedInfo.wrapToFeed},n.prototype.isWrappedMBLOrderbook=function(){return this.isWrappedToFeed()&&this.hasOrderBook()&&!(this.separateBBOandLevel1()||this.orderbookIsMBO())},n.prototype.isWrappedMBOOrderbook=function(){return this.isWrappedToFeed()&&this.hasOrderBook()&&!this.hasBrokerOrders()},n.prototype.hasFreeTextSearch=function(){return this.service.serviceType==e.ServiceType.FreeTextSearch},n.prototype.providedBy=function(e){return e&&this.PID==e.pid&&this.SID==e.sid},Object.defineProperty(n.prototype,"feedInfo",{get:function(){return this._feedInfo||(this._feedInfo=this.service.feeds[this.feedNu]),this._feedInfo},enumerable:!0,configurable:!0}),n}();e.ProviderService=y;var b=function(e){this.service={},this.feedNu=e};e.FeedServiceInfo=b;var T=function(){this.providerService={}};e.LoginGetFeeds=T;var S=function(i){function a(n,r,a,s,o,l){void 0===s&&(s=null),void 0===o&&(o=null),void 0===l&&(l=null);var c=i.call(this,l,new t(0,0),e.ServerType.Login)||this;return c.callbacks=[],c.providers={},c.services={},c.wrapFeeds={},c.feedService={},c.counter=0,c.requests={},c.loginTimeoutCounter=0,c.feeds={},c.loginInfo=new h,c.tickSizes={},o||(o=e.loginServers),c.login=n,c.password=r,c.ssoToken=s,c.conn=new e.ServerConnection(new t(0,0),a,c,[],o,e.TagSet.Login,l,c.serverType,!0),c}return __extends(a,i),a.prototype.destroyBase=function(){this.conn&&(this.conn.Destroy(),this.conn=void 0)},a.prototype.register=function(t){-1==this.callbacks.indexOf(t)&&this.callbacks.push(t),e.DEBUG_CALLBACKS&&e.log("0:0 LoginServer: register callback. Total:",this.callbacks.length)},a.prototype.unregister=function(t){this.callbacks.splice(this.callbacks.indexOf(t),1),e.DEBUG_CALLBACKS&&e.log("0:0 LoginServer: Unregister callback. Total:",this.callbacks.length)},a.prototype.getWrappedFeed=function(e){return this.wrapFeeds[e]||e},a.prototype.getWrappedFeeds=function(e){var t=[],n=this.feeds[e];if(!n)return t;if(n.wrapFeeds)for(var i in n.wrapFeeds)t.push(n.wrapFeeds[i].feednu);return t},a.prototype.GetOrderbookFeed=function(e,t){var n={feed:t,isMbo:!1},i=this.serverPool.login.getProviderServiceForPidSid(t,e,!0);if(i)if(i.feedInfo.wrapFeeds)for(var a in i.feedInfo.wrapFeeds){var s=i.feedInfo.wrapFeeds[a],o=this.getFeedProperties(s.feednu,e,!0);if(o&r.Mbo){n.feed=s.feednu,n.isMbo=!0;break}o&r.Orderbook&&(n.feed=s.feednu,n.isMbo=!1)}else i.hasOrderBook()&&(n.isMbo=i.orderbookIsMBO());return n},a.prototype.getFeed=function(e,t){var n=this.feedService[t];return n?n.service[e.Index()]:null},a.prototype.getServiceInfo=function(e){if(this.loginOk("getServiceInfo"))return this.services[e.Index()]},a.prototype.getServiceName=function(e){var t=this.getServiceInfo(e);return t?t.getFullName():""},a.prototype.getWireFeeds=function(e,t){void 0===t&&(t=null);var n=[];for(var i in this.feedService){var r=this.feeds[i];if(r){var a=this.feedService[i];if(!(r.wrapToFeed&&r.wrapToFeed>0)){var s=!1;for(var o in a.service){var l=a.service[o];t&&0==(l.properties&t)||e&&l.service&&-1===e.indexOf(l.service.serviceType)||(s=!0)}s&&n.push(Number(i))}}}return n},a.prototype.getFeeds=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1);var i={};for(var r in this.feedService){var a=this.feeds[r];if(a){var s=this.feedService[r];if(!(a.wrapToFeed&&a.wrapToFeed>0)||n)for(var o in s.service){var l=s.service[o];if(!(t&&(l.properties&t)!=t||e&&l.service&&l.service.serviceType!=e)){var c=i[r];c||((c=i[r]=new T).feedInfo=a),c.providerService[o]=l}}}}var d=[];for(var u in i){var h=i[u];d.push(h)}return d},a.prototype.getFeedsForMarket=function(t){var n=[];for(var i in this.feedService)if(this.feeds[i]){var r=this.feedService[i];for(var a in r.service){var s=r.service[a];s.tradingMarketplace===t&&s.service&&s.service.serviceType===e.ServiceType.OrderEntry&&n.push(Number(i))}}return n},a.prototype.getAccessFeeds=function(e,t){void 0===t&&(t=null);var n=[],i=this.services[e.Index()];if(i)for(var r in i.feeds)t&&0==(i.feeds[r].content&t)||n.push(Number(r));return n},a.prototype.getHosts=function(e){var t=[],n=this.services[e.Index()];if(n)for(var i in n.hosts){var r=n.hosts[i],a=r.host;80!=r.port&&443!=r.port&&(a+=":"+r.port.toString()),-1==t.indexOf(a)&&t.push(a)}return t},a.prototype.getNewsFeeds=function(e){var t=[],n=this.services[e.Index()];if(n)for(var i in n.feeds){var r=n.feeds[i];r.content&o.News&&t.push(r.feedNu)}return t},a.prototype.getPidSidFeeds=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i=this.services[e.Index()];if(!i)return null;var a=[];if(t&&a.push(t),!n)return a;var s=i.feeds[t];if(!s)return a;var o=[];for(var l in s.wrapFeeds)o.push(l);if(!n)return o;for(var c=0,d=o;c<d.length;c++){var u=d[c],h=this.feedService[Number(u)];if(h){var p=h.service[e.Index()];p&&0!=(n&p.properties)&&(n&r.Orderbook&&0==(n&r.Mbo)&&p.properties&r.Mbo||a.push(u))}}return a},a.prototype.getPidSidServiceType=function(e){var t=this.services[e.Index()];return t?t.serviceType:0},a.prototype.getPidSids=function(e){var n=[];for(var i in this.services){var r=this.services[i];null!=r.parent&&r.serviceType==e&&n.push(new t(r.parent.PID,r.SID))}return n},a.prototype.getFirstPidSidForServiceType=function(e){for(var n in this.services){var i=this.services[n];if(null!=i.parent&&i.serviceType==e)return new t(i.parent.PID,i.SID)}return null},a.prototype.getPidSid=function(e,n,i){if(void 0===i&&(i=0),!e)return this.getFirstPidSidForServiceType(n);var r=this.feedService[e];if(r)for(var a in r.service){var s=r.service[Number(a)];if(s&&s.getServiceType()==n&&(s.properties&i)==i)return s.service.parent?new t(s.service.parent.PID,s.SID):null}return null},a.prototype.getProviderServiceForPidSid=function(t,n,i){void 0===i&&(i=!1);var r=this.feedService[t];if(r){var a=r.service[n.Index()];if(a)return a;if(i&&r.service){var s=void 0,o=void 0;for(var l in r.service){var c=r.service[l];if(c.service&&c.service.serviceType==e.ServiceType.Consolidated)return c;!s&&c.service&&c.service.serviceType==e.ServiceType.Realtime&&(s=c),!o&&c.service&&c.service.serviceType==e.ServiceType.Delayed&&(o=c)}return s||o}}return null},a.prototype.getFeedProperties=function(e,t,n){void 0===n&&(n=!1);var i=this.getProviderServiceForPidSid(e,t,n);return i?i.properties:0},a.prototype.findOrderEntryPidSid=function(n){for(var i in this.services){var r=this.services[i];if(r.serviceType==e.ServiceType.OrderEntry&&r.parent&&r.feeds.hasOwnProperty(n.toString()))return new t(r.parent.PID,r.SID)}return null},a.prototype.feedCanTradeOnPidSid=function(t,n){var i=this.services[n.Index()];return!(i.serviceType!=e.ServiceType.OrderEntry||!i.parent||!i.feeds.hasOwnProperty(t.toString()))},a.prototype.feedHasRealtime=function(t){return null!=this.getPidSid(t,e.ServiceType.Realtime)},a.prototype.feedHasDelayed=function(t){return null!=this.getPidSid(t,e.ServiceType.Delayed)},a.prototype.feedIsMajorMarket=function(e){var t=this.feeds[e];if(t&&t.additionalInfo)for(var n=0,i=t.additionalInfo.match(/[^\r\n]+/g);n<i.length;n++){var r=i[n].split("=");if(2===r.length&&"ISMAJORMARKET"===r[0].toUpperCase()&&"TRUE"==r[1].toUpperCase())return!0}return!1},a.prototype.feedIsOTC=function(e){var t=this.feeds[e];if(t&&t.additionalInfo)for(var n=0,i=t.additionalInfo.match(/[^\r\n]+/g);n<i.length;n++){var r=i[n].split("=");if(2===r.length&&"ISOTCFEED"===r[0].toUpperCase()&&"TRUE"==r[1].toUpperCase())return!0}return!1},a.prototype.logPidSidsForFeed=function(t){var n={},i=this.feedService[t];if(!i)return null;for(var r in i.service){var a=i.service[r];n[a.pidSid().toStr()]=a.propertyStrings()}e.log("PidSids for feed "+t.toString()+":",n)},a.prototype.getPidSidForFeedAndProperty=function(e,t){var n=this.feedService[e];if(!n)return null;for(var i in n.service){var r=n.service[i];if((r.properties&t)==t)return r.pidSid()}return null},a.prototype.getTagSet=function(t){var n,i=this.services[t.Index()];return i&&(n=i.tagSet),n||e.log("Could not determine tagset for PidSid",t.toStr(),"service:",i),n},a.prototype.feedOffsetUtc=function(e,t){if(void 0===t&&(t=null),t){var n=t.feeds[e];if(n)return 24e4==n.gmtFeedOffset?0:n.gmtFeedOffsetMins/60>>0}var i=this.feeds[e];return i?24e4==i.gmtFeedOffset?0:i.gmtFeedOffsetMins/60>>0:0},a.prototype.toUtc=function(e,t,n){if(void 0===n&&(n=null),n){var i=n.feeds[e];if(i)return t-(24e4==i.gmtFeedOffset?0:i.gmtFeedOffset)}var r=this.feeds[e];return r?(24e4!=r.gmtFeedOffset&&(t-=r.gmtFeedOffset),t):t},a.prototype.toFeedTime=function(e,t,n){var i,r;return void 0===n&&(n=null),n&&(i=n.feeds[e])||(i=this.feeds[e])?((r=new Date).setMinutes(t.getMinutes()-(24e4==i.gmtFeedOffsetMins?0:i.gmtFeedOffsetMins)),r):t},a.prototype.loginOk=function(t){return void 0===t&&(t=""),e.loginOk||e.log("%cLogin server method '"+t+"' called before login complete.","color: #f60;"),e.loginOk},a.prototype.getTradingRouteName=function(e){var t="",n=this.services[e.Index()];return n&&n.parent&&(t=n.getFullName()),t},a.prototype.getTradingRoutes=function(t){void 0===t&&(t=!1);var n=[];if(!this.loginOk("getTradingRoutes"))return n;for(var i in this.services){var r=this.services[i];if(r.serviceType==e.ServiceType.OrderEntry&&r.parent&&r.isJsCertified(t)){var a=new e.MWSTradingRoutes(r.info2);for(var s in a.provider=r.parent.PID,a.service=r.SID,a.name=r.getFullName(),r.feeds)a.tradable_feeds.push(Number(s));n.push(a)}}return n},a.prototype.getTradableFeeds=function(){var t=[];if(!this.loginOk("getTradableFeeds"))return t;var n={};for(var i in this.services){var r=this.services[i];if(r.serviceType==e.ServiceType.OrderEntry&&r.parent)for(var a in r.feeds){var s=Number(a);n[s]||(n[s]=!0)}}for(var a in n)t.push(Number(a));return t},a.prototype.getNewsSources=function(){var t=new e.MWSNewsSources;if(!this.loginOk("getNewsSources"))return t;var n={};for(var i in this.feeds){var r=this.feeds[i];if(r.hasSymbolType(o.News)){if(!this.getPidSid(r.feedNu,e.ServiceType.News))continue;var a=new e.MWSNewsSource;if(a.feed=r.feedNu,a.name=r.descr,a.region=r.country,a.short_name=r.exchCode,t.sources.push(a),!n[r.country]){n[r.country]=!0;var s=new e.MWSNewsRegion;s.code=r.country,s.description=e.CountryIdToString(r.country),t.regions.push(s)}}}return t},a.prototype.getSymbolSearchFeeds=function(){var t=[];if(!this.loginOk("getSymbolSearchFeeds"))return t;var n=[];for(var i in this.feeds)if(0!=(this.feeds[i].content&l)){var r=this.feedService[i];if(r)for(var a in r.service){var s=r.service[a];s.service&&s.service.serviceType==e.ServiceType.Symbols&&(n[(o=s.pidSid()).toStr("-")]=o)}}for(var o in n)t.push(n[o]);return e.DEBUG_SYMBOL_SEARCH&&e.log("getSymbolSearchFeeds:",t),t},a.prototype.getFeatureFeeds=function(){var t=[];if(!this.loginOk("getFeatureFeeds"))return t;for(var n in this.feedService){var i=this.feeds[n];if(i&&!(i.wrapToFeed&&i.wrapToFeed>0)){var r=this.feedService[n];if(r){var a=void 0,s=void 0;for(var o in r.service){var l=r.service[o];if(l.service&&(l.service.serviceType==e.ServiceType.OrderEntry&&(s=!0),i.isFeatureFeed())){a=l;break}}if(i&&a){var c=new e.MwsMarketInfo;c.country=i.country,c.countryCode=e.CountryIdToCode(i.country),c.countryName=e.CountryIdToString(i.country),c.feed=i.feedNu,c.service=i.descr,c.additional_info=i.additionalInfo,c.provider=a.service.name,c.max_delay_secs=a.maxDelaySeconds?a.maxDelaySeconds:0,c.min_delay_secs=a.minDelaySeconds?a.minDelaySeconds:0,c.data_types=i.feedDataTypes(),c.trading=s,c.setAccessStr(),t.push(c)}}}}return e.DEBUG_LOGIN_MWS_FEATURE_FEEDS&&e.log("getFeatureFeeds",t),t},a.prototype.getFeatureStrings=function(){var t={};if(!this.loginOk("getFeatureFeeds"))return t;for(var n=0,i=this.getFeatureFeeds();n<i.length;n++){var r=i[n];if(r.additional_info)for(var a=0,s=r.additional_info.match(/[^\r\n]+/g);a<s.length;a++){var o=s[a].split("=");if(o.length>=2){t[o[0]]=o[1];for(var l=2;l<o.length;l++)t[o[0]]+=o[l]}}}var c=this.getTradingRoutes().length>0,d=null!=this.getPidSid(null,e.ServiceType.Calendar);return t.HasTrading=void 0!==t.HasTrading?t.HasTrading&&c:c,t.HasCalendar=void 0!==t.HasCalendar?t.HasCalendar&&d:d,t.EnableDesktopBuilder=void 0===t.EnableDesktopBuilder||t.EnableDesktopBuilder,t.DefaultCurrency=void 0!==t.DefaultCurrency?t.DefaultCurrency:"SEK",t.DefaultLanguage=void 0!==t.DefaultLanguage?t.DefaultLanguage:"se",t.HasInfinancials=null!=this.getPidSid(e.InfinancialsFeed,0)||null!=this.getPidSid(e.InfinancialsFullContentFeed,0),t.HasInfinancialsFull=null!=this.getPidSid(e.InfinancialsFullContentFeed,0),e.DEBUG_LOGIN_DETAIL&&e.log("FeatureStrings",t),t},a.prototype.getMarkets=function(){var t=[];if(!this.loginOk("getMarkets"))return t;for(var n in this.feedService){var i=this.feeds[n];if(i&&!(i.wrapToFeed&&i.wrapToFeed>0)){var a=this.feedService[n];if(a){var s=void 0,o=void 0;for(var l in a.service){var c=a.service[l];c.service&&(c.service.serviceType===e.ServiceType.OrderEntry&&(o=!0),i.isFeatureFeed()||c.service.serviceType!=e.ServiceType.Realtime&&c.service.serviceType!=e.ServiceType.Delayed||(c.properties&r.SubscribeSymbols||i.isSymbolFeed())&&(s&&c.service.serviceType!==e.ServiceType.Realtime||(s=c)))}if(i&&s){var d=new e.MwsMarketInfo;d.country=i.country,d.countryCode=e.CountryIdToCode(i.country),d.countryName=e.CountryIdToString(i.country),d.feed=i.feedNu,d.service=i.descr+" ["+i.exchCode+"]",d.additional_info=i.additionalInfo,d.provider=s.service.name,d.max_delay_secs=s.maxDelaySeconds?s.maxDelaySeconds:0,d.min_delay_secs=s.minDelaySeconds?s.minDelaySeconds:0,d.data_types=i.feedDataTypes(),d.trading=o,d.setAccessStr(),t.push(d)}}else e.log("No feedService for feed:",n,i)}}return e.DEBUG_LOGIN_MWS_MARKETS&&e.log("getMarkets",t),t},a.prototype.getAdditionalInfoFromFeedInfo=function(e){for(var t={},n=e?e.split("\n"):[],i=0;i<n.length;i++){var r=n[i].split("=");if(2==r.length){var a=r[0],s=r[1];t[a]=s}}return t},a.prototype.getFeedExchangeCode=function(e){var t=this.feeds[e];return t?t.exchCode:e.toString()},a.prototype.getFeedMetadata=function(t){var i;if(!this.loginOk("getFeedMetadata"))return null;var a=this.feeds[t];if(a){(i=new n).feed=t,i.country=a.country,i.feed_code=a.exchCode,i.mic=a.marketCodeMic,i.description=a.descr,i.all_day=a.startTime==a.endTime;var s=new Date(0);InfrontUtil.TimeNuToDate(a.startTime,s,this.feedOffsetUtc(t)),i.start_time=InfrontUtil.ToCommonframeworkTime(s),InfrontUtil.TimeNuToDate(a.endTime,s,this.feedOffsetUtc(t)),i.end_time=InfrontUtil.ToCommonframeworkTime(s),i.local_time_offset=InfrontUtil.ToCommonframeworkTimeOffset(a.gmtLocalOffset),i.main_index=a.mainIndex,i.main_index_feed=a.mainIndexFeed,i.data_types=a.feedDataTypes(),i.additional_info=this.getAdditionalInfoFromFeedInfo(a.additionalInfo);var o=[];for(var l in this.feedService[t].service)this.feedService[t].service[l].propertyStringList().forEach(function(e){-1==o.indexOf(e)&&o.push(e.trim())});i.feed_properties=o;var c=this.getPidSid(t,e.ServiceType.Realtime);if(c||(c=this.getPidSid(t,e.ServiceType.Delayed)),c){var d=this.feedService[t];if(d){var u=d.service[c.Index()];if(u)for(var h in i.buyer_seller=0!=(u.properties&r.TradeBrokers),i.decimals=u.defaultDecimals?u.defaultDecimals:2,i.min_delay_secs=u.minDelaySeconds||0,i.max_delay_secs=u.maxDelaySeconds||0,u.gmtLocalOffset&&(i.local_time_offset=InfrontUtil.ToCommonframeworkTimeOffset(u.gmtLocalOffset)),i.full_feed=0==(u.properties&r.SubscribeSymbols),i.trades=0!=(u.properties&r.Trades),a.wrapFeeds)0!=(a.wrapFeeds[h].content&r.Trades)&&(i.trades=!0)}}}return e.DEBUG_LOGIN_MWS_METADATA&&e.log("Feed metadata for feed",t,i),i},a.prototype.getFeedColumns=function(t,n){var i=this.getPidSid(t,e.ServiceType.Realtime);if(i||(i=this.getPidSid(t,e.ServiceType.Delayed)),i){var r=e.LoginRequests.Columns,a=this.conn.GetRequest(r,0),s=new e.Request;this.requests[a.uniqueId]=s,s.commonFramework=n,s.type=e.LoginRequests.Columns,a.AddInt(e.LoginTags.PID,i.pid),a.AddInt(e.LoginTags.SID,i.sid),a.AddInt(e.LoginTags.Feed,t),this.conn.Send(a,!0)}},a.prototype.getTickSizes=function(e,t){var n=this.getTickSizeKey(e,t);return this.tickSizes[n]},a.prototype.authentication=function(n){for(var i=0,r=n;i<r.length;i++)for(var a=r[i],s=new e.TemplateStorage,o=new e.Tag,l=-1,c=-1,d=new e.Parser(0,a.length,e.ParserFlags.RealtimeTagSet+e.ParserFlags.WithoutHeader,s),u=0,h=null,p=new t;d.Next(a,o,e.TagSet.Login);)switch(o.tag){case e.LoginTags.PID:l=o.Int(),p.pid=l;break;case e.LoginTags.SID:c=o.Int(),p.sid=c,h=this.services[Infront.MakePidSidIndex(l,c)];break;case e.LoginTags.Separator:u=0,c=-1,h=null;break;case e.LoginTags.AccessFeed:u+=o.Int(),h&&(h.feeds||(h.feeds=[]),h.feeds[u]||(h.feeds[u]=this.feeds[u]));var m=this.feedService[u];m||(m=this.feedService[u]=new b(u));var g=m.service[p.Index()];g||((g=m.service[p.Index()]=new y).PID=l,g.SID=c,g.service=h,g.feedNu=u)}},a.prototype.responseLogin=function(t,n,i){for(var r=new e.Tag;i.Next(n,r,e.TagSet.Login);)switch(e.DEBUG_LOGIN_CS_LOGIN_INFO_TAGS&&e.logToConsole(e.TagSet.Login,r,n),r.tag){case e.LoginTags.LoginId:this.loginInfo.loginId=r.Int(n),this.serverPool.loginId=r.Int();break;case e.LoginTags.CustomerId:this.loginInfo.customerId=r.Int(n);break;case e.LoginTags.CustomerId2:this.loginInfo.customerId2=r.Int(n);break;case e.LoginTags.OwnerProviderId:this.loginInfo.ownerProviderId=r.Int(n);break;case e.LoginTags.SupportEmail:this.loginInfo.supportEmail=r.String(n);break;case e.LoginTags.LoginServers:this.loginInfo.loginServers=r.String(n);break;case e.LoginTags.PrivateNetworkId:this.loginInfo.privateNetworkId=r.Int(n);break;case e.LoginTags.ExpireDate:this.loginInfo.expireDate=r.Int(n);break;case e.LoginTags.HelpUrl:this.loginInfo.helpUrl=r.String(n);break;case e.LoginTags.PublicKey:this.loginInfo.publicKey=r.String(n);break;case e.LoginTags.UserType:this.loginInfo.userType=r.Int(n);break;case e.LoginTags.BrokerCode:this.loginInfo.brokerCode=r.String(n);break;case e.LoginTags.BrokerCountry:this.loginInfo.brokerCountry=r.Int(n);break;case e.LoginTags.CustomCode:this.loginInfo.customCode=r.String(n);break;case e.LoginTags.AuthVersion:this.loginInfo.authVersion=r.Int(n);break;case e.LoginTags.Signature:this.loginInfo.signature=r.String(n);break;case e.LoginTags.Thumbprint:this.loginInfo.thumbPrint=r.String(n);break;case e.LoginTags.Uuid:this.loginInfo.uuid=r.String(n);break;default:e.DEBUG_LOGIN_CS_LOGIN_INFO_TAGS&&e.log("Unhandled:",e.tagToStr(e.TagSet.Login,r.tag),r.String(n))}e.DEBUG_LOGIN_CS_LOGIN_INFO&&e.log("Login info",this.loginInfo)},a.prototype.responseProviders=function(t,n,i){for(var r,a,s,o=new e.Tag;i.Next(n,o,e.TagSet.Login);)switch(e.DEBUG_LOGIN_CS_TAGS_PROVIDERS&&e.logToConsole(e.TagSet.Login,o,n),o.tag){case e.LoginTags.PID:(r=this.providers[o.Int(n)])||(r=new g,this.providers[o.Int(n)]=r),r.PID=o.Int(n);break;case e.LoginTags.SID:if(!r)break;(a=r.services[o.Int(n)])||(r.services[o.Int(n)]=a=new m,a.SID=o.Int(n),a.parent=r),this.services[Infront.MakePidSidIndex(r.PID,a.SID)]=a;break;case e.LoginTags.Host:if(!a)break;(s=a.hosts[o.String(n)])||(a.hosts[o.String(n)]=s=new p,s.host=o.String(n),s.parent=a);break;case e.LoginTags.Port:s&&(s.port=o.Int(n));break;case e.LoginTags.PrivateNetworkId:s&&(s.privateNetwork=o.Int(n));break;case e.LoginTags.Info1:a&&(a.info1=o.Int(n));break;case e.LoginTags.Info2:a&&(a.info2=o.Int(n));break;case e.LoginTags.Info3:a&&(a.info3=o.Int(n));break;case e.LoginTags.Info4:a&&(a.info4=o.Int(n));break;case e.LoginTags.Info5:a&&(a.info5=o.Int(n));break;case e.LoginTags.Url2:break;case e.LoginTags.TagSet:a&&(a.tagSet=o.Int(n));break;case e.LoginTags.ServiceType:a&&(a.serviceType=o.Int(n));break;case e.LoginTags.Encrypt:a&&(a.encrypt=o.Int(n));break;case e.LoginTags.FreeService:a&&(a.freeService=1==o.Int(n));break;case e.LoginTags.ServiceName:a&&(a.name=o.String(n));break;case e.LoginTags.ProviderName:r&&(r.name=o.String(n));break;case e.LoginTags.SupportEmail:r&&(r.supportEmail=o.String(n));break;case e.LoginTags.Phone:r&&(r.phone=o.String(n));break;case e.LoginTags.LoginServers:r&&(r.loginServers=o.String(n));break;case e.LoginTags.ConnectionType:case e.LoginTags.LimitApp:case e.LoginTags.Separator:break;default:e.DEBUG_LOGIN_CS_PROVIDERS&&e.log("Unhandled responseProviders:",e.tagToStr(e.TagSet.Login,o.tag),o.String(n))}e.DEBUG_LOGIN_CS_PROVIDERS&&e.log("Providers",this.providers)},a.prototype.responseFeeds=function(t,n,i){for(var r,a=new e.Tag;i.Next(n,a,e.TagSet.Login);)switch(e.DEBUG_LOGIN_CS_TAGS_FEEDS&&e.logToConsole(e.TagSet.Login,a,n),a.tag){case e.LoginTags.Feed:(r=this.feeds[a.Int(n)])||(r=this.feeds[a.Int(n)]=new v),r.feedNu=a.Int(n);break;case e.LoginTags.ExchCode:r&&(r.exchCode=a.String(n,!1));break;case e.LoginTags.FeedContent:r&&(r.content=a.Int(n));break;case e.LoginTags.FeedDescription:r&&(r.descr=a.String(n,!1));break;case e.LoginTags.MainIndex:r&&(r.mainIndex=a.String(n,!1));break;case e.LoginTags.MainIndexFeed:r&&(r.mainIndexFeed=a.Int(n));break;case e.LoginTags.VolIndex:r&&(r.volumeIndex=a.String(n,!1));break;case e.LoginTags.VolIndexFeed:r&&(r.volumeIndexFeed=a.Int(n));break;case e.LoginTags.StartTime:r&&(r.startTime=a.Int(n));break;case e.LoginTags.EndTime:r&&(r.endTime=a.Int(n));break;case e.LoginTags.GmtFeedOffset:if(r){var s=a.SignedInt(n);r.gmtFeedOffset=s,r.gmtFeedOffsetMins=s/1e4>>0+(s/100>>0)%100+s%100}break;case e.LoginTags.GmtLocalOffset:r&&(r.gmtLocalOffset=a.Int(n));break;case e.LoginTags.GetFromFeed:r&&(r.getFromFeed=a.Int(n));break;case e.LoginTags.UnderlyingFeed:r&&(r.underFeed=a.Int(n));break;case e.LoginTags.ParentFeed:r&&(r.parentFeed=a.Int(n));break;case e.LoginTags.OptionsFeed:r&&(r.optionsFeed=a.Int(n));break;case e.LoginTags.MarketCodeMic:r&&(r.marketCodeMic=a.String(n,!1));break;case e.LoginTags.MarketCodeReuters:r&&(r.marketCodeReuters=a.String(n));break;case e.LoginTags.WrapToFeed:r&&(r.wrapToFeed=a.Int(n)),this.wrapFeeds[r.feedNu]=r.wrapToFeed;break;case e.LoginTags.Country:r&&(r.country=a.Int(n));break;case e.LoginTags.AdditionalInfo:r&&(r.additionalInfo=a.String(n));break;case e.LoginTags.Language:case e.LoginTags.LogoNumber:case e.LoginTags.AppName:break;case e.LoginTags.Separator:if(r&&r.wrapToFeed){var o=this.feeds[r.wrapToFeed];o||((o=this.feeds[r.wrapToFeed]=new v).feedNu=r.wrapToFeed);var l=o.wrapFeeds[r.feedNu];l||((l=o.wrapFeeds[r.feedNu]=new f).feednu=r.feedNu),l.content=r.content,r=null}break;default:e.DEBUG_LOGIN_CS_TAGS_FEEDS&&e.log("Unhandled responseFeeds:",e.tagToStr(e.TagSet.Login,a.tag),a.String(n))}e.DEBUG_LOGIN_CS_FEEDS&&e.log("Feeds",this.feeds)},a.prototype.responsePSFeeds=function(t,n,i){var r,a,s,o,l=new e.Tag,c=e.DEBUG_LOGIN_CS_PROV_FEEDS&&t.request===e.LoginRequests.ProvFeeds||e.DEBUG_LOGIN_CS_MARKETPLACES&&t.request===e.LoginRequests.Marketplaces;for(c&&e.log("%c"+e.requestToStr(e.TagSet.Login,t.request),"color: #3cf;");i.Next(n,l,e.TagSet.Login);)switch(e.DEBUG_LOGIN_CS_PROV_FEEDS_TAGS&&e.logToConsole(e.TagSet.Login,l,n),l.tag){case e.LoginTags.PID:r=this.providers[l.Int(n)];break;case e.LoginTags.SID:r&&(a=r.services[l.Int(n)]);break;case e.LoginTags.Feed:if(!r||!a)break;var d=l.Int(n);s=this.feedService[d],a.feeds[d]=this.feeds[d],s||(s=this.feedService[d]=new b(d));var u=Infront.MakePidSidIndex(r.PID,a.SID);(o=s.service[u])||(o=s.service[u]=new y),o.PID=r.PID,o.SID=a.SID,o.feedNu=d,o.service=a;break;case e.LoginTags.FeedProperties:o&&(o.properties=l.Int(n));break;case e.LoginTags.DefaultDecimals:o&&(o.defaultDecimals=l.Int(n));break;case e.LoginTags.DefaultContractSize:o&&(o.defaultContractSize=l.Int(n));break;case e.LoginTags.MinDelaySeconds:o&&(o.minDelaySeconds=l.Int(n));break;case e.LoginTags.MaxDelaySeconds:o&&(o.maxDelaySeconds=l.Int(n));break;case e.LoginTags.MaxMblLevels:o&&(o.mblLevels=l.Int(n));break;case e.LoginTags.FeedDescrUrl:o&&(o.feedDescrUrl=l.String(n));break;case e.LoginTags.Marketplace:o&&(o.tradingMarketplace=l.String(n));break;case e.LoginTags.GmtFeedOffset:if(o&&(!a||0==(a.serviceType&e.ServiceType.News))){var h=l.SignedInt(n);o.gmtFeedOffset=h,o.gmtFeedOffsetMins=h/1e4>>0+(h/100>>0)%100+h%100}break;case e.LoginTags.GmtLocalOffset:o&&(a&&0!=(a.serviceType&e.ServiceType.News)||(o.gmtLocalOffset=l.Int(n)));break;case e.LoginTags.Separator:c&&e.log(o.psStr(),o.feedNu,o.tradingMarketplace,o,o.propertyStrings()),r=void 0,a=void 0,o=void 0;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled responsePSFeeds:",e.tagToStr(e.TagSet.Login,l.tag),l.String(n))}},a.prototype.responseProviderAccess=function(t,n,i){for(var r=new e.Tag;i.Next(n,r,e.TagSet.Login);)r.tag},a.prototype.responseExternalLinks=function(t,n,i){for(var r=new e.Tag;i.Next(n,r,e.TagSet.Login);)r.tag},a.prototype.getTickSizeKey=function(e,t){return e+"_"+t},a.prototype.responseTickSize=function(t,n,i){for(var r,a,s,o,l,c=new e.Tag,d=new e.Realtime.TickSize;i.Next(n,c,e.TagSet.Login);)switch(e.DEBUG_TICK_SIZE_CS_TAGS&&e.logToConsole(e.TagSet.Login,c,n),c.tag){case e.LoginTags.Feed:r=c.Int(n);break;case e.LoginTags.TickSizeId:a=c.Int(n);break;case e.LoginTags.TickFromPrice:s=c.Decimal(n);break;case e.LoginTags.TickToPrice:o=c.Decimal(n);break;case e.LoginTags.TickSize:l=InfrontUtil.roundToPrecision(c.Decimal(n),10);break;case e.LoginTags.RtType:case e.LoginTags.RtSubType:break;case e.LoginTags.Separator:d.feed==r&&d.id==a||((d=new e.Realtime.TickSize).feed=r,d.id=a,this.tickSizes[this.getTickSizeKey(r,a)]=d),d.items.push(new e.TickItem(a,s,o,l));break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(e.TagSet.Login,c.tag),c.String(n))}e.DEBUG_TICK_SIZE_CS&&e.log("IAS TickSizes",this.tickSizes)},a.prototype.responseVideoLink=function(t,n,i){var r=new e.Tag;for(e.log("%c"+e.requestToStr(e.TagSet.Login,t.request),"color: #3cf;");i.Next(n,r,e.TagSet.Login);)r.tag,e.log("Unhandled:",e.tagToStr(e.TagSet.Login,r.tag),r.String(n))},a.prototype.responseFeedColumns=function(t,n,i){var r=new e.Tag,a=this.requests[t.uniqueId],s=new c,o=new d;if(a){for(;i.Next(n,r,e.TagSet.Login);)switch(r.tag){case e.LoginTags.PID:s.pid=r.Int(n);break;case e.LoginTags.SID:s.sid=r.Int(n);break;case e.LoginTags.Feed:s.feed=r.Int(n);break;case e.LoginTags.Tag:s.tag=r.Int(n);break;case e.LoginTags.ColNu:s.colNu=r.Int(n);break;case e.LoginTags.Length:s.length=r.Int(n);break;case e.LoginTags.DefaultDecimals:s.defaultDecimals=r.Int(n);break;case e.LoginTags.Attributes:s.attributes=r.Int(n);break;case e.LoginTags.Separator:o.feedColumns.push(s),s=new c;break;default:e.log("Unhandled:",e.tagToStr(e.TagSet.Login,r.tag),r.String(n))}a.commonFramework&&a.commonFramework.Reply(new e.ResponseHeader,o),delete this.requests[t.uniqueId]}},a.prototype.lowLevelData=function(t,n,i){if(0==t.pid&&0==t.sid)switch(this.counter++,this.loginTimeoutCounter=0,t.request){case e.LoginRequests.Login:this.responseLogin(t,n,i);break;case e.LoginRequests.Providers:this.responseProviders(t,n,i);break;case e.LoginRequests.ProviderAccess:this.responseProviderAccess(t,n,i);break;case e.LoginRequests.Exchanges:this.responseFeeds(t,n,i);break;case e.LoginRequests.ProvFeeds:case e.LoginRequests.Marketplaces:this.responsePSFeeds(t,n,i);break;case e.LoginRequests.ExternalLinks:this.responseExternalLinks(t,n,i);break;case e.LoginRequests.TickSize:this.responseTickSize(t,n,i);break;case e.LoginRequests.VideoLink:this.responseVideoLink(t,n,i);break;case e.LoginRequests.Columns:this.responseFeedColumns(t,n,i);break;case e.LoginRequests.Authentication:this.serverPool.ResponseAuthentication(t,n,i),t.segment==e.SegmentInfo.Last&&this.authentication(this.serverPool.GetAuthRaw());break;case e.LoginRequests.IASLoginDone:if(t.segment==e.SegmentInfo.Last){var r=0;this.callbacks.forEach(function(t){r++,t.EndLogin(!0,e.HeaderResponses.Ok)}),e.DEBUG_LOGIN_DETAIL&&e.log("EndLogin, callbacks: ",r.toString()),clearInterval(this.loginTimeoutHandler),this.loginTimeoutHandler=0}break;default:e.DEBUG_LOGIN_DETAIL&&e.log("Unhandled login request:",e.requestToStr(e.TagSet.Login,t.request))}},a.prototype.lowLevelError=function(t,n,i){var r=0;this.loginTimeoutHandler&&clearInterval(this.loginTimeoutHandler),this.loginTimeoutHandler=0,this.callbacks.forEach(function(e){r++,e.EndLogin(!1,n,i)}),e.log("%cLogin failed: "+i,"color: #f60; font-size: 14px;"),e.DEBUG_LOGIN_DETAIL&&e.log("Callback count:",r)},a.prototype.lowLevelReRequestAll=function(e){},a.prototype.lowLevelConnect=function(t,n){var i=this;if(t.isLoginServer()){var r=this.conn.GetRequest(e.LoginRequests.Login,1);r.Add(e.LoginTags.Login,this.login),r.Add(e.LoginTags.Password,this.password),r.Add(e.LoginTags.SsoToken,this.ssoToken),r.Add(e.LoginTags.AppNu,7),r.Add(e.LoginTags.AuthVersion,2),this.conn.Send(r,!1),this.loginTimeoutHandler&&clearInterval(this.loginTimeoutHandler),this.loginTimeoutCounter=0,this.loginTimeoutHandler=setInterval(function(){i.loginTimeoutCounter++,e.DEBUG_LOGIN_DETAIL&&e.log("Login timeout: ",i.loginTimeoutCounter.toString()),i.loginTimeoutCounter>5&&(i.conn.LoginKillConnection(),clearInterval(i.loginTimeoutHandler))},1e3)}},a.prototype.lowLevelDisconnect=function(e,t,n){i.prototype.lowLevelDisconnect.call(this,e,t,n)},a}(e.BaseIDSServer);e.LoginServer=S}(IDS||(IDS={})),function(e){var t=Infront.Instrument;!function(e){e[e.All=0]="All",e[e.Feed=1]="Feed",e[e.Index=2]="Index",e[e.Global=3]="Global"}(e.ChainType||(e.ChainType={}));var n=function(){function e(){}return e.prototype.ToMws=function(){this.description||(this.description=this.name)},e}();e.ChainResponseItem=n;var i=function(){function e(){}return e.prototype.ToMws=function(){this.instrument=new t(this.feed,this.symbol)},e}();e.ChainContentResponseItem=i;var r=function(){function e(){this.items=[]}return e.prototype.ToMws=function(){for(var e=0,t=this.items;e<t.length;e++)t[e].ToMws()},e}();e.ChainResponse=r;var a=function(){function e(){this.items=[]}return e.prototype.ToMws=function(){for(var e=0,t=this.items;e<t.length;e++)t[e].ToMws()},e}();e.ChainContentResponse=a;var s=function(t){function s(n,i){var r=t.call(this,i,n,e.ServerType.Chain)||this;return r.requests={},r.conn=new e.ServerConnection(n,i.secure,r,i.login.getAccessFeeds(n),i.login.getHosts(n),r.tagSet,i,r.serverType),r}return __extends(s,t),s.prototype.RequestChains=function(t,n,i){void 0===i&&(i=null);var r=this.conn.GetRequest(e.RealtimeRequests.ChainList,0),a=this.requests[r.uniqueId]=new e.Request;a.callback=n,a.type=e.RealtimeRequests.ChainList,r.Add(e.RealtimeTags.Feed,t),r.Add(e.RealtimeTags.ChainHierarchy,1),this.conn.Send(r,!0)},s.prototype.RequestChainContent=function(t,n,i,r,a){void 0===a&&(a=null);var s=this.conn.GetRequest(e.RealtimeRequests.ChainContent,0),o=this.requests[s.uniqueId]=new e.Request;o.callback=r,o.commonFramework=a,o.type=e.RealtimeRequests.ChainContent,s.Add(e.RealtimeTags.Feed,t),s.Add(e.RealtimeTags.ChainName,n),i&&s.Add(e.RealtimeTags.ProviderId,i),this.conn.Send(s,!0)},s.prototype.ResponseChains=function(t){for(var i=new r,a=0,s=t.data;a<s.length;a++){var o=s[a].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c=new e.Tag,d=new n;l.Next(o,c,this.tagSet);)switch(e.DEBUG_CHAINS_CS_TAGS&&e.logToConsole(this.tagSet,c,o),c.tag){case e.RealtimeTags.Feed:d.feed=c.Int(o);break;case e.RealtimeTags.ChainFeed:d.chainFeed=c.Int(o);break;case e.RealtimeTags.ChainName:d.name=c.String(o);break;case e.RealtimeTags.ChainDescr:d.description=c.String(o);break;case e.RealtimeTags.ChainType:d.type=c.Int(o);break;case e.RealtimeTags.ProviderId:d.providerId=c.Int(o);break;case e.RealtimeTags.Separator:i.items.push(d),d=new n}}i.ToMws(),e.DEBUG_CHAINS_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,t.type),i),t.callback&&t.callback.ResponseChainList&&t.callback.ResponseChainList(new e.ResponseHeader,i),t.commonFramework&&t.commonFramework.Reply(new e.ResponseHeader,i)},s.prototype.ResponseChainContent=function(t){for(var n=new a,r=0,s=t.data;r<s.length;r++){var o=s[r].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c=new e.Tag,d=new i;l.Next(o,c,this.tagSet);)switch(e.DEBUG_CHAINS_CS_TAGS&&e.logToConsole(this.tagSet,c,o),c.tag){case e.RealtimeTags.Feed:d.feed=c.Int(o);break;case e.RealtimeTags.Symbol:d.symbol=c.String(o);break;case e.RealtimeTags.ChainName:n.name=c.String(o);break;case e.RealtimeTags.ProviderId:n.providerId=c.Int(o);break;case e.RealtimeTags.ChainType:n.type=c.Int(o);break;case e.RealtimeTags.ChainDescr:n.descr=c.String(o);break;case e.RealtimeTags.SymbolType:d.symbolType=c.Int(o);break;case e.RealtimeTags.SymbolSubType:d.symbolSubType=c.Int(o);break;case e.RealtimeTags.ISIN:d.isin=c.String(o);break;case e.RealtimeTags.Currency:d.currency=c.String(o);break;case e.RealtimeTags.FullName:d.fullname=c.String(o);break;case e.RealtimeTags.ExchangeSymbol:d.exchangeSymbol=c.String(o);break;case e.RealtimeTags.Separator:n.items.push(d),d=new i;break;default:e.log(c.tag+": "+c.String(o))}}e.DEBUG_CHAINS_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,t.type),n),t.callback&&t.callback.ResponseChainContent&&t.callback.ResponseChainContent(new e.ResponseHeader,this),t.commonFramework&&(n.ToMws(),t.commonFramework.Reply(new e.ResponseHeader,n))},s.prototype.lowLevelData=function(t,n,i){var r=this.requests[t.uniqueId];if(r&&(r.data.push(new e.ResponseItem(i.DuplicateData(n))),t.segment==e.SegmentInfo.Last)){switch(r.type){case e.RealtimeRequests.ChainList:this.ResponseChains(r);break;case e.RealtimeRequests.ChainContent:this.ResponseChainContent(r)}delete this.requests[t.uniqueId]}},s.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId]),e.log("Chain error: "+i)},s.prototype.lowLevelReRequestAll=function(e){},s.prototype.lowLevelConnect=function(e,n){t.prototype.lowLevelConnect.call(this,e,n)},s.prototype.lowLevelDisconnect=function(e,n,i){t.prototype.lowLevelDisconnect.call(this,e,n,i)},s}(e.BaseIDSServer);e.ChainsServer=s}(IDS||(IDS={})),function(e){var t=Infront.Instrument,n=function(){function e(){}return e.IsAll="IsAll",e}();e.HistoryConstants=n;var i=function(e){void 0===e&&(e=null),this.date=new Date(0),e&&InfrontUtil.DateNuToDate(e,this.date)};e.TimeSeriesItem=i;var r=function(){};e.Adjustment=r;var a=function(){};e.Dividend=a;var s,o=function(){this.items=[],this.adjustments=[],this.dividends=[]};e.TimeSeriesResponse=o,function(e){e[e._1D=0]="_1D",e[e._1W=1]="_1W",e[e._1M=2]="_1M",e[e._3M=3]="_3M",e[e._6M=4]="_6M",e[e._1Y=5]="_1Y",e[e._2Y=6]="_2Y",e[e._3Y=7]="_3Y",e[e._5Y=8]="_5Y",e[e._10Y=9]="_10Y",e[e.SOW=10]="SOW",e[e.SOM=11]="SOM",e[e.SOY=12]="SOY"}(s||(s={}));var l=12,c=function(){this.high=new Array(l),this.low=new Array(l),this.last=new Array(l),this.vol=new Array(l),this.perf=new Array(l),this.perf_sek=new Array(l),this.lastTradeDate=new Date(0)};e.PerformanceItem=c;var d=function(){function e(){this.tags={},this.dayCount=new Array(11),this.value=new c,this.div=new c}return e.prototype.ToMws=function(){},e}();e.PerformanceResponseItem=d;var u=function(){function e(){this.items=[]}return e.prototype.ToMws=function(){for(var e=0,t=this.items;e<t.length;e++)t[e].ToMws()},e}();e.PerformanceResponse=u;var h=function(){function t(){this.items=[]}return t.prototype.ToMws=function(){for(var t=0,n=this.items;t<n.length;t++){var i=n[t];switch(i.calculatedHistoryType){case e.RealtimeCalculatedHistoryTags.AvgTrueRange:i.atr30_historical=i.avgTrueRange;break;case e.RealtimeCalculatedHistoryTags.AverageDailyVolume:i.adv=i.averageDailyVolume}}},t}();e.CalculatedHistoryResponse=h;var p=function(){this.tags={}};e.CalclulatedHistoryResponseItem=p;var m=function(){this.feeds=[],this.symbols=[]};e.HeadlineRequest=m;var g=function(){function e(){this.filteredItems={},this.items=[]}return e.prototype.addItem=function(e){var t=this.filteredItems[e.dateTime.valueOf()];t?t.merge(e)||(this.filteredItems[e.dateTime.valueOf()+e.news_id]=e):this.filteredItems[e.dateTime.valueOf()]=e},e.prototype.applyFilteredResult=function(){for(var e in this.items=[],this.filteredItems)this.items.push(this.filteredItems[e]);delete this.filteredItems,this.items.sort(function(e,t){return e.dateTime<t.dateTime?1:e.dateTime>t.dateTime?-1:0})},e.prototype.ToMws=function(){for(var e=[],t=0,n=this.items;t<n.length;t++){var i=n[t];e.push(i.ToMws())}return e},e.prototype.debug=function(){for(var e=[],t=0,n=this.items;t<n.length;t++){var i=n[t];e.push(i.debug())}return e},e}();e.HeadlineResponse=g;var f=function(){function e(){this.text=[]}return e.prototype.makeLinks=function(e){return e.replace(/\b(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)[-A-Z0-9+&@#\/%=~_|$?!:,.]*[A-Z0-9+&@#\/%=~_|$]/gi,function(e){return"<a href='"+(e.match(/^[a-zA-Z]+:\/\//)?e:"http://"+e)+"'>"+e+"</a>"})},e.prototype.hasMarkupText=function(e){return/<[a-z][\s\S]*>/i.test(e)},e.prototype.ToMws=function(){var e="",t="",n=[40,48,56,64,72,80,88,96],i=!1;if(this.text.length>0){for(var r=!this.hasMarkupText(this.text.join("")),a=0,s=this.text;a<s.length;a++){var o=s[a];r?""!==o?((i||o.indexOf("\t")>-1||o.indexOf("   ")>-1||o.indexOf("...")>-1||o.indexOf("___")>-1||o.indexOf("---")>-1)&&(i=!0,o=o.replace(/\t/g,function(e,t){for(var i=0,r=0;r<n.length;r++)if(t<n[r]){i=n[r]+1;break}return Array(i>0?i-t:0).join(" ")})),t+=this.makeLinks(o)+"<br>"):""!==t&&(e+=i?"<pre>"+t+"</pre>":"<p>"+t+"</p>",t="",i=!1):e+=o+" "}""!==t&&(e+=i?"<pre>"+t+"</pre>":"<p>"+t+"</p>")}return e},e}();e.NewsStoryResponse=f;var v=function(){};e.CompanyOfficer=v;var y=function(){this.isEstimate=!1};e.FundamentalInfo=y;var b=function(){this.urls=[],this.officers=[],this.fundamentals={}};e.CompanyInfo=b;var T=function(){this.peers=[],this.primary=new b};e.CompanyDataResponse=T;var S=function(){this.accumulate=!0};e.BrokerStatRequest=S;var C,I=function(){function e(){}return e.prototype.ToMws=function(){var e=0,t=0;if(this.brokers=[],this.b)for(var n in this.b)for(var i=0,r=this.b[n];i<r.length;i++){var a=r[i];a.toMws(),e+=a.total_value,t+=a.trades,this.brokers.push(a)}if(this.s)for(var s in this.s)for(var o=0,l=this.s[s];o<l.length;o++){var c=l[o];c.toMws(),e+=c.total_value,t+=c.trades,this.brokers.push(c)}for(var d=0,u=this.brokers;d<u.length;d++){var h=u[d];e>0&&(h.total_value_pct=h.total_value/e*100),t>0&&(h.trades_pct=h.trades/t*100)}},e}();e.BrokerStatResponse=I,function(e){e[e.TimeSeries=0]="TimeSeries",e[e.Performance=1]="Performance",e[e.Headlines=2]="Headlines",e[e.NewsStory=3]="NewsStory",e[e.CompanyData=4]="CompanyData",e[e.CompanySymbols=5]="CompanySymbols",e[e.BrokerStat=6]="BrokerStat",e[e.BrokerSymbolStat=7]="BrokerSymbolStat",e[e.SymbolBrokerStat=8]="SymbolBrokerStat",e[e.CalculatedHistory=9]="CalculatedHistory"}(C||(C={}));var _=function(){function e(){}return e.prototype.range=function(){return InfrontUtil.DateNuToStr(this.firstDate)+" - "+InfrontUtil.DateNuToStr(this.lastDate)},e}();e.TimeSeriesCache=_;var M=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.includeAdjustments=!0,this.startDate=e,this.endDate=t};e.TimeSeriesRequest=M;var E=function(l){function c(t,n){var i=l.call(this,n,t,e.ServerType.History)||this;return i.requests={},i.useTimeSeriesCache=!0,i.conn=new e.ServerConnection(t,n.secure,i,n.login.getAccessFeeds(t),n.login.getHosts(t),i.tagSet,n,i.serverType),i}return __extends(c,l),c.prototype.GetTimeSeries=function(i,r,a,s,o){var l=this;void 0===o&&(o=null);var c,d=this.conn.GetRequest(e.RealtimeRequests.History,0),u=a.startDate?a.startDate:-1,h=a.endDate?a.endDate:-1,p=this.requests[d.uniqueId]=new e.Request;p.callback=s,p.commonFramework=o,p.request=new M(u,h),p.type=C.TimeSeries,p[n.IsAll]=-1===u,function(n){n&&u-n.firstDate<-2&&(n=null),n&&(p.request.cache=n,c=n.serial,u=n.lastDate,e.DEBUG_TRADES_CACHE&&e.log(l.ps.toStr(),new t(i,r).formatted(),"cached historical time series: ",n.range(),"serial:",c,n)),-1==u&&(u=null),-1==h&&(h=null),d.Add(e.RealtimeTags.Feed,i),d.Add(e.RealtimeTags.Symbol,r),d.Add(e.RealtimeTags.StartDate,u),d.Add(e.RealtimeTags.StopDate,h),d.Add(e.RealtimeTags.CacheSerialNu,c),a.includeAdjustments&&(d.Add(e.RealtimeTags.AdjustMode,e.AdjustMode.Client),d.Add(e.RealtimeTags.HistFieldsMode,e.HistFieldsMode.All)),e.DEBUG_TRADES_CACHE&&e.log(l.ps.toStr(),new t(i,r).formatted(),"request historical time series:",InfrontUtil.DateNuToStr(u),"-",InfrontUtil.DateNuToStr(h),"serial:",c),l.conn.Send(d,!0)}(null)},c.prototype.GetCalculatedHistory=function(t,n,i,r,a){var s=this;void 0===i&&(i=null);var o=this.conn.GetRequest(e.RealtimeRequests.CalculatedHistory,0),l=this.requests[o.uniqueId]=new e.Request;l.type=C.CalculatedHistory,l.callback=n,l.commonFramework=i,t.forEach(function(t){o.pos>7e3&&(s.conn.Send(o,!0),o=s.conn.GetRequest(e.RealtimeRequests.CalculatedHistory,0)),o.AddInt(e.RealtimeTags.Feed,t.feed),o.AddString(e.RealtimeTags.Symbol,t.ticker),o.AddInt(e.RealtimeCalculatedHistoryTags.CalculatedHistoryType,r);for(var n=0;n<a.length;n++)o.AddInt(e.RealtimeCalculatedHistoryTags.CalculatedHistoryParam,a[n]);o.AddInt(e.RealtimeTags.Separator,0)}),this.conn.Send(o,!0)},c.prototype.GetSymbolPerformance=function(t,n,i){var r=this;void 0===i&&(i=null);var a=this.conn.GetRequest(e.RealtimeRequests.HistPerformance,0),s=this.requests[a.uniqueId]=new e.Request;s.callback=n,s.commonFramework=i,t.forEach(function(t){a.pos>7e3&&(r.conn.Send(a,!0),a=r.conn.GetRequest(e.RealtimeRequests.HistPerformance,0)),a.AddInt(e.RealtimeTags.Feed,t.feed),a.AddString(e.RealtimeTags.Symbol,t.ticker),a.AddInt(e.RealtimeTags.Separator,0)}),s.type=C.Performance,this.conn.Send(a,!0)},c.prototype.GetPerformance=function(t,n,i,r){void 0===r&&(r=null);var a=this.conn.GetRequest(e.RealtimeRequests.HistPerformance,0),s=this.requests[a.uniqueId]=new e.Request;s.callback=i,s.commonFramework=r,a.Add(e.RealtimeTags.Feed,t),a.Add(e.RealtimeTags.Symbol,n),s.type=C.Performance,this.conn.Send(a,!0)},c.prototype.GetHeadlines=function(t,n,i){void 0===i&&(i=null);var r=this.conn.GetRequest(e.RealtimeRequests.Headlines,0),a=this.requests[r.uniqueId]=new e.Request;a.callback=n,a.commonFramework=i,a.type=C.Headlines;for(var s=0,o=t.symbols;s<o.length;s++){var l=o[s];r.Add(e.NewsTags.SymbolFeed,l.feed),r.Add(e.NewsTags.Symbol,l.ticker)}r.Add(e.RealtimeTags.Feed,t.feeds),r.Add(e.RealtimeTags.StartDate,t.startDate),r.Add(e.RealtimeTags.StopDate,t.endDate),r.Add(e.RealtimeTags.MaxItems,t.maxItems),this.conn.Send(r,!0)},c.prototype.GetNewsStory=function(t,n,i,r,a,s){void 0===s&&(s=null);var o=this.conn.GetRequest(e.RealtimeRequests.NewsStory,0),l=this.requests[o.uniqueId]=new e.Request;l.callback=a,l.commonFramework=s,l.type=C.NewsStory,o.Add(e.RealtimeTags.Feed,t),o.Add(e.RealtimeDateTime.Date,InfrontUtil.DateToInt(n)),o.Add(e.NewsTags.Id,i),o.Add(e.NewsTags.StreamingId,r),this.conn.Send(o,!0)},c.prototype.GetCompanyData=function(t,n,i){var r=this.conn.GetRequest(e.RealtimeRequests.CompanyData,0),a=this.requests[r.uniqueId]=new e.Request;a.callback=i,a.type=C.CompanyData,r.AddInt(e.RealtimeTags.Feed,t),r.AddString(e.RealtimeTags.Symbol,n),this.conn.Send(r,!0)},c.prototype.GetFundamentalData=function(t,n,i,r,a){var s=this.conn.GetRequest(e.RealtimeRequests.Fundamental,0),o=this.requests[s.uniqueId]=new e.Request;if(o.callback=a,o.type=C.CompanyData,s.AddInt(e.RealtimeTags.Feed,t),s.AddString(e.RealtimeTags.Symbol,n),i&&i.length>0)for(var l=0,c=i;l<c.length;l++){var d=c[l];s.Add(e.FundamentalTags.Source,d)}s.Add(e.RealtimeTags.UseTag,e.RealtimeTags.UseTag),s.Add(e.RealtimeTags.UseTag,e.CompanyTags.descr),r&&s.Add(e.RealtimeTags.Language,r),this.conn.Send(s,!0)},c.prototype.GetBrokerStats=function(t,n,i){if(t.brokers&&t.symbols)throw new Error("Cannot specify both brokers and symbols");var r=e.RealtimeRequests.BrokerStat;t.symbols?r=e.RealtimeRequests.SymbolBrokerStat:t.brokers&&(r=e.RealtimeRequests.BrokerSymbolStat);var a=this.conn.GetRequest(r,0),s=this.requests[a.uniqueId]=new e.Request;switch(s.callback=n,s.commonFramework=i,r){case e.RealtimeRequests.BrokerStat:s.type=C.BrokerStat;break;case e.RealtimeRequests.SymbolBrokerStat:s.type=C.SymbolBrokerStat;break;case e.RealtimeRequests.BrokerSymbolStat:s.type=C.BrokerSymbolStat}a.Add(e.RealtimeTags.Feed,t.feed),a.Add(e.RealtimeTags.Symbol,t.symbols),a.Add(e.BrokerStatTags.broker,t.brokers),a.Add(e.RealtimeTags.StartDate,t.startDate),a.Add(e.RealtimeTags.StopDate,t.endDate),t.accumulate&&a.Add(e.BrokerStatTags.accumulateFlag,1),a.AddInt(e.RealtimeTags.Separator,0),this.conn.Send(a,!0)},c.prototype.GetCacheKey=function(e,t){return e.toString()+"|"+t},c.prototype.GetIxDBTimeSeriesCache=function(e,t,n,i){},c.prototype.PutIxDBTimeSeriesCache=function(e,t,n){void 0===n&&(n=null)},c.prototype.DeleteIxDbTimeSeriesCache=function(e,t){},c.prototype.ResponseCalculatedHistory=function(t,n){var i=new e.Tag,r=new p,a=new h;a.dummy=this.serverPool.symbolDb;for(var s=!1,o=0;o<n.data.length;o++){var l=n.data[o].buf,c=new e.Parser(0,l.length);for(c.SkipHeader(l);c.Next(l,i,this.tagSet);){switch(e.DEBUG_CALCULATEDHISTORY_TAGS&&e.logToConsole(this.tagSet,i,l),i.dataType){case e.DataType.IdsInt:case e.DataType.Int32:r.tags[i.tag]=i.Int(l);break;case e.DataType.String:r.tags[i.tag]=i.String(l);break;default:r.tags[i.tag]=i.Decimal(l)}switch(i.tag){case e.RealtimeTags.Feed:r.feed=i.Int(l);break;case e.RealtimeTags.Symbol:if(r.symbol=i.String(l),a.items&&a.items.length>0){var d=a.items[a.items.length-1];d.feed==r.feed&&d.symbol==r.symbol&&(r=a.items[a.items.length-1],s=!0)}break;case e.RealtimeCalculatedHistoryTags.CalculatedHistoryType:r&&(r.calculatedHistoryType=i.Decimal(l));break;case e.RealtimeCalculatedHistoryTags.CalculatedHistoryParam:r&&(r.calculatedHistoryParam=i.Decimal(l));break;case e.RealtimeCalculatedHistoryTags.CalculatedHistoryValue:r&&(r.calculatedHistoryValue=i.Decimal(l));break;case e.RealtimeTags.Separator:if(r){var u=r.calculatedHistoryValue;switch(r.calculatedHistoryType){case e.RealtimeCalculatedHistoryTags.AvgTrueRange:r.avgTrueRange=u,r.tags[e.RealtimeCalculatedHistoryTags.AvgTrueRange]=u;break;case e.RealtimeCalculatedHistoryTags.MovingAverage:r.movingAverage=u,r.tags[e.RealtimeCalculatedHistoryTags.MovingAverage]=u;break;case e.RealtimeCalculatedHistoryTags.ExponentialMovingAverage:r.exponentialMovingAverage=u,r.tags[e.RealtimeCalculatedHistoryTags.ExponentialMovingAverage]=u;break;case e.RealtimeCalculatedHistoryTags.VolumeWeigtehAveragePrice:r.volumeWeigtehAveragePrice=u,r.tags[e.RealtimeCalculatedHistoryTags.VolumeWeigtehAveragePrice]=u;break;case e.RealtimeCalculatedHistoryTags.AverageDailyVolume:r.averageDailyVolume=u,r.tags[e.RealtimeCalculatedHistoryTags.AverageDailyVolume]=u;break;case e.RealtimeCalculatedHistoryTags.StdDevOfDailyVolume:r.stdDevOfDailyVolume=u,r.tags[e.RealtimeCalculatedHistoryTags.StdDevOfDailyVolume]=u;break;case e.RealtimeCalculatedHistoryTags.AverageDailyExchangeVolume:r.averageDailyExchangeVolume=u,r.tags[e.RealtimeCalculatedHistoryTags.AverageDailyExchangeVolume]=u;break;case e.RealtimeCalculatedHistoryTags.StdDevOfExchangeVolume:r.stdDevOfExchangeVolume=u,r.tags[e.RealtimeCalculatedHistoryTags.StdDevOfExchangeVolume]=u;break;case e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastPrice:r.linearRegressionSlopeOfLastPrice=u,r.tags[e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastPrice]=u;break;case e.RealtimeCalculatedHistoryTags.StdDevOfLastPrice:r.stdDevOfLastPrice=u,r.tags[e.RealtimeCalculatedHistoryTags.StdDevOfLastPrice]=u;break;case e.RealtimeCalculatedHistoryTags.SimpleAvgOfLastPrice:r.simpleAvgOfLastPrice=u,r.tags[e.RealtimeCalculatedHistoryTags.SimpleAvgOfLastPrice]=u;break;case e.RealtimeCalculatedHistoryTags.AvgDailyChange:r.avgDailyChange=u,r.tags[e.RealtimeCalculatedHistoryTags.AvgDailyChange]=u;break;case e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastStderr:r.linearRegressionSlopeOfLastStderr=u,r.tags[e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastStderr]=u;break;case e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastPredict:r.linearRegressionSlopeOfLastPredict=u,r.tags[e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastPredict]=u;break;case e.RealtimeCalculatedHistoryTags.LastVolatility:r.lastVolatility=u,r.tags[e.RealtimeCalculatedHistoryTags.LastVolatility]=u;break;case e.RealtimeCalculatedHistoryTags.LnDeltaCount:r.lnDeltaCount=u,r.tags[e.RealtimeCalculatedHistoryTags.LnDeltaCount]=u;break;case e.RealtimeCalculatedHistoryTags.LnDeltaSum:r.lnDeltaSum=u,r.tags[e.RealtimeCalculatedHistoryTags.LnDeltaSum]=u;break;case e.RealtimeCalculatedHistoryTags.LnDeltaSquareSum:r.lnDeltaSquareSum=u,r.tags[e.RealtimeCalculatedHistoryTags.LnDeltaSquareSum]=u;break;case e.RealtimeCalculatedHistoryTags.AvgBid:r.avgBid=u,r.tags[e.RealtimeCalculatedHistoryTags.AvgBid]=u;break;case e.RealtimeCalculatedHistoryTags.AvgAsk:r.avgAsk=u,r.tags[e.RealtimeCalculatedHistoryTags.AvgAsk]=u;break;case e.RealtimeCalculatedHistoryTags.AvgTurnover:r.avgTurnover=u,r.tags[e.RealtimeCalculatedHistoryTags.AvgTurnover]=u;break;case e.RealtimeCalculatedHistoryTags.AvgDivYieldFactor:r.avgDivYieldFactor=u,r.tags[e.RealtimeCalculatedHistoryTags.AvgDivYieldFactor]=u}}s||a.items.push(r),s=!1,r=new p;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,i.tag),i.String(l))}}}n.callback&&n.callback.ResponseCalculatedHistory&&(a.ToMws(),n.callback.ResponseCalculatedHistory(new e.ResponseHeader,a)),n.commonFramework&&(a.ToMws(),n.commonFramework.Reply(new e.ResponseHeader,a))},c.prototype.ResponseTimeSeries=function(t,n){for(var s=new o,l=new e.Tag,c=0;c<n.data.length;c++){var d=n.data[c].buf,u=0,h=void 0,p=void 0,m=void 0,g=new e.Parser(0,d.length);for(g.SkipHeader(d);g.Next(d,l,this.tagSet);)switch(e.DEBUG_TRADES_CS_HIST_TAGS&&e.logToConsole(this.tagSet,l,d),l.tag){case e.RealtimeDateTime.Date:u+=l.Int(d),s.items.push(h=new i(u));break;case e.RealtimeTags.Bid:h&&(h.bid=l.Decimal(d));break;case e.RealtimeTags.Ask:h&&(h.ask=l.Decimal(d));break;case e.RealtimeTags.Open:h&&(h.open=l.Decimal(d));break;case e.RealtimeTags.High:h&&(h.high=l.Decimal(d));break;case e.RealtimeTags.Low:h&&(h.low=l.Decimal(d));break;case e.RealtimeTags.Last:h&&(h.last=l.Decimal(d));break;case e.RealtimeTags.AcVolume:h&&(h.volume=l.Decimal(d));break;case e.RealtimeTags.Turnover:h&&(h.turnover=l.Decimal(d));break;case e.RealtimeTags.OnExchTurnover:h&&(h.onExchTurnover=l.Decimal(d));break;case e.RealtimeTags.TradeMoves:h&&(h.num_trades=l.Decimal(d));break;case e.RealtimeTags.OrderbookMoves:h&&(h.orderbookMoves=l.Decimal(d));break;case e.RealtimeTags.NetAssetValue:h&&(h.netAssetValue=l.Decimal(d));break;case e.RealtimeTags.OfficialClose:h&&(h.officialClose=l.Decimal(d));break;case e.RealtimeTags.Yield:h&&(h.yield=l.Decimal(d));break;case e.RealtimeTags.BidYield:h&&(h.bidYield=l.Decimal(d));break;case e.RealtimeTags.AskYield:h&&(h.askYield=l.Decimal(d));break;case e.RealtimeTags.Feed:s.feed=l.Int(d);break;case e.RealtimeTags.Symbol:s.symbol=l.String(d);break;case e.RealtimeTags.CacheSerialNu:s.serialNumber=l.Int(d);break;case e.RealtimeDateTime.AdjustDate:s.adjustments.push(m=new r),m.date=l.Int(d);break;case e.RealtimeTags.AdjustValue:m&&(m.factor=l.Int(d));break;case e.RealtimeDateTime.DivDate:s.dividends.push(p=new a),p.date=l.Int(d);break;case e.RealtimeTags.Dividend:p&&(p.dividend=l.Decimal(d));break;case e.RealtimeTags.Currency:p&&(p.currency=l.String(d));break;case e.RealtimeTags.IndicTrade:h&&(h.indicTrade=l.Decimal(d));break;case e.RealtimeTags.IndicIncVol:h&&(h.indicIncVol=l.Decimal(d));break;case e.RealtimeTags.IndicHigh:h&&(h.indicHigh=l.Decimal(d));break;case e.RealtimeTags.IndicLow:h&&(h.indicLow=l.Decimal(d));break;case e.RealtimeTags.Nms:h&&(h.nms=l.Decimal(d));break;case e.RealtimeTags.IndicOpen:h&&(h.indicOpen=l.Decimal(d));break;case e.RealtimeTags.IndicOpenVol:h&&(h.indicOpenVol=l.Decimal(d));break;case e.RealtimeTags.OnExchVolume:h&&(h.onFloorVolume=l.Decimal(d));break;case e.RealtimeTags.OpenInterest:case e.RealtimeTags.FundTotalAssets:case e.RealtimeTags.Pe:case e.RealtimeTags.EarningsYield:case e.RealtimeTags.DividendYield:case e.RealtimeTags.Settle:case e.RealtimeTags.BasisPointSpread:case e.AuctionTags.Auction1Volume:case e.AuctionTags.Auction1Price:case e.AuctionTags.Auction2Volume:case e.AuctionTags.Auction2Price:case e.AuctionTags.Auction3Volume:case e.AuctionTags.Auction3Price:case e.RealtimeTags.Separator:break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(d))}}e.DEBUG_TRADES_CS&&e.log(this.ps.toStr(),e.requestToStr(this.tagSet,t.request),s),function(t){n.callback&&n.callback.ResponseCalculatedHistory(new e.ResponseHeader,t),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,t)}(s)},c.prototype.ResponsePerformance=function(t,n){for(var i=new u,r=new d,a=0;a<n.data.length;a++){var o=n.data[a].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c=new e.Tag,h=!1;l.Next(o,c,this.tagSet);){switch(e.DEBUG_HIST_PERFORMANCE_TAGS&&e.logToConsole(this.tagSet,c,o),c.dataType){case e.DataType.IdsInt:case e.DataType.Int32:r.tags[c.tag]=c.Int(o);break;case e.DataType.String:r.tags[c.tag]=c.String(o);break;default:r.tags[c.tag]=c.Decimal(o)}switch(c.tag){case e.RealtimeTags.Feed:r.feed=c.Int(o);break;case e.RealtimeTags.Symbol:if(r.symbol=c.String(o),i.items&&i.items.length>0){var p=i.items[i.items.length-1];p.feed==r.feed&&p.symbol==r.symbol&&(r=i.items[i.items.length-1],h=!0)}break;case e.RealtimeDateTime.DivDate:case e.RealtimeTags.Dividend:case e.RealtimeTags.DividendCurrency:case e.RealtimeTags.NextDividendValue:case e.RealtimeTags.NextDividendDate:case e.RealtimeTags.NextDividendCurrency:case e.RealtimeTags.YVolume:case e.RealtimeTags.YTurnover:case e.RealtimeTags.YExchangeVolume:case e.RealtimeTags.YExchangeTurnover:break;case e.RealtimeDateTime.LAST_TRADE_DATE:r.value.lastTradeDate=InfrontUtil.DateFromDateNu(c.Int(o));break;case e.PerformanceTags.LAST_TRADE:r.value.lastTrade=c.Decimal(o);break;case e.PerformanceTags.LAST_1W:r.value.last[s._1W]=c.Decimal(o);break;case e.PerformanceTags.LAST_1M:r.value.last[s._1M]=c.Decimal(o);break;case e.PerformanceTags.LAST_3M:r.value.last[s._3M]=c.Decimal(o);break;case e.PerformanceTags.LAST_6M:r.value.last[s._6M]=c.Decimal(o);break;case e.PerformanceTags.LAST_1Y:r.value.last[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_2Y:r.value.last[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_3Y:r.value.last[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_5Y:r.value.last[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_SOW:r.value.last[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.LAST_SOM:r.value.last[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.LAST_SOY:r.value.last[s.SOY]=c.Decimal(o);break;case e.PerformanceTags.HIGH_1W:r.value.high[s._1W]=c.Decimal(o);break;case e.PerformanceTags.HIGH_1M:r.value.high[s._1M]=c.Decimal(o);break;case e.PerformanceTags.HIGH_3M:r.value.high[s._3M]=c.Decimal(o);break;case e.PerformanceTags.HIGH_6M:r.value.high[s._6M]=c.Decimal(o);break;case e.PerformanceTags.HIGH_1Y:r.value.high[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_2Y:r.value.high[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_3Y:r.value.high[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_5Y:r.value.high[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_SOW:r.value.high[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.HIGH_SOM:r.value.high[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.HIGH_SOY:r.value.high[s.SOY]=c.Decimal(o);break;case e.PerformanceTags.LOW_1W:r.value.low[s._1W]=c.Decimal(o);break;case e.PerformanceTags.LOW_1M:r.value.low[s._1M]=c.Decimal(o);break;case e.PerformanceTags.LOW_3M:r.value.low[s._3M]=c.Decimal(o);break;case e.PerformanceTags.LOW_6M:r.value.low[s._6M]=c.Decimal(o);break;case e.PerformanceTags.LOW_1Y:r.value.low[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_2Y:r.value.low[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_3Y:r.value.low[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_5Y:r.value.low[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_SOW:r.value.low[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.LOW_SOM:r.value.low[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.LOW_SOY:r.value.low[s.SOY]=c.Decimal(o);break;case e.PerformanceTags.VOL_1W:r.value.vol[s._1W]=c.Decimal(o);break;case e.PerformanceTags.VOL_1M:r.value.vol[s._1M]=c.Decimal(o);break;case e.PerformanceTags.VOL_3M:r.value.vol[s._3M]=c.Decimal(o);break;case e.PerformanceTags.VOL_6M:r.value.vol[s._6M]=c.Decimal(o);break;case e.PerformanceTags.VOL_1Y:r.value.vol[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_2Y:r.value.vol[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_3Y:r.value.vol[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_5Y:r.value.vol[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_SOW:r.value.vol[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.VOL_SOM:r.value.vol[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.VOL_SOY:r.value.vol[s.SOY]=c.Decimal(o);break;case e.PerformanceTags.DAYCOUNT_1W:r.dayCount[s._1W]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_1M:r.dayCount[s._1M]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_3M:r.dayCount[s._3M]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_6M:r.dayCount[s._6M]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_1Y:r.dayCount[s._1Y]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_2Y:r.dayCount[s._2Y]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_3Y:r.dayCount[s._3Y]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_5Y:r.dayCount[s._5Y]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_SOW:r.dayCount[s.SOW]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_SOM:r.dayCount[s.SOM]=c.Int(o);break;case e.PerformanceTags.DAYCOUNT_SOY:r.dayCount[s.SOY]=c.Int(o);break;case e.PerformanceTags.RSI14_GAIN:r.value.RsiGain=c.Decimal(o);break;case e.PerformanceTags.RSI14_LOSS:r.value.RsiLoss=c.Decimal(o);break;case e.PerformanceTags.RSI14_PERIODS:r.value.RsiPeriods=c.Decimal(o);break;case e.RealtimeDateTime.LAST_TRADE_DATE_DIV:r.div.lastTradeDate=InfrontUtil.DateFromDateNu(c.Int(o));break;case e.PerformanceTags.LAST_TRADE_DIV:r.div.lastTrade=c.Decimal(o);break;case e.PerformanceTags.LAST_1W_DIV:r.div.last[s._1W]=c.Decimal(o);break;case e.PerformanceTags.LAST_1M_DIV:r.div.last[s._1M]=c.Decimal(o);break;case e.PerformanceTags.LAST_3M_DIV:r.div.last[s._3M]=c.Decimal(o);break;case e.PerformanceTags.LAST_6M_DIV:r.div.last[s._6M]=c.Decimal(o);break;case e.PerformanceTags.LAST_1Y_DIV:r.div.last[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_2Y_DIV:r.div.last[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_3Y_DIV:r.div.last[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_5Y_DIV:r.div.last[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.LAST_SOW_DIV:r.div.last[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.LAST_SOM_DIV:r.div.last[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.LAST_SOY_DIV:r.div.last[s.SOY]=c.Decimal(o);break;case e.PerformanceTags.HIGH_1W_DIV:r.div.high[s._1W]=c.Decimal(o);break;case e.PerformanceTags.HIGH_1M_DIV:r.div.high[s._1M]=c.Decimal(o);break;case e.PerformanceTags.HIGH_3M_DIV:r.div.high[s._3M]=c.Decimal(o);break;case e.PerformanceTags.HIGH_6M_DIV:r.div.high[s._6M]=c.Decimal(o);break;case e.PerformanceTags.HIGH_1Y_DIV:r.div.high[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_2Y_DIV:r.div.high[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_3Y_DIV:r.div.high[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_5Y_DIV:r.div.high[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.HIGH_SOW_DIV:r.div.high[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.HIGH_SOM_DIV:r.div.high[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.HIGH_SOY_DIV:r.div.high[s.SOY]=c.Decimal(o);break;case e.PerformanceTags.LOW_1W_DIV:r.div.low[s._1W]=c.Decimal(o);break;case e.PerformanceTags.LOW_1M_DIV:r.div.low[s._1M]=c.Decimal(o);break;case e.PerformanceTags.LOW_3M_DIV:r.div.low[s._3M]=c.Decimal(o);break;case e.PerformanceTags.LOW_6M_DIV:r.div.low[s._6M]=c.Decimal(o);break;case e.PerformanceTags.LOW_1Y_DIV:r.div.low[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_2Y_DIV:r.div.low[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_3Y_DIV:r.div.low[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_5Y_DIV:r.div.low[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.LOW_SOW_DIV:r.div.low[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.LOW_SOM_DIV:r.div.low[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.LOW_SOY_DIV:r.div.low[s.SOY]=c.Decimal(o);break;case e.PerformanceTags.VOL_1W_DIV:r.div.vol[s._1W]=c.Decimal(o);break;case e.PerformanceTags.VOL_1M_DIV:r.div.vol[s._1M]=c.Decimal(o);break;case e.PerformanceTags.VOL_3M_DIV:r.div.vol[s._3M]=c.Decimal(o);break;case e.PerformanceTags.VOL_6M_DIV:r.div.vol[s._6M]=c.Decimal(o);break;case e.PerformanceTags.VOL_1Y_DIV:r.div.vol[s._1Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_2Y_DIV:r.div.vol[s._2Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_3Y_DIV:r.div.vol[s._3Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_5Y_DIV:r.div.vol[s._5Y]=c.Decimal(o);break;case e.PerformanceTags.VOL_SOW_DIV:r.div.vol[s.SOW]=c.Decimal(o);break;case e.PerformanceTags.VOL_SOM_DIV:r.div.vol[s.SOM]=c.Decimal(o);break;case e.PerformanceTags.VOL_SOY_DIV:r.div.vol[s.SOY]=c.Decimal(o);break;case e.RealtimeTags.PERF_1D:r.div.vol[s._1D]=c.Decimal(o);break;case e.RealtimeTags.PERF_1W:r.div.vol[s._1W]=c.Decimal(o);break;case e.RealtimeTags.PERF_1M:r.div.vol[s._1M]=c.Decimal(o);break;case e.RealtimeTags.PERF_3M:r.div.vol[s._3M]=c.Decimal(o);break;case e.RealtimeTags.PERF_6M:r.div.vol[s._6M]=c.Decimal(o);break;case e.RealtimeTags.PERF_1Y:r.div.vol[s._1Y]=c.Decimal(o);break;case e.RealtimeTags.PERF_2Y:r.div.vol[s._2Y]=c.Decimal(o);break;case e.RealtimeTags.PERF_3Y:r.div.vol[s._3Y]=c.Decimal(o);break;case e.RealtimeTags.PERF_5Y:r.div.vol[s._5Y]=c.Decimal(o);break;case e.RealtimeTags.PERF_10Y:r.div.vol[s._10Y]=c.Decimal(o);break;case e.RealtimeTags.PERF_SOY:r.div.vol[s.SOY]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_1M:r.div.vol[s._1M]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_3M:r.div.vol[s._3M]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_6M:r.div.vol[s._6M]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_1Y:r.div.vol[s._1Y]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_2Y:r.div.vol[s._2Y]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_3Y:r.div.vol[s._3Y]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_5Y:r.div.vol[s._5Y]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_10Y:r.div.vol[s._10Y]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_SOY:r.div.vol[s.SOY]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_1D:r.div.vol[s._1D]=c.Decimal(o);break;case e.MorningstarSEKPerformanceTags.SEK_PERF_1W:r.div.vol[s._1W]=c.Decimal(o);break;case e.PerformanceTags.RSI14_GAIN_DIV:r.div.RsiGain=c.Decimal(o);break;case e.PerformanceTags.RSI14_LOSS_DIV:r.div.RsiLoss=c.Decimal(o);break;case e.PerformanceTags.RSI14_PERIODS_DIV:r.div.RsiPeriods=c.Decimal(o);break;case e.RealtimeTags.Separator:h||i.items.push(r),h=!1,r=new d;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,c.tag),c.String(o))}}}e.DEBUG_HIST_PERFORMANCE&&e.log(this.ps.toStr(),e.requestToStr(this.tagSet,t.request),i),n.callback&&n.callback.ResponseHistPerformance&&n.callback.ResponseHistPerformance(new e.ResponseHeader,i),n.commonFramework&&(i.ToMws(),n.commonFramework.Reply(new e.ResponseHeader,i))},c.prototype.ResponseHeadlines=function(n,i){for(var r=new g,a=0;a<i.data.length;a++){var s=i.data[a].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l,c=new e.Tag,d=new e.HeadlineItem;o.Next(s,c,this.tagSet);)switch(c.tag){case e.RealtimeTags.Feed:d.news_feed=c.Int(s);break;case e.RealtimeDateTime.Date:InfrontUtil.DateNuToDate(c.Int(s),d.dateTime);break;case e.RealtimeDateTime.TradeTime:InfrontUtil.TimeNuToDate(c.Int(s),d.dateTime,this.serverPool.login.feedOffsetUtc(d.news_feed));break;case e.NewsTags.Id:d.news_id=c.String(s);break;case e.NewsTags.StreamingId:d.streamingId=c.String(s);break;case e.NewsTags.Flags:d.flags=c.Int(s);break;case e.NewsTags.Headline:d.headline=c.String(s);break;case e.NewsTags.SymbolFeed:l=new t(c.Int(s),""),d.symbols.push(l);break;case e.NewsTags.Symbol:l&&(l.ticker=c.String(s));break;case e.NewsTags.Industry:d.industry=c.String(s);break;case e.NewsTags.Category:d.category=c.String(s);break;case e.NewsTags.Flash:d.isFlash=1==c.Int(s);break;case e.NewsTags.StoryURL:d.url=c.String(s);break;case e.NewsTags.Topic:d.topic=c.String(s);break;case e.NewsTags.StoryNu:d.storyNumber=c.Int(s);break;case e.NewsTags.Country:d.country=c.String(s);break;case e.NewsTags.Language:d.language=c.String(s);break;case e.NewsTags.ProductCode:d.productCode=c.String(s);break;case e.NewsTags.MoneyCode:d.moneyCode=c.String(s);break;case e.NewsTags.Author:d.author=c.String(s);break;case e.RealtimeTags.Separator:r.items.push(d),d=new e.HeadlineItem;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,c.tag),c.String(s))}}i.callback&&i.callback.ResponseHistHeadline&&i.callback.ResponseHistHeadline(new e.ResponseHeader,r),i.commonFramework&&i.commonFramework.Reply(new e.ResponseHeader,r)},c.prototype.ResponseNewsStory=function(t,n){for(var i=new f,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=new e.Parser(0,a.length);s.SkipHeader(a);for(var o=new e.Tag;s.Next(a,o,this.tagSet);)switch(o.tag){case e.RealtimeTags.Feed:i.news_feed=o.Int(a);break;case e.NewsTags.Id:i.news_id=o.String(a);break;case e.NewsTags.Text:i.text.push(o.String(a));break;case e.RealtimeTags.Separator:break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}n.callback&&n.callback.ResponseHistNewsStory&&n.callback.ResponseHistNewsStory(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},c.prototype.ResponseCompanyData=function(t,n){for(var i,r=new T,a=r.primary,s=0;s<n.data.length;s++){var o=n.data[s].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c,d=new e.Tag,u={};l.Next(o,d,this.tagSet);)switch(d.tag){case e.RealtimeTags.Feed:a.feed=d.Int(o);break;case e.RealtimeTags.Symbol:a.symbol=d.String(o);break;case e.RealtimeTags.SortNu:a.sortNu=d.Int(o);break;case e.RealtimeTags.Currency:c&&(c.currency=d.String(o),u[c.currency]=(u[c.currency]||0)+1),a.currency=d.String(o);break;case e.RealtimeTags.MarketCap:a.marketCap=d.Decimal(o);break;case e.RealtimeTags.Country:a.country=d.String(o);break;case e.RealtimeTags.Sector:a.sector=d.String(o);break;case e.CompanyTags.descr:a.descr=d.String(o);break;case e.RealtimeDateTime.reportDate:a.reportDate=InfrontUtil.DateFromDateNu(d.Int(o));break;case e.CompanyTags.capital:a.capital=d.Decimal(o);break;case e.CompanyTags.shortTermDebt:a.shortTermDebt=d.Decimal(o);break;case e.CompanyTags.longTermDebt:a.longTermDebt=d.Decimal(o);break;case e.CompanyTags.revenue:a.revenue=d.Decimal(o);break;case e.CompanyTags.earnings:a.earnings=d.Decimal(o);break;case e.CompanyTags.id:a.companyId=d.Int(o);break;case e.CompanyTags.url:a.urls.push(d.String(o));break;case e.CompanyTags.source:a.source=d.Int(o);break;case e.CompanyTags.peerFeed:a.feed=d.Int(o);break;case e.CompanyTags.peerSymbol:a.symbol=d.String(o);break;case e.CompanyTags.name:a.name=d.String(o);break;case e.CompanyTags.beta_1Y:a.beta1Y=d.Decimal(o);break;case e.CompanyTags.indexFeed:a.indexFeed=d.Int(o);break;case e.CompanyTags.indexSymbol:a.indexSymbol=d.String(o);break;case e.CompanyTags.enterpriseValue:a.enterpriseValue=d.Decimal(o);break;case e.CompanyTags.enterpriseCurrency:a.enterpriseCurrency=d.String(o);break;case e.CompanyTags.infinancialsSectorCode:a.infinancialsSectorCode=d.String(o);break;case e.CompanyTags.primaryShares:a.primaryShares=d.Decimal(o);break;case e.CompanyTags.secondaryShares:a.secondaryShares=d.Decimal(o);break;case e.CompanyTags.CEO:a.CEO=d.String(o);break;case e.CompanyTags.chairman:a.chairman=d.String(o);break;case e.CompanyTags.officer1Name:i=new v,a.officers.push(i),i.name=d.String(o);break;case e.CompanyTags.officer1Title:if(!i)break;i.title=d.String(o);break;case e.CompanyTags.officer2Name:i=new v,a.officers.push(i),i.name=d.String(o);break;case e.CompanyTags.officer2Title:if(!i)break;i.title=d.String(o);break;case e.CompanyTags.officer3Name:i=new v,a.officers.push(i),i.name=d.String(o);break;case e.CompanyTags.officer3Title:if(!i)break;i.title=d.String(o);break;case e.CompanyTags.officer4Name:i=new v,a.officers.push(i),i.name=d.String(o);break;case e.CompanyTags.officer4Title:if(!i)break;i.title=d.String(o);break;case e.CompanyTags.officer5Name:i=new v,a.officers.push(i),i.name=d.String(o);break;case e.CompanyTags.officer5Title:if(!i)break;i.title=d.String(o);break;case e.FundamentalTags.Source:c||(c=new y),c.source=d.Int(o);break;case e.FundamentalTags.Item:c||(c=new y),c.item=d.String(o);break;case e.FundamentalTags.Period:c||(c=new y),c.period=d.String(o);break;case e.FundamentalTags.PeriodDisplay:c||(c=new y),c.periodDisplay=d.String(o);break;case e.FundamentalTags.Actual:c||(c=new y),c.actual=d.Decimal(o);break;case e.FundamentalTags.EstimateMean:c||(c=new y),c.estimateMean=d.Decimal(o),c.isEstimate=!0;break;case e.FundamentalTags.EstimateMedian:c||(c=new y),c.estimateMedian=d.Decimal(o),c.isEstimate=!0;break;case e.FundamentalTags.EstimateHigh:c||(c=new y),c.estimateHigh=d.Decimal(o),c.isEstimate=!0;break;case e.FundamentalTags.EstimateLow:c||(c=new y),c.estimateLow=d.Decimal(o),c.isEstimate=!0;break;case e.FundamentalTags.EstimateCount:c||(c=new y),c.estimateCount=d.Int(o),c.isEstimate=!0;break;case e.FundamentalTags.EstimateDeviation:c||(c=new y),c.estimateDeviation=d.Decimal(o),c.isEstimate=!0;break;case e.RealtimeTags.Separator:if(c)a.fundamentals[c.item]?a.fundamentals[c.item].push(c):a.fundamentals[c.item]=[c],c=null;else{var h=0,p=void 0;for(var m in u)u.hasOwnProperty(m)&&u[m]>=h&&(h=u[m],p=m);p&&(a.currency=p),a=new b,r.peers.push(a)}break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,d.tag),d.String(o))}}r.peers[r.peers.length-1]&&!r.peers[r.peers.length-1].companyId&&delete r.peers[r.peers.length-1],n.callback.ResponseCompanyData(new e.ResponseHeader,r)},c.prototype.ResponseBrokerStats=function(t,n){for(var i=new I,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=new e.Parser(0,a.length);s.SkipHeader(a);for(var o=new e.Tag,l=new e.BrokerStatItem,c=-1;s.Next(a,o,this.tagSet);)switch(e.DEBUG_BROKER_STATS_CS_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case e.RealtimeTags.Feed:i.feed=o.Int(a),l.feed=i.feed,-1==c&&(c=this.serverPool.login.feedOffsetUtc(i.feed));break;case e.RealtimeTags.Symbol:l.symbol=o.String(a);break;case e.RealtimeDateTime.Date:InfrontUtil.DateNuToDate(o.Int(a),l.dateTime);break;case e.RealtimeDateTime.TradeTime:InfrontUtil.TimeNuToDate(o.Int(a),l.dateTime,c);break;case e.RealtimeTags.StartDate:case e.RealtimeTags.StopDate:break;case e.BrokerStatTags.broker:l.name=o.String(a);break;case e.BrokerStatTags.descr:break;case e.BrokerStatTags.nuBuys:l.buy.num=o.Int(a);break;case e.BrokerStatTags.buyVolume:l.buy.volume=o.Decimal(a);break;case e.BrokerStatTags.buyTurnover:l.buy.turnover=o.Decimal(a);break;case e.BrokerStatTags.nuSells:l.sell.num=o.Int(a);break;case e.BrokerStatTags.sellVolume:l.sell.volume=o.Decimal(a);break;case e.BrokerStatTags.sellTurnover:l.sell.turnover=o.Decimal(a);break;case e.BrokerStatTags.nuInternal:l.internal.num=o.Int(a);break;case e.BrokerStatTags.intVolume:l.internal.volume=o.Decimal(a);break;case e.BrokerStatTags.intTurnover:l.internal.turnover=o.Decimal(a);break;case e.BrokerStatTags.openBuy:case e.BrokerStatTags.highBuy:case e.BrokerStatTags.lowBuy:case e.BrokerStatTags.lastBuy:case e.BrokerStatTags.openSell:case e.BrokerStatTags.highSell:case e.BrokerStatTags.lowSell:case e.BrokerStatTags.lastSell:case e.BrokerStatTags.openInt:case e.BrokerStatTags.highInt:case e.BrokerStatTags.lowInt:case e.BrokerStatTags.lastInt:break;case e.BrokerStatTags.nuHitBid:l.aggressiveSell.num=o.Int(a);break;case e.BrokerStatTags.hitBidVolume:l.aggressiveSell.volume=o.Decimal(a);break;case e.BrokerStatTags.hitBidTurnover:l.aggressiveSell.turnover=o.Decimal(a);break;case e.BrokerStatTags.nuHitAsk:l.aggressiveBuy.num=o.Int(a);break;case e.BrokerStatTags.hitAskVolume:l.aggressiveBuy.volume=o.Decimal(a);break;case e.BrokerStatTags.hitAskTurnover:l.aggressiveBuy.turnover=o.Decimal(a);break;case e.RealtimeTags.Separator:n.type==C.SymbolBrokerStat||n.type==C.BrokerStat?l.name&&(i.b||(i.b={}),i.b[l.name]||(i.b[l.name]=[]),i.b[l.name].push(l)):l.symbol&&(i.s||(i.s={}),i.s[l.symbol]||(i.s[l.symbol]=[]),i.s[l.symbol].push(l));var d=l;(l=new e.BrokerStatItem).feed=d.feed,l.symbol=d.symbol,l.name=d.name;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}i.ToMws(),e.DEBUG_BROKER_STATS_CS&&e.log("ResponseBrokerStats",i),n.callback&&n.callback.ResponseHistBrokerStats&&n.callback.ResponseHistBrokerStats(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},c.prototype.lowLevelData=function(t,n,i){var r=this.requests[t.uniqueId];if(r&&(r.responseNu++,r.data.push(new e.ResponseItem(i.DuplicateData(n),!1)),t.segment==e.SegmentInfo.Last)){switch(r.type){case C.TimeSeries:this.ResponseTimeSeries(t,r);break;case C.Performance:this.ResponsePerformance(t,r);break;case C.Headlines:this.ResponseHeadlines(t,r);break;case C.NewsStory:this.ResponseNewsStory(t,r);break;case C.CompanyData:this.ResponseCompanyData(t,r);break;case C.BrokerStat:case C.BrokerSymbolStat:case C.SymbolBrokerStat:this.ResponseBrokerStats(t,r);break;case C.CalculatedHistory:this.ResponseCalculatedHistory(t,r)}delete this.requests[t.uniqueId]}},c.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId]),e.log("Error:",this.ps.toStr(),i)},c.prototype.lowLevelConnect=function(e,t){l.prototype.lowLevelConnect.call(this,e,t)},c.prototype.lowLevelDisconnect=function(e,t,n){l.prototype.lowLevelDisconnect.call(this,e,t,n)},c}(e.BaseIDSServer);e.HistoryServer=E}(IDS||(IDS={})),function(e){var t=function(){function e(e,t){var n=this;this.cb=[],this.localLoop=!1,this.ws=null,this.localLoop=t,this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=function(e){return n.onOpen(e)},this.ws.onclose=function(e){return n.onClose(e)},this.ws.onmessage=function(e){return n.onMessage(e)},this.ws.onerror=function(e){return n.onError(e)}}return e.prototype.Register=function(e){-1==this.cb.indexOf(e)&&(this.cb.push(e),this.localLoop&&e.onOpen("Open"))},e.prototype.Unregister=function(e){var t=this.cb.indexOf(e);-1!=t&&this.cb.splice(t,1)},e.prototype.readyState=function(){return this.ws.readyState},e.prototype.close=function(){this.ws&&this.ws.close()},e.prototype.onOpen=function(e){this.cb.forEach(function(t){t.onOpen(e)})},e.prototype.onClose=function(e){this.cb.forEach(function(t){t.onClose(e)})},e.prototype.onMessage=function(e){this.cb.forEach(function(t){t.onMessage(e)})},e.prototype.onError=function(e){this.cb.forEach(function(t){t.onError(e)})},e}();e.InfrontWebSocket=t;var n=0;e.GetInfrontWebSocket=function(n,i){try{return new t(n,i)}catch(t){return e.log("Websocket exception"),null}},e.GetInfrontRequestUniqueId=function(){return++n}}(IDS||(IDS={})),function(e){var t=function(){function e(){}return e.GetLen=function(e,t){var n=255^e[t];return 128==(128&n)?1:64==(64&n)?2:32==(32&n)?3:16==(16&n)?4:8==(8&n)?5:4==(4&n)?6:2==(2&n)?7:1==(1&n)?8:1},e.Utf8ArrayToStr=function(e){var t,n,i,r,a,s;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:a=e[n++],t+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=e[n++],s=e[n++],t+=String.fromCharCode((15&r)<<12|(63&a)<<6|(63&s)<<0)}return t},e.GetString=function(t,n,i,r){if(void 0===r&&(r=!0),r){for(var a=new Uint8Array(i),s=0;s<i;s++)a[s]=t[n+s];return e.Utf8ArrayToStr(a)}var o,l="";for(o=0;o<i;o++)l+=String.fromCharCode(t[n+o]);return l},e.GetBCD=function(e,t,n){var i,r=0,a=0,s=0;n=e[t]>>4;var o,l=!1;for(o=1;o<=n;o++){s>0&&s++;var c=e[t];if(1==(1&o)?(c&=15,t++):c>>=4,c<10)a*=10,a+=c;else switch(c){case 10:r=a,a=0,s=1;break;case 11:l=!0;break;case 12:a*=100;break;case 13:a*=1e3;break;case 14:a*=1e4;break;case 15:a*=1e5}}if(s){var d=[1,1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15][s];i=(r*d+a)/d}else i=a;return l&&(i=-i),i},e.GetInt=function(e,t,n){var i=0;switch(n){case 1:return e[t];case 2:i=31&e[t]|e[t+1]<<5;break;case 3:i=15&e[t]|e[t+1]<<4|e[t+2]<<12;break;case 4:i=7&e[t]|e[t+1]<<3|e[t+2]<<11|e[t+3]<<19;break;default:var r=7-n;i=e[t++]&(1<<r)-1;for(var a=0;a<n-1;a++){var s;s=e[t++],i+=s*=Math.pow(2,r),r+=8}}return i>>>0},e.GetSignedInt=function(e,t,n){var i=0;switch(n){case 1:return e[t];case 2:i=31&e[t]|e[t+1]<<5;break;case 3:i=15&e[t]|e[t+1]<<4|e[t+2]<<12;break;case 4:i=7&e[t]|e[t+1]<<3|e[t+2]<<11|e[t+3]<<19;break;default:var r=7-n;i=e[t++]&(1<<r)-1;for(var a=0;a<n-1;a++){var s;s=e[t++],i+=s*=Math.pow(2,r),r+=8}}return i},e.GetWord=function(e,t){return e[t]|e[t+1]<<8},e.GetInt32=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},e.GetSignedInt32=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>0},e.GetInt64=function(e,t){var n,i="";for(n=t;n<t+8;n++)i+=e[n].toString(16);return i},e.GetFloat=function(e,t){return new DataView(e.buffer,t,4).getFloat32(0,!0)},e.GetDouble=function(e,t){return new DataView(e.buffer,t,8).getFloat64(0,!0)},e.AddInt32=function(e,t,n){if(void 0!==n)return e[t]=255&n,n>>=8,e[t+1]=255&n,n>>=8,e[t+2]=n&&255,n>>=8,e[t+3]=255&n,4},e.AddInt=function(e,t,n){if(void 0!==n){if(n<64)return e[t]=n,1;if(n<8192)return e[t]=128|31&n,e[t+1]=n>>5&255,2;var i=0;n<1048576?(e[t]=192|15&n,t++,n>>=4,i=2):n<134217728?(e[t]=224|7&n,t++,n>>=3,i=3):n<17179869184?(e[t]=240|3&n,t++,n>>=2,i=4):n<2199023255552?(e[t]=248|1&n,t++,n>>=1,i=5):n<281474976710656&&(e[t]=252,t++,i=6);for(var r=0;r<i;r++)e[t]=255&n,t++,n>>=8;return i+1}},e.AddString=function(e,t,n){if(void 0!==n){var i,r=n.toString(),a=r.length,s=0;for(s+=this.AddInt(e,t+s,a),i=0;i<a;i++)e[t+s+i]=r.charCodeAt(i);return s+a}},e.AddBCD=function(e,t,n){var i=n.toString(),r=0;e[t+r]=0;for(var a=0,s=0;s<i.length;s++){switch(1==(1&s)?(a=4,e[t+r]=0):a=0,i[s]){case".":e[t+r]|=10<<a;break;case"-":e[t+r]|=11<<a;break;default:i[s]>="0"&&i[s]<="9"&&(e[t+r]|=i.charCodeAt(s)-48<<a)}0==a&&r++}return e[t]|=i.length<<4,0==a?r:r+1},e.AddBinary=function(e,t,n,i,r){if(void 0!==n){var a,s=r,o=0;for(o+=this.AddInt(e,t+o,s),a=0;a<s;a++)e[t+o+a]=n[i+a];return o+s}},e}();e.LowLevel=t;var n=function(){function n(){this.len=0}return n.prototype.get=function(t){switch(void 0===t&&(t=null),this.buf&&(t=this.buf),this.dataType){case e.DataType.IdsInt:case e.DataType.DeltaIdsInt:case e.DataType.Int32:return this.Int(t);case e.DataType.Float:case e.DataType.Double:case e.DataType.BCD:return this.Decimal(t);case e.DataType.DeltaBCD:break;case e.DataType.Int64:default:return this.String(t)}},n.prototype.String=function(n,i){switch(void 0===n&&(n=null),void 0===i&&(i=!0),this.buf&&(n=this.buf),this.dataType){case e.DataType.IdsInt:case e.DataType.DeltaIdsInt:return t.GetInt(n,this.pos,this.len).toString();case e.DataType.Float:return t.GetFloat(n,this.pos).toString();case e.DataType.Double:return t.GetDouble(n,this.pos).toString();case e.DataType.Int32:return t.GetInt32(n,this.pos).toString();case e.DataType.BCD:case e.DataType.DeltaBCD:return t.GetBCD(n,this.pos,this.len).toString();case e.DataType.Int64:return t.GetInt64(n,this.pos).toString();case e.DataType.NullWithoutData:return""}return t.GetString(n,this.pos,this.len,i)},n.prototype.Int=function(n){switch(void 0===n&&(n=null),this.buf&&(n=this.buf),this.dataType){case e.DataType.IdsInt:case e.DataType.DeltaIdsInt:return t.GetInt(n,this.pos,this.len);case e.DataType.Float:return t.GetFloat(n,this.pos);case e.DataType.Double:return t.GetDouble(n,this.pos);case e.DataType.Int32:return t.GetInt32(n,this.pos);case e.DataType.BCD:case e.DataType.DeltaBCD:return t.GetBCD(n,this.pos,this.len);case e.DataType.Int64:case e.DataType.NullWithoutData:return 0}return parseInt(t.GetString(n,this.pos,this.len))},n.prototype.SignedInt=function(n){switch(void 0===n&&(n=null),this.buf&&(n=this.buf),this.dataType){case e.DataType.IdsInt:case e.DataType.DeltaIdsInt:return t.GetSignedInt(n,this.pos,this.len);case e.DataType.Int32:return t.GetSignedInt32(n,this.pos)}return parseInt(t.GetString(n,this.pos,this.len))},n.prototype.Decimal=function(n){switch(void 0===n&&(n=null),this.buf&&(n=this.buf),this.dataType){case e.DataType.IdsInt:case e.DataType.DeltaIdsInt:return t.GetInt(n,this.pos,this.len);case e.DataType.Float:return t.GetFloat(n,this.pos);case e.DataType.Double:return t.GetDouble(n,this.pos);case e.DataType.Int32:return t.GetInt32(n,this.pos);case e.DataType.BCD:case e.DataType.DeltaBCD:return t.GetBCD(n,this.pos,this.len);case e.DataType.Int64:case e.DataType.NullWithoutData:return 0}return parseFloat(t.GetString(n,this.pos,this.len))},n}();e.Tag=n;var i=function(e){this.dataType=0,this.access=0,this.tag=e};e.TemplTag=i;var r=function(){function e(e){this.isStatic=!1,this.tag=new i(e)}return e.prototype.SetData=function(e,t){this.tag.staticData=new Uint8Array(e.len);for(var n=e.pos;n<e.pos+e.len;+n++)this.tag.staticData[n-e.pos]=t[n]},e}();e.TemplateField=r;var a=function(){this.isTrade=!1,this.isNOII=!1,this.fields=[]};e.Template=a;var s,o=function(){function e(){this.t=[]}return e.prototype.Find=function(e){return e<0||this.t.length<e?null:this.t[e]},e.prototype.Add=function(e,t){e<0||(this.t.length<=e&&(this.t.length=e+1),this.t[e]=t)},e}();e.TemplateStorage=o,function(e){e[e.RealtimeTagSet=1]="RealtimeTagSet",e[e.WithoutHeader=2]="WithoutHeader",e[e.SkipHeader=4]="SkipHeader"}(s=e.ParserFlags||(e.ParserFlags={}));var l=function(){this.tagCounter=0,this.templPos=0},c=function(){function o(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=null),this.tagSet=null,this.Initialize(e,t,n,i)}return o.prototype.Initialize=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=null),this.pos=e,this.lastPos=t,this.startPos=e,this.flags=n,i&&(this.templInfo=new l,this.templInfo.rtStorage=i),this.inHeader=!0,n&s.WithoutHeader&&(this.inHeader=!1)},o.prototype.AssignTemplateStorage=function(e){var t=this.templInfo;t||(t=this.templInfo=new l),t.rtStorage=e,this.flags|=s.RealtimeTagSet},o.prototype.SetBuffer=function(e){this.templInfo=null,this.Initialize(0,e.length)},o.prototype.DataLen=function(){return this.lastPos-this.startPos},o.prototype.DuplicateData=function(e){for(var t=new Uint8Array(this.DataLen()),n=this.startPos;n<this.lastPos;n++)t[n-this.startPos]=e[n];return t},o.prototype.DuplicateDataOnly=function(e){for(var t=new Uint8Array(this.lastPos-this.headerEndPos),n=this.headerEndPos;n<this.lastPos;n++)t[n-this.headerEndPos]=e[n];return t},o.prototype.SetHeaderEnd=function(){},o.prototype.SkipHeader=function(t){if((this.flags&s.WithoutHeader)!=s.WithoutHeader){for(var i=new n;this.Next(t,i,null)&&i.tag!=e.HeaderTags.End;);this.headerEndPos=this.pos}},o.prototype.Next=function(n,r,a){if(this.tagSet=a,isNaN(this.pos))return!1;if(this.pos>=this.lastPos){if((o=this.templInfo)&&o.hTemplTags){if(o.hTagsBeforeTempl&&o.hTagsBeforeTempl>o.tagCounter)return!1;if(o.templPos==o.hTemplTags.length)return r.tag=e.RealtimeTags.Separator,r.dataType=e.DataType.NullWithoutData,r.pos=0,r.access=0,o.templPos++,!0}return!1}var o;if(r.access=0,(o=this.templInfo)&&(o.hTemplTags||o.rtTempl)){if(o.hTagsBeforeTempl<=o.tagCounter||o.rtTempl)return this.NextTemplate(n,r);this.inHeader||o.tagCounter++}var c,d=255==n[this.pos];switch(d&&this.pos++,c=t.GetLen(n,this.pos),r.tag=t.GetInt(n,this.pos,c),this.pos+=c,d&&(c=t.GetLen(n,this.pos),r.access=t.GetInt(n,this.pos,c),this.pos+=c),c=t.GetLen(n,this.pos),r.dataType=t.GetInt(n,this.pos,c),this.pos+=c,r.pos=this.pos,r.buf=n,r.dataType){case e.DataType.IdsInt:case e.DataType.DeltaIdsInt:r.len=t.GetLen(n,this.pos);break;case e.DataType.Float:r.len=4;break;case e.DataType.Double:r.len=8;break;case e.DataType.Int32:r.len=4;break;case e.DataType.BCD:case e.DataType.DeltaBCD:r.len=1+((n[this.pos]>>4)/2>>0);break;case e.DataType.Int64:this.pos++,r.pos++,r.len=8;break;default:var u;if(u=t.GetLen(n,this.pos),r.len=t.GetInt(n,this.pos,u),isNaN(r.len))return!1;if(c+this.pos>this.lastPos+1)return!1;this.pos+=u,r.pos+=u}if(this.pos+=r.len,this.inHeader)switch(r.tag){case e.HeaderTags.End:this.inHeader=!1,this.headerEndPos=this.pos;break;case e.HeaderTags.TemplStartTags:return o||(o=this.templInfo=new l),o.hTagsBeforeTempl=r.Int(n),this.Next(n,r,a);case e.HeaderTags.TemplTag:return o||(o=this.templInfo=new l),o.hTemplTags||(o.hTemplTags=[]),o.hTemplTags.push(new i(r.Int(n))),this.Next(n,r,a);case e.HeaderTags.TemplDataType:if(!o||!o.hTemplTags||!o.hTemplTags.length)break;return o.hTemplTags[o.hTemplTags.length-1].dataType=r.Int(n),this.Next(n,r,a);case e.HeaderTags.TemplAccess:if(!o||!o.hTemplTags||!o.hTemplTags.length)break;return o.hTemplTags[o.hTemplTags.length-1].access=r.Int(n),this.Next(n,r,a)}else if(this.flags&s.RealtimeTagSet&&this.templInfo&&this.templInfo.rtStorage)switch(r.tag){case e.TemplateSetup.Number:return this.ParseTemplate(n,r);case e.RealtimeTags.TemplateNu:if(!o)return e.log("Template number received, but no template storage"),!1;var h=r.Int(n);return h<0||h>=o.rtStorage.t.length?(e.log("Stream contains illegal template: ",h.toString()," max=",o.rtStorage.t.length.toString()),!1):(o.rtTempl=o.rtStorage.t[h],this.Next(n,r,a));case e.RealtimeTags.TemplatePMap:return this.Next(n,r,a);case e.RealtimeTags.RepeatedTemplates:return o?(o.rtNuRepeats=r.Int(n),this.Next(n,r,a)):(e.log("No template storage"),!1)}return e.DEBUG_CONFIG_ALL_TAGS&&e.logToConsole(a,r,n),!0},o.prototype.NextTemplate=function(n,i){var r=this.templInfo;if(r.hTemplTags){if(r.templPos==r.hTemplTags.length)return i.tag=e.RealtimeTags.Separator,i.dataType=e.DataType.NullWithoutData,i.pos=0,i.access=0,r.templPos++,!0;r.templPos>r.hTemplTags.length&&(r.templPos=0),i.tag=r.hTemplTags[r.templPos].tag,i.dataType=r.hTemplTags[r.templPos].dataType,i.access=r.hTemplTags[r.templPos].access,r.templPos++}if(r.rtTempl){var a=r.rtTempl.fields[r.templPos];if(i.tag=a.tag.tag,i.dataType=a.tag.dataType,i.access=a.tag.access,a.isStatic&&(i.len=a.tag.staticData.length,i.buf=a.tag.staticData,i.pos=0),r.templPos++,r.templPos==r.rtTempl.fields.length&&(r.rtNuRepeats--,r.templPos=0,0==r.rtNuRepeats&&(r.rtTempl=null)),a.isStatic)return!0}switch(i.pos=this.pos,i.buf=n,i.dataType){case e.DataType.DeltaIdsInt:case e.DataType.IdsInt:i.len=t.GetLen(n,this.pos);break;case e.DataType.Float:i.len=4;break;case e.DataType.Double:i.len=8;break;case e.DataType.Int32:i.len=4;break;case e.DataType.BCD:case e.DataType.DeltaBCD:i.len=1+((n[this.pos]>>4)/2>>0);break;case e.DataType.Int64:this.pos++,i.pos++,i.len=8;break;default:var s;if(s=t.GetLen(n,this.pos),i.len=t.GetInt(n,this.pos,s),isNaN(i.len))return!1;if(s+this.pos>this.lastPos+1)return!1;this.pos+=s,i.pos+=s}return this.pos+=i.len,!0},o.prototype.ParseTemplate=function(n,i){var s=this.templInfo;if(!s||!s.rtStorage)return e.log("Template number received, but no template storage"),!1;var o=i.Int(n);if(o<0)return e.log("Negative template number"),!1;o>=s.rtStorage.t.length&&(s.rtStorage.t.length=o+1);for(var l=s.rtStorage.t[o]=new a,c=null;this.Next(n,i,this.tagSet);)switch(i.tag){case e.TemplateSetup.Number:return this.ParseTemplate(n,i);case e.TemplateSetup.Tag:c=new r(i.Int(n)),l.fields.push(c);break;case e.TemplateSetup.StaticData:if(c&&(c.SetData(i,n),c.tag.tag==e.RealtimeTags.Type))switch(t.GetInt(n,this.pos,t.GetLen(n,this.pos))){case e.RealtimeType.AuctionEquilibrium:l.isNOII=!0;break;case e.RealtimeType.Trade:l.isTrade=!0}break;case e.TemplateSetup.DataType:c&&(c.tag.dataType=i.Int(n));break;case e.RealtimeTags.Separator:return this.Next(n,i,this.tagSet)}return!1},o.prototype.Restart=function(e){this.pos=this.startPos;var t=this.templInfo;t&&(t.tagCounter=0,t.templPos=0,t.rtTempl&&(t.rtTempl=null),t.rtNuRepeats&&(t.rtNuRepeats=0)),this.SkipHeader(e)},o.prototype.SetPos=function(e){this.pos=e},o}();e.Parser=c;var d=function(){function n(e,t){if(void 0===e&&(e=0),void 0===t&&(t=null),this.resendable=!1,this.uniqueId=e,t){this.buf=new Uint8Array(t.pos),this.pos=t.pos,this.uniqueId=t.uniqueId,this.tagSet=t.tagSet,this.tagSetTags=t.tagSetTags;for(var n=0;n<t.pos;n++)this.buf[n]=t.buf[n];this.resendable=t.resendable}else this.buf=new Uint8Array(8192),this.pos=4}return n.prototype.IsDecimal=function(e){return e<0||e>>0!=e},n.prototype.AddRaw=function(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e[t]},n.prototype.Add=function(e,t){if(void 0!==t)if("string"!=typeof t)if("number"!=typeof t){if(t instanceof Array)for(var n=0,i=t;n<i.length;n++){var r=i[n];"string"==typeof r?this.AddString(e,r):"number"==typeof r&&(this.IsDecimal(r)?this.AddBCD(e,r):this.AddInt(e,r))}}else this.IsDecimal(t)?this.AddBCD(e,t):this.AddInt(e,t);else this.AddString(e,t)},n.prototype.AddSeparator=function(){this.AddInt(e.RealtimeTags.Separator,0)},n.prototype.AddInt=function(n,i){null!=i&&(this.pos+=t.AddInt(this.buf,this.pos,n),this.pos+=t.AddInt(this.buf,this.pos,e.DataType.IdsInt),this.pos+=t.AddInt(this.buf,this.pos,i))},n.prototype.AddString=function(n,i){null!=i&&(this.pos+=t.AddInt(this.buf,this.pos,n),this.pos+=t.AddInt(this.buf,this.pos,e.DataType.String),this.pos+=t.AddString(this.buf,this.pos,i))},n.prototype.AddBinary=function(n,i,r,a){null!=i&&(this.pos+=t.AddInt(this.buf,this.pos,n),this.pos+=t.AddInt(this.buf,this.pos,e.DataType.Binary),this.pos+=t.AddBinary(this.buf,this.pos,i,r,a))},n.prototype.AddBCD=function(n,i){null!=i&&(this.pos+=t.AddInt(this.buf,this.pos,n),this.pos+=t.AddInt(this.buf,this.pos,e.DataType.BCD),this.pos+=t.AddBCD(this.buf,this.pos,i))},n.prototype.CheckSendSegmentedRequest=function(e,t){if(this.pos+256>8e3){var n=this.Send(e);return this.pos=t,n}return!0},n.prototype.readyStateToStr=function(e){switch(e){case 0:return"CONNECTING";case 1:return"OPEN";case 2:return"CLOSING";case 3:return"CLOSED"}},n.prototype.Send=function(n){if(null===n)return!1;if(1===n.ws.readyState){var i;if(t.AddInt32(this.buf,0,this.pos-4),this.pos==this.buf.length)i=this.buf;else{i=new Uint8Array(this.pos);for(var r=0;r<this.pos;r++)i[r]=this.buf[r]}try{(e.DEBUG_REQUESTS||e.DEBUG_CONFIG_ALL_TAGS)&&e.logRequestToConsole(this.tagSet,this.tagSetTags,i),n.ws.send(i)}catch(t){return e.log(t),!1}return!0}return e.DEBUG_WEBSOCKET&&e.log("Websocket readyState:",this.readyStateToStr(n.ws.readyState)),!1},n}();e.Maker=d}(IDS||(IDS={})),function(e){!function(e){var t=function(){this.unbind=null};e.Unbind=t;var n=function(){function e(e){this.refCount=0,this.cb=e}return e.prototype.AddRef=function(){return++this.refCount,1===this.refCount},e.prototype.DelRef=function(){return--this.refCount,0===this.refCount},e}();e.CallbackHandlerItem=n;var i=function(){function e(e){void 0===e&&(e=!0),this.singleRef=!0,this.singleRef=e}return e.prototype.find=function(e){if(this.cb)for(var t=0,n=this.cb;t<n.length;t++){var i=n[t];if(i.cb==e)return i}return null},e.prototype.bind=function(e){this.cb||(this.cb=[]);var t=this.find(e);return!(!t||!this.singleRef)||(t&&!this.singleRef?t.AddRef():this.cb.push(new n(e)),null==t)},e.prototype.unbind=function(e){if(!this.cb)return!0;for(var t=0;t<this.cb.length;t++)if(this.cb[t].cb==e)return this.singleRef||this.cb[t].DelRef()?(this.cb.splice(t,1),0==this.cb.length):0==this.cb.length;return 0==this.cb.length},e}();e.CallbackHandler=i}(e.API||(e.API={}))}(IDS||(IDS={})),function(e){var t,n,i,r,a,s,o=Infront.Instrument;t=e.API||(e.API={}),n=t.News||(t.News={}),i=function(e){function t(t){var n=e.call(this)||this;return n.headlines={},n.pendingItemsRequested=0,n.hasDownloadedAll=!1,n.hasSubscription=!1,n.date=new Date(0),n.feed=t,n}return __extends(t,e),t}(t.CallbackHandler),r=function(e){function t(){var t=e.call(this)||this;return t.pending=!1,t.headlines={},t.date=new Date(0),t}return __extends(t,e),t}(t.CallbackHandler),a=function(){function e(){this.symbolCacheItems={}}return e.prototype.hasSymbol=function(e){return null!=this.symbolCacheItems[e]},e}(),s=function(){function n(t,n){if(void 0===n&&(n=""),this.realtime={},this.feedCache={},this.symbolCache={},this.binds=[],this.feedCallbacks={},this.isNewsServer=!0,this.serverPool=t,!this.pidSids){this.pidSids=this.serverPool.login.getPidSids(e.ServiceType.News);for(var i=0,r=this.pidSids;i<r.length;i++){var a=r[i];this.realtime[a.Index()]=this.serverPool.GetRealtime(a,this,!0,n)}}for(var s in this.realtime)this.realtime[s].observe(this)}return n.prototype.doneRealtime=function(t){void 0===t&&(t="News.doneRealtime");for(var n=0,i=this.pidSids;n<i.length;n++){var r=i[n];this.serverPool.Dispose(r,e.ServerType.Realtime,this,t)}},n.prototype.bind=function(e){var t=this,n=function(){};if(-1!=this.binds.indexOf(e))return n;if(0==this.binds.length)for(var i in this.realtime)this.realtime[i].observe(this);return this.binds.push(e),function(){var n=t.binds.indexOf(e);if(-1!=n&&(t.binds.splice(n,1),0==t.binds.length)){for(var i in t.realtime)t.realtime[i].unbind(t);t.feedCache={},t.symbolCache={}}}},n.prototype.getSymbolCache=function(e){var t=this.symbolCache[e.feed];t||(t=this.symbolCache[e.feed]=new a);var n=t.symbolCacheItems[e.ticker];return n||(n=t.symbolCacheItems[e.ticker]=new r),n},n.prototype.SubscribeSymbols=function(e,t){var n=this,i=null;if(e.length>0){for(var r=[],a=0,s=e;a<s.length;a++){var l=s[a];r.push(new o(9,l.toString(":")))}for(var c in this.realtime)this.realtime[c].conn.SubscribeSymbols(r);var d=this.bind(this);i=function(){for(var e in n.realtime)n.realtime[e].conn.UnsubscribeSymbols(r);d()}}for(var u=0,h=e;u<h.length;u++)l=h[u],this.getSymbolCache(l).bind(t);return i},n.prototype.GetSymbolHeadlines=function(e,t,n,i){var r=this,a=null,s=[];if(0==this.pidSids.length)return a;if(i){for(var l=0,c=e.symbols;l<c.length;l++){var d=c[l];s.push(new o(9,d.toString(":")))}for(var u in this.realtime)s.length>0&&this.realtime[u].conn.SubscribeSymbols(s);if(0==e.symbols.length)return a}for(var h=0,p=e.symbols;h<p.length;h++){d=p[h];var m=this.getSymbolCache(d);n&&m.bind(n)}for(var u in this.realtime)this.realtime[u].GetHeadlines(e,t);return function(){for(var e in r.realtime)s.length>0&&r.realtime[e].conn.UnsubscribeSymbols(s)}},n.prototype.SubscribeFeeds=function(e,t){for(var n=this,r=[],a=0,s=e;a<s.length;a++){var o=s[a],l=this.serverPool.login.getWrappedFeeds(o);if(0!==l.length)for(var c=0,d=l;c<d.length;c++){var u=d[c];-1==e.indexOf(u)&&e.push(u)}}for(var h=0,p=e;h<p.length;h++){o=p[h];var m=this.feedCache[o];m||(m=this.feedCache[o]=new i(o)),m.hasSubscription=!0,m.bind(t)&&r.push(o)}for(var g in this.realtime){var f=this.realtime[g];f&&f.conn.SubscribeFeeds(e)}return function(){if(r.length>0){for(var i in n.realtime){var a=n.realtime[i];a&&a.conn.UnsubscribeFeeds(e)}for(var s=0,o=r;s<o.length;s++){var l=o[s],c=n.feedCache[l];c&&(c.hasDownloadedAll=!1,c.hasSubscription=!1,c.unbind(t))}}}},n.prototype.GetFeedsHeadlines=function(n,r,a,s){for(var o=this,l=null,c=0,d=n.feeds;c<d.length;c++){var u=d[c],h=this.serverPool.login.getWrappedFeeds(u);if(0!==h.length)for(var p=0,m=h;p<m.length;p++){var g=m[p];-1==n.feeds.indexOf(g)&&n.feeds.push(g)}}for(var f=[],v=[],y=[],b={ResponseHeadline:function(e,t){var i=[];if(1==n.feeds.length&&o.feedCallbacks[n.feeds[0]]){for(var a=n.feeds[0],s=0,l=o.feedCallbacks[a];s<l.length;s++){var c=l[s];c&&i.indexOf(c)<0&&(i.push(c),c.ResponseHeadline(e,t))}delete o.feedCallbacks[a]}else r&&r.ResponseHeadline(e,t)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}},T=0,S=n.feeds;T<S.length;T++){u=S[T];var C=!1;(D=this.feedCache[u])||(D=this.feedCache[u]=new i(u)),1==n.feeds.length&&(D.pendingItemsRequested>=Math.abs(n.maxItems)&&(C=!0),this.feedCallbacks[u]?this.feedCallbacks[u].push(r):this.feedCallbacks[u]=[r]),C||(f.push(u),1==n.feeds.length&&(D.pendingItemsRequested=Math.abs(n.maxItems)),s&&D.bind(a)&&y.push(u))}if(y.length>0&&((l=new t.Unbind).feeds=y,l.unbind=function(){for(var e=0,t=y;e<t.length;e++){var n=t[e],i=o.feedCache[n];i&&i.unbind(a)}}),f.length>0)for(var I in this.realtime){var _=this.realtime[I];if(_){var M=new e.Realtime.HeadlineRequestParams;M.feeds=f,M.date=n.date,M.limitDate=n.limitDate,M.maxItems=n.maxItems,M.newsIdHint=n.newsIdHint,M.symbols=n.symbols,_.GetHeadlines(M,b,!1)}}if(v.length>0){for(var E=[],w=0,A=v;w<A.length;w++){var D;if(u=A[w],D=this.feedCache[u])for(var O in D.headlines)E.push(D.headlines[O])}E.length&&(r&&r.ResponseHeadline(new e.ResponseHeader,E),a&&a.OnNewsHeadlineMulti(E))}return l},n.prototype.GetStory=function(t,n,i,r){void 0===r&&(r=!1);var a=this.serverPool.login.getPidSid(t.news_feed,e.ServiceType.News);if(null!=a){var s=this.serverPool.GetRealtime(a,this,!0);if(s){var o=t.news_id;o&&""!=o||(o=t.streamingId),s.GetNewsStory(t.news_feed,o,n,null,i,r),this.serverPool.Dispose(s.ps,e.ServerType.Realtime,this)}}},n.prototype.ResponseHeadline=function(t,n){this.OnRealtimeHeadline(new e.Header,n.items,!0)},n.prototype.OnRealtimeHeadline=function(e,t,n){void 0===n&&(n=!1);for(var i=0,r=t;i<r.length;i++){var a=r[i],s=this.feedCache[a.news_feed];if(s&&(a.isUpdated=null!=s[a.news_id],s[a.news_id]=a,n&&(s.pendingItemsRequested=0,s.hasDownloadedAll=!0),InfrontUtil.DateToInt(a.dateTime)>InfrontUtil.DateToInt(s.date)&&(s.date=a.dateTime),s.cb&&!n))for(var o=0,l=s.cb;o<l.length;o++)l[o].cb.OnNewsHeadline(a);for(var c=0,d=a.symbols;c<d.length;c++){var u=d[c],h=this.symbolCache[u.feed];if(h){var p=h.symbolCacheItems[u.ticker];if(p&&(p.date.getTime()<a.dateTime.getTime()&&p.date.setTime(a.dateTime.getTime()),p.pending=!1,a.isUpdated=null!=p.headlines[a.news_id],p.headlines[a.news_id]=a,p.cb&&!n&&a.isUpdated))for(var m=0,g=p.cb;m<g.length;m++)g[m].cb.OnNewsHeadline(a)}}}},n.prototype.clearPending=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],r=this.feedCache[i];r&&(r.pendingItemsRequested=0)}},n.prototype.OnRealtimeResetFeed=function(e,t){var n=this.feedCache[e];if(n){for(var i in n.headlines)for(var r=0,a=n.headlines[i].symbols;r<a.length;r++){var s=a[r],o=this.symbolCache[s.feed];if(o){var l=o.symbolCacheItems[s.ticker];l&&(l.headlines={},l.date.getTime()<t.getTime()&&l.date.setTime(t.getTime()))}}if(n.headlines={},n.date.setTime(t.getTime()),n.cb&&n.cb)for(var c=0,d=n.cb;c<d.length;c++)d[c].cb.OnNewsReset(e,t)}},n.prototype.ResponseError=function(t){e.DEBUG_NEWS&&e.log(t.errorMsg)},n}(),n.NewsManager=s}(IDS||(IDS={})),function(e){var t;(function(t){var n=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.subscribe=!0,this.feed=e,this.type=t};t.Scope=n;var i=function(){function t(e,t,n){this.serverPool=e,this.cb=n,this.ChangeScope(t)}return t.prototype.unbind=function(){this.unsubscribe&&this.unsubscribe(),this.rt&&(this.serverPool.Dispose(this.ps,e.ServerType.Realtime,this),this.rt=void 0),this.cb=void 0},t.prototype.ChangeScope=function(t){var n=this;this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.rt&&(this.rt.unbind(this),this.serverPool.Dispose(this.rt.ps,e.ServerType.Realtime,this),this.rt=void 0),this.scope=t;var i=this.serverPool.login.getPidSid(t.feed,e.ServiceType.Realtime);if(i||(i=this.serverPool.login.getPidSid(t.feed,e.ServiceType.Delayed)),!i)return!1;if(this.rt=this.serverPool.GetRealtime(i,this),!this.rt)return!1;this.rt.observe(this);var r=new e.CommonFrameworkResponse;r.Reply=function(e,t){n.cb.OnCSRanking(n.scope.type,t?t.items:[])},this.rt.GetRanking(t.feed,t.type,null,t.subscribe,r),this.unsubscribe=function(){return n.rt.UnsubRanking(t.feed,t.type)}},t.prototype.OnRealtimeRanking=function(e,t){this.cb.OnRTRanking(this.scope.type,t)},t.prototype.ResponseError=function(t){e.log("Ranking: "+t.errorMsg)},t.prototype.OnRefreshAll=function(e){this.ChangeScope(this.scope)},t}();t.RankingManager=i})((t=e.API||(e.API={})).Ranking||(t.Ranking={}))}(IDS||(IDS={})),function(e){var t=Infront.PidSid,n=Infront.Instrument,i=function(){function n(n){this.packets=0,this.server=new e.ServerConnection(new t(217,1),!1,this,[9],[n],e.TagSet.Realtime,null,e.ServerType.Unknown),this.server.monitorServerConnection=!0}return n.prototype.lowLevelData=function(e,t,n){this.packets++,document.getElementById("Packets").textContent=this.packets.toString()},n.prototype.lowLevelError=function(e,t,n){},n.prototype.lowLevelConnect=function(e,t){document.getElementById("Status").textContent="Connected"},n.prototype.lowLevelDisconnect=function(e,t){document.getElementById("Status").textContent="Disconnected"},n.prototype.lowLevelReRequestAll=function(e){},n}();e.MortenTest4=i;var r=function(){function n(){this.server=new e.ServerConnection(new t(16,0),!1,this,[],["127.0.0.1:12345"],0,null,e.ServerType.Unknown,!0,!0)}return n.prototype.lowLevelData=function(e,t,n){},n.prototype.lowLevelError=function(e,t,n){document.getElementById("table");var i=document.createElement("TR");i.setAttribute("id",n),document.getElementById("table").appendChild(i);var r=document.createElement("TD");r.appendChild(document.createTextNode(n)),document.getElementById(n).appendChild(r)},n.prototype.lowLevelConnect=function(e,t){},n.prototype.lowLevelDisconnect=function(e,t){},n.prototype.lowLevelReRequestAll=function(e){},n}();e.MortenTest3=r;var a=function(){function t(){this.testId="",this.testFwdId="",this.output=document.getElementById("output"),this.serverPool=new e.ServerPool,this.serverPool.RegisterEndLogin(this),this.serverPool.Start("mortendelayed","aaaa",!1)}return t.prototype.CreateTable=function(){this.table&&document.body.removeChild(this.table),this.table=document.createElement("TABLE"),this.table.setAttribute("id","news"),document.body.appendChild(this.table)},t.prototype.EndLogin=function(t,n,i){void 0===i&&(i="");var r=new e.API.Ranking.Scope;r.feed=17921,r.type=e.RankType.Increase,this.news=new e.API.News.NewsManager(this.serverPool),this.news.bind(this);var a=new e.Realtime.HeadlineRequestParams;a.feeds=[18031],this.news.GetFeedsHeadlines(a,this,null,!1)},t.prototype.writeToScreen=function(e){var t=document.createElement("TR");t.setAttribute("id",e),this.table.appendChild(t),document.getElementById("news").appendChild(t);var n=document.createElement("TD");n.appendChild(document.createTextNode(e)),document.getElementById(e).appendChild(n)},t.prototype.Request=function(t,i){var r=new e.Realtime.HeadlineRequestParams;r.date=t,r.symbols=[new n(18177,"STL")],r.maxItems=100,this.news.GetSymbolHeadlines(r,null,this,!0)},t.prototype.TestBack=function(){this.CreateTable(),this.testDate||(this.testDate=new Date,this.testDate.setHours(23,59,59)),this.writeToScreen("Req "+this.testDate.toISOString());var t=new e.Realtime.HeadlineRequestParams;t.date=this.testDate,t.maxItems=-10,t.newsIdHint=this.testId,t.symbols=[new n(18177,"STL")],this.news.GetSymbolHeadlines(t,null,this,!0),this.testFwdDate=null,this.testDate=null},t.prototype.TestForward=function(){this.CreateTable(),this.testFwdDate||(this.testFwdDate=new Date),this.writeToScreen("Req "+this.testFwdDate.toISOString());var t=new e.Realtime.HeadlineRequestParams;this.testFwdDate||(t.date=this.testFwdDate),t.maxItems=10,t.newsIdHint=this.testFwdId,t.symbols=[new n(18177,"STL")],this.news.GetSymbolHeadlines(t,null,this,!0),this.testFwdDate=null,this.testDate=null},t.prototype.OnRealtimeTrade=function(e,t){},t.prototype.OnRealtimeResetFeed=function(e,t){},t.prototype.OnRealtimeHeadline=function(e,t){},t.prototype.OnRealtimeRanking=function(e,t){},t.prototype.OnNewsHeadline=function(e){(!this.testDate||this.testDate>e.dateTime)&&(this.testDate=e.dateTime,this.testId=e.news_id),(!this.testFwdDate||this.testFwdDate<e.dateTime)&&(this.testFwdDate=e.dateTime,this.testFwdId=e.news_id),this.writeToScreen(e.news_feed.toString()+" "+e.dateTime.toISOString()+" "+e.headline+" "+e.news_id)},t.prototype.OnNewsHeadlineMulti=function(e){var t=this;e.forEach(function(e){t.OnNewsHeadline(e)})},t.prototype.OnNewsReset=function(e,t){},t.prototype.OnCSRanking=function(e,t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.OnRTRanking(e,r)}},t.prototype.OnRTRanking=function(t,n){switch(n.operation){case e.RankOperation.InsertOrUpdate:case e.RankOperation.Delete:case e.RankOperation.DeleteAll:}},t.prototype.ResponseHeadline=function(e,t){for(var n=0,i=t.items;n<i.length;n++)i[n]},t.prototype.ResponseError=function(e){},t}();e.MortenTest2=a}(IDS||(IDS={})),function(e){var t=Infront.FeedProperty,n=Infront.FeedList,i=Infront.OrderbookSide,r=Infront.MblLevel,a=Infront.MboOrder,s=Infront.Instrument,o=Infront.SymbolType;!function(l){var c=function(){function e(){this.symbols=[],this.feeds=[],this.maxItems=-100}return e.prototype.hasSymbols=function(){return this.symbols&&this.symbols.length>0},e.prototype.hasFeeds=function(){return this.feeds&&this.feeds.length>0},e}();l.HeadlineRequestParams=c;var d=function(){function t(){}return t.prototype.clear=function(){this.last=null,this.change=null,this.pct_change=null,this.turnover=null},t.prototype.saveToSymbolCache=function(t){t&&(this.last&&t.getValue(e.RealtimeTags.Last,!0).set(this.last),this.change&&t.getValue(e.RealtimeTags.Change,!0).set(this.change),this.pct_change&&t.getValue(e.RealtimeTags.ChangePct,!0).set(this.pct_change),this.turnover&&t.getValue(e.RealtimeTags.Turnover,!0).set(this.turnover))},t.prototype.ToMws=function(){return{instrument:this.instrument?this.instrument:null,type:this.type,operation:this.operation,last:this.last,change:this.change,pct_change:this.pct_change,turnover:this.turnover}},t}();l.Ranking=d;var u=function(){function e(){this.items=[]}return e.prototype.toMws=function(){for(var e=[],t=0,n=this.items;t<n.length;t++){var i=n[t];e.push(i.ToMws())}return e},e}();l.RankingResponse=u;var h=function(){function e(){this.items={}}return e.prototype.addPortfolioSymbolItem=function(e,t){this.items[e]||(this.items[e]=[]),s.isValid(t)&&this.items[e].push(t)},e}();l.FindPortfolioSymbolResponse=h;var p,m=function(){this.items=[]};l.SymbolDataResponse=m,function(e){e[e.TickByTick=1]="TickByTick",e[e.Minute=2]="Minute",e[e.Hour=3]="Hour",e[e.AccPrice=4]="AccPrice",e[e.PriceVolume=5]="PriceVolume",e[e.Second=6]="Second"}(p=l.TimeSeriesResolution||(l.TimeSeriesResolution={}));var g=function(){this.numberOfDays=1,this.resolution=p.TickByTick,this.tags=[]};l.TimeSeriesRequest=g;var f=function(){function e(){this.dateTime=new Date(0)}return e.prototype.ToMws=function(){this.time=this.dateTime.toISOString()},e}();l.TimeSeriesItem=f;var v=function(){function e(){this.newDayOffsets=[]}return e.prototype.ToMws=function(){this.instrument=new s(this.feed,this.symbol);var e="";if(this.items){this.newDayOffsets=[];for(var t=0;t<this.items.length;t++){var n=this.items[t];n.ToMws(),n.dateTime.toDateString()!=e&&(this.newDayOffsets.push(t),e=n.dateTime.toDateString())}}if(this.trades)for(e="",this.newDayOffsets=[],t=0;t<this.trades.length;t++){var i=this.trades[t];i.ToMws(),i.dateTime.toDateString()!=e&&(this.newDayOffsets.push(t),e=i.dateTime.toDateString())}},e}();l.TimeSeriesResponse=v;var y=function(e,t){this.feed=e,this.id=t};l.TickSizeRequestItem=y;var b=function(){this.items=[]};l.TickSizeRequest=b;var T=function(){function e(){this.items=[]}return e.prototype.updateBounds=function(){for(var e=0,t=0,n=this.items;t<n.length;t++){var i=n[t];i.lower_bound=e,e=i.upper_bound+i.size}},e}();l.TickSize=T;var S,C=function(){function e(){this.items=[]}return e.prototype.updateBounds=function(){for(var e=0,t=this.items;e<t.length;e++)t[e].updateBounds()},e}();l.TickSizeResponse=C,function(e){e[e.Modify=61]="Modify",e[e.Insert=62]="Insert",e[e.Delete=63]="Delete"}(S||(S={}));var I=function(){function t(){this.dateTime=new Date(0)}return t.prototype.Reset=function(){this.actualTradeDate=null,this.actualTradeTime=null,this.tradeId=null,this.seq_id=null},t.prototype.HasTrType=function(e){return(this.trTypeNu&e)===e},t.prototype.IsDeleted=function(){return this.tradeId&&(this.trTypeNu&e.TrTypeNu.Deleted)===e.TrTypeNu.Deleted},t.prototype.ToMws=function(){this.time=this.dateTime.toISOString()},t}();l.Trade=I;var _=function(){function e(){this.snapSymbols=[],this.snapFeeds=[],this.subSymbols=[],this.subFeeds=[]}return e.prototype.Add=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];t?this.subSymbols.push(r):-1===this.snapSymbols.indexOf(r)&&this.snapSymbols.push(r)}},e.prototype.AddFeed=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];t?this.subFeeds.push(r):-1===this.snapFeeds.indexOf(r)&&this.snapFeeds.push(r)}},e}(),M=function(l){function c(t,n,i){void 0===i&&(i=!1);var r=l.call(this,n,t,e.ServerType.Realtime)||this;return r.isNews=!1,r.feeds={},r.callbacks=[],r.requests={},r.pendingStaticSymbols=[],r.newsFeeds=[],r.tag=new e.Tag,r.subTag=new e.Tag,r.tickSizes={},r.subParser=new e.Parser(0,0),r.bypassStaticCache=!1,r.SeqIdMap={},i&&(r.newsFeeds=n.login.getAccessFeeds(t,o.News)),r.isNews=i,r.serviceInfo=r.serverPool.login.getServiceInfo(r.ps),r.conn=new e.ServerConnection(t,n.secure,r,n.login.getAccessFeeds(t),n.login.getHosts(t),r.tagSet,n,r.serverType),r}return __extends(c,l),c.prototype.destroyBase=function(){this.timerToken&&clearTimeout(this.timerToken),l.prototype.destroyBase.call(this)},c.prototype.observe=function(t){-1===this.callbacks.indexOf(t)&&this.callbacks.push(t),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"Realtime: observe. Total callbacks:",this.callbacks.length)},c.prototype.unbind=function(t){this.callbacks.splice(this.callbacks.indexOf(t),1),this.conn.UnsubscribeObject(t),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"Realtime: unbind. Total callbacks:",this.callbacks.length)},c.prototype.GetParser=function(e){return this.subParser.SetBuffer(e),this.subParser},c.prototype.GetDbFeed=function(e,t){void 0===t&&(t=!0);var n=this.feeds[e];return!n&&t&&(n=this.feeds[e]=this.serverPool.symbolDb.GetFeedDb(this.ps,e,!0))&&(n.ofsMins=this.serverPool.login.feedOffsetUtc(e,this.serviceInfo)),n},c.prototype.getDbSymbol=function(t,n,i){void 0===i&&(i=!0);var r,a=this.GetDbFeed(t,i);if(a&&!(r=a.syms[n])&&i){var o=this.serverPool.login.getFeed(this.ps,t),l=this.serverPool.login.feeds[t];r=a.syms[n]=new e.Symbol(this.ps,new s(t,n),o,l,a)}return r},c.prototype.GetTimeSeries=function(t,n,i){var r=e.RealtimeRequests.Trades;t.resolution&&t.resolution!=p.TickByTick&&(r=e.RealtimeRequests.Intraday);var a=this.conn.GetRequest(e.RealtimeRequests.Trades,0),s=this.requests[a.uniqueId]=new e.Request;s.type=r,s.callback=n,s.commonFramework=i,a.Add(e.RealtimeTags.Feed,t.instrument.feed),a.Add(e.RealtimeTags.Symbol,t.instrument.ticker),a.Add(e.RealtimeTags.TradeResolutionType,t.resolution),a.Add(e.RealtimeTags.TradeResolution,t.stepSize),a.Add(e.RealtimeTags.DaysBack,t.daysBack),a.Add(e.RealtimeTags.NumberOfDays,t.numberOfDays),a.Add(e.RealtimeTags.MaxChartLookupDays,t.maxLookupDays),t.startDate&&a.Add(e.RealtimeTags.StartDate,InfrontUtil.DateToInt(t.startDate)),t.endDate&&a.Add(e.RealtimeTags.StopDate,InfrontUtil.DateToInt(t.endDate)),t.limitNumberOfTrades>0?a.Add(e.RealtimeTags.TradesStart,t.limitNumberOfTrades):(a.Add(e.RealtimeTags.TradesStart,t.tradesStart),a.Add(e.RealtimeTags.TradesEnd,t.tradesEnd)),s.type!=e.RealtimeRequests.Trades||t.tags&&0!=t.tags.length||(t.tags.push(e.RealtimeTags.Last),t.tags.push(e.RealtimeTags.IncVolume),t.tags.push(e.RealtimeDateTime.TradeTime),t.tags.push(e.RealtimeTags.Buyer),t.tags.push(e.RealtimeTags.Seller),t.tags.push(e.RealtimeTags.Market),t.tags.push(e.RealtimeTags.SourceSeqnu),t.tags.push(e.RealtimeTags.TradeId),t.tags.push(e.RealtimeTags.TrTypeNu),t.tags.push(e.RealtimeTags.TrTypeStr),t.tags.push(e.RealtimeTags.FullMmt),t.tags.push(e.RealtimeTags.CompressedMmt)),a.Add(e.RealtimeTags.UseTag,t.tags),this.conn.Send(a,!0)},c.prototype.GetBrokerStats=function(t,n,i){if(!t.accumulate&&t.brokers&&t.symbols)e.log("Cannot specify both brokers and symbols");else{var r=e.RealtimeRequests.BrokerStat;t.symbols?r=e.RealtimeRequests.SymbolBrokerStat:t.brokers&&(r=e.RealtimeRequests.BrokerSymbolStat);var a=this.conn.GetRequest(r,0),s=this.requests[a.uniqueId]=new e.Request;s.callback=n,s.commonFramework=i,s.type=r,a.Add(e.RealtimeTags.Feed,t.feed),a.Add(e.RealtimeTags.Symbol,t.symbols),a.Add(e.BrokerStatTags.broker,t.brokers),t.accumulate&&a.Add(e.BrokerStatTags.accumulateFlag,1),a.AddInt(e.RealtimeTags.Separator,0),this.conn.Send(a,!0)}},c.prototype.GetHeadlines=function(t,n,i){var r=this;void 0===i&&(i=!1);var a=null;if(!this.isNews)return a;if(t.hasSymbols()){i&&(t.symbols&&(this.conn.SubscribeSymbols(t.symbols),a=function(){r.conn.UnsubscribeSymbols(t.symbols)}),t.feeds&&(this.conn.SubscribeFeeds(t.feeds),a=function(){r.conn.UnsubscribeFeeds(t.feeds)}));var s=this.conn.GetRequest(e.RealtimeRequests.Headlines,0),o=this.requests[s.uniqueId]=new e.Request;if(o.callback=n,o.type=e.RealtimeRequests.Headlines,t.symbols)for(var l=0,c=t.symbols;l<c.length;l++){var d=c[l];s.Add(e.NewsTags.SymbolFeed,d.feed),s.Add(e.NewsTags.Symbol,d.ticker),s.Add(e.RealtimeTags.Separator,0)}return t.date&&(s.Add(e.RealtimeTags.StartDate,InfrontUtil.DateToInt(t.date,!0)),s.Add(e.RealtimeTags.StartTime,InfrontUtil.TimeToInt(t.date,!0))),t.limitDate&&(s.Add(e.RealtimeTags.StopDate,InfrontUtil.DateToInt(t.limitDate,!0)),s.Add(e.RealtimeTags.StopTime,InfrontUtil.TimeToInt(t.limitDate,!0))),s.Add(e.RealtimeTags.MaxItems,t.maxItems),s.Add(e.NewsTags.Id,t.newsIdHint),this.conn.Send(s,!0),a}if(t.hasFeeds()){for(var u=0,h=t.feeds;u<h.length;u++){var p=h[u],m=this.serverPool.login.getPidSidFeeds(this.ps,p,16777215);if(1!=m.length)for(var g=1;g<length;g++)-1==t.feeds.indexOf(m[g])&&t.feeds.push(m[g])}if(i){this.conn.SubscribeFeeds(t.feeds);for(var f=0,v=t.feeds;f<v.length;f++)p=v[f],-1==this.newsFeeds.indexOf(p)&&this.newsFeeds.push(p);a=function(){r.conn.UnsubscribeFeeds(t.feeds)}}var y=this.conn.GetRequest(e.RealtimeRequests.Headlines,0),b=this.requests[y.uniqueId]=new e.Request;b.callback=n,b.type=e.RealtimeRequests.Headlines;for(var T=0,S=t.feeds;T<S.length;T++)p=S[T],y.AddInt(e.RealtimeTags.Feed,p),y.AddSeparator();t.date&&(y.Add(e.RealtimeTags.StartDate,InfrontUtil.DateToInt(t.date,!0)),y.Add(e.RealtimeTags.StartTime,InfrontUtil.TimeToInt(t.date,!0))),t.limitDate&&(y.Add(e.RealtimeTags.StopDate,InfrontUtil.DateToInt(t.limitDate,!0)),y.Add(e.RealtimeTags.StopTime,InfrontUtil.TimeToInt(t.limitDate,!0))),y.Add(e.RealtimeTags.MaxItems,t.maxItems),y.Add(e.NewsTags.Id,t.newsIdHint),this.conn.Send(y,!0)}return a},c.prototype.GetNewsStory=function(t,n,i,r,a,s){void 0===s&&(s=!1);var o=this.conn.GetRequest(e.RealtimeRequests.NewsStory,0),l=this.requests[o.uniqueId]=new e.Request;l.callback=r,l.commonFramework=a,l.type=e.RealtimeRequests.NewsStory,o.Add(e.RealtimeTags.Feed,t),o.Add(e.NewsTags.Id,n),o.Add(e.RealtimeTags.ClientTheme,i),s&&o.Add(e.NewsTags.Headline,1),this.conn.Send(o,!0)},c.prototype.getTickSizeKey=function(e,t){return e+"_"+t},c.prototype.GetTickSize=function(t,n){var i=this.conn.GetRequest(e.RealtimeRequests.TickSize,0),r=this.requests[i.uniqueId]=new e.Request;r.callback=n,r.type=e.RealtimeRequests.TickSize;for(var a=i.pos,s=0,o=t.items;s<o.length;s++){var l=o[s],c=this.tickSizes[this.getTickSizeKey(l.feed,l.id)];if(c){if(r.callback&&r.callback.ResponseTickSize){var d=new C;d.items.push(c),r.callback.ResponseTickSize(new e.ResponseHeader,d)}}else i.Add(e.RealtimeTags.Feed,l.feed),i.Add(e.TickSizeTags.Id,l.id),i.AddInt(e.RealtimeTags.Separator,0)}i.pos!=a&&this.conn.Send(i,!0)},c.prototype.GetFeeds=function(t,i,r){var a=this;void 0===r&&(r=!0);var s=[],o=[],l=new n;return t.forEach(function(n){var c=a.GetDbFeed(n,!0);if(r)for(var d=0,u=a.serverPool.login.getPidSidFeeds(a.ps,n,i.getFeedProperties());d<u.length;d++){var h=u[d];s.push(h)}var p=c.content&i.content;if(p!==i.content){var m=i.content^p;if(c.content|=i.content,c.pendingContent|=i.content,0!=m)for(var g=0,f=t=a.serverPool.login.getPidSidFeeds(a.ps,n,new e.SymbolContent(m).getFeedProperties());g<f.length;g++)n=f[g],o.push(n)}else c.pendingContent&e.SymbolContentEnum.Basic||l.addFeed(c)}),this.start||(this.start=new _),this.start.AddFeed(o,!1),this.start.AddFeed(s,!0),this.StartThrottleTimerIfNotRunning(),l},c.prototype.GetSymbols=function(t,n,i,r){var a=this;void 0===i&&(i=!0),void 0===r&&(r=!1);var o,l,c=[],d=[];t.forEach(function(t){var u=a.GetDbFeed(t.feed,!0),h=a.getDbSymbol(t.feed,t.ticker,!0);if(h.content|=u.content,i){t.feed!=o&&(l=a.serverPool.login.getPidSidFeeds(a.ps,t.feed,n.getFeedProperties()),o=t.feed);for(var p=0,m=l;p<m.length;p++){var g=m[p];c.push(new s(g,t.ticker))}}var f,v=n.getCommon(h.content);if(v!=n.content||r)if(0!=(f=r?n.content:n.getDiff(v))){e.DEBUG_SYMBOL_DATA_CONTENT&&e.log(a.ps.toStr(),h.fs.toString(),"Has:",e.SymbolContent.SymbolContentStr(v),"Need:",e.SymbolContent.SymbolContentStr(f),r?"- refresh":""),h.content|=n.content;for(var y=0,b=l=a.serverPool.login.getPidSidFeeds(a.ps,t.feed,new e.SymbolContent(f).getFeedProperties());y<b.length;y++)g=b[y],d.push(new s(g,t.ticker))}else e.DEBUG_SYMBOL_DATA_CONTENT&&e.log(a.ps.toStr(),h.fs.toString(),"Has:",e.SymbolContent.SymbolContentStr(v),"Need:",e.SymbolContent.SymbolContentStr(f),"- no new content");else h.CacheUpdated(!1)}),this.start||(this.start=new _),this.start.Add(c,!0),this.start.Add(d,!1),this.StartThrottleTimerIfNotRunning()},c.prototype.ChangeSymbols=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=null),this.GetSymbols(e,t,n),i&&i()},c.prototype.needStaticData=function(t){var n=this;return new Promise(function(i){n.serverPool.staticCache.LoadSymbolFromIxDb(t,function(t,n){var r=!1;switch(n){case e.StaticDataCacheEnum.ItemIsValid:t.content|=e.SymbolContentEnum.StaticData,t.hasStaticContent=!0,t.CacheUpdated();break;case e.StaticDataCacheEnum.CrcMismatch:case e.StaticDataCacheEnum.InvalidCacheItem:case e.StaticDataCacheEnum.ItemNotInCache:case e.StaticDataCacheEnum.SymbolCrcMissing:case e.StaticDataCacheEnum.CouldNotAccessCache:r=!0}i(r)})})},c.prototype.processPendingStaticSymbols=function(t){var n=this,i=[];if(this.pendingStaticSymbols){for(var r=[],a=function(e){r.push(s.needStaticData(e).then(function(t){t&&i.push(e.fs)}))},s=this,o=0,l=this.pendingStaticSymbols;o<l.length;o++)a(l[o]);Promise.all(r).then(function(){if(i.length>0){n.staticData||(n.staticData=new _),e.log("processPendingStaticSymbols",i.length);for(var r=0,a=i;r<a.length;r++){var s=a[r];t.StaticRequested(s)&&n.staticData.Add([s],!1)}n.StartThrottleTimerIfNotRunning()}else t.MWSDistRefData(),n.pendingStaticSymbols=[]})}},c.prototype.GetRanking=function(t,n,i,r,a){void 0===r&&(r=!0);var o=e.RankSymbols.rankTypeToStr(n);if(o){if(r){var l=new s(e.GetRankFeed(t),o);this.conn.SubscribeSymbols([l])}var c=this.conn.GetRequest(e.RealtimeRequests.Ranking,0);if(i||a){var d=this.requests[c.uniqueId]=new e.Request;d.callback=i,d.commonFramework=a,d.type=e.RealtimeRequests.Ranking}c.Add(e.RealtimeTags.Type,n),c.Add(e.RealtimeTags.Feed,t),c.Add(e.RealtimeTags.Symbol,o),this.conn.Send(c,!0)}},c.prototype.GetPortfolioSymbols=function(t,n,i,r){var a=this.conn.GetRequest(e.RealtimeRequests.FindPortfolioSymbols,0);a.tagSetTags=e.TagSet.OrderEntry;var s=this.requests[a.uniqueId]=new e.Request(e.RealtimeRequests.FindPortfolioSymbols);s.callback=i,s.commonFramework=r;for(var o=0,l=Object.keys(n);o<l.length;o++){var c=l[o],d=n[c];a.AddString(e.TradingTag.PositionNumber,c);var u=d.getValue(e.TradingTag.Feed);u&&a.AddInt(e.TradingTag.Feed,u);var h=d.getValue(e.TradingTag.Symbol);h&&a.AddString(e.TradingTag.Symbol,h);var p=d.getValue(e.TradingTag.ExchInstrId);p&&a.AddString(e.TradingTag.ExchInstrId,p);var m=d.getValue(e.TradingTag.InstrType);m&&a.AddString(e.TradingTag.InstrType,m);var g=d.getValue(e.TradingTag.InstrSubType);g&&a.AddString(e.TradingTag.InstrSubType,g);var f=d.getValue(e.TradingTag.Market);f&&a.AddString(e.TradingTag.Market,f);var v=d.getValue(e.TradingTag.Mic);v&&a.AddString(e.TradingTag.Mic,v);var y=d.getValue(e.TradingTag.Isin);y&&a.AddString(e.TradingTag.Isin,y);var b=d.getValue(e.TradingTag.Sedol);b&&a.AddString(e.TradingTag.Sedol,b);var T=d.getValue(e.TradingTag.BloombergTicker);T&&a.AddString(e.TradingTag.BloombergTicker,T);var S=d.getValue(e.TradingTag.BloombergGlobalId);S&&a.AddString(e.TradingTag.BloombergGlobalId,S);var C=d.getValue(e.TradingTag.BloombergGlobalIdComposite);C&&a.AddString(e.TradingTag.BloombergGlobalIdComposite,C);var I=d.getValue(e.TradingTag.Currency);I&&a.AddString(e.TradingTag.Currency,I);var _=d.getValue(e.TradingTag.StrikePrice);_&&a.AddString(e.TradingTag.StrikePrice,_);var M=d.getValue(e.TradingTag.ExpiryDate);M&&a.AddString(e.TradingTag.ExpiryDate,M);var E=d.getValue(e.TradingTag.Underlying);E&&a.AddString(e.TradingTag.Underlying,E);var w=d.getValue(e.TradingTag.UnderlyingFeed);w&&a.AddString(e.TradingTag.UnderlyingFeed,w);var A=d.getValue(e.TradingTag.UnderlyingBase);A&&a.AddString(e.TradingTag.UnderlyingBase,A);var D=d.getValue(e.TradingTag.UnderlyingIsin);D&&a.AddString(e.TradingTag.UnderlyingIsin,D),a.AddSeparator()}this.conn.Send(a,!0)},c.prototype.UnsubRanking=function(t,n){var i=e.RankSymbols.rankTypeToStr(n);if(i){var r=new s(e.GetRankFeed(t),i);this.conn.UnsubscribeSymbols([r])}},c.prototype.ResponseTimeSeries=function(t,n){var i,r,a,s=new v;n.type==e.RealtimeRequests.Trades?(s.trades=[],i=new I):(s.items=[],r=new f);for(var o=0;o<n.data.length;o++){var l=n.data[o].buf,c=this.GetParser(l);c.SkipHeader(l);for(var d=this.subTag,u=0;c.Next(l,d,this.tagSet);)switch(e.DEBUG_TRADES_CS_TAGS&&e.logToConsole(this.tagSet,d,l),d.tag){case e.RealtimeTags.Feed:s.feed=d.Int(l),u=this.serverPool.login.feedOffsetUtc(s.feed,this.serviceInfo);break;case e.RealtimeTags.Symbol:s.symbol=d.String(l);break;case e.RealtimeDateTime.Date:r&&InfrontUtil.DateNuToDate(d.Int(l),r.dateTime),i&&InfrontUtil.DateNuToDate(d.Int(l),i.dateTime);break;case e.RealtimeTags.TradesStart:s.startTrade=d.Int(l),a=s.startTrade;break;case e.RealtimeTags.TradesEnd:s.endTrade=d.Int(l);break;case e.RealtimeTags.TradeResolutionType:s.resolution=d.Int(l);break;case e.RealtimeTags.TradeResolution:s.stepSize=d.Int(l);break;case e.RealtimeTags.Type:break;case e.RealtimeTags.Last:i&&(i.last=d.Decimal(l)),r&&(r.last=d.Decimal(l));break;case e.RealtimeDateTime.TradeTime:i&&InfrontUtil.TimeNuToDate(this.serverPool.login.toUtc(s.feed,d.Int(l),this.serviceInfo),i.dateTime,u),r&&InfrontUtil.TimeNuToDate(this.serverPool.login.toUtc(s.feed,d.Int(l),this.serviceInfo),r.dateTime,u);break;case e.RealtimeDateTime.MsTime:i&&i.dateTime.setUTCMilliseconds(d.Int(l));break;case e.RealtimeDateTime.UsTime:break;case e.RealtimeTags.AcVolume:i&&(i.accumulatedVolume=d.Decimal(l)),r&&(r.volume=d.Decimal(l));break;case e.RealtimeTags.IncVolume:i&&(i.volume=d.Decimal(l)),r&&(r.volume=d.Decimal(l));break;case e.RealtimeTags.Market:i&&(i.market=d.String(l));break;case e.RealtimeTags.SourceSeqnu:i&&(i.seq_id=d.Int(l));break;case e.RealtimeTags.TradeId:i&&(i.tradeId=d.String(l));break;case e.RealtimeTags.Buyer:i&&(i.buyer=d.String(l));break;case e.RealtimeTags.Seller:i&&(i.seller=d.String(l));break;case e.RealtimeTags.TrTypeNu:i&&(i.trTypeNu=d.Int(l));break;case e.RealtimeTags.TrTypeStr:i&&(i.trTypeStr=d.String(l));break;case e.RealtimeTags.HitterTaker:i&&(i.hitterTaker=d.Int(l));break;case e.RealtimeDateTime.ActualTradeDate:i&&(i.actualTradeDate=d.Int(l));break;case e.RealtimeDateTime.ActualTradeTime:i&&(i.actualTradeTime=this.serverPool.login.toUtc(s.feed,d.Int(l),this.serviceInfo));break;case e.RealtimeTags.Open:r&&(r.open=d.Decimal(l));break;case e.RealtimeTags.High:r&&(r.high=d.Decimal(l));break;case e.RealtimeTags.Low:r&&(r.low=d.Decimal(l));break;case e.RealtimeTags.Turnover:r&&(r.turnover=d.Decimal(l));break;case e.RealtimeTags.Yield:r&&(r.yield=d.Decimal(l));break;case e.RealtimeTags.FullMmt:if(!i)break;i.mmt=d.String(l),i.esma=e.MakeEsma(i.mmt);break;case e.RealtimeTags.CompressedMmt:if(!i)break;i.mmt=e.MakeMmt(d.Int(l)),i.esma=e.MakeEsma(i.mmt);break;case e.RealtimeTags.IndicTrade:r&&(r.indicTrade=d.Decimal(l));break;case e.RealtimeTags.IndicIncVol:r&&(r.indicIncVol=d.Decimal(l));break;case e.RealtimeTags.IndicHigh:r&&(r.indicHigh=d.Decimal(l));break;case e.RealtimeTags.IndicLow:r&&(r.indicLow=d.Decimal(l));break;case e.RealtimeTags.Nms:r&&(r.nms=d.Decimal(l));break;case e.RealtimeTags.IndicOpen:r&&(r.indicOpen=d.Decimal(l));break;case e.RealtimeTags.IndicOpenVol:r&&(r.indicOpenVol=d.Decimal(l));break;case e.RealtimeTags.OnExchVolume:r&&(r.onFloorVolume=d.Decimal(l));break;case e.RealtimeTags.Separator:if(i){var h=s.symbol+":"+s.feed;a?(a+=1,this.SeqIdMap[h]=a,i.seq_id=a,a=null):i.seq_id=this.GetSequenceId(h);var p=i.dateTime;s.trades.push(i),(i=new I).dateTime.setTime(p.getTime())}if(r){var m=s.items[s.items.length-1];if(m&&(0===r.open&&(r.open=m.open),0===r.last&&(r.last=m.last),0===r.high&&(r.high=Math.max(r.open,r.last)),0===r.low&&(r.low=Math.min(r.open,r.last))),!r.last)continue;p=r.dateTime,s.items.push(r),(r=new f).dateTime.setTime(p.getTime())}break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,d.tag),d.String(l))}}r&&r.time&&s.items.push(r),i&&i.time&&s.trades.push(i),e.DEBUG_TRADES_CS&&e.log(this.ps.toStr(),e.requestToStr(this.tagSet,t.request),s),n.callback&&n.callback.ResponseTimeSeries&&n.callback.ResponseTimeSeries(new e.ResponseHeader,s),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,s)},c.prototype.ResponseBrokerStats=function(t,n){for(var i=new e.BrokerStatResponse,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=this.GetParser(a);s.SkipHeader(a);for(var o=this.subTag,l=new e.BrokerStatItem,c=-1;s.Next(a,o,this.tagSet);)switch(e.DEBUG_BROKER_STATS_CS_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case e.RealtimeTags.Feed:i.feed=o.Int(a),l.feed=i.feed,c=this.serverPool.login.feedOffsetUtc(i.feed,this.serviceInfo);break;case e.RealtimeTags.Symbol:l.symbol=o.String(a);break;case e.RealtimeDateTime.Date:InfrontUtil.DateNuToDate(o.Int(a),l.dateTime);break;case e.RealtimeDateTime.TradeTime:InfrontUtil.TimeNuToDate(this.serverPool.login.toUtc(i.feed,o.Int(a),this.serviceInfo),l.dateTime,c);break;case e.RealtimeTags.StartDate:case e.RealtimeTags.StopDate:break;case e.BrokerStatTags.broker:l.name=o.String(a);break;case e.BrokerStatTags.descr:break;case e.BrokerStatTags.nuBuys:l.buy.num=o.Int(a);break;case e.BrokerStatTags.buyVolume:l.buy.volume=o.Decimal(a);break;case e.BrokerStatTags.buyTurnover:l.buy.turnover=o.Decimal(a);break;case e.BrokerStatTags.nuSells:l.sell.num=o.Int(a);break;case e.BrokerStatTags.sellVolume:l.sell.volume=o.Decimal(a);break;case e.BrokerStatTags.sellTurnover:l.sell.turnover=o.Decimal(a);break;case e.BrokerStatTags.nuInternal:l.internal.num=o.Int(a);break;case e.BrokerStatTags.intVolume:l.internal.volume=o.Decimal(a);break;case e.BrokerStatTags.intTurnover:l.internal.turnover=o.Decimal(a);break;case e.BrokerStatTags.openBuy:case e.BrokerStatTags.highBuy:case e.BrokerStatTags.lowBuy:case e.BrokerStatTags.lastBuy:case e.BrokerStatTags.openSell:case e.BrokerStatTags.highSell:case e.BrokerStatTags.lowSell:case e.BrokerStatTags.lastSell:case e.BrokerStatTags.openInt:case e.BrokerStatTags.highInt:case e.BrokerStatTags.lowInt:case e.BrokerStatTags.lastInt:break;case e.BrokerStatTags.nuHitBid:l.aggressiveSell.num=o.Int(a);break;case e.BrokerStatTags.hitBidVolume:l.aggressiveSell.volume=o.Decimal(a);break;case e.BrokerStatTags.hitBidTurnover:l.aggressiveSell.turnover=o.Decimal(a);break;case e.BrokerStatTags.nuHitAsk:l.aggressiveBuy.num=o.Int(a);break;case e.BrokerStatTags.hitAskVolume:l.aggressiveBuy.volume=o.Decimal(a);break;case e.BrokerStatTags.hitAskTurnover:l.aggressiveBuy.turnover=o.Decimal(a);break;case e.RealtimeTags.Separator:n.type==e.RealtimeRequests.SymbolBrokerStat||n.type==e.RealtimeRequests.BrokerStat?l.name&&(i.b||(i.b={}),i.b[l.name]||(i.b[l.name]=[]),i.b[l.name].push(l)):l.symbol&&(i.s||(i.s={}),i.s[l.symbol]||(i.s[l.symbol]=[]),i.s[l.symbol].push(l));var d=l;(l=new e.BrokerStatItem).feed=d.feed,l.symbol=d.symbol,l.name=d.name;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}i.ToMws(),e.DEBUG_BROKER_STATS_CS&&e.log(this.ps.toStr(),"ResponseBrokerStats",i),n.callback&&n.callback.ResponseBrokerStats&&n.callback.ResponseBrokerStats(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},c.prototype.ResponseHeadlines=function(t,n){for(var i=new e.HeadlineResponse,r=0;r<n.data.length;r++){var a=n.data[r].buf,o=this.GetParser(a);o.SkipHeader(a);for(var l=this.subTag,c=new e.HeadlineItem,d=void 0,u=0;o.Next(a,l,this.tagSet);)switch(e.DEBUG_NEWS_CS_TAGS&&e.logToConsole(this.tagSet,l,a),l.tag){case e.RealtimeTags.Feed:c.news_feed=l.Int(a),u=this.isNews?0:this.serverPool.login.feedOffsetUtc(c.news_feed,this.serviceInfo);break;case e.RealtimeDateTime.Date:InfrontUtil.DateNuToDate(l.Int(a),c.dateTime);break;case e.RealtimeDateTime.TradeTime:InfrontUtil.TimeNuToDate(this.isNews?l.Int():this.serverPool.login.toUtc(c.news_feed,l.Int(a),this.serviceInfo),c.dateTime,u);break;case e.NewsTags.Id:c.news_id=l.String(a),c.streamingId=c.news_id;break;case e.NewsTags.StreamingId:c.streamingId=l.String(a);break;case e.NewsTags.Flags:c.flags=l.Int(a);break;case e.NewsTags.Headline:c.headline=l.String(a,!0);break;case e.NewsTags.SymbolFeed:d=new s(l.Int(a),""),c.symbols.push(d);break;case e.NewsTags.Symbol:d&&(d.ticker=l.String(a));break;case e.NewsTags.Isin:d&&(d.isin=l.String(a));break;case e.NewsTags.Industry:c.industry=l.String(a);break;case e.NewsTags.Category:c.category=l.String(a);break;case e.NewsTags.Flash:c.isFlash=1==l.Int(a);break;case e.NewsTags.StoryURL:c.url=l.String(a);break;case e.NewsTags.Topic:c.topic=l.String(a);break;case e.NewsTags.StoryNu:c.storyNumber=l.Int(a);break;case e.NewsTags.Country:c.country=l.String(a);break;case e.NewsTags.Language:c.language=l.String(a);break;case e.NewsTags.ProductCode:c.productCode=l.String(a);break;case e.NewsTags.MoneyCode:c.moneyCode=l.String(a);break;case e.NewsTags.Author:c.author=l.String(a);break;case e.NewsTags.GovernmentCode:c.governmentCode=l.String(a);break;case e.NewsTags.StatisticsCode:c.statisticsCode=l.String(a);break;case e.RealtimeTags.Separator:i.addItem(c),c=new e.HeadlineItem;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(a))}}i.applyFilteredResult(),e.DEBUG_NEWS_CS&&e.log(this.ps.toStr(),"CS ResponseHeadlines:",i),n.callback&&n.callback.ResponseHeadline&&n.callback.ResponseHeadline(new e.ResponseHeader,i)},c.prototype.ResponseNewsStory=function(t,n){for(var i=new e.NewsStoryResponse,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=this.GetParser(a);s.SkipHeader(a);for(var o=this.subTag;s.Next(a,o,this.tagSet);)switch(e.DEBUG_NEWS_CS_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case e.RealtimeTags.Feed:i.news_feed=o.Int(a);break;case e.NewsTags.Id:i.news_id=o.String(a);break;case e.NewsTags.Text:i.text.push(o.String(a,!0));break;case e.NewsTags.Headline:i.headline=o.String(a,!0);break;case e.RealtimeDateTime.Date:i.date=o.Int(a);break;case e.RealtimeDateTime.TradeTime:i.time=o.Int(a);break;case e.RealtimeTags.Separator:break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}e.DEBUG_NEWS_CS&&e.log(this.ps.toStr(),"CS ResponseNewsStory",i.ToMws()),n.callback&&n.callback.ResponseNewsStory&&n.callback.ResponseNewsStory(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},c.prototype.ResponseTickSize=function(t,n){for(var i=new C,r=new T,a=0;a<n.data.length;a++){var s=n.data[a].buf,o=this.GetParser(s);o.SkipHeader(s);for(var l=this.subTag,c=void 0,d=void 0,u=void 0,h=void 0;o.Next(s,l,this.tagSet);)switch(e.DEBUG_TICK_SIZE_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.RealtimeTags.Feed:c=l.Int(s);break;case e.TickSizeTags.Id:d=l.Int(s);break;case e.TickSizeTags.ToPrice:u=l.Decimal(s);break;case e.TickSizeTags.TickSize:h=InfrontUtil.roundToPrecision(l.Decimal(s),10);break;case e.RealtimeTags.Separator:r.feed==c&&r.id==d||(r=new T,i.items.push(r),r.feed=c,r.id=d),r.items.push(new e.TickItem(d,null,u,h));break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}i.updateBounds();for(var p=0,m=i.items;p<m.length;p++)if((r=m[p]).items.length>0){var g=this.getTickSizeKey(r.feed,r.id);this.tickSizes[g]=r}n.callback&&n.callback.ResponseTickSize&&n.callback.ResponseTickSize(new e.ResponseHeader,i)},c.prototype.ResponseRanking=function(t,n){for(var i=new u,r=0;r<n.data.length;r++){var a=n.data[r].buf,o=this.GetParser(a);o.SkipHeader(a);for(var l=this.subTag,c=new d;o.Next(a,l,this.tagSet);)switch(e.DEBUG_RANKING_CS_TAGS&&e.logToConsole(this.tagSet,l,a),l.tag){case e.RealtimeTags.Feed:c.instrument||(c.instrument=new s),c.instrument.feed=l.Int(a);break;case e.RealtimeTags.Symbol:c.instrument||(c.instrument=new s),c.instrument.ticker=l.String(a);break;case e.RealtimeTags.Type:c.type=l.Int(a);break;case e.RealtimeTags.RankOperation:c.operation=l.Int(a);break;case e.RealtimeTags.Last:c.last=l.Decimal(a);break;case e.RealtimeTags.ChangePct:c.pct_change=l.Decimal(a);break;case e.RealtimeTags.Change:c.change=l.Decimal(a);break;case e.RealtimeTags.Turnover:c.turnover=l.Decimal(a);break;case e.RealtimeTags.Separator:if(!n.callback&&!n.commonFramework)for(var h=0,p=this.callbacks;h<p.length;h++){var m=p[h];m.OnRealtimeRanking&&m.OnRealtimeRanking(t,c)}i.items.push(c);var g=c;c=new d,g.instrument&&(c.instrument=new s(g.instrument.feed,g.instrument.ticker)),c.operation=g.operation;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(a))}}i.toMws(),e.DEBUG_RANKING_CS&&e.log(this.ps.toStr(),"RankingResponse",i),n.callback&&n.callback.ResponseRanking&&n.callback.ResponseRanking(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},c.prototype.ResponseFindPortfolioSymbols=function(t,n){for(var i=new h,r=0;r<n.data.length;r++){var a=n.data[r].buf,o=this.GetParser(a);o.SkipHeader(a);for(var l=this.subTag,c=new s,d=void 0;o.Next(a,l,e.TagSet.OrderEntry);)switch(e.DEBUG_SYMBOL_MAPPING_CS_TAGS&&e.logToConsole(e.TagSet.OrderEntry,l,a),l.tag){case e.TradingTag.PositionNumber:d=l.Int(a);break;case e.TradingTag.Feed:c.feed=l.Int(a);break;case e.TradingTag.Symbol:c.ticker=l.String(a);break;case e.TradingTag.Isin:c.isin=l.String(a);break;case e.TradingTag.Separator:i.addPortfolioSymbolItem(d,c),c=new s;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(e.TagSet.OrderEntry,l.tag),l.String(a))}}e.DEBUG_SYMBOL_MAPPING_CS&&e.log("CS ResponseFindPortfolioSymbol:",i),n.callback&&n.callback.ResponseFindPortfolioSymbols&&n.callback.ResponseFindPortfolioSymbols(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},c.prototype.ResponseStaticData=function(e,t){for(var n=0;n<t.data.length;n++){var i=t.data[n].buf,r=this.GetParser(i);r.SkipHeader(i),this.ParseStaticData(null,e,i,r)}},c.prototype.GetSequenceId=function(e){var t=this.SeqIdMap[e];return t=t?t+=1:1,this.SeqIdMap[e]=t,t},c.prototype.ParseTrade=function(n,i,r,a,s){if(i){var o,l=new I;l.symbol=i,l.dateTime.setTime(i.getValue(e.RealtimeDateTime.Date).get().getTime()),l.dateTime.setTime(i.date.getTime());for(var c=this.subTag,d=s.pos,u=l.symbol.fs.ticker+":"+l.symbol.fs.feed;s.Next(a,c,this.tagSet);){switch(e.DEBUG_TRADES_RT_TAGS&&e.logToConsole(this.tagSet,c,a),c.tag){case e.RealtimeTags.YestClose:case e.RealtimeTags.YestBidClose:break;case e.RealtimeTags.Last:if(l.last=c.Decimal(a),d=s.pos,l.symbol){var h,p;if(p=(h=0==(l.trTypeNu&e.TrTypeNu.NoHighLow)||l.symbol.fsService&&0!=(l.symbol.fsService.properties&t.AllTrades))||0!=(l.trTypeNu&e.TrTypeNu.UseLast),l.symbol.hasRealTimeTrade=p&&h,h&&(!l.symbol.fsService||!l.symbol.fsService.service||l.symbol.fsService.service.serviceType!=e.ServiceType.Consolidated)){var m=void 0;0==(m=l.symbol.getValue(e.RealtimeTags.Open,!0)).get()&&m.set(l.last),(m=l.symbol.getValue(e.RealtimeTags.High,!0)).get()<l.last&&m.set(l.last),((m=l.symbol.getValue(e.RealtimeTags.Low,!0)).get()>l.last||0==m.get())&&m.set(l.last)}}continue;case e.RealtimeDateTime.Date:InfrontUtil.DateNuToDate(c.Int(a),l.dateTime);continue;case e.RealtimeDateTime.TradeTime:InfrontUtil.TimeNuToDate(this.serverPool.login.toUtc(i.fs.feed,c.Int(a),this.serviceInfo),l.dateTime,n.ofsMins);var g=l.dateTime.getTime();i.getValue(c.tag,!0).SetDateRaw(g);continue;case e.RealtimeDateTime.MsTime:l.dateTime.setUTCMilliseconds(c.Int(a));break;case e.RealtimeDateTime.UsTime:break;case e.RealtimeTags.AcVolume:l.accumulatedVolume=c.Decimal(a);break;case e.RealtimeTags.IncVolume:l.volume=c.Decimal(a);break;case e.RealtimeTags.IsTrade:continue;case e.RealtimeTags.Market:l.market=c.String(a);break;case e.RealtimeTags.SourceSeqnu:l.seq_id=c.Int(a),d=s.pos;continue;case e.RealtimeTags.TradeId:l.tradeId=c.String(a),d=s.pos;continue;case e.RealtimeTags.Buyer:l.buyer=c.String(a);break;case e.RealtimeTags.Seller:l.seller=c.String(a);break;case e.RealtimeTags.TrTypeNu:l.trTypeNu=c.Int(a);break;case e.RealtimeTags.TrTypeStr:l.trTypeStr=c.String(a);break;case e.RealtimeTags.HitterTaker:l.hitterTaker=c.Int(a),d=s.pos;continue;case e.RealtimeDateTime.ActualTradeDate:l.actualTradeDate=c.Int(a),d=s.pos;continue;case e.RealtimeDateTime.ActualTradeTime:l.actualTradeTime=this.serverPool.login.toUtc(i.fs.feed,c.Int(a),this.serviceInfo),d=s.pos;continue;case e.RealtimeTags.TradesStart:c.Int(a);break;case e.RealtimeTags.FullMmt:l.mmt=c.String(a),l.esma=e.MakeEsma(l.mmt);break;case e.RealtimeTags.CompressedMmt:l.mmt=e.MakeMmt(c.Int(a)),l.esma=e.MakeEsma(l.mmt);break;case e.RealtimeTags.TradeSeparator:l.seq_id||(l.seq_id=this.GetSequenceId(u)),this.DistTrade(r,l),l.Reset();break;case e.RealtimeTags.Type:switch(c.Int(a)){case e.RealtimeTags.IsTrade:case e.RealtimeType.Trade:break;default:return l.seq_id||(l.seq_id=this.GetSequenceId(u)),this.DistTrade(r,l),void s.SetPos(d)}break;case e.RealtimeTags.Separator:return r.clientServer||(o=i.getValue(e.RealtimeDateTime.LAST_TRADE_DATE,!1))&&InfrontUtil.DateToInt(l.dateTime)>InfrontUtil.DateToInt(o.get())&&(o.set(l.dateTime),i.getValue(e.MwsRealtimeTags.LastTradeDate,!0).set(l.dateTime)),l.seq_id||(l.seq_id=this.GetSequenceId(u)),void this.DistTrade(r,l)}r.clientServer||i.getValue(c.tag,!0).set(c.get(a)),d=s.pos}if(!r.clientServer)(o=i.getValue(e.RealtimeDateTime.LAST_TRADE_DATE,!1))&&InfrontUtil.DateToInt(l.dateTime)>InfrontUtil.DateToInt(o.get())&&(o.set(l.dateTime),i.getValue(e.MwsRealtimeTags.LastTradeDate,!0).set(l.dateTime)),l.seq_id||(l.seq_id=this.GetSequenceId(u)),this.DistTrade(r,l)}else e.log("null symbol")},c.prototype.ParseMboOrders=function(t,n,r,s){for(var o,l=this.subTag,c=s.pos,d=this.baLevel,u=function(e){if(o)switch(d){case S.Delete:t.mbo.deleteOrder(o.orderId);break;case S.Insert:t.mbo.insertOrder(o);break;case S.Modify:t.mbo.updateOrder(o,!1)}e&&t.mbo.publishOrderbook(),o=null};s.Next(r,l,this.tagSet);){switch(e.DEBUG_ORDERBOOK_TAGS&&e.logToConsole(this.tagSet,l,r),l.tag){case e.RealtimeTags.BaLevel:var h=l.Int(r);if(h<S.Modify)return u(!0),void s.SetPos(c);this.baLevel=d=h;break;case e.RealtimeTags.OrderId:o&&u(!1);var p=l.String(r,!1);if(d==S.Delete){t.mbo.deleteOrder(p,!0);continue}(o=new a).orderId=p;break;case e.RealtimeTags.NuBids:case e.RealtimeTags.NuAsks:case e.RealtimeTags.BidAnalytics:case e.RealtimeTags.AskAnalytics:break;case e.RealtimeTags.BaReset:t.resetOrderbook();break;case e.RealtimeTags.Bid:if(!o)break;o.bidAsk=i.BID,o.price=l.Decimal(r);break;case e.RealtimeTags.BidSize:if(!o)break;o.bidAsk=i.BID,o.volume=l.Decimal(r);break;case e.RealtimeTags.Ask:if(!o)break;o.bidAsk=i.ASK,o.price=l.Decimal(r);break;case e.RealtimeTags.AskSize:if(!o)break;o.bidAsk=i.ASK,o.volume=l.Decimal(r);break;case e.RealtimeTags.BaBroker:break;case e.RealtimeTags.BaBuyerId:case e.RealtimeTags.BaSellerId:if(!o)break;o.buyerSeller=l.String(r);break;case e.RealtimeTags.BaBuyMarket:case e.RealtimeTags.BaAskMarket:if(!o)break;o.market=l.String(r);break;case e.RealtimeDateTime.BidTime:case e.RealtimeDateTime.AskTime:case e.RealtimeDateTime.TradeTime:if(!o)break;o.time=this.serverPool.login.toUtc(t.fs.feed,l.Int(r),this.serviceInfo);break;case e.RealtimeDateTime.UsTime:case e.RealtimeDateTime.MsTime:break;case e.RealtimeTags.Separator:return u(!0),void s.SetPos(c);default:e.DEBUG_ORDERBOOK&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(r))}c=s.pos}u(!0)},c.prototype.ParseMblOrders=function(t,n,a,s,o){var l=this.subTag,c=s.pos,d=t.mbl.levels[o];d||(d=t.mbl.levels[o]=new r);var u=0,h=t.mbl;for(h.init();s.Next(a,l,this.tagSet);){switch(e.DEBUG_ORDERBOOK_TAGS&&e.logToConsole(this.tagSet,l,a),l.tag){case e.RealtimeTags.BaLevel:if((o=l.Int(a))>=S.Delete)return void s.SetPos(c);(d=t.mbl.levels[o])||(d=t.mbl.levels[o]=new r);break;case e.RealtimeTags.NuBids:if(!t.mbl.insertOrder(d,!0,l.tag,l.Int(a)))break;h&&(h.getOrder(o,!0).orders=d.bid.orders);break;case e.RealtimeTags.NuAsks:if(!t.mbl.insertOrder(d,!1,l.tag,l.Int(a)))break;h&&(h.getOrder(o,!1).orders=d.ask.orders);break;case e.RealtimeTags.BidAnalytics:case e.RealtimeTags.AskAnalytics:break;case e.RealtimeTags.BaReset:t.resetOrderbook();break;case e.RealtimeTags.Bid:if(!t.mbl.insertOrder(d,!0,l.tag,l.Decimal(a)))break;h&&(h.getOrder(o,!0).price=d.bid.price),u|=i.BID,0==d.bid.price&&(d.bid=void 0,h&&h.deleteOrder(o,!0));break;case e.RealtimeTags.BidSize:if(!t.mbl.insertOrder(d,!0,l.tag,l.Decimal(a)))break;h&&(h.getOrder(o,!0).volume=d.bid.volume),u|=i.BID,0==d.bid.volume&&(d.bid=void 0,h&&h.deleteOrder(o,!0));break;case e.RealtimeTags.Ask:if(!t.mbl.insertOrder(d,!1,l.tag,l.Decimal(a)))break;h&&(h.getOrder(o,!1).price=d.ask.price),u|=i.ASK,0==d.ask.price&&(d.ask=void 0,h&&h.deleteOrder(o,!1));break;case e.RealtimeTags.AskSize:if(!t.mbl.insertOrder(d,!1,l.tag,l.Decimal(a)))break;h&&(h.getOrder(o,!1).volume=d.ask.volume),u|=i.ASK,0==d.ask.volume&&(d.ask=void 0,h&&h.deleteOrder(o,!1));break;case e.RealtimeTags.BaBroker:case e.RealtimeTags.BaBuyerId:case e.RealtimeTags.BaSellerId:break;case e.RealtimeDateTime.BidTime:d&&d.bid&&(d.bid.time=this.serverPool.login.toUtc(t.fs.feed,l.Int(a),this.serviceInfo));break;case e.RealtimeDateTime.AskTime:d&&d.ask&&(d.ask.time=this.serverPool.login.toUtc(t.fs.feed,l.Int(a),this.serviceInfo));break;case e.RealtimeDateTime.TradeTime:if(!d)break;u&i.BID&&d.bid&&(d.bid.time=this.serverPool.login.toUtc(t.fs.feed,l.Int(a),this.serviceInfo)),u&i.ASK&&d.ask&&(d.ask.time=this.serverPool.login.toUtc(t.fs.feed,l.Int(a),this.serviceInfo));break;case e.RealtimeDateTime.Date:case e.RealtimeDateTime.UsTime:case e.RealtimeDateTime.MsTime:break;case e.RealtimeTags.Separator:return s.SetPos(c),void(h&&t.mbl.publishOrderbook());default:return e.DEBUG_ORDERBOOK&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(a)),s.SetPos(c),void(h&&t.mbl.publishOrderbook())}c=s.pos}h&&t.mbl.publishOrderbook()},c.prototype.ParseStaticData=function(e,t,n,i){this.serverPool.staticCache.Parse(e,i,n,!1)},c.prototype.ParseNews=function(t,n,i,r){var a=this.subTag,o=new e.HeadlineResponse,l=new e.HeadlineItem;l.news_feed=r;for(var c,d=this.isNews?0:this.serverPool.login.feedOffsetUtc(l.news_feed);i.Next(n,a,this.tagSet);)switch(e.DEBUG_NEWS_RT_TAGS&&e.logToConsole(this.tagSet,a,n),a.tag){case e.RealtimeTags.Feed:l.news_feed=a.Int(n),d=this.isNews?0:this.serverPool.login.feedOffsetUtc(l.news_feed);break;case e.RealtimeDateTime.Date:InfrontUtil.DateNuToDate(a.Int(n),l.dateTime);break;case e.RealtimeDateTime.TradeTime:InfrontUtil.TimeNuToDate(this.isNews?a.Int():this.serverPool.login.toUtc(l.news_feed,a.Int(n),this.serviceInfo),l.dateTime,d);break;case e.NewsTags.Id:l.news_id=a.String(n),l.streamingId=l.news_id;break;case e.NewsTags.StreamingId:l.streamingId=a.String(n);break;case e.NewsTags.Flags:l.flags=a.Int(n);break;case e.NewsTags.Headline:l.headline=a.String(n,!0);break;case e.NewsTags.SymbolFeed:c=new s(a.Int(n),""),l.symbols.push(c);break;case e.NewsTags.Symbol:c&&(c.ticker=a.String(n));break;case e.NewsTags.Isin:c&&(c.isin=a.String(n));break;case e.NewsTags.Industry:l.industry=a.String(n);break;case e.NewsTags.Category:l.category=a.String(n);break;case e.NewsTags.Flash:l.isFlash=1==a.Int(n);break;case e.NewsTags.StoryURL:l.url=a.String(n);break;case e.NewsTags.Topic:l.topic=a.String(n);break;case e.NewsTags.StoryNu:l.storyNumber=a.Int(n);break;case e.NewsTags.Country:l.country=a.String(n);break;case e.NewsTags.Language:l.language=a.String(n);break;case e.NewsTags.ProductCode:l.productCode=a.String(n);break;case e.NewsTags.MoneyCode:l.moneyCode=a.String(n);break;case e.NewsTags.Author:l.author=a.String(n);break;case e.NewsTags.GovernmentCode:l.governmentCode=a.String(n);break;case e.NewsTags.StatisticsCode:l.statisticsCode=a.String(n);break;case e.RealtimeTags.ResetFeed:for(var u=0,h=this.callbacks;u<h.length;u++)(g=h[u]).OnRealtimeResetFeed&&g.OnRealtimeResetFeed(a.Int(n),l.dateTime);break;case e.RealtimeTags.Separator:o.addItem(l),l=new e.HeadlineItem;break;case e.RealtimeTags.CheckpointPhase1:case e.RealtimeTags.SpoolSourceProcess:case e.RealtimeTags.SpoolSourceMachine:break;default:e.DEBUG_UNHANDLED_TAGS&&e.log(this.ps.toStr(),"ParseNews unhandled:",e.tagToStr(this.tagSet,a.tag),a.String(n))}l&&l.news_id&&o.addItem(l),o.applyFilteredResult(),e.DEBUG_NEWS_RT&&e.log("RT ResponseHeadlines:",o);for(var p=0,m=this.callbacks;p<m.length;p++){var g;(g=m[p]).OnRealtimeHeadline&&g.OnRealtimeHeadline(t,o.items)}},c.prototype.ParseRanking=function(t,n,i,r,a){var s=this.tag,o=new d;for(t&&(o.instrument=t.fs),o.type=a;r.Next(i,s,this.tagSet);)switch(e.DEBUG_RANKING_RT_TAGS&&e.logToConsole(this.tagSet,s,i),s.tag){case e.RealtimeTags.RankOperation:o.operation=s.Int(i);break;case e.RealtimeTags.Symbol:o.instrument.ticker=s.String(i);break;case e.RealtimeTags.Last:o.last=s.Decimal(i);break;case e.RealtimeTags.ChangePct:o.pct_change=s.Decimal(i);break;case e.RealtimeTags.Change:o.change=s.Decimal(i);break;case e.RealtimeTags.Turnover:o.turnover=s.Decimal(i);break;case e.RealtimeTags.Separator:e.DEBUG_RANKING_RT&&e.log("RT Ranking",o);for(var l=0,c=this.callbacks;l<c.length;l++)(p=c[l]).OnRealtimeRanking&&p.OnRealtimeRanking(n,o);o.clear()}if(null!==o.operation){e.DEBUG_RANKING_RT&&e.log(this.ps.toStr(),"RT Ranking",o);for(var u=0,h=this.callbacks;u<h.length;u++){var p;(p=h[u]).OnRealtimeRanking&&p.OnRealtimeRanking(n,o)}}},c.prototype.ResetFeed=function(t){for(var n in t.syms){var i=t.syms[n];i.reset(),i.getValue(e.RealtimeDateTime.Date,!0).set(t.date)}for(var r=0,a=this.callbacks;r<a.length;r++){var s=a[r];s.OnRealtimeResetFeed&&s.OnRealtimeResetFeed(t.feednu,t.date)}t.ofsMins=this.serverPool.login.feedOffsetUtc(t.feednu)},c.prototype.ResetMboOrderbooks=function(e){for(var t in e.syms){var n=e.syms[t];n.mbo.reset(),n.mbo.publishOrderbook(!0)}},c.prototype.ResetOrderbooks=function(e){for(var t in e.syms){var n=e.syms[t];n.resetOrderbook(),n.mbo.publishOrderbook(!0)}},c.prototype.NotifyPing=function(){for(var e=0,t=this.callbacks;e<t.length;e++){var n=t[e];n.OnRealtimePing&&n.OnRealtimePing()}},c.prototype.lowLevelData=function(t,n,i){var r,a,s,o,l,c,d,u,h,p,m,g=this.tag,f=this.baLevel,v=!1;if(t.uniqueId>0){var y=this.requests[t.uniqueId];if(t.request==e.RealtimeRequests.SymbolStatic)return void this.ParseStaticData(null,t,n,i);if(y){if(y.responseNu++,y.data.push(new e.ResponseItem(i.DuplicateData(n),!1)),t.segment==e.SegmentInfo.Last)switch(delete this.requests[t.uniqueId],y.type){case e.RealtimeRequests.Intraday:case e.RealtimeRequests.Trades:return void this.ResponseTimeSeries(t,y);case e.RealtimeRequests.Headlines:return void this.ResponseHeadlines(t,y);case e.RealtimeRequests.NewsStory:return void this.ResponseNewsStory(t,y);case e.RealtimeRequests.BrokerStat:case e.RealtimeRequests.BrokerSymbolStat:case e.RealtimeRequests.SymbolBrokerStat:return void this.ResponseBrokerStats(t,y);case e.RealtimeRequests.TickSize:return void this.ResponseTickSize(t,y);case e.RealtimeRequests.Ranking:return void this.ResponseRanking(t,y);case e.RealtimeRequests.FindPortfolioSymbols:return void this.ResponseFindPortfolioSymbols(t,y)}switch(y.type){case e.RealtimeRequests.Headlines:case e.RealtimeRequests.NewsStory:return;case e.RealtimeRequests.Intraday:case e.RealtimeRequests.Trades:case e.RealtimeRequests.BrokerStat:case e.RealtimeRequests.BrokerSymbolStat:case e.RealtimeRequests.SymbolBrokerStat:case e.RealtimeRequests.TickSize:case e.RealtimeRequests.Ranking:}}else e.DEBUG_REALTIME_REQUEST_ERROR&&!y&&t.request!=e.RealtimeRequests.SymbolData&&t.request!=e.RealtimeRequests.SymbolStatic&&t.request!=e.RealtimeRequests.AllSymbolData&&e.log("%c"+this.ps.toStr()+" Could not find request: "+e.requestToStr(this.tagSet,t.request)+", "+t.idStr(),"color: #f60; font-size: 14px;")}if(t.request!=e.HeaderRequests.Ping){t.clientServer&&(g.tag=1);for(var b,T;i.Next(n,g,this.tagSet);){switch((e.DEBUG_SYMBOL_DATA_TAGS&&t.request==e.RealtimeRequests.SymbolData||e.DEBUG_ALL_SYMBOL_DATA_TAGS&&t.request==e.RealtimeRequests.AllSymbolData)&&e.logToConsole(this.tagSet,g,n),g.tag){case e.RealtimeTags.Feed:if(d=g.Int(n),s=this.serverPool.login.getWrappedFeed(d),this.newsFeeds.indexOf(s)>=0)return void this.ParseNews(t,n,i,d);if((a=this.feeds[s])||((a=this.feeds[s]=this.serverPool.symbolDb.GetFeedDb(this.ps,s,!0)).ofsMins=this.serverPool.login.feedOffsetUtc(s,this.serviceInfo)),!(m=p||u)||m.feedNu!=s||!m.providedBy(this.ps)){p=null;var C=(u=this.serverPool.login.getProviderServiceForPidSid(s,this.ps))&&u.hasBrokerOrders();u&&(u.isWrappedToFeed()?(h=null,u.hasOrderBook()&&(h=u.separateBBOandLevel1()||u.orderbookIsMBO()?C&&u.actualMBOFeed||u:this.serverPool.login.getProviderServiceForPidSid(u.getWrappedToFeed(),this.ps)),p=u,s=u.getWrappedToFeed(),a=this.feeds[s]):(h=u.hasOrderBook()?u:null,u.hasFreeTextSearch()&&u.historyFeed&&(s=(u=u.historyFeed).historyFeed.feedNu,a=this.feeds[s])))}v=d!=s&&null!=h&&h.hasOrderBook();break;case e.RealtimeTags.Symbol:if(!a)break;(o=g.String(n))&&((r=a.syms[o])||((r=this.getDbSymbol(s,o,!0)).getValue(g.tag,!0).set(g.get(n)),r.getValue(e.RealtimeDateTime.Date,!0).set(a.date)),T&&this.ParseTrade(a,r,t,n,i));continue;case e.RealtimeTags.StaticCRC:if(!r||d!=s)break;if(0==g.get(n)&&null===r.getValueOrNull(e.RealtimeTags.SymbolDbNumber))continue;if(r.getValue(g.tag,!0).set(g.get(n)),t.request==e.RealtimeRequests.SymbolStatic){r.content|=e.SymbolContentEnum.StaticData,r.hasStaticContent=!0;continue}this.pendingStaticSymbols.push(r);continue;case e.RealtimeTags.ResetFeed:b=!0;break;case e.RealtimeDateTime.Date:if(v)continue;if(y&&y.type==e.RealtimeRequests.Intraday)continue;if(r){var I=g.Int(n);InfrontUtil.DateNuToDate(I,r.date);var _=r.getValue(g.tag,!0),M=new Date(0);InfrontUtil.DateNuToDate(I,M),_.set(M)}else a&&InfrontUtil.DateNuToDate(g.Int(n),a.date);continue;case e.RealtimeDateTime.TradeTime:if(v)continue;if(y&&y.type==e.RealtimeRequests.Intraday)continue;if(!r)break;if(g.Int(n)){var E=r.getValue(g.tag,!0);(M=new Date).setTime(a.date.getTime()),InfrontUtil.TimeNuToDate(this.serverPool.login.toUtc(a.feednu,g.Int(n),this.serviceInfo),M,a.ofsMins),E.set(M)}continue;case e.RealtimeTags.Type:switch(g.Int(n)){case e.RealtimeType.Trade:if(!r){T=!0;continue}this.ParseTrade(a,r,t,n,i);continue;case e.RealtimeType.Static:this.ParseStaticData(r,t,n,i),r=void 0;continue;case e.RealtimeType.RankInc:case e.RealtimeType.RankDec:case e.RealtimeType.RankTurnover:case e.RealtimeType.Cust_1_Inc:case e.RealtimeType.Cust_1_Dec:case e.RealtimeType.Cust_2_Inc:case e.RealtimeType.Cust_2_Dec:case e.RealtimeType.Cust_3_Inc:case e.RealtimeType.Cust_3_Dec:case e.RealtimeType.Cust_4_Inc:case e.RealtimeType.Cust_4_Dec:case e.RealtimeType.Cust_5_Inc:case e.RealtimeType.Cust_5_Dec:this.ParseRanking(r,t,n,i,g.Int(n));continue}break;case e.RealtimeTags.IsTrade:if(!r){T=!0;continue}this.ParseTrade(a,r,t,n,i);continue;case e.RealtimeTags.BaLevel:if(!r)break;this.baLevel=f=g.Int(n),f>=S.Modify?this.ParseMboOrders(r,t,n,i):f>=1&&0==r.mbo.ordersCount()&&this.ParseMblOrders(r,t,n,i,f);continue;case e.RealtimeTags.Bid:case e.RealtimeTags.BidSize:case e.RealtimeTags.NuBids:l=!0;break;case e.RealtimeTags.Ask:case e.RealtimeTags.AskSize:case e.RealtimeTags.NuAsks:c=!0;break;case e.RealtimeTags.OrderId:if(!r)break;this.ParseMboOrders(r,t,n,i);break;case e.RealtimeTags.ContractSize:if(!r)continue;0!=(w=g.Int(n))&&r.getValue(g.tag,!0).set(w);continue;case e.RealtimeTags.SymbolDbNumber:case e.RealtimeTags.Separator:break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,g.tag),g.String(n))}if(b&&(h&&h.orderbookIsMBO()?this.ResetMboOrderbooks(a):this.ResetFeed(a)),r&&(!y||y.type!=e.RealtimeRequests.Intraday)){if(!(g.tag in e.PerformanceTags)&&g.tag!=e.RealtimeTags.Separator){var w=g.tag in e.IsDateTag?InfrontUtil.DateFromDateNu(g.Int(n)):g.get(n);r.getValue(g.tag,!0).set(w)}g.tag==e.RealtimeTags.Separator&&(r.orderbookCallbacks&&(l||c)&&0==r.mbo.ordersCount()&&(l&&r.mbl.getOrder(1,!0),c&&r.mbl.getOrder(1,!1),r.mbl.publishOrderbook()),t.request==e.RealtimeRequests.AllSymbolData&&this.bypassStaticCache&&(r.hasStaticContent=!0),t.request==e.RealtimeRequests.SymbolData&&(r.CacheUpdated(),e.DEBUG_SYMBOL_DATA_CS&&e.log(this.ps.toStr(),e.requestToStr(this.tagSet,t.request),r.fs.toString(),r)),r=void 0)}}t.segment==e.SegmentInfo.Last&&t.request==e.RealtimeRequests.AllSymbolData&&a&&(this.bypassStaticCache?(a.MWSDistRefData(),e.DEBUG_ALL_SYMBOL_DATA_CS&&e.log("bypassStaticCache: MWSDistRefData")):this.processPendingStaticSymbols(a),e.DEBUG_ALL_SYMBOL_DATA_CS&&e.log(this.ps.toStr(),e.requestToStr(this.tagSet,t.request),a.feednu,a.syms)),r&&r.orderbookCallbacks&&(l||c)&&0==r.mbo.ordersCount()&&(l&&r.mbl.getOrder(1,!0),c&&r.mbl.getOrder(1,!1),r.mbl.publishOrderbook())}else this.NotifyPing()},c.prototype.StartStopThrottle=function(){var t=this;if(this.stop&&(this.stop.subFeeds.length&&this.conn.UnsubscribeFeeds(this.stop.subFeeds),this.stop.subSymbols.length&&this.conn.UnsubscribeSymbols(this.stop.subSymbols)),this.start){if(this.start.subFeeds.length&&this.conn.SubscribeFeeds(this.start.subFeeds),this.start.subSymbols.length&&this.conn.SubscribeSymbols(this.start.subSymbols),this.start.snapFeeds.length){var n=this.conn.GetRequest(e.RealtimeRequests.AllSymbolData,0),i=n.pos;this.start.snapFeeds.forEach(function(i){n.pos>7e3&&(t.conn.Send(n,!0),n=t.conn.GetRequest(e.RealtimeRequests.AllSymbolData,0)),n.AddInt(e.RealtimeTags.Feed,i),t.bypassStaticCache||n.AddInt(e.RealtimeTags.StaticCRC,1),n.AddInt(e.RealtimeTags.Separator,0)}),n.pos!=i&&this.conn.Send(n,!0)}if(this.start.snapSymbols.length){var r=this.conn.GetRequest(e.RealtimeRequests.SymbolData,0);i=r.pos,this.start.snapSymbols.forEach(function(n){r.pos>7e3&&(t.conn.Send(r,!0),r=t.conn.GetRequest(e.RealtimeRequests.SymbolData,0)),r.AddInt(e.RealtimeTags.Feed,n.feed),r.AddString(e.RealtimeTags.Symbol,n.ticker),r.AddInt(e.RealtimeTags.Separator,0)}),r.pos!=i&&this.conn.Send(r,!0)}}if(this.staticData&&this.conn){for(var a=this.conn.GetRequest(e.RealtimeRequests.SymbolStatic,0),s=0,o=this.staticData.snapSymbols;s<o.length;s++){var l=o[s];a.pos>7e3&&(this.conn.Send(a,!0),a=this.conn.GetRequest(e.RealtimeRequests.SymbolStatic,0)),a.Add(e.RealtimeTags.Feed,l.feed),a.Add(e.RealtimeTags.Symbol,l.ticker),a.AddInt(e.RealtimeTags.Separator,0)}a.pos&&this.conn.Send(a,!0)}this.start=void 0,this.stop=void 0,this.staticData=void 0},c.prototype.StartThrottleTimerIfNotRunning=function(){var t=this;this.timerToken||(this.timerToken=setTimeout(function(){e.DEBUG_TIMERS&&e.log(t.ps.toStr(),"StartThrottleTimerIfNotRunning"),t.timerToken=null,t.StartStopThrottle()},50))},c.prototype.SubscribeFeed=function(e,t){for(var n=[],i=0,r=e;i<r.length;i++)for(var a=r[i],s=0,o=this.serverPool.login.getPidSidFeeds(this.ps,a,t.getFeedProperties());s<o.length;s++){var l=o[s];n.push(l)}return this.conn.SubscribeFeeds(n)},c.prototype.UnsubscribeFeeds=function(e,t){var n=this,i=[];e.forEach(function(e){for(var r=0,a=n.serverPool.login.getPidSidFeeds(n.ps,e,t.getFeedProperties());r<a.length;r++){var s=a[r];i.push(s)}}),this.stop||(this.stop=new _),this.stop.AddFeed(i,!0),this.StartThrottleTimerIfNotRunning()},c.prototype.UnsubscribeSymbols=function(e,t){var n,i,r=this,a=[];e.forEach(function(e){e.feed!=n&&(i=r.serverPool.login.getPidSidFeeds(r.ps,e.feed,t.getFeedProperties()),n=e.feed);for(var o=0,l=i;o<l.length;o++){var c=l[o];a.push(new s(c,e.ticker))}}),this.stop||(this.stop=new _),this.stop.Add(a,!0),this.StartThrottleTimerIfNotRunning()},c.prototype.DistTrade=function(t,n){e.DEBUG_TRADES_RT&&e.log("RT Trade",n);var i,r=n.symbol;if(n.trTypeNu&&0!=(n.trTypeNu&e.TrTypeNu.NoHighLow)||((i=r.getValue(e.RealtimeTags.Open,!0)).get()||i.set(n.last),(!(i=r.getValue(e.RealtimeTags.Low,!0)).get()||i.get()>n.last)&&i.set(n.last),(i=r.getValue(e.RealtimeTags.High,!0)).get()<n.last&&i.set(n.last),(i=r.getValue(e.RealtimeTags.Last,!0)).set(n.last),n.volume&&((i=r.getValue(e.RealtimeTags.OnExchVolume,!0)).Inc(n.volume),n.last&&(i=r.getValue(e.RealtimeTags.OnExchTurnover,!0)).Inc(n.last*n.volume))),0!=(n.trTypeNu&e.TrTypeNu.UseLast)&&(i=r.getValue(e.RealtimeTags.Last,!0)).set(n.last),0==(n.trTypeNu&e.TrTypeNu.NoVolume)&&n.volume&&((i=r.getValue(e.RealtimeTags.AcVolume,!0)).Inc(n.volume),n.last&&(i=r.getValue(e.RealtimeTags.Turnover,!0)).Inc(n.last*n.volume)),this.callbacks.forEach(function(e){e.OnRealtimeTrade&&e.OnRealtimeTrade(t,n)}),r.genericCallbacks){var a=new e.MWSTrade;a.instrument=r.fs,a.time=n.dateTime.toISOString(),a.last=n.last,a.volume=n.volume,a.trades=[];var s=new e.MWSTradeItem;s.last=n.last,s.time=a.time,s.buyer=n.buyer,s.seller=n.seller,s.volume=n.volume,s.seq_id=n.seq_id,a.trades.push(s),r.distTrades(a)}},c.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(i=this.ps.toStr()+": "+i,r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId])},c.prototype.lowLevelReRequestAll=function(e){for(var t in this.feeds)this.ResetOrderbooks(this.feeds[t]);this.callbacks.forEach(function(t){t.OnRefreshAll&&t.OnRefreshAll(e)})},c.prototype.lowLevelConnect=function(e,t){l.prototype.lowLevelConnect.call(this,e,t)},c.prototype.lowLevelDisconnect=function(e,t,n){l.prototype.lowLevelDisconnect.call(this,e,t,n)},c}(e.BaseIDSServer);l.RealtimeServer=M}(e.Realtime||(e.Realtime={}))}(IDS||(IDS={})),function(e){var t=Infront.Instrument,n=function(){};e.FindOptionPart=n;var i=function(){};e.FindFundPart=i;var r=function(){};e.ForexFindPart=r;var a=function(){};e.BloombergFindPart=a;var s=function(){};e.BondFindPart=s,function(e){e[e.Symbol=1]="Symbol",e[e.Company=2]="Company",e[e.Chain=4]="Chain",e[e.Screen=8]="Screen"}(e.ItemType||(e.ItemType={}));var o=function(){this.useTagClearsPrev=!0};e.SearchSymbol=o;var l=function(){};e.Company=l;var c=function(){function e(){}return e.prototype.ToMws=function(){},e}();e.Chain=c;var d=function(){};e.Underlying=d;var u=function(){};e.Option=u;var h=function(){function n(){this.items={}}return n.prototype.ToMws=function(n){this.type="INSTRUMENT",this.company&&(this.type="COMPANY"),this.chain&&(this.type="CHAIN"),this.instrument=new t(this.feed,this.symbol),this.feed&&(this.instrument.feed_code=n.feeds[this.feed].exchCode),this.instrument.full_name=this.fullName,this.instrument.sort_nu=this.sortNu,this.instrument.instrument_type=e.Symbol.SymbolTypeToStr(this.symbolType),this.underlying&&(this.instrument.under_feed=this.underlying.feed,this.instrument.under_ticker=this.underlying.ticker),this.instrument.issuer=this.issuer,this.instrument.issuer_full_name=this.IssuerFullName,this.option&&this.option.expiry&&(this.instrument.expiry_date=e.MWSMakeDate(this.option.expiry)),this.chain&&(delete this.instrument,this.chain.ToMws())},n}();e.SymbolResponseItem=h;var p,m=function(){function e(){this.items=[]}return e.prototype.ToMws=function(e){for(var t=0,n=this.items;t<n.length;t++)n[t].ToMws(e);this.items=this.items.sort(function(e,t){return t.sortNu-e.sortNu})},e}();e.SymbolResponse=m,function(e){e[e.FindSymbol=0]="FindSymbol"}(p||(p={}));var g=function(t){function n(n,i){var r=t.call(this,i,n,e.ServerType.Search)||this;return r.requests={},r.conn=new e.ServerConnection(n,i.secure,r,i.login.getAccessFeeds(n),i.login.getHosts(n),r.tagSet,i,r.serverType),r}return __extends(n,t),n.Search=function(t,n,i,r){void 0===r&&(r=null);var a=t.conn.GetRequest(e.RealtimeRequests.FindSymbol,0),s=a.uniqueId,o=t.requests[a.uniqueId]=new e.Request;o.callback=i,o.commonFramework=r,o.type=p.FindSymbol,o.responseNu++,InfrontUtil.isArray(n)||(n=[n]);for(var l=0,c=n;l<c.length;l++){var d=c[l];if(a.pos>7e3&&(t.conn.Send(a,!0),a=t.conn.GetRequest(e.RealtimeRequests.FindSymbol,s),o.responseNu++),d.feed||(d.feed=t.serverPool.login.getAccessFeeds(t.ps)),a.Add(e.RealtimeTags.MaxItems,d.maxItems),a.Add(e.RealtimeTags.Feed,d.feed),a.Add(e.RealtimeTags.Symbol,d.symbol),a.Add(e.RealtimeTags.FullName,d.fullname),a.Add(e.RealtimeTags.SymbolType,d.symbolType),a.Add(e.RealtimeTags.SymbolSubType,d.symbolSubType),d.useTagClearsPrev&&d.useTag&&d.useTag.length&&a.Add(e.RealtimeTags.UseTag,e.RealtimeTags.UseTag),a.Add(e.RealtimeTags.UseTag,d.useTag),d.emptyTags&&d.emptyTags.length>0&&a.Add(e.RealtimeTags.SearchEmptyTag,d.emptyTags),a.Add(e.RealtimeTags.ISIN,d.isin),a.Add(e.RealtimeTags.Currency,d.currency),a.Add(e.RealtimeTags.ExchangeSymbol,d.exchSymbol),a.Add(e.RealtimeTags.Issuer,d.issuer),a.Add(e.RealtimeTags.IssuerFullName,d.issuerFullName),a.Add(e.RealtimeTags.PrimarySegment,d.primarySegment),a.Add(e.RealtimeTags.SecondarySegment,d.secondarySegment),a.Add(e.RealtimeTags.MIC,d.mic),d.option&&(a.Add(e.RealtimeTags.UnderlyingFeed,d.option.underFeed),a.Add(e.RealtimeTags.UnderlyingTicker,d.option.underTicker),a.Add(e.RealtimeTags.UnderlyingBase,d.option.underBase),a.Add(e.RealtimeTags.Expiry,d.option.expiry),a.Add(e.RealtimeTags.Strike,d.option.strike),d.option.optionSearch&&a.Add(e.RealtimeTags.OptionSearch,1)),d.fund&&(a.Add(e.RealtimeTags.FundBaseCurrency,d.fund.baseCurrency),a.Add(e.RealtimeTags.Country,d.fund.countryOfSale),a.Add(e.RealtimeTags.FundType,d.fund.fundType),a.Add(e.RealtimeTags.FundIncomeType,d.fund.incomeType),a.Add(e.RealtimeTags.FundInvestmentStyle,d.fund.investmentStyle),a.Add(e.RealtimeTags.MorningstarRating,d.fund.morningstarRating),a.Add(e.RealtimeTags.MorningstarRating3Y,d.fund.morningstarRating3Y),a.Add(e.RealtimeTags.FundOngoingCharge,d.fund.fundOngoingCharge),a.Add(e.RealtimeTags.MorningstarSecId,d.fund.morningstarSecId),a.Add(e.RealtimeTags.FundPortfolioManager,d.fund.portfolioManager),a.Add(e.RealtimeTags.FundRegionExposure,d.fund.regionExposure),a.Add(e.RealtimeTags.FundRiskMeasure,d.fund.riskMeasure),a.Add(e.RealtimeTags.FundTopHolding,d.fund.topHolding)),d.forex&&(a.Add(e.RealtimeTags.FxCurrency1,d.forex.curr1),a.Add(e.RealtimeTags.FxCurrency2,d.forex.curr2),a.Add(e.RealtimeTags.FxTenor,d.forex.tenor)),d.bloomberg&&(a.Add(e.RealtimeTags.BloombergGlobalId,d.bloomberg.globalId),a.Add(e.RealtimeTags.BloombergGlobalIdComposite,d.bloomberg.globalIdComposite),a.Add(e.RealtimeTags.BloombergTicker,d.bloomberg.ticker)),d.bond&&(a.Add(e.RealtimeTags.BondApproxYield,d.bond.approxYield),a.Add(e.RealtimeTags.BondType,d.bond.bondType),a.Add(e.RealtimeTags.CurrentCoupon,d.bond.couponRate),a.Add(e.RealtimeTags.CouponType,d.bond.couponType),a.Add(e.RealtimeTags.BondDescription,d.bond.description),a.Add(e.RealtimeTags.ExpiryType,d.bond.expiryType),a.Add(e.RealtimeDateTime.IssueDate,d.bond.issueDate),a.Add(e.RealtimeTags.IssuerId,d.bond.issuerId),a.Add(e.RealtimeTags.IssuerIndustry,d.bond.issuerIndustry),a.Add(e.RealtimeTags.IssuerIsin,d.bond.issuerIsin),a.Add(e.RealtimeTags.BondMainType,d.bond.mainType),a.Add(e.RealtimeTags.BondMinDenomination,d.bond.minDenomination)),a.Add(e.RealtimeTags.SearchFreeText,d.freeText),d.freeTextTagMustMatch&&d.freeTextTagMustMatch.length)for(var u=0,h=d.freeTextTagMustMatch;u<h.length;u++){var m=h[u];a.Add(e.RealtimeTags.FreeTextTagMustMatch,m)}a.Add(e.RealtimeTags.SearchItemType,d.itemType),a.Add(e.RealtimeTags.SearchRangeTag,d.searchRangeTag),a.Add(e.RealtimeTags.SearchRangeLowerLimit,d.searchRangeLowerLimit),a.Add(e.RealtimeTags.SearchRangeUpperLimit,d.searchRangeUpperLimit),a.Add(e.RealtimeTags.SortNu,d.sortNu),a.Add(e.RealtimeTags.Separator,0)}t.conn.Send(a,!0)},n.prototype._Company=function(e){e.company||(e.company=new l)},n.prototype._Chain=function(e){e.chain||(e.chain=new c)},n.prototype._Under=function(e){e.underlying||(e.underlying=new d)},n.prototype._Option=function(e){e.option||(e.option=new u)},n.prototype.ResponseSearch=function(t,n){for(var i=new m,r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag,c=new h;o.Next(s,l,this.tagSet);){switch(e.DEBUG_SYMBOL_SEARCH_TAGS&&e.logToConsole(this.tagSet,l,s),l.dataType){case e.DataType.String:c.items[l.tag]=l.String(s);break;default:c.items[l.tag]=l.Decimal(s)}switch(l.tag){case e.RealtimeTags.SortNu:c.sortNu=l.Int(s);break;case e.RealtimeTags.Feed:c.feed=l.Int(s);break;case e.RealtimeTags.Symbol:c.symbol=l.String(s);break;case e.RealtimeTags.FullName:c.fullName=l.String(s);break;case e.RealtimeTags.SymbolType:c.symbolType=l.Int(s);break;case e.RealtimeTags.SymbolSubType:c.symbolSubType=l.Int(s);break;case e.RealtimeTags.ISIN:c.isin=l.String(s);break;case e.RealtimeTags.UnderlyingFeed:this._Under(c),c.underlying.feed=l.Int(s);break;case e.RealtimeTags.UnderlyingTicker:this._Under(c),c.underlying.ticker=l.String(s);break;case e.RealtimeTags.UnderlyingBase:this._Under(c),c.underlying.base=l.String(s);break;case e.RealtimeTags.UnderlyingDescr:this._Under(c),c.underlying.descr=l.String(s);break;case e.RealtimeTags.Expiry:this._Option(c),c.option.expiry=l.Int(s);break;case e.RealtimeTags.ExpiryType:this._Option(c),c.option.expiryType=l.Int(s);break;case e.RealtimeTags.Strike:this._Option(c),c.option.strike=l.Decimal(s);break;case e.RealtimeTags.CompanyId:this._Company(c),c.company.id=l.String(s);break;case e.RealtimeTags.CompanyName:this._Company(c),c.company.name=l.String(s);break;case e.RealtimeTags.ChainFeed:this._Chain(c),c.chain.feed=l.Int(s);break;case e.RealtimeTags.ChainName:this._Chain(c),c.chain.name=l.String(s);break;case e.RealtimeTags.ChainDescr:this._Chain(c),c.chain.description=l.String(s);break;case e.RealtimeTags.ProviderId:this._Chain(c),c.chain.provider=l.Int(s);break;case e.RealtimeTags.Issuer:c.issuer=l.String(s);break;case e.RealtimeTags.IssuerFullName:c.IssuerFullName=l.String(s);break;case e.RealtimeTags.InfrontSector:c.sector=l.String(s);break;case e.RealtimeTags.Separator:i.items.push(c),c=new h;break;default:e.DEBUG_SYMBOL_SEARCH_TAGS&&e.log("Search Unknown tag "+l.tag)}}}i.ToMws(this.serverPool.login),e.DEBUG_SYMBOL_SEARCH&&e.log(this.ps.toStr(),e.requestToStr(this.tagSet,t.request),i),n.callback&&n.callback.ResponseSearchSymbol&&n.callback.ResponseSearchSymbol(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},n.prototype.lowLevelData=function(t,n,i){var r=this.requests[t.uniqueId];!r&&t.userData&&(r=this.requests[t.userData]),r?(r.data.push(new e.ResponseItem(i.DuplicateData(n))),r.responseNu&&r.responseNu--,t.segment===e.SegmentInfo.Last&&0==r.responseNu&&(this.ResponseSearch(t,r),delete this.requests[t.uniqueId])):e.log(this.ps.toStr(),"Unmatched uniqueId in search response header")},n.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId]),e.log("Search error: "+i)},n.prototype.lowLevelReRequestAll=function(e){},n.prototype.lowLevelConnect=function(e,n){t.prototype.lowLevelConnect.call(this,e,n)},n.prototype.lowLevelDisconnect=function(e,n,i){t.prototype.lowLevelDisconnect.call(this,e,n,i)},n}(e.BaseIDSServer);e.SearchServer=g}(IDS||(IDS={})),function(e){function t(e){switch(e){case n.First:return"first";case n.More:return"more";case n.Last:return"last"}}var n,i;e.overrideHost=null,e.loginOk=!1,e.localTerminalLoopback=!1,e.useVerificationLoginServer=!1,function(e){e[e.First=0]="First",e[e.More=1]="More",e[e.Last=2]="Last"}(n=e.SegmentInfo||(e.SegmentInfo={})),e.segmentToStr=t,function(e){e[e.None=0]="None",e[e.Connecting=1]="Connecting",e[e.WaitFirstPacket=2]="WaitFirstPacket",e[e.Running=3]="Running",e[e.Closing=4]="Closing",e[e.Suspended=5]="Suspended",e[e.Closed=6]="Closed"}(i=e.ConnectionState||(e.ConnectionState={}));var r=function(){function n(e){void 0===e&&(e=null),this.clientServer=!1,e&&(this.pid=e.pid,this.sid=e.sid)}return n.prototype.idStr=function(){return this.uniqueId?"id="+this.uniqueId.toString():""},n.prototype.psToStr=function(){return this.pid+":"+this.sid},n.prototype.inspect=function(n){var i={};return this.request&&(i.request=e.requestToStr(n,this.request)),i.pidSid=this.pid+":"+this.sid,i.type=this.clientServer?"CS":"RT",this.responseId&&(i.response=e.HeaderResponsesToStr(this.responseId)),this.userData&&(i.userData=this.userData),this.uniqueId&&(i.id=this.uniqueId),this.segment&&(i.segment=t(this.segment)),this.responseMsg&&(i.responseMsg=this.responseMsg),i},n}();e.Header=r;var a=function(t,n){this.id=n,this.m=new e.Maker(n,t),this.ReRequestCount=0},s=function(t,n){this.resubscribeCount=0,this.totalReRequestCount=0,this.connectionAttemptCount=0,this.serverType=t,this.serverDescription=e.ServerType[t],this.pid=n.pid,this.sid=n.sid,this.lastTriedConnectTime=Date.now()};e.ConnectionStatus=s;var o=function(){function t(t,n,i,r,a,o,l,c,d,u){if(void 0===d&&(d=!1),void 0===u&&(u=!1),this.encrypt=!1,this.tagSet=null,this.callbacks=[],this.subscribe=new e.SubscriptionDb,this.pingTimeout=0,this.pingCounter=0,this.hostNu=-1,this.lastSuccessHostNu=-1,this.ConnectTimeout=1e3,this.requests=[],this.readyForRequests=!1,this.seqNu=0,this.maxRetries=0,this.authCounter=0,this.rawDebugCounter=0,this.rawDebugPackets=0,this.firstConnection=!0,this.checkTimerMs=500,this.timersPerSecond=1e3/this.checkTimerMs,this.monitorServerConnection=!1,this.subscribeTimeout=0,this.dataReceived=!1,this.resubscribeOnReconnect=!0,this.overflowBuffer=null,this.encrypt=n,this.core=l,l&&(this.authCounter=l.authCounter),this.status=new s(c,t),this.isLoginServer=d,this.rawDebug=u,this.isLoginServer&&e.useVerificationLoginServer&&(a=["no93devsrv03"]),!a)throw Error(t.toStr()+" Could not connect to server - no hosts");this.ps=t,this.tagSet=o,this.feedAccess=r,e.overrideHost?(this.hosts=[],this.hosts.push(e.overrideHost)):this.hosts=a,i&&this.Register(i)}return t.prototype.start=function(){var e=this,t=function(){e.CheckConnection(),setTimeout(t,e.checkTimerMs)};setTimeout(t,this.checkTimerMs),this.ConnectNext()},t.prototype.Destroy=function(){this.setConnectionState(i.Closing),this.callbacks=[],this.Close(),e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Server connection destroyed")},t.prototype.setConnectionState=function(e){this.status.connectionState=e,this.status.connectionStateDescription=i[e],this.onStatusChange&&this.onStatusChange(this.status)},t.prototype.OutstandingRequests=function(){return this.requests.length},t.prototype.ClearOutstandingRequests=function(){this.requests=[]},t.prototype.SubscriptionCount=function(){return this.subscribe.Count()},t.prototype.Close=function(){this.setConnectionState(i.Closing),e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr()+" Closing"),clearInterval(this.reconnectTimerId),this.websocket&&this.websocket.close()},t.prototype.LoginKillConnection=function(){try{this.websocket&&this.websocket.close()}catch(e){}},t.prototype.IsIp4=function(e){var t;for(t=0;t<e.length;t++)if((e[t]<"0"||e[t]>"9")&&"."!=e[t]&&":"!=e[t])return!1;return!0},t.prototype.HostToDns=function(t,n,i){if(void 0===n&&(n=null),void 0===i&&(i=null),!this.IsIp4(t))return t;if(e.overrideHost)return t;if("127.0.0.1"==t)return t;var r=String(t).split(":");return 0==r.length?t:String(r[0]).replace(new RegExp("\\.","g"),"-")+".infrontservices.com:"+(r.length>1?r[1]:this.encrypt?"443":"80")},t.prototype.ConnectNext=function(){var t;this.subscribeTimeout=0,this.setConnectionState(i.Connecting),this.status.connectionAttemptCount++,this.readyForRequests=!1,this.pingCounter=0,this.pingTimeout=0,this.status.lastTriedConnectTime&&Date.now()-this.status.lastTriedConnectTime<3e4&&(this.hostNu++,this.hostNu>=this.hosts.length&&(this.hostNu=0)),this.status.lastTriedConnectTime=Date.now(),t=this.encrypt&&!e.localTerminalLoopback?"wss://"+this.HostToDns(this.hosts[this.hostNu],this.ps.pid,this.ps.sid)+"/wsrt/"+this.ps.pid+"/"+this.ps.sid:"ws://"+this.HostToDns(this.hosts[this.hostNu])+"/wsrt/"+this.ps.pid+"/"+this.ps.sid,e.DEBUG_SERVER_CONN&&e.log("%c"+e.logTimeStamp()+" "+this.ps.toStr()+" Connecting to "+t,"color: #ffe856;"),this.websocket&&this.websocket.Unregister(this);try{this.websocket=void 0}catch(t){e.log(t)}this.websocket=e.GetInfrontWebSocket(t,e.localTerminalLoopback),this.websocket?(this.websocket.Register(this),this.status.host=this.hosts[this.hostNu],this.setConnectionState(i.Connecting)):(this.status.host=void 0,e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Could not establish connection"))},t.prototype.connectionShouldClose=function(){return this.subscribe.Empty()&&0==this.OutstandingRequests()},t.prototype.CheckConnection=function(){if(this.status.connectionState!==i.Closing&&this.status.connectionState!==i.Suspended)if(this.websocket){if(this.pingTimeout++,this.pingCounter++,this.connectionShouldClose()){if(this.subscribeTimeout++,this.subscribeTimeout/this.timersPerSecond>5&&(this.subscribeTimeout=0,this.status.connectionState==i.Running&&e.loginOk))return e.DEBUG_SERVER_CONN_DETAIL&&e.log(e.logTimeStamp(),this.ps.toStr(),"Suspending connection"," Subscriptions:",this.subscribe.Count(),"Timer:",this.subscribeTimeout),this.setConnectionState(i.Suspended),this.SendClose(),void this.websocket.close()}else this.subscribeTimeout=0;var t=this.pingTimeout/this.timersPerSecond;if(this.websocket.readyState()===this.websocket.ws.CLOSED)return this.setConnectionState(i.None),e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Connection is closed - try to connect."),void this.ConnectNext();if(this.status.connectionState==i.Running&&t%5==0&&(e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Ping"),this.SendPing()),this.websocket.readyState()===this.websocket.ws.CONNECTING)return void(this.status.connectionAttemptCount>this.hosts.length?t>5&&(e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Switching servers, no connection within 5 seconds"),this.ConnectNext()):this.pingCounter>=6&&(e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Switching servers, no connection within ",this.pingCounter*this.checkTimerMs,"ms"),this.ConnectNext()));if(this.websocket.readyState()===this.websocket.ws.OPEN&&this.status.connectionState===i.Connecting)return void(this.status.connectionAttemptCount>this.hosts.length&&t>5?(this.ConnectNext(),e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Switching servers, No initial response from server within 5 seconds")):this.status.connectionAttemptCount<=this.hosts.length&&t>1&&(this.ConnectNext(),e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Switching servers, No initial response from server within 1 seconds")));t>21&&(e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Connection timed out. Trying next."),this.ConnectNext())}else this.ConnectNext()},t.prototype.Register=function(t){-1==this.callbacks.indexOf(t)&&(this.callbacks.push(t),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"ServerConnection Register. Total callbacks:",this.callbacks.length))},t.prototype.Unregister=function(t){this.callbacks.splice(this.callbacks.indexOf(t),1),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"ServerConnection Unregister. Total callbacks:",this.callbacks.length)},t.prototype.Data=function(t,i,r){if(this.dataReceived=!0,this.callbacks.forEach(function(e){e.lowLevelData&&e.lowLevelData(t,i,r)}),t.uniqueId>0&&t.segment==n.Last){for(var a=0;a<this.requests.length;a++){var s=this.requests[a];if(s.id==t.uniqueId){if(e.DEBUG_SERVER_CONN_DETAIL&&s.requestDate){var o=(new Date).getTime()-s.requestDate.getTime();o>1e3&&e.log(this.ps.toStr(),"Request",t.request,"took",o,"ms id:",s.id)}return void this.requests.splice(a,1)}}e.DEBUG_SERVER_CONN&&!this.isLoginServer&&e.log(this.ps.toStr(),"Could not find request to delete - id:"+t.uniqueId.toString())}},t.prototype.GetRequest=function(t,n){var i=new e.Maker(e.GetInfrontRequestUniqueId());return i.tagSetTags=i.tagSet=this.tagSet?this.tagSet:0,i.AddInt(e.HeaderTags.PID,this.ps.pid),i.AddInt(e.HeaderTags.SID,this.ps.sid),i.AddInt(e.HeaderTags.Request,t),i.AddInt(e.HeaderTags.UserData,n),i.AddInt(e.HeaderTags.UniqueId,i.uniqueId),i.AddInt(e.HeaderTags.End,0),i},t.prototype.SubscribeFeeds=function(t,n){void 0===n&&(n=null);var r=null;if(0==t.length)return r;this.status.connectionState==i.Suspended&&this.ConnectNext();var a=new e.Maker;a.tagSetTags=a.tagSet=e.TagSet.Realtime,a.AddInt(e.HeaderTags.PID,this.ps.pid),a.AddInt(e.HeaderTags.SID,this.ps.sid),a.AddInt(e.HeaderTags.Request,e.HeaderRequests.ChangeSubscriptions),a.AddInt(e.HeaderTags.End,0);for(var s=a.pos,o=0;o<t.length;o++)if(a.CheckSendSegmentedRequest(this.websocket,s),this.subscribe.AddFeed(t[o],n)){a.AddInt(e.RealtimeTags.Subscribe,1),a.AddInt(e.RealtimeTags.Feed,t[o]),a.AddInt(e.RealtimeTags.Separator,0);for(var l=this.subscribe.GetSubscribedSymbols(t[o]),c=0;c<l.length;c++)a.CheckSendSegmentedRequest(this.websocket,s),a.AddInt(e.RealtimeTags.Unsubscribe,1),a.AddInt(e.RealtimeTags.Feed,t[o]),a.AddString(e.RealtimeTags.Symbol,l[c]),a.AddInt(e.RealtimeTags.Separator,0)}s!=a.pos&&a.Send(this.websocket);var d=this;return function(){d.UnsubscribeFeeds(t)}},t.prototype.UnsubscribeFeeds=function(t,n){if(void 0===n&&(n=null),0==t.length)return!0;if(null===this.websocket)return!0;if(this.status.connectionState===i.Suspended)return!0;var r=new e.Maker;r.tagSetTags=r.tagSet=e.TagSet.Realtime,r.AddInt(e.HeaderTags.PID,this.ps.pid),r.AddInt(e.HeaderTags.SID,this.ps.sid),r.AddInt(e.HeaderTags.Request,e.HeaderRequests.ChangeSubscriptions),r.AddInt(e.HeaderTags.End,0);for(var a=r.pos,s=0;s<t.length;s++){if(!r.CheckSendSegmentedRequest(this.websocket,a))return!1;if(this.subscribe.DelFeed(t[s],n)){for(var o=this.subscribe.GetSubscribedSymbols(t[s]),l=0;l<o.length;l++){if(!r.CheckSendSegmentedRequest(this.websocket,a))return!1;r.AddInt(e.RealtimeTags.Unsubscribe,1),r.AddInt(e.RealtimeTags.Feed,t[s]),r.AddString(e.RealtimeTags.Symbol,o[l]),r.AddInt(e.RealtimeTags.Separator,0)}r.AddInt(e.RealtimeTags.Subscribe,0),r.AddInt(e.RealtimeTags.Feed,t[s]),r.AddInt(e.RealtimeTags.Separator,0)}}return!(a!=r.pos&&!r.Send(this.websocket))},t.prototype.SubscribeSymbols=function(t,n){if(void 0===n&&(n=null),0==t.length)return!0;this.status.connectionState==i.Suspended&&this.ConnectNext();var r=new e.Maker;r.tagSetTags=r.tagSet=e.TagSet.Realtime,r.AddInt(e.HeaderTags.PID,this.ps.pid),r.AddInt(e.HeaderTags.SID,this.ps.sid),r.AddInt(e.HeaderTags.Request,e.HeaderRequests.ChangeSubscriptions),r.AddInt(e.HeaderTags.End,0);for(var a=r.pos,s=0;s<t.length;s++){r.CheckSendSegmentedRequest(this.websocket,a);var o=t[s];if(this.subscribe.HasFeed(o.feed))this.subscribe.AddSymbol(o.feed,o.ticker,n);else if(this.subscribe.AddSymbol(o.feed,o.ticker,n)){if(!r.CheckSendSegmentedRequest(this.websocket,a))return!1;r.AddInt(e.RealtimeTags.Subscribe,1),r.AddInt(e.RealtimeTags.Feed,o.feed),r.AddString(e.RealtimeTags.Symbol,o.ticker),r.AddInt(e.RealtimeTags.Separator,0)}}return!(a!=r.pos&&!r.Send(this.websocket))},t.prototype.UnsubscribeSymbols=function(t,n){if(void 0===n&&(n=null),0==t.length)return!0;if(null===this.websocket)return!0;if(this.status.connectionState===i.Suspended)return!0;var r=new e.Maker;r.tagSetTags=r.tagSet=e.TagSet.Realtime,r.AddInt(e.HeaderTags.PID,this.ps.pid),r.AddInt(e.HeaderTags.SID,this.ps.sid),r.AddInt(e.HeaderTags.Request,e.HeaderRequests.ChangeSubscriptions),r.AddInt(e.HeaderTags.End,0);for(var a=r.pos,s=0;s<t.length;s++){if(!r.CheckSendSegmentedRequest(this.websocket,a))return!1;var o=t[s];if(this.subscribe.HasFeed(o.feed))this.subscribe.DelSymbol(o.feed,o.ticker,n);else if(this.subscribe.DelSymbol(o.feed,o.ticker,n)){if(!r.CheckSendSegmentedRequest(this.websocket,a))return!1;r.AddInt(e.RealtimeTags.Unsubscribe,1),r.AddInt(e.RealtimeTags.Feed,o.feed),r.AddString(e.RealtimeTags.Symbol,o.ticker),r.AddInt(e.RealtimeTags.Separator,0)}}return!(a!=r.pos&&!r.Send(this.websocket))},t.prototype.UnsubscribeObject=function(t){var n=this.subscribe.GetSubscribedInstruments(t);if(0==n.length)return!0;var i=new e.Maker;i.tagSetTags=i.tagSet=e.TagSet.Realtime,i.AddInt(e.HeaderTags.PID,this.ps.pid),i.AddInt(e.HeaderTags.SID,this.ps.sid),i.AddInt(e.HeaderTags.Request,e.HeaderRequests.ChangeSubscriptions),i.AddInt(e.HeaderTags.End,0);for(var r=i.pos,a=0,s=n;a<s.length;a++){var o=s[a];if(""==o.ticker&&this.subscribe.DelFeed(o.feed,t,!0)){if(!i.CheckSendSegmentedRequest(this.websocket,r))return!1;i.AddInt(e.RealtimeTags.Subscribe,0),i.AddInt(e.RealtimeTags.Feed,o.feed),i.AddInt(e.RealtimeTags.Separator,0)}if(""!=o.ticker&&this.subscribe.DelSymbol(o.feed,o.ticker,t,!0)){if(!i.CheckSendSegmentedRequest(this.websocket,r))return!1;i.AddInt(e.RealtimeTags.Subscribe,0),i.AddInt(e.RealtimeTags.Feed,o.feed),i.AddString(e.RealtimeTags.Symbol,o.ticker),i.AddInt(e.RealtimeTags.Separator,0)}}return!0},t.prototype.Resubscribe=function(){if(this.status.resubscribeCount++,0===this.maxRetries||this.status.resubscribeCount<=this.maxRetries){var t=new e.Maker;t.tagSetTags=t.tagSet=e.TagSet.Realtime,t.AddInt(e.HeaderTags.PID,this.ps.pid),t.AddInt(e.HeaderTags.SID,this.ps.sid),t.AddInt(e.HeaderTags.Request,e.HeaderRequests.ChangeSubscriptions),t.AddInt(e.HeaderTags.End,0),t.AddInt(e.RealtimeTags.Subscribe,1);var n=t.pos,i=0,r=0;for(var a in this.subscribe.feeds)this.subscribe.feeds[a]&&(t.CheckSendSegmentedRequest(this.websocket,n),t.AddInt(e.RealtimeTags.Feed,parseInt(a)),t.AddInt(e.RealtimeTags.Separator,0),i++);for(var a in this.subscribe.symbols)if(!this.subscribe.HasFeed(parseInt(a))){var s=this.subscribe.symbols[a];for(var o in s.symbols)s.symbols[o]&&(t.CheckSendSegmentedRequest(this.websocket,n),t.AddInt(e.RealtimeTags.Feed,parseInt(a)),t.AddString(e.RealtimeTags.Symbol,o),t.AddInt(e.RealtimeTags.Separator,0),r++)}if(n!=t.pos){if(!t.Send(this.websocket))return!1;e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"ReSubscribing",i,"feeds,",r,"symbols","ResubscribeCount:",this.status.resubscribeCount)}}else e.DEBUG_SERVER_CONN_DETAIL&&e.log("Subscription retries exhausted.");return!0},t.prototype.SendPing=function(){if(this.rawDebug)return!0;var t=new e.Maker;if(t.tagSetTags=t.tagSet=e.TagSet.Login,t.AddInt(e.HeaderTags.Request,e.HeaderRequests.Ping),t.AddInt(e.HeaderTags.PID,this.ps.pid),t.AddInt(e.HeaderTags.SID,this.ps.sid),t.AddInt(e.HeaderTags.End,0),!t.Send(this.websocket))return!1;if(this.isLoginServer){if(0!=this.pingCounter&&this.pingCounter%21600!=0)return!0;this.SendAuthenticationRequest()}else if(this.core&&this.authCounter!=this.core.authCounter)return this.authCounter=this.core.authCounter,this.LoginProviderAuth();return!0},t.prototype.SendClose=function(){if(this.rawDebug)return!0;var t=new e.Maker;return t.tagSet=e.TagSet.Login,t.AddInt(e.HeaderTags.Request,e.HeaderRequests.CloseConnection),t.AddInt(e.HeaderTags.PID,this.ps.pid),t.AddInt(e.HeaderTags.SID,this.ps.sid),t.AddInt(e.HeaderTags.End,0),t.Send(this.websocket)},t.prototype.SendAuthenticationRequest=function(){var t=new e.Maker;return t.tagSet=e.TagSet.Login,t.AddInt(e.HeaderTags.PID,0),t.AddInt(e.HeaderTags.SID,0),this.core&&t.AddInt(e.HeaderTags.LoginId,this.core.loginId),t.AddInt(e.HeaderTags.Request,e.LoginRequests.Authentication),t.AddInt(e.HeaderTags.End,0),t.AddInt(e.LoginTags.AuthVersion,2),t.Send(this.websocket)},t.prototype.Send=function(t,n){this.status.connectionState==i.Suspended&&this.ConnectNext(),t.resendable=n;var r=!1;if(this.readyForRequests&&(e.loginOk||this.isLoginServer)){if(!t.Send(this.websocket)&&!n)return!1;r=!0}if(n){var s=new a(t,t.uniqueId);r&&(s.requestDate=new Date),this.requests.push(s)}return!0},t.prototype.ReRequest=function(){this.status.totalReRequestCount++;for(var t=0;t<this.requests.length;t++){var n=this.requests[t];if(n.ReRequestCount>0&&e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"Resending id="+n.m.uniqueId.toString()),n.ReRequestCount++,!n.m.Send(this.websocket))return!1;n.requestDate=new Date}if(this.maxRetries>0)for(t=this.requests.length-1;t>=0;t--)this.requests[t].ReRequestCount>this.maxRetries&&(e.DEBUG_SERVER_CONN_DETAIL&&e.log("Retries exhausted for request id="+this.requests[t].id.toString()),this.requests.splice(t,1));return!0},t.prototype.LoginProvider=function(){var t=new e.Maker;t.tagSetTags=t.tagSet=0,t.AddInt(e.HeaderTags.PID,this.ps.pid),t.AddInt(e.HeaderTags.SID,this.ps.sid),t.AddInt(e.HeaderTags.Request,e.HeaderRequests.LoginProvider),t.AddInt(e.HeaderTags.UserData,1),t.AddInt(e.HeaderTags.UniqueId,1),t.AddInt(e.HeaderTags.Properties,1),!this.isLoginServer&&this.core&&t.AddInt(e.HeaderTags.LoginId,this.core.loginId),t.AddInt(18,0),t.AddInt(e.HeaderTags.AppNumber,e.EndUserApplications.AppnuWebToolkitDirect);for(var n=0,i=1e6,r=Infront.LibraryConstants.kApplicationVersion.split("."),a=0;a<r.length;a++)n+=parseInt(r[a])*i,i/=1e3;for(t.AddInt(e.HeaderTags.AppVersion,n),t.AddInt(e.HeaderTags.End,0),t.AddInt(91,1),a=0;a<this.feedAccess.length;a++)t.AddInt(e.LoginTags.AccessFeed,this.feedAccess[a]);return!!t.Send(this.websocket)&&this.LoginProviderAuth()},t.prototype.LoginProviderAuth=function(){if(!(this.ps.isPidSid(3,0)||this.ps.isPidSid(3,1)||this.ps.isPidSid(3,7)||this.ps.isPidSid(3,8)))return!0;if(!this.core)return!0;var t=this.core.GetAuth(this.ps);if(!t.length)return!0;for(var i=0;i<t.length;i++){var r=new e.Maker;if(r.tagSetTags=r.tagSet=0,r.AddInt(e.HeaderTags.PID,this.ps.pid),r.AddInt(e.HeaderTags.SID,this.ps.sid),r.AddInt(e.HeaderTags.Request,e.HeaderRequests.LoginAuthentication),r.AddInt(e.HeaderTags.ReplyNu,i==t.length-1?n.Last:n.More),this.core&&r.AddInt(e.HeaderTags.LoginId,this.core.loginId),r.AddInt(e.HeaderTags.End,0),r.AddRaw(t[i]),!r.Send(this.websocket))return!1}return!0},t.prototype.StartRealtime=function(){this.hostNu!=this.lastSuccessHostNu&&(this.seqNu=0),this.lastSuccessHostNu=this.hostNu;var t=new e.Maker;return t.tagSetTags=t.tagSet=this.tagSet?this.tagSet:0,t.AddInt(e.HeaderTags.PID,this.ps.pid),t.AddInt(e.HeaderTags.SID,this.ps.sid),t.AddInt(e.HeaderTags.RtSeqNu,this.seqNu),t.AddInt(e.HeaderTags.Request,e.HeaderRequests.StartRealtime),t.AddInt(e.HeaderTags.End,0),!!t.Send(this.websocket)&&(this.readyForRequests=!0,this.resubscribeOnReconnect?this.Resubscribe():this.subscribe.Clear(),this.ReRequest(),!0)},t.prototype.onOpen=function(t){e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"ServerConnection established"),this.pingTimeout=0,this.pingCounter=0,this.rawDebug||(this.overflowBuffer=null,this.LoginProvider(),this.startLoginProvider=new Date,this.StartRealtime())},t.prototype.onClose=function(t){var n=this;1e3===t.code?e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"lowLevelDisconnect. Subscriptions:",this.subscribe.Count(),"Outstanding requests:",this.requests.length):e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr()+" Server connection closed with error",t),this.status.connectionState!==i.Suspended&&(this.dataReceived&&this.callbacks.forEach(function(e){e.lowLevelDisconnect&&e.lowLevelDisconnect(n.ps,n.subscribe.Count(),n.requests.length)}),this.dataReceived=!1)},t.prototype.onMessage=function(t){var a=this;this.pingTimeout=0,this.rawDebugCounter++;var s=null,o=0;this.overflowBuffer?(o=t.data.byteLength+this.overflowBuffer.length,(s=new Uint8Array(o)).set(this.overflowBuffer,0),s.set(t.data,this.overflowBuffer.length),this.overflowBuffer=null):(s=new Uint8Array(t.data),o=s.byteLength);for(var l=new e.Tag,c=0,d=function(){var t=e.LowLevel.GetInt32(s,c);if(t+c+4>o)return u.overflowBuffer=new Uint8Array(s,c,o-c),{value:void 0};c+=4;var d=new e.Parser(c,c+t);c+=t;var h=new r(u.ps);if(h.segment=n.First,u.rawDebug){for(u.rawDebugPackets++;d.Next(s,l,u.tagSet);)123123123==l.tag&&(u.callbacks.forEach(function(t){t.lowLevelError(h,e.HeaderResponses.Ok,"Got tag 123123123")}),e.log("test")),u.rawDebugCounter++,u.rawDebugCounter%1e6<<0==0&&u.callbacks.forEach(function(t){t.lowLevelError(h,e.HeaderResponses.Ok,"pkts: "+a.rawDebugPackets.toString()+" tags: "+a.rawDebugCounter.toString())});return"continue"}for(var p=e.HeaderResponses.Ok,m="";d.Next(s,l,u.tagSet);){if(l.tag===e.HeaderTags.End){d.SetHeaderEnd();break}switch(l.tag){case e.HeaderTags.PID:u.websocket.localLoop&&(h.pid=l.Int(s));break;case e.HeaderTags.SID:u.websocket.localLoop&&(h.sid=l.Int(s));break;case e.HeaderTags.SeqNu:u.seqNu=l.Int(s);break;case e.HeaderTags.Request:h.request=l.Int(s),h.clientServer=!0;break;case e.HeaderTags.UserData:h.userData=l.Int(s);break;case e.HeaderTags.UniqueId:h.uniqueId=l.Int(s);break;case e.HeaderTags.ReplyNu:h.segment=l.Int(s);break;case e.HeaderTags.ResponseId:p=l.Int(s);break;case e.HeaderTags.Response:m=l.String(s)}}var g=!1;if(e.DEBUG_SERVER_CONN_DETAIL&&h.responseMsg&&e.log(h.psToStr(),"Response",h.idStr(),h.responseMsg),void 0!==h.request)switch(h.request){case e.HeaderRequests.Subscribe:case e.HeaderRequests.Unsubscribe:case e.HeaderRequests.ChangeSubscriptions:g=!0;break;case e.HeaderRequests.Ping:u.monitorServerConnection||(g=!0);break;case e.HeaderRequests.LoginProvider:var f=(new Date).getTime()-u.startLoginProvider.getTime();u.callbacks.forEach(function(e){e.lowLevelConnect&&e.lowLevelConnect(a.ps,f)}),g=p==e.HeaderResponses.Ok,u.status.connectionAttemptCount=0,u.status.connectionState!==i.Closing&&u.setConnectionState(i.Running);break;case e.HeaderRequests.StartRealtime:g=p==e.HeaderResponses.Ok,u.firstConnection&&p==e.HeaderResponses.Restart&&(g=!0,p=e.HeaderResponses.Ok),u.firstConnection=!1,u.status.lastSuccessfulConnectTime=Date.now();break;case e.HeaderRequests.LoginAuthentication:}if(g)return"continue";switch(p){case e.HeaderResponses.Ok:break;case e.HeaderResponses.Restart:return e.DEBUG_SERVER_CONN_DETAIL&&e.log(u.ps.toStr(),"HeaderResponse restart"),u.seqNu=0,u.StartRealtime(),u.callbacks.forEach(function(e){e.lowLevelReRequestAll&&e.lowLevelReRequestAll(h)}),"continue";case e.HeaderResponses.Error:return e.DEBUG_SERVER_CONN_DETAIL&&e.log(u.ps.toStr(),"HeaderResponse error:",m),u.callbacks.forEach(function(e){e.lowLevelError&&e.lowLevelError(h,p,m)}),"continue";default:e.DEBUG_SERVER_CONN_DETAIL&&e.log(u.ps.toStr(),"HeaderResponse",e.HeaderResponsesToStr(p)+":",m),u.callbacks.forEach(function(e){e.lowLevelError&&e.lowLevelError(h,p,m)})}u.Data(h,s,d)},u=this;c<o;){var h=d();if("object"==typeof h)return h.value}l=null},t.prototype.onError=function(t){this.status.connectionState!==i.Suspended&&(this.status.connectionState!==i.Closing&&this.setConnectionState(i.None),e.DEBUG_SERVER_CONN_DETAIL&&e.log(this.ps.toStr(),"ServerConnection error:",t.message,t))},t}();e.ServerConnection=o}(IDS||(IDS={})),function(e){var t,n=Infront.PidSid,i=Infront.Db,r=function(e){this.streamData=!1,this.cb=e},a=function(){this.s=[],this.disconnectTimeoutMs=5e3},s=function(){function e(e){this.pidSids=[],this.buf=e}return e.prototype.HasPidSid=function(e){for(var t=0,n=this.pidSids;t<n.length;t++){var i=n[t];if(i.pid==e.pid&&i.sid==e.sid)return!0}return!1},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Realtime=1]="Realtime",e[e.Trading=2]="Trading",e[e.History=3]="History",e[e.Search=4]="Search",e[e.Chain=5]="Chain",e[e.Storage=6]="Storage",e[e.Calendar=7]="Calendar",e[e.Morningstar=8]="Morningstar",e[e.Alert=9]="Alert",e[e.Login=10]="Login",e[e.Wire=11]="Wire"}(t=e.ServerType||(e.ServerType={}));var o=function(){function o(){var n=this;this.servers={},this.endLogin=[],this.secure=!1,this.loginId=-1,this.authCounter=0,this.connections={},this.callbacks=[],this.onConnectionStatusChange=function(e){e.serverIndex&&e.serverType!==t.Login&&(n.connections[e.serverIndex]=__assign({},e),n.callbacks.forEach(function(t){t.StreamingServerStatus&&t.StreamingServerStatus(e)}))},this.authSegments=[],this.symbolDb=new i,this.staticCache=new e.StaticDataCache(this.symbolDb),this.streamingManager=new e.API.StreamingManager(this)}return o.prototype.Start=function(t,n,i,r,a){var s=this;void 0===r&&(r=null),this.secure=i,this.login=new e.LoginServer(t,n,i,r,a,this),this.login.register(this),setInterval(function(){return s.Timer()},1e3),this.login.conn.status.serverIndex="login",this.login.conn.status.feedDescription="Infront Access Server",this.login.conn.start()},o.prototype.Timer=function(){for(var t in this.servers){var n=this.servers[t];if(n){if(n.s.length>0||!n.lastDisconnectMs)continue;if(performance.now()>n.disconnectTimeoutMs+n.lastDisconnectMs){var i=n.server;if(i.outstandingRequests()>0){e.DEBUG_SERVER_REFERENCE&&e.log(i.conn.ps.toStr(),e.serverTypeToStr(i.serverType),"Cannot destroy server - outstanding requests");continue}var r=InfrontUtil.deepCopy(i.conn.status);delete this.connections[t],i.destroyBase&&i.destroyBase(),r.connectionState=e.ConnectionState.Closed,r.connectionStateDescription="Closed",this.onConnectionStatusChange(r),n.s=[],n.server=null,n.lastDisconnectMs=null,delete this.servers[t]}}}},o.prototype.RegisterEndLogin=function(e){this.endLogin.push(e)},o.prototype.UnregisterEndLogin=function(e){this.endLogin.splice(this.endLogin.indexOf(e))},o.prototype.GetServerIndex=function(e,t,n){return void 0===n&&(n=!1),e.pid.toString()+":"+e.sid.toString()+"_"+t.toString()+(!0===n?"_N":"")},o.prototype.RegisterStreaming=function(e,t,n){var i=this.servers[this.GetServerIndex(e,t)];if(i)for(var r=0,a=i.s;r<a.length;r++){var s=a[r];if(s.cb==n)return s.streamData=!0,!0}return!1},o.prototype.UnregisterStreaming=function(e,t,n){var i=this.servers[this.GetServerIndex(e,t)];if(i)for(var r=0,a=i.s;r<a.length;r++){var s=a[r];if(s.cb==n)return s.streamData=!1,!0}return!1},o.prototype.reset=function(){for(var e in this.servers)this.servers[e].server.destroyBase();this.connections={},this.servers={},this.endLogin=[],this.login.destroyBase(),this.login=void 0},o.prototype.LogMsg=function(t,n,i){void 0===i&&(i=""),e.log("%c"+t.toStr()+" "+n+" "+i,"color: #3ca9c9;")},o.prototype.GetServer=function(e,t,n){void 0===n&&(n=!1);var i=this.servers[this.GetServerIndex(e,t,n)];return i&&!i.server?null:i},o.prototype.AddServer=function(t,n,i){void 0===i&&(i=!1);var r=this.GetServerIndex(t,n.serverType,i),s=this.servers[r];return s||(s=this.servers[r]=new a),s.server=n,s.lastDisconnectMs=null,n.conn.status.serverIndex=r,n.conn.status.feedDescription=this.login.getServiceName(n.ps),n.conn.onStatusChange=this.onConnectionStatusChange,n.conn.start(),e.DEBUG_SERVER_POOL&&e.log("AddServer",t.toStr(),e.serverTypeToStr(n.serverType),this.servers),s},o.prototype.GetRealtime=function(n,i,a,s){void 0===a&&(a=!1),void 0===s&&(s="");var o=this.GetServer(n,t.Realtime,a);return o||(o=this.AddServer(n,new e.Realtime.RealtimeServer(n,this,a),a)),o.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetRealtime",s+" "+o.s.length.toString()),o.server},o.prototype.GetTrading=function(n,i,a,s){void 0===s&&(s="");var o=this.GetServer(n,t.Trading);return o||(o=this.AddServer(n,new e.TradingServer(n,this,a))),o.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetTrading",s+" "+o.s.length.toString()),o.server},o.prototype.GetHistory=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.History);return s||(s=this.AddServer(n,new e.HistoryServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetHistory",a+" "+s.s.length.toString()),s.server},o.prototype.GetSearch=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.Search);return s||(s=this.AddServer(n,new e.SearchServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetSearch",a+" "+s.s.length.toString()),s.server},o.prototype.GetChain=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.Chain);return s||(s=this.AddServer(n,new e.ChainsServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetChain",a+" "+s.s.length.toString()),s.server},o.prototype.GetStorage=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.Storage);return s||(s=this.AddServer(n,new e.StorageServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetStorage",a+" "+s.s.length.toString()),s.server},o.prototype.GetCalendar=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.Calendar);return s||(s=this.AddServer(n,new e.CalendarServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetCalendar",a+" "+s.s.length.toString()),s.server},o.prototype.GetMorningstar=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.Morningstar);return s||(s=this.AddServer(n,new e.API.MorningstarServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetMorningstar",a+" "+s.s.length.toString()),s.server},o.prototype.GetAlert=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.Alert);return s||(s=this.AddServer(n,new e.API.AlertsServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetAlert",a+" "+s.s.length.toString()),s.server},o.prototype.GetWire=function(n,i,a){void 0===a&&(a="");var s=this.GetServer(n,t.Wire);return s||(s=this.AddServer(n,new e.Wire.WireServer(n,this))),s.s.push(new r(i)),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(n,"GetWire",a+" "+s.s.length.toString()),s.server},o.prototype.Dispose=function(t,n,i,r){void 0===r&&(r="");var a=this.GetServer(t,n);if(a){for(var s=0;s<a.s.length;s++)if(a.s[s].cb==i)return a.s.splice(s),e.DEBUG_SERVER_REFERENCE&&this.LogMsg(t,"Dispose",r),void(0==a.s.length&&(a.lastDisconnectMs=performance.now()))}else e.log("%c"+t.toStr()+" Could not find "+e.serverTypeToStr(n)+" server to dispose. Caller: "+r,"color: #f60; font-size: 14px;")},o.prototype.register=function(e){-1===this.callbacks.indexOf(e)&&this.callbacks.push(e)},o.prototype.unRegister=function(e){this.callbacks.splice(this.callbacks.indexOf(e),1)},o.prototype.getConnectionStatus=function(e,t){var n=this,i=function(){};if(e.ResponseServerStatus){var r=[];Object.keys(this.connections).forEach(function(e){r.push(n.connections[e])}),e.ResponseServerStatus(r)}return t&&(this.register(e),i=function(){n.unRegister(e)}),i},o.prototype.EndLogin=function(t,n,i){e.loginOk=t,this.endLogin.forEach(function(e){e.EndLogin(t,n,i)})},o.prototype.ResponseAuthentication=function(t,i,r){if(this.tmpAuthSegments||(this.tmpAuthSegments=[]),this.tmpAuthSegments.push(r.DuplicateDataOnly(i)),t.segment==e.SegmentInfo.Last){var a=new e.TemplateStorage,o=new e.Tag,l=-1,c=-1;this.authSegments=[];for(var d=0,u=this.tmpAuthSegments;d<u.length;d++){var h=u[d],p=new s(h);this.authSegments.push(p);for(var m=new e.Parser(0,h.length,e.ParserFlags.RealtimeTagSet+e.ParserFlags.WithoutHeader,a);m.Next(h,o,e.TagSet.Login);)switch(e.DEBUG_LOGIN_CS_LOGIN_AUTH_TAGS&&e.logToConsole(e.TagSet.Login,o,h),o.tag){case e.LoginTags.PID:l=o.Int();break;case e.LoginTags.SID:c=o.Int();break;case e.LoginTags.Separator:p.pidSids.push(new n(l,c)),c=-1;break;case e.LoginTags.AccessFeed:o.Int();break;case e.LoginTags.LoginId:case e.LoginTags.ExpireDate:case e.LoginTags.EndTime:case e.LoginTags.Uuid:case e.LoginTags.Thumbprint:case e.LoginTags.Signature:case e.LoginTags.IpAddr:case e.LoginTags.RemoteIp:case e.LoginTags.Namespace:case e.LoginTags.ExtLoginId:break;default:e.DEBUG_LOGIN_CS_LOGIN_AUTH_TAGS&&e.log("Unhandled:",e.tagToStr(e.TagSet.Login,o.tag),o.String(h))}-1!=l&&-1!=c&&p.pidSids.push(new n(l,c))}this.authCounter++,this.tmpAuthSegments=null,e.DEBUG_LOGIN_CS_LOGIN_AUTH&&e.log("ResponseAuthentication",this.authSegments)}},o.prototype.GetAuth=function(e){for(var t=[],n=0,i=this.authSegments;n<i.length;n++){var r=i[n];r.HasPidSid(e)&&t.push(r.buf)}return t},o.prototype.GetAuthRaw=function(){for(var e=[],t=0,n=this.authSegments;t<n.length;t++){var i=n[t];e.push(i.buf)}return e},o}();e.ServerPool=o}(IDS||(IDS={})),function(e){var t=Infront.Instrument,n=function(){function e(e){this.properties=[],this.name=e}return e.prototype.addProperty=function(e){this.properties.push(e)},e}();e.StorageCategoryItem=n;var i=function(){function e(){this.items={}}return e.prototype.addCategory=function(e){var t=new n(e);return this.items[e]=t,t},e}();e.CategoriesResponse=i;var r=function(){function e(e,n){this.extra={},this.instrument=new t(e,n)}return e.prototype.hasValue=function(e){return this.extra&&this.extra.hasOwnProperty(e)&&null!=this.extra[e]},e.prototype.isValid=function(){return t.isValid(this.instrument)},e}();e.StorageListItem=r;var a=function(){};e.StorageListProperties=a;var s=function(){function e(){this.items=[]}return e.prototype.getListProperty=function(e){var t="";return this.listProperties&&this.listProperties.hasOwnProperty(e)&&(t=this.listProperties[e]),t},e}();e.StorageListContent=s;var o=function(){function e(){this.categories={}}return e.prototype.hasCategory=function(e){return this.categories&&this.categories.hasOwnProperty(e)&&null!=this.categories[e]},e.prototype.category=function(e){return this.categories[e]},e}();e.ListResponseItem=o;var l=function(){this.items=[]};e.ListResponse=l;var c=function(){};e.GetFileRequest=c;var d=function(){function t(){this.description="User defined lists",this.xml="",this.pos=0}return t.prototype.setField=function(e,t,n){if(e.hasValue(n)){var i=e.extra[n];i&&t.setAttribute(n,i)}},t.prototype.MakeWatchlist=function(t){if(t.items&&0!=t.items.length){var n=document.implementation.createDocument(null,null,null),i=n.createElement(e.StorageXmlTags.Symbollist);t.listProperties&&(i.setAttribute(e.StorageXmlTags.Account,t.getListProperty(e.StorageXmlTags.Account)),i.setAttribute(e.StorageXmlTags.PortfolioID,t.getListProperty(e.StorageXmlTags.PortfolioID)),i.setAttribute(e.StorageXmlTags.Currency,t.getListProperty(e.StorageXmlTags.Currency))),n.appendChild(i);for(var r=0,a=t.items;r<a.length;r++){var s=a[r];s.isValid()&&((o=n.createElement(e.StorageXmlTags.Symbol)).setAttribute(e.StorageXmlTags.FeedNu,s.instrument.feed.toString()),o.setAttribute(e.StorageXmlTags.SymbolTicker,s.instrument.ticker),this.setField(s,o,e.StorageXmlTags.HoldingSymbolType),this.setField(s,o,e.StorageXmlTags.HoldingSubType),this.setField(s,o,e.StorageXmlTags.HoldingGroup),this.setField(s,o,e.StorageXmlTags.HoldingWeight),this.setField(s,o,e.StorageXmlTags.HoldingVolume),this.setField(s,o,e.StorageXmlTags.HoldingAvgPrice),n.firstChild.appendChild(o))}var o,l=t.referenceIndex;if(l&&l.isValid())(o=n.createElement(e.StorageXmlTags.ReferenceIndex)).setAttribute(e.StorageXmlTags.Feed,l.instrument.feed.toString()),o.setAttribute(e.StorageXmlTags.Ticker,l.instrument.ticker),this.setField(l,o,e.StorageXmlTags.Provider),this.setField(l,o,e.StorageXmlTags.Service),n.firstChild.appendChild(o);var c=new XMLSerializer;this.xml='<?xml version="1.0" encoding="UTF-8"?>'+c.serializeToString(n),e.DEBUG_STORAGE_CS&&e.log("MakeWatchlist",t),e.DEBUG_STORAGE_CS&&e.log(this.xml)}},t}();e.PutFileRequest=d;var u=function(t){function n(n,i,r){var a=t.call(this)||this;return a.title=n,a.listHeader=r,a.type=e.StorageTypes.Mobile_List,a.MakeWatchlist(i),a}return __extends(n,t),n}(d);e.PutMobileListRequest=u;var h=function(){};e.PutFileResponse=h;var p=function(){function t(){this.xml=""}return t.prototype.setField=function(e,t,n){if(t.hasAttribute(n)){var i=t.getAttribute(n);"null"!=i&&(e.extra[n]=i)}},t.prototype.setListProperty=function(e,t,n){if(null!=t&&t.hasAttribute(n)){var i=t.getAttribute(n);"null"!=i&&(e.listProperties||(e.listProperties={}),e.listProperties[n]=i)}},t.prototype.DecodeWatchlist=function(){var t=new s,n=(new DOMParser).parseFromString(this.xml,"text/html"),i=n.getElementsByTagName(e.StorageXmlTags.Symbollist),a=Array.prototype.slice.call(i);this.setListProperty(t,a[0],e.StorageXmlTags.Account),this.setListProperty(t,a[0],e.StorageXmlTags.PortfolioID),this.setListProperty(t,a[0],e.StorageXmlTags.Currency);for(var o=n.getElementsByTagName(e.StorageXmlTags.Symbol),l=0,c=Array.prototype.slice.call(o);l<c.length;l++){var d=c[l],u=parseInt(d.getAttribute(e.StorageXmlTags.FeedNu)),h=d.getAttribute(e.StorageXmlTags.SymbolTicker);if(u>0&&""!=h){var p=new r(u,h);this.setField(p,d,e.StorageXmlTags.HoldingSymbolType),this.setField(p,d,e.StorageXmlTags.HoldingSubType),this.setField(p,d,e.StorageXmlTags.HoldingGroup),this.setField(p,d,e.StorageXmlTags.HoldingWeight),this.setField(p,d,e.StorageXmlTags.HoldingVolume),this.setField(p,d,e.StorageXmlTags.HoldingAvgPrice),t.items.push(p)}}for(var m=n.getElementsByTagName(e.StorageXmlTags.ReferenceIndex),g=0,f=Array.prototype.slice.call(m);g<f.length;g++){var v=f[g];u=parseInt(v.getAttribute(e.StorageXmlTags.Feed)),h=v.getAttribute(e.StorageXmlTags.Ticker),u>0&&""!=h&&(t.referenceIndex=new r(u,h),this.setField(t.referenceIndex,v,e.StorageXmlTags.Provider),this.setField(t.referenceIndex,v,e.StorageXmlTags.Service))}return t},t}();e.GetFileResponse=p;var m=function(){};e.DeleteFileResponse=m;var g=function(t){function n(n,i){var r=t.call(this,i,n,e.ServerType.Storage)||this;return r.requests={},r.conn=new e.ServerConnection(n,i.secure,r,i.login.getAccessFeeds(n),i.login.getHosts(n),r.tagSet,i,r.serverType),r}return __extends(n,t),n.prototype.addCategoryProperty=function(t,n,i){t.Add(e.StorageTags.Category,n),t.Add(e.StorageTags.Property,i)},n.prototype.addLoginInfo=function(t){this.extLoginId?(t.Add(e.StorageTags.UserNamespace,this.namespace),t.Add(e.StorageTags.UserIdentifier,this.extLoginId)):this.addCategoryProperty(t,"login",this.serverPool.login.loginInfo.loginId)},n.prototype.GetCategories=function(t){var n=this.conn.GetRequest(e.StorageRequest.AllCategories,0),i=this.requests[n.uniqueId]=new e.Request;i.callback=t,i.type=e.StorageRequest.AllCategories,this.conn.Send(n,!0)},n.prototype.GetList=function(t){var n=this.conn.GetRequest(e.StorageRequest.Browse,0),i=this.requests[n.uniqueId]=new e.Request;i.callback=t,i.type=e.StorageRequest.Browse,this.addCategoryProperty(n,"type",e.StorageTypes.Mobile_List),this.addLoginInfo(n),this.conn.Send(n,!0)},n.prototype.GetFile=function(t,n){var i=this.conn.GetRequest(e.StorageRequest.Download,0),r=this.requests[i.uniqueId]=new e.Request;r.callback=n,r.type=e.StorageRequest.Download,r.request=t,i.Add(e.StorageTags.ContentId,t.id),this.addLoginInfo(i),this.conn.Send(i,!0)},n.prototype.isValidCategory=function(t){switch(t){case e.StorageXmlTags.IsPortfolio:return!0;default:return!1}},n.prototype.PutFile=function(t,n){for(var i=0;i<t.xml.length;){var r=this.conn.GetRequest(e.StorageRequest.Upload,0),a=this.requests[r.uniqueId]=new e.Request;if(a.callback=n,a.type=e.StorageRequest.Upload,a.request=t,t.listHeader&&t.listHeader.categories)for(var s in t.listHeader.categories)if(t.listHeader.categories.hasOwnProperty(s)&&this.isValidCategory(s)){var o=t.listHeader.categories[s];o&&this.addCategoryProperty(r,s,o)}0==i&&(this.addLoginInfo(r),r.Add(e.StorageTags.Title,t.title),r.Add(e.StorageTags.Description,t.description),this.addCategoryProperty(r,"type",e.StorageTypes.Mobile_List),r.AddInt(e.StorageTags.CreatePolicy,e.StorageCreatePolicy.PropertyAndCategory),r.AddInt(e.StorageTags.UniquePolicy,e.StorageUniquePolicy.CategoryTitle));var l=8e3-r.pos;t.xml.length-i<=l?r.AddInt(e.StorageTags.MultiPacket,0==i?e.StorageMultiPacket.BeginAndEnd:e.StorageMultiPacket.End):r.AddInt(e.StorageTags.MultiPacket,0==i?e.StorageMultiPacket.Begin:e.StorageMultiPacket.Middle),r.AddString(e.StorageTags.ContentData,t.xml.slice(i,l+i)),i+=Math.min(t.xml.length-i,l),this.conn.Send(r,!0)}},n.prototype.DeleteFile=function(t,n){var i=this.conn.GetRequest(e.StorageRequest.Delete,0),r=this.requests[i.uniqueId]=new e.Request;r.callback=n,r.type=e.StorageRequest.Delete,this.extLoginId&&this.addLoginInfo(i),i.Add(e.StorageTags.ContentId,t),this.conn.Send(i,!0)},n.prototype.ResponseCategories=function(t,n){for(var r=new i,a=0;a<n.data.length;a++){var s=n.data[a].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag,c=void 0;o.Next(s,l,this.tagSet);)switch(e.DEBUG_STORAGE_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.StorageTags.Category:c=r.addCategory(l.String(s));break;case e.StorageTags.Property:c&&c.addProperty(l.String(s));break;case e.StorageTags.Separator:break;default:e.DEBUG_STORAGE_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}e.DEBUG_STORAGE_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),r),n.callback.ResponseStorageCategories(new e.ResponseHeader,r)},n.prototype.ResponseList=function(t,n){for(var i=new l,r=new o,a=0;a<n.data.length;a++){var s=n.data[a].buf,c=new e.Parser(0,s.length);c.SkipHeader(s);for(var d=new e.Tag,u="";c.Next(s,d,this.tagSet);)switch(e.DEBUG_STORAGE_CS_TAGS&&e.logToConsole(this.tagSet,d,s),d.tag){case e.StorageTags.ContentId:r.id=d.String(s);break;case e.StorageTags.Category:u=d.String(s);break;case e.StorageTags.Property:""!=u&&(r.categories[u]=d.String(s)),u="";break;case e.StorageTags.Title:r.title=d.String(s);break;case e.StorageTags.Description:r.description=d.String(s);break;case e.StorageTags.Crc32:r.crc32=d.Int(s);break;case e.StorageTags.Size:r.size=d.Int(s);break;case e.StorageTags.Separator:i.items.push(r),r=new o;break;default:e.DEBUG_STORAGE_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,d.tag),d.String(s))}}e.DEBUG_STORAGE_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i),n.callback.ResponseStorageList(new e.ResponseHeader,i)},n.prototype.ResponseGetFile=function(t,n){for(var i=new p,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=new e.Parser(0,a.length);s.SkipHeader(a);for(var o=new e.Tag;s.Next(a,o,this.tagSet);)switch(e.DEBUG_STORAGE_CS_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case e.StorageTags.ContentId:i.contentId=o.Int(a);break;case e.StorageTags.Title:i.title=o.String(a);break;case e.StorageTags.Description:i.description=o.String(a);break;case e.StorageTags.Crc32:i.crc32=o.Int(a);break;case e.StorageTags.ContentData:i.xml+=o.String(a);break;case e.StorageTags.Size:i.size=o.Int(a);break;case e.StorageTags.MultiPacket:case e.StorageTags.Separator:break;default:e.DEBUG_STORAGE_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}e.DEBUG_STORAGE_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i),n.callback.ResponseStorageGetFile(new e.ResponseHeader,i)},n.prototype.ResponseDeleteFile=function(t,n){for(var i=new m,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=new e.Parser(0,a.length);s.SkipHeader(a);for(var o=new e.Tag;s.Next(a,o,this.tagSet);)switch(e.DEBUG_STORAGE_CS_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case 6:break;default:e.DEBUG_STORAGE_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}e.DEBUG_STORAGE_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i),n.callback.ResponseStorageDeleteFile(new e.ResponseHeader,i)},n.prototype.ResponsePutFile=function(t,n){for(var i=new h,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=new e.Parser(0,a.length);s.SkipHeader(a);for(var o=new e.Tag;s.Next(a,o,this.tagSet);)switch(e.DEBUG_STORAGE_CS_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case e.StorageTags.ContentId:i.id=o.String(a);break;case e.StorageTags.Crc32:i.crc32=o.Int(a);break;case e.StorageTags.Size:i.size=o.Int(a);break;case e.StorageTags.Title:i.title=o.String(a);break;case e.StorageTags.Description:i.description=o.String(a);break;case e.StorageTags.MultiPacket:case e.StorageTags.Separator:break;default:e.DEBUG_STORAGE_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}i.crc32&&(e.DEBUG_STORAGE_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i),n.callback.ResponseStoragePutFile(new e.ResponseHeader,i))},n.prototype.lowLevelData=function(t,n,i){var r=this.requests[t.uniqueId];if(r&&(r.responseNu++,r.data.push(new e.ResponseItem(i.DuplicateData(n))),t.segment==e.SegmentInfo.Last)){switch(r.type){case e.StorageRequest.AllCategories:this.ResponseCategories(t,r);break;case e.StorageRequest.Browse:this.ResponseList(t,r);break;case e.StorageRequest.Download:this.ResponseGetFile(t,r);break;case e.StorageRequest.Delete:this.ResponseDeleteFile(t,r);break;case e.StorageRequest.Upload:this.ResponsePutFile(t,r)}delete this.requests[t.uniqueId]}},n.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId]),e.log("%c"+this.ps.toStr()+" Error: "+i,"color: #f60; font-size: 14px;")},n.prototype.lowLevelConnect=function(e,n){t.prototype.lowLevelConnect.call(this,e,n)},n.prototype.lowLevelDisconnect=function(e,n,i){t.prototype.lowLevelDisconnect.call(this,e,n,i)},n}(e.BaseIDSServer);e.StorageServer=g}(IDS||(IDS={})),function(e){var t=Infront.Instrument,n=function(e){this.refCount=0,this.obj=e},i=function(){function t(){this.refCount=0,this.os=[]}return t.prototype.GetObj=function(e){for(var t=0,n=this.os;t<n.length;t++){var i=n[t];if(i.obj==e)return i}return null},t.prototype.GetObjRefCount=function(e){var t=this.GetObj(e);return null==t?0:t.refCount},t.prototype.GetRef=function(){return this.refCount},t.prototype.IncRef=function(e){var t=this.GetObj(t);return this.refCount++,t?t.refCount++:this.os.push(new n(e)),1==this.refCount},t.prototype.DecRef=function(e,t){if(t)return this.UnbindObj(t);if(this.refCount--,e){var n=this.GetObj(n);if(!n)return 0==this.refCount;if(n.refCount--,n.refCount>1)return 0==this.refCount;this.os.splice(this.os.indexOf(n),1)}return 0==this.refCount},t.prototype.UnbindObj=function(t){var n=this.GetObj(t);return!!n&&(this.refCount-=n.refCount,this.refCount<0&&e.log("RefCount is < 0 in UnbindObj"),this.os.splice(this.os.indexOf(n),1),0==this.refCount)},t}();e.OneSubscribe=i;var r=function(){this.symbols={}};e.SubscribeFeed=r;var a=function(){function n(){this.feeds={},this.symbols={}}return n.prototype.HasFeed=function(e,t){void 0===t&&(t=null);var n=this.feeds[e];return!!n&&(t?n.GetObjRefCount(t)>0:n.GetRef()>0)},n.prototype.HasSymbol=function(e,t,n){void 0===n&&(n=null);var i=this.symbols[e];if(null==i)return!1;var r=i[t];return null!=r&&(n?r.GetObjRefCount(n)>0:r.GetRef()>0)},n.prototype.HasFeedOrSymbol=function(e,t,n){return void 0===n&&(n=null),this.HasFeed(e,n)||this.HasSymbol(e,t,n)},n.prototype.Empty=function(){return 0==Object.keys(this.symbols).length&&0==Object.keys(this.feeds).length},n.prototype.Clear=function(){this.feeds={},this.symbols={}},n.prototype.Count=function(){return Object.keys(this.symbols).length+Object.keys(this.feeds).length},n.prototype.AddFeed=function(t,n){void 0===n&&(n=null);var r=this.feeds[t];return r||(r=this.feeds[t]=new i),e.DEBUG_SUBSCRIPTIONS&&e.log("Subscribe feed",t,"RefCount:",r.GetRef()+1),r.IncRef(n)},n.prototype.DelFeed=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=!1);var r=this.feeds[t];return e.DEBUG_SUBSCRIPTIONS&&e.log("Unsubscribe feed",t,"RefCount:",r.GetRef()-1),!r||r.DecRef(n,i)},n.prototype.AddSymbol=function(t,n,a){void 0===a&&(a=null);var s=this.symbols[t];s||(s=this.symbols[t]=new r);var o=s.symbols[n];return null==o&&(o=s.symbols[n]=new i),e.DEBUG_SUBSCRIPTIONS&&e.log("Subscribe symbol",t,n,"RefCount:",o.GetRef()+1),o.IncRef(a)},n.prototype.DelSymbol=function(t,n,i,r){void 0===i&&(i=null),void 0===r&&(r=!1);var a=this.symbols[t];if(!a)return!0;var s=a.symbols[n];return!s||(e.DEBUG_SUBSCRIPTIONS&&e.log("Unsubscribe symbol",t,n,"RefCount:",s.GetRef()-1),!!s.DecRef(i,r)&&(delete a.symbols[n],InfrontUtil.isEmptyObject(a.symbols)&&delete this.symbols[t],!0))},n.prototype.GetSubscribedSymbols=function(e,t){void 0===t&&(t=null);var n=[],i=this.symbols[e];if(null==i)return n;for(var r in i.symbols)t?i.symbols[r].GetObjRefCount(t)>0&&n.push(r):n.push(r);return n},n.prototype.GetSubscribedInstruments=function(e){void 0===e&&(e=null);var n=[];for(var i in this.feeds){var r=this.feeds[i];(e?r.GetObjRefCount(e)>0:r.GetRef()>0)&&n.push(new t(parseInt(i),""))}for(var i in this.symbols){var a=this.symbols[i];if(a)for(var s in a){var o=a.symbols[s];o&&(e?o.GetObjRefCount(e)>0:o.GetRef()>0)&&n.push(new t(parseInt(i),s))}}return n},n}();e.SubscriptionDb=a}(IDS||(IDS={})),function(e){function t(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=""),e||t||n||"-"}var n=Infront.Instrument,i=Infront.FeedProperty,r=Infront.SymbolType,a=Infront.Value,s=e.ToMws.OrderTypeToStr,o=function(){function e(){}return e.PortfolioName="PortfolioName",e}();e.TradingConstants=o;var l=function(){function t(){}return t.prototype.getFailMessage=function(){return this.failCode>0?this.failMessage?this.failMessage:e.failCodeToStr(this.failCode):""},t.prototype.success=function(){return null==this.failCode||this.failCode===e.FailCodes.ErrorOk},t}();e.BaseTradeResponse=l;var c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.hasServerProp=function(e){return 0!=(this.serverProps&e)},n.prototype.hasServerProp2=function(e){return 0!=(this.serverProps2&e)},n.prototype.hasServerProp3=function(e){return 0!=(this.serverProps3&e)},n.prototype.hasServerProp4=function(e){return 0!=(this.serverProps4&e)},n.prototype.hasUserProp=function(e){return 0!=(this.userProps&e)},n.prototype.logStreamingDetails=function(t){void 0===t&&(t=""),this.hasServerProp(e.ServerProperties.NoPortfolioTradesUpdate)?e.log(t,"Realtime portfolio updates sent by server"):e.log(t,"Portfolio updates must be requested by client"),this.hasServerProp(e.ServerProperties.NoTradingPower)?e.log(t,"Server does not support trading power"):!this.hasServerProp(e.ServerProperties.NoPortfolioTradesUpdate)||this.hasServerProp4(e.ServerProperties4.TpNoFeed)?e.log(t,"Trading power updates must be requested by client"):e.log(t,"Realtime trading power updates sent by server")},n.prototype.ToMws=function(){var t={version:"2.0.0",build:"IDS 1.0.0",remote_address:"",session_token:this.loginToken,signed_token:this.LoginSignedToken,session_timeout:3e5,change_password:this.serverProps&e.ServerProperties.ChangePassword,internal_user:!!this.internalUser&&this.internalUser};return e.DEBUG_TRADING_LOGIN_CS&&e.log("login response",t),t},n}(l);e.LoginResponse=c;var d,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l);e.PortfolioNamesResponse=u,e.getValue=t,function(e){e.NotApplicable="N/A",e.NotRequired="OK",e.NotFound="Not found on mapping server",e.Mapped="Mapped",e.NoAccess="No access to feed"}(d||(d={}));var h,p=function(){function n(){this.data={}}return n.prototype.isEmpty=function(){return InfrontUtil.isEmptyObject(this.data)},n.prototype.inspect=function(){var t={};t.portfolio=this.portfolio,t.symbolMappingStatus=this.symbolMappingStatus;for(var n=0,i=Object.keys(this.data);n<i.length;n++){var r=i[n],a=this.data[r];t[e.tagToStr(e.TagSet.OrderEntry,Number(r))]=a.get()}return t},n.prototype.getVal=function(e,t){void 0===t&&(t=!1);var n=this.data[e];return!n&&t&&(n=this.data[e]=new a),n},n.prototype.getValue=function(e){var t=this.getVal(e);return null==t?null:t.get()},n.prototype.setValue=function(e,t){this.getVal(e,!0).set(t)},n.prototype.addValueToObject=function(e,t,n){var i=this.data[n];i&&(e[t]=i.get())},n.prototype.addValueCallbackToObject=function(e,t,n,i){var r=this.data[n];r&&(e[t]=i(r.get()))},n.prototype.hasUnresolvedSymbol=function(){var t=this.getValue(e.TradingTag.MoneyKind);return!(null!=t&&t!=e.MoneyKind.Undefined||this.getValue(e.TradingTag.Symbol)&&this.getValue(e.TradingTag.Feed))},n.prototype.getKey=function(){var n=this.getValue(e.TradingTag.MoneyKind),i="";i=null==n||n==e.MoneyKind.Undefined?t(this.getValue(e.TradingTag.Market))+"|"+t(this.getValue(e.TradingTag.Isin),this.getValue(e.TradingTag.Symbol))+"|"+t(this.getValue(e.TradingTag.Currency)):e.moneyKindToStr(n)+"|"+t(this.getValue(e.TradingTag.Symbol))+"|"+t(this.getValue(e.TradingTag.Currency));var r=this.getValue(e.TradingTag.PositionType);return(i+=r?"|"+r:"").toUpperCase()},n.prototype.applyFeedSymbol=function(t){this.setValue(e.TradingTag.Feed,t.feed),this.setValue(e.TradingTag.Symbol,t.ticker)},n}();e.PortfolioBaseItem=p,function(e){e[e.Position=0]="Position",e[e.Cash=1]="Cash",e[e.Value=2]="Value",e[e.Alert=3]="Alert"}(h=e.PositionType||(e.PositionType={}));var m=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.getPortfolioItemType=function(){switch(this.getValue(e.TradingTag.MoneyKind)){case null:case void 0:case e.MoneyKind.Undefined:return h.Position;case e.MoneyKind.Cash:return h.Cash;case e.MoneyKind.StopoutState:case e.MoneyKind.PortfolioState:return h.Alert;default:return h.Value}},i.prototype.getCustomMoneyKindData=function(){var t=this.getValue(e.TradingTag.CustomMoneyKindType),n=this.getValue(e.TradingTag.CustomMoneyKindData);switch(t){case e.CustomMoneyKindType.Value:case e.CustomMoneyKindType.Percent:return Number(n);default:return n}},i.prototype.positionToMws=function(){var t={},i=this.getValue(e.TradingTag.Invested);switch(t.portfolio=this.portfolio,this.getPortfolioItemType()){case h.Position:t.invested=this.getValue(e.TradingTag.Invested),t.volume=this.getValue(e.TradingTag.Volume),this.addValueToObject(t,"base_invested",e.TradingTag.BaseInvested),this.addValueToObject(t,"base_result",e.TradingTag.BaseResult),this.addValueToObject(t,"position_value",e.TradingTag.PositionValue),this.addValueToObject(t,"profit_loss",e.TradingTag.ProfitLoss),this.addValueToObject(t,"realized_result",e.TradingTag.RealizedResult),this.addValueToObject(t,"collateral",e.TradingTag.Collateral),this.addValueToObject(t,"loan_to_value_ratio",e.TradingTag.LoanToValueRatio),this.addValueToObject(t,"type",e.TradingTag.PositionType);var r=new n(this.getValue(e.TradingTag.Feed),this.getValue(e.TradingTag.Symbol));this.addValueToObject(r,"underlying",e.TradingTag.Underlying),this.addValueCallbackToObject(r,"instrument_type",e.TradingTag.InstrType,e.Symbol.SymbolTypeToStr),this.addValueToObject(r,"instrument_description",e.TradingTag.InstrDescr),this.addValueToObject(r,"market",e.TradingTag.Market),this.addValueToObject(r,"currency",e.TradingTag.Currency),this.addValueToObject(r,"isin",e.TradingTag.Isin),this.addValueToObject(r,"exchange_instrument_id",e.TradingTag.ExchInstrId),t.instrument=r;break;case h.Cash:t.amount=i?-i:0,t.cash={currency:this.getValue(e.TradingTag.Currency)};break;case h.Value:t.type=e.CustomMoneyKindTypeToStr(this.getValue(e.TradingTag.CustomMoneyKindType)),t.name=this.getValue(e.TradingTag.CustomMoneyKindId),t.value=this.getCustomMoneyKindData(),t.currency=this.getValue(e.TradingTag.Currency);break;case h.Alert:t.name=e.moneyKindToStr(this.getValue(e.TradingTag.MoneyKind)),t.state=this.getValue(e.TradingTag.PortfolioStateDescription)}return t},i.prototype.ToMws=function(){switch(this.getPortfolioItemType()){case h.Position:case h.Cash:return{position:this.positionToMws()};case h.Value:return{value:this.positionToMws()};case h.Alert:return{alert:this.positionToMws()}}},i}(p);e.PortfolioPosition=m;var g=function(t){function n(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.items=[],e&&(n.portfolio=e,n.items=e.getPositions()),n}return __extends(n,t),n.prototype.ToMws=function(t){void 0===t&&(t=!1);for(var n=0,i=[],r=[],a=[],s=0,o=this.items;s<o.length;s++){var l=o[s];switch(n+=l.getValue(e.TradingTag.Invested),l.getPortfolioItemType()){case h.Position:case h.Cash:i.push(t?l.inspect():l.positionToMws());break;case h.Value:r.push(t?l.inspect():l.positionToMws());break;case h.Alert:a.push(t?l.inspect():l.positionToMws())}}return{positions:i,values:r,alerts:a,total_invested:n}},n}(l);e.PortfolioResponse=g;var f=function(){function e(e){void 0===e&&(e=null),e&&this.assign(e),this.timeReceived=performance.now()}return e.prototype.assign=function(e){this.portfolio=e.portfolio,this.displayPortfolio=e.displayPortfolio,this.tradingPower=e.tradingPower,this.tradingPowerStatus=e.tradingPowerStatus,this.currency=e.currency,this.timeReceived=e.timeReceived},e.prototype.isStale=function(){return performance.now()-this.timeReceived>1e4},e.prototype.ToMws=function(){return __assign({portfolio:this.portfolio,trading_power:this.tradingPower,base_trading_power:this.tradingPower,currency:this.currency,base_currency:this.baseCurrency?this.baseCurrency:this.currency},this.symbol&&{symbol:this.symbol},this.loanToValueRatio&&{margin_rate:this.loanToValueRatio},void 0!==this.shortable&&{is_shortable:this.shortable})},e}();e.TradingPowerItem=f;var v=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.success=function(){return null==this.failCode||this.failCode===e.FailCodes.ErrorOk},n}(f);e.TradingPowerResponse=v;var y=function(){};e.DropdownItem=y;var b=function(){function t(e){void 0===e&&(e=null),this.id=e}return t.prototype.addDropdownItem=function(e){this.dropdown_items||(this.dropdown_items=[]),this.dropdown_items.push(e)},t.prototype.addFeed=function(e){this.feeds||(this.feeds=[]),this.feeds.push(e)},t.prototype.isHidden=function(t){var n=!!this.property&&0!=(this.property&e.ParamProperties.Hidden),i=!(!this.feeds||!t)&&this.feeds&&this.feeds.indexOf(t)>-1,r=!!this.feeds&&this.feeds&&this.feeds.indexOf(4294967295)>-1,a=n||i||r;return a&&this.dropdown_items&&this.dropdown_items.length>0&&(this.value=this.dropdown_items[0].value),a},t.prototype.getParamProperties=function(){return InfrontUtil.getEnumStrings(this.property,e.paramPropertiesToStr)},t.prototype.getDefaultDropdownValue=function(e){if(e)for(var t=0,n=this.dropdown_items;t<n.length;t++){var i=n[t];if(i.label===e)return i.value}return null},t.prototype.ToMws=function(t){var n=this.dropdown_items?this.getDefaultDropdownValue(this.default):this.default;return __assign({},this,{modify:0==(this.property&e.ParamProperties.NoModify),hidden:this.isHidden(t),type:e.ToMws.ParamTypeToStr(this.typeNu),properties:this.getParamProperties()},n&&{default:n})},t}();e.AlgoParamItem=b;var T=function(){function t(e){void 0===e&&(e=null),this.id=e}return t.prototype.addParamItem=function(e){this.params||(this.params=[]),this.params.push(e)},t.prototype.getAlgoProperties=function(){return InfrontUtil.getEnumStrings(this.properties,e.algoPropertiesToStr)},t.prototype.availableForMarket=function(e){return!e||!this.markets||this.markets.indexOf(e)>-1},t.prototype.ToMws=function(e){var t=[];if(this.params)for(var n=0,i=this.params;n<i.length;n++){var r=i[n];t.push(r.ToMws(e))}return __assign({id:this.id,label:this.label,description:this.description,params:t,markets:this.markets,properties:this.getAlgoProperties()},this.brokerId&&{broker_id:this.brokerId},this.userId&&{user_id:this.userId})},t}();e.AlgoItem=T;var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t}return __extends(t,e),t.prototype.getAlgosForMarket=function(e){for(var t=[],n=0,i=this.items;n<i.length;n++){var r=i[n];r.availableForMarket(e)&&t.push(r)}return t},t.prototype.ToMws=function(e,t){for(var n=[],i=0,r=this.items;i<r.length;i++){var a=r[i];a.availableForMarket(t)&&n.push(a.ToMws(e))}return{algos:n}},t}(l);e.AlgorithmsResponse=S;var C=function(){function t(){}return t.prototype.addDropdownItem=function(e,t){this.dropdown_items||(this.dropdown_items=[]),t?this.dropdown_items.unshift(e):this.dropdown_items.push(e)},t.prototype.addOrderType=function(e){this.forOrderTypes||(this.forOrderTypes=[]),this.forOrderTypes.push(s(e))},t.prototype.addFeed=function(e){this.forFeeds||(this.forFeeds=[]),this.forFeeds.push(e)},t.prototype.addDisplayValues=function(t,n,i){var r=!1;switch(this.typeNu){case e.ParamType.Dropdown:case e.ParamType.SingleChoiceListEntry:case e.ParamType.SingleChoiceListDefault:case e.ParamType.ValidSession:if(void 0!==t){var a=new y;a.label=t,a.value=n,a.componentCode=i,this.addDropdownItem(a,this.typeNu===e.ParamType.SingleChoiceListDefault)}break;case e.ParamType.DropdownFreeText:case e.ParamType.DropdownFreeTextDefault:break;case e.ParamType.FreeText:case e.ParamType.Int:case e.ParamType.Double:case e.ParamType.StopPrice:case e.ParamType.Date:case e.ParamType.Price:case e.ParamType.VolumeLots:this.value=n,r=!0;break;case e.ParamType.InitCode:case e.ParamType.DoneCode:this.label=i,r=!0}return r},t.prototype.ToMws=function(){this.modify=0==(this.properties&e.ParamProperties.NoModify),this.type=e.ToMws.ParamTypeToStr(this.typeNu)},t}();e.CustomField=C;var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.dropdownItems={},t}return __extends(t,e),t.prototype.ToMws=function(e){for(var t=[],n=0,i=this.items;n<i.length;n++){var r=i[n];r.ToMws(),"*"!==r.market&&r.market!==e||t.push(r)}return t},t}(l);e.CustomFieldsResponse=I;var _=function(){function t(e){this.orderTypes=[],this.feeds=[],this.marketName=e}return t.prototype.hasMarketProp=function(e){return 0!=(this.marketProperties&e)},t.prototype.hasMarketProp2=function(e){return 0!=(this.marketProperties2&e)},t.prototype.hasMarketProp3=function(e){return 0!=(this.marketProperties3&e)},t.prototype.orderTypesToStr=function(){for(var t=[],n=0,i=this.orderTypes;n<i.length;n++){var r=i[n];t.push(e.ToMws.OrderTypeToStr(r))}return t},t.prototype.findFeeds=function(e){this.feeds=e.getFeedsForMarket(this.marketName)},t.prototype.ToMws=function(){return{code:this.marketName,feeds:this.feeds,order_types:this.orderTypesToStr(),max_valid_days:this.maxValidDays}},t}();e.MarketPlace=_;var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.markets=[],t}return __extends(t,e),t.prototype.getMarket=function(e){var t=this.markets[e];return t||(t=this.markets[e]=new _(e)),t},t.prototype.findFeedsForMarkets=function(e){for(var t in this.markets)this.markets[t].findFeeds(e)},t.prototype.ToMws=function(){var e=[];for(var t in this.markets)e.push(this.markets[t].ToMws());return e},t}(l);e.MarketPropertiesResponse=M;var E=function(){function e(e,t,n){this.id=e,this.value=t,this.label=n}return e.prototype.setLabel=function(e){this.label=e},e}();e.CustomTag=E;var w=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.getAvgPrice=function(){var t,n=0,i=0;if(this.trades&&this.getValue(e.TradingTag.VolumeFilled)>0)for(var r in this.trades){var a=this.trades[r];n+=a.getValue(e.TradingTag.Volume)*a.getValue(e.TradingTag.Price),i+=a.getValue(e.TradingTag.Volume)}return i>0&&(t=InfrontUtil.roundToPrecision(n/i)),t},i.prototype.inspect=function(){var e=t.prototype.inspect.call(this);if(this.orderStatusStr&&(e.orderStatusStr=this.orderStatusStr),this.customTags&&(e.customTags=this.customTags),this.algo&&(e.algo=this.algo),this.trades){var n=[];for(var i in this.trades)n.push(this.trades[i].inspect());e.trades=n}return e},i.prototype.orderId=function(){return this.getValue(e.TradingTag.OrderId)},i.prototype.orderStatus=function(){return this.getValue(e.TradingTag.OrderStatus)},i.prototype.setOrderStatus=function(t){this.setValue(e.TradingTag.OrderStatus,t),this.orderStatusStr=e.orderStatusToStr(t)},i.prototype.getRemainingVolume=function(){return this.getValue(e.TradingTag.Volume)-this.getValue(e.TradingTag.VolumeFilled)},i.prototype.getDisplayOrderStatus=function(){var t=this.getValue(e.TradingTag.OrderStatus);return t==e.OrderStatus.Deleted?0==this.getRemainingVolume()&&(t=this.getValue(e.TradingTag.OrderFailDescription)?e.OrderStatus.DeletedRefused:e.OrderStatus.DeletedExecuted):this.getValue(e.TradingTag.OrderType)==e.OrderTypes.Parent&&(t=e.OrderStatus.Parent),e.ToMws.OrderStatusToStr(t)},i.prototype.addCustomTag=function(e,t){this.customTags||(this.customTags=[]),this.customTags.push(new E(e,t))},i.prototype.addTrade=function(t){t.order=this,t.getVal(e.TradingTag.Currency),t.getValue(e.TradingTag.Currency)||t.setValue(e.TradingTag.Currency,this.getValue(e.TradingTag.Currency)),this.trades||(this.trades={}),this.trades[t.getValue(e.TradingTag.TradeId)]=t},i.prototype.getOrderRequest=function(){var t=new V;return t.portfolio=this.portfolio,t.orderId=this.getValue(e.TradingTag.OrderId),t.orderType=this.getValue(e.TradingTag.OrderType),t.orderStatus=this.getValue(e.TradingTag.OrderStatus),t.symbol=this.getValue(e.TradingTag.Symbol),t.symbolRef=this.symbolRef,t.feedNu=this.getValue(e.TradingTag.Feed),t.exchOrderId=this.getValue(e.TradingTag.ExchOrderId),t},i.prototype.canModify=function(t){var n=[e.OrderStatus.Inactive,e.OrderStatus.Offline,e.OrderStatus.ErrorSystem,e.OrderStatus.ErrorTradingPower,e.OrderStatus.ErrorLimit,e.OrderStatus.Abandoned];return!t.hasUserProp(e.UserProperties.InactiveOnly)&&(n=n.concat([e.OrderStatus.Exchange,e.OrderStatus.Internal,e.OrderStatus.Monitor])),-1!=n.indexOf(this.orderStatus())},i.prototype.assign=function(e){for(var t=0,n=Object.keys(e.data);t<n.length;t++){var i=n[t],r=e.data[i];this.setValue(Number(i),r.get())}},i.prototype.ToMws=function(){var t={},i=(this.getAvgPrice(),this.algo);t.portfolio=this.portfolio,t.order_id=Number(this.getValue(e.TradingTag.OrderId)),t.customer_id=this.getValue(e.TradingTag.CustomerId),t.buy_or_sell=this.getValue(e.TradingTag.BuyOrSell)===W.buy?e.MWSBuyOrSell.BUY:e.MWSBuyOrSell.SELL,t.price=InfrontUtil.roundToPrecision(this.getValue(e.TradingTag.BuyOrSell)===W.buy?this.getValue(e.TradingTag.Bid):this.getValue(e.TradingTag.Ask)),this.addValueToObject(t,"avg_price",e.TradingTag.AveragePrice),t.volume=this.getValue(e.TradingTag.Volume),t.open_volume=this.getValue(e.TradingTag.OpenVolume),t.order_type=e.ToMws.OrderTypeToStr(this.getValue(e.TradingTag.OrderType)),t.created=e.MWSMakeFullDateTime(this.getValue(e.TradingTag.CreateDate),this.getValue(e.TradingTag.Time)),t.created_time_us=this.getValue(e.TradingTag.TimeUs),t.created=e.MWSMakeFullDateTime(this.getValue(e.TradingTag.ChangeDate),this.getValue(e.TradingTag.ChangeTime)),t.changed_time_us=this.getValue(e.TradingTag.ChangeTimeUs),this.addValueCallbackToObject(t,"valid_until",e.TradingTag.ValidDate,e.MWSMakeDate),t.order_status=this.getDisplayOrderStatus(),t.volume_filled=this.getValue(e.TradingTag.VolumeFilled),t.accumulated_traded=this.getValue(e.TradingTag.AccTradedVolume),t.fail_code=this.getValue(e.TradingTag.OrderFailCode),t.fail_description=this.getValue(e.TradingTag.OrderFailDescription),t.exec_market=this.getValue(e.TradingTag.ExecutionMarket),t.custom_tags=this.customTags?this.customTags:[],i&&(t.algo_id=i.id,t.algo_params=i.params);var r=new n(this.getValue(e.TradingTag.Feed),this.getValue(e.TradingTag.Symbol));return this.addValueToObject(r,"under_ticker",e.TradingTag.Underlying),this.addValueCallbackToObject(r,"instrument_type",e.TradingTag.InstrType,e.Symbol.SymbolTypeToStr),this.addValueToObject(r,"instrument_description",e.TradingTag.InstrDescr),this.addValueToObject(r,"market",e.TradingTag.Market),this.addValueToObject(r,"currency",e.TradingTag.Currency),this.addValueToObject(r,"isin",e.TradingTag.Isin),this.addValueToObject(r,"exchange_instrument_id",e.TradingTag.ExchInstrId),t.instrument=r,t},i.prototype.hasErrorContent=function(){var t=this.getValue(e.TradingTag.OrderFailCode),n=this.getValue(e.TradingTag.OrderFailDescription);return null!=t&&""!=t&&null!=n&&""!=n},i}(p);e.OrderStatusItem=w;var A=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.orderId=function(){return this.getValue(e.TradingTag.OrderId)},i.prototype.tradeId=function(){return this.getValue(e.TradingTag.TradeId)},i.prototype.ToMws=function(){var t={};t.portfolio=this.portfolio,t.order_id=Number(this.getValue(e.TradingTag.OrderId)),t.trade_id=Number(this.getValue(e.TradingTag.TradeId)),t.exchange_order_id=this.getValue(e.TradingTag.ExchOrderId),t.exchange_trade_id=this.getValue(e.TradingTag.ExchTradeId),this.addValueToObject(t,"exchange_trade_id2",e.TradingTag.ExchTradeId2),t.trade_time=e.MWSMakeFullDateTime(this.getValue(e.TradingTag.TradeDate),this.getValue(e.TradingTag.Time)),t.buy_or_sell=this.getValue(e.TradingTag.BuyOrSell)===W.buy?e.MWSBuyOrSell.BUY:e.MWSBuyOrSell.SELL,t.price=InfrontUtil.roundToPrecision(this.getValue(e.TradingTag.Price)),t.volume=this.getValue(e.TradingTag.Volume),t.customer_id=this.getValue(e.TradingTag.CustomerId),t.fee=this.getValue(e.TradingTag.Fee),t.forex_rate=this.getValue(e.TradingTag.FxRate),t.invested=this.getValue(e.TradingTag.Invested),t.deleted_trade=this.getValue(e.TradingTag.DeletedTrade),t.verified_trade=this.getValue(e.TradingTag.VerifiedTrade),t.exec_market=this.getValue(e.TradingTag.ExecutionMarket);var i=new n(this.getValue(e.TradingTag.Feed),this.getValue(e.TradingTag.Symbol));return this.addValueToObject(i,"underlying",e.TradingTag.Underlying),this.addValueCallbackToObject(i,"instrument_type",e.TradingTag.InstrType,e.Symbol.SymbolTypeToStr),this.addValueToObject(i,"instrument_description",e.TradingTag.InstrDescr),this.addValueToObject(i,"market",e.TradingTag.Market),this.addValueToObject(i,"currency",e.TradingTag.Currency),this.addValueToObject(i,"isin",e.TradingTag.Isin),this.addValueToObject(i,"exchange_instrument_id",e.TradingTag.ExchInstrId),t.instrument=i,t},i}(p);e.TradeItem=A;var D=function(){function t(t){this.buyVwap=0,this.buyVolume=0,this.buyValue=0,this.sellVwap=0,this.sellVolume=0,this.sellValue=0,this.netPrice=0,this.netVolume=0,this.netValue=0,this.portfolio=t.portfolio,this.market=t.getValue(e.TradingTag.Market),this.isin=t.getValue(e.TradingTag.Isin),this.currency=t.getValue(e.TradingTag.Currency),this.symbol=t.getValue(e.TradingTag.Symbol),this.exchangeInstrumentId=t.getValue(e.TradingTag.ExchInstrId)}return t.prototype.getContractSize=function(){return this.symbolRef?this.symbolRef.getValueOrNull(e.RealtimeTags.ContractSize):1},t.prototype.addTrade=function(t){t.getValue(e.TradingTag.BuyOrSell)==W.buy?(this.buyVolume+=t.getValue(e.TradingTag.Volume),this.buyValue+=t.getValue(e.TradingTag.Volume)*t.getValue(e.TradingTag.Price),this.buyVwap=this.buyVolume?this.buyValue/this.buyVolume:0):(this.sellVolume+=t.getValue(e.TradingTag.Volume),this.sellValue+=t.getValue(e.TradingTag.Volume)*t.getValue(e.TradingTag.Price),this.sellVwap=this.sellVolume?this.sellValue/this.sellVolume:0),this.netValue=this.sellValue-this.buyValue,this.netVolume=this.buyVolume-this.sellVolume,this.netPrice=0==InfrontUtil.roundToPrecision(this.netVolume)?0:Math.abs(this.netValue)/this.netVolume*this.getContractSize()},t.prototype.ToMws=function(){return{portfolio:this.portfolio,instrument:{market:this.market,isin:this.isin,currency:this.currency,ticker:this.symbol,exchange_instrument_id:this.exchangeInstrumentId},buy_vwap:InfrontUtil.roundToPrecision(this.buyVwap),buy_value:InfrontUtil.roundToPrecision(this.buyValue),buy_volume:this.buyVolume,sell_vwap:InfrontUtil.roundToPrecision(this.sellVwap),sell_value:InfrontUtil.roundToPrecision(this.sellValue),sell_volume:this.sellVolume,net_price:InfrontUtil.roundToPrecision(this.netPrice),net_value:InfrontUtil.roundToPrecision(this.netValue),net_volume:this.netVolume}},t}();e.NetTradeItem=D;var O=function(){function e(){this.items={}}return e.prototype.addSymbol=function(e,t){var n=e.getKey();this.items[n]=t},e.prototype.getSymbol=function(e){var t=null;return e&&this.items.hasOwnProperty(e)&&(t=this.items[e]),t},e}();e.SymbolMappingCache=O;var k=function(){function t(e,t){this.orders={},this.trades={},this.netTrades={},this.positions={},this.streamingManager=e,this.name=t}return t.prototype.clearOrdersAndTrades=function(){this.orders={},this.trades={},this.netTrades={}},t.prototype.clearOrders=function(){this.orders={}},t.prototype.clearTrades=function(){this.trades={},this.netTrades={}},t.prototype.addPosition=function(e){var t=e.getKey();this.positions[t]=e},t.prototype.addOrder=function(t){var n=this.orders[t.orderId()];return n?n.assign(t):n=this.orders[t.orderId()]=t,!n.symbolRef&&this.streamingManager&&(n.symbolRef=this.streamingManager.getSymbol(n.getValue(e.TradingTag.Feed),n.getValue(e.TradingTag.Symbol))),n},t.prototype.updateTradingPower=function(e){this.tradingPowerItem||(this.tradingPowerItem=new f),this.tradingPowerItem.assign(e)},t.prototype.tradingPowerIsStale=function(){return!this.timeTradingPowerRequest||performance.now()-this.timeTradingPowerRequest>1e4},t.prototype.applyMappedSymbolsFromCache=function(e,t){for(var n in this.orders){var i=this.orders[n];if(i.hasUnresolvedSymbol()){var r=i.getKey();(l=e.getSymbol(r))&&(i.applyFeedSymbol(l),i.symbolRef=t.getSymbol(l.feed,l.ticker))}}for(var a in this.trades){var s=this.trades[a];s.hasUnresolvedSymbol()&&(l=e.getSymbol(s.getKey()))&&(s.applyFeedSymbol(l),s.symbolRef=t.getSymbol(l.feed,l.ticker))}for(var o in this.positions){var l,c=this.positions[o];if(c.hasUnresolvedSymbol())(l=e.getSymbol(c.getKey()))&&(c.applyFeedSymbol(l),c.symbolRef=t.getSymbol(l.feed,l.ticker))}},t.prototype.addTrade=function(t){var n;this.trades[t.tradeId()]=t;var i=this.orders[t.orderId()];if(i){i.addTrade(t);var r=i.getValue(e.TradingTag.Symbol)+"|"+i.getValue(e.TradingTag.Currency);(n=this.netTrades[r])||((n=this.netTrades[r]=new D(i)).symbolRef=i.symbolRef),n.addTrade(t)}return n},t.prototype.fullName=function(){return this.description?this.name+" - "+this.description:this.name},t.prototype.getPositions=function(){var e=[];for(var t in this.positions)e.push(this.positions[t]);return e},t.prototype.getNetTrades=function(){var e=[];for(var t in this.netTrades){var n=this.netTrades[t];e.push(n.ToMws())}return{net_trades:e}},t.prototype.tradingPowerRequested=function(){return null!=this.tradingPowerItem},t.prototype.tradingPowerNotRequested=function(){return null==this.tradingPowerItem},t.prototype.getSymbolMappingList=function(){var e=[];for(var t in this.orders)e.push(this.orders[t]);for(var n in this.trades)e.push(this.trades[n]);return e},t.prototype.ToMws=function(t){void 0===t&&(t=!1);var n=[],i=[];for(var r in this.orders){var a=this.orders[r];(t||a.orderStatus()!==e.OrderStatus.Deleted)&&n.push(a.ToMws())}for(var s in this.trades){var o=this.trades[s];i.push(o.ToMws())}return{orders:n,trades:i}},t}();e.PortfolioDataSet=k;var R=function(){function t(e){this.items={},this.streamingManager=e}return t.prototype.clear=function(){this.items={}},t.prototype.get=function(e){var t=this.items[e];return t||(t=this.items[e]=new k(this.streamingManager,e)),t},t.prototype.addPosition=function(t,n){t.portfolio?(n||this.get(t.portfolio)).addPosition(t):(e.DEBUG_TRADING_POSITIONS_CS||e.DEBUG_TRADING_RT_POSITION)&&e.log("Invalid position",t.inspect())},t.prototype.addOrder=function(t,n){var i;return t.portfolio?i=(n||this.get(t.portfolio)).addOrder(t):t.isEmpty()||(e.DEBUG_TRADING_RT_ORDER||e.DEBUG_TRADING_ORDERS_TRADES_CS_TAGS)&&e.log("Invalid order",t),i},t.prototype.addTrade=function(t,n){var i;return t.portfolio?i=(n||this.get(t.portfolio)).addTrade(t):t.isEmpty()||e.DEBUG_TRADING_RT_TRADE&&e.log("Invalid trade",t),i},t.prototype.getOrder=function(e,t){var n,i=this.items[e];return i&&(n=i.orders[t]),n},t.prototype.portfolioNames=function(){var e=[];for(var t in this.items){var n=this.items[t];e.push({name:n.name,description:n.description,fullName:n.fullName,displayName:n.displayName})}return e},t.prototype.updateTradingPower=function(e){this.get(e.portfolio).updateTradingPower(e)},t}();e.PortfolioDb=R;var N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l);e.OrderListResponse=N;var L=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.setOrderStatus=function(t){this.orderStatus=t,this.orderStatusText=e.orderStatusToStr(t)},n.prototype.ToMws=function(){return{order_id:this.orderId,customer_id:this.customerId,order_status:this.orderStatus}},n}(l);e.InsertOrderResponse=L;var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ToMws=function(){return{order_id:this.orderId}},t}(l);e.ModifyOrderResponse=P;var F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ToMws=function(){return{order_id:this.orderId,customer_id:this.customerId,auto_delete:this.autoDelete}},t}(l);e.DeleteOrderResponse=F;var x=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.setOrderStatus=function(t){this.orderStatus=t,this.orderStatusText=e.orderStatusToStr(t)},n.prototype.ToMws=function(){return{order_id:this.orderId}},n}(l);e.ActivateOrderResponse=x;var U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(l);e.RiskLevelResponse=U;var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t}return __extends(t,e),t}(l);e.TickSizeResponse=B;var W,H=function(){function t(){}return t.prototype.hasErrorContent=function(){return null!=this.failCode&&this.failCode!=e.FailCodes.ErrorOk&&null!=this.failDescription&&""!=this.failDescription},t}();e.OrderEntryEvent=H,function(e){e[e.buy=1]="buy",e[e.sell=2]="sell"}(W=e.Position||(e.Position={}));var V=function(){function e(){}return e.prototype.addCustomerId=function(e){this.customerId=e;var t=this.changeHist?this.changeHist.split(","):[];t.length>0&&t[t.length-1]==e||t.push(e),this.changeHist=t.join()},e}();e.OrderRequest=V;var G=function(){};e.TickSizeRequest=G;var z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.BaseRequest);e.TradingRequestItem=z;var q=function(e){function t(n,i,r,a,s,o,l,c,d,u){void 0===d&&(d=!1),void 0===u&&(u=!1);var h=e.call(this,n,i,r,a,s,o,l,c,d,u)||this;return h.checkTimerMs=t.defaultCheckTimerMs,h}return __extends(t,e),t.prototype.CheckConnection=function(){this.status.connectionAttemptCount>10*this.hosts.length?this.checkTimerMs=3e4:this.status.connectionAttemptCount>this.hosts.length?this.checkTimerMs=5e3:this.checkTimerMs=500,e.prototype.CheckConnection.call(this)},t.defaultCheckTimerMs=500,t}(e.ServerConnection);e.TradingServerConnection=q;var Y=function(t){function a(n,i,r,a,s,o,l,c){void 0===a&&(a=null),void 0===s&&(s=null),void 0===o&&(o=null),void 0===l&&(l=null),void 0===c&&(c=null);var d=t.call(this,i,n,e.ServerType.Trading)||this;return d.requests={},d.loginDone=!1,d.hasPendingLogin=!1,d.callbacks=[],d.tag=new e.Tag,d.subParser=new e.Parser(0,0),d.tradesRequested=!1,d.subscriptions={},d.customFieldLabelLookup={},d.customFieldsRequested={},d.includeDeletedOrders=!0,d.streaming=r,d.feeds=d.loginServer.getAccessFeeds(n),d.serviceInfo=d.loginServer.getServiceInfo(d.ps),d.serviceInfo,d.login=a,d.password=s,d.pin=o,d.token=l,d.tokenType=c,d.symbolMappingCache=new O,d.portfolios=new R(r),e.DEBUG_TRADING_LOGIN_SERVICE_INFO&&d.serviceInfo.logInfo(),d.conn=new q(n,!0,d,d.feeds,d.loginServer.getHosts(n),d.tagSet,i,d.serverType),d.conn.resubscribeOnReconnect=!1,d}return __extends(a,t),a.prototype.hasStreamingPortfolioUpdates=function(){return this.loginData.hasServerProp(e.ServerProperties.NoPortfolioTradesUpdate)},a.prototype.tradingPowerNotSupported=function(){return this.loginData.hasServerProp(e.ServerProperties.NoTradingPower)},a.prototype.hasStreamingTradingPowerUpdates=function(){return this.hasStreamingPortfolioUpdates()&&!this.loginData.hasServerProp4(e.ServerProperties4.TpNoFeed)},a.prototype.Register=function(t){-1===this.callbacks.indexOf(t)&&this.callbacks.push(t),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"Trading: register callback. Total:",this.callbacks.length)},a.prototype.Unregister=function(t){this.callbacks.splice(this.callbacks.indexOf(t),1),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"Trading: Unregister callback. Total:",this.callbacks.length)},a.prototype.GetParser=function(e){return this.subParser.SetBuffer(e),this.subParser},a.prototype.hasPortfolioSubscription=function(e){return this.hasStreamingPortfolioUpdates()&&null!=this.subscriptions[e]},a.prototype.subscribePortfolio=function(e){var t=this;if(!this.hasPortfolioSubscription(e)){var i=[new n(this.loginData.feed,"PORT:"+e)];this.conn.SubscribeSymbols(i),this.subscriptions[e]=function(){t.conn.UnsubscribeSymbols(i)}}},a.prototype.unsubscribePortfolio=function(e){var t=this.subscriptions[e];InfrontUtil.isFunction(t)&&t(),delete this.subscriptions[e]},a.prototype.unsubscribeAll=function(){for(var e in this.subscriptions){var t=this.subscriptions[e];InfrontUtil.isFunction(t)&&t()}this.subscriptions={}},a.prototype.IsTradableFeed=function(e){return this.feeds.indexOf(e)>-1},a.prototype.errorCallback=function(t,n){var i=new e.ResponseHeader(e.ResponseEnum.Error,n);t&&t.ResponseError&&t.ResponseError(i)},a.prototype.Login=function(t,n,i,r,a,s){void 0===r&&(r=null),void 0===a&&(a=null),void 0===s&&(s=null),this.hasPendingLogin=!0,this.login=t,this.password=n,this.pin=i,this.token=r,this.tokenType=a;var o=this.conn.GetRequest(e.TradingRequest.Login,0);(this.requests[o.uniqueId]=new z(e.TradingRequest.Login)).commonFramework=s,o.Add(e.TradingTag.Login,t),o.Add(e.TradingTag.Password,n),o.Add(e.TradingTag.Pin,i),"JWT"==a?o.Add(e.TradingTag.LoginSignedToken,r):o.Add(e.TradingTag.LoginToken,r),o.Add(e.TradingTag.LoginTokenType,a),o.Add(e.TradingTag.RequestId,o.uniqueId),this.conn.Send(o,!0)},a.prototype.GetMarketplaceForFeed=function(e){var t=this.loginServer.getFeed(this.ps,e);return t?t.tradingMarketplace:null},a.prototype.GetPortfolioNames=function(t,n){void 0===n&&(n=null);var i=this.conn.GetRequest(e.TradingRequest.PortfolioNames,0),r=this.requests[i.uniqueId]=new z(e.TradingRequest.PortfolioNames);r.callback=t,r.commonFramework=n,i.AddString(e.TradingTag.Login,this.login),i.AddInt(e.TradingTag.RequestId,i.uniqueId),this.conn.Send(i,!0)},a.prototype.hasRecentPortfolioUpdate=function(e){return!!e.timePortfolioRequest&&performance.now()-e.timePortfolioRequest<3e4},a.prototype.GetPortfolio=function(t,n,i){void 0===i&&(i=null);var r=this.portfolios.get(t);if(r&&this.hasPortfolioSubscription(t)&&this.hasRecentPortfolioUpdate(r)){var a=new g(r),s=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS CACHED Portfolio",a),n&&n.ResponsePortfolioPositions&&n.ResponsePortfolioPositions(s,a),i&&i.Reply(s,a)}else{this.subscribePortfolio(t);var o=this.conn.GetRequest(e.TradingRequest.Portfolio,0),l=this.requests[o.uniqueId]=new z(e.TradingRequest.Portfolio);l.portfolioRef=this.portfolios.get(t),l.callback=n,l.commonFramework=i,o.AddInt(e.TradingTag.RequestId,o.uniqueId),o.AddString(e.TradingTag.CustomerId,this.login),o.AddString(e.TradingTag.Portfolio,t),this.conn.Send(o,!0),r.timePortfolioRequest=performance.now()}this.NeedTradingPower(r)},a.prototype.updatePortfolio=function(t){var n=this,i={ResponsePortfolioPositions:function(e,t){n.callbacks.forEach(function(n){n.StreamingPortfolioPositions&&t.items.forEach(function(t){n.StreamingPortfolioPositions(e,t)})})},ResponseError:function(t){e.DEBUG_TRADING_CS&&e.log(n.ps.toStr(),t.errorMsg)}};this.GetPortfolio(t,i)},a.prototype.updateOrdersAndTrades=function(t){var n=this,i=this.portfolios.get(t),r=Object.keys(i.trades),a={ResponseOrderList:function(t,a){n.callbacks.forEach(function(a){if(a.StreamingTrade)for(var s in i.trades){var o=i.trades[s];a.StreamingTrade(t,o,r.indexOf(s)>-1)}if(a.ResponseNetTrades&&a.ResponseNetTrades(t,i.getNetTrades()),a.StreamingOrderStatus)for(var l in i.orders){var c=i.orders[l];(n.includeDeletedOrders||c.orderStatus()!==e.OrderStatus.Deleted)&&a.StreamingOrderStatus(t,c)}})},ResponseError:function(t){e.DEBUG_TRADING_CS&&e.log(n.ps.toStr(),t.errorMsg)}};this.GetOrdersAndTrades(t,a)},a.prototype.SendTradingPowerRequest=function(t,n,i,r){void 0===r&&(r=null);var a=this.conn.GetRequest(e.TradingRequest.TradingPower,0),s=this.requests[a.uniqueId]=new z(e.TradingRequest.TradingPower);if(s.callback=i,s.commonFramework=r,s.portfolioRef=t,a.AddInt(e.TradingTag.RequestId,a.uniqueId),a.AddString(e.TradingTag.CustomerId,this.login),a.AddString(e.TradingTag.Portfolio,t.name),n){var o=this.streaming.getSymbol(n.feed,n.ticker,!1);if(o){var l=o.getValueOrNull(e.RealtimeTags.Currency),c=o.getValueOrNull(e.RealtimeTags.ISIN);l&&c&&(this.addSymbolTags(a,o),a.AddString(e.TradingTag.Market,this.GetMarketplaceForFeed(n.feed)))}}this.conn.Send(a,!0)},a.prototype.GetCachedTradingPower=function(t,n,i){var r=new v(t.tradingPowerItem),a=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS CACHED TradingPower",r),n&&n.ResponseTradingPower&&n.ResponseTradingPower(a,r),i&&i.Reply(a,r)},a.prototype.initTradingPower=function(t){var n=new f;n.portfolio=t.name,this.callbacks.forEach(function(t){t.StreamingTradingPower&&t.StreamingTradingPower(new e.Header,n)})},a.prototype.updateTradingPower=function(t){var n=this;t.tradingPowerItem||this.initTradingPower(t);var i={ResponseTradingPower:function(e,t){n.callbacks.forEach(function(n){n.StreamingTradingPower&&n.StreamingTradingPower(e,t)})},ResponseError:function(t){e.DEBUG_TRADING_POWER_CS&&e.log(n.ps.toStr(),t.errorMsg)}};t.timeTradingPowerRequest=performance.now(),this.SendTradingPowerRequest(t,null,i)},a.prototype.NeedTradingPower=function(t){var n=this;this.tradingPowerNotSupported()||t.tradingPowerRequested()&&this.hasStreamingTradingPowerUpdates()||(t.tradingPowerNotRequested()||t.tradingPowerIsStale()?this.updateTradingPower(t):this.tpTimerToken||(this.tpTimerToken=setTimeout(function(){e.DEBUG_TRADING_POWER_CS&&e.log(n.ps.toStr(),"ThrottleTradingPowerRequest"),n.tpTimerToken=null,n.updateTradingPower(t)},1e4)))},a.prototype.GetTradingPower=function(t,n,i,r){if(void 0===r&&(r=null),this.loginData.hasServerProp(e.ServerProperties.NoTradingPower))e.DEBUG_VERBOSE&&e.log("%cServer does not support TradingPower request","color: #f60; font-size: 14px;");else{var a=this.portfolios.get(t);this.SendTradingPowerRequest(a,n,i,r)}},a.prototype.GetAlgorithms=function(t,n){if(void 0===n&&(n=null),this.algos){var i=new e.ResponseHeader;t&&t.ResponseAlgorithms&&t.ResponseAlgorithms(i,this.algos),n&&n.Reply(i,this.algos)}else{var r=this.conn.GetRequest(e.TradingRequest.Algorithms,0),a=this.requests[r.uniqueId]=new z(e.TradingRequest.Algorithms);a.callback=t,a.commonFramework=n,r.AddInt(e.TradingTag.RequestId,r.uniqueId),this.conn.Send(r,!0)}},a.prototype.GetCustomFields=function(t,n){if(void 0===n&&(n=null),this.customFields){var i=new e.ResponseHeader;t&&t.ResponseCustomFields&&t.ResponseCustomFields(i,this.customFields),n&&n.Reply(i,this.customFields)}else{if(this.ps&&this.customFieldsRequested[this.ps.toStr()])return;this.ps&&(this.customFieldsRequested[this.ps.toStr()]=!0);var r=this.conn.GetRequest(e.TradingRequest.CustomFields,0),a=this.requests[r.uniqueId]=new z(e.TradingRequest.CustomFields);a.callback=t,a.commonFramework=n,r.AddInt(e.TradingTag.RequestId,r.uniqueId),this.conn.Send(r,!0)}},a.prototype.GetMarketProperties=function(t,n){if(void 0===n&&(n=null),this.markets){var i=new e.ResponseHeader;t&&t.ResponseMarketProperties&&t.ResponseMarketProperties(i,this.markets),n&&n.Reply(i,this.markets)}else{var r=this.conn.GetRequest(e.TradingRequest.MarketProperties,0),a=this.requests[r.uniqueId]=new z(e.TradingRequest.MarketProperties);a.callback=t,a.commonFramework=n,r.AddInt(e.TradingTag.RequestId,r.uniqueId),this.conn.Send(r,!0)}},a.prototype.sendOrderTradeRequest=function(t,n,i,r){void 0===r&&(r=null);var a=this.conn.GetRequest(t,0),s=this.requests[a.uniqueId]=new z(t);s.portfolioRef=this.portfolios.get(n),s.callback=i,s.commonFramework=r,a.AddInt(e.TradingTag.RequestId,a.uniqueId),a.AddString(e.TradingTag.Portfolio,n),this.conn.Send(a,!0)},a.prototype.GetOrdersAndTrades=function(t,n,i){void 0===i&&(i=null),this.sendOrderTradeRequest(e.TradingRequest.OrderList,t,n,i),this.sendOrderTradeRequest(e.TradingRequest.TradeList,t,n,i),this.tradesRequested=!0},a.prototype.GetNetTrades=function(t,n,i){if(void 0===i&&(i=null),this.tradesRequested){var r=this.portfolios.get(t),a=new e.ResponseHeader;if(n&&n.ResponseNetTrades){var s=r.getNetTrades();e.DEBUG_TRADING_RT_TRADE&&e.log(this.ps.toStr(),"RT NetTrades",s),n.ResponseNetTrades(a,s)}i&&i.Reply(a,r)}else{var o={ResponseOrderList:function(e,t){n&&n.ResponseNetTrades&&n.ResponseNetTrades(e,t.portfolio.getNetTrades()),i&&i.Reply(e,t.portfolio)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)}};this.GetOrdersAndTrades(t,o)}},a.prototype.GetExchInstrument=function(t,n){var r,a=this.streaming.getSymbol(t,n,!1);if(a){var s=this.loginServer.getFeedProperties(t,this.ps);r=s&i.OrderEntryTicker||s&i.OrderEntryTicker?n:s&i.OrderEntryIsin?a.getValueOrNull(e.RealtimeTags.ISIN):a.getValueOrNull(e.RealtimeTags.ExchangeSymbol)}return r},a.prototype.addSymbolTags=function(t,n){var i=n.getValueOrNull(e.RealtimeTags.SymbolType),r=n.getValueOrNull(e.RealtimeTags.SymbolSubType);t.AddInt(e.TradingTag.Feed,n.fs.feed),t.AddString(e.TradingTag.Symbol,n.fs.ticker),t.AddString(e.TradingTag.Isin,n.getValueOrNull(e.RealtimeTags.ISIN)),t.AddInt(e.TradingTag.InstrType,i||0),t.AddInt(e.TradingTag.InstrSubType,r||0),t.AddString(e.TradingTag.InstrDescr,n.getValueOrNull(e.RealtimeTags.FullName)),t.AddString(e.TradingTag.Currency,n.getValueOrNull(e.RealtimeTags.Currency)),t.AddString(e.TradingTag.BloombergTicker,n.getValueOrNull(e.RealtimeTags.BloombergTicker)),t.AddString(e.TradingTag.BloombergGlobalId,n.getValueOrNull(e.RealtimeTags.BloombergGlobalId)),t.AddString(e.TradingTag.BloombergGlobalIdComposite,n.getValueOrNull(e.RealtimeTags.BloombergGlobalIdComposite)),t.AddInt(e.TradingTag.Multiplier,n.getValueOrNull(e.RealtimeTags.ContractSize)),t.AddBCD(e.TradingTag.LastTrade,n.getValueOrNull(e.RealtimeTags.LastTradedAt)),t.AddInt(e.TradingTag.LastTradeDate,InfrontUtil.DateToInt(n.getValueOrNull(e.RealtimeDateTime.LAST_TRADE_DATE))),t.AddInt(e.TradingTag.SharesPerOption,n.getValueOrNull(e.RealtimeTags.SharesPerOption)),t.AddInt(e.TradingTag.StrikePrice,n.getValueOrNull(e.RealtimeTags.Strike)),t.AddString(e.TradingTag.PrimarySegment,n.getValueOrNull(e.RealtimeTags.PrimarySegment)),t.AddString(e.TradingTag.SecondarySegment,n.getValueOrNull(e.RealtimeTags.SecondarySegment))},a.prototype.addRequestTags=function(t,n){n.addCustomerId(this.loginData.customerId),t.AddInt(e.TradingTag.RequestId,t.uniqueId),t.AddInt(e.TradingTag.OrderType,n.orderType),t.AddInt(e.TradingTag.OrderStatus,n.orderStatus),t.AddString(e.TradingTag.CustomerId,n.customerId),t.AddString(e.TradingTag.ChangeHist,n.changeHist);var i=n.symbolRef;this.addSymbolTags(t,i),t.AddString(e.TradingTag.Market,n.market),t.AddString(e.TradingTag.Portfolio,n.portfolio),n.mic&&t.AddString(e.TradingTag.Mic,n.mic),t.AddString(e.TradingTag.ExchInstrId,this.GetExchInstrument(n.feedNu,n.symbol)),n.orderId&&t.AddString(e.TradingTag.OrderId,n.orderId);var r=n.price?n.price:0;switch(n.position){case W.buy:t.AddBCD(e.TradingTag.Bid,r);break;case W.sell:t.AddBCD(e.TradingTag.Ask,r)}if(t.AddBCD(e.TradingTag.Volume,n.volume),t.AddBCD(e.TradingTag.OpenVolume,n.openVolume),t.AddInt(e.TradingTag.ValidDate,n.validUntil),t.AddString(e.TradingTag.Comment,n.comment),n.customFields)for(var a=0,s=n.customFields;a<s.length;a++){var o=s[a];if(o.hasOwnProperty("id")&&o.hasOwnProperty("value")){var l=o.id,c=o.value;null!=l&&c&&(t.AddString(e.TradingTag.CustomNu,l),t.AddString(e.TradingTag.CustomData,c))}}if(n.algoId&&n.algoParams){t.AddString(e.TradingTag.AlgoId,n.algoId);for(var d=0,u=n.algoParams;d<u.length;d++){var h=u[d];h.hasOwnProperty("id")&&h.hasOwnProperty("value")&&(l=h.id,c=h.value,l&&c&&(t.AddString(e.TradingTag.AlgoParamId,l),t.AddString(e.TradingTag.AlgoParamData,c)))}}},a.prototype.InsertOrder=function(t,n,i){if(void 0===i&&(i=null),this.IsTradableFeed(t.feedNu)){var r=this.conn.GetRequest(e.TradingRequest.InsertOrder,0),a=this.requests[r.uniqueId]=new z(e.TradingRequest.InsertOrder);a.callback=n,a.commonFramework=i,this.addRequestTags(r,t),this.conn.Send(r,!0)}else this.errorCallback(n,"No access to trade this symbol")},a.prototype.RequestRiskLevel=function(t,n,i,r){void 0===r&&(r=null);var a=this.portfolios.getOrder(t,n);if(a){var s=a.getOrderRequest(),o=this.conn.GetRequest(e.TradingRequest.RiskLevel,0),l=this.requests[o.uniqueId]=new z(e.TradingRequest.RiskLevel);l.portfolioRef=this.portfolios.get(t),l.order=a,l.callback=i,l.commonFramework=r,this.addRequestTags(o,s),this.conn.Send(o,!0)}else e.DEBUG_VERBOSE&&e.log("Order not found",t,n)},a.prototype.applyOrderFieldsToModifyOrder=function(t,n){t.portfolio||(t.portfolio=n.portfolio),t.orderId||(t.orderId=n.orderId()),t.market||(t.market=n.getValue(e.TradingTag.Market)),t.mic||(t.mic=n.getValue(e.TradingTag.Mic)),t.orderType||(t.orderType=n.getValue(e.TradingTag.OrderType)),t.orderStatus||(t.orderStatus=n.orderStatus()),t.position||(t.position=n.getValue(e.TradingTag.BuyOrSell))},a.prototype.ModifyOrder=function(t,n,i){if(void 0===i&&(i=null),this.IsTradableFeed(t.feedNu)){var r=this.portfolios.getOrder(t.portfolio,t.orderId);if(r)if(r.canModify(this.loginData)){t.changeHist=r.getValue(e.TradingTag.ChangeHist);var a=this.conn.GetRequest(e.TradingRequest.ModifyOrder,0),s=this.requests[a.uniqueId]=new z(e.TradingRequest.ModifyOrder);s.callback=n,s.commonFramework=i,this.applyOrderFieldsToModifyOrder(t,r),t.orderType===e.OrderTypes.Strategy&&(t.orderStatus=e.OrderStatus.Working),this.addRequestTags(a,t),this.conn.Send(a,!0)}else{var o="Order cannot be modified. Order status: "+r.orderStatusStr;this.errorCallback(n,o),e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),o,t.portfolio,t.orderId)}else this.errorCallback(n,"Order not found"),e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"Order not found",t.portfolio,t.orderId)}else this.errorCallback(n,"No access to trade this symbol")},a.prototype.DeleteOrder=function(t,n,i,r){void 0===r&&(r=null);var a=this.conn.GetRequest(e.TradingRequest.DeleteOrder,0),s=this.requests[a.uniqueId]=new z(e.TradingRequest.DeleteOrder);s.callback=i,s.commonFramework=r,a.AddInt(e.TradingTag.RequestId,a.uniqueId),a.AddString(e.TradingTag.Portfolio,t),a.AddString(e.TradingTag.OrderId,n),this.conn.Send(a,!0)},a.prototype.GetTickSizes=function(t,n,i){void 0===i&&(i=null);var r=this.GetMarketplaceForFeed(t.feed),a=this.conn.GetRequest(e.TradingRequest.TickSize,0),s=this.requests[a.uniqueId]=new z(e.TradingRequest.TickSize);s.callback=n,s.commonFramework=i,a.AddInt(e.TradingTag.RequestId,a.uniqueId),a.AddInt(e.TradingTag.Feed,t.feed),a.AddString(e.TradingTag.Symbol,t.symbol),a.AddString(e.TradingTag.Mic,t.mic),a.AddString(e.TradingTag.Market,r),this.conn.Send(a,!0)},a.prototype.supportServerPropertyForMarketPlace=function(e,t){if(t){var n=this.markets.getMarket(t);if(n&&n.marketProperties)return n.hasMarketProp(e)}return this.loginData.hasServerProp(e)},a.prototype.supportServerProperty2ForMarketPlace=function(e,t){if(t){var n=this.markets.getMarket(t);if(n&&n.marketProperties)return n.hasMarketProp2(e)}return this.loginData.hasServerProp2(e)},a.prototype.supportServerProperty3ForMarketPlace=function(e,t){if(t){var n=this.markets.getMarket(t);if(n&&n.marketProperties)return n.hasMarketProp3(e)}return this.loginData.hasServerProp3(e)},a.prototype.hasUserProp=function(e){return this.loginData.hasUserProp(e)},a.prototype.ActivateOrderRequest=function(t,n,i,r){void 0===r&&(r=null);var a=this.conn.GetRequest(e.TradingRequest.ActivateOrder,0),s=this.requests[a.uniqueId]=new z(e.TradingRequest.ActivateOrder);s.callback=i,s.commonFramework=r,a.AddInt(e.TradingTag.RequestId,a.uniqueId),a.AddString(e.TradingTag.OrderId,t.getValue(e.TradingTag.OrderId)),a.AddString(e.TradingTag.Portfolio,t.portfolio),a.AddString(e.TradingTag.Market,t.getValue(e.TradingTag.Market)),a.AddString(e.TradingTag.Mic,t.getValue(e.TradingTag.Mic)),a.AddInt(e.TradingTag.OrderType,t.getValue(e.TradingTag.OrderType)),a.AddInt(e.TradingTag.OrderStatus,n?e.OrderStatus.Active:e.OrderStatus.Inactive),this.conn.Send(a,!0)},a.prototype.ActivateOrder=function(t,n,i,r,a){void 0===a&&(a=null);var s=this.portfolios.getOrder(t,n);s?this.supportServerPropertyForMarketPlace(e.ServerProperties.ActivateOrder,s.getValue(e.TradingTag.Market))?this.ActivateOrderRequest(s,i,r,a):this.errorCallback(r,"Order activation not supported on server"):this.errorCallback(r,"Order not found OrderID = "+n)},a.prototype.extractUndeterminedItems=function(t){for(var n={},i=0;i<t.length;i++){var r=t[i];if(r.getValue(e.TradingTag.PositionType)||null!=r.getValue(e.TradingTag.MoneyKind)&&r.getValue(e.TradingTag.MoneyKind)!=e.MoneyKind.Undefined)r.symbolMappingStatus=d.NotApplicable;else{var a=!1;if(!r.getValue(e.TradingTag.Symbol)||!r.getValue(e.TradingTag.Feed)){var s=r.getKey(),o=this.symbolMappingCache.getSymbol(s);o?(r.applyFeedSymbol(o),r.symbolRef=this.streaming.getSymbol(o.feed,o.ticker),e.DEBUG_SYMBOL_MAPPING_CACHE&&e.log(s,"mapped to:",o?o.toString():o,r)):(e.DEBUG_SYMBOL_MAPPING_CACHE&&e.log(s,"not in cache",r),a=!0)}a?n[i]=r:r.symbolMappingStatus=d.NotRequired}}return n},a.prototype.getSymbolScore=function(t,n){var i=0,a=n.getValue(e.TradingTag.Market),s=this.GetMarketplaceForFeed(t.feed),o=n.getValue(e.TradingTag.Symbol);return(null!=a&&s==a||n.getValue(e.TradingTag.InstrType)==r.Funds)&&(this.loginServer.feedCanTradeOnPidSid(t.feed,this.ps)&&(i+=10),this.loginServer.feedIsMajorMarket(t.feed)&&(i+=5),this.loginServer.feedHasRealtime(t.feed)&&(i+=3),this.loginServer.feedHasDelayed(t.feed)&&(i+=2),t.ticker==o&&(i+=1)),e.DEBUG_SYMBOL_MAPPING_SCORE_CS&&e.log("Symbol:",t.toString(),"market:",s,s==a?"matches":"does not match","position market",a,"score:",i),i},a.prototype.findBestSymbol=function(t,n){var i,a=0,s=n.getValue(e.TradingTag.InstrType)==r.Funds;n.symbolMappingStatus=t.length>0?d.NoAccess:d.NotFound;for(var o=0,l=t;o<l.length;o++){var c=l[o],u=s?-1:0;(s||n.getValue(e.TradingTag.Market)==this.GetMarketplaceForFeed(c.feed)||this.loginServer.feedIsOTC(c.feed))&&(u=this.getSymbolScore(c,n)),e.DEBUG_SYMBOL_MAPPING_SCORE_CS&&e.log("Score:",c.toString(),u),u>a&&(a=u,u>0&&(n.symbolMappingStatus=d.Mapped),i=c)}return i},a.prototype.requestSymbolMapping=function(t,n){var i=this,r=this.loginServer.getPidSid(e.SymbolMappingServerFeed,e.ServiceType.SymbolMapping);if(r){var a=this.serverPool.GetRealtime(r,this,!1,"requestSymbolMapping");if(a){var s=this.extractUndeterminedItems(t),o=new e.CommonFrameworkResponse;o.Reply=function(r,a){if(a){for(var s in a.items)if(a.items.hasOwnProperty(s)){var o=i.findBestSymbol(a.items[s],t[s]);i.symbolMappingCache.addSymbol(t[s],o),o&&(t[s].applyFeedSymbol(o),t[s].symbolRef=i.streaming.getSymbol(o.feed,o.ticker))}e.DEBUG_SYMBOL_MAPPING_CS&&e.log("Done symbol mapping",t),e.DEBUG_SYMBOL_MAPPING_CACHE&&e.log("Symbol mapping cache",i.symbolMappingCache)}n(t)},InfrontUtil.isEmptyObject(s)?n(t):a.GetPortfolioSymbols(this.ps,s,null,o)}else e.DEBUG_SYMBOL_MAPPING_CS&&e.log(r.toStr(),"Error: No access to symbol mapping server"),n(t)}else e.DEBUG_SYMBOL_MAPPING_CS&&e.log("Error: No access to symbol mapping server"),n(t)},a.prototype.ResponseLogin=function(t,n){var i=this,r=new c;e.DEBUG_TRADING_LOGIN_CS_TAGS&&e.logCSPackageHeader("ResponseLogin",this.ps);for(var a=0,s=n.data;a<s.length;a++){var o=s[a].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var d=new e.Tag;l.Next(o,d,this.tagSet);)switch(e.DEBUG_TRADING_LOGIN_CS_TAGS&&e.logToConsole(this.tagSet,d,o),d.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:r.failCode=d.Int(o);break;case e.TradingTag.FailDescription:r.failMessage=d.String(o);break;case e.TradingTag.Feed:r.feed=d.Int(o);break;case e.TradingTag.ServerProperties:r.serverProps=d.Int(o);break;case e.TradingTag.ServerProperties2:r.serverProps2=d.Int(o);break;case e.TradingTag.ServerProperties3:r.serverProps3=d.Int(o);break;case e.TradingTag.ServerProperties4:r.serverProps4=d.get(o);break;case e.TradingTag.UserProperties:r.userProps=d.Int(o);break;case e.TradingTag.IsInternalUser:r.internalUser=1==d.Int(o);break;case e.TradingTag.LimitPerDay:r.limitPerDay=d.Decimal(o);break;case e.TradingTag.LimitPerOrder:r.limitPerOrder=d.Decimal(o);break;case e.TradingTag.SafetyLimitOverride:r.safetyLimitOverride=1==d.Int(o);break;case e.TradingTag.LimitCurrency:r.limitCurrency=d.String(o);break;case e.TradingTag.DefaultOrderWarning:r.defaultOrderWarning=d.String(o);break;case e.TradingTag.CustomerId:r.customerId=d.String(o);break;case e.TradingTag.LoginToken:r.loginToken=d.String(o);break;case e.TradingTag.LoginSignedToken:r.LoginSignedToken=d.String(o);break;case e.TradingTag.ExecutionMarket:r.ExecutionMarket=d.String(o);break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_LOGIN_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,d.tag),d.String(o))}}r.pidSid=this.ps,this.loginData=r;var u=new e.ResponseHeader;if(this.hasPendingLogin=!1,e.DEBUG_TRADING_LOGIN_CS){var h=this.ps.toStr();e.log(h,"CS",e.requestToStr(this.tagSet,n.type),r,t.idStr()),r.success()?(e.logSeparator(),e.log(h+" %c"+this.serviceInfo.getFullName(),"color: #3f7;"),e.log(h,"server props ",InfrontUtil.padHex(r.serverProps)+":",InfrontUtil.getEnumStr(r.serverProps,e.ServerPropToStr)),e.log(h,"server props2",InfrontUtil.padHex(r.serverProps2)+":",InfrontUtil.getEnumStr(r.serverProps2,e.ServerProp2ToStr)),e.log(h,"server props3",InfrontUtil.padHex(r.serverProps3)+":",InfrontUtil.getEnumStr(r.serverProps3,e.ServerProp3ToStr)),e.log(h,"server props4",InfrontUtil.padHex(r.serverProps4)+":",InfrontUtil.getEnumStr(r.serverProps4,e.ServerProp4ToStr)),e.log(h,"user props   ",InfrontUtil.padHex(r.userProps)+":",InfrontUtil.getEnumStr(r.userProps,e.UserPropToStr)),r.logStreamingDetails(h),e.logSeparator()):e.log(h,"login failed to '"+this.serviceInfo.getFullName()+"' Message:",r.getFailMessage())}if(r.success()){var p=new e.CommonFrameworkResponse;p.Reply=function(e,t){i.callbacks.forEach(function(e){e.ResponseTradingLogin&&e.ResponseTradingLogin(u,r)}),n.commonFramework&&n.commonFramework.Reply(u,r)},this.GetMarketProperties(null,p),this.GetCustomFields(null,null),this.loginDone=!0}else this.callbacks.forEach(function(e){e.ResponseTradingLogin&&e.ResponseTradingLogin(u,r)}),e.log(this.ps.toStr(),"CS","trading login failed",r,t.idStr()),n.commonFramework&&n.commonFramework.Reply(u,r)},a.prototype.ResponsePortfolioNames=function(t,n){var i=new u;e.DEBUG_TRADING_PORTFOLIO_NAMES_CS_TAGS&&e.logCSPackageHeader("ResponsePortfolioNames",this.ps);for(var r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length),l=new e.Tag,c=void 0;for(o.SkipHeader(s);o.Next(s,l,this.tagSet);)switch(e.DEBUG_TRADING_PORTFOLIO_NAMES_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.String(s),l.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=l.Int(s);break;case e.TradingTag.FailDescription:i.failMessage=l.String(s);break;case e.TradingTag.Portfolio:c=this.portfolios.get(l.String(s));break;case e.TradingTag.PortfolioType:c&&(c.type=l.Int(s));break;case e.TradingTag.DisplayPortfolio:c&&(c.displayName=l.String(s));break;case e.TradingTag.DefaultPortfolio:c&&(c.defaultPortfolio=l.String(s));break;case e.TradingTag.PortfolioDescr:c&&(c.description=l.String(s));break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_PORTFOLIO_NAMES_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}i.items=this.portfolios.portfolioNames();var d=new e.ResponseHeader;e.DEBUG_TRADING_PORTFOLIO_NAMES_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseTradingPortfolioNames&&e.ResponseTradingPortfolioNames(d,i)}),n.callback&&n.callback.ResponseTradingPortfolioNames&&n.callback.ResponseTradingPortfolioNames(d,i),n.commonFramework&&n.commonFramework.Reply(d,i),i.success()},a.prototype.ResponsePortfolioPositions=function(t,n){var i=this;e.DEBUG_TRADING_POSITIONS_CS_TAGS&&e.logCSPackageHeader("ResponsePortfolioPositions",this.ps);var r=new g;n.portfolioRef&&(r.portfolio=n.portfolioRef,r.portfolio.positions={});for(var a=0,s=n.data;a<s.length;a++){var o=s[a].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c=new e.Tag,d=new m;l.Next(o,c,this.tagSet);)switch(e.DEBUG_TRADING_POSITIONS_CS_TAGS&&e.logToConsole(this.tagSet,c,o),c.tag){case e.TradingTag.FailCode:r.failCode=c.Int(o);break;case e.TradingTag.FailDescription:r.failMessage=c.String(o);break;case e.TradingTag.Separator:d.isEmpty()||(this.portfolios.addPosition(d,r.portfolio),r.items.push(d)),d=new m;break;default:this.ProcessPortfolioItem(d,c,o)}}var u=new e.ResponseHeader;r.success()?this.requestSymbolMapping(r.items,function(){r.portfolio.applyMappedSymbolsFromCache(i.symbolMappingCache,i.streaming),e.DEBUG_TRADING_POSITIONS_CS&&e.log(i.ps.toStr(),"CS",e.requestToStr(i.tagSet,n.type),r.ToMws(!0),t.idStr()),i.callbacks.forEach(function(e){e.ResponsePortfolioPositions&&e.ResponsePortfolioPositions(u,r)}),n.callback&&n.callback.ResponsePortfolioPositions&&n.callback.ResponsePortfolioPositions(u,r),n.commonFramework&&n.commonFramework.Reply(u,r)}):(n.callback&&n.callback.ResponsePortfolioPositions&&n.callback.ResponsePortfolioPositions(u,r),n.commonFramework&&n.commonFramework.Reply(u,r))},a.prototype.ResponseTradingPower=function(t,n){var i=new v;e.DEBUG_TRADING_POWER_CS_TAGS&&e.logCSPackageHeader("ResponseTradingPower",this.ps);for(var r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag;o.Next(s,l,this.tagSet);)switch(e.DEBUG_TRADING_POWER_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=l.Int(s);break;case e.TradingTag.FailDescription:i.failMessage=l.String(s);break;case e.TradingTag.Portfolio:i.portfolio=l.String(s);break;case e.TradingTag.DisplayPortfolio:i.displayPortfolio=l.String(s);break;case e.TradingTag.TradingPower:i.tradingPower=l.Decimal(s);break;case e.TradingTag.TradingPowerStatus:i.tradingPowerStatus=l.Int(s);break;case e.TradingTag.Currency:case e.TradingTag.BaseCurrency:i.currency=l.String(s);break;case e.TradingTag.Symbol:i.symbol=l.String(s);break;case e.TradingTag.LoanToValueRatio:i.loanToValueRatio=l.Decimal(s);break;case e.TradingTag.Shortable:i.shortable=1==l.Int(s);break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_POWER_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}n.portfolioRef.updateTradingPower(i);var c=new e.ResponseHeader;e.DEBUG_TRADING_POWER_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseTradingPower&&e.ResponseTradingPower(c,i)}),n.callback&&n.callback.ResponseTradingPower&&n.callback.ResponseTradingPower(c,i),n.commonFramework&&n.commonFramework.Reply(c,i),i.success()},a.prototype.ResponseAlgorithms=function(t,n){var i=new S,r=void 0,a=void 0,s=void 0;e.DEBUG_TRADING_ALGO_CS_TAGS&&e.logCSPackageHeader("ResponseAlgorithms",this.ps);for(var o=0,l=n.data;o<l.length;o++){var c=l[o].buf,d=new e.Parser(0,c.length);d.SkipHeader(c);for(var u=new e.Tag;d.Next(c,u,this.tagSet);)switch(e.DEBUG_TRADING_ALGO_CS_TAGS&&e.logToConsole(this.tagSet,u,c),u.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=u.Int(c);break;case e.TradingTag.FailDescription:i.failMessage=u.String(c);break;case e.TradingTag.AlgoId:var h=u.String(c);if(!InfrontUtil.isEmptyObject(r)){if(r.id===h)break;InfrontUtil.isEmptyObject(a)||(InfrontUtil.isEmptyObject(s)||a.addDropdownItem(s),r.addParamItem(a)),i.items.push(r)}r=new T(h),a=void 0,s=void 0;break;case e.TradingTag.AlgoBrokerId:r.brokerId=u.String(c);break;case e.TradingTag.AlgoUserId:r.userId=u.String(c);break;case e.TradingTag.AlgoLabel:r.label=u.String(c);break;case e.TradingTag.AlgoDescr:r.description=u.String(c);break;case e.TradingTag.AlgoProperties:r.properties=u.Int(c);break;case e.TradingTag.Market:r.markets||(r.markets=[]),r.markets.push(u.String(c));break;case e.TradingTag.AlgoParamId:a&&r&&(InfrontUtil.isEmptyObject(s)||a.addDropdownItem(s),r.addParamItem(a)),(a=new b).id=u.String(c),s=void 0;break;case e.TradingTag.AlgoParamLabel:a.label=u.String(c);break;case e.TradingTag.AlgoParamDescr:a.description=u.String(c);break;case e.TradingTag.AlgoParamMandatory:a.mandatory=0!==u.Int(c);break;case e.TradingTag.AlgoParamDefault:a.default=u.String(c);break;case e.TradingTag.AlgoParamType:a.typeNu=u.Int(c);break;case e.TradingTag.AlgoParamMaxLen:a.maxLen=u.Int(c);break;case e.TradingTag.AlgoParamMultiLine:a.multiLine=0!==u.Int(c);break;case e.TradingTag.AlgoParamMin:a.min=u.Int(c);break;case e.TradingTag.AlgoParamMax:a.max=u.Int(c);break;case e.TradingTag.AlgoParamFeed:a.addFeed(u.Int(c));break;case e.TradingTag.AlgoParamProperty:a.property=u.Int(c);break;case e.TradingTag.AlgoParamCustomNuRef:a.customNuRef=u.Int(c);break;case e.TradingTag.AlgoParamElement:s&&a&&a.addDropdownItem(s),(s=new y).label=u.String(c);break;case e.TradingTag.AlgoParamData:s.value=u.String(c);break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_CS&&e.log("Unhandled:",e.tagToStr(this.tagSet,u.tag),u.String(c))}}InfrontUtil.isEmptyObject(r)||(InfrontUtil.isEmptyObject(a)||(InfrontUtil.isEmptyObject(s)||a.addDropdownItem(s),r.addParamItem(a)),i.items.push(r)),this.algos=i;var p=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i.ToMws(),t.idStr()),this.callbacks.forEach(function(e){e.ResponseAlgorithms&&e.ResponseAlgorithms(p,i)}),n.callback&&n.callback.ResponseAlgorithms&&n.callback.ResponseAlgorithms(p,i),n.commonFramework&&n.commonFramework.Reply(p,i),i.success()},a.prototype.ResponseCustomFields=function(t,n){var i,r,a,s,o=new I,l=void 0;e.DEBUG_TRADING_CUST_FIELDS_CS_TAGS&&e.logCSPackageHeader("ResponseCustomFields",this.ps);for(var c=0,d=n.data;c<d.length;c++){var u=d[c].buf,h=new e.Parser(0,u.length);h.SkipHeader(u);for(var p=new e.Tag;h.Next(u,p,this.tagSet);)switch(e.DEBUG_TRADING_CUST_FIELDS_CS_TAGS&&e.logToConsole(this.tagSet,p,u),p.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:o.failCode=p.Int(u);break;case e.TradingTag.FailDescription:o.failMessage=p.String(u);break;case e.TradingTag.Feed:o.feed=p.Int(u);break;case e.TradingTag.Portfolio:o.portfolio=p.String(u);break;case e.TradingTag.DisplayPortfolio:o.displayPortfolio=p.String(u);break;case e.TradingTag.DefaultPortfolio:o.defaultPortfolio=p.String(u);break;case e.TradingTag.PortfolioDescr:o.portfolioDescription=p.String(u);break;case e.TradingTag.Market:s=p.String(u);break;case e.TradingTag.CustomNu:void 0===l?l=new C:InfrontUtil.isEmptyObject(l)||(l.market=s,o.items.push(l),l=new C),l.id=p.Int(u);break;case e.TradingTag.CustomType:l.typeNu=p.Int(u);break;case e.TradingTag.CustomLabel:l.label=p.String(u);break;case e.TradingTag.CustomForOrderTypes:l.addOrderType(p.Int(u));break;case e.TradingTag.AlgoParamMaxLen:l.maxLen=p.Int(u);break;case e.TradingTag.AlgoParamFeed:l.addFeed(p.Int(u));break;case e.TradingTag.AlgoParamMandatory:l.mandatory=0!==p.Int(u);break;case e.TradingTag.AlgoParamProperty:l.properties=p.Int(u);break;case e.TradingTag.CustomDisplay:i=p.String(u);break;case e.TradingTag.CustomData:r=p.String(u);break;case e.TradingTag.ComponentCode:a=p.String(u);break;case e.TradingTag.Separator:if(!InfrontUtil.isEmptyObject(l)){var m=l.addDisplayValues(i,r,a);i&&(this.customFieldLabelLookup[s+"_"+r]=i),m&&(l.market=s,o.items.push(l),l=new C)}i=void 0,r=void 0,a=void 0;break;default:e.DEBUG_TRADING_CUST_FIELDS_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,p.tag),p.String(u))}InfrontUtil.isEmptyObject(l)||(l.market=s,o.items.push(l))}o.dropdownItems=this.customFieldLabelLookup,this.customFields=o;var g=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),o,t.idStr()),this.callbacks.forEach(function(e){e.ResponseCustomFields&&e.ResponseCustomFields(g,o)}),n.callback&&n.callback.ResponseCustomFields&&n.callback.ResponseCustomFields(g,o),n.commonFramework&&n.commonFramework.Reply(g,o),o.success()},a.prototype.GetCustomFieldLabel=function(e,t){return this.customFieldLabelLookup[e+"_"+t]},a.prototype.ResponseMarketProperties=function(t,n){var i,r=this.markets=new M;e.DEBUG_TRADING_MKT_PROP_CS_TAGS&&e.logCSPackageHeader("ResponseMarketProperties",this.ps);for(var a=0,s=n.data;a<s.length;a++){var o=s[a].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c=new e.Tag;l.Next(o,c,this.tagSet);)switch(e.DEBUG_TRADING_MKT_PROP_CS_TAGS&&e.logToConsole(this.tagSet,c,o),c.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:r.failCode=c.Int(o);break;case e.TradingTag.FailDescription:r.failMessage=c.String(o);break;case e.TradingTag.Feed:r.feed=c.Int(o);break;case e.TradingTag.Market:i=c.String(o);break;case e.TradingTag.OrderType:i&&r.getMarket(i).orderTypes.push(c.Int(o));break;case e.TradingTag.MaxValidDays:i&&(r.getMarket(i).maxValidDays=c.Int(o));break;case e.TradingTag.MarketProperties:i&&(r.getMarket(i).marketProperties=c.Int(o));break;case e.TradingTag.MarketProperties2:i&&(r.getMarket(i).marketProperties2=c.Int(o));break;case e.TradingTag.Separator:i=void 0;break;default:e.DEBUG_TRADING_MKT_PROP_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,c.tag),c.String(o))}}r.findFeedsForMarkets(this.loginServer);var d=new e.ResponseHeader;e.DEBUG_TRADING_MKT_PROP_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),r,t.idStr()),this.callbacks.forEach(function(e){e.ResponseMarketProperties&&e.ResponseMarketProperties(d,r)}),n.callback&&n.callback.ResponseMarketProperties&&n.callback.ResponseMarketProperties(d,r),n.commonFramework&&n.commonFramework.Reply(d,r),r.success()},a.prototype.ProcessPortfolioItem=function(t,n,i){switch(n.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:case e.TradingTag.FailCode:case e.TradingTag.FailDescription:break;case e.TradingTag.Portfolio:t.portfolio=n.String(i),t.setValue(n.tag,n.get(i));break;default:t.setValue(n.tag,n.get(i))}},a.prototype.ProcessOrderItem=function(t,n,i){switch(n.tag){case e.TradingTag.Portfolio:t.portfolio=n.String(i),t.setValue(n.tag,n.get(i));break;case e.TradingTag.OrderStatus:case e.TradingTag.OrderStatusNew:t.setOrderStatus(n.Int(i));break;case e.TradingTag.CustomNu:t.tempCustomId=n.Int(i);break;case e.TradingTag.CustomData:null!=t.tempCustomId&&t.addCustomTag(t.tempCustomId,n.String(i)),t.tempCustomId=void 0;break;case e.TradingTag.AlgoId:t.algo=new T(n.String(i));break;case e.TradingTag.AlgoParamId:t.algo._tmpParam=new b(n.String(i));break;case e.TradingTag.AlgoParamData:t.algo._tmpParam.value=n.String(i),t.algo.addParamItem(t.algo._tmpParam),t.algo._tmpParam=void 0;break;case e.TradingTag.Separator:break;default:t.setValue(n.tag,n.get(i))}},a.prototype.ProcessTradeItem=function(t,n,i){switch(n.tag){case e.TradingTag.Portfolio:t.portfolio=n.String(i),t.setValue(n.tag,n.get(i));break;default:t.setValue(n.tag,n.get(i))}},a.prototype.ResponseOrdersAndTradesList=function(t,n,i){var r=this,a=new N,s=new w,o=new A,l=void 0;n.portfolioRef&&(a.portfolio=n.portfolioRef,i?a.portfolio.clearOrders():a.portfolio.clearTrades()),e.DEBUG_TRADING_ORDERS_TRADES_CS_TAGS&&e.logCSPackageHeader("ResponseOrdersAndTradesList",this.ps);for(var c=0,d=n.data;c<d.length;c++){var u=d[c].buf,h=new e.Parser(0,u.length);h.SkipHeader(u);for(var p=new e.Tag;h.Next(u,p,this.tagSet);)switch(e.DEBUG_TRADING_ORDERS_TRADES_CS_TAGS&&e.logToConsole(this.tagSet,p,u),p.tag){case e.TradingTag.RequestId:break;case e.TradingTag.PacketType:l=p.Int(u);break;case e.TradingTag.Separator:switch(l){case e.PacketTypes.Response:break;case e.PacketTypes.OrderStatus:this.portfolios.addOrder(s,a.portfolio),s=new w;break;case e.PacketTypes.Trade:this.portfolios.addTrade(o,a.portfolio),o=new A;break;default:l&&e.DEBUG_TRADING_RT_TRADE_TAGS&&e.log("Unhandled packet type",l)}break;default:switch(l){case e.PacketTypes.OrderStatus:this.ProcessOrderItem(s,p,u);break;case e.PacketTypes.Trade:this.ProcessTradeItem(o,p,u)}}}var m=a.portfolio.getSymbolMappingList();m&&m.length>0?this.requestSymbolMapping(m,function(){a.portfolio.applyMappedSymbolsFromCache(r.symbolMappingCache,r.streaming),r.DistributeOrdersAndTradesList(t,n,a)}):this.DistributeOrdersAndTradesList(t,n,a)},a.prototype.DistributeOrdersAndTradesList=function(t,n,i){var r=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseOrderList&&e.ResponseOrderList(r,i),e.ResponseNetTrades&&e.PortfolioName==i.portfolio.name&&e.ResponseNetTrades(r,i.portfolio.getNetTrades())}),n.callback&&n.callback.ResponseOrderList&&n.callback.ResponseOrderList(r,i),n.commonFramework&&n.commonFramework.Reply(r,i)},a.prototype.ResponseInsertOrder=function(t,n){var i=new L;e.DEBUG_TRADING_CS_TAGS&&e.logCSPackageHeader("ResponseInsertOrder",this.ps);for(var r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag;o.Next(s,l,this.tagSet);)switch(e.DEBUG_TRADING_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=l.Int(s);break;case e.TradingTag.FailDescription:i.failMessage=l.String(s);break;case e.TradingTag.OrderId:i.orderId=l.Int(s);break;case e.TradingTag.AutoActivate:i.autoActivate=1===l.Int(s);break;case e.TradingTag.OrderStatus:case e.TradingTag.OrderStatusNew:i.setOrderStatus(l.Int(s));break;case e.TradingTag.CustomerId:i.customerId=l.String(s);break;case e.TradingTag.Feed:i.feed=l.Int(s);break;case e.TradingTag.Symbol:i.symbol=l.String(s);break;case e.TradingTag.ExchInstrId:i.exchangeInstrumentId=l.String(s);break;case e.TradingTag.Isin:i.isin=l.String(s);break;case e.TradingTag.Market:i.market=l.String(s);break;case e.TradingTag.Underlying:i.underlying=l.String(s);break;case e.TradingTag.Currency:i.currency=l.String(s);break;case e.TradingTag.OrderFailCode:i.failCode=l.Int(s);break;case e.TradingTag.OrderFailDescription:i.failMessage=l.String(s);break;case e.TradingTag.InstrType:i.instrumentType=l.Int(s);break;case e.TradingTag.InstrSubType:i.instrumentSubType=l.Int(s);break;case e.TradingTag.ExecutionMarket:i.ExecutionMarket=l.String(s);break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}var c=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseInsertOrder&&e.ResponseInsertOrder(c,i)}),n.callback&&n.callback.ResponseInsertOrder&&n.callback.ResponseInsertOrder(c,i),n.commonFramework&&n.commonFramework.Reply(c,i)},a.prototype.ResponseModifyOrder=function(t,n){var i=new P;e.DEBUG_TRADING_CS_TAGS&&e.logCSPackageHeader("ResponseModifyOrder",this.ps);for(var r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag;o.Next(s,l,this.tagSet);)switch(e.DEBUG_TRADING_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.OrderFailCode:case e.TradingTag.FailCode:i.failCode=l.Int(s);break;case e.TradingTag.OrderFailDescription:case e.TradingTag.FailDescription:i.failMessage=l.String(s);break;case e.TradingTag.OrderId:i.orderId=l.Int(s);break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}var c=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseModifyOrder&&e.ResponseModifyOrder(c,i)}),n.callback&&n.callback.ResponseModifyOrder&&n.callback.ResponseModifyOrder(c,i),n.commonFramework&&n.commonFramework.Reply(c,i)},a.prototype.ResponseDeleteOrder=function(t,n){var i=new F;e.DEBUG_TRADING_CS_TAGS&&e.logCSPackageHeader("ResponseDeleteOrder",this.ps);for(var r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag;o.Next(s,l,this.tagSet);)switch(e.DEBUG_TRADING_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=l.Int(s);break;case e.TradingTag.FailDescription:i.failMessage=l.String(s);break;case e.TradingTag.OrderId:i.orderId=l.Int(s);break;case e.TradingTag.AutoDelete:i.autoDelete=1==l.Int(s);break;case e.TradingTag.CustomerId:i.customerId=l.String(s);break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}var c=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseDeleteOrder&&e.ResponseDeleteOrder(c,i)}),n.callback&&n.callback.ResponseDeleteOrder&&n.callback.ResponseDeleteOrder(c,i),n.commonFramework&&n.commonFramework.Reply(c,i)},a.prototype.ResponseActivateOrder=function(t,n){var i=new x;e.DEBUG_TRADING_CS_TAGS&&e.logCSPackageHeader("ResponseActivateOrder",this.ps);for(var r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag;o.Next(s,l,this.tagSet);)switch(e.DEBUG_TRADING_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=l.Int(s);break;case e.TradingTag.FailDescription:i.failMessage=l.String(s);break;case e.TradingTag.OrderId:i.orderId=l.Int(s);break;case e.TradingTag.OrderStatusNew:case e.TradingTag.OrderStatus:i.setOrderStatus(l.Int(s));break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}var c=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseActivateOrder&&e.ResponseActivateOrder(c,i)}),n.callback&&n.callback.ResponseActivateOrder&&n.callback.ResponseActivateOrder(c,i),n.commonFramework&&n.commonFramework.Reply(c,i)},a.prototype.responseRiskLevel=function(t,n){var i=new U;e.DEBUG_TRADING_CS_TAGS&&e.logCSPackageHeader("responseRiskLevel",this.ps);var r=n.order;if(r){i.order=r;for(var a=0,s=n.data;a<s.length;a++){var o=s[a].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c=new e.Tag;l.Next(o,c,this.tagSet);)switch(e.DEBUG_TRADING_CS_TAGS&&e.logToConsole(this.tagSet,c,o),c.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=c.Int(o);break;case e.TradingTag.FailDescription:i.failMessage=c.String(o);break;case e.TradingTag.RiskData:case e.TradingTag.ComponentCode:case e.TradingTag.CustomNu:case e.TradingTag.CustomData:case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,c.tag),c.String(o))}}}else e.DEBUG_TRADING_CS_TAGS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),"Order not found");var d=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseRiskLevel&&e.ResponseRiskLevel(d,i)}),n.callback&&n.callback.ResponseRiskLevel&&n.callback.ResponseRiskLevel(d,i),n.commonFramework&&n.commonFramework.Reply(d,i)},a.prototype.responseTickSize=function(t,n){for(var i=new B,r=0,a=n.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag,c=void 0,d=void 0,u=void 0,h=void 0,p=void 0;o.Next(s,l,this.tagSet);)switch(e.DEBUG_TRADING_CS_TAGS&&e.logToConsole(this.tagSet,l,s),l.tag){case e.TradingTag.RequestId:case e.TradingTag.PacketType:break;case e.TradingTag.FailCode:i.failCode=l.Int(s);break;case e.TradingTag.FailDescription:i.failMessage=l.String(s);break;case e.TradingTag.Feed:d=l.Int(s);break;case e.TradingTag.TickFromPrice:u=l.Decimal(s);break;case e.TradingTag.TickToPrice:h=l.Decimal(s);break;case e.TradingTag.TickSize:p=InfrontUtil.roundToPrecision(l.Decimal(s),10);break;case e.TradingTag.Separator:c||((c=new e.Realtime.TickSize).feed=d,c.id=0),c.items.push(new e.TickItem(0,u,h,p));break;default:e.DEBUG_TRADING_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,l.tag),l.String(s))}}var m=new e.ResponseHeader;e.DEBUG_TRADING_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,n.type),i,t.idStr()),this.callbacks.forEach(function(e){e.ResponseTickSize&&e.ResponseTickSize(m,i)}),n.callback&&n.callback.ResponseTickSize&&n.callback.ResponseTickSize(m,i),n.commonFramework&&n.commonFramework.Reply(m,i)},a.prototype.StreamingOrder=function(t,n,i){var r=this,a=this.tag,s=new w;for(e.DEBUG_TRADING_RT_ORDER_TAGS&&e.logRTPackageHeader("StreamingOrder",this.ps);i.Next(n,a,this.tagSet);)e.DEBUG_TRADING_RT_ORDER_TAGS&&e.logToConsole(this.tagSet,a,n),a.tag,this.ProcessOrderItem(s,a,n);s.hasErrorContent()&&this.publishEvent(new Infront.TradingErrorEvent(this.ps,this.serviceInfo.getFullName(),s.getValue(e.TradingTag.OrderFailCode),s.getValue(e.TradingTag.OrderFailDescription))),this.requestSymbolMapping([s],function(n){s=n[0],s=r.portfolios.addOrder(s),e.DEBUG_TRADING_RT_ORDER&&e.log(r.ps.toStr(),"RT OrderStatus",s.inspect()),r.callbacks.forEach(function(e){e.StreamingOrderStatus&&e.StreamingOrderStatus(t,s)}),r.NeedTradingPower(r.portfolios.get(s.portfolio))})},a.prototype.StreamingOrderStatus=function(t,n,i){var r=this,a=this.tag,s=new w;for(e.DEBUG_TRADING_RT_ORDER_STATUS_TAGS&&e.logRTPackageHeader("StreamingOrderStatus",this.ps);i.Next(n,a,this.tagSet);)switch(e.DEBUG_TRADING_RT_ORDER_STATUS_TAGS&&e.logToConsole(this.tagSet,a,n),a.tag){case e.TradingTag.Separator:break;default:this.ProcessOrderItem(s,a,n)}s.hasErrorContent()&&this.publishEvent(new Infront.TradingErrorEvent(this.ps,this.serviceInfo.getFullName(),s.getValue(e.TradingTag.OrderFailCode),s.getValue(e.TradingTag.OrderFailDescription))),this.requestSymbolMapping([s],function(n){s=n[0],s=r.portfolios.addOrder(s),e.DEBUG_TRADING_RT_ORDER_STATUS&&e.log(r.ps.toStr(),"RT OrderStatus",s.inspect()),r.callbacks.forEach(function(e){e.StreamingOrderStatus&&e.StreamingOrderStatus(t,s)}),r.NeedTradingPower(r.portfolios.get(s.portfolio))})},a.prototype.StreamingTrade=function(t,n,i){var r=this,a=this.tag,s=new A;for(e.DEBUG_TRADING_RT_TRADE_TAGS&&e.logRTPackageHeader("StreamingTrade",this.ps);i.Next(n,a,this.tagSet);)switch(e.DEBUG_TRADING_RT_TRADE_TAGS&&e.logToConsole(this.tagSet,a,n),a.tag){case e.TradingTag.Separator:break;default:this.ProcessTradeItem(s,a,n)}this.hasStreamingPortfolioUpdates()||this.timerToken||(this.timerToken=setTimeout(function(){r.timerToken=null,r.updatePortfolio(s.portfolio)},2e3)),this.requestSymbolMapping([s],function(n){s=n[0];var i=r.portfolios.addTrade(s);e.DEBUG_TRADING_RT_TRADE&&e.log(r.ps.toStr(),"RT Trade",s.inspect()),e.DEBUG_TRADING_RT_TRADE&&e.log(r.ps.toStr(),"RT NetTrades",i.ToMws()),r.callbacks.forEach(function(e){e.StreamingTrade&&e.StreamingTrade(t,s,!1),e.ResponseNetTrades&&e.PortfolioName==s.portfolio&&e.ResponseNetTrades(t,{net_trade:i.ToMws()})});var a=r.portfolios.getOrder(s.portfolio,s.orderId());a&&r.callbacks.forEach(function(e){e.StreamingOrderStatus&&e.StreamingOrderStatus(t,a)}),r.NeedTradingPower(r.portfolios.get(s.portfolio))})},a.prototype.StreamingPortfolioPositionUpdate=function(t,n,i){var r=this,a=this.tag,s=new m;for(e.DEBUG_TRADING_RT_POSITION_TAGS&&e.logRTPackageHeader("StreamingPortfolioPositionUpdate",this.ps);i.Next(n,a,this.tagSet);)switch(e.DEBUG_TRADING_RT_POSITION_TAGS&&e.logToConsole(this.tagSet,a,n),a.tag){case e.TradingTag.Separator:break;default:this.ProcessPortfolioItem(s,a,n)}this.portfolios.addPosition(s),this.requestSymbolMapping([s],function(n){s=n[0],(e.DEBUG_TRADING_RT_POSITION&&s.getValue(e.TradingTag.MoneyKind)!==e.MoneyKind.Custom||e.DEBUG_TRADING_RT_PORT_HEADER)&&e.log(r.ps.toStr(),"RT PortfolioPosition",s.inspect()),r.callbacks.forEach(function(e){e.StreamingPortfolioPositions&&e.StreamingPortfolioPositions(t,s)}),r.NeedTradingPower(r.portfolios.get(s.portfolio))})},a.prototype.StreamingTradingPower=function(t,n,i){var r=this.tag,a=new f;for(e.DEBUG_TRADING_RT_TRADING_POWER_TAGS&&e.logRTPackageHeader("StreamingTradingPower",this.ps);i.Next(n,r,this.tagSet);)switch(e.DEBUG_TRADING_RT_TRADING_POWER_TAGS&&e.logToConsole(this.tagSet,r,n),r.tag){case e.TradingTag.Portfolio:a.portfolio=r.String(n);break;case e.TradingTag.DisplayPortfolio:a.displayPortfolio=r.String(n);break;case e.TradingTag.TradingPower:a.tradingPower=r.Decimal(n);break;case e.TradingTag.TradingPowerStatus:a.tradingPowerStatus=r.Int(n);break;case e.TradingTag.Currency:a.currency=r.String(n);break;case e.TradingTag.Separator:break;default:e.DEBUG_TRADING_RT_TRADING_POWER&&e.log("Unhandled:",e.tagToStr(this.tagSet,r.tag),r.String(n))}this.portfolios.updateTradingPower(a),e.DEBUG_TRADING_RT_TRADING_POWER&&e.log(this.ps.toStr(),"RT TradingPower",a),this.callbacks.forEach(function(e){e.StreamingTradingPower&&e.StreamingTradingPower(t,a)})},a.prototype.lowLevelData=function(t,n,i){if(t.uniqueId>0){var r=this.requests[t.uniqueId];if(!r)return;if(r.data.push(new e.ResponseItem(i.DuplicateData(n))),t.segment!==e.SegmentInfo.Last)return;switch(delete this.requests[t.uniqueId],r.type){case e.TradingRequest.Login:return void this.ResponseLogin(t,r);case e.TradingRequest.Portfolio:return void this.ResponsePortfolioPositions(t,r);case e.TradingRequest.PortfolioNames:return void this.ResponsePortfolioNames(t,r);case e.TradingRequest.TradingPower:return void this.ResponseTradingPower(t,r);case e.TradingRequest.Algorithms:return void this.ResponseAlgorithms(t,r);case e.TradingRequest.CustomFields:return void this.ResponseCustomFields(t,r);case e.TradingRequest.MarketProperties:return void this.ResponseMarketProperties(t,r);case e.TradingRequest.OrderList:return void this.ResponseOrdersAndTradesList(t,r,!0);case e.TradingRequest.TradeList:return void this.ResponseOrdersAndTradesList(t,r,!1);case e.TradingRequest.InsertOrder:return void this.ResponseInsertOrder(t,r);case e.TradingRequest.ModifyOrder:return void this.ResponseModifyOrder(t,r);case e.TradingRequest.DeleteOrder:return void this.ResponseDeleteOrder(t,r);case e.TradingRequest.ActivateOrder:return void this.ResponseActivateOrder(t,r);case e.TradingRequest.RiskLevel:return void this.responseRiskLevel(t,r);case e.TradingRequest.TickSize:return void this.responseTickSize(t,r);default:e.DEBUG_VERBOSE&&e.log("Unhandled CS response:",e.requestToStr(this.tagSet,t.request))}}for(var a,s=new e.Tag;i.Next(n,s,this.tagSet);){if(s.tag===e.TradingTag.PacketType)switch(s.Int(n)){case e.PacketTypes.Order:return void this.StreamingOrder(t,n,i);case e.PacketTypes.OrderStatus:return void this.StreamingOrderStatus(t,n,i);case e.PacketTypes.Trade:return void this.StreamingTrade(t,n,i);case e.PacketTypes.Portfolio:return void this.StreamingPortfolioPositionUpdate(t,n,i);case e.PacketTypes.TradingPower:return void this.StreamingTradingPower(t,n,i);case e.PacketTypes.Response:case e.PacketTypes.PortfolioNames:break;default:e.DEBUG_VERBOSE&&e.log("Unhandled packet type:",e.packetTypeToStr(s.Int(n)))}switch(a||(a=new H),e.logToConsole(this.tagSet,s,n),s.tag){case e.TradingTag.FailCode:a.failCode=s.Int(n);break;case e.TradingTag.FailEventId:a.failEventId=s.String(n);break;case e.TradingTag.FailDescription:a.failDescription=s.String(n);break;case e.TradingTag.Feed:a.feed=s.Int(n);break;case e.TradingTag.Portfolio:a.portfolio=s.String(n);break;case e.TradingTag.RequestId:a.requestId=s.Int(n);break;case e.TradingTag.Separator:break;default:e.DEBUG_VERBOSE&&e.log("Unhandled:",e.tagToStr(this.tagSet,s.tag),s.String(n))}}a&&a.hasErrorContent()&&this.publishEvent(new Infront.TradingErrorEvent(this.ps,this.serviceInfo.getFullName(),e.failCodeToStr(a.failCode),a.failDescription))},a.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),this.callbacks.forEach(function(e){e.ResponseError&&e.ResponseError(t)}),delete this.requests[t.uniqueId]),e.DEBUG_VERBOSE&&e.log(this.ps.toStr(),"LowLevelError:",i)},a.prototype.lowLevelReRequestAll=function(e){if(this.login&&(this.password||this.pin||this.token))this.Login(this.login,this.password,this.pin,this.token,this.tokenType);else for(var t=0,n=this.callbacks;t<n.length;t++){var i=n[t];i.TradeReadyForLogin&&i.TradeReadyForLogin(e)}},a.prototype.reconnect=function(){for(var e in this.algos=null,this.customFields=null,this.markets=null,this.portfolios.clear(),this.subscriptions){var t=[new n(this.loginData.feed,"PORT:"+e)];this.conn.SubscribeSymbols(t),this.updateOrdersAndTrades(e),this.updatePortfolio(e)}},a.prototype.clearDisconnectTimer=function(){this.disconnectTimerToken&&(clearTimeout(this.disconnectTimerToken),this.disconnectTimerToken=null)},a.prototype.lowLevelConnect=function(n,i){var r=this,a=this.loginDone;if(this.clearDisconnectTimer(),e.DEBUG_SERVER_CONN_DETAIL&&e.log(n.toStr(),e.serverTypeToStr(this.serverType),"Low level",a?"reconnect:":"connect:",this.serviceInfo.getFullName()),!this.hasPendingLogin&&this.login&&(this.password||this.pin||this.token)){var s=void 0;a&&(this.publishEvent(new Infront.TradingLostConnectionEvent(this.serviceInfo.getFullName(),Infront.TerminationCodes.unknown,"Lost connection")),(s=new e.CommonFrameworkResponse).Reply=function(e,t){t.success()&&r.reconnect()}),this.Login(this.login,this.password,this.pin,this.token,this.tokenType,s)}else{var o=new e.Header(n);this.callbacks.forEach(function(e){e.TradeReadyForLogin&&e.TradeReadyForLogin(o)})}t.prototype.lowLevelConnect.call(this,n,i)},a.prototype.lowLevelDisconnect=function(n,i,r){var a=this;e.DEBUG_SERVER_CONN_DETAIL&&e.log(n.toStr(),e.serverTypeToStr(this.serverType),"LowLevelDisconnect. Subscriptions:",i,"Outstanding requests:",r),this.disconnectTimerToken=setTimeout(function(){e.DEBUG_TIMERS&&e.log(a.ps.toStr(),"TradingTerminated timer fired"),a.clearDisconnectTimer(),a.portfolios.clear(),a.publishEvent(new Infront.TradingTerminatedEvent(a.serviceInfo.getFullName(),Infront.TerminationCodes.unknown,"Disconnect"))},15e3),t.prototype.lowLevelDisconnect.call(this,n,i,r)},a}(e.BaseIDSServer);e.TradingServer=Y}(IDS||(IDS={})),function(e){var t=function(t){function n(e,n){var i=t.call(this)||this;return i.extra={},n&&(i.instrument=n,e&&(i.symbol=e.getSymbol(n.feed,n.ticker))),i}return __extends(n,t),n.prototype.applyStorageListItem=function(t,n){this.instrument=new e.Instrument(n.instrument.feed,n.instrument.ticker),this.extra=n.extra,t&&(this.symbol=t.getSymbol(n.instrument.feed,n.instrument.ticker))},n.prototype.getStorageListItem=function(){var e=new IDS.StorageListItem(this.instrument.feed,this.instrument.ticker);return e.extra=this.extra,e},n.prototype.hasValidInstrument=function(){var t=!1;return e.Instrument.isInstrument(this.instrument)&&(t=""!=this.instrument.ticker&&Number(this.instrument.feed)>0),t},n.prototype.hasValue=function(e){return this.extra&&this.extra.hasOwnProperty(e)&&null!=this.extra[e]},n.prototype.getValue=function(e){return this.hasValue(e)?this.extra[e]:""},n.prototype.getDecimals=function(){return this.symbol?this.symbol.GetDecimals():2},n.prototype.getFormattedValue=function(e,t){void 0===t&&(t=null);var n=this.hasValue(e)?InfrontUtil.parseFloatValue(this.extra[e]):null;return n?(null===t&&(t=this.symbol?this.symbol.GetDecimals():2),InfrontUtil.formatNumber(n,t).toString()):null},n.prototype.getNumValue=function(e){return this.hasValue(e)?InfrontUtil.parseFloatValue(this.extra[e]):null},n.prototype.setValue=function(e,t){t&&(this.extra[e]=t)},n}(e.Observable);e.WatchlistEntry=t;var n=function(){function n(t,n){this.id="",this.entries=new e.ObservableArray,this.streamingManager=t,this.isReadOnly=n}return n.prototype.setEntries=function(e){this.entries.replaceWith(e)},n.prototype.addEntry=function(e){return!this.contains(e)&&(this.entries.push(e),!0)},n.prototype.updateEntry=function(e){var t=this.findMatchingEntry(e);return null!=t&&(t.extra=e.extra,t.symbol=e.symbol,!0)},n.prototype.removeEntry=function(e){var t=this.findMatchingEntry(e);return null!=t&&(this.entries.remove(t),!0)},n.prototype.findMatchingEntry=function(t){return this.entries.find(function(n){return e.Instrument.isSameInstrument(t.instrument,n.instrument)})},n.prototype.findInstrument=function(n){var i,r=new t(this.streamingManager,n);return r.hasValidInstrument()&&(i=this.entries.find(function(t){return e.Instrument.isSameInstrument(r.instrument,t.instrument)})),i},n.prototype.contains=function(e){return null!=this.findMatchingEntry(e)},n.prototype.addInstrument=function(e,n){var i=new t(this.streamingManager,e);return n&&(i.extra=n),this.addEntry(i)},n.prototype.removeInstrument=function(e,n){var i=new t(this.streamingManager,e);return this.removeEntry(i)},n.prototype.getStorageListContent=function(){var e=new IDS.StorageListContent;return e.items=this.entries.data.map(function(e){return e.getStorageListItem()}),e.referenceIndex=this.referenceIndex?this.referenceIndex.getStorageListItem():null,e.listProperties=this.listProperties,e},n.prototype.clear=function(){this.entries.clear()},n}();e.Watchlist=n;var i=function(){function i(t,n){this.listTitles=new e.SortedObservableArray(e.CompareFunctions.compareStringsDesc,!1),this.listContents={},this.titlesInitialised=!1,this.readOnly={},this.controller=t,this.model=n}return i.prototype.getListHeader=function(e){var t;if(this.idsListHeaders)for(var n=0,i=this.idsListHeaders;n<i.length;n++){var r=i[n];r.title==e&&(t=r)}return t},i.prototype.getListId=function(e){var t=this.getListHeader(e);return t?t.id:""},i.prototype.deleteIdsHeader=function(e){if(this.idsListHeaders)for(var t=0;t<this.idsListHeaders.length;t++)if(this.idsListHeaders[t].id==e){this.idsListHeaders.splice(t,1);break}},i.prototype.sanitizeListName=function(e){return e.replace("<","&lt;").replace(">","&gt;")},i.prototype.getStorageServer=function(){var e;return this.pidSid=this.pidSid||this.model.loginServer().getFirstPidSidForServiceType(IDS.ServiceType.Storage),this.pidSid?((e=this.model.serverPool.GetStorage(this.pidSid,this)).extLoginId=this.extLoginId,e.namespace=this.namespace):IDS.log("%cStorage server not found","color: #f60; font-size: 14px;"),e},i.prototype.doneStorageServer=function(e,t){this.model.serverPool.Dispose(this.pidSid,e.serverType,this,t)},i.prototype.getStorageUploadServer=function(){var e;return this.uploadPidSid=this.uploadPidSid||this.model.loginServer().getFirstPidSidForServiceType(IDS.ServiceType.StorageUpload),this.uploadPidSid?((e=this.model.serverPool.GetStorage(this.uploadPidSid,this)).extLoginId=this.extLoginId,e.namespace=this.namespace):IDS.log("%cUpload storage server not found","color: #f60; font-size: 14px;"),e},i.prototype.doneStorageUploadServer=function(e,t){this.model.serverPool.Dispose(this.uploadPidSid,e.serverType,this,t)},i.prototype.getWatchlistTitles=function(){var e=this;return this.listTitlesPromise||(this.listTitlesPromise=new Promise(function(t,n){var i=e.getStorageServer();if(i){var r={ResponseStorageList:function(n,i){e.idsListHeaders=i.items,e.setListTitles(i.items.map(function(e){return e.title}));for(var r=0,a=i.items;r<a.length;r++){var s=a[r];"1"==s.category(IDS.StorageXmlTags.IsPortfolio)&&(e.readOnly[s.title]=!0)}t(e.listTitles)},ResponseError:function(e){InfrontUtil.errorLogCallback(404,e.errorMsg),n(403)}};i.GetList(r),e.doneStorageServer(i,"getWatchlistTitles")}else n(403)})),this.listTitlesPromise},i.prototype.createDefaultList=function(){this.listContents[i.kDefaultListName]||(this.listContents[i.kDefaultListName]=Promise.resolve(new n(this.model.streamingManager,!1)))},i.prototype.setListTitles=function(e){0==e.length&&(e.push(i.kDefaultListName),this.createDefaultList()),this.listTitles.replaceWith(e)},i.prototype.getListContent=function(e){var i=this;return this.listContents.hasOwnProperty(e)||(this.listContents[e]=new Promise(function(r,a){var s=i.getStorageServer();if(s){var o={ResponseStorageGetFile:function(a,s){var o=s.DecodeWatchlist(),l=o.items.map(function(e){var n=new t;return n.applyStorageListItem(i.model.streamingManager,e),n}),c=new n(i.model.streamingManager,1==i.readOnly[e]);c.setEntries(l),c.listProperties=o.listProperties,o.referenceIndex&&(c.referenceIndex=new t,c.referenceIndex.applyStorageListItem(i.model.streamingManager,o.referenceIndex)),IDS.DEBUG_STORAGE_CS&&IDS.log("getListContent",c),r(c)},ResponseError:function(e){if(e.type==IDS.ResponseEnum.Ok){var t=new n(i.model.streamingManager,!1);r(t)}else InfrontUtil.errorLogCallback(500,e.errorMsg),a(500)}},l=new IDS.GetFileRequest;l.id=i.getListId(e),l.id?s.GetFile(l,o):a("List not found: '"+e+"'"),i.doneStorageServer(s,"getListContent")}else{var c=new n(i.model.streamingManager,!1);r(c)}})),this.listContents[e]},i.prototype.setListContent=function(e,t){},i.prototype.setListReadOnly=function(e,t){},i.prototype.updateList=function(e,t){return this.listContents[e]=Promise.resolve(t),this.sendSaveListRequest(e,t)},i.prototype.saveList=function(e,t,n){return this.listContents.hasOwnProperty(e)?this.listContents[e].then(function(e){e.setEntries(t.entries.data)}):this.listContents[e]=Promise.resolve(t),this.sendSaveListRequest(e,t)},i.prototype.sendSaveListRequest=function(e,t){var i=this;return new Promise(function(r,a){var s=i.getStorageUploadServer();if(s){var o={ResponseStoragePutFile:function(e,t){r(200)},ResponseError:function(e){InfrontUtil.errorLogCallback(500,e.errorMsg),a(500)}},l=i.getListHeader(e),c=new IDS.PutMobileListRequest(e,t.getStorageListContent(),l);s.PutFile(c,o),i.doneStorageUploadServer(s,"sendSaveListRequest")}else{var d=new n(i.model.streamingManager,!1);r(d)}})},i.prototype.addListInstrument=function(e,t){var n=this;return new Promise(function(i,r){n.listContents.hasOwnProperty(e)?n.listContents[e].then(function(a){a.isReadOnly?r("Unable to add instrument: List is read-only"):a.addInstrument(t)?n.sendSaveListRequest(e,a).then(function(){i(!0)}).catch(function(e){r(e)}):r("List already contains instrument")}):r("List does not exist")})},i.prototype.removeListInstrument=function(e,t){var n=this;return new Promise(function(i,r){n.listContents.hasOwnProperty(e)?n.listContents[e].then(function(a){a.isReadOnly?r("Unable to remove instrument: List is read-only"):a.removeInstrument(t)?n.sendSaveListRequest(e,a).then(function(){i(!0)}).catch(function(e){r(e)}):r("List does not contain instrument")}):r("List does not exist")})},i.prototype.addListTitle=function(e){var t=this;return new Promise(function(i,r){var a=t.sanitizeListName(e);0==a.length&&r("Bad list name"),t.listTitlesPromise.then(function(e){e.indexOf(a)>=0?r("List already exists"):(e.push(a),t.saveList(a,new n(t.model.streamingManager,!1)).then(function(){}).catch(function(e){r(e)}),i(!0))})})},i.prototype.removeList=function(e){var t=this;return new Promise(function(n,i){t.listTitles.remove(e),t.listContents.hasOwnProperty(e)&&t.listContents[e].then(function(n){n.clear(),delete t.listContents[e]});var r=t.getStorageUploadServer();if(r){var a={ResponseStorageDeleteFile:function(e,t){n(!0)},ResponseError:function(e){InfrontUtil.errorLogCallback(500,e.errorMsg),i(500)}},s=t.getListId(e);s?(t.deleteIdsHeader(s),r.DeleteFile(s,a)):i("removeList failed. List not found: '"+e+"'"),t.doneStorageUploadServer(r,"removeList")}else InfrontUtil.errorLogCallback(403,"No storage server access"),i(403)})},i.kDefaultListName="My List",i}();e.WatchListManager=i}(Infront||(Infront={})),function(e){var t=Infront.Instrument;!function(n){var i=function(){};n.AlertValue=i;var r=function(){function t(e,t,n){this.operator=e,this.isLeft=t,this.type=n}return t.prototype.hasLeft=function(){return null!=this.left||null!=this.mdValue},t.prototype.hasRight=function(){return null!=this.right||null!=this.double},t.prototype.addSubNode=function(e,n){var i=new t(e,n,this.type);return i.parent=this,n?this.left=i:this.right=i,i},t.prototype.addMdField=function(e){this.mdValue||(this.mdValue=new i),this.mdValue.mdField=e},t.prototype.addFeedTicker=function(e,t){this.mdValue||(this.mdValue=new i),this.mdValue.feed=e,this.mdValue.ticker=t},t.prototype.getLeftValue=function(){if(this.left)return this.left.ToMws();switch(this.type){case e.AlertType.Instrument:return{md_value:{md_field:e.ToMws.AlertMdFieldToStr(this.mdValue.mdField),instrument:{feed:this.mdValue.feed,ticker:this.mdValue.ticker}}};case e.AlertType.Chain:return{chain_value:{}};case e.AlertType.List:return{list_value:{}};case e.AlertType.News:return{news_value:{}};case e.AlertType.Portfolio:return{portfolio_value:{portfolio_field:e.ToMws.AlertPortfolioDataFieldToStr(this.mdValue.mdField)}}}},t.prototype.getRightValue=function(){return this.right?this.right.ToMws():{double:this.double}},t.prototype.getSymbol=function(){return this.left?this.left.getSymbol():this.mdValue.ticker},t.prototype.getValueStr=function(){return InfrontUtil.roundToPrecision(this.getRightValue(),2).toString()},t.prototype.getChangeStr=function(){switch(this.operator){case e.AlertOperator.And:case e.AlertOperator.Or:return this.left.getChangeStr();case e.AlertOperator.Gt:case e.AlertOperator.Gte:return"is up";case e.AlertOperator.Lt:case e.AlertOperator.Lte:return"is down";case e.AlertOperator.Eq:return"is";case e.AlertOperator.Ne:return"is not";default:return""}},t.prototype.getFieldType=function(){return e.AlertMarketDataField.Last},t.prototype.getAlertMessage=function(t){var n="";switch(t){case e.AlertUpdateType.Alert:switch(n+=this.getSymbol()+" ",this.getFieldType()){case e.AlertMarketDataField.Last:n+="traded at "+this.getSymbol();break;case e.AlertMarketDataField.Volume:n+="volume is "+this.getValueStr();break;case e.AlertMarketDataField.ChangePct:n+=this.getChangeStr()+" "+this.getValueStr()+"%";break;default:n+="is "+this.getValueStr()}break;case e.AlertUpdateType.Event:case e.AlertUpdateType.Owc:}return n},t.prototype.buildRequest=function(t){t.AddInt(e.AlertTag.Operator,this.operator),this.left?this.left.buildRequest(t):this.mdValue&&(t.AddInt(e.AlertTag.MarketDataField,this.mdValue.mdField),t.AddInt(e.AlertTag.Feed,this.mdValue.feed),t.AddString(e.AlertTag.Ticker,this.mdValue.ticker)),this.right?this.right.buildRequest(t):t.AddBCD(e.AlertTag.Double,this.double)},t.prototype.ToMws=function(){return{left:this.getLeftValue(),right:this.getRightValue(),operator:e.ToMws.AlertOperatorToStr(this.operator)}},t}();n.AlertNode=r;var a=function(){function t(e){void 0===e&&(e=null),this.enabled=!0,this.notificationMsg="",this.id=e}return t.prototype.addComment=function(e){this.comment=e.replace("<","&lt;").replace(">","&gt;")},t.prototype.addNode=function(e){var t;return this.currentNode?this.currentNode.hasLeft()?this.currentNode.hasRight()?(this.currentNode=this.currentNode.parent,this.currentNode&&(t=this.addNode(e))):this.currentNode=t=this.currentNode.addSubNode(e,!1):this.currentNode=t=this.currentNode.addSubNode(e,!0):(t=new r(e,!0,this.type),this.currentNode=this.rule=t),t},t.prototype.assign=function(e){this.currentNode=void 0,this.revisionIndex=e.revisionIndex,this.description=e.description,this.comment=e.comment,this.enabled=e.enabled,this.timeoutMinutes=e.timeoutMinutes,this.type=e.type,this.triggerType=e.triggerType,this.operator=e.operator,this.rule=e.rule,this.marketDataField=e.marketDataField,this.portfolioDataField=e.portfolioDataField,this.list=e.list},t.prototype.buildRequest=function(t){t.AddString(e.AlertTag.Id,this.id),t.AddInt(e.AlertTag.Type,this.type),this.revisionIndex&&t.AddInt(e.AlertTag.RevisionIndex,this.revisionIndex),t.AddString(e.AlertTag.Comment,this.comment),t.AddInt(e.AlertTag.TriggerType,this.triggerType),t.AddInt(e.AlertTag.Enabled,this.enabled?1:0),this.rule.buildRequest(t),t.AddInt(e.AlertTag.Separator,0)},t.prototype.ToMws=function(t){return void 0===t&&(t=void 0),{comment:this.comment,description:this.description,enabled:this.enabled,id:this.id,index:this.revisionIndex,rule:this.rule.ToMws(),trigger_type:e.ToMws.AlertTriggerTypeToStr(this.triggerType),type:e.ToMws.AlertTypeToStr(this.type)}},t}();n.ServerAlert=a;var s=function(){function t(e){this.notificationMsg="",this.loginId=e}return t.prototype.addComment=function(e){this.comment=e.replace("<","&lt;").replace(">","&gt;")},t.prototype.getTriggerTime=function(){return InfrontUtil.DateFromDateAndTimeNu(this.triggerDate,this.triggerTime)},t.prototype.ToMws=function(){return{data:{message:this.notificationMsg,payload:{alert_id:this.id,event_id:this.eventId,type:e.ToMws.AlertTypeToStr(this.type),trigger_time:e.MWSMakeFullDateTime(this.triggerDate,this.triggerTime),event_read:this.eventRead,comment:this.comment,host_name:this.hostName,description:this.description,instrument:{feed:this.feed,ticker:this.ticker}}}}},t}();n.AlertEvent=s;var o=function(){function e(){this.items={}}return e.prototype.clear=function(){this.items={}},e.prototype.get=function(e){var t=this.items[e];return t||(t=this.items[e]=new a(e)),t},e.prototype.addOrModify=function(e){var t=this.items[e.id];t?t.assign(e):this.items[e.id]=e},e.prototype.delete=function(e){delete this.items[e.id]},e}();n.AlertDb=o;var l=function(){function e(){this.items=[]}return e.prototype.ToMws=function(){for(var e=[],t=0,n=this.items;t<n.length;t++){var i=n[t];e.push(i.ToMws())}return e},e}();n.AlertsResponse=l;var c=function(){};n.AlertsEmailDeviceResponse=c;var d=function(n){function i(t,i){var r=n.call(this,i,t,e.ServerType.Alert)||this;return r.requests={},r.tag=new e.Tag,r.callbacks=[],r.hasSubscription=!1,r.hasAlerts=!1,r.alerts=new o,r.loginId=r.serverPool.login.loginInfo.loginId,r.conn=new e.ServerConnection(t,i.secure,r,r.serverPool.login.getAccessFeeds(t),r.serverPool.login.getHosts(t),r.tagSet,i,r.serverType),r}return __extends(i,n),i.prototype.subscribeAlerts=function(n){if(!this.hasSubscription){var i=this.serverPool.login.getAccessFeeds(this.ps);i&&(this.instrument=new t(i[0],"USR:"+this.loginId),this.conn.SubscribeSymbols([this.instrument]),this.hasSubscription=!0)}-1===this.callbacks.indexOf(n)&&this.callbacks.push(n),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"Alerts: subscribeAlerts.",this.instrument,"Total callbacks:",this.callbacks.length)},i.prototype.unsubscribeAlerts=function(t){this.callbacks.splice(this.callbacks.indexOf(t),1),0===this.callbacks.length&&(this.instrument&&this.conn.UnsubscribeSymbols([this.instrument]),this.hasSubscription=!1),e.DEBUG_CALLBACKS&&e.log(this.ps.toStr(),"Alerts: unsubscribeAlerts.",this.instrument,"Total callbacks:",this.callbacks.length)},i.prototype.getAlerts=function(t,n){if(void 0===n&&(n=null),this.hasAlerts&&this.hasSubscription){var i=new l;for(var r in this.alerts.items)i.items.push(this.alerts.items[r]);var a=new e.ResponseHeader;this.callbacks.forEach(function(e){e.ResponseGetAlerts&&e.ResponseGetAlerts(a,i)}),t&&t.ResponseGetAlerts&&t.ResponseGetAlerts(a,i),n&&n.Reply(a,i.ToMws())}else{var s=this.conn.GetRequest(e.AlertRequest.GetAlerts,0),o=this.requests[s.uniqueId]=new e.Request;o.type=e.AlertRequest.GetAlerts,o.commonFramework=n,o.callback=t,s.AddInt(e.AlertTag.LoginId,this.loginId),s.AddInt(e.AlertTag.Separator,0),this.conn.Send(s,!0)}},i.prototype.deleteAlert=function(t,n,i,r){void 0===r&&(r=null);var a=this.conn.GetRequest(e.AlertRequest.DeleteAlert,0),s=this.requests[a.uniqueId]=new e.Request;s.type=e.AlertRequest.DeleteAlert,s.commonFramework=r,s.callback=i,a.AddInt(e.AlertTag.LoginId,this.loginId),a.AddString(e.AlertTag.Id,n),a.AddInt(e.AlertTag.RevisionIndex,t),a.AddInt(e.AlertTag.Separator,0),this.conn.Send(a,!0)},i.prototype.addAlert=function(t,n,i){void 0===i&&(i=null);var r=this.conn.GetRequest(e.AlertRequest.AddAlert,0),a=this.requests[r.uniqueId]=new e.Request;a.type=e.AlertRequest.AddAlert,a.commonFramework=i,a.callback=n,r.AddInt(e.AlertTag.LoginId,this.loginId),t.buildRequest(r),this.conn.Send(r,!0)},i.prototype.modifyAlert=function(t,n,i){void 0===i&&(i=null);var r=this.conn.GetRequest(e.AlertRequest.ModifyAlert,0),a=this.requests[r.uniqueId]=new e.Request;a.type=e.AlertRequest.ModifyAlert,a.commonFramework=i,a.callback=n,r.AddInt(e.AlertTag.LoginId,this.loginId),t.buildRequest(r),this.conn.Send(r,!0)},i.prototype.addOrDeleteAlertDevice=function(t,n,i,r,a,s){void 0===s&&(s=null);var o=n?e.AlertRequest.AddDevice:e.AlertRequest.DeleteDevice,l=this.conn.GetRequest(o,0),c=this.requests[l.uniqueId]=new e.Request;c.type=o,c.commonFramework=s,c.callback=a,l.AddInt(e.AlertTag.LoginId,this.loginId),l.AddInt(e.AlertTag.DeviceType,t),l.AddInt(e.AlertTag.Enabled,i?1:0),l.AddString(e.AlertTag.DeviceId,n),t===e.AlertDeviceType.Apns&&l.AddString(e.AlertTag.DeviceClient,r),this.conn.Send(l,!0)},i.prototype.getEmailDevice=function(t,n){void 0===n&&(n=null);var i=this.conn.GetRequest(e.AlertRequest.GetEmailDevice,0),r=this.requests[i.uniqueId]=new e.Request;r.type=e.AlertRequest.GetEmailDevice,r.commonFramework=n,r.callback=t,i.AddInt(e.AlertTag.LoginId,this.loginId),this.conn.Send(i,!0)},i.prototype.ProcessAlertItem=function(t,n,i){if(t)switch(n.tag){case e.AlertTag.Type:t.type=n.Int(i);break;case e.AlertTag.Description:t.description=n.String(i);break;case e.AlertTag.Comment:t.addComment(n.String(i));break;case e.AlertTag.Enabled:t.enabled=1===n.Int(i);break;case e.AlertTag.TriggerType:t.triggerType=n.Int(i);break;case e.AlertTag.TimeoutMinutes:t.timeoutMinutes=n.Int(i);break;case e.AlertTag.RevisionIndex:t.revisionIndex=n.Int(i);break;case e.AlertTag.Operator:t.addNode(n.Int(i));break;case e.AlertTag.Feed:t.tmpFeed=n.Int(i);break;case e.AlertTag.Ticker:t.currentNode&&t.currentNode.addFeedTicker(t.tmpFeed,n.String(i));break;case e.AlertTag.MarketDataField:t.currentNode&&t.currentNode.addMdField(n.Int(i));break;case e.AlertTag.Int:t.currentNode&&(t.currentNode.double=n.Int(i));break;case e.AlertTag.Double:t.currentNode&&(t.currentNode.double=n.Decimal(i));break;case e.AlertTag.PortfolioDataField:t.currentNode&&t.currentNode.addMdField(n.Int(i));break;case e.AlertTag.List:t.list=n.String(i);break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,n.tag),n.String(i))}},i.prototype.ResponseGetAlerts=function(t){var n=new l;this.alerts.clear();for(var i,r=0,a=t.data;r<a.length;r++){var s=a[r].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var c=new e.Tag;o.Next(s,c,this.tagSet);)switch(e.DEBUG_ALERTS_CS_TAGS&&e.logToConsole(this.tagSet,c,s),c.tag){case e.AlertTag.Id:i=this.alerts.get(c.String(s));break;case e.AlertTag.Separator:n.items.push(i);break;default:this.ProcessAlertItem(i,c,s)}}this.hasAlerts=!0;var d=new e.ResponseHeader;this.callbacks.forEach(function(e){e.ResponseGetAlerts&&e.ResponseGetAlerts(d,n)}),t.callback&&t.callback.ResponseGetAlerts&&t.callback.ResponseGetAlerts(d,n),t.commonFramework&&t.commonFramework.Reply(d,n.ToMws())},i.prototype.ResponseDeleteAlert=function(t){for(var n=0,i=t.data;n<i.length;n++){var r=i[n].buf,a=new e.Parser(0,r.length);a.SkipHeader(r);for(var s=new e.Tag;a.Next(r,s,this.tagSet);)switch(e.DEBUG_ALERTS_CS_TAGS&&e.logToConsole(this.tagSet,s,r),s.tag){case e.AlertTag.Id:case e.AlertTag.RevisionIndex:case e.AlertTag.Feed:case e.AlertTag.Separator:break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,s.tag),s.String(r))}}var o=new e.ResponseHeader;this.callbacks.forEach(function(e){e.ResponseDeleteAlert&&e.ResponseDeleteAlert(o,{})}),t.callback&&t.callback.ResponseDeleteAlert&&t.callback.ResponseDeleteAlert(o,{}),t.commonFramework&&t.commonFramework.Reply(o,{})},i.prototype.ResponseAddAlert=function(t){for(var n=0,i=t.data;n<i.length;n++){var r=i[n].buf,a=new e.Parser(0,r.length);a.SkipHeader(r);for(var s=new e.Tag;a.Next(r,s,this.tagSet);)switch(e.DEBUG_ALERTS_CS_TAGS&&e.logToConsole(this.tagSet,s,r),s.tag){case e.AlertTag.RevisionIndex:case e.AlertTag.Separator:break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,s.tag),s.String(r))}}var o=new e.ResponseHeader;this.callbacks.forEach(function(e){e.ResponseAddAlert&&e.ResponseAddAlert(o,{})}),t.callback&&t.callback.ResponseAddAlert&&t.callback.ResponseAddAlert(o,{}),t.commonFramework&&t.commonFramework.Reply(o,{})},i.prototype.ResponseModifyAlert=function(t){for(var n=0,i=t.data;n<i.length;n++){var r=i[n].buf,a=new e.Parser(0,r.length);a.SkipHeader(r);for(var s=new e.Tag;a.Next(r,s,this.tagSet);)switch(e.DEBUG_ALERTS_CS_TAGS&&e.logToConsole(this.tagSet,s,r),s.tag){case e.AlertTag.RevisionIndex:case e.AlertTag.Separator:break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,s.tag),s.String(r))}}var o=new e.ResponseHeader;this.callbacks.forEach(function(e){e.ResponseModifyAlert&&e.ResponseModifyAlert(o,{})}),t.callback&&t.callback.ResponseModifyAlert&&t.callback.ResponseModifyAlert(o,{}),t.commonFramework&&t.commonFramework.Reply(o,{})},i.prototype.ResponseAddOrDeleteDevice=function(t){for(var n=0,i=t.data;n<i.length;n++){var r=i[n].buf,a=new e.Parser(0,r.length);a.SkipHeader(r);for(var s=new e.Tag;a.Next(r,s,this.tagSet);)switch(e.DEBUG_ALERTS_CS_TAGS&&e.logToConsole(this.tagSet,s,r),s.tag){case e.AlertTag.RevisionIndex:case e.AlertTag.Separator:break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,s.tag),s.String(r))}}var o=new e.ResponseHeader;t.commonFramework&&t.commonFramework.Reply(o,{})},i.prototype.ResponseGetEmailDevice=function(t){for(var n=new c,i=0,r=t.data;i<r.length;i++){var a=r[i].buf,s=new e.Parser(0,a.length);s.SkipHeader(a);for(var o=new e.Tag;s.Next(a,o,this.tagSet);)switch(e.DEBUG_ALERTS_CS_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case e.AlertTag.DeviceId:n.email=o.String(a);break;case e.AlertTag.Enabled:n.enabled=1===o.Int(a);break;case e.AlertTag.Separator:break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.String(a))}}e.DEBUG_ALERTS_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,t.type),n);var l=new e.ResponseHeader;t.commonFramework&&t.commonFramework.Reply(l,n)},i.prototype.StreamingAlert=function(t,n,i){var r,s,o,l=this.tag,c=[];for(e.DEBUG_ALERTS_RT&&e.log("<<<-RT Alert->>>");i.Next(n,l,this.tagSet);)switch(e.DEBUG_ALERTS_RT_TAGS&&e.logToConsole(this.tagSet,l,n),l.tag){case e.AlertTag.LoginId:o=l.Int(n)===this.loginId;break;case e.AlertTag.Id:r=new a(l.String(n));break;case e.AlertTag.ActionType:s=l.Int(n);break;case e.TradingTag.Separator:switch(s){case e.AlertActionType.Added:case e.AlertActionType.Modified:this.alerts.addOrModify(r);break;case e.AlertActionType.Deleted:this.alerts.delete(r)}o&&c.push(r.ToMws(e.AlertUpdateType.Alert)),s=void 0;break;default:this.ProcessAlertItem(r,l,n)}this.callbacks.forEach(function(e){e.StreamingAlertUpdate&&e.StreamingAlertUpdate(t,r)})},i.prototype.StreamingEvent=function(t,n,i){var r,a=this.tag;for(e.DEBUG_ALERTS_RT&&e.log("<<<-RT Event->>>");i.Next(n,a,this.tagSet);)switch(e.DEBUG_ALERTS_RT_TAGS&&e.logToConsole(this.tagSet,a,n),a.tag){case e.AlertTag.LoginId:r=new s(a.Int(n));break;case e.AlertTag.Id:r.id=a.String(n);break;case e.AlertTag.EventId:r.eventId=a.Int(n);break;case e.AlertTag.TriggerDate:r.triggerDate=a.Int(n);break;case e.AlertTag.TriggerTime:r.triggerTime=a.Int(n);break;case e.AlertTag.EventRead:r.eventRead=1===a.Int(n);break;case e.AlertTag.Type:r.type=a.Int(n);break;case e.AlertTag.NotificationMsg:r.notificationMsg=a.String(n);break;case e.AlertTag.Comment:r.addComment(a.String(n));break;case e.AlertTag.Hostname:r.hostName=a.String(n);break;case e.AlertTag.Description:r.description=a.String(n);break;case e.AlertTag.Feed:r.feed=a.Int(n);break;case e.AlertTag.Ticker:r.ticker=a.String(n);break;case e.TradingTag.Separator:break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,a.tag),a.String(n))}this.callbacks.forEach(function(e){e.StreamingAlertEvent&&e.StreamingAlertEvent(t,r)})},i.prototype.StreamingOwc=function(t,n,i){var r=this.tag;for(e.DEBUG_ALERTS_RT&&e.log("<<<-RT OWC->>>");i.Next(n,r,this.tagSet);)switch(e.DEBUG_ALERTS_RT_TAGS&&e.logToConsole(this.tagSet,r,n),r.tag){case e.TradingTag.Separator:break;default:e.DEBUG_ALERTS&&e.log("Unhandled:",e.tagToStr(this.tagSet,r.tag),r.String(n))}},i.prototype.lowLevelData=function(t,n,i){if(t.uniqueId>0){var r=this.requests[t.uniqueId];if(!r)return;if(r.data.push(new e.ResponseItem(i.DuplicateData(n))),t.segment!==e.SegmentInfo.Last)return;switch(delete this.requests[t.uniqueId],r.type){case e.AlertRequest.GetAlerts:return void this.ResponseGetAlerts(r);case e.AlertRequest.DeleteAlert:return void this.ResponseDeleteAlert(r);case e.AlertRequest.AddAlert:return void this.ResponseAddAlert(r);case e.AlertRequest.ModifyAlert:return void this.ResponseModifyAlert(r);case e.AlertRequest.AddDevice:case e.AlertRequest.DeleteDevice:return void this.ResponseAddOrDeleteDevice(r);case e.AlertRequest.GetEmailDevice:return void this.ResponseGetEmailDevice(r)}}for(var a=new e.Tag;i.Next(n,a,this.tagSet);){if(a.tag===e.AlertTag.UpdateType)switch(a.Int(n)){case e.AlertUpdateType.Alert:return void this.StreamingAlert(t,n,i);case e.AlertUpdateType.Event:return void this.StreamingEvent(t,n,i);case e.AlertUpdateType.Owc:return void this.StreamingOwc(t,n,i)}e.DEBUG_ALERTS_RT_TAGS&&e.logToConsole(this.tagSet,a,n),a.tag,e.DEBUG_ALERTS&&e.log("Unhandled streaming:",e.tagToStr(this.tagSet,a.tag),a.String(n))}},i.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId]),e.DEBUG_ALERTS&&e.log(i)},i.prototype.lowLevelConnect=function(e,t){n.prototype.lowLevelConnect.call(this,e,t)},i.prototype.lowLevelDisconnect=function(e,t,i){n.prototype.lowLevelDisconnect.call(this,e,t,i)},i}(e.BaseIDSServer);n.AlertsServer=d}(e.API||(e.API={}))}(IDS||(IDS={})),function(e){var t;(function(t){var n;!function(e){e[e.AccAll=0]="AccAll",e[e.AccOneBroker=1]="AccOneBroker",e[e.AccOneSymbol=2]="AccOneSymbol"}(n=t.Type||(t.Type={}));var i=function(){function e(e){void 0===e&&(e=""),this.type=n.AccAll,this.subscribe=!1,e&&this.applyPeriod(e)}return e.prototype.daysBack=function(e){var t=new Date;return t.setDate(t.getDate()-e),t},e.prototype.firstDayOfWeek=function(){var e=new Date,t=e.getDay(),n=e.getDate()-t+(0==t?-6:1);return new Date(e.setDate(n))},e.prototype.applyPeriod=function(e){switch(e){case"INTRADAY":break;case"TWO_DAYS":this.lastDate=this.daysBack(1),this.firstDate=this.daysBack(1);break;case"THIS_WEEK":this.lastDate=this.daysBack(1),this.firstDate=this.firstDayOfWeek();break;case"ONE_WEEK":this.lastDate=this.daysBack(1),this.firstDate=this.daysBack(7);break;case"THIS_MONTH":this.lastDate=this.daysBack(1),this.firstDate=new Date((new Date).getFullYear(),(new Date).getMonth(),1);break;case"ONE_MONTH":this.lastDate=this.daysBack(1),this.firstDate=this.daysBack(30);break;case"THREE_MONTHS":this.lastDate=this.daysBack(1),this.firstDate=this.daysBack(90);break;case"SIX_MONTHS":this.lastDate=this.daysBack(1),this.firstDate=this.daysBack(180);break;case"ONE_YEAR":this.lastDate=this.daysBack(1),this.firstDate=this.daysBack(365);break;case"YTD":this.lastDate=this.daysBack(1),this.firstDate=new Date((new Date).getFullYear(),0,1)}this.lastDate<this.firstDate&&(this.lastDate=void 0,this.firstDate=void 0)},e}();t.Scope=i;var r=function(){function t(e,t,n){this.unsubscribe=null,this.serverPool=e,this.cb=n,this.ChangeScope(t)}return t.prototype.unbind=function(){this.unsubscribe&&this.unsubscribe(),this.rt&&this.serverPool.Dispose(this.ps,this.rt.serverType,this,"BrokerStats.CalendarServer.unbind"),this.rt=void 0,this.acc=void 0,this.cb=void 0},t.prototype.ChangeScope=function(t){var i=this;this.scope&&this.cb.OnBrokerStatsReset(this.scope);var r=new e.BrokerStatRequest;switch(r.feed=t.feed,t.type){case n.AccAll:r.accumulate=!0;break;case n.AccOneBroker:r.brokers=[],r.brokers.push(t.broker);break;case n.AccOneSymbol:r.symbols=[],r.symbols.push(t.symbol);break;default:return!1}this.acc={},this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.scope=t,this.hasHistoryRequest=null!=t.firstDate||null!=t.lastDate;var a=this.serverPool.login.getPidSid(t.feed,e.ServiceType.Realtime);if(a||(a=this.serverPool.login.getPidSid(t.feed,e.ServiceType.Delayed)),!a)return e.DEBUG_BROKER_STATS&&e.log("%cPidSid not found for feed "+t.feed.toString(),"color: #f60; font-size: 14px;"),!1;this.ps&&this.ps.Index()==a.Index()||(this.ps&&(this.unsubscribe&&this.unsubscribe(),this.rt.unbind(this),this.serverPool.Dispose(this.ps,this.rt.serverType,this,"BrokerStats.CalendarServer.ChangeScope")),this.ps=a,this.rt=this.serverPool.GetRealtime(a,this),this.rt.observe(this)),t.subscribe&&(this.unsubscribe=this.rt.conn.SubscribeFeeds([t.feed]));var s=new e.CommonFrameworkResponse;s.dummy=this,s.Reply=function(n,a){if(s.dummy.Response(a,!0),i.hasHistoryRequest){r.startDate=InfrontUtil.DateToInt(t.firstDate),r.endDate=InfrontUtil.DateToInt(t.lastDate);var o=s.dummy.serverPool.login.GetPidSid(t.feed,e.ServiceType.Historical);if(!o)return!1;var l=s.dummy.serverPool.GetHistory(o,i);if(!l)return!1;var c=new e.CommonFrameworkResponse;c.dummy=s.dummy,c.Reply=function(e,t){c.dummy.Response(t,!1)},l.GetBrokerStats(r,null,c),s.dummy.serverPool.Dispose(o,l.serverType,i,"BrokerStats.CalendarServer.ChangeScope")}},this.rt.GetBrokerStats(r,null,s)},t.prototype.OnRealtimeTrade=function(t,i){switch(this.scope.type){case n.AccOneBroker:var r=this.acc[i.symbol.fs.ticker];if(i.buyer!=this.scope.broker&&i.seller!=this.scope.broker)return;return r||((r=this.acc[i.symbol.fs.ticker]=new e.BrokerStatItem).symbol=i.symbol.fs.ticker,r.dateTime=i.dateTime,r.name=this.scope.broker),i.buyer==this.scope.broker&&i.seller==i.buyer?(r.internal.AddTrade(i,!1),void this.cb.OnBrokerStats(this.scope,r)):(i.buyer==this.scope.broker&&(r.buy.AddTrade(i,!1),i.hitterTaker==e.HitterTaker.HitAsk&&r.aggressiveBuy.AddTrade(i,!1),r.dateTime=i.dateTime,this.cb.OnBrokerStats(this.scope,r)),void(i.seller==this.scope.broker&&(r.sell.AddTrade(i,!1),i.hitterTaker==e.HitterTaker.HitBid&&r.aggressiveSell.AddTrade(i,!1),r.dateTime=i.dateTime,this.cb.OnBrokerStats(this.scope,r))));case n.AccOneSymbol:if(this.scope.feed!=i.symbol.fs.feed||this.scope.symbol!=i.symbol.fs.ticker)return;case n.AccAll:if(i.buyer&&i.seller&&i.buyer==i.seller&&i.buyer.length){var a=this.acc[i.buyer];return a||((a=this.acc[i.buyer]=new e.BrokerStatItem).name=i.buyer),a.internal.AddTrade(i,this.scope.type==n.AccAll),a.dateTime=i.dateTime,void this.cb.OnBrokerStats(this.scope,a)}if(i.buyer&&i.buyer.length){var s=this.acc[i.buyer];s||((s=this.acc[i.buyer]=new e.BrokerStatItem).name=i.buyer),i.hitterTaker==e.HitterTaker.HitAsk&&s.aggressiveBuy.AddTrade(i,this.scope.type==n.AccAll),s.buy.AddTrade(i,this.scope.type==n.AccAll),s.dateTime=i.dateTime,this.cb.OnBrokerStats(this.scope,s)}if(i.seller&&i.seller.length){var o=this.acc[i.seller];o||((o=this.acc[i.buyer]=new e.BrokerStatItem).name=i.buyer),o.sell.AddTrade(i,this.scope.type==n.AccAll),i.hitterTaker==e.HitterTaker.HitBid&&o.aggressiveSell.AddTrade(i,this.scope.type==n.AccAll),o.dateTime=i.dateTime,this.cb.OnBrokerStats(this.scope,o)}}},t.prototype.OnRealtimeResetFeed=function(e,t){e==this.scope.feed&&this.ChangeScope(this.scope)},t.prototype.ResponseError=function(t){e.DEBUG_BROKER_STATS&&e.log("BrokerStat: "+t.errorMsg)},t.prototype.calcTotals=function(e){for(var t=0,n=0,i=0,r=e;i<r.length;i++)(o=r[i]).toMws(),t+=o.total_value,n+=o.trades;for(var a=0,s=e;a<s.length;a++){var o=s[a];t>0&&(o.total_value_pct=o.total_value/t*100),n>0&&(o.trades_pct=o.trades/n*100)}},t.prototype.Response=function(e,t){var i=[];switch(this.scope.type){case n.AccAll:case n.AccOneSymbol:if(e.b)for(var r in e.b)if(0!=(o=e.b[r]).length){var a=this.acc[r];t||!a?a=this.acc[r]=o[0]:a.Add(o[0]),i.push(a)}break;case n.AccOneBroker:if(e.s)for(var s in e.s){var o;0!=(o=e.s[s]).length&&(a=this.acc[s],t||!a?a=this.acc[s]=o[0]:a.Add(o[0]),i.push(a))}}t&&this.hasHistoryRequest||(this.calcTotals(i),this.cb.OnBrokerStatsMulti(this.scope,i)),this.rt&&!this.scope.subscribe&&this.serverPool.Dispose(this.ps,this.rt.serverType,this,"BrokerStats.CalendarServer.Response")},t}();t.BrokerStatsManager=r})((t=e.API||(e.API={})).BrokerStats||(t.BrokerStats={}))}(IDS||(IDS={})),function(e){var t,n=Infront.PidSid,i=Infront.Instrument;(function(t){var r=function(){};t.Scope=r;var a=function(){function t(e,t,n){this.pidSids=[],this.cals=[],this.serverPool=e,this.cb=n,this.ChangeScope(t)}return t.prototype.unbind=function(){for(var t=0,n=this.pidSids;t<n.length;t++){var i=n[t];this.serverPool.Dispose(i,e.ServerType.Calendar,this)}this.cals=[]},t.prototype.ChangeScope=function(t){if(this.cb){this.cb.OnCalendarReset();for(var r=0,a=this.cals;r<a.length;r++)(_=a[r]).conn.UnsubscribeFeeds(this.serverPool.login.getAccessFeeds(_.ps));for(var s=0,o=this.pidSids;s<o.length;s++){var l=o[s];this.serverPool.Dispose(l,e.ServerType.Calendar,this)}this.cals=[],this.scope=t;var c=new e.EventsRequest;if(c.countries=t.countries,c.instruments=t.instrument,t.feeds)for(var d=0,u=t.feeds;d<u.length;d++){var h=u[d];c.instruments.push(new i(h,null))}c.dateFrom=t.dateFrom,c.dateTo=t.dateTo;for(var p=[],m=0,g=c.instruments;m<g.length;m++){var f=g[m];-1==p.indexOf(f.feed)&&p.push(f.feed)}for(var v=0,y=p;v<y.length;v++){h=y[v],l=this.serverPool.login.getPidSid(h,e.ServiceType.Calendar);for(var b=!1,T=0,S=this.pidSids;T<S.length;T++)S[T].Index()==l.Index()&&(b=!0);b||this.pidSids.push(l)}for(var C=0,I=this.pidSids;C<I.length;C++){var _;l=I[C],(_=this.serverPool.GetCalendar(l,this))&&(c.sources=this.serverPool.login.getAccessFeeds(l),_.GetEvents(c,this,null),this.cals.push(_))}this.serverPool.GetCalendar(new n,this)}},t.prototype.ResponseCalendarEvents=function(e,t){this.cb.OnCalendarEventMulti(t.events)},t.prototype.ResponseError=function(e){},t}();t.CalendarManager=a})((t=e.API||(e.API={})).Calendar||(t.Calendar={}))}(IDS||(IDS={})),function(e){var t,n=Infront.Instrument;(function(t){var i=function(){function t(e){this.symbols=[],this.useThrottling=!0,this.blockSize=100,this.serverPool=e}return t.prototype.GetPerformanceResp=function(t){var n=new e.CommonFrameworkResponse;return n.dummy=this.serverPool.symbolDb,n.Reply=function(i,r){if(t&&t.Reply(i,r),i.type==e.ResponseEnum.Ok)for(var a=0,s=r.items;a<s.length;a++){var o=s[a],l=n.dummy.GetSymbols(o.feed,o.symbol);if(l)for(var c=0,d=l;c<d.length;c++){var u=d[c];for(var h in o.tags){var p=o.tags[h];switch(Number(h)){case e.RealtimeDateTime.LAST_TRADE_DATE:var m=u.getValue(e.MwsRealtimeTags.LastTradeDate,!0),g=InfrontUtil.DateFromDateNu(p);g>m.get()&&m.set(g),g>(m=u.getValue(Number(h),!0)).get()&&m.set(g);break;case e.RealtimeTags.Separator:break;default:u.getValue(Number(h),!0).set(p)}}u.CacheUpdated()}}},n},t.prototype.GetCalculatedHistoryResp=function(t){var n=new e.CommonFrameworkResponse;return n.dummy=this.serverPool.symbolDb,n.Reply=function(e,t){for(var i=0,r=t.items;i<r.length;i++){var a=r[i],s=n.dummy.GetSymbols(a.feed,a.symbol);if(s)for(var o=0,l=s;o<l.length;o++){var c=l[o];for(var d in a.tags){var u=a.tags[d];c.getValue(Number(d),!0).set(u)}c.CacheUpdated()}}},n},t.prototype.GetFeed=function(t,n){var i=this.serverPool.login.getPidSid(t,e.ServiceType.Historical);if(i){var r=this.GetPerformanceResp(n),a=this.serverPool.GetHistory(i,this,"HistPerformance  - feed: "+t.toString());a.GetPerformance(t,null,null,r),this.serverPool.Dispose(i,a.serverType,this)}else n&&n.Reply(new e.ResponseHeader(e.ResponseEnum.Error,"Could not find historical server for this data"),null)},t.prototype.ThrottleSymbolRequest=function(){var t,n=this,i={},r=null;for(var a in this.symbols.forEach(function(a){a.feed!=t&&(r=n.serverPool.login.getPidSid(a.feed,e.ServiceType.Historical),t=a.feed),r&&(i[r.Index()]||(i[r.Index()]=[]),i[r.Index()].push(a))}),i){var s=i[a];if(0!=s.length){r=Infront.DecodePidSidIndex(Number(a));var o=this.GetPerformanceResp(null),l=this.serverPool.GetHistory(r,this,"HistPerformance"),c=this.GetCalculatedHistoryResp(null);l.GetSymbolPerformance(s,null,o),l.GetCalculatedHistory(s,null,c,e.RealtimeCalculatedHistoryTags.AvgTrueRange,[30]),l.GetCalculatedHistory(s,null,c,e.RealtimeCalculatedHistoryTags.AverageDailyVolume,[30]),this.serverPool.Dispose(r,l.serverType,this,"HistPerformance")}}this.symbols=[]},t.prototype.GetSymbol=function(t,i,r){var a=this;if(this.useThrottling&&null==r)this.symbols.push(new n(t,i)),this.symbols.length>=this.blockSize?(this.timerToken=null,this.ThrottleSymbolRequest()):this.timerToken||(this.timerToken=setTimeout(function(){a.timerToken=null,a.ThrottleSymbolRequest()},50));else{var s=this.serverPool.login.getPidSid(t,e.ServiceType.Historical);if(s){var o=this.serverPool.GetHistory(s,this,"GetSymbol"),l=this.GetPerformanceResp(r);o.GetPerformance(t,i,null,l),this.serverPool.Dispose(s,o.serverType,this,"GetSymbol")}else r&&r.Reply(new e.ResponseHeader(e.ResponseEnum.Error,"Could not find historical server for this data"),null)}},t}();t.HistPerformanceManager=i})((t=e.API||(e.API={})).HistPerformance||(t.HistPerformance={}))}(IDS||(IDS={})),function(e){!function(t){var n=function(){};t.Json=n;var i=function(t){function i(n,i){var r=t.call(this,i,n,e.ServerType.Morningstar)||this;return r.requests={},r.conn=new e.ServerConnection(n,i.secure,r,r.serverPool.login.getAccessFeeds(n),r.serverPool.login.getHosts(n),r.tagSet,i,r.serverType),r}return __extends(i,t),i.prototype.GetJson=function(t,n,i,r,a,s){var o=this.conn.GetRequest(e.RealtimeRequests.FundJsonData,0),l=this.requests[o.uniqueId]=new e.Request;l.type=e.RealtimeRequests.FundJsonData,l.commonFramework=s,o.Add(e.RealtimeTags.Feed,t),o.Add(e.RealtimeTags.Symbol,n),o.Add(e.RealtimeTags.ISIN,i),o.Add(e.RealtimeTags.Currency,r),o.Add(e.RealtimeTags.Language,a),this.conn.Send(o,!0)},i.prototype.GetPidSid=function(t,n){void 0===n&&(n=0);var i=this.serverPool.login.getPidSid(t,e.ServiceType.Realtime,n);return i||(i=this.serverPool.login.getPidSid(t,e.ServiceType.Delayed,n)),i},i.prototype.GetRealtime=function(e){var t=null,n=this.GetPidSid(e);return n&&(t=this.serverPool.GetRealtime(n,this)),t},i.prototype.SetSymbolValue=function(t,n,i,r){var a=this.GetRealtime(t);if(a){for(var s=a.getDbSymbol(t,n,!0),o=e.FromMws.Tags(i),l=0,c=o.normalTags;l<c.length;l++){var d=c[l];s.getValue(d,!0).set(r)}for(var u=0,h=o.computedTags;u<h.length;u++)d=h[u],s.getComputedValue(d,!0).set(r)}},i.prototype.setJsonSymbolValue=function(e,t,n,i,r){if(void 0===r&&(r=""),null==i||InfrontUtil.isPrimitive(i)||InfrontUtil.isArray(i))this.SetSymbolValue(e,t,[n],i);else if(InfrontUtil.isObject(i))for(var a in i)if(i.hasOwnProperty(a)){var s=r.length>0?r+"/"+a:a;this.setJsonSymbolValue(e,t,a,i[a],s)}},i.prototype.SaveToCache=function(e){if(e.hasOwnProperty("blob")){var t=JSON.parse(e.blob);for(var n in t)t.hasOwnProperty(n)&&this.setJsonSymbolValue(e.feed,e.symbol,n,t[n],n)}},i.prototype.ResponseFundsJsonData=function(t,i){for(var r=new n,a=0;a<i.data.length;a++){var s=i.data[a].buf,o=new e.Parser(0,s.length);o.SkipHeader(s);for(var l=new e.Tag;o.Next(s,l,this.tagSet);)switch(l.tag){case e.RealtimeTags.Feed:r.feed=l.Int(s);break;case e.RealtimeTags.Symbol:r.symbol=l.String(s);break;case e.RealtimeTags.ISIN:r.isin=l.String(s);break;case e.RealtimeTags.Currency:r.currency=l.String(s);break;case e.RealtimeTags.SimplifiedJson:r.blob||(r.blob=""),r.blob+=l.String(s)}}i.commonFramework||i.callback||this.SaveToCache(r),i.callback&&i.callback.ResponseHistNewsStory&&i.callback.ResponseHistNewsStory(new e.ResponseHeader,r),i.commonFramework&&i.commonFramework.Reply(new e.ResponseHeader,r)},i.prototype.lowLevelData=function(t,n,i){var r=this.requests[t.uniqueId];if(r){if(r.responseNu++,r.data.push(new e.ResponseItem(i.DuplicateData(n),!1)),t.segment==e.SegmentInfo.Last){switch(r.type){case e.RealtimeRequests.FundJsonData:this.ResponseFundsJsonData(t,r)}delete this.requests[t.uniqueId]}}else e.log("Morningstar - could not find request")},i.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId]),e.log(i)},i.prototype.lowLevelConnect=function(e,t){this.publishEvent(new Infront.LowLevelConnectEvent(e,this.serverType))},i.prototype.lowLevelDisconnect=function(e,n,i){t.prototype.lowLevelDisconnect.call(this,e,n,i)},i}(e.BaseIDSServer);t.MorningstarServer=i}(e.API||(e.API={}))}(IDS||(IDS={})),function(e){var t,n,i=Infront.Instrument,r=Infront.FeedProperty,a=Infront.ValueChange;t=e.API||(e.API={}),n=function(){function n(e){this.realtime={},this.lastFeed=-1,this.lastFeedProperty=0,this.serverPool=e,this.histPerf=new t.HistPerformance.HistPerformanceManager(e)}return n.prototype.getServerPool=function(){return this.serverPool},n.prototype.GetPidSid=function(t,n){void 0===n&&(n=0);var i=this.serverPool.login.getPidSid(t,e.ServiceType.Realtime,n);return i||(i=this.serverPool.login.getPidSid(t,e.ServiceType.Delayed,n)),i},n.prototype.getRealtime=function(t,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=0),void 0===r&&(r="");var a,s=null;return(a=t===this.lastFeed&&i===this.lastFeedProperty?this.lastPidSid:this.GetPidSid(t,i))&&((s=this.realtime[a.Index()])||(s=this.realtime[a.Index()]=this.serverPool.GetRealtime(a,this,n,r))),this.lastFeed=t,this.lastFeedProperty=i,this.lastPidSid=a,!s&&e.DEBUG_NO_ACCESS_TO_FEED&&r&&e.log("Feed:",t,"no access. Id:",r),s},n.prototype.GetRealtimeFromPidSid=function(e,t,n){var i;return void 0===t&&(t=!1),void 0===n&&(n=""),e&&((i=this.realtime[e.Index()])||(i=this.realtime[e.Index()]=this.serverPool.GetRealtime(e,this,t,n))),i},n.prototype.GetPidSidList=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];if(!t[r]){var a=this.getRealtime(r);a&&(t[r]=a)}}return t},n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n.prototype.MWSCreateComputedField=function(t,i,r,a,s){var o=this.getRealtime(t);if(o){var l=o.getDbSymbol(t,i,!0).getComputedValue(r,!0);if(l.NoReferences()){for(var c=[],d=0,u=a;d<u.length;d++){var h=u[d],p=e.FromMws.SplitInstrumentKey(h.cacheKey);if(p){var m=n.isArray(h.fieldSpec)?h.fieldSpec:[h.fieldSpec];if(o=this.getRealtime(p.feed)){for(var g=o.getDbSymbol(p.feed,p.ticker,!0),f=e.FromMws.Tags(m),v=0,y=f.normalTags;v<y.length;v++){var b=y[v];c.push(g.getValue(b,!0))}for(var T=0,S=f.computedTags;T<S.length;T++)b=S[T],c.push(g.getComputedValue(b,!0))}}}l.UpdateReferences(c,s)}}},n.prototype.CreateSymbolComputedField=function(e,t,n,i,r){var a=this.getRealtime(e);if(a){var s=a.getDbSymbol(e,t,!0),o=s.getComputedValue(n,!0);if(o.NoReferences()){for(var l=[],c=0,d=i;c<d.length;c++){var u=d[c];"string"!=typeof u?l.push(s.getValue(u,!0)):l.push(s.getComputedValue(u,!0))}o.UpdateReferences(l,r)}}},n.prototype.MWSCustomBind=function(t,i,r,s){var o=e.FromMws.Tags(n.isArray(r)?r:[r]);if(0==o.normalTags.length&&0==o.computedTags.length)return function(){};var l=this.getRealtime(t);if(!l)return function(){};var c=l.getDbSymbol(t,i,!0);if(!c.hasContent(e.SymbolContentEnum.HistPerformance))for(var d=0,u=n.isArray(r)?r:[r];d<u.length;d++){var h=u[d];if(e.FromMws.HistPerformanceTag(h)){c.hasContent(e.SymbolContentEnum.HistPerformance)||(c.content|=e.SymbolContentEnum.HistPerformance,this.histPerf.GetSymbol(t,i,null));break}}for(var p,m=[],g=0,f=o.computedTags;g<f.length;g++)if("HIST_PERFORMANCE"!=(T=f[g]).toUpperCase()){var v=e.FromMws.ComputedPerformanceTag(T);v?(p=c.getComputedValue(T,!1))||(p=c.setComputedValue(T,new a(c.getValue(v.today,!0),c.getValue(v.yest,!0),v.percent))):p=c.getComputedValue(T,!0),m.push(p),p.observe(s)}for(var y=0,b=o.normalTags;y<b.length;y++){var T=b[y];p=c.getValue(T,!0),m.push(p),p.observe(s,Infront.InitialUpdate.Synchronous)}return function(){for(var e=0,t=m;e<t.length;e++)t[e].unbind(s)}},n.prototype.SymbolCustomBind=function(t,n,i,r,s){void 0===s&&(s=!1);var o=function(){},l=this.getRealtime(t);if(!l)return o;var c,d=l.getDbSymbol(t,n,!0);if("string"==typeof i){var u=e.FromMws.ComputedPerformanceTag(i);u?(this.getHistPerformance(d),(c=d.getComputedValue(i,!1))||(c=d.setComputedValue(i,new a(d.getValue(u.today,!0),d.getValue(u.yest,!0),u.percent)))):c=d.getComputedValue(i,!0),c.observe(r)}else i in e.PerformanceTags&&this.getHistPerformance(d),(c=d.getValue(i,!0)).observe(r,Infront.InitialUpdate.Synchronous),s&&e.log(d.fs.toString(),e.tagToStr(e.TagSet.Realtime,i),"observe. Bindings:",c.count());return function(){c.unbind(r),s&&e.log(d.fs.toString(),"unbind. Bindings:",c.count())}},n.prototype.getHistPerformance=function(t){t.hasContent(e.SymbolContentEnum.HistPerformance)||(t.content|=e.SymbolContentEnum.HistPerformance,this.histPerf.GetSymbol(t.fs.feed,t.fs.ticker,null))},n.prototype.getSymbol=function(e,t,n){void 0===n&&(n=!0);var i=null,r=this.getRealtime(e);return r&&(i=r.getDbSymbol(e,t,n)),i},n.prototype.getSymbolValue=function(t,n,i){var r=this.getRealtime(t);if(r){for(var a=r.getDbSymbol(t,n,!0),s=e.FromMws.Tags(i),o=void 0,l=0,c=s.normalTags;l<c.length;l++){var d=c[l];if(o=a.getValue(d,!1))return o.get()}for(var u=0,h=s.computedTags;u<h.length;u++)if(d=h[u],o=a.getComputedValue(d,!1))return o.get()}return null},n.prototype.setSymbolValue=function(t,n,i,r){var a=this.getRealtime(t);if(a){for(var s=a.getDbSymbol(t,n,!0),o=e.FromMws.Tags(i),l=0,c=o.normalTags;l<c.length;l++){var d=c[l];s.getValue(d,!0).set(r)}for(var u=0,h=o.computedTags;u<h.length;u++)d=h[u],s.getComputedValue(d,!0).set(r)}},n.prototype.SetCustomSymbolValue=function(e,t,n,i){var r=this.getRealtime(e);r&&r.getDbSymbol(e,t,!0).getComputedValue(n,!0).set(i)},n.prototype.MWSRegisterObserver=function(e,t,n){var i=this.getRealtime(e);i&&i.getDbSymbol(e,t,!0).MWSRegisterGeneric(n)},n.prototype.MWSUnregisterObserver=function(e,t,n){var i=this.getRealtime(e);if(i){var r=i.getDbSymbol(e,t,!1);r&&r.MWSUnregisterGeneric(n)}},n.prototype.MWSRegisterTradesObserver=function(e,t,n,i){var r=this.getRealtime(e);if(r){var a=r.getDbSymbol(e,t,!0);a.tradesCacheCallback||(a.tradesCacheCallback=n),i&&a.registerTradesCallback(i)}},n.prototype.MWSUnregisterTradesObserver=function(e,t,n){var i=this.getRealtime(e);if(i){var r=i.getDbSymbol(e,t,!1);r&&r.unregisterTradesCallback(n)}},n.prototype.MWSOrderbook=function(e,t,n){var i=null,r=this.getRealtime(e);if(r){var a=r.getDbSymbol(e,t,!0);a.registerOrderbookCallback(n),i=function(){a.unregisterOrderbookCallback(n)}}return i},n.prototype.GetTimeSeries=function(e,t,n){var i=this.getRealtime(e.instrument.feed,!1,r.Trades,"GetTimeSeries");return!!i&&(i.GetTimeSeries(e,t,n),!0)},n.prototype.GetRanking=function(t,n,i,r,a){var s=function(){},o=this.getRealtime(t);if(o)o.GetRanking(t,n,i,r),r&&(a&&o.observe(a),s=function(){o.UnsubRanking(t,n),a&&o.unbind(a)});else{var l="Could not find ranking server for feed: "+t.toString();i&&i.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,l))}return s},n.prototype.GetBrokerStats=function(e,t,n){var i=this.getRealtime(e.feed,!1,0,"GetBrokerStats");return!!i&&(i.GetBrokerStats(e,t,n),!0)},n.prototype.GetHeadlines=function(t,n,i){var r=this.getRealtime(t[0],!0,0,"GetHeadlines");if(!r)return!1;var a=new e.Realtime.HeadlineRequestParams;return a.feeds=t,r.GetHeadlines(a,n,null!==i),i&&r.observe(i),!0},n.prototype.GetTickSize=function(t,n){for(var i=[],r=0,a=t.items;r<a.length;r++){var s=a[r];i.push(s.feed)}var o=this.GetPidSidList(i);for(var l in o){var c=o[Number(l)];if(c){for(var d=Number(l),u=new e.Realtime.TickSizeRequest,h=0,p=t.items;h<p.length;h++)(s=p[h]).feed==d&&u.items.push(s);c.GetTickSize(u,n)}}return!0},n.prototype.GetFeedSymbols=function(t,n){var i=null,r=this.getRealtime(t);if(r){var a=r.GetDbFeed(t,!0);if(a){a.mwsRefData.AddCallback(n),i=function(){r.bypassStaticCache=!1,a.mwsRefData.RemoveCallback(n)},r.bypassStaticCache=!0;var s=r.GetFeeds([t],new e.SymbolContent(e.SymbolContentEnum.Basic),!1);s.feeds[t]&&(s.feeds[t].bypassStaticCache=r.bypassStaticCache,n(s.feeds[t].syms))}}else e.DEBUG_NO_ACCESS_TO_FEED&&e.log("Feeds:",t,"no access. Id: GetFeedSymbols");return i},n.prototype.GetFeeds=function(e,t,n){var i=this;void 0===n&&(n=!0);var r,a={};e.forEach(function(e){(r=i.GetPidSid(e))&&(a[r.Index()]||(a[r.Index()]=[]),a[r.Index()].push(e))});var s=[];for(var o in a){var l=a[o];if(0!=l.length){var c=this.getRealtime(l[0]);s.push(c.GetFeeds(l,t,n))}}return function(){for(var e=0;e<s.length;e++)s[e]()}},n.prototype.GetSymbols=function(t,n,r,a){var s=this;void 0===r&&(r=!0),void 0===a&&(a=!1);var o,l,c={},d=[];for(var u in t.forEach(function(e){i.isValid(e)&&(e.feed!=o&&(l=s.GetPidSid(e.feed),o=e.feed),l?(c[l.Index()]||(c[l.Index()]=[]),c[l.Index()].push(e)):d.push(e))}),c){var h=c[u];if(0!=h.length){var p=this.getRealtime(h[0].feed);p&&p.GetSymbols(h,n,r,a)}}e.DEBUG_NO_ACCESS_TO_FEED&&d.length>0&&e.log("Symbols:",d,"no access. Id: GetSymbols")},n.prototype.UnsubscribeSymbols=function(e,t){var n,i,r=this,a={};for(var s in e.forEach(function(e){e.feed!=n&&(i=r.GetPidSid(e.feed),n=e.feed),i&&(a[i.Index()]||(a[i.Index()]=[]),a[i.Index()].push(e))}),a){var o=a[s];if(0!=o.length){var l=this.getRealtime(o[0].feed);l&&l.UnsubscribeSymbols(o,t)}}},n}(),t.StreamingManager=n}(IDS||(IDS={})),function(e){var t,n=Infront.Instrument,i=Infront.FeedProperty;(function(t){var r=function(){};t.Scope=r;var a=function(){function t(e){this.privateUnbind=null,this.serverPool=e}return t.prototype.unbind=function(){this.privateUnbind&&this.privateUnbind(),this.privateUnbind=null,this.scope=void 0},t.prototype.ChangeScope=function(t){var r=this;if(!t||t.instrument.feed!=this.scope.instrument.feed||t.instrument.ticker!=this.scope.instrument.ticker){if(this.privateUnbind&&this.privateUnbind(),this.privateUnbind=null,this.rtPs=this.serverPool.login.getPidSid(t.instrument.feed,e.ServiceType.Realtime),this.rtPs||this.serverPool.login.getPidSid(t.instrument.feed,e.ServiceType.Delayed),!this.rtPs)return!1;var a=this.serverPool.login.getPidSidFeeds(this.rtPs,t.instrument.feed,i.Trades);if(!a||0==a.length)return!1;if(this.instrument=new n(a[0],t.instrument.ticker),this.rt=this.serverPool.GetRealtime(this.rtPs,this),!this.rt)return!1;var s=function(){return r.rt.conn.UnsubscribeSymbols([r.instrument])};if(!s)return this.serverPool.Dispose(this.rtPs,this.rt.serverType,this),s(),!1;this.privateUnbind=function(){r.serverPool.Dispose(r.rtPs,r.rt.serverType,r),s()}}var o=new e.Realtime.TimeSeriesRequest;o.instrument=this.instrument,o.startDate=t.start,o.endDate=t.end,this.rt.GetTimeSeries(o,this)},t.prototype.ResponseTimeSeries=function(e,t){},t.prototype.ResponseError=function(e){},t}();t.TradesManager=a})((t=e.API||(e.API={})).Trades||(t.Trades={}))}(IDS||(IDS={})),function(e){var t=Infront.Instrument,n=Infront.FeedProperty;!function(i){function r(e){switch(e){case a.None:return"None";case a.Unknown:return"Unknown";case a.News:return"News";case a.EquityCalendar:return"EquityCalendar";case a.MacroCalendar:return"MacroCalendar";case a.MotionDetection:return"MotionDetection";case a.Alert:return"Alert"}}var a;!function(e){e[e.None=0]="None",e[e.Unknown=1]="Unknown",e[e.News=2]="News",e[e.EquityCalendar=3]="EquityCalendar",e[e.MacroCalendar=4]="MacroCalendar",e[e.MotionDetection=5]="MotionDetection",e[e.Alert=6]="Alert"}(a=i.WireEventType||(i.WireEventType={})),i.wireEventTypeToStr=r;var s=function(){};i.WireRequestOptions=s;var o=function(){this.isSnapshot=!1};i.WireMetaData=o;var l=function(){this.newsTags=[]};i.WireCaption=l;var c=function(){function e(e,t,n){e&&t&&(this.feed=e,this.ticker=t,this.symbolScore=n||100)}return e.prototype.toStr=function(){return this.feed+":"+this.ticker},e}();i.WireSymbol=c;var d=function(){function e(){}return e.prototype.assign=function(e){this.feed=e.feed,this.sourceId=e.sourceId,this.newsId=e.newsId,this.headline=e.headline,this.newsType=e.newsType,this.dateTime=e.dateTime,this.score=e.score,this.timeStr=e.timeStr},e}();i.WireFlashItem=d;var u=function(){function e(){this.calendarExpected="",this.calendarPrevious="",this.calendarActual="",this.calendarTimeStr=""}return e.prototype.assign=function(e){this.calendarDescription=e.calendarDescription,this.calendarSubject=e.calendarSubject,this.calendarType=e.calendarType,this.calendarFlag=e.calendarFlag,this.calendarSource=e.calendarSource,this.dateTime=e.dateTime,this.hasTime=e.hasTime,this.calendarExternalId=e.calendarExternalId,this.calendarExpected=e.calendarExpected,this.calendarPrevious=e.calendarPrevious,this.calendarActual=e.calendarActual,this.calendarNumberUnit=e.calendarNumberUnit,this.calendarTimeStr=e.calendarTimeStr},e}();i.WireCalendarItem=u;var h=function(){this.motionDetectionValue=0,this.motionDetectionSubValue=0};i.WireMotionDetectionItem=h;var p=function(){function e(){}return e.prototype.eventId=function(){return this.metaData&&this.metaData.eventId?this.metaData.eventId:null},e.prototype.cardKey=function(){return this.eventId()},e.prototype.getEventType=function(){return r(this.eventType)},e.prototype.getCaption=function(){return r(this.eventType)},e.prototype.getFirstSymbol=function(){return null},e.prototype.getFlashItems=function(){return[]},e}();i.WireEvent=p;var m=function(e){function t(){var t=e.call(this)||this;return t.symbolInfo=[],t.flashItems=[],t.eventType=a.News,t}return __extends(t,e),t.prototype.getCaption=function(){return this.header?this.header.caption:null},t.prototype.getFirstSymbol=function(){return this.symbolInfo.length>0?this.symbolInfo[0]:null},t.prototype.getFlashItems=function(){return this.flashItems},t}(p);i.WireNewsEvent=m;var g=function(e){function t(){var t=e.call(this)||this;return t.symbolInfo=[],t.eventType=a.EquityCalendar,t}return __extends(t,e),t.prototype.getCaption=function(){return"WireEquityCalendarEvent"},t.prototype.cardKey=function(){var e=null;return this.metaData&&(e=this.metaData.isSnapshot?"equity-calendar-events":this.eventId()),e},t.prototype.getFirstSymbol=function(){return this.symbolInfo.length>0?this.symbolInfo[0]:null},t}(p);i.WireEquityCalendarEvent=g;var f=function(e){function t(){var t=e.call(this)||this;return t.symbolInfo=[],t.eventType=a.MacroCalendar,t}return __extends(t,e),t.prototype.getCaption=function(){return"WireMacroCalendarEvent"},t.prototype.cardKey=function(){var e=null;return this.metaData&&(e=this.metaData.isSnapshot?"macro-calendar-events":this.eventId()),e},t.prototype.getFirstSymbol=function(){return this.symbolInfo.length>0?this.symbolInfo[0]:null},t}(p);i.WireMacroCalendarEvent=f;var v=function(e){function t(){var t=e.call(this)||this;return t.eventType=a.MotionDetection,t}return __extends(t,e),t.prototype.getCaption=function(){return this.header?this.header.caption:null},t}(p);i.WireMotionDetectionEvent=v;var y=function(t){function n(n){var i=t.call(this)||this;return i.eventType=e.Wire.WireEventType.Alert,i.metaData=new o,i.metaData.eventId=n.id,i.metaData.eventScore=100,i.metaData.dateTime=n.getTriggerTime(),i.caption=n.description,i.symbolInfo=new c(n.feed,n.ticker),i}return __extends(n,t),n.prototype.getCaption=function(){return this.caption},n}(p);i.WireAlertEvent=y;var b=function(){function t(){this.hasTime=!1}return t.prototype.storeToObject=function(e){for(var t in this.score&&(this.score=100*this.score),this.eventScore&&(this.eventScore=100*this.eventScore),this)if(this.hasOwnProperty(t)){var n=Object.getOwnPropertyDescriptor(this,t);!n||n.writable&&n.configurable&&n.enumerable&&!n.get&&!n.set?e[t]=this[t]:Object.defineProperty(e,t,n)}return e},t.prototype.setDate=function(e){this.dateTime||(this.dateTime=new Date(0)),InfrontUtil.DateNuToDate(e,this.dateTime)},t.prototype.setTime=function(e){this.dateTime||(this.dateTime=new Date(0)),InfrontUtil.TimeNuToDate(e,this.dateTime,0),this.hasTime=!0},t.prototype.addFeed=function(e){this.feeds||(this.feeds=[]),this.feed=e,this.feeds.push(e)},t.prototype.addNewsTag=function(e){this.newsTags||(this.newsTags=[]),this.newsTags.push(e)},t.prototype.getMetaData=function(t){delete this.feed,e.DEBUG_WIRE_BLOCKS&&e.log("WireMetaData",this.eventType);var n=this.storeToObject(new o);return n.isSnapshot=t,n},t.prototype.getHeader=function(){return e.DEBUG_WIRE_BLOCKS&&e.log("WireCaption",this.caption),delete this.feeds,this.storeToObject(new l)},t.prototype.getSymbol=function(){return e.DEBUG_WIRE_BLOCKS&&e.log("WireSymbol",this.feed+":"+this.ticker),delete this.feeds,this.storeToObject(new c)},t.prototype.getFlashItem=function(){return e.DEBUG_WIRE_BLOCKS&&e.log("WireFlashItem",this.headline),delete this.feeds,this.storeToObject(new d)},t.prototype.getCalendarItem=function(){e.DEBUG_WIRE_BLOCKS&&e.log("WireCalendarItem",this.calendarDescription);var t=this.storeToObject(new u);return t.hasTime&&(t.calendarTimeStr=InfrontUtil.getPlainTimestring(t.dateTime,!1)),t},t.prototype.getMotionDetectionItem=function(){return e.DEBUG_WIRE_BLOCKS&&e.log("WireMotionDetectionItem",this.motionDetectionValue),this.storeToObject(new h)},t}(),T=function(){function t(){this.streamingEvents=[],this.equityCalendarEvents=[],this.macroCalendarEvents=[]}return t.prototype.addEvent=function(t){switch(t.eventType){case a.News:t.newsEvent&&t.newsEvent.metaData&&(this.streamingEvents.push(t.newsEvent),t.newsEvent=new m);break;case a.EquityCalendar:t.equityCalendarEvent&&t.equityCalendarEvent.metaData&&(this.equityCalendarEvents.push(t.equityCalendarEvent),t.equityCalendarEvent=new g);break;case a.MacroCalendar:t.macroCalendarEvent&&t.macroCalendarEvent.metaData&&(this.macroCalendarEvents.push(t.macroCalendarEvent),t.macroCalendarEvent=new f);break;case a.MotionDetection:t.motionDetectionEvent&&(this.streamingEvents.push(t.motionDetectionEvent),t.motionDetectionEvent=new v);break;case a.Unknown:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled event:",t)}e.DEBUG_WIRE_BLOCKS&&t.eventType!=a.None&&e.log("<--------------\x3e")},t.prototype.finalize=function(){this.equityCalendarEvents.sort(function(e,t){var n=e.calendarItem.dateTime,i=t.calendarItem.dateTime;return n<i?-1:n>i?1:0}),this.macroCalendarEvents.sort(function(e,t){var n=e.calendarItem.dateTime,i=t.calendarItem.dateTime;return n<i?-1:n>i?1:0})},t}();i.WireDataResponse=T;var S=function(){this.newsEvent=new m,this.equityCalendarEvent=new g,this.macroCalendarEvent=new f,this.motionDetectionEvent=new v,this.eventType=a.None};i.WireEventData=S;var C=function(i){function r(t,n){var r=i.call(this,n,t,e.ServerType.Wire)||this;return r.requests={},r.subscriptionSequence=0,r.callbacks={},r.subscriptions={},r.hasActiveSubscription=!1,r.conn=new e.ServerConnection(t,n.secure,r,r.serverPool.login.getAccessFeeds(t),r.serverPool.login.getHosts(t),r.tagSet,n,r.serverType),r}return __extends(r,i),r.prototype.GetSubscriptionId=function(){return++this.subscriptionSequence,this.loginServer.loginInfo.loginId+":"+this.subscriptionSequence},r.prototype.GetWire=function(i,r,a){var s=this;void 0===a&&(a=!0);var o,l=function(){},c=[e.ServiceType.Realtime,e.ServiceType.Calendar],d=(n.SubscribeSymbols,n.Orderbook,n.Trades,1),u=this.conn.GetRequest(e.WireRequest.GetSnapshot,0),h=new e.Request;this.requests[u.uniqueId]=h,h.type=e.WireRequest.GetSnapshot,h.callback=r;var p=function(){u.pos>7e3&&(u.buf[o]=1==d?e.WireMultiPacket.Begin:e.WireMultiPacket.Middle,d++,s.conn.Send(u,!0),u=s.conn.GetRequest(e.WireRequest.GetSnapshot,0),s.requests[u.uniqueId]=h,u.AddInt(e.WireTag.MultiPacket,e.WireMultiPacket.BeginAndEnd),o=u.pos-1)};if(u.AddInt(e.WireTag.MultiPacket,e.WireMultiPacket.BeginAndEnd),o=u.pos-1,u.buf[o]=e.WireMultiPacket.BeginAndEnd,a){var m=this.GetSubscriptionId();this.callbacks[m]=h.callback,this.subscriptions[m]=i,u.AddString(e.WireTag.SubscriptionId,m);var g=[new t(e.WireFeed,m)];this.conn.SubscribeSymbols(g),l=function(){s.conn.UnsubscribeSymbols(g),delete s.callbacks[m],delete s.subscriptions[m]}}if(i.languages&&i.languages.forEach(function(t){u.AddString(e.WireTag.Language,t)}),i.instruments)for(var f=0,v=i.instruments;f<v.length;f++){var y=v[f];p(),u.AddInt(e.WireTag.Feed,y.feed),u.AddString(e.WireTag.Symbol,y.ticker)}for(var b=0,T=this.loginServer.getWireFeeds(c);b<T.length;b++){var S=T[b];p(),u.AddInt(e.WireTag.Feed,S)}return d>1&&(u.buf[o]=e.WireMultiPacket.End),this.conn.Send(u,!0),l},r.prototype.getEventType=function(e){switch(e.eventType){case"NewsEvent":return a.News;case"MacroCalendarEvent":return a.MacroCalendar;case"EqCalendarEvent":return a.EquityCalendar;case"MotionEvent":return a.MotionDetection;default:return a.Unknown}},r.prototype.processEventData=function(t,n,i){if(t.eventId){var r=t.getMetaData(i);switch(n.eventType=this.getEventType(r),n.eventType){case a.News:n.newsEvent.metaData=r;break;case a.EquityCalendar:n.equityCalendarEvent.metaData=r;break;case a.MacroCalendar:n.macroCalendarEvent.metaData=r;break;case a.MotionDetection:n.motionDetectionEvent.metaData=r;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled metadata event:",r)}}else if(t.caption){var s=t.getHeader();switch(n.eventType){case a.News:n.newsEvent.header=s;break;case a.EquityCalendar:n.equityCalendarEvent.header=s;break;case a.MacroCalendar:n.macroCalendarEvent.header=s;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled header:",s)}}else if(t.ticker){var o=t.getSymbol();switch(n.eventType){case a.News:n.newsEvent.symbolInfo.push(o);break;case a.EquityCalendar:n.equityCalendarEvent.symbolInfo.push(o);break;case a.MacroCalendar:n.macroCalendarEvent.symbolInfo.push(o);break;case a.MotionDetection:n.motionDetectionEvent.symbolInfo=o;break;default:e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled symbol:",o)}}else if(t.headline)n.newsEvent.flashItems.push(t.getFlashItem());else if(t.calendarDescription){var l=t.getCalendarItem();switch(n.eventType){case a.EquityCalendar:n.equityCalendarEvent.calendarItem=l;break;case a.MacroCalendar:n.macroCalendarEvent.calendarItem=l;break;default:e.log("Unhandled calendar item:",l)}}else t.motionDetectionType?n.motionDetectionEvent.motionDetectionItem=t.getMotionDetectionItem():e.DEBUG_WIRE_BLOCKS&&!InfrontUtil.isEmptyObject(t)&&e.log("Unhandled block:",t)},r.prototype.ResponseWire=function(t,n){for(var i=new T,r=0;r<n.data.length;r++){var a=n.data[r].buf,s=new e.Parser(0,a.length);s.SkipHeader(a);for(var o=new e.Tag,l=new b,c=new S;s.Next(a,o,this.tagSet);)switch(e.DEBUG_WIRE_TAGS&&e.logToConsole(this.tagSet,o,a),o.tag){case e.WireTag.MultiPacket:break;case e.WireTag.Status:i.status=o.get(a);break;case e.WireTag.StatusDescription:i.statusDescription=o.String(a);break;case e.WireTag.SubscriptionId:i.subscriptionId=o.String(a);break;case e.WireTag.Date:l.setDate(o.Int(a));break;case e.WireTag.Time:l.setTime(o.Int(a));break;case e.WireTag.Feed:l.addFeed(o.Int(a));break;case e.WireTag.NewsId:l.newsId=o.String(a);break;case e.WireTag.PriorityValue:l.priorityValue=o.Int(a);break;case e.WireTag.NewsSigScore:l.score=o.Decimal(a);break;case e.WireTag.NewsSourceId:l.sourceId=o.String(a);break;case e.WireTag.NewsFlag:l.newsType=o.Int(a);break;case e.WireTag.EventId:l.eventId=o.String(a);break;case e.WireTag.EventScore:l.eventScore=o.Decimal(a);break;case e.WireTag.EventType:l.eventType=o.String(a);break;case e.WireTag.EventArticleCount:l.articleCount=o.Int(a);break;case e.WireTag.FlashCount:l.flashCount=o.Int(a);break;case e.WireTag.Caption:l.caption=o.String(a,!0);break;case e.WireTag.NewsContentType:l.contentType=o.String(a);break;case e.WireTag.NewsCategory:l.addNewsTag(o.String(a));break;case e.WireTag.Headline:l.headline=o.String(a,!0);break;case e.WireTag.Symbol:l.ticker=o.String(a);break;case e.WireTag.SymbolScore:l.symbolScore=o.Decimal(a);break;case e.WireTag.CalendarDescription:l.calendarDescription=o.String(a,!0);break;case e.WireTag.CalendarSubject:l.calendarSubject=o.String(a,!0);break;case e.WireTag.CalendarType:l.calendarType=o.Int(a);break;case e.WireTag.CalendarFlag:l.calendarFlag=o.String(a);break;case e.WireTag.CalendarSource:l.calendarSource=o.String(a);break;case e.WireTag.CalendarExternalID:l.calendarExternalId=o.String(a);break;case e.WireTag.CalendarExpected:l.calendarExpected=o.Decimal(a);break;case e.WireTag.CalendarPrevious:l.calendarPrevious=o.Decimal(a);break;case e.WireTag.CalendarActual:l.calendarActual=o.Decimal(a);break;case e.WireTag.CalendarNumberUnit:l.CalendarNumberUnit=o.String(a);break;case e.WireTag.MotionDetectionType:l.motionDetectionType=o.Int(a);break;case e.WireTag.MotionDetectionSubType:l.motionDetectionSubType=o.Int(a);break;case e.WireTag.MotionDetectionValue:l.motionDetectionValue=o.Decimal(a);break;case e.WireTag.MotionDetectionSubValue:l.motionDetectionSubValue=o.Decimal(a);break;case e.WireTag.MotionDetectionScore:l.motionDetectionScore=o.Decimal(a);break;case e.WireTag.BeginSection:case e.WireTag.EndSection:break;case e.WireTag.BlockSeparator:this.processEventData(l,c,t.clientServer),l=new b;break;case e.WireTag.Separator:i.addEvent(c);break;case e.RealtimeTags.Feed:break;default:e.DEBUG_WIRE&&e.log("Unhandled:",e.tagToStr(this.tagSet,o.tag),o.get(a))}}n.data=[],i.finalize(),t.clientServer&&(this.hasActiveSubscription=!0),e.DEBUG_WIRE&&e.log(this.ps.toStr(),t.clientServer?"CS":"RT","Wire",__assign({},i),t.inspect(this.tagSet));var d=i.subscriptionId?this.callbacks[i.subscriptionId]:n.callback;d&&d.ResponseWireData&&d.ResponseWireData(new e.ResponseHeader,i),n.commonFramework&&n.commonFramework.Reply(new e.ResponseHeader,i)},r.prototype.notifyConnectionStatus=function(t){for(var n=0,i=Object.keys(this.callbacks);n<i.length;n++){var r=i[n],a=this.callbacks[r];a.ConnectionStatus&&a.ConnectionStatus(new e.ResponseHeader,t)}},r.prototype.reconnect=function(){var e=this;this.publishEvent(new Infront.WireReconnectEvent(this.ps,this.serverType)),this.hasActiveSubscription=!1;for(var t=[],n=0,i=Object.keys(this.subscriptions);n<i.length;n++){var r=i[n],a=this.subscriptions[r],s=this.callbacks[r];this.GetWire(a,s,!0),t.push(r)}t.forEach(function(t){delete e.subscriptions[t],delete e.callbacks[t]})},r.prototype.ResponseCloseSubscription=function(t,n){for(var i=0;i<n.data.length;i++){var r=n.data[i].buf,a=new e.Parser(0,r.length);a.SkipHeader(r);for(var s=new e.Tag;a.Next(r,s,this.tagSet);)e.DEBUG_WIRE_TAGS&&e.logToConsole(this.tagSet,s,r),s.tag,e.DEBUG_WIRE_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,s.tag),s.String(r))}},r.prototype.lowLevelData=function(t,n,i){if(t.responseId==e.HeaderResponses.RestartPS)return e.log("%Wire: restart provider service","color: #f60; font-size: 14px;"),void this.reconnect();var r;if(t.uniqueId>0)if(r=this.requests[t.uniqueId]){if(r.responseNu++,r.data.push(new e.ResponseItem(i.DuplicateData(n),!1)),t.segment!=e.SegmentInfo.Last)return;switch(delete this.requests[t.uniqueId],r.type){case e.WireRequest.GetSnapshot:return void this.ResponseWire(t,r);default:e.log(this.ps.toStr(),"Unhandled response:",e.requestToStr(this.tagSet,r.type))}}else e.log(this.ps.toStr(),"Wire - could not find request",t.inspect(this.tagSet));else(r=new e.Request).responseNu++,r.data.push(new e.ResponseItem(i.DuplicateData(n),!1)),this.ResponseWire(t,r)},r.prototype.lowLevelReRequestAll=function(t){e.log("%Wire: re-request all","color: #f60; font-size: 14px;"),this.reconnect()},r.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),e.log(this.ps.toStr(),"lowLevelError",t.inspect(this.tagSet),e.HeaderResponsesToStr(n),i),delete this.requests[t.uniqueId]),e.log(i)},r.prototype.lowLevelConnect=function(e,t){this.publishEvent(new Infront.LowLevelConnectEvent(e,this.serverType)),this.hasActiveSubscription&&this.reconnect(),this.notifyConnectionStatus(!0)},r.prototype.lowLevelDisconnect=function(e,t,n){i.prototype.lowLevelDisconnect.call(this,e,t,n),this.notifyConnectionStatus(!1)},r}(e.BaseIDSServer);i.WireServer=C}(e.Wire||(e.Wire={}))}(IDS||(IDS={})),function(e){var t=function(){};e.EventsRequest=t;var n=function(){function e(){this.events=[]}return e.prototype.ToMws=function(){for(var e=0,t=this.events;e<t.length;e++)t[e].ToMws()},e}();e.EventsResponse=n;var i=function(t){function i(n,i){var r=t.call(this,i,n,e.ServerType.Calendar)||this;return r.requests={},r.conn=new e.ServerConnection(n,i.secure,r,i.login.getAccessFeeds(n),i.login.getHosts(n),r.tagSet,i,r.serverType),r}return __extends(i,t),i.prototype.GetEvents=function(t,n,i){var r=this.conn.GetRequest(e.CalendarRequest.CalendarData,0),a=this.requests[r.uniqueId]=new e.Request;if(a.callback=n,a.commonFramework=i,a.type=e.CalendarRequest.CalendarData,t.sources&&t.sources.length>0?r.Add(e.CalendarTags.DataSource,t.sources):r.Add(e.CalendarTags.DataSource,this.serverPool.login.getAccessFeeds(this.ps)),r.Add(e.CalendarTags.Country,t.countries),t.instruments)for(var s=0,o=t.instruments;s<o.length;s++){var l=o[s];r.Add(e.CalendarTags.Feed,l.feed),r.Add(e.CalendarTags.Symbol,l.ticker)}r.Add(e.CalendarTags.MaxItems,t.numItems),t.dateFrom&&r.Add(e.CalendarTags.DateFrom,InfrontUtil.DateToInt(t.dateFrom)),t.dateTo&&r.Add(e.CalendarTags.DateTo,InfrontUtil.DateToInt(t.dateTo)),this.conn.Send(r,!0)},i.prototype.GetStory=function(t,n){var i=this.conn.GetRequest(e.CalendarRequest.Story,0),r=this.requests[i.uniqueId]=new e.Request;r.callback=n,r.type=e.CalendarRequest.Story,i.Add(e.CalendarTags.Id,t),this.conn.Send(i,!0)},i.prototype.ResponseEvents=function(t,i){for(var r=new n,a=new e.CalendarEventItem,s=0;s<i.data.length;s++){var o=i.data[s].buf,l=new e.Parser(0,o.length);l.SkipHeader(o);for(var c=new e.Tag;l.Next(o,c,this.tagSet);)switch(e.DEBUG_CALENDAR_CS_TAGS&&e.logToConsole(this.tagSet,c,o),c.tag){case e.CalendarTags.Feed:a.feed=c.Int(o);break;case e.CalendarTags.Symbol:a.symbol=c.String(o);break;case e.CalendarTags.Date:InfrontUtil.DateNuToDate(c.Int(o),a.dateTime);break;case e.CalendarTags.Time:InfrontUtil.TimeNuToDate(c.Int(o),a.dateTime,this.serverPool.login.feedOffsetUtc(a.feed));break;case e.CalendarTags.DataSource:a.source=c.Int(o);break;case e.CalendarTags.EventId:a.id=c.Int(o);break;case e.CalendarTags.Description:a.description=c.String(o);break;case e.CalendarTags.Country:a.country=c.String(o);break;case e.CalendarTags.Category:a.category=c.Int(o);break;case e.CalendarTags.Type:a.type=c.Int(o);break;case e.CalendarTags.IsCategoryMacro:a.isMacro=1==c.Int(o);break;case e.CalendarTags.ExternId:break;case e.CalendarTags.Properties:a.properties=c.Int(o);break;case e.CalendarTags.ResultPrevious:a.resultPrevious=c.Decimal(o);break;case e.CalendarTags.ResultExpected:a.resultExpected=c.Decimal(o);break;case e.CalendarTags.ResultActual:a.resultActual=c.Decimal(o);break;case e.CalendarTags.ActualFeed:a.actualFeed=c.Int(o);break;case e.CalendarTags.ActualSymbol:a.actualSymbol=c.String(o);break;case e.CalendarTags.ExpectedFeed:a.expectedFeed=c.Int(o);break;case e.CalendarTags.ExpectedSymbol:a.expectedSymbol=c.String(o);break;case e.CalendarTags.RevisedFeed:a.revisedFeed=c.Int(o);break;case e.CalendarTags.RevisedSymbol:a.revisedSymbol=c.String(o);break;case e.CalendarTags.DeltaFeed:a.deltaFeed=c.Int(o);break;case e.CalendarTags.DeltaSymbol:a.deltaSymbol=c.String(o);break;case e.CalendarTags.ResultDelta:a.resultDelta=c.Decimal(o);break;case e.CalendarTags.ResultUnit:a.resultUnit=c.String(o);break;case e.CalendarTags.ResultRevised:a.resultRevised=c.Decimal(o);break;case e.CalendarTags.EventParentId:a.parentId=c.Int(o);break;case e.CalendarTags.Separator:a.id&&r.events.push(a),a=new e.CalendarEventItem;break;default:e.DEBUG_CALENDAR_CS_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,c.tag),c.String(o))}}r.ToMws(),e.DEBUG_CALENDAR_CS&&e.log(this.ps.toStr(),"CS",e.requestToStr(this.tagSet,i.type),r),i.callback&&i.callback.ResponseCalendarEvents&&i.callback.ResponseCalendarEvents(new e.ResponseHeader,r),i.commonFramework&&i.commonFramework.Reply(new e.ResponseHeader,r)},i.prototype.ResponseStory=function(t,n){for(var i=0;i<n.data.length;i++){var r=n.data[i].buf,a=new e.Parser(0,r.length);a.SkipHeader(r);for(var s=new e.Tag;a.Next(r,s,this.tagSet);)s.tag,e.DEBUG_UNHANDLED_TAGS&&e.log("Unhandled:",e.tagToStr(this.tagSet,s.tag),s.String(r))}},i.prototype.lowLevelData=function(t,n,i){var r=this.requests[t.uniqueId];if(r){if(r.responseNu++,r.data.push(new e.ResponseItem(i.DuplicateData(n))),t.segment==e.SegmentInfo.Last){switch(r.type){case e.CalendarRequest.CalendarData:this.ResponseEvents(t,r);break;case e.CalendarRequest.Story:this.ResponseStory(t,r)}delete this.requests[t.uniqueId]}}else e.log("Calendar - could not find request")},i.prototype.lowLevelError=function(t,n,i){var r=this.requests[t.uniqueId];r&&(r.callback&&r.callback.ResponseError&&r.callback.ResponseError(new e.ResponseHeader(e.ResponseEnum.Error,i)),r.commonFramework&&r.commonFramework.Reply(new e.ResponseHeader(e.ResponseEnum.Error,i),null),delete this.requests[t.uniqueId]),e.log(i)},i.prototype.ResponseError=function(e){InfrontUtil.errorLogCallback(404,e.errorMsg)},i.prototype.lowLevelConnect=function(e,n){t.prototype.lowLevelConnect.call(this,e,n)},i.prototype.lowLevelDisconnect=function(e,n,i){t.prototype.lowLevelDisconnect.call(this,e,n,i)},i.prototype.lowLevelReRequestAll=function(e){},i}(e.BaseIDSServer);e.CalendarServer=i}(IDS||(IDS={})),function(e){var t=function(){function e(){}return e.compareNumberDesc=function(e,t){return t-e},e.compareNumberAsc=function(e,t){return e-t},e.compareDateStringsDesc=function(e,t){return Date.parse(t)-Date.parse(e)},e.compareDateStringsAsc=function(e,t){return Date.parse(e)-Date.parse(t)},e.compareTimeStringsDesc=function(e,t){var n=InfrontUtil.parsePlainTimeString(e);return InfrontUtil.parsePlainTimeString(t).getTime()-n.getTime()},e.compareTimeStringsAsc=function(e,t){var n=InfrontUtil.parsePlainTimeString(e),i=InfrontUtil.parsePlainTimeString(t);return n.getTime()-i.getTime()},e.compareStringsDesc=function(e,t){return e<t?-1:e>t?1:0},e.compareStringsAsc=function(e,t){return e>t?-1:e<t?1:0},e}();e.CompareFunctions=t}(Infront||(Infront={})),function(e){function t(t,n){switch(t){case e.TagSet.Login:switch(n){case e.LoginTags.Separator:return p;case e.LoginTags.Login:return"Login";case e.LoginTags.Password:return"Password";case e.LoginTags.PID:return"PID";case e.LoginTags.LoginId:return"LoginId";case e.LoginTags.ProviderName:return"ProviderName";case e.LoginTags.SID:return"SID";case e.LoginTags.ServiceName:return"ServiceName";case e.LoginTags.Host:return"Host";case e.LoginTags.Port:return"Port";case e.LoginTags.ConnectionType:return"ConnectionType";case e.LoginTags.AccessFeed:return"AccessFeed";case e.LoginTags.Tag:return"Tag";case e.LoginTags.ColNu:return"ColNu";case e.LoginTags.Length:return"Length";case e.LoginTags.Attributes:return"Attributes";case e.LoginTags.OwnerProviderId:return"OwnerProviderId";case e.LoginTags.SupportEmail:return"SupportEmail";case e.LoginTags.LoginServers:return"LoginServers";case e.LoginTags.PrivateNetworkId:return"PrivateNetworkId";case e.LoginTags.HelpUrl:return"HelpUrl";case e.LoginTags.PublicKey:return"PublicKey";case e.LoginTags.UserType:return"UserType";case e.LoginTags.Info1:return"Info1";case e.LoginTags.Info2:return"Info2";case e.LoginTags.Info3:return"Info3";case e.LoginTags.Info4:return"Info4";case e.LoginTags.Info5:return"Info5";case e.LoginTags.Url2:return"Url2";case e.LoginTags.FreeService:return"FreeService";case e.LoginTags.TagSet:return"TagSet";case e.LoginTags.Encrypt:return"Encrypt";case e.LoginTags.ServiceType:return"ServiceType";case e.LoginTags.Country:return"Country";case e.LoginTags.ExchCode:return"ExchCode";case e.LoginTags.FeedContent:return"FeedContent";case e.LoginTags.Feed:return"Feed";case e.LoginTags.FeedDescription:return"FeedDescription";case e.LoginTags.MainIndex:return"MainIndex";case e.LoginTags.FullName:return"FullName";case e.LoginTags.Address:return"Address";case e.LoginTags.Phone:return"Phone";case e.LoginTags.AccessExp:return"AccessExp";case e.LoginTags.AppVersion:return"AppVersion";case e.LoginTags.ForceUpgradeVer:return"ForceUpgradeVer";case e.LoginTags.UpgradeDescr:return"UpgradeDescr";case e.LoginTags.FileDate:return"FileDate";case e.LoginTags.UpgradePath:return"UpgradePath";case e.LoginTags.Priority:return"Priority";case e.LoginTags.MainIndexFeed:return"MainIndexFeed";case e.LoginTags.StartTime:return"StartTime";case e.LoginTags.EndTime:return"EndTime";case e.LoginTags.IpAddr:return"IpAddr";case e.LoginTags.RemoteIp:return"RemoteIp";case e.LoginTags.BrokerCode:return"BrokerCode";case e.LoginTags.BrokerDescr:return"BrokerDescr";case e.LoginTags.BrokerMainUrl:return"BrokerMainUrl";case e.LoginTags.BrokerCountry:return"BrokerCountry";case e.LoginTags.DbHint:return"DbHint";case e.LoginTags.ChangeDate:return"ChangeDate";case e.LoginTags.BrokerProperties:return"BrokerProperties";case e.LoginTags.WrapToFeed:return"WrapToFeed";case e.LoginTags.GetFromFeed:return"GetFromFeed";case e.LoginTags.UnderlyingFeed:return"UnderlyingFeed";case e.LoginTags.OptionsFeed:return"OptionsFeed";case e.LoginTags.ParentFeed:return"ParentFeed";case e.LoginTags.GmtFeedOffset:return"GmtFeedOffset";case e.LoginTags.GmtLocalOffset:return"GmtLocalOffset";case e.LoginTags.Language:return"Language";case e.LoginTags.TickFromPrice:return"TickFromPrice";case e.LoginTags.TickToPrice:return"TickToPrice";case e.LoginTags.TickSize:return"TickSize";case e.LoginTags.TickSizeId:return"TickSizeId";case e.LoginTags.RtType:return"RtType";case e.LoginTags.RtSubType:return"RtSubType";case e.LoginTags.LimitApp:return"LimitApp";case e.LoginTags.LogoNumber:return"LogoNumber";case e.LoginTags.AppName:return"AppName";case e.LoginTags.VolIndex:return"VolIndex";case e.LoginTags.VolIndexFeed:return"VolIndexFeed";case e.LoginTags.AdditionalInfo:return"AdditionalInfo";case e.LoginTags.MarketCodeReuters:return"MarketCodeReuters";case e.LoginTags.MarketCodeMic:return"MarketCodeMic";case e.LoginTags.FeedProperties:return"FeedProperties";case e.LoginTags.DefaultDecimals:return"DefaultDecimals";case e.LoginTags.DefaultContractSize:return"DefaultContractSize";case e.LoginTags.MinDelaySeconds:return"MinDelaySeconds";case e.LoginTags.MaxDelaySeconds:return"MaxDelaySeconds";case e.LoginTags.FeedDescrUrl:return"FeedDescrUrl";case e.LoginTags.MaxMblLevels:return"MaxMblLevels";case e.LoginTags.SsoToken:return"SsoToken";case e.LoginTags.AppNu:return"AppNu";case e.LoginTags.Marketplace:return"Marketplace";case e.LoginTags.ExpireDate:return"ExpireDate";case e.LoginTags.CustomerId:return"CustomerId";case e.LoginTags.CustomerId2:return"CustomerId2";case e.LoginTags.CustomCode:return"CustomCode";case e.LoginTags.AuthVersion:return"AuthVersion";case e.LoginTags.Signature:return"Signature";case e.LoginTags.Thumbprint:return"Thumbprint";case e.LoginTags.Uuid:return"Uuid";case e.LoginTags.Namespace:return"Namespace";case e.LoginTags.ExtLoginId:return"ExtLoginId";case e.LoginTags.SetupTemplateNumber:return"SetupTemplateNumber";case e.LoginTags.SetupTemplateTag:return"SetupTemplateTag";case e.LoginTags.SetupTemplateDataType:return"SetupTemplateDataType";case e.LoginTags.SetupTemplateStaticData:return"SetupTemplateStaticData";case e.LoginTags.SetupTemplateEnd:return"SetupTemplateEnd";default:return"<"+n.toString(16)+">"}case e.TagSet.Realtime:switch(n){case e.RealtimeTags.Separator:return p;case e.RealtimeTags.EOP:return"EOP";case e.RealtimeTags.Type:return"Type";case e.RealtimeTags.TemplateNu:return"TemplateNu";case e.RealtimeTags.TemplatePMap:return"TemplatePMap";case e.RealtimeTags.Symbol:return"Symbol";case e.RealtimeTags.Feed:return"Feed";case e.RealtimeTags.Subscribe:return"Subscribe";case e.RealtimeTags.Unsubscribe:return"Unsubscribe";case e.RealtimeTags.AcVolume:return"AcVolume";case e.RealtimeTags.YestClose:return"YestClose";case e.RealtimeTags.YestBidClose:return"YestBidClose";case e.RealtimeTags.Open:return"Open";case e.RealtimeTags.High:return"High";case e.RealtimeTags.Low:return"Low";case e.RealtimeTags.SourceSeqnu:return"SourceSeqnu";case e.RealtimeTags.Last:return"Last";case e.RealtimeTags.Yield:return"Yield";case e.RealtimeTags.IncVolume:return"IncVolume";case e.RealtimeTags.IsTradable:return"IsTradable";case e.RealtimeTags.IsTrade:return"IsTrade";case e.RealtimeTags.TradeSeparator:return"TradeSeparator";case e.RealtimeTags.Market:return"Market";case e.RealtimeTags.TradeId:return"TradeId";case e.RealtimeTags.Buyer:return"Buyer";case e.RealtimeTags.Seller:return"Seller";case e.RealtimeTags.TrTypeNu:return"TrTypeNu";case e.RealtimeTags.TrTypeStr:return"TrTypeStr";case e.RealtimeTags.HitterTaker:return"HitterTaker";case e.RealtimeTags.OnExchVolume:return"OnExchVolume";case e.RealtimeTags.OnExchTurnover:return"OnExchTurnover";case e.RealtimeTags.Turnover:return"Turnover";case e.RealtimeTags.YYield:return"YYield";case e.RealtimeTags.YBidYield:return"YBidYield";case e.RealtimeTags.YyLast:return"YyLast";case e.RealtimeTags.YAsk:return"YAsk";case e.RealtimeTags.BaReset:return"BaReset";case e.RealtimeTags.NuBids:return"NuBids";case e.RealtimeTags.NuAsks:return"NuAsks";case e.RealtimeTags.BidAnalytics:return"BidAnalytics";case e.RealtimeTags.AskAnalytics:return"AskAnalytics";case e.RealtimeTags.TradeAnalytics:return"TradeAnalytics";case e.RealtimeTags.BaLevel:return"BaLevel";case e.RealtimeTags.OrderId:return"OrderId";case e.RealtimeTags.Bid:return"Bid";case e.RealtimeTags.Ask:return"Ask";case e.RealtimeTags.BidSize:return"BidSize";case e.RealtimeTags.AskSize:return"AskSize";case e.RealtimeTags.BaBroker:return"BaBroker";case e.RealtimeTags.BaBuyerId:return"BaBuyerId";case e.RealtimeTags.BaSellerId:return"BaSellerId";case e.RealtimeTags.BaBuyMarket:return"BaBuyMarket";case e.RealtimeTags.BaAskMarket:return"BaAskMarket";case e.RealtimeTags.SymbolDbNumber:return"SymbolDbNumber";case e.RealtimeTags.StaticCRC:return"StaticCRC";case e.RealtimeTags.Currency:return"Currency";case e.RealtimeTags.SymbolType:return"SymbolType";case e.RealtimeTags.SymbolSubType:return"SymbolSubType";case e.RealtimeTags.FullName:return"FullName";case e.RealtimeTags.ISIN:return"ISIN";case e.RealtimeTags.ExchangeSymbol:return"ExchangeSymbol";case e.RealtimeTags.PhysicalUnit:return"PhysicalUnit";case e.RealtimeTags.Issuer:return"Issuer";case e.RealtimeTags.Sector:return"Sector";case e.RealtimeTags.InfrontSector:return"InfrontSector";case e.RealtimeTags.PrimarySegment:return"PrimarySegment";case e.RealtimeTags.SecondarySegment:return"SecondarySegment";case e.RealtimeTags.PrimarySegmentDescription:return"PrimarySegmentDescription";case e.RealtimeTags.SecondarySegmentDescription:return"SecondarySegmentDescription";case e.RealtimeTags.MIC:return"MIC";case e.RealtimeTags.Leverage:return"Leverage";case e.RealtimeTags.Country:return"Country";case e.RealtimeTags.SymbolStatus:return"SymbolStatus";case e.RealtimeTags.SymbolStatusText:return"SymbolStatusText";case e.RealtimeTags.BoardLot:return"BoardLot";case e.RealtimeTags.NuShares:return"NuShares";case e.RealtimeTags.SharesPerOption:return"SharesPerOption";case e.RealtimeTags.SectorId:return"SectorId";case e.RealtimeTags.ContractSize:return"ContractSize";case e.RealtimeTags.NotForDisplay:return"NotForDisplay";case e.RealtimeTags.UnderlyingFeed:return"UnderlyingFeed";case e.RealtimeTags.UnderlyingTicker:return"UnderlyingTicker";case e.RealtimeTags.UnderlyingBase:return"UnderlyingBase";case e.RealtimeTags.UnderlyingDescr:return"UnderlyingDescr";case e.RealtimeTags.Expiry:return"Expiry";case e.RealtimeTags.Strike:return"Strike";case e.RealtimeTags.OpenInterest:return"OpenInterest";case e.RealtimeTags.TickId:return"TickId";case e.RealtimeTags.TickTo:return"TickTo";case e.RealtimeTags.TickSize:return"TickSize";case e.RealtimeTags.Multiplier:return"Multiplier";case e.RealtimeTags.EarningsYield:return"EarningsYield";case e.RealtimeTags.DividendYield:return"DividendYield";case e.RealtimeTags.Settle:return"Settle";case e.RealtimeTags.FundBaseCurrency:return"FundBaseCurrency";case e.RealtimeTags.FundType:return"FundType";case e.RealtimeTags.IssuerFullName:return"IssuerFullName";case e.RealtimeTags.EpsEstimate:return"EpsEstimate";case e.RealtimeTags.EbitEstimate:return"EbitEstimate";case e.RealtimeTags.Eps:return"Eps";case e.RealtimeTags.NetSales:return"NetSales";case e.RealtimeTags.NetSalesEstimate:return"NetSalesEstimate";case e.RealtimeTags.NetProfit:return"NetProfit";case e.RealtimeTags.NetProfitEstimate:return"NetProfitEstimate";case e.RealtimeTags.Ebit:return"Ebit";case e.RealtimeTags.Ebitda:return"Ebitda";case e.RealtimeTags.EbitdaEstimate:return"EbitdaEstimate";case e.RealtimeTags.Pe:return"Pe";case e.RealtimeTags.PeEstimate:return"PeEstimate";case e.RealtimeTags.FundIncomeType:return"FundIncomeType";case e.RealtimeTags.FundProspectiveBookValueYield:return"FundProspectiveBookValueYield";case e.RealtimeTags.FundInvestmentStyle:return"FundInvestmentStyle";case e.RealtimeTags.MorningstarRating:return"MorningstarRating";case e.RealtimeTags.MorningstarRating3Y:return"MorningstarRating3Year";case e.RealtimeTags.FundOngoingCharge:return"FundOngoingCharge";case e.RealtimeTags.MorningstarSecId:return"MorningstarSecId";case e.RealtimeTags.FundPortfolioManager:return"FundPortfolioManager";case e.RealtimeTags.FundRegionExposure:return"FundRegionExposure";case e.RealtimeTags.FundRiskMeasure:return"FundRiskMeasure";case e.RealtimeTags.FundTopHolding:return"FundTopHolding";case e.RealtimeTags.FundTotalExpense:return"FundTotalExpense";case e.RealtimeTags.FundTotalAssets:return"FundTotalAssets";case e.RealtimeTags.FundStdDev1Year:return"FundStdDev1Year";case e.RealtimeTags.FundStdDev3Years:return"FundStdDev3Years";case e.RealtimeTags.FundStdDev5Years:return"FundStdDev5Years";case e.RealtimeTags.NetAssetValue:return"NetAssetValue";case e.RealtimeTags.FundNameSwedish:return"FundNameSwedish";case e.RealtimeTags.AmortizationType:return"AmortizationType";case e.RealtimeTags.FxCurrency1:return"FxCurrency1";case e.RealtimeTags.FxCurrency2:return"FxCurrency2";case e.RealtimeTags.FxTenor:return"FxTenor";case e.RealtimeTags.BloombergTicker:return"BloombergTicker";case e.RealtimeTags.BloombergGlobalId:return"BloombergGlobalId";case e.RealtimeTags.BloombergGlobalIdComposite:return"BloombergGlobalIdComposite";case e.RealtimeTags.NextDividendValue:return"NextDividendValue";case e.RealtimeTags.NextDividendDate:return"NextDividendDate";case e.RealtimeTags.NextDividendCurrency:return"NextDividendCurrency";case e.RealtimeTags.BondApproxYield:return"BondApproxYield";case e.RealtimeTags.BondType:return"BondType";case e.RealtimeTags.CurrentCoupon:return"CurrentCoupon";case e.RealtimeTags.CouponType:return"CouponType";case e.RealtimeTags.BondDescription:return"BondDescription";case e.RealtimeTags.ExpiryType:return"BondExpiryType";case e.RealtimeTags.IssuerId:return"IssuerId";case e.RealtimeTags.IssuerIndustry:return"IssuerIndustry";case e.RealtimeTags.IssuerIsin:return"IssfuerIsin";case e.RealtimeTags.BondMainType:return"BondMainType";case e.RealtimeTags.BondMinDenomination:return"BondMinDenomination";case e.RealtimeTags.OfficialClose:return"OfficialClose";case e.RealtimeTags.OfficialCloseDate:return"OfficialCloseDate";case e.RealtimeTags.InfinancialsSector:return"InfinancialsSector";case e.RealtimeTags.EusipaCode:return"EusipaCode";case e.RealtimeTags.BasisPointSpread:return"BasisPointSpread";case e.RealtimeTags.SearchFreeText:return"SearchFreeText";case e.RealtimeTags.FreeTextTagMustMatch:return"FreeTextTagMustMatch";case e.RealtimeTags.SearchItemType:return"SearchItemType";case e.RealtimeTags.SearchRangeTag:return"SearchRangeTag";case e.RealtimeTags.SearchRangeLowerLimit:return"SearchRangeLowerLimit";case e.RealtimeTags.SearchRangeUpperLimit:return"SearchRangeUpperLimit";case e.RealtimeTags.IndexDescription:return"IndexDescription";case e.RealtimeTags.SortNu:return"SortNu";case e.RealtimeTags.CompanyId:return"CompanyId";case e.RealtimeTags.CompanyURL:return"CompanyURL";case e.RealtimeTags.CompanyName:return"CompanyName";case e.RealtimeTags.UseTag:return"UseTag";case e.RealtimeTags.OptionSearch:return"OptionSearch";case e.RealtimeTags.StartDate:return"StartDate";case e.RealtimeTags.StopDate:return"StopDate";case e.RealtimeTags.StartTime:return"StartTime";case e.RealtimeTags.StopTime:return"StopTime";case e.RealtimeTags.CacheSerialNu:return"CacheSerialNu";case e.RealtimeTags.AdjustValue:return"AdjustValue";case e.RealtimeTags.Dividend:return"Dividend";case e.RealtimeTags.DividendCurrency:return"DividendCurrency";case e.RealtimeTags.SetupTemplateNumber:return"SetupTemplateNumber";case e.RealtimeTags.SetupTemplateTag:return"SetupTemplateTag";case e.RealtimeTags.SetupTemplateDataType:return"SetupTemplateDataType";case e.RealtimeTags.SetupTemplateStaticData:return"SetupTemplateStaticData";case e.RealtimeTags.MaxItems:return"MaxItems";case e.RealtimeTags.ChainFeed:return"ChainFeed";case e.RealtimeTags.ChainName:return"ChainName";case e.RealtimeTags.ChainDescr:return"ChainDescr";case e.RealtimeTags.ChainType:return"ChainType";case e.RealtimeTags.ChainHierarchy:return"ChainHierarchy";case e.RealtimeTags.ProviderId:return"ProviderId";case e.RealtimeTags.PriceDisplay:return"PriceDisplay";case e.RealtimeTags.MinimumIcebergSize:return"MinimumIcebergSize";case e.RealtimeTags.MinimumIcebergValue:return"MinimumIcebergValue";case e.RealtimeTags.MarketCap:return"MarketCap";case e.RealtimeTags.Theoretical:return"Theoretical";case e.RealtimeTags.Delta:return"Delta";case e.RealtimeTags.Elast:return"Elast";case e.RealtimeTags.TradesStart:return"TradesStart";case e.RealtimeTags.TradesEnd:return"TradesEnd";case e.RealtimeTags.TradeResolutionType:return"TradeResolutionType";case e.RealtimeTags.TradeResolution:return"TradeResolution";case e.RealtimeTags.DaysBack:return"DaysBack";case e.RealtimeTags.NumberOfDays:return"NumberOfDays";case e.RealtimeTags.ResetFeed:return"ResetFeed";case e.RealtimeTags.ResetSymbol:return"ResetSymbol";case e.RealtimeTags.RankOperation:return"RankOperation";case e.RealtimeTags.FullMmt:return"FullMmt";case e.RealtimeTags.CompressedMmt:return"CompressedMmt";case e.RealtimeTags.ESMA_Trade_Type:return"ESMA_Trade_Type";case e.RealtimeTags.YVolume:return"YVolume";case e.RealtimeTags.YTurnover:return"YTurnover";case e.RealtimeTags.YExchangeVolume:return"YExchangeVolume";case e.RealtimeTags.YExchangeTurnover:return"YExchangeTurnover";case e.RealtimeTags.IndicTrade:return"IndicTrade";case e.RealtimeTags.IndicIncVol:return"IndicIncvol";case e.RealtimeTags.IndicHigh:return"IndicHigh";case e.RealtimeTags.IndicLow:return"IndicLow";case e.RealtimeTags.Nms:return"Nms";case e.RealtimeTags.IndicOpen:return"IndicOpen";case e.RealtimeTags.IndicOpenVol:return"IndicOpenVol";case e.RealtimeTags.ParticipationLevel:return"ParticipationLevel";case e.RealtimeTags.BreakEven:return"BreakEven";case e.RealtimeTags.AsianAverage:return"AsianAverage";case e.RealtimeTags.EstimatesCurrency:return"EstimatesCurrency";case e.RealtimeTags.CalculatedHistoryType:return"CalculatedHistoryType";case e.RealtimeTags.RSI14Gain:return"RSI14Gain";case e.RealtimeTags.RSI14Loss:return"RSI14Loss";case e.RealtimeTags.RSI14Periods:return"RSI14Periods";case e.RealtimeTags.Change:return"Change";case e.RealtimeTags.BidChange:return"BidChange";case e.RealtimeTags.ChangePct:return"ChangePct";case e.RealtimeTags.BidChangePct:return"BidChangePct";case e.RealtimeTags.OpenChange:return"OpenChange";case e.RealtimeTags.OpenChangePct:return"OpenChangePct";case e.RealtimeTags.LastTradedAt:return"LastTradedAt";case e.RealtimeTags.AdjustMode:return"AdjustMode";case e.RealtimeTags.HistFieldsMode:return"HistFieldsMode";case e.RealtimeTags.NoiiFlag:return"NoiiFlag";case e.RealtimeTags.NoiiBid:return"NoiiBid";case e.RealtimeTags.NoiiAsk:return"NoiiAsk";case e.RealtimeTags.NoiiBidSize:return"NoiiBidSize";case e.RealtimeTags.NoiiAskSize:return"NoiiAskSize";case e.RealtimeTags.OrderbookMoves:return"OrderbookMoves";case e.RealtimeTags.TradeMoves:return"TradeMoves";case e.RealtimeTags.UsTime:return"UsTime";case e.RealtimeTags.MsTime:return"MsTime";case e.RealtimeTags.Last5MinsAgo:return"Last5MinsAgo";case e.RealtimeTags.Language:return"Language";case e.RealtimeTags.SimplifiedJson:return"SimplifiedJson";case e.RealtimeTags.ClientTheme:return"ClientTheme";case e.RealtimeTags.ExchInstrType:return"ExchInstrType";case e.RealtimeTags.FileName:return"FileName";case e.RealtimeTags.PingResolution:return"PingResolution";case e.RealtimeTags.PingSource:return"PingSource";case e.RealtimeTags.PingData:return"PingData";case e.RealtimeTags.CheckpointPhase1:return"CheckpointPhase1";case e.RealtimeTags.CheckpointPhase2:return"CheckpointPhase2";case e.RealtimeTags.CheckpointPhase3:return"CheckpointPhase3";case e.RealtimeTags.SetupTimezone:return"SetupTimezone";case e.RealtimeTags.SpoolSourceProcess:return"SpoolSourceProcess";case e.RealtimeTags.SpoolSourceMachine:return"SpoolSourceMachine";case e.RealtimeTags.CouponRate:return"CouponRate";case e.RealtimeTags.CouponsPerYear:return"CouponsPerYear";case e.RealtimeTags.BidYield:return"BidYield";case e.RealtimeTags.AskYield:return"AskYield";case e.RealtimeTags.RecommendationType:return"RecommendationType";case e.RealtimeTags.SearchEmptyTag:return"SearchEmptyTag";case e.RealtimeTags.AverageDailyVolume:return"AverageDailyVolume";case e.RealtimeTags.DayCountConvention:return"DayCountConvention";case e.RealtimeTags.BondReferenceRate:return"BondReferenceRate";case e.RealtimeTags.BondFaceValue:return"BondFaceValue";case e.RealtimeTags.BondTrusteeCompany:return"BondTrusteeCompany";case e.RealtimeTags.BondPayingCompany:return"BondPayingCompany";case e.RealtimeTags.BondIssueType:return"BondIssueType";case e.RealtimeTags.BondDirtyPrice:return"BondDirtyPrice";case e.RealtimeTags.BondCouponReferenceFeed:return"BondCouponReferenceFeed";case e.RealtimeTags.BondCouponReferenceSymbol:return"BondCouponReferenceSymbol";case e.RealtimeTags.BondCouponSpread:return"BondCouponSpread";case e.RealtimeTags.BondOption:return"BondOption";case e.RealtimeTags.BondNextPutDate:return"BondNextPutDate";case e.RealtimeTags.BondNextCallDate:return"BondNextCallDate";case e.RealtimeTags.BondNextCouponAdjustmentDate:return"BondNextCouponAdjustmentDate";case e.RealtimeTags.BondRedemptionPrice:return"BondRedemptionPrice";case e.RealtimeTags.TradeSizeInitial:return"TradeSizeInitial";case e.RealtimeTags.TradeSizeIncrement:return"TradeSizeIncrement";case e.RealtimeTags.NumSettlementDays:return"NumSettlementDays";case e.RealtimeTags.PriceType:return"PriceType";case e.RealtimeTags.IssuerISIN:return"IssuerISIN";case e.RealtimeTags.CountryOfIncorporation:return"CountryOfIncorporation";case e.RealtimeTags.InfrontYield:return"InfrontYield";case e.RealtimeTags.InfrontBidYield:return"InfrontBidYield";case e.RealtimeTags.InfrontAskYield:return"InfrontAskYield";case e.RealtimeTags.InfrontYYield:return"InfrontYYield";case e.RealtimeTags.InfrontISpread:return"InfrontISpread";case e.RealtimeTags.InfrontGSpread:return"InfrontGSpread";case e.RealtimeTags.InfrontZSpread:return"InfrontZSpread";case e.RealtimeTags.InfrontYieldChange:return"InfrontYieldChange";case e.RealtimeDateTime.Date:return"Date";case e.RealtimeDateTime.TradeTime:return"TradeTime";case e.RealtimeDateTime.ActualTradeDate:return"ActualTradeDate";case e.RealtimeDateTime.ActualTradeTime:return"ActualTradeTime";case e.RealtimeDateTime.DivDate:return"DivDate";case e.RealtimeDateTime.IssueDate:return"IssueDate";case e.RealtimeDateTime.AdjustDate:return"AdjustDate";case e.RealtimeDateTime.NewsExpiryDate:return"NewsExpiryDate";case e.RealtimeDateTime.NewsExpiryTime:return"NewsExpiryTime";case e.RealtimeDateTime.NewsAlertTime:return"NewsAlertTime";case e.RealtimeDateTime.LAST_TRADE_DATE:return"LAST_TRADE_DATE";case e.RealtimeDateTime.LAST_TRADE_DATE_DIV:return"LAST_TRADE_DATE_DIV";case e.RealtimeDateTime.TradeDate:return"TradeDate";case e.RealtimeDateTime.reportDate:return"reportDate";case e.RealtimeDateTime.UsTime:return"UsTime";case e.RealtimeDateTime.MsTime:return"MsTime";case e.RealtimeDateTime.BidTime:return"BidTime";case e.RealtimeDateTime.AskTime:return"AskTime";case e.RealtimeDateTime.StartOfIndexPeriod:return"StartOfIndexPeriod";case e.RealtimeDateTime.EndOfIndexPeriod:return"EndOfIndexPeriod";case e.RealtimeDateTime.MaturityDate:return"MaturityDate";case e.RealtimeDateTime.FirstCouponDate:return"FirstCouponDate";case e.RealtimeDateTime.NextCouponDate:return"NextCouponDate";case e.RealtimeDateTime.BondFixingDate:return"BondFixingDate";case e.RealtimeDateTime.EstimatesReportedDate:return"EstimatesReportedDate";case e.RealtimeDateTime.StartDateEstimate:return"StartDateEstimate";case e.RealtimeDateTime.EndDateEstimate:return"EndDateEstimate";case e.RealtimeDateTime.StartDateReported:return"StartDateReported";case e.RealtimeDateTime.EndDateReported:return"EndDateReported";case e.TickSizeTags.Id:return"TickId";case e.TickSizeTags.ToPrice:return"TickToPrice";case e.TickSizeTags.TickSize:return"TickSize";case e.NewsTags.Headline:return"Headline";case e.NewsTags.Id:return"Id";case e.NewsTags.SymbolFeed:return"SymbolFeed";case e.NewsTags.Symbol:return"Symbol";case e.NewsTags.Text:return"Text";case e.NewsTags.StoryNu:return"StoryNu";case e.NewsTags.Isin:return"Isin";case e.NewsTags.FgColor:return"FgColor";case e.NewsTags.BgColor:return"BgColor";case e.NewsTags.StoryURL:return"StoryURL";case e.NewsTags.Flash:return"Flash";case e.NewsTags.Category:return"Category";case e.NewsTags.PNAC:return"PNAC";case e.NewsTags.Flags:return"Flags";case e.NewsTags.AlertType:return"AlertType";case e.NewsTags.AlertText:return"AlertText";case e.NewsTags.Topic:return"Topic";case e.NewsTags.Industry:return"Industry";case e.NewsTags.Country:return"Country";case e.NewsTags.ProductCode:return"ProductCode";case e.NewsTags.MoneyCode:return"MoneyCode";case e.NewsTags.StatisticsCode:return"StatisticsCode";case e.NewsTags.GovernmentCode:return"GovernmentCode";case e.NewsTags.Author:return"Author";case e.NewsTags.NewsEnd:return"NewsEnd";case e.NewsTags.StreamingId:return"StreamingId";case e.AuctionTags.AuctionTime:return"AuctionTime";case e.AuctionTags.AuctionState:return"AuctionState";case e.AuctionTags.Auction1Volume:return"Auction1Volume";case e.AuctionTags.Auction1Price:return"Auction1Price";case e.AuctionTags.Auction2Volume:return"Auction2Volume";case e.AuctionTags.Auction2Price:return"Auction2Price";case e.AuctionTags.Auction3Volume:return"Auction3Volume";case e.AuctionTags.Auction3Price:return"Auction3Price";case e.AuctionTags.AuctionType:return"AuctionType";case e.RealtimeFundTags.PortfolioManager:return"PortfolioManager";case e.RealtimeFundTags.IncomeType:return"IncomeType";case e.RealtimeFundTags.TopHolding:return"TopHolding";case e.RealtimeFundTags.ProspectiveBookValueYield:return"ProspectiveBookValueYield";case e.RealtimeFundTags.ProspectiveDividendYield:return"ProspectiveDividendYield";case e.RealtimeFundTags.TransferAgents:return"TransferAgents";case e.RealtimeFundTags.IsLeverageFund:return"IsLeverageFund";case e.RealtimeFundTags.HistoricDividendYield:return"HistoricDividendYield";case e.RealtimeFundTags.Alpha12M:return"Alpha12M";case e.RealtimeFundTags.Beta12M:return"Beta12M";case e.RealtimeFundTags.TrackingError12M:return"TrackingError12M";case e.RealtimeFundTags.TreynorRatio12M:return"TreynorRatio12M";case e.RealtimeFundTags.InformationRatio12M:return"InformationRatio12M";case e.RealtimeFundTags.AnalystRating:return"AnalystRating";case e.RealtimeFundTags.SharpeRatio:return"SharpeRatio";case e.RealtimeFundTags.AnnualizedTotal3Year:return"AnnualizedTotal3Year";case e.RealtimeFundTags.AnnualizedTotal5Year:return"AnnualizedTotal5Year";case e.RealtimeFundTags.MorningstarRefIndex:return"MorningstarRefIndex";case e.RealtimeFundTags.ReferenceFeed:return"ReferenceFeed";case e.RealtimeFundTags.ReferenceSymbol:return"ReferenceSymbol";case e.RealtimeFundTags.SustainabilityRating:return"SustainabilityRating";case e.RealtimeFundTags.SustainabilityRatingDate:return"SustainabilityRatingDate";case e.MwsRealtimeTags.LastTradedAt:return"LastTradedAt";case e.MwsRealtimeTags.Time:return"Time";case e.MwsRealtimeTags.LastTradeDate:return"LastTradeDate";case e.MwsRealtimeTags.SymbolType:return"SymbolType";case e.MwsRealtimeTags.SymbolSubType:return"SymbolSubType";case e.PerformanceTags.LAST_1W:return"LAST_1W";case e.PerformanceTags.LAST_1M:return"LAST_1M";case e.PerformanceTags.LAST_3M:return"LAST_3M";case e.PerformanceTags.LAST_6M:return"LAST_6M";case e.PerformanceTags.LAST_1Y:return"LAST_1Y";case e.PerformanceTags.LAST_SOW:return"LAST_SOW";case e.PerformanceTags.LAST_SOM:return"LAST_SOM";case e.PerformanceTags.LAST_SOY:return"LAST_SOY";case e.PerformanceTags.LAST_TRADE:return"LAST_TRADE";case e.PerformanceTags.HIGH_1W:return"HIGH_1W";case e.PerformanceTags.HIGH_1M:return"HIGH_1M";case e.PerformanceTags.HIGH_3M:return"HIGH_3M";case e.PerformanceTags.HIGH_6M:return"HIGH_6M";case e.PerformanceTags.HIGH_1Y:return"HIGH_1Y";case e.PerformanceTags.LOW_1W:return"LOW_1W";case e.PerformanceTags.LOW_1M:return"LOW_1M";case e.PerformanceTags.LOW_3M:return"LOW_3M";case e.PerformanceTags.LOW_6M:return"LOW_6M";case e.PerformanceTags.LOW_1Y:return"LOW_1Y";case e.PerformanceTags.LAST_2Y:return"LAST_2Y";case e.PerformanceTags.LAST_3Y:return"LAST_3Y";case e.PerformanceTags.LAST_5Y:return"LAST_5Y";case e.PerformanceTags.HIGH_2Y:return"HIGH_2Y";case e.PerformanceTags.HIGH_3Y:return"HIGH_3Y";case e.PerformanceTags.HIGH_5Y:return"HIGH_5Y";case e.PerformanceTags.LOW_2Y:return"LOW_2Y";case e.PerformanceTags.LOW_3Y:return"LOW_3Y";case e.PerformanceTags.LOW_5Y:return"LOW_5Y";case e.PerformanceTags.HIGH_SOW:return"HIGH_SOW";case e.PerformanceTags.HIGH_SOM:return"HIGH_SOM";case e.PerformanceTags.HIGH_SOY:return"HIGH_SOY";case e.PerformanceTags.LOW_SOW:return"LOW_SOW";case e.PerformanceTags.LOW_SOM:return"LOW_SOM";case e.PerformanceTags.LOW_SOY:return"LOW_SOY";case e.PerformanceTags.VOL_1W:return"VOL_1W";case e.PerformanceTags.VOL_1M:return"VOL_1M";case e.PerformanceTags.VOL_3M:return"VOL_3M";case e.PerformanceTags.VOL_6M:return"VOL_6M";case e.PerformanceTags.VOL_1Y:return"VOL_1Y";case e.PerformanceTags.VOL_2Y:return"VOL_2Y";case e.PerformanceTags.VOL_3Y:return"VOL_3Y";case e.PerformanceTags.VOL_5Y:return"VOL_5Y";case e.PerformanceTags.VOL_SOW:return"VOL_SOW";case e.PerformanceTags.VOL_SOM:return"VOL_SOM";case e.PerformanceTags.VOL_SOY:return"VOL_SOY";case e.PerformanceTags.DAYCOUNT_1W:return"DAYCOUNT_1W";case e.PerformanceTags.DAYCOUNT_1M:return"DAYCOUNT_1M";case e.PerformanceTags.DAYCOUNT_3M:return"DAYCOUNT_3M";case e.PerformanceTags.DAYCOUNT_6M:return"DAYCOUNT_6M";case e.PerformanceTags.DAYCOUNT_1Y:return"DAYCOUNT_1Y";case e.PerformanceTags.DAYCOUNT_2Y:return"DAYCOUNT_2Y";case e.PerformanceTags.DAYCOUNT_3Y:return"DAYCOUNT_3Y";case e.PerformanceTags.DAYCOUNT_5Y:return"DAYCOUNT_5Y";case e.PerformanceTags.DAYCOUNT_SOW:return"DAYCOUNT_SOW";case e.PerformanceTags.DAYCOUNT_SOM:return"DAYCOUNT_SOM";case e.PerformanceTags.DAYCOUNT_SOY:return"DAYCOUNT_SOY";case e.PerformanceTags.YIELD_1W:return"YIELD_1W";case e.PerformanceTags.YIELD_1M:return"YIELD_1M";case e.PerformanceTags.YIELD_3M:return"YIELD_3M";case e.PerformanceTags.YIELD_6M:return"YIELD_6M";case e.PerformanceTags.YIELD_1Y:return"YIELD_1Y";case e.PerformanceTags.YIELD_2Y:return"YIELD_2Y";case e.PerformanceTags.YIELD_3Y:return"YIELD_3Y";case e.PerformanceTags.YIELD_5Y:return"YIELD_5Y";case e.PerformanceTags.YIELD_SOW:return"YIELD_SOW";case e.PerformanceTags.YIELD_SOM:return"YIELD_SOM";case e.PerformanceTags.YIELD_SOY:return"YIELD_SOY";case e.PerformanceTags.RSI14_GAIN:return"RSI14_GAIN";case e.PerformanceTags.RSI14_LOSS:return"RSI14_LOSS";case e.PerformanceTags.RSI14_PERIODS:return"RSI14_PERIODS";case e.PerformanceTags.LAST_1W_DIV:return"LAST_1W_DIV";case e.PerformanceTags.LAST_1M_DIV:return"LAST_1M_DIV";case e.PerformanceTags.LAST_3M_DIV:return"LAST_3M_DIV";case e.PerformanceTags.LAST_6M_DIV:return"LAST_6M_DIV";case e.PerformanceTags.LAST_1Y_DIV:return"LAST_1Y_DIV";case e.PerformanceTags.LAST_SOW_DIV:return"LAST_SOW_DIV";case e.PerformanceTags.LAST_SOM_DIV:return"LAST_SOM_DIV";case e.PerformanceTags.LAST_SOY_DIV:return"LAST_SOY_DIV";case e.PerformanceTags.LAST_TRADE_DIV:return"LAST_TRADE_DIV";case e.PerformanceTags.HIGH_1W_DIV:return"HIGH_1W_DIV";case e.PerformanceTags.HIGH_1M_DIV:return"HIGH_1M_DIV";case e.PerformanceTags.HIGH_3M_DIV:return"HIGH_3M_DIV";case e.PerformanceTags.HIGH_6M_DIV:return"HIGH_6M_DIV";case e.PerformanceTags.HIGH_1Y_DIV:return"HIGH_1Y_DIV";case e.PerformanceTags.LOW_1W_DIV:return"LOW_1W_DIV";case e.PerformanceTags.LOW_1M_DIV:return"LOW_1M_DIV";case e.PerformanceTags.LOW_3M_DIV:return"LOW_3M_DIV";case e.PerformanceTags.LOW_6M_DIV:return"LOW_6M_DIV";case e.PerformanceTags.LOW_1Y_DIV:return"LOW_1Y_DIV";case e.PerformanceTags.LAST_2Y_DIV:return"LAST_2Y_DIV";case e.PerformanceTags.LAST_3Y_DIV:return"LAST_3Y_DIV";case e.PerformanceTags.LAST_5Y_DIV:return"LAST_5Y_DIV";case e.PerformanceTags.HIGH_2Y_DIV:return"HIGH_2Y_DIV";case e.PerformanceTags.HIGH_3Y_DIV:return"HIGH_3Y_DIV";case e.PerformanceTags.HIGH_5Y_DIV:return"HIGH_5Y_DIV";case e.PerformanceTags.LOW_2Y_DIV:return"LOW_2Y_DIV";case e.PerformanceTags.LOW_3Y_DIV:return"LOW_3Y_DIV";case e.PerformanceTags.LOW_5Y_DIV:return"LOW_5Y_DIV";case e.PerformanceTags.HIGH_SOW_DIV:return"HIGH_SOW_DIV";case e.PerformanceTags.HIGH_SOM_DIV:return"HIGH_SOM_DIV";case e.PerformanceTags.HIGH_SOY_DIV:return"HIGH_SOY_DIV";case e.PerformanceTags.LOW_SOW_DIV:return"LOW_SOW_DIV";case e.PerformanceTags.LOW_SOM_DIV:return"LOW_SOM_DIV";case e.PerformanceTags.LOW_SOY_DIV:return"LOW_SOY_DIV";case e.PerformanceTags.VOL_1W_DIV:return"VOL_1W_DIV";case e.PerformanceTags.VOL_1M_DIV:return"VOL_1M_DIV";case e.PerformanceTags.VOL_3M_DIV:return"VOL_3M_DIV";case e.PerformanceTags.VOL_6M_DIV:return"VOL_6M_DIV";case e.PerformanceTags.VOL_1Y_DIV:return"VOL_1Y_DIV";case e.PerformanceTags.VOL_2Y_DIV:return"VOL_2Y_DIV";case e.PerformanceTags.VOL_3Y_DIV:return"VOL_3Y_DIV";case e.PerformanceTags.VOL_5Y_DIV:return"VOL_5Y_DIV";case e.PerformanceTags.VOL_SOW_DIV:return"VOL_SOW_DIV";case e.PerformanceTags.VOL_SOM_DIV:return"VOL_SOM_DIV";case e.PerformanceTags.VOL_SOY_DIV:return"VOL_SOY_DIV";case e.PerformanceTags.RSI14_GAIN_DIV:return"RSI14_GAIN_DIV";case e.PerformanceTags.RSI14_LOSS_DIV:return"RSI14_LOSS_DIV";case e.PerformanceTags.RSI14_PERIODS_DIV:return"RSI14_PERIODS_DIV";case e.BrokerStatTags.broker:return"broker";case e.BrokerStatTags.descr:return"descr";case e.BrokerStatTags.someUnknownFlag:return"someUnknownFlag";case e.BrokerStatTags.nuBuys:return"nuBuys";case e.BrokerStatTags.nuSells:return"nuSells";case e.BrokerStatTags.nuInternal:return"nuInternal";case e.BrokerStatTags.buyVolume:return"buyVolume";case e.BrokerStatTags.sellVolume:return"sellVolume";case e.BrokerStatTags.intVolume:return"intVolume";case e.BrokerStatTags.buyTurnover:return"buyTurnover";case e.BrokerStatTags.sellTurnover:return"sellTurnover";case e.BrokerStatTags.intTurnover:return"intTurnover";case e.BrokerStatTags.openBuy:return"openBuy";case e.BrokerStatTags.highBuy:return"highBuy";case e.BrokerStatTags.lowBuy:return"lowBuy";case e.BrokerStatTags.lastBuy:return"lastBuy";case e.BrokerStatTags.openSell:return"openSell";case e.BrokerStatTags.highSell:return"highSell";case e.BrokerStatTags.lowSell:return"lowSell";case e.BrokerStatTags.lastSell:return"lastSell";case e.BrokerStatTags.openInt:return"openInt";case e.BrokerStatTags.highInt:return"highInt";case e.BrokerStatTags.lowInt:return"lowInt";case e.BrokerStatTags.lastInt:return"lastInt";case e.BrokerStatTags.BrokerId:return"BrokerId";case e.BrokerStatTags.BuyerId:return"BuyerId";case e.BrokerStatTags.SellerId:return"SellerId";case e.BrokerStatTags.accumulateFlag:return"accumulateFlag";case e.BrokerStatTags.nuHitBid:return"nuHitBid";case e.BrokerStatTags.hitBidVolume:return"hitBidVolume";case e.BrokerStatTags.hitBidTurnover:return"hitBidTurnover";case e.BrokerStatTags.nuHitAsk:return"nuHitAsk";case e.BrokerStatTags.hitAskVolume:return"hitAskVolume";case e.BrokerStatTags.hitAskTurnover:return"hitAskTurnover";case e.ForwardCurve.Availability:return"Availability";case e.ForwardCurve.Month1Bid:return"Month1Bid";case e.ForwardCurve.Month1Ask:return"Month1Ask";case e.ForwardCurve.Month2Bid:return"Month2Bid";case e.ForwardCurve.Month2Ask:return"Month2Ask";case e.ForwardCurve.Month3Bid:return"Month3Bid";case e.ForwardCurve.Month3Ask:return"Month3Ask";case e.ForwardCurve.Month4Bid:return"Month4Bid";case e.ForwardCurve.Month4Ask:return"Month4Ask";case e.ForwardCurve.Month5Bid:return"Month5Bid";case e.ForwardCurve.Month5Ask:return"Month5Ask";case e.ForwardCurve.Month6Bid:return"Month6Bid";case e.ForwardCurve.Month6Ask:return"Month6Ask";case e.ForwardCurve.ValueDate:return"ValueDate";case e.CompanyTags.id:return"CompanyId";case e.CompanyTags.descr:return"CompanyDescr";case e.CompanyTags.capital:return"CompanyCapital";case e.CompanyTags.shortTermDebt:return"CompanyShortTermDebt";case e.CompanyTags.longTermDebt:return"CompanyLongTermDebt";case e.CompanyTags.revenue:return"CompanyRevenue";case e.CompanyTags.earnings:return"CompanyEarnings";case e.CompanyTags.url:return"CompanyUrl";case e.CompanyTags.peerFeed:return"CompanyPeerFeed";case e.CompanyTags.peerSymbol:return"CompanyPeerSymbol";case e.CompanyTags.name:return"CompanyName";case e.CompanyTags.source:return"CompanySource";case e.CompanyTags.beta_1Y:return"CompanyBeta_1Y";case e.CompanyTags.indexFeed:return"CompanyIndexFeed";case e.CompanyTags.indexSymbol:return"CompanyIndexSymbol";case e.CompanyTags.enterpriseValue:return"CompanyEnterpriseValue";case e.CompanyTags.enterpriseCurrency:return"CompanyEnterpriseCurrency";case e.CompanyTags.infinancialsSectorCode:return"CompanyInfinancialsSectorCode";case e.CompanyTags.primaryShares:return"CompanyPrimaryShares";case e.CompanyTags.secondaryShares:return"CompanySecondaryShares";case e.CompanyTags.CEO:return"CompanyCEO";case e.CompanyTags.chairman:return"CompanyChairman";case e.FundamentalTags.Source:return"FundamentalSource";case e.FundamentalTags.Item:return"FundamentalItem";case e.FundamentalTags.Period:return"FundamentalPeriod";case e.FundamentalTags.PeriodDisplay:return"FundamentalPeriodDisplay";case e.FundamentalTags.Actual:return"FundamentalActual";case e.FundamentalTags.EstimateMean:return"FundamentalEstimateMean";case e.FundamentalTags.EstimateMedian:return"FundamentalEstimateMedian";case e.FundamentalTags.EstimateHigh:return"FundamentalEstimateHigh";case e.FundamentalTags.EstimateLow:return"FundamentalEstimateLow";case e.FundamentalTags.EstimateCount:return"FundamentalEstimateCount";case e.FundamentalTags.EstimateDeviation:return"FundamentalEstimateDeviation";case e.RealtimeCalculatedHistoryTags.MovingAverage:return"MovingAverage";case e.RealtimeCalculatedHistoryTags.ExponentialMovingAverage:return"ExponentialMovingAverage";case e.RealtimeCalculatedHistoryTags.VolumeWeigtehAveragePrice:return"VolumeWeigtehAveragePrice";case e.RealtimeCalculatedHistoryTags.AverageDailyVolume:return"AverageDailyVolume";case e.RealtimeCalculatedHistoryTags.StdDevOfDailyVolume:return"StdDevOfDailyVolume";case e.RealtimeCalculatedHistoryTags.AverageDailyExchangeVolume:return"AverageDailyExchangeVolume";case e.RealtimeCalculatedHistoryTags.StdDevOfExchangeVolume:return"StdDevOfExchangeVolume";case e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastPrice:return"LinearRegressionSlopeOfLastPrice";case e.RealtimeCalculatedHistoryTags.StdDevOfLastPrice:return"StdDevOfLastPrice";case e.RealtimeCalculatedHistoryTags.SimpleAvgOfLastPrice:return"SimpleAvgOfLastPrice";case e.RealtimeCalculatedHistoryTags.StdDevOfDailyChange:return"StdDevOfDailyChange";case e.RealtimeCalculatedHistoryTags.AvgDailyChange:return"AvgDailyChange";case e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastStderr:return"LinearRegressionSlopeOfLastStderr";case e.RealtimeCalculatedHistoryTags.LinearRegressionSlopeOfLastPredict:return"LinearRegressionSlopeOfLastPredict";case e.RealtimeCalculatedHistoryTags.LastVolatility:return"LastVolatility";case e.RealtimeCalculatedHistoryTags.LnDeltaCount:return"LnDeltaCount";case e.RealtimeCalculatedHistoryTags.LnDeltaSum:return"LnDeltaSum";case e.RealtimeCalculatedHistoryTags.LnDeltaSquareSum:return"LnDeltaSquareSum";case e.RealtimeCalculatedHistoryTags.AvgTrueRange:return"AvgTrueRange";case e.RealtimeCalculatedHistoryTags.AvgBid:return"AvgBid";case e.RealtimeCalculatedHistoryTags.AvgAsk:return"AvgAsk";case e.RealtimeCalculatedHistoryTags.AvgTurnover:return"AvgTurnover";case e.RealtimeCalculatedHistoryTags.AvgDivYieldFactor:return"AvgDivYieldFactor";case e.RealtimeCalculatedHistoryTags.CalculatedHistoryType:return"CalculatedHistoryType";case e.RealtimeCalculatedHistoryTags.CalculatedHistoryParam:return"CalculatedHistoryParam";case e.RealtimeCalculatedHistoryTags.CalculatedHistoryValue:return"CalculatedHistoryValue";default:return"<"+n.toString(16)+">"}case e.TagSet.Chat:return"<"+n.toString(16)+">";case e.TagSet.OrderEntry:switch(n){case e.TradingTag.Separator:return p;case e.TradingTag.CustomerId:return"CustomerId";case e.TradingTag.Login:return"Login";case e.TradingTag.Password:return"Password";case e.TradingTag.Pin:return"Pin";case e.TradingTag.RequestId:return"RequestId";case e.TradingTag.LoginToken:return"LoginToken";case e.TradingTag.LoginTokenType:return"LoginTokenType";case e.TradingTag.LoginSignedToken:return"LoginSignedToken";case e.TradingTag.LoginChallenge:return"LoginChallenge";case e.TradingTag.CustomerAdditionalId:return"Pin";case e.TradingTag.Comment:return"Comment";case e.TradingTag.ServerProperties:return"ServerProperties";case e.TradingTag.ServerProperties2:return"ServerProperties2";case e.TradingTag.ServerProperties3:return"ServerProperties3";case e.TradingTag.ServerProperties4:return"ServerProperties4";case e.TradingTag.UserProperties:return"UserProperties";case e.TradingTag.Subscribe:return"Subscribe";case e.TradingTag.Unsubscribe:return"Unsubscribe";case e.TradingTag.Ask:return"Ask";case e.TradingTag.Bid:return"Bid";case e.TradingTag.OpenVolume:return"OpenVolume";case e.TradingTag.OrderType:return"OrderType";case e.TradingTag.Portfolio:return"Portfolio";case e.TradingTag.SubMarket:return"SubMarket";case e.TradingTag.Price:return"Price";case e.TradingTag.AveragePrice:return"AveragePrice";case e.TradingTag.ValidDate:return"ValidDate";case e.TradingTag.Volume:return"Volume";case e.TradingTag.ExpiryDate:return"ExpiryDate";case e.TradingTag.AutoActivate:return"AutoActivate";case e.TradingTag.AutoDelete:return"AutoDelete";case e.TradingTag.CustomerReference:return"CustomerReference";case e.TradingTag.BrokerClientId:return"BrokerClientId";case e.TradingTag.Ecn:return"Ecn";case e.TradingTag.Currency:return"Currency";case e.TradingTag.Date:return"Date";case e.TradingTag.Time:return"Time";case e.TradingTag.TimeUs:return"TimeUs";case e.TradingTag.ExchInstrId:return"ExchInstrId";case e.TradingTag.Isin:return"Isin";case e.TradingTag.Market:return"Market";case e.TradingTag.Sedol:return"Sedol";case e.TradingTag.StrikePrice:return"Strike";case e.TradingTag.Underlying:return"Underlying";case e.TradingTag.Valoren:return"Valoren";case e.TradingTag.InstrType:return"InstrType";case e.TradingTag.InstrSubType:return"InstrSubType";case e.TradingTag.Symbol:return"Symbol";case e.TradingTag.InstrDescr:return"InstrDescr";case e.TradingTag.Mic:return"Mic";case e.TradingTag.ExecutionMarket:return"ExecutionMarket";case e.TradingTag.TradeCustomNu:return"CustomNu";case e.TradingTag.TradeCustomData:return"CustomData";case e.TradingTag.LastTradeDate:return"LastTradeDate";case e.TradingTag.LastTrade:return"LastTrade";case e.TradingTag.SharesPerOption:return"SharesPerOption";case e.TradingTag.Language:return"Language";case e.TradingTag.UnderlyingBase:return"UnderBase";case e.TradingTag.UnderlyingFeed:return"UnderlyingFeed";case e.TradingTag.UnderlyingIsin:return"UnderlyingIsin";case e.TradingTag.ComponentCode:return"ComponentCode";case e.TradingTag.ChangeHist:return"ChangeHist";case e.TradingTag.FailCode:return"FailCode";case e.TradingTag.FailDescription:return"FailDescription";case e.TradingTag.OrderStatus:return"OrderStatus";case e.TradingTag.OrderId:return"OrderId";case e.TradingTag.VolumeFilled:return"VolumeFilled";case e.TradingTag.AccFilled:return"AccFilled";case e.TradingTag.AccTradedVolume:return"AccTradedVolume";case e.TradingTag.AccVolume:return"AccVolume";case e.TradingTag.OrderStatusText:return"OrderStatusText";case e.TradingTag.OrderStatusNew:return"OrderStatusNew";case e.TradingTag.OrderFailCode:return"OrderFailCode";case e.TradingTag.OrderFailDescription:return"OrderFailDescription";case e.TradingTag.FailEventId:return"FailEventId";case e.TradingTag.DisplayPortfolio:return"DisplayPortfolio";case e.TradingTag.DefaultPortfolio:return"DefaultPortfolio";case e.TradingTag.OwnerDesk:return"OwnerDesk";case e.TradingTag.TransactionId:return"TransactionId";case e.TradingTag.Accrued:return"Accrued";case e.TradingTag.Buyer:return"Buyer";case e.TradingTag.Seller:return"Seller";case e.TradingTag.BuyOrSell:return"BuyOrSell";case e.TradingTag.Client:return"Client";case e.TradingTag.Counterpart:return"Counterpart";case e.TradingTag.ExchOrderId:return"ExchOrderId";case e.TradingTag.ExchTime:return"ExchTime";case e.TradingTag.ExchTradeId:return"ExchTradeId";case e.TradingTag.Fee:return"Fee";case e.TradingTag.FxRate:return"FxRate";case e.TradingTag.Invested:return"Invested";case e.TradingTag.SettleDate:return"SettleDate";case e.TradingTag.TradeDate:return"TradeDate";case e.TradingTag.ExchTradeId2:return"ExchTradeId2";case e.TradingTag.PositionValue:return"PositionValue";case e.TradingTag.PositionPrice:return"PositionPrice";case e.TradingTag.CustomMoneyKindId:return"CustomMoneyKindId";case e.TradingTag.CustomMoneyKindData:return"CustomMoneyKindData";case e.TradingTag.CustomMoneyKindType:return"CustomMoneyKindType";case e.TradingTag.PortfolioState:return"PortfolioState";case e.TradingTag.PortfolioStateDescription:return"PortfolioStateDescription";case e.TradingTag.StopOutState:return"StopOutState";case e.TradingTag.LoanToValueRatio:return"LoanToValueRatio";case e.TradingTag.Multiplier:return"Multiplier";case e.TradingTag.Collateral:return"Collateral";case e.TradingTag.BaseInvested:return"BaseInvested";case e.TradingTag.ProfitLoss:return"ProfitLoss";case e.TradingTag.BaseCurrency:return"BaseCurrency";case e.TradingTag.OriginalCurrency:return"OriginalCurrency";case e.TradingTag.BaseResult:return"BaseResult";case e.TradingTag.Shortable:return"Shortable";case e.TradingTag.RealizedResult:case e.TradingTag.RiskData:return"RealizedResult";case e.TradingTag.DeletedTrade:return"DeletedTrade";case e.TradingTag.ParentId:return"ParentId";case e.TradingTag.TradeId:return"TradeId";case e.TradingTag.TradeTime:return"TradeTime";case e.TradingTag.TradeTimeUs:return"TradeTimeUs";case e.TradingTag.VerifiedTrade:return"VerifiedTrade";case e.TradingTag.PortfolioType:return"PortfolioType";case e.TradingTag.PortfolioDescr:return"PortfolioDescr";case e.TradingTag.PositionType:return"PositionType";case e.TradingTag.LoginId:return"LoginId";case e.TradingTag.User:return"User";case e.TradingTag.ChangeInAccrued:return"ChangeInAccrued";case e.TradingTag.ChangeInVolume:return"ChangeInVolume";case e.TradingTag.ChangeInInvested:return"ChangeInInvested";case e.TradingTag.Feed:return"Feed";case e.TradingTag.PacketType:return"PacketType";case e.TradingTag.TradingPower:return"TradingPower";case e.TradingTag.TradingPowerStatus:return"TradingPowerStatus";case e.TradingTag.MoneyKind:return"MoneyKind";case e.TradingTag.StartDate:return"StartDate";case e.TradingTag.EndDate:return"EndDate";case e.TradingTag.IsInternalUser:return"IsInternalUser";case e.TradingTag.CreateDate:return"CreateDate";case e.TradingTag.ChangeDate:return"ChangeDate";case e.TradingTag.ChangeTime:return"ChangeTime";case e.TradingTag.ChangeTimeUs:return"ChangeTimeUs";case e.TradingTag.LimitPerDay:return"LimitPerDay";case e.TradingTag.LimitPerOrder:return"LimitPerOrder";case e.TradingTag.SafetyLimitOverride:return"SafetyLimitOverride";case e.TradingTag.CustomNu:return"CustomNu";case e.TradingTag.CustomLabel:return"CustomLabel";case e.TradingTag.CustomForOrderTypes:return"CustomForOrderTypes";case e.TradingTag.CustomDisplay:return"CustomDisplay";case e.TradingTag.CustomType:return"CustomType";case e.TradingTag.CustomData:return"CustomData";case e.TradingTag.MaxValidDays:return"MaxValidDays";case e.TradingTag.MarketProperties:return"MarketProperties";case e.TradingTag.MarketProperties2:return"MarketProperties2";case e.TradingTag.BasketNameAndSerial:return"BasketNameAndSerial";case e.TradingTag.LockReport:return"LockReport";case e.TradingTag.TickFromPrice:return"TickFromPrice";case e.TradingTag.TickToPrice:return"TickToPrice";case e.TradingTag.TickSize:return"TickSize";case e.TradingTag.BloombergTicker:return"BloombergTicker";case e.TradingTag.BloombergGlobalId:return"BloombergGlobalId";case e.TradingTag.BloombergGlobalIdComposite:return"BloombergGlobalIdComposite";case e.TradingTag.PrimarySegment:return"PrimarySegment";case e.TradingTag.SecondarySegment:return"SecondarySegment";case e.TradingTag.LimitCurrency:return"LimitCurrency";case e.TradingTag.QuoteConfig:return"QuoteConfig";case e.TradingTag.DefaultOrderWarning:return"DefaultOrderWarning";case e.TradingTag.PositionNumber:return"PositionNumber";case e.TradingTag.OrderPermissionFlg:return"OrderPermissionFlg";case e.TradingTag.AlgoId:return"AlgoId";case e.TradingTag.AlgoBrokerId:return"AlgoBrokerId";case e.TradingTag.AlgoUserId:return"AlgoUserId";case e.TradingTag.AlgoLabel:return"AlgoLabel";case e.TradingTag.AlgoDescr:return"AlgoDescr";case e.TradingTag.AlgoParamId:return"AlgoParamId";case e.TradingTag.AlgoParamLabel:return"AlgoParamLabel";case e.TradingTag.AlgoParamData:return"AlgoParamData";case e.TradingTag.AlgoParamDescr:return"AlgoParamDescr";case e.TradingTag.AlgoParamMandatory:return"AlgoParamMandatory";case e.TradingTag.AlgoParamDefault:return"AlgoParamDefault";case e.TradingTag.AlgoParamType:return"AlgoParamType";case e.TradingTag.AlgoParamMaxLen:return"AlgoParamMaxLen";case e.TradingTag.AlgoParamMultiLine:return"AlgoParamMultiLine";case e.TradingTag.AlgoParamMin:return"AlgoParamMin";case e.TradingTag.AlgoParamMax:return"AlgoParamMax";case e.TradingTag.AlgoParamElement:return"AlgoParamElement";case e.TradingTag.AlgoParamFeed:return"AlgoParamFeed";case e.TradingTag.AlgoProperties:return"AlgoProperties";case e.TradingTag.AlgoParamProperty:return"AlgoParamProperty";case e.TradingTag.AlgoParamCustomNuRef:return"AlgoParamCustomNuRef";case e.TradingTag.Provider:return"Provider";case e.TradingTag.Service:return"Service";default:return"<"+n.toString(16)+">"}case e.TagSet.File:switch(n){case e.StorageTags.Separator:return"Separator";case e.StorageTags.Title:return"Title";case e.StorageTags.Description:return"Description";case e.StorageTags.Crc32:return"Crc32";case e.StorageTags.Size:return"Size";case e.StorageTags.UniqueTitleLimit:return"UniqueTitleLimit";case e.StorageTags.Category:return"Category";case e.StorageTags.Property:return"Property";case e.StorageTags.FilterCategory:return"FilterCategory";case e.StorageTags.FilterProperty:return"FilterProperty";case e.StorageTags.ExcludeCategory:return"ExcludeCategory";case e.StorageTags.UserIdentifier:return"UserIdentifier";case e.StorageTags.UserNamespace:return"UserNamespace";case e.StorageTags.CreatePolicy:return"CreatePolicy";case e.StorageTags.UniquePolicy:return"UniquePolicy";case e.StorageTags.DownloadPolicy:return"DownloadPolicy";case e.StorageTags.CheckPolicy:return"CheckPolicy";case e.StorageTags.StorageCookie:return"StorageCookie";case e.StorageTags.CreatedDate:return"CreatedDate";case e.StorageTags.CreatedTime:return"CreatedTime";case e.StorageTags.PublishDate:return"PublishDate";case e.StorageTags.PublishTime:return"PublishTime";case e.StorageTags.ExpiryDate:return"ExpiryDate";case e.StorageTags.ExpiryTime:return"ExpiryTime";case e.StorageTags.ContentId:return"ContentId";case e.StorageTags.ContentData:return"ContentData";case e.StorageTags.MultiPacket:return"MultiPacket";case e.StorageTags.ResponseCode:return"ResponseCode";case e.StorageTags.ResponseMessage:return"ResponseMessage";default:return"<"+n.toString(16)+">"}case e.TagSet.Fundamental:return"<"+n.toString(16)+">";case e.TagSet.Calendar:switch(n){case e.CalendarTags.Separator:return p;case e.CalendarTags.Symbol:return"Symbol";case e.CalendarTags.Feed:return"Feed";case e.CalendarTags.Id:return"Id";case e.CalendarTags.Text:return"Text";case e.CalendarTags.DataSource:return"DataSource";case e.CalendarTags.Date:return"Date";case e.CalendarTags.DateFrom:return"DateFrom";case e.CalendarTags.DateTo:return"DateTo";case e.CalendarTags.Time:return"Time";case e.CalendarTags.Country:return"Country";case e.CalendarTags.Region:return"Region";case e.CalendarTags.RegionCountry:return"RegionCountry";case e.CalendarTags.EventId:return"EventId";case e.CalendarTags.Category:return"Category";case e.CalendarTags.CategoryName:return"CategoryName";case e.CalendarTags.Description:return"Description";case e.CalendarTags.ResultPrevious:return"ResultPrevious";case e.CalendarTags.ResultExpected:return"ResultExpected";case e.CalendarTags.ResultActual:return"ResultActual";case e.CalendarTags.WebLink:return"WebLink";case e.CalendarTags.CountryLimitCorpEvent:return"CountryLimitCorpEvent";case e.CalendarTags.ExternId:return"ExternId";case e.CalendarTags.Type:return"Type";case e.CalendarTags.ResultUnit:return"ResultUnit";case e.CalendarTags.IsCategoryMacro:return"IsCategoryMacro";case e.CalendarTags.IsCategoryDefault:return"IsCategoryDefault";case e.CalendarTags.IsMoreDataAvail:return"IsMoreDataAvail";case e.CalendarTags.Properties:return"Properties";case e.CalendarTags.EventParentId:return"EventParentId";case e.CalendarTags.MaxItems:return"MaxItems";case e.CalendarTags.SettleDate:return"SettleDate";case e.CalendarTags.FxCurrency1:return"FxCurrency1";case e.CalendarTags.FxCurrency2:return"FxCurrency2";case e.CalendarTags.ActualFeed:return"ActualFeed";case e.CalendarTags.ActualSymbol:return"ActualSymbol";case e.CalendarTags.ExpectedFeed:return"ExpectedFeed";case e.CalendarTags.ExpectedSymbol:return"ExpectedSymbol";case e.CalendarTags.SkipDate:return"SkipDate";case e.CalendarTags.SkipCurrency:return"SkipCurrency";case e.CalendarTags.SkipDescription:return"SkipDescription";case e.CalendarTags.NextDividend:return"NextDividend";case e.CalendarTags.NextExDividendDate:return"NextExDividendDate";case e.CalendarTags.NextDividendPayDate:return"NextDividendPayDate";case e.CalendarTags.NextDividendAnnouncement:return"NextDividendAnnouncement";case e.CalendarTags.DividendCurrency:return"DividendCurrency";case e.CalendarTags.ResultRevised:return"ResultRevised";case e.CalendarTags.ResultDelta:return"ResultDelta";case e.CalendarTags.RevisedFeed:return"RevisedFeed";case e.CalendarTags.RevisedSymbol:return"RevisedSymbol";case e.CalendarTags.DeltaFeed:return"DeltaFeed";case e.CalendarTags.DeltaSymbol:return"DeltaSymbol";case e.CalendarTags.SettleDateOffset:return"SettleDateOffset";default:return"<"+n.toString(16)+">"}case e.TagSet.Alert:switch(n){case e.AlertTag.Separator:return p;case e.AlertTag.Id:return"Id";case e.AlertTag.LoginId:return"LoginId";case e.AlertTag.Type:return"Type";case e.AlertTag.Description:return"Description";case e.AlertTag.Enabled:return"Enabled";case e.AlertTag.Feed:return"Feed";case e.AlertTag.Ticker:return"Ticker";case e.AlertTag.Double:return"Double";case e.AlertTag.Int:return"Int";case e.AlertTag.DeviceId:return"DeviceId";case e.AlertTag.DeviceType:return"DeviceType";case e.AlertTag.TriggerType:return"TriggerType";case e.AlertTag.TimeoutMinutes:return"TimeoutMinutes";case e.AlertTag.RevisionIndex:return"RevisionIndex";case e.AlertTag.Comment:return"Comment";case e.AlertTag.List:return"List";case e.AlertTag.ChainName:return"ChainName";case e.AlertTag.ChainDescription:return"ChainDescription";case e.AlertTag.ChainProvider:return"ChainProvider";case e.AlertTag.InstrumentType:return"InstrumentType";case e.AlertTag.InstrumentSubtype:return"InstrumentSubtype";case e.AlertTag.TriggerDate:return"TriggerDate";case e.AlertTag.TriggerTime:return"TriggerTime";case e.AlertTag.EventId:return"EventId";case e.AlertTag.NotificationMsg:return"NotificationMsg";case e.AlertTag.EventRead:return"EventRead";case e.AlertTag.Operator:return"Operator";case e.AlertTag.UpdateType:return"UpdateType";case e.AlertTag.ActionType:return"ActionType";case e.AlertTag.Hostname:return"Hostname";case e.AlertTag.DeviceClient:return"DeviceClient";case e.AlertTag.PortfolioTitle:return"PortfolioTitle";case e.AlertTag.MarketDataField:return"MarketDataField";case e.AlertTag.PortfolioDataField:return"PortfolioDataField";default:return"<"+n.toString(16)+">"}case e.TagSet.Feedback:return"<"+n.toString(16)+">";case e.TagSet.Wire:switch(n){case e.WireTag.Separator:return p;case e.WireTag.BeginSection:return"BeginSection";case e.WireTag.EndSection:return"EndSection";case e.WireTag.Feed:return"Feed";case e.WireTag.NewsCategory:return"NewsCategory";case e.WireTag.CalendarDescription:return"CalendarDescription";case e.WireTag.CalendarSubject:return"CalendarSubject";case e.WireTag.CalendarType:return"CalendarType";case e.WireTag.CalendarFlag:return"CalendarFlag";case e.WireTag.CalendarSource:return"CalendarSource";case e.WireTag.CalendarExternalID:return"CalendarExternalID";case e.WireTag.CalendarExpected:return"CalendarExpected";case e.WireTag.CalendarPrevious:return"CalendarPrevious";case e.WireTag.CalendarActual:return"CalendarActual";case e.WireTag.CalendarNumberUnit:return"CalendarNumberUnit";case e.WireTag.MotionDetectionSubValue:return"MotionDetectionSubValue";case e.WireTag.Date:return"Date";case e.WireTag.Time:return"Time";case e.WireTag.Headline:return"Headline";case e.WireTag.NewsId:return"NewsId";case e.WireTag.NewsFlag:return"NewsFlag";case e.WireTag.NewsContentType:return"NewsContentType";case e.WireTag.Symbol:return"Symbol";case e.WireTag.Language:return"Language";case e.WireTag.MotionDetectionType:return"MotionDetectionType";case e.WireTag.MotionDetectionSubType:return"MotionDetectionSubType";case e.WireTag.MotionDetectionValue:return"MotionDetectionValue";case e.WireTag.MultiPacket:return"MultiPacket";case e.WireTag.NewsSourceId:return"NewsSourceId";case e.WireTag.NewsStoryId:return"NewsStoryId";case e.WireTag.NewsArticleId:return"NewsArticleId";case e.WireTag.PriorityValue:return"PriorityValue";case e.WireTag.EventId:return"EventId";case e.WireTag.EventScore:return"EventScore";case e.WireTag.EventType:return"EventType";case e.WireTag.EventSubType:return"EventSubType";case e.WireTag.MotionDetectionScore:return"MotionDetectionScore";case e.WireTag.NewsSigScore:return"NewsSigScore";case e.WireTag.EventAmount:return"EventAmount";case e.WireTag.Caption:return"Caption";case e.WireTag.EventArticleCount:return"EventArticleCount";case e.WireTag.BlockSeparator:return"BlockSeparator";case e.WireTag.SymbolScore:return"SymbolScore";case e.WireTag.SubscriptionId:return"SubscriptionId";case e.WireTag.FlashCount:return"FlashCount";case e.WireTag.Status:return"Status";case e.WireTag.StatusDescription:return"StatusDescription";default:return"<"+n.toString(16)+">"}default:return"TagSet not recognized"}}function n(t){switch(t){case e.TagSet.Login:return"LI";case e.TagSet.Realtime:return"RT";case e.TagSet.Chat:return"CH";case e.TagSet.OrderEntry:return"OE";case e.TagSet.File:return"FI";case e.TagSet.Fundamental:return"FU";case e.TagSet.Calendar:return"CA";case e.TagSet.FreeForm:return"FF";case e.TagSet.Communications:return"CM";case e.TagSet.RemoteSupport:return"RM";case e.TagSet.Alert:return"AL";case e.TagSet.Feedback:return"FB";case e.TagSet.Wire:return"WI";default:return"--"}}function i(t){switch(t){case e.TagSet.Login:return"Login";case e.TagSet.Realtime:return"Realtime";case e.TagSet.Chat:return"Chat";case e.TagSet.OrderEntry:return"OrderEntry";case e.TagSet.File:return"File";case e.TagSet.Fundamental:return"Fundamental";case e.TagSet.Calendar:return"Calendar";case e.TagSet.FreeForm:return"FreeForm";case e.TagSet.Communications:return"Communications";case e.TagSet.RemoteSupport:return"RemoteSupport";case e.TagSet.Alert:return"Alert";case e.TagSet.Feedback:return"Feedback";case e.TagSet.Wire:return"Wire";default:return"--"}}function r(t,n,i){switch(t){case e.TagSet.OrderEntry:switch(n.tag){case e.TradingTag.OrderType:return e.ToMws.OrderTypeToStr(n.Int(i));case e.TradingTag.OrderStatus:return e.ToMws.OrderStatusToStr(n.Int(i));default:return n.String(i)}case e.TagSet.Alert:switch(n.tag){case e.AlertTag.Type:case e.AlertTag.UpdateType:return e.ToMws.AlertTypeToStr(n.Int(i));case e.AlertTag.TriggerType:return e.ToMws.AlertTriggerTypeToStr(n.Int(i));case e.AlertTag.ActionType:return e.ToMws.AlertActionTypeToStr(n.Int(i));case e.AlertTag.Operator:return e.ToMws.AlertOperatorToStr(n.Int(i));case e.AlertTag.MarketDataField:return e.ToMws.AlertMdFieldToStr(n.Int(i));default:return n.String(i)}case e.TagSet.Wire:switch(n.tag){case e.WireTag.BeginSection:case e.WireTag.EndSection:return e.WireBlockTypeToStr(n.Int(i));default:return n.String(i)}default:return n.String(i)}}function a(t,n){switch(t){case e.TagSet.Login:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";case e.LoginRequests.Login:return"Login";case e.LoginRequests.Providers:return"Providers";case e.LoginRequests.ProviderAccess:return"ProviderAccess";case e.LoginRequests.Logout:return"Logout";case e.LoginRequests.Exchanges:return"Exchanges";case e.LoginRequests.ProvFeeds:return"ProvFeeds";case e.LoginRequests.Columns:return"Columns";case e.LoginRequests.ExternalLinks:return"ExternalLinks";case e.LoginRequests.Marketplaces:return"Marketplaces";case e.LoginRequests.TickSize:return"TickSize";case e.LoginRequests.VideoLink:return"VideoLink";case e.LoginRequests.TranslateFeed:return"TranslateFeed";case e.LoginRequests.Authentication:return"Authentication";case e.LoginRequests.IASLoginDone:return"IASLoginDone";default:return"<"+n.toString(16)+">"}case e.TagSet.Realtime:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";case e.RealtimeRequests.SymbolData:return"SymbolData";case e.RealtimeRequests.AllSymbolData:return"AllSymbolData";case e.RealtimeRequests.Symbols:return"Symbols";case e.RealtimeRequests.SymbolStatic:return"SymbolStatic";case e.RealtimeRequests.History:return"History";case e.RealtimeRequests.HistPerformance:return"HistPerformance";case e.RealtimeRequests.FindSymbol:return"FindSymbol";case e.RealtimeRequests.ChainList:return"ChainList";case e.RealtimeRequests.ChainContent:return"ChainContent";case e.RealtimeRequests.Headlines:return"Headlines";case e.RealtimeRequests.NewsStory:return"NewsStory";case e.RealtimeRequests.CompanyData:return"CompanyData";case e.RealtimeRequests.CompanySymbols:return"CompanySymbols";case e.RealtimeRequests.BrokerStat:return"BrokerStat";case e.RealtimeRequests.BrokerSymbolStat:return"BrokerSymbolStat";case e.RealtimeRequests.SymbolBrokerStat:return"SymbolBrokerStat";case e.RealtimeRequests.Trades:return"Trades";case e.RealtimeRequests.Intraday:return"Intraday";case e.RealtimeRequests.TickSize:return"TickSize";case e.RealtimeRequests.Ranking:return"Ranking";case e.RealtimeRequests.FundJsonData:return"FundJsonData";case e.RealtimeRequests.FindPortfolioSymbols:return"FindPortfolioSymbols";case e.RealtimeRequests.Fundamental:return"Fundamental";case e.RealtimeRequests.CalculatedHistory:return"CalculatedHistory";default:return"<"+n.toString(16)+">"}case e.TagSet.Chat:return"<"+n.toString(16)+">";case e.TagSet.OrderEntry:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";case e.TradingRequest.InsertOrder:return"InsertOrder";case e.TradingRequest.DeleteOrder:return"DeleteOrder";case e.TradingRequest.DeleteAllOrders:return"DeleteAllOrders";case e.TradingRequest.OrderList:return"OrderList";case e.TradingRequest.TradeList:return"TradeList";case e.TradingRequest.Portfolio:return"Portfolio";case e.TradingRequest.PortfolioNames:return"AccountNames";case e.TradingRequest.Login:return"Login";case e.TradingRequest.Logout:return"Logout";case e.TradingRequest.TradingPower:return"TradingPower";case e.TradingRequest.CustomerOrderList:return"CustomerOrderList";case e.TradingRequest.CustomerTradeList:return"CustomerTradeList";case e.TradingRequest.ModifyOrder:return"ModifyOrder";case e.TradingRequest.ActivateOrder:return"ActivateOrder";case e.TradingRequest.MarketProperties:return"MarketProperties";case e.TradingRequest.QuoteRequest:return"QuoteRequest";case e.TradingRequest.CreatePortfolio:return"CreatePortfolio";case e.TradingRequest.MoveTrade:return"MoveTrade";case e.TradingRequest.CustomFields:return"CustomFields";case e.TradingRequest.TickSize:return"TickSize";case e.TradingRequest.ClientAccount:return"ClientAccount";case e.TradingRequest.Algorithms:return"Algorithms";case e.TradingRequest.OrderConfirm:return"OrderConfirm";case e.TradingRequest.OrderConfirmData:return"OrderConfirmData";case e.TradingRequest.PositionUnblock:return"PositionUnblock";case e.TradingRequest.DayTradePosGet:return"DayTradePosGet";case e.TradingRequest.DayTradePosClose:return"DayTradePosClose";case e.TradingRequest.OrderHistory:return"OrderHistory";case e.TradingRequest.RiskLevel:return"RiskLevel";default:return"<"+n.toString(16)+">"}case e.TagSet.File:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";case e.StorageRequest.Upload:return"Upload";case e.StorageRequest.Download:return"Download";case e.StorageRequest.ChangeMetaData:return"ChangeMetaData";case e.StorageRequest.Browse:return"Browse";case e.StorageRequest.AllCategories:return"AllCategories";case e.StorageRequest.Delete:return"Delete";case e.StorageRequest.CreateCategories:return"CreateCategories";default:return"<"+n.toString(16)+">"}case e.TagSet.Fundamental:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";default:return"<"+n.toString(16)+">"}case e.TagSet.Calendar:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";case e.CalendarRequest.FilterData:return"FilterData";case e.CalendarRequest.CalendarData:return"CalendarData";case e.CalendarRequest.Story:return"Story";case e.CalendarRequest.FxSettlementDate:return"FxSettlementDate";case e.CalendarRequest.NextDividend:return"NextDividend";default:return"<"+n.toString(16)+">"}case e.TagSet.Alert:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";case e.AlertRequest.AddAlert:return"AlertRequest";case e.AlertRequest.DeleteAlert:return"DeleteAlert";case e.AlertRequest.ModifyAlert:return"ModifyAlert";case e.AlertRequest.GetAlerts:return"GetAlerts";case e.AlertRequest.AddDevice:return"AddDevice";case e.AlertRequest.GetAlertLog:return"GetAlertLog";case e.AlertRequest.DeleteDevice:return"DeleteDevice";case e.AlertRequest.MarkEvents:return"MarkEvents";case e.AlertRequest.EnableAlert:return"EnableAlert";case e.AlertRequest.DisableAlert:return"DisableAlert";case e.AlertRequest.GetEmailDevice:return"GetEmailDevice";case e.AlertRequest.GetOwcLog:return"GetOwcLog";case e.AlertRequest.MarkOwcRead:return"MarkOwcRead";case e.AlertRequest.IntrusionLevel1Notification:return"IntrusionLevel1Notification";case e.AlertRequest.IntrusionLevel2Browser:return"IntrusionLevel2Browser";case e.AlertRequest.IntrusionLevel3Error:return"IntrusionLevel3Error";default:return"<"+n.toString(16)+">"}case e.TagSet.Feedback:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";default:return"<"+n.toString(16)+">"}case e.TagSet.Wire:switch(n){case e.HeaderRequests.Ping:return"Ping";case e.HeaderRequests.LoginProvider:return"LoginProvider";case e.HeaderRequests.CloseConnection:return"CloseConnection";case e.HeaderRequests.StartRealtime:return"StartRealtime";case e.HeaderRequests.Subscribe:return"Subscribe";case e.HeaderRequests.Unsubscribe:return"Unsubscribe";case e.HeaderRequests.ChangeSubscriptions:return"ChangeSubscriptions";case e.HeaderRequests.LoginAuthentication:return"LoginAuthentication";case e.WireRequest.GetSnapshot:return"GetSnapshot";default:return"<"+n.toString(16)+">"}}}var s=Infront.PidSid;if(e.DEBUG_CONFIG_TO_FILE=!1,e.DEBUG_CONFIG_TIME_STAMP=!0,e.DEBUG_CONFIG_ALL_TAGS=!1,e.DEBUG_CONFIG_LITE_TRESHOLD=-1,e.DEBUG=!0,e.DEBUG_VERSION=e.DEBUG&&!1,e.DEBUG_NO_ACCESS_TO_FEED=e.DEBUG&&!1,e.DEBUG_UNHANDLED_TAGS=e.DEBUG&&!1,e.DEBUG_CALLBACKS=e.DEBUG&&!1,e.DEBUG_CALLBACKS_SYMBOL=e.DEBUG&&!1,e.DEBUG_BINDINGS=e.DEBUG&&!1,e.DEBUG_TIMERS=e.DEBUG&&!1,e.DEBUG_INDEXED_DB=e.DEBUG&&!1,e.DEBUG_REQUESTS=e.DEBUG&&!1,e.DEBUG_WEBSOCKET=e.DEBUG&&!1,e.DEBUG_SERVER_CONN=e.DEBUG&&!1,e.DEBUG_SERVER_CONN_DETAIL=e.DEBUG&&!1,e.DEBUG_SUBSCRIPTIONS=e.DEBUG&&!1,e.DEBUG_SERVER_REFERENCE=e.DEBUG&&!1,e.DEBUG_SERVER_POOL=e.DEBUG&&!1,e.DEBUG_SERVER_OBJECTS=e.DEBUG&&!1,e.DEBUG_SYMBOL_SEARCH=e.DEBUG&&!1,e.DEBUG_SYMBOL_SEARCH_TAGS=e.DEBUG&&!1,e.DEBUG_REALTIME_REQUEST_ERROR=e.DEBUG&&!1,e.DEBUG_SYMBOL_STATIC_CS=e.DEBUG&&!1,e.DEBUG_SYMBOL_STATIC_CS_TAGS=e.DEBUG&&!1,e.DEBUG_SYMBOL_STATIC_INDEXEDDB=e.DEBUG&&!1,e.DEBUG_SYMBOL_DATA_CS=e.DEBUG&&!1,e.DEBUG_ALL_SYMBOL_DATA_CS=e.DEBUG&&!1,e.DEBUG_SYMBOL_DATA_CS_DIST=e.DEBUG&&!1,e.DEBUG_SYMBOL_DATA_CONTENT=e.DEBUG&&!1,e.DEBUG_SYMBOL_DATA_TAGS=e.DEBUG&&!1,e.DEBUG_ALL_SYMBOL_DATA_TAGS=e.DEBUG&&!1,e.DEBUG_HIST_PERFORMANCE=e.DEBUG&&!1,e.DEBUG_HIST_PERFORMANCE_TAGS=e.DEBUG&&!1,e.DEBUG_INSTRUMENT_INFO=e.DEBUG&&!1,e.DEBUG_SNAPSHOT=e.DEBUG&&!1,e.DEBUG_ORDERBOOK=e.DEBUG&&!1,e.DEBUG_ORDERBOOK_TAGS=e.DEBUG_ORDERBOOK&&!1,e.DEBUG_LOGIN=e.DEBUG&&!1,e.DEBUG_LOGIN_DETAIL=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_LOGIN_AUTH=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_LOGIN_AUTH_TAGS=e.DEBUG_LOGIN_CS_LOGIN_AUTH&&!1,e.DEBUG_LOGIN_CS_LOGIN_INFO=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_LOGIN_INFO_TAGS=e.DEBUG_LOGIN_CS_LOGIN_INFO&&!1,e.DEBUG_LOGIN_CS_TAGS_PROVIDERS=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_FEEDS=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_PROVIDERS=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_TAGS_FEEDS=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_PROV_FEEDS=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_MARKETPLACES=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_CS_PROV_FEEDS_TAGS=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_MWS=e.DEBUG_LOGIN&&!1,e.DEBUG_LOGIN_MWS_MARKETS=e.DEBUG_LOGIN_MWS&&!1,e.DEBUG_LOGIN_MWS_FEATURE_FEEDS=e.DEBUG_LOGIN_MWS&&!1,e.DEBUG_LOGIN_MWS_METADATA=e.DEBUG_LOGIN_MWS&&!1,e.DEBUG_TICK_SIZE_CS=e.DEBUG&&!1,e.DEBUG_TICK_SIZE_CS_TAGS=e.DEBUG_TICK_SIZE_CS&&!1,e.DEBUG_TRADES=e.DEBUG&&!0,e.DEBUG_TRADES_CS=e.DEBUG_TRADES&&!1,e.DEBUG_TRADES_CS_FILTER=e.DEBUG_TRADES&&!1,e.DEBUG_TRADES_CS_TAGS=e.DEBUG_TRADES_CS&&!1,e.DEBUG_TRADES_CS_HIST_TAGS=e.DEBUG_TRADES_CS&&!1,e.DEBUG_TRADES_RT=e.DEBUG_TRADES&&!1,e.DEBUG_TRADES_RT_TAGS=e.DEBUG_TRADES_RT&&!1,e.DEBUG_TRADES_CACHE=e.DEBUG_TRADES&&!1,e.DEBUG_BROKER_STATS=e.DEBUG&&!1,e.DEBUG_BROKER_STATS_CS=e.DEBUG&&!1,e.DEBUG_BROKER_STATS_CS_TAGS=e.DEBUG&&!1,e.DEBUG_RANKING=e.DEBUG&&!1,e.DEBUG_RANKING_CS=e.DEBUG_RANKING&&!1,e.DEBUG_RANKING_CS_TAGS=e.DEBUG_RANKING_CS&&!1,e.DEBUG_RANKING_RT=e.DEBUG_RANKING&&!1,e.DEBUG_RANKING_RT_TAGS=e.DEBUG_RANKING_RT&&!1,e.DEBUG_CALENDAR=e.DEBUG&&!1,e.DEBUG_CALENDAR_CS=e.DEBUG_CALENDAR&&!1,e.DEBUG_CALENDAR_CS_TAGS=e.DEBUG_CALENDAR_CS&&!1,e.DEBUG_ALERTS=e.DEBUG&&!1,e.DEBUG_ALERTS_CS=e.DEBUG_ALERTS&&!1,e.DEBUG_ALERTS_CS_TAGS=e.DEBUG_ALERTS_CS&&!1,e.DEBUG_ALERTS_RT=e.DEBUG_ALERTS&&!1,e.DEBUG_ALERTS_RT_TAGS=e.DEBUG_ALERTS_RT&&!1,e.DEBUG_NEWS=e.DEBUG&&!1,e.DEBUG_NEWS_CS=e.DEBUG_NEWS&&!1,e.DEBUG_NEWS_CS_TAGS=e.DEBUG_NEWS_CS&&!1,e.DEBUG_NEWS_RT=e.DEBUG_NEWS&&!1,e.DEBUG_NEWS_RT_TAGS=e.DEBUG_NEWS_RT&&!1,e.DEBUG_CHAINS=e.DEBUG&&!1,e.DEBUG_CHAINS_CS=e.DEBUG_CHAINS&&!1,e.DEBUG_CHAINS_CS_TAGS=e.DEBUG_CHAINS_CS&&!1,e.DEBUG_NEWS_SHOW_FEED=e.DEBUG_NEWS&&!1,e.DEBUG_NEWS_SHOW_ID=e.DEBUG_NEWS&&!1,e.DEBUG_NEWS_SHOW_TIME=e.DEBUG_NEWS&&!1,e.DEBUG_NEWS_SHOW_SYMBOL=e.DEBUG_NEWS&&!1,e.DEBUG_STORAGE=e.DEBUG&&!1,e.DEBUG_STORAGE_CS=e.DEBUG_STORAGE&&!1,e.DEBUG_STORAGE_CS_TAGS=e.DEBUG_STORAGE_CS&&!1,e.DEBUG_TRADING=e.DEBUG&&!1,e.DEBUG_TRADING_FEATURES=e.DEBUG_TRADING&&!1,e.DEBUG_TRADING_CS=e.DEBUG_TRADING&&!0,e.DEBUG_TRADING_CS_TAGS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_LOGIN_CS=e.DEBUG_TRADING_CS&&!0,e.DEBUG_TRADING_LOGIN_SERVICE_INFO=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_LOGIN_CS_TAGS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_ORDERS_TRADES_CS_TAGS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_ALGOS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_ALGO_CS_TAGS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_CUST_FIELDS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_CUST_FIELDS_CS_TAGS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_MKT_PROP_CS=e.DEBUG_TRADING_CS&&!0,e.DEBUG_TRADING_MKT_PROP_CS_TAGS=e.DEBUG_TRADING_CS&&!1,e.DEBUG_TRADING_PORTFOLIO_NAMES_CS=e.DEBUG_TRADING_CS&&!0,e.DEBUG_TRADING_PORTFOLIO_NAMES_CS_TAGS=e.DEBUG_TRADING_PORTFOLIO_NAMES_CS&&!1,e.DEBUG_TRADING_POSITIONS_CS=e.DEBUG_TRADING_CS&&!0,e.DEBUG_TRADING_POSITIONS_CS_TAGS=e.DEBUG_TRADING_POSITIONS_CS&&!1,e.DEBUG_TRADING_POWER_CS=e.DEBUG_TRADING_CS&&!0,e.DEBUG_TRADING_POWER_CS_TAGS=e.DEBUG_TRADING_POWER_CS&&!1,e.DEBUG_TRADING_RT=e.DEBUG_TRADING&&!0,e.DEBUG_TRADING_RT_ORDER=e.DEBUG_TRADING_RT&&!0,e.DEBUG_TRADING_RT_ORDER_TAGS=e.DEBUG_TRADING_RT&&!1,e.DEBUG_TRADING_RT_ORDER_STATUS=e.DEBUG_TRADING_RT&&!0,e.DEBUG_TRADING_RT_ORDER_STATUS_TAGS=e.DEBUG_TRADING_RT&&!1,e.DEBUG_TRADING_RT_TRADE=e.DEBUG_TRADING_RT&&!0,e.DEBUG_TRADING_RT_TRADE_TAGS=e.DEBUG_TRADING_RT&&!1,e.DEBUG_TRADING_RT_POSITION=e.DEBUG_TRADING_RT&&!0,e.DEBUG_TRADING_RT_PORT_HEADER=e.DEBUG_TRADING_RT&&!1,e.DEBUG_TRADING_RT_POSITION_TAGS=e.DEBUG_TRADING_RT&&!1,e.DEBUG_TRADING_RT_TRADING_POWER=e.DEBUG_TRADING_RT&&!0,e.DEBUG_TRADING_RT_TRADING_POWER_TAGS=e.DEBUG_TRADING_RT&&!1,e.DEBUG_SYMBOL_MAPPING_CS=e.DEBUG&&!1,e.DEBUG_SYMBOL_MAPPING_CACHE=e.DEBUG&&!1,e.DEBUG_SYMBOL_MAPPING_SCORE_CS=e.DEBUG_SYMBOL_MAPPING_CS&&!1,e.DEBUG_SYMBOL_MAPPING_CS_TAGS=e.DEBUG_SYMBOL_MAPPING_CS&&!1,e.DEBUG_CACHE_UNBOUND_OBSERVERS=e.DEBUG&&!1,e.DEBUG_CACHE_PORTFOLIO=e.DEBUG&&!1,e.DEBUG_CACHE_TRADING_POWER=e.DEBUG&&!1,e.DEBUG_CACHE_TRADES=e.DEBUG&&!1,e.DEBUG_CACHE_ORDERS=e.DEBUG&&!1,e.DEBUG_WIRE=e.DEBUG&&!0,e.DEBUG_WIRE_BLOCKS=e.DEBUG&&!1,e.DEBUG_WIRE_TAGS=e.DEBUG&&!1,e.DEBUG_WIRE_SYMBOLS=e.DEBUG&&!1,e.DEBUG_WIRE_LINKS=e.DEBUG&&!1,e.DEBUG_WIRE_WATCH_LIST=e.DEBUG&&!1,e.DEBUG_WIRE_CARDS=e.DEBUG&&!0,e.DEBUG_WIRE_SETTINGS=e.DEBUG&&!1,e.DEBUG_VERBOSE=e.DEBUG&&!0,e.DEBUG_ERROR_LOG_CALLBACK=e.DEBUG&&!1,e.DEBUG_SERVER_EVENTS=e.DEBUG&&!1,e.DEBUG_CREATE_CURRENCY_CONVERT_FIELD=e.DEBUG&&!1,e.DEBUG_CURRENCY_CONVERT=e.DEBUG&&!1,e.DEBUG_WIDGETS=e.DEBUG&&!1,e.DEBUG_WIDGET_PUTCALLWIDGET=e.DEBUG&&e.DEBUG_WIDGETS&&!1,e.DEBUG_WIDGET_ALERTLISTWIDGET=e.DEBUG&&e.DEBUG_WIDGETS&&!1,e.DEBUG_WIDGET_BONDSTRADINGWIDGET=e.DEBUG&&e.DEBUG_WIDGETS&&!1,e.DEBUG_WIDGET_COMPLEXCHARTWIDGET=e.DEBUG&&e.DEBUG_WIDGETS&&!1,e.DEBUG_WIDGET_ASSETSPIECHART=e.DEBUG&&e.DEBUG_WIDGETS&&!1,e.DEBUG_CALCULATEDHISTORY_TAGS=e.DEBUG&&!1,"undefined"!=typeof window){var o=window.navigator.userAgent;if(!(o.indexOf("MSIE ")>0||o.indexOf("Trident/")>0)){var l=new InfrontUtil.URLHashParameters;if(l.has("INFRONT_PARAMS"))for(var c=l.get("INFRONT_PARAMS").split(";"),d=0;d<c.length;d++)0===c[d].toLowerCase().indexOf("host")?function(t){if(0===t.toLowerCase().indexOf("host")){var n=t.split("@");2===n.length&&(e.loginServers=[n[1]])}}(c[d]):"loopback"===c[d].toLowerCase()?e.localTerminalLoopback=!0:e[c[d]]=!0;var u=new URL(window.location.href);if(u.searchParams){Infront.urlLanguage=u.searchParams.get("lang"),Infront.urlList=u.searchParams.get("list");var h=u.searchParams.get("port");h&&(e.loginServers=["localhost:"+h],e.localTerminalLoopback=!0)}}}var p="---separator---";e.tagToStr=t,e.tagsetToShortStr=n,e.tagsetToStr=i,e.valueToStr=r,e.logCSPackageHeader=function(t,n){var i=n.toStr()+" CS ";e.log("%c"+i+t,"color: #3cf;")},e.logRTPackageHeader=function(t,n){var i=n.toStr()+" RT ";e.log("%c"+i+t,"color: #c7c;")},e.logToConsole=function(i,a,s){a.tag===e.RealtimeTags.Separator?e.log(n(i),p):e.log(n(i),t(i,a.tag),":",r(i,a,s))};var m=0;e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i="";Infront.debugger||(m=0);try{if(e.DEBUG_CONFIG_TO_FILE){var r="",a="";e.DEBUG_CONFIG_TIME_STAMP&&(r=InfrontUtil.formatDateTime(new Date,"hh:mm:ss.sss: "));for(var s=0,o=t;s<o.length;s++){var l=o[s];r+=l instanceof Array?a+"["+l.toString+"]":l instanceof Object?a+JSON.stringify(l):a+l,a=", "}if(e.DEBUG_CONFIG_LITE_TRESHOLD>0&&m>=e.DEBUG_CONFIG_LITE_TRESHOLD){var c=Infront.debugger.indexOf("\n");i=Infront.debugger.slice(c+1),m--,Infront.debugger=i}Infront.debugger?(Infront.debugger+="\n"+r,m++):Infront.debugger=r}}catch(e){}},e.requestToStr=a,e.serverTypeToStr=function(t){switch(t){case e.ServerType.Unknown:return"Unknown";case e.ServerType.Realtime:return"Realtime";case e.ServerType.Trading:return"Trading";case e.ServerType.History:return"History";case e.ServerType.Search:return"Search";case e.ServerType.Chain:return"Chain";case e.ServerType.Storage:return"Storage";case e.ServerType.Calendar:return"Calendar";case e.ServerType.Morningstar:return"Morningstar";case e.ServerType.Alert:return"Alert";case e.ServerType.Login:return"Login (IAS)";case e.ServerType.Wire:return"Wire";default:return"Unknown"}};var g,f=null;e.logTimeStamp=function(e){null==e&&(e=new Date);var t=e.getHours(),n=e.getMinutes(),i=e.getSeconds(),r=e.getMilliseconds();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)+"."+(r<10?"00"+r:r<100?"0"+r:r)},e.logSeparator=function(){g||(g=Array(141).join("\u2015")),e.log("%c"+g,"color: #799;")},e.logRequestToConsole=function(r,o,l){try{for(var c=new e.Tag,d=function(t){return f||(f=new e.Parser(0,0)),f.Initialize(4,t.length),f}(l),u=new e.Header,h=[],m=!0;d.Next(l,c,o);)if(m)switch(c.tag){case e.HeaderTags.End:m=!1;break;case e.HeaderTags.PID:u.pid=c.Int(l);break;case e.HeaderTags.SID:u.sid=c.Int(l);break;case e.HeaderTags.Request:u.request=c.Int(l),u.clientServer=!0;break;case e.HeaderTags.UserData:u.userData=c.Int(l);break;case e.HeaderTags.UniqueId:u.uniqueId=c.Int(l);break;case e.HeaderTags.ReplyNu:u.segment=c.Int(l);break;case e.RealtimeTags.Separator:h.push(t(o,c.tag))}else switch(c.tag){case e.RealtimeTags.UseTag:case e.RealtimeTags.SearchEmptyTag:h.push(t(o,c.tag)+": "+i(o)+"."+t(o,c.Int(l)));break;case e.RealtimeTags.Separator:h.push(p);break;default:if(o==e.TagSet.Login&&(c.tag==e.LoginTags.Password||c.tag==e.LoginTags.SsoToken))break;if(o==e.TagSet.OrderEntry&&(c.tag==e.TradingTag.Password||c.tag==e.TradingTag.LoginSignedToken||c.tag==e.TradingTag.LoginToken))break;h.push(t(o,c.tag)+": "+c.String(l))}if(u.request){var g=new s(u.pid,u.sid),v=u.uniqueId?", id="+u.uniqueId.toString():"";e.log(n(r)+" REQ: "+g.toStr()+" "+a(r,u.request)+v,{header:u.inspect(r),data:h})}}catch(t){e.log("%cException in logRequestToConsole","color: #f60; font-size: 14px;")}}}(IDS||(IDS={})),function(e){var t=function(){function e(e){this.sourceField=e}return e.prototype.format=function(e){var t=e;if(null!=e){for(var n=0;n<this.sourceField.length;n++)t=t[this.sourceField[n]];return t}return""},e}();e.ObjectFieldFormatter=t;var n=function(){function e(e,t){void 0===t&&(t=!1),this.decimals="number"==typeof e?e:0,this.allowZero=t}return e.prototype.format=function(e){return null==e||null==e||!InfrontUtil.isNumber(e)||!this.allowZero&&0==e?"":InfrontUtil.formatNumber(e,this.decimals)},e}();e.NumberFormatter=n;var i=function(){function e(e){void 0===e&&(e=!1),this.allowZero=e}return e.prototype.format=function(e){return null==e||null==e||!InfrontUtil.isNumber(e)||!this.allowZero&&0==e?"":(this.decimals=e!=Math.floor(e)?e.toString().split(".")[1].length:0,this.decimals>4&&(this.decimals=4),InfrontUtil.formatNumber(e,this.decimals))},e}();e.VolumeFormatter=i;var r=function(e){function t(t,n){void 0===n&&(n=!1);var i=e.call(this,t.get(),n)||this;return i.decimalsObs=t,i.decimalsObs.observe(i),i}return __extends(t,e),t.prototype.valueUpdated=function(e){this.decimals=e,this.decimalsUpdated&&this.decimalsUpdated()},t.prototype.listen=function(e){this.decimalsUpdated=e},t.prototype.cleanupFormatter=function(){this.decimalsObs.unbind(this),this.decimalsUpdated=null},t}(n);e.DynamicNumberFormatter=r;var a=function(){function e(e){void 0===e&&(e=!1),this.allowZero=e}return e.prototype.format=function(e){return null==e||null==e||!InfrontUtil.isNumber(e)||!this.allowZero&&0==e?"":InfrontUtil.formatAndShortenInteger(e)},e}();e.ShortenNumberFormatter=a;var s=function(){function e(){}return e.prototype.format=function(e){return InfrontUtil.isNumber(e)?InfrontUtil.formatID(e):e},e}();e.IDFormatter=s;var o=function(){function e(e,t){void 0===t&&(t=!1),this.decimals=e,this.allowZero=t}return e.prototype.format=function(e){return null==e||null==e||!InfrontUtil.isNumber(e)||!this.allowZero&&0==e?"":InfrontUtil.formatPercent(e,this.decimals)},e}();e.PercentFormatter=o;var l=function(){function e(e){this.showSeconds=e}return e.prototype.format=function(e){var t=null;InfrontUtil.isString(e)&&e.length>0?t=new Date(e):InfrontUtil.isDate(e)&&(t=e);var n="";return t&&(n=InfrontUtil.formatStandardTimestamp(t,this.showSeconds)),n},e}();e.TimestampFormatter=l;var c=function(){function e(){}return e.prototype.format=function(e){var t=null;InfrontUtil.isString(e)?t=new Date(e):InfrontUtil.isDate(e)&&(t=e);var n="";return t&&(n=InfrontUtil.formatDate(t)),n},e}();e.DateFormatter=c;var d=function(){function e(){this.date=new Date(0)}return e.prototype.format=function(e){InfrontUtil.isNumber(e)&&InfrontUtil.DateNuToDate(e,this.date);var t="";return this.date.valueOf()>0&&(t=InfrontUtil.formatDate(this.date)),t},e}();e.IdsDateFormatter=d;var u=function(){function e(e){this.translateFunction=e}return e.prototype.format=function(e){return this.translateFunction(e)},e}();e.InlineFormatter=u}(Infront||(Infront={})),function(e){var t=function(){function e(e){this.dataType=e}return e.infinInstrument="InfinInstrument",e.isin="Isin",e.source="Source",e.field="Field",e.universeObject="UniverseObject",e.symphonyApp="SymphonyApp",e.infrontInstrument="InfrontInstrument",e.removeInfrontInstrument="RemoveInfrontInstrument",e.clearAllInstruments="ClearAllInstruments",e.replaceAllInstruments="ReplaceAllInstruments",e.infrontNewsItem="InfrontNewsItem",e.feed="Feed",e.price="Price",e.infrontAlert="Alert",e.infrontFilter="InfrontFilter",e.expandInfrontFilter="ExpandInfrontFilter",e.removeInfrontFilter="RemoveInfrontFilter",e.removeInfrontFilterItem="RemoveInfrontFilterItem",e.listInstrument="ListInstrument",e.listenerAdded="ListenerAdded",e}();e.DataType=t;var n=function(e,t){this.type=e,this.value=t};e.Message=n,e.targetSupportsType=function(e,t){return e.accepts().indexOf(t)>-1};var i=function(){function n(){this.targetsList=[],this.lastMessageCache={}}return n.getInstance=function(e){void 0===e&&(e=n.DEFAULT_CHANNEL);var t=null;return InfrontUtil.isNumber(e)&&(n._channels[e]||(n._channels[e]=new n),t=n._channels[e]),t},n.eachChannel=function(e,t){for(var i=InfrontUtil.isArray(e)?e:[e],r=0;r<i.length;r++){var a=n.getInstance(i[r]);a&&t(a)}},n.link=function(i,r){n.eachChannel(i,function(e){e.link(r)}),InfrontUtil.setZeroTimeout(function(){var a=new e.Message(t.listenerAdded);a.value=r,n.broadcastMessage(i,a)})},n.unlink=function(e,t){n.eachChannel(e,function(e){e.unlink(t)})},n.broadcastMessage=function(e,t){n.eachChannel(e,function(e){e.broadcastMessage(t)})},n.getLastMessage=function(e,t){var i=null,r=n.getInstance(e);return r&&(i=r.getLastMessage(t)),i},n.prototype.link=function(e){this.targetsList.indexOf(e)<0&&this.targetsList.push(e)},n.prototype.unlink=function(e){-1!=this.targetsList.indexOf(e)&&this.targetsList.splice(this.targetsList.indexOf(e),1),0==this.targetsList.length&&(this.lastMessageCache={})},n.prototype.getLastMessage=function(e){var t=null;return this.lastMessageCache.hasOwnProperty(e)&&(t=this.lastMessageCache[e]),t},n.prototype.storeMessage=function(e){this.lastMessageCache[e.type]=e},n.prototype.broadcastMessage=function(t){for(var n=0;n<this.targetsList.length;n++)e.targetSupportsType(this.targetsList[n],t.type)&&this.targetsList[n].receiveMessage(t);this.storeMessage(t)},n.DEFAULT_CHANNEL=9007199254740991,n._channels={},n}();e.ControllerLinkFactory=i}(InterLibraryLink||(InterLibraryLink={})),function(e){var t=function(){function e(e){this.callback=e}return e.prototype.transmit=function(e,t){this.callback(t)},e}();e.InlineTransmitter=t;var n=function(){function e(e){this.field=e}return e.prototype.transmit=function(e,t){e[this.field]=t},e}();e.FieldTransmitter=n;var i=function(){function e(e){this.attribute=e}return e.prototype.transmit=function(e,t){e.setAttribute(this.attribute,t)},e}();e.HTMLAttributeTransmitter=i;var r=function(){function e(){}return e.prototype.transmit=function(e,t){InfrontUtil.removeAllChildNodes(e),e.appendChild(t)},e}();e.DOMElementTransmitter=r}(Infront||(Infront={}));var Infront;__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};!function(e){var t=function(){function e(e){this.localStorageKey=e,InfrontUtil.isLocalStorageSupported()&&window.localStorage.getItem(this.localStorageKey)?this.storageObject=JSON.parse(window.localStorage.getItem(this.localStorageKey)):this.storageObject={}}return e.prototype.store=function(e,t,n,i){void 0===i&&(i=null),this.storageObject.hasOwnProperty(e)||(this.storageObject[e]={}),this.storageObject[e][t]=n,this.save()},e.prototype.get=function(e,t,n){void 0===n&&(n=null);var i=null;return this.storageObject.hasOwnProperty(e)&&this.storageObject[e].hasOwnProperty(t)&&(i=this.storageObject[e][t]),i},e.prototype.clear=function(e,t,n){void 0===n&&(n=null),this.storageObject.hasOwnProperty(e)&&this.storageObject[e].hasOwnProperty(t)&&(delete this.storageObject[e][t],this.save())},e.prototype.removeWidget=function(e,t){void 0===t&&(t=null),this.storageObject.hasOwnProperty(e)&&"object"==typeof this.storageObject[e]&&(delete this.storageObject[e],this.save())},e.prototype.save=function(){InfrontUtil.isLocalStorageSupported()&&window.localStorage.setItem(this.localStorageKey,JSON.stringify(this.storageObject))},e.prototype.storeGlobal=function(e,t,n){},e.prototype.getGlobal=function(e,t){},e.prototype.clearGlobal=function(e,t){},e}();e.DefaultWidgetStorage=t}(Infront||(Infront={})),function(e){var t,n,i,r;(n=t=e.WidgetState||(e.WidgetState={}))[n.Constructing=0]="Constructing",n[n.Constructed=1]="Constructed",n[n.Initialized=2]="Initialized",n[n.Initializing=3]="Initializing",n[n.UiBuilt=4]="UiBuilt",n[n.Subscribed=5]="Subscribed",n[n.Destroying=6]="Destroying",(r=i=e.WidgetNavButtonType||(e.WidgetNavButtonType={}))[r.NONE=0]="NONE",r[r.EXPAND=1]="EXPAND",r[r.NAVIGATE=2]="NAVIGATE";var a,s,o=function(){function t(e){this.instruments=[],this.fields=[],this.infront=e}return t.prototype.resetSubscriptions=function(){0<this.instruments.length&&0<this.fields.length&&this.infront.unsubscribe(this.instruments,this.fields),this.instruments=[],this.fields=[]},t.prototype.updateInstruments=function(t){var n=this;0<this.instruments.length&&0<this.fields.length&&this.infront.snapshot(this.instruments,this.fields,!0,function(i){t&&(i?i.length<n.instruments.length?t(!1,i.length+" of "+n.instruments.length+"updated"):t(!0):t(!1,e.MWSErrorCodes.NOT_FOUND))},0,!0)},t.prototype.addInstrument=function(e){e?(this.instruments.push(e),0<this.fields.length&&this.infront.subscribe(e,this.fields)):InfrontUtil.errorLog("Warning: Trying to subscribe to null instrument",this)},t.prototype.setInstrument=function(t){1==this.instruments.length&&e.Instrument.isSameInstrument(this.instruments[0],t)||(this.removeAllInstruments(),t&&(this.instruments.push(t),0<this.fields.length&&this.infront.subscribe(t,this.fields)))},t.prototype.addInstruments=function(e){if(e&&0<e.length){for(var t=0,n=e;t<n.length;t++){var i=n[t];i?this.instruments.push(i):InfrontUtil.errorLog("Warning: Trying to subscribe to null instrument",this)}0<this.fields.length&&this.infront.subscribe(e,this.fields)}},t.prototype.removeInstrument=function(t){for(var n=0;n<this.instruments.length;n++)if(e.Instrument.isSameInstrument(this.instruments[n],t)){this.instruments.splice(n,1),this.infront.unsubscribe(t,this.fields);break}},t.prototype.removeInstruments=function(e){if(e&&0<e.length)for(var t=0,n=e;t<n.length;t++){var i=n[t];this.removeInstrument(i)}},t.prototype.removeAllInstruments=function(){0<this.fields.length&&this.infront.unsubscribe(this.instruments,this.fields),this.instruments=[]},t.prototype.addField=function(e){e?(this.fields.push(e),0<this.instruments.length&&this.infront.subscribe(this.instruments,[e])):InfrontUtil.errorLog("Warning: Trying to subscribe to empty field",this)},t.prototype.addFields=function(e){if(e&&0<e.length){for(var t=0,n=e;t<n.length;t++){var i=n[t];i?this.fields.push(i):InfrontUtil.errorLog("Warning: Trying to subscribe to empty field",this)}0<this.instruments.length&&this.infront.subscribe(this.instruments,e)}},t.prototype.removeField=function(e){var t=this.fields.indexOf(e);0<=t&&(this.fields.splice(t,1),this.infront.unsubscribe(this.instruments,[e]))},t.prototype.removeAllFields=function(){this.infront.unsubscribe(this.instruments,this.fields),this.fields=[]},t}();e.WidgetSubscriptions=o,(s=a=e.WidgetDecimals||(e.WidgetDecimals={})).FEED="FEED",s.INSTRUMENT="INSTRUMENT",s.DEFAULT="DEFAULT";var l=function(){this.id=null,this.persistState=!0,this.storageType=null,this.navButton=i.NONE,this.useOriginal=!1,this.decimals=a.INSTRUMENT,this.showSearchWidget=!1};e.WidgetOptions=l;var c=function(){function n(n,r,a,s,l){void 0===l&&(l="widgetTitle");var c=this;if(this.widgetState=t.Constructing,this.isInitialised=!1,this.unbinds=[],this.initId=0,this.addedEvents=[],this.addedInfrontEvents=[],this.createAndAssignOptions(s),this.element=n,this.languageKey=a,this.infront=r.getModel(),this.infrontUI=r,this.cache=this.infront.getCache(),this.storage=r.getStorage(),this.subscribes=new o(this.infront),this.languageHandler=r.languageHandler,this._hasContent=new e.Observable,this.options.navButton!=i.NONE&&(this.navButtonClick=function(e){return c.options.navButtonClicked()}),InfrontUtil.isString(this.options.widgetTitle)){var d=this.languageHandler.get("custom",this.options.widgetTitle);this.widgetTitle=d||this.options.widgetTitle}else null===this.options.widgetTitle?this.widgetTitle=null:this.widgetTitle=this.languageHandler.get(a,l);InfrontUtil.setZeroTimeout(function(){c.newInit()}),this.options.hasOwnProperty("linkChannels")&&(this._linkChannels=InfrontUtil.isArray(this.options.linkChannels)?this.options.linkChannels:[this.options.linkChannels],(this.link&&this.unlink||this.receiveMessage)&&InfrontUtil.setZeroTimeout(function(){c.link&&c.unlink&&c.link(new InfrontUtil.InlineLinkTarget([InterLibraryLink.DataType.infinInstrument,InterLibraryLink.DataType.isin,InterLibraryLink.DataType.infrontInstrument,InterLibraryLink.DataType.infrontNewsItem,InterLibraryLink.DataType.feed,InterLibraryLink.DataType.price,InterLibraryLink.DataType.infrontFilter,InterLibraryLink.DataType.listInstrument,InterLibraryLink.DataType.infrontAlert],function(e){InterLibraryLink.ControllerLinkFactory.broadcastMessage(c._linkChannels,e)})),c.receiveMessage&&InterLibraryLink.ControllerLinkFactory.link(c._linkChannels,c)})),this.widgetState=t.Constructed,this.options.widgetStateCallback&&this.options.widgetStateCallback(this.widgetState)}return n.prototype.createAndAssignOptions=function(e){this.options=e&&e.useOriginal?e:InfrontUtil.mergeRecursive(this.returnDefaultWidgetOptions(),e)},n.prototype.newInit=function(){this.isInitialised=!0,this.widgetState=t.Initialized,this.options.widgetStateCallback&&this.options.widgetStateCallback(this.widgetState),this.newBuildUI()},n.prototype.newBuildUI=function(){this.createBindings(),this.widgetState=t.UiBuilt,this.options.widgetStateCallback&&this.options.widgetStateCallback(this.widgetState),this.newSubscribe()},n.prototype.createBindings=function(){var t=this;if(this.options.hasContentCallback){this._hasContentCallback=this.options.hasContentCallback,this._hasContent=new e.Observable,this.content=this.content?this.content:{};var n=this._hasContent.get()?this._hasContent.get():this.getInitialHasContentValue();this._hasContentCallback(n,this.content);var i=e.BindingFactory.createInlineBinding(function(e){e!=n&&(n=e,t._hasContentCallback(e,t.content))});this._hasContent.observe(i),this.unbinds.push(function(){return t._hasContent.unbind(i)})}},n.prototype.newSubscribe=function(){this.widgetState=t.Subscribed,this.options.widgetStateCallback&&this.options.widgetStateCallback(this.widgetState)},n.prototype.newUnsubscribe=function(){this.subscribes.removeAllInstruments(),this.widgetState=t.UiBuilt,this.options.widgetStateCallback&&this.options.widgetStateCallback(this.widgetState)},n.prototype.removeBindings=function(){for(var e=0;e<this.unbinds.length;e++)this.unbinds[e]&&this.unbinds[e]();this.unbinds=[]},n.prototype.newDestroyUI=function(){this.newUnsubscribe(),this.removeBindings(),this.progressIndicator&&(this.progressIndicator.destroy(),this.progressIndicator=null),e.WidgetDOMFactory.unbindAll(this.element),InfrontUtil.removeAllChildNodes(this.element),this.widgetState=t.Constructed,this.options.widgetStateCallback&&this.options.widgetStateCallback(this.widgetState)},n.prototype.finalize=function(){},n.prototype.updateAllInstruments=function(){this.subscribes.updateInstruments(),this.quoteList&&this.quoteList.updateAllInstruments()},n.prototype.accepts=function(){return[]},n.prototype.receive=function(){},n.prototype.modify=function(e){this.newDestroyUI(),InfrontUtil.mergeRecursive(this.options,e),this.newInit()},n.prototype.pause=function(){this.newUnsubscribe()},n.prototype.resume=function(){this.newSubscribe()},n.prototype.destroy=function(){this.widgetState=t.Destroying,this.options.widgetStateCallback&&this.options.widgetStateCallback(this.widgetState),this.newDestroyUI(),this.unregisterAllEvents(),this.finalize(),this._linkChannels&&InterLibraryLink.ControllerLinkFactory.unlink(this._linkChannels,this),this._receiveOnlyLinkChannels&&InterLibraryLink.ControllerLinkFactory.unlink(this._receiveOnlyLinkChannels,this),this._sendOnlyLinkChannels&&InterLibraryLink.ControllerLinkFactory.unlink(this._sendOnlyLinkChannels,this)},n.prototype.setHasContent=function(e,t){this._hasContent&&(this.content=t,this._hasContent.set(e))},n.prototype.getHasContent=function(){return this._hasContent},n.prototype.supportsHasContent=function(){return!1},n.prototype.getInitialHasContentValue=function(){return!1},n.prototype.store=function(e,t){this.storage&&this.options.persistState&&this.options.id&&this.getStoredValue(e)!=t&&this.storage.store(this.options.id,e,t,this.options.storageType)},n.prototype.getStoredValue=function(e){var t=null;return this.storage&&this.options.persistState&&this.options.id&&(t=this.storage.get(this.options.id,e,this.options.storageType)),t},n.prototype.clearStoredValue=function(e){this.storage&&this.options.persistState&&this.options.id&&this.storage.clear(this.options.id,e,this.options.storageType)},n.prototype.removeAllStorage=function(){this.storage&&this.options.persistState&&this.options.id&&this.storage.removeWidget(this.options.id,this.options.storageType)},n.prototype.storeGlobal=function(e,t){this.storage&&this.options.persistState&&this.getStoredValue(e)!=t&&this.storage.store(n.kGlobalStorageID,e,t,this.options.storageType)},n.prototype.getStoredGlobalValue=function(e){var t=null;return this.storage&&this.options.persistState&&(t=this.storage.get(n.kGlobalStorageID,e,this.options.storageType)),t},n.prototype.clearStoredGlobalValue=function(e){this.storage&&this.options.persistState&&this.storage.clear(n.kGlobalStorageID,e,this.options.storageType)},n.prototype.removeAllGlobalStorage=function(){this.storage&&this.options.persistState&&this.storage.removeWidget(n.kGlobalStorageID,this.options.storageType)},n.prototype.isResizeable=function(){return!1},n.prototype.resizeWidget=function(){},n.prototype.addEventListener=function(e,t,n){this.addedEvents.push({element:e,event:t,callback:n}),InfrontUtil.addEventListener(e,t,n)},n.prototype.addInfrontEventObserver=function(e,t){this.addedInfrontEvents.push({eventName:e,callback:t}),this.infront.registerEventObserver(e,t)},n.prototype.unregisterAllEvents=function(){for(var e=0;e<this.addedEvents.length;e++)InfrontUtil.removeEventListener(this.addedEvents[e].element,this.addedEvents[e].event,this.addedEvents[e].callback);for(this.addedEvents=[],e=0;e<this.addedInfrontEvents.length;e++)this.infront.unregisterEventObserver(this.addedInfrontEvents[e].eventName,this.addedInfrontEvents[e].callback);this.addedInfrontEvents=[]},n.prototype.getFeedMetadata=function(e,t){var n=this;this.initId++;var i=this.initId;this.infront.getFeedHandler().getFeed(e,function(e){i==n.initId&&t(e)})},n.prototype.getSyncFeedMetadata=function(e){return this.infront.getFeedHandler().getFeedMetaData(e)},n.prototype.swapInstrument=function(t){t&&(t.feed&&t.ticker&&(this.options.instrument=new e.Instrument(t.feed,t.ticker)),this.newDestroyUI(),this.isInitialised&&this.newInit())},n.prototype.addInstrumentSearchOpts=function(t){var n=this,i=new e.SearchBoxOptions;return i.placeholder=this.languageHandler.get(t,"searchPlaceholder"),i.maxResults=30,i.searchThreshold=2,i.itemTypes=["INSTRUMENT"],i.popupOffset=9,i.instrumentSelected=function(e){n.swapInstrument(e)},i},n.prototype.onSearchButtonClick=function(e){var t=this,n=this.searchContainer.parentElement,i=function(e){e instanceof KeyboardEvent&&27!=e.keyCode||(InfrontUtil.removeClassName(n,"cell-heading__search--active"),t.searchWidget.element.removeEventListener("focusout",i),t.searchWidget.element.removeEventListener("keyup",i))};this.searchWidget&&this.searchWidget.element&&(this.searchWidget.element.addEventListener("focusout",i),this.searchWidget.element.addEventListener("keyup",i)),n.setAttribute("ref","search-bar"),InfrontUtil.addClassName(n,"cell-heading__search--active"),this.searchWidget&&this.searchWidget.focus()},n.kGlobalStorageID="wtk-global-storage-id",n}();e.WidgetBase=c;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decimals=null,t}return __extends(t,e),t}(l);e.SingleInstrumentWidgetOptions=d;var u=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.decimals=new e.Observable,n.instrumentDecimals=null,n}return __extends(n,t),n.prototype.assignCacheKey=function(){this.options.instrument&&(this.cacheKey=e.CacheKeyFactory.createInstrumentKey(this.options.instrument))},n.prototype.newInit=function(){var n=this;this.feedMetaData=null,this.assignCacheKey(),InfrontUtil.isNumber(this.options.decimals)&&this.decimals.set(this.options.decimals),this.options.instrument?(this.infront.instrumentInfoPromise(this.options.instrument.feed,this.options.instrument.ticker).then(function(t){n.instrumentDecimals=t[e.MWSConstants.precision_code],n.updateDecimals()}).catch(function(e){IDS.DEBUG_VERBOSE&&IDS.log(e)}),this.getFeedMetadata(this.options.instrument.feed,function(e){n.feedMetaData=e,n.updateDecimals(),t.prototype.newInit.call(n)})):t.prototype.newInit.call(this)},n.prototype.updateDecimals=function(){InfrontUtil.isNumber(this.options.decimals)?this.decimals.set(this.options.decimals):InfrontUtil.isNumber(this.instrumentDecimals)?this.decimals.set(this.instrumentDecimals):this.feedMetaData&&this.feedMetaData.hasOwnProperty(e.MWSConstants.decimals)?this.decimals.set(this.feedMetaData.decimals):this.decimals.set(e.UI.kDefaultDecimals)},n.prototype.newSubscribe=function(){this.subscribes.setInstrument(this.options.instrument),t.prototype.newSubscribe.call(this)},n.prototype.receiveMessage=function(t){t.type!=InterLibraryLink.DataType.infrontInstrument||e.Instrument.isSameInstrument(this.options.instrument,t.value)||(this.newDestroyUI(),this.options.instrument=e.Instrument.prototype.inf_clone.apply(t.value),this.isInitialised&&this.newInit())},n.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument]},n}(c);e.SingleInstrumentWidgetBase=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clickToLogin=!1,t.rememberCanceledLogin=!1,t.tradingLoginCallback=null,t}return __extends(t,e),t}(l);e.TradingWidgetOptions=h;var p=function(t){function n(e,n,i,r,a){void 0===a&&(a="widgetTitle");var s=t.call(this,e,n,i,r,a)||this;return s.portfolioName="",s.languageTrading=n.languageHandler.get("trades","noTrading"),s.languageTradingClick=n.languageHandler.get("trades","noTradingClick"),s.options.tradingLoginCallback&&(s.tradingLoginCallback=s.options.tradingLoginCallback),s.infrontUI.ensureTradingLoggedIn(s.options.rememberCanceledLogin),s.tradingConnectedEvent=function(e){s.onTradingConnected()},s.tradingDisconnectedEvent=function(e){s.onTradingDisconnected()},s.tradingReconnectingEvent=function(e){s.onTradingReconnecting()},s.tradingReconnectedEvent=function(e){s.onTradingReconnected()},s}return __extends(n,t),n.prototype.newSubscribe=function(){this.infrontUI.AddTradingManagerObserver(this),this.infront.registerTradingConnectedEventObserverWithCallbackIfConnected(this.tradingConnectedEvent),this.infront.registerEventObserver(e.TradingDisconnectedEvent.kEventName,this.tradingDisconnectedEvent),this.infront.registerEventObserver(e.TradingReconnectingEvent.kEventName,this.tradingReconnectingEvent),this.infront.registerEventObserver(e.TradingReconnectedEvent.kEventName,this.tradingReconnectedEvent),t.prototype.newSubscribe.call(this)},n.prototype.newUnsubscribe=function(){this.infrontUI.RemoveTradingManagerObserver(this),this.infront.unregisterEventObserver(e.TradingConnectedEvent.kEventName,this.tradingConnectedEvent),this.infront.unregisterEventObserver(e.TradingDisconnectedEvent.kEventName,this.tradingDisconnectedEvent),this.infront.unregisterEventObserver(e.TradingReconnectingEvent.kEventName,this.tradingReconnectingEvent),this.infront.unregisterEventObserver(e.TradingReconnectedEvent.kEventName,this.tradingReconnectedEvent),t.prototype.newUnsubscribe.call(this)},n.prototype.isTradingConnected=function(){return this.infront.getTradingStatus()===e.InfrontStatus.Connected},n.prototype.onTradingConnected=function(){this.setNoTradingContentDisplay(!0)},n.prototype.onTradingDisconnected=function(){this.setNoTradingContentDisplay(!1)},n.prototype.onTradingReconnecting=function(){},n.prototype.onTradingReconnected=function(){},n.prototype.clickToLoginCallback=function(){this.infrontUI.tradingLogin()},n.prototype.createNoTradingContentDisplay=function(){return this.noTradingContentDisplay=document.createElement("div"),this.options.clickToLogin&&!this.tradingLoginCallback&&(this.noTradingContentDisplay.hidden=this.isTradingConnected(),this.options.clickToLogin?(this.noTradingContentDisplay.style.cursor="pointer",this.noTradingContentDisplay.onclick=this.clickToLoginCallback,this.noTradingContentDisplay.innerHTML=this.languageTradingClick):this.noTradingContentDisplay.innerHTML=this.languageTrading),this.noTradingContentDisplay},n.prototype.setNoTradingContentDisplay=function(e){this.options.clickToLogin&&this.noTradingContentDisplay&&(this.noTradingContentDisplay.hidden=e),this.tradingLoginCallback&&this.tradingLoginCallback(e)},n.prototype.availablePortfoliosChanged=function(e){},n.prototype.currentPortfolioChanged=function(e){},n.prototype.currentPortfolioReady=function(e){},n}(c);e.TradingWidgetBase=p;var m=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.create=function(){return Object.create(t.prototype)},t.prototype.destroyAndRemoveAll=function(){for(var e=0;e<this.length;e++)this[e]&&(this[e].destroy(),delete this[e])},t}(Array);e.WidgetArray=m}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columns=["TYPE","SOURCE","CONDITION","RECURRENCE","COMMENT"],t.alertListMini=!1,t}return __extends(t,e),t}(e.WidgetOptions);e.AlertListWidgetOptions=t;var n=function(n){function i(t,r,a){var s=n.call(this,t,r,i.kLanguageKey,a)||this;return s.uniqueID=(Date.now()/Math.random()).toString(36).substr(2,10)+"AlertList",s.toggleOptionsCondition=!1,s.mwsAlertsArray=[],s.displayedAlerts=new e.SortedObservableArray(s.sortAlert),s.expandedAlert=new e.Observable,s.isExpanded=new e.Observable,s.expandedAlert.set(new e.InfrontAlert),s.isExpanded.set(!1),s.hasAlerts=new e.Observable,s.hasAlerts.set(!1),!(s.linkedTargets=[])===s.options.alertListMini?s.options.closeModifyAlert=function(){s.reloadData()}:s.options.columns=["SOURCE","CONDITION","RECURRENCE","COMMENT"],s.deleteAlertArrow=function(e){return s.deleteAlert(e)},s.modifyAlertArrow=function(e){return s.modifyAlert(e)},s.toggleOptionsArrow=function(e){return s.toggleOptions(e)},s.addInfrontEventObserver(e.AlertsChangedEvent.kEventName,function(e){return s.onAlertsChanged(e)}),s}return __extends(i,n),i.prototype.sortAlert=function(t,n){if(!t.hasInstrument()||!n.hasInstrument())return 0;var i=e.CompareFunctions.compareStringsDesc(t.getInstrument().ticker,n.getInstrument().ticker);return 0!==i?i:null!=t.description&&null!=n.description?e.CompareFunctions.compareStringsDesc(t.description,n.description):void 0},i.prototype.onAlertsChanged=function(e){var t=!e.source||e.source.uniqueID!=this.uniqueID;this.reloadData(t)},i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.getAlerts=function(t){var n=this;void 0===t&&(t=!0);var i=new e.DataOptions;i.onError=InfrontUtil.errorLogCallback,i.onData=function(e){null!=e&&InfrontUtil.isArray(e)&&(n.mwsAlertsArray=e),t&&n.filterAlerts()},this.infront.alertsData(i)},i.prototype.newBuildUI=function(){var t=[];this.options.alertListMini?this.columns=[{name:"SOURCE",heading:this.infrontUI.languageHandler.get("alert","source"),className:"cell-alert-list-mini-row__item  cell-pull-left  cell-alert-list-mini-row__item--ticker",item:"rule.left.md_value.instrument.ticker"},{name:"CONDITION",heading:this.infrontUI.languageHandler.get("alert","condition"),className:"cell-alert-list-mini-row__item  cell-pull-left  cell-alert-list-mini-row__item--condition",item:"description"},{name:"RECURRENCE",heading:this.infrontUI.languageHandler.get("alert","recurrence"),className:"cell-alert-list-mini-row__item  cell-pull-right  cell-alert-list-mini-row__item--recurrence",item:"recurrence"},{name:"COMMENT",heading:this.infrontUI.languageHandler.get("alert","comment"),className:"cell-alert-list-mini-row__item  cell-pull-left  cell-alert-list-mini-row__item--comment",item:"comment"}]:this.columns=[{name:"TYPE",heading:this.infrontUI.languageHandler.get("alert","type"),className:"cell-table__txt  cell-table__txt--alert-type",item:"type"},{name:"SOURCE",heading:this.infrontUI.languageHandler.get("alert","source"),className:"cell-table__txt  cell-table__txt--alert-source",item:"rule.left.md_value.instrument.ticker"},{name:"CONDITION",heading:this.infrontUI.languageHandler.get("alert","condition"),className:"cell-table__txt  cell-table__txt--alert-condition",item:"description"},{name:"RECURRENCE",heading:this.infrontUI.languageHandler.get("alert","recurrence"),className:"cell-table__txt  cell-table__txt--alert-recurrence",item:"recurrence"},{name:"COMMENT",heading:this.infrontUI.languageHandler.get("alert","comment"),className:"cell-table__txt  cell-table__txt--alert-comment",item:"comment"}];for(var i=0;i<this.options.columns.length;i++)for(var r=0;r<this.columns.length;r++){var a=this.columns[r];a[Object.keys(a)[0]]==this.options.columns[i]&&t.push(this.columns[r])}this.columns=t;var s={name:"ENABLED",heading:this.infrontUI.languageHandler.get("alert","enabled"),className:"cell-table__txt  cell-table__txt--alert--enabled",item:"enabled"};if(this.options.alertListMini){var o=e.WidgetDOMFactory.create_WAlertListMini_DOM(this.element,this.displayedAlerts,this.hasAlerts,this.languageHandler),l=new e.ArrayBinding(o,this,this);this.displayedAlerts.observe(l)}else e.WidgetDOMFactory.create_WAlertList_DOM(this.element,this.widgetTitle,this.columns,this.displayedAlerts,s,this.deleteAlertArrow,this.modifyAlertArrow,this.languageHandler);this.getAlerts(),n.prototype.newBuildUI.call(this)},i.prototype.htmlElementTreeAdded=function(e,t,n){this.hasAlerts.set(0<this.displayedAlerts.length())},i.prototype.htmlElementTreeRemoved=function(e,t,n){this.hasAlerts.set(0<this.displayedAlerts.length())},i.prototype.htmlElementTreeMoved=function(e,t,n,i){},i.prototype.toggleOptions=function(e){this.expandedAlert.get()===e?this.expandedAlert.set(null):this.expandedAlert.set(e)},i.prototype.createRow=function(t,n){var i,r=this,a=t,s=document.createElement("span"),o=document.createElement("span"),l=document.createTextNode("no alerts have been set");o.appendChild(l);var c=this.getSyncFeedMetadata(a.getInstrument().feed);c.iso_country&&(InfrontUtil.addClassName(s,"cell-flag  cell-flag-"+c.iso_country.toLowerCase()),s.setAttribute("aria-label","country flag: "+c.iso_country.toLowerCase())),i=e.WidgetDOMFactory.create_WAlertListMiniRow_DOM(a,this.columns,this.expandedAlert,this.deleteAlertArrow,this.modifyAlertArrow,this.toggleOptionsArrow,this.isExpanded,this.languageHandler),this.addEventListener(i.toggleButton,"click",function(e){r.isExpanded.set(!r.isExpanded.get()),r.setFocusOnButton(i)}),this.addEventListener(i.toggleButton,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r.setFocusOnButton(i)});var d=a.trigger_type?"DISABLE"===a.trigger_type?"Once":"Renew daily":"";return i.flagContainer.appendChild(s),new e.Switch(i.switchContainer,function(e){return r.enableAlert(a,e)},a.enabled,d),i.row},i.prototype.setFocusOnButton=function(e){this.toggleOptionsCondition=!this.toggleOptionsCondition,this.toggleOptionsCondition?(e.editButton.setAttribute("tabindex","0"),e.deleteButton.setAttribute("tabindex","0"),e.editButton.focus()):(e.editButton.setAttribute("tabindex","-1"),e.deleteButton.setAttribute("tabindex","-1"))},i.prototype.enableAlert=function(t,n){for(var i=0,r=this.mwsAlertsArray;i<r.length;i++){var a=r[i];a.id==t.id&&(t=a)}if(t.enabled!=n){t.enabled=n;var s=new e.ModifyAlertOptions;s.alert=t,s.onError=function(e,t){},s.onData=function(e){},this.infront.modifyAlert(s)}},i.prototype.filterAlerts=function(){this.displayedAlerts.clear();for(var t=0,n=this.mwsAlertsArray;t<n.length;t++){var i=n[t],r=new e.InfrontAlert;InfrontUtil.mergeRecursive(r,i),r.type==e.InfrontAlertTypes.INSTRUMENT_ALERT&&this.displayedAlerts.push(r)}},i.prototype.deleteAlert=function(t){var n=new e.AlertsOptions;n.alert_id=t.id,n.index=t.index,n.onError=function(e,t){IDS.DEBUG_WIDGET_ALERTLISTWIDGET&&IDS.log("AlertListWidget: ","Error code: "+e+" Error message: "+t)},n.onData=function(e){},this.infront.deleteAlert(n);for(var i=0;i<this.displayedAlerts.length();i++)this.displayedAlerts.get()[i].id==t.id&&this.displayedAlerts.removeItemAt(i)},i.prototype.modifyAlert=function(e){for(var t=0;t<this.linkedTargets.length;t++)this.linkedTargets[t].receiveMessage({type:InterLibraryLink.DataType.infrontAlert,value:e});this.options.openModifyAlertClick&&this.options.openModifyAlertClick(e)},i.prototype.reloadData=function(e){void 0===e&&(e=!0),this.mwsAlertsArray=[],this.getAlerts(e)},i.prototype.modify=function(){},i.prototype.link=function(e){-1!=e.accepts().indexOf(InterLibraryLink.DataType.infrontAlert)&&this.linkedTargets.push(e)},i.prototype.unlink=function(e){var t=this.linkedTargets.indexOf(e);-1<t&&this.linkedTargets.splice(t,1)},i.kLanguageKey="alertList",i}(e.WidgetBase);e.AlertListWidget=n}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.AlertWidgetOptions=t;var n=function(n){function i(t,r,a){var s=n.call(this,t,r,i.kLanguageKey,a)||this;s.modifyMode=new e.Observable,s.alertEnabled=new e.Observable,s.messageString=new e.Observable,s.validity=new e.Observable(!0),s.containers={},s.triggerTypeObserver=new e.SelectInputBinding,s.triggerTypeObserver.observe(function(e){return s.triggerTypeChanged(e)}),s.conditionObserver=new e.SelectInputBinding,s.conditionObserver.observe(function(e){return s.conditionChanged(e)}),s.commentObserver=new e.TextInputBinding,s.commentObserver.observe(function(e){return s.commentChanged(e)}),s.valueObserver=new e.TextInputBinding,s.valueObserver.observe(function(e){return s.valueChanged(e)}),s.valueObserver.setValidator(function(e){return s.validateValue(e)});var o=r.languageHandler;return s.conditions=[o.get(i.kLanguageKey,"lastAbove"),o.get(i.kLanguageKey,"lastBelow"),o.get(i.kLanguageKey,"changeAbove"),o.get(i.kLanguageKey,"changeBelow")],s.triggerTypes=[o.get(i.kLanguageKey,"once"),o.get(i.kLanguageKey,"renewDaily")],s}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){this.currentAlert=new e.InfrontAlert,this.selectedRule=this.currentAlert.rule,this.selectedRule.left.md_value=new e.InfrontAlertValue,this.currentAlert.type=e.InfrontAlertTypes.INSTRUMENT_ALERT,n.prototype.newInit.call(this)},i.prototype.newBuildUI=function(){var t=this;this.containers=e.WidgetDOMFactory.create_WAlert_DOM(this.element,this.options.hideSearchBox,this.widgetTitle,this.triggerTypeObserver,this.triggerTypes,this.conditionObserver,this.conditions,this.commentObserver,this.valueObserver,this.enableSearch,this.messageString,this.modifyMode,function(e){t.sendAlert()},function(e){t.modifyAlert()},this.validity,this.infrontUI.languageHandler);var i=this.containers.searchContainer;this.searchOpts=new e.SearchBoxOptions,this.searchOpts.instrumentSelected=function(e){return t.instrumentChanged(e)},this.searchOpts.role="search",null!=this.options.instrument?this.searchOpts.preselectedInstruments=this.options.instrument:this.instrumentChanged(this.options.instrument),this.searchOpts.placeholder=this.infrontUI.languageHandler.get("myList","searchPlaceholder"),this.searchOpts.showAfterSelect=e.SearchBox.kShowTickerAndFeedCode,this.options.hideSearchBox||(this.searchBox=new e.SearchBox(i,this.infront,this.searchOpts)),this.options.instrument&&(this.instrumentChanged(this.options.instrument),this.options.instrument&&this.cache.asyncGet(function(e){var n=t.options.instrument.ticker+" ["+e+"]";t.options.hideSearchBox||t.searchBox.setText(n,!1)},e.CacheKeyFactory.createInstrumentKey(this.options.instrument),[e.MWSConstants.instrument,"feed_code"])),this.createSwitch(),n.prototype.newBuildUI.call(this)},i.prototype.newSubscribe=function(){this.setAlert(this.options.alert),n.prototype.newSubscribe.call(this)},i.prototype.createFocus=function(t){this.focusWidget&&this.focusWidget.destroy();var n=this.containers.focusContainer,i=new e.FocusWidgetOptions;i.instrument=t,i.useOriginal=!0,i.layout=e.FocusWidgetLayout.MINI,this.focusWidget=this.infrontUI.focusWidget(n,i)},i.prototype.instrumentChanged=function(e){this.options.instrument=e,this.selectedRule.left.md_value.instrument=e,!this.focusWidget&&e?this.createFocus(e):e?this.focusWidget.receiveMessage({type:InterLibraryLink.DataType.infrontInstrument,value:e}):this.focusWidget&&this.focusWidget.destroy()},i.prototype.triggerTypeChanged=function(e){this.currentAlert.trigger_type=i.recurrence[e]},i.prototype.commentChanged=function(e){this.currentAlert.comment=e},i.prototype.conditionChanged=function(t){new e.SetLabel(this.containers.selectedAlert,this.containers.selectedAlertLabel,"hide",this.conditions[t],this.conditions[t]),this.selectedRule.left.md_value.md_field=t<2?e.QuoteFields.LAST:e.QuoteFields.PCT_CHANGE,this.selectedRule.operator=0==t||2==t?e.InfrontAlertOperators.GT:e.InfrontAlertOperators.LT},i.prototype.valueChanged=function(e){this.selectedRule.right.double=InfrontUtil.parseFloatValue(e),this.validity.set(null!=this.selectedRule.right.double)},i.prototype.sendAlert=function(){var t=this,n=new e.AlertsOptions;n.trigger_type=this.currentAlert.trigger_type,n.type=this.currentAlert.type,n.rule=this.currentAlert.rule,n.comment=this.currentAlert.comment?this.currentAlert.comment:"",n.onError=function(e,n){t.messageString.set(t.infrontUI.languageHandler.get("alert","alertError"))},n.onData=function(e){t.messageString.set(""),t.closeWindow()},this.infront.addAlert(n)},i.prototype.closeWindow=function(){this.options.alertAddedClick&&this.options.alertAddedClick(),this.resetInputs()},i.prototype.newDestroyUI=function(){this.focusWidget&&this.focusWidget.destroy(),n.prototype.newDestroyUI.call(this)},i.prototype.resetInputs=function(){this.options.instrument=null,this.setAlert(null)},i.prototype.setAlert=function(t){t?(this.modifyMode.set(!0),this.currentAlert=t,this.selectedRule=t.rule,this.instrumentChanged(t.rule.left.md_value.instrument)):(this.modifyMode.set(!1),this.currentAlert=new e.InfrontAlert,this.selectedRule=this.currentAlert.rule,this.selectedRule.left.md_value=new e.InfrontAlertValue,this.selectedRule.left.md_value.md_field=e.QuoteFields.LAST,this.currentAlert.type=e.InfrontAlertTypes.INSTRUMENT_ALERT,this.selectedRule.operator=e.InfrontAlertOperators.GT,this.currentAlert.trigger_type=i.recurrence[0],this.instrumentChanged(this.options.instrument)),this.options.hideSearchBox||this.setSearchBoxToOptInstrument(),this.setObserversValue()},i.prototype.setSearchBoxToOptInstrument=function(){var t=this;this.searchOpts.preselectedInstruments=this.options.instrument||[],this.searchBox.modify(this.searchOpts),this.options.instrument&&this.cache.asyncGet(function(e){var n=t.options.instrument.ticker+" ["+e+"]";t.searchBox.setText(n,!1)},e.CacheKeyFactory.createInstrumentKey(this.options.instrument),[e.MWSConstants.instrument,"feed_code"])},i.prototype.createSwitch=function(){var t=this,n=this.containers.switchContainer;this.switchToggle=new e.Switch(n,function(e){return t.enableAlert(e)},this.alertEnabled.get(),"")},i.prototype.validateValue=function(e){return InfrontUtil.isIntegerString(e)&&0<InfrontUtil.parseFloatValue(e)||""==e||null==e},i.prototype.setObserversValue=function(){this.commentObserver.set(this.currentAlert.comment);var t=this.selectedRule.right.double?this.selectedRule.right.double.toString():"";this.valueObserver.set(t),this.switchToggle.setState(this.currentAlert.enabled);for(var n=0;n<i.recurrence.length;n++)this.currentAlert.trigger_type==i.recurrence[n]&&this.triggerTypeObserver.setSelected(n);this.selectedRule.operator==e.InfrontAlertOperators.GT?"LAST"==this.selectedRule.left.md_value.md_field?this.conditionObserver.setSelected(0):this.conditionObserver.setSelected(2):"LAST"==this.selectedRule.left.md_value.md_field?this.conditionObserver.setSelected(1):this.conditionObserver.setSelected(3)},i.prototype.modifyAlert=function(){var t=this,n=new e.ModifyAlertOptions;n.alert=this.currentAlert,n.onError=function(e,i){t.messageString.set(i),null==n.alert.rule.right.double?t.validity.set(!1):t.validity.set(!0)},n.onData=function(e){t.messageString.set(""),t.closeWindow()},this.infront.modifyAlert(n)},i.prototype.enableAlert=function(e){this.alertEnabled.set(e),this.currentAlert.enabled=e},i.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontAlert,InterLibraryLink.DataType.infrontInstrument]},i.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.infrontAlert?this.setAlert(e.value):e.type==InterLibraryLink.DataType.infrontInstrument&&(this.instrumentChanged(e.value),this.setSearchBoxToOptInstrument())},i.recurrence=["DISABLE","RENEW_DAILY"],i.kLanguageKey="alert",i}(e.SingleInstrumentWidgetBase);e.AlertWidget=n}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.kInstrumentTypes,t.showCash=!0,t.colors=["#189fde","#4dc46d","#ffb319","#f2564d","#805e9d","#3cd0ce","#aef25f","#ff8340","#d069ae","#26a69a","#ffee58","#5969bf"],t.borderColor="#001b26",t.borderWidth=2,t.enableLabels=!1,t.legend=!1,t.enable3d=!1,t.alpha=45,t.beta=0,t.depth=40,t.spacingBottom=15,t.spacingLeft=10,t.spacingRight=10,t.spacingTop=10,t.innerSize="0%",t.fontFamily="Arial, sans-serif",t.legendLabelColor="#999",t}return __extends(t,e),t}(e.TradingWidgetOptions);e.AssetsPieChartOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"portfolioPie",r)||this;return a.fullNamesCache={},a.isDirty=!0,a.updating=!1,a.data=[],a.dataBufferPrimary={},a.dataBufferSecondary={},a.lazyUpdate=!0,a.updateInterval=1,a.othersGroup={totalValue:0,instruments:{}},a.instrumentCount=0,a.totalValue=0,a.instrumentTypes={},a.instruments={},a.itemUnbinds={},a.positions=new e.ObservableArray,a.cashPositions=new e.ObservableArray,a.positions.observe(a),a.cashPositions.observe(a),a.positionsSync=new e.ObservableArraySync(a.positions),a.cashPositionsSync=new e.ObservableArraySync(a.cashPositions),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newDestroyUI=function(){this.redrawDelayTimer&&(clearTimeout(this.redrawDelayTimer),this.redrawDelayTimer=null),n.prototype.newDestroyUI.call(this)},i.prototype.createChart=function(e){var t=this,n={title:{text:null},credits:{enabled:!1},chart:{plotBackgroundColor:"transparent",backgroundColor:"transparent",plotBorderWidth:null,plotShadow:!1,style:{fontFamily:this.options.fontFamily},spacingBottom:this.options.spacingBottom,spacingLeft:this.options.spacingLeft,spacingRight:this.options.spacingRight,spacingTop:this.options.spacingTop,renderTo:this.element,options3d:{enabled:this.options.enable3d,alpha:this.options.alpha,beta:this.options.beta}},legend:{enabled:this.options.legend,layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0,navigation:{style:{color:this.options.legendLabelColor,fontSize:"11px"}},itemStyle:{color:this.options.legendLabelColor,fontSize:"11px",width:100,textOverflow:"ellipsis"},itemMarginTop:2,itemMarginBottom:2,maxHeight:this.options.legendMaxHeight,itemHoverStyle:{color:this.options.legendLabelColor}},colors:this.options.colors,tooltip:{headerFormat:"",pointFormatter:function(){var e=this,n="<span class='cell-chart--tooltip-text'><b>"+(e.fullName?e.fullName:e.name)+"</b>";return n+="<br/>",(n+=e.series.name+":<b> "+InfrontUtil.formatNumber(e.percentage,1)+"%</b><br/>"+t.languageHandler.get(i.kLanguageKey,"value")+": <b>"+InfrontUtil.formatNumber(e.displayValue,0)+"</b>")+"</span>"},useHTML:!0},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:this.options.enableLabels,format:"{point.name}"},showInLegend:!0,borderWidth:this.options.borderWidth,borderColor:this.options.borderColor,depth:this.options.depth,point:{events:{legendItemClick:function(){}}}}},series:[{id:i.seriesId,type:"pie",name:this.languageHandler.get(i.kLanguageKey,"share"),innerSize:this.options.innerSize,data:e}]};this.chart=new Highcharts.Chart(n)},i.prototype.getChart=function(){return this.chart||this.createChart(null),this.chart},i.prototype.clearChart=function(){this.chart&&this.chart.get(i.seriesId).setData(null)},i.prototype.currentPortfolioChanged=function(e){if(this.unbind){for(var t in this.instruments)this.itemUnbinds.hasOwnProperty(t)&&(this.itemUnbinds[t](),delete this.itemUnbinds[t]);this.unbind(),this.unbind=null}this.othersGroup.instruments={},this.othersGroup.totalValue=0,this.instrumentTypes={},this.instruments={},this.instrumentCount=0,this.totalValue=0,this.itemUnbinds={},this.data=[],this.clearChart(),this.lazyUpdate&&this.updateChart()},i.prototype.currentPortfolioReady=function(t){var n=this,r=[];r.push(this.cache.bindToArray(e.CacheKeyFactory.createPortfolioPositionsKey(t),this.positionsSync)),this.options.type==i.kInstrumentTypes&&this.options.showCash&&r.push(this.cache.bindToArray(e.CacheKeyFactory.createPortfolioCashPositionsKey(t),this.cashPositionsSync)),this.unbind=function(){for(var e=0;e<r.length;e++)r[e]();n.positions.clear(),n.cashPositions.clear()}},i.prototype.reInit=function(e){if(e&&0<e.length){this.othersGroup.instruments={},this.othersGroup.totalValue=0,this.instrumentTypes={},this.instruments={},this.instrumentCount=0,this.totalValue=0,this.itemUnbinds={};for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)}},i.prototype.itemAdded=function(e,t){this.options.type==i.kInstruments?this.itemAddedInstruments(e):this.options.type==i.kInstrumentTypes&&this.itemAddedInstrumentTypes(e)},i.prototype.updateOthers=function(){var e=this.chart.series[0].total;for(var t in this.instruments)if(this.othersGroup.instruments.hasOwnProperty(t))(this.instrumentCount<=5||this.othersGroup.instruments[t].y>2*e/100)&&(this.othersGroup.totalValue-=this.othersGroup.instruments[t].y,IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Add point: ",this.othersGroup.instruments[t],"Chart",this.chart),this.getChart().get(i.seriesId).addPoint(this.othersGroup.instruments[t],!1),delete this.othersGroup.instruments[t]);else if(5<this.instrumentCount){var n=this.getChart().get(t);this.options.type==i.kInstruments&&n&&n.y<2*e/100&&(this.othersGroup.totalValue+=n.y,this.othersGroup.instruments[t]={id:n.id,name:n.name,y:n.y||0,displayValue:n.displayValue},n.remove(!1))}this.fixChartData(),this.setOthersValue(this.othersGroup.totalValue)},i.prototype.setOthersValue=function(e){var t=this.getChart().get(i.kOthers);if(0==e)t&&t.remove();else{var n={id:i.kOthers,name:this.languageHandler.get(i.kLanguageKey,"others"),y:e||0,displayValue:e};n.fullName=this.getOthersDetailText(),t?(IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Update point: ",t,"To point",n,"Chart",this.chart),t.update(n,!1)):(IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Add point: ",n,"Chart",this.chart),this.getChart().get(i.seriesId).addPoint(n,!1))}this.fixChartData()},i.prototype.getOthersDetailText=function(){return this.languageHandler.get(i.kLanguageKey,"others")},i.prototype.addOrUpdatePoint=function(e,t){if(void 0===t&&(t=!0),this.chart&&this.chart.series&&0<this.chart.series.length){var n=this.chart.series[0].total,r=n,a=void 0,s=void 0;this.othersGroup.instruments.hasOwnProperty(e.id)?(s=!0,r=n-(a=this.othersGroup.instruments[e.id]).y+e.y):(s=!1,(a=this.getChart().get(e.id))&&(r=n-a.y+e.y)),this.options.type==i.kInstruments&&5<this.instrumentCount&&e.y<2*r/100?(s?(this.othersGroup.totalValue+=e.y-a.y,this.othersGroup.instruments[e.id]=e):(this.othersGroup.totalValue+=e.y,this.othersGroup.instruments[e.id]=e,a&&a.remove),this.setOthersValue(this.othersGroup.totalValue)):s?(this.othersGroup.totalValue-=a.y,delete this.othersGroup.instruments[e.id],this.setOthersValue(this.othersGroup.totalValue),IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Add point: ",e,"Chart",this.chart),this.getChart().get(i.seriesId).addPoint(e,!1)):a?(IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Update point: ",a,"To point",e,"Chart",this.chart),a.update(e)):(IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Add point: ",e,"Chart",this.chart),this.getChart().get(i.seriesId).addPoint(e,!1)),this.updateOthers(),t&&this.getChart().get(i.seriesId).data.sort(function(e,t){return t.y-e.y}),this.fixChartData()}},i.prototype.setDirty=function(){var e=this;this.lazyUpdate&&(this.isDirty=!0,this.updateTimer||(this.updateTimer=setTimeout(function(){e.updateChart(),IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Lazy update"),e.updateTimer=null},1e3*this.updateInterval)))},i.prototype.lazyUpdatePointValue=function(e,t,n,r){this.getChart();var a={};this.dataBufferPrimary[e]&&(a=this.dataBufferPrimary[e]),a.id=e,a.name=(this.fullNamesCache[e+"name"]?this.fullNamesCache[e+"name"]:t)||this.languageHandler.get(i.kLanguageKey,"unknown"),a.fullName=this.fullNamesCache[e]||t||this.languageHandler.get(i.kLanguageKey,"unknown"),a.y=n||0,a.displayValue=r,this.dataBufferPrimary[e]=a,this.setDirty()},i.prototype.lazyUpdatePointName=function(e,t){this.getChart();var n={};this.dataBufferPrimary[e]&&(n=this.dataBufferPrimary[e]),n.id=e,n.name=(this.fullNamesCache[e+"name"]?this.fullNamesCache[e+"name"]:t)||this.languageHandler.get(i.kLanguageKey,"unknown"),n.fullName=this.fullNamesCache[e]||t||this.languageHandler.get(i.kLanguageKey,"unknown"),this.dataBufferPrimary[e]=n,this.setDirty()},i.prototype.updatePoint=function(e,t,n,r){var a=this,s={id:e,name:(this.fullNamesCache[e+"name"]?this.fullNamesCache[e+"name"]:t)||this.languageHandler.get(i.kLanguageKey,"unknown"),y:n||0,displayValue:r};s.fullName=this.fullNamesCache[e]||t||this.languageHandler.get(i.kLanguageKey,"unknown"),this.getChart(),this.addOrUpdatePoint(s),this.redrawDelayTimer||(this.redrawDelayTimer=setTimeout(function(){a.chart&&a.chart.redraw(!1),a.redrawDelayTimer=null},1e3))},i.prototype.itemAddedInstrumentTypes=function(t){var n=this;this.cache.asyncGet(function(i){n.instrumentTypes.hasOwnProperty(i)||(n.instrumentTypes[i]=0),n.instruments.hasOwnProperty(t)||(n.instruments[t]=0,n.instrumentCount++),n.unbind&&(n.itemUnbinds.hasOwnProperty(t)&&n.itemUnbinds[t](),n.itemUnbinds[t]=n.cache.customBind(t,e.TradingManager.kBaseMarketValue,e.BindingFactory.createInlineBinding(function(e){var r=InfrontUtil.isNumber(e)&&e!=1/0?e:0,a=(n.instrumentTypes[i]||0)-(n.instruments[t]||0)+r;n.instrumentTypes[i]=a||0,n.instruments[t]=r,n.updatePoint(i,InfrontUtil.formatEnumString(i),0<n.instrumentTypes[i]?n.instrumentTypes[i]:0,0<n.instrumentTypes[i]?n.instrumentTypes[i]:0)})))},t,[e.MWSConstants.instrument,e.MWSConstants.instrument_type])},i.prototype.itemAddedInstruments=function(t){var n=this,r=this.cache.get(t,["instrument","ticker"]),a=this.cache.get(t,["instrument","feed"]),s=null;if("Hidden"==r&&(r=this.languageHandler.get(i.kLanguageKey,"hideden")),void 0===this.fullNamesCache[t]){this.fullNamesCache[t]="";var o=new e.DataOptions;o.onError=InfrontUtil.errorLogCallback,o.onData=function(i){if(i&&InfrontUtil.isArray(i)&&0<i.length&&(i=i[0]),s=i&&i[e.MWSConstants.instrument]&&i[e.MWSConstants.instrument][e.MWSConstants.full_name]?i[e.MWSConstants.instrument][e.MWSConstants.full_name]:null)if(n.fullNamesCache[t]=s,"FUND"==i[e.MWSConstants.instrument][e.MWSConstants.instrument_type]&&(n.fullNamesCache[t+"name"]=s),!n.lazyUpdate&&n.chart&&i[e.MWSConstants.instrument]){var a=n.chart.get(t);if(a){var o={};o.fullName=s,"FUND"==i[e.MWSConstants.instrument][e.MWSConstants.instrument_type]&&(o.name=s),IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Update point: ",a,"To point",o,"Chart",n.chart),a.update(o)}}else n.lazyUpdate&&i[e.MWSConstants.instrument]&&n.lazyUpdatePointName(t,r)},this.infront.instrumentInfo(a,r,o)}this.instruments[t]=0,this.instrumentCount++,this.itemUnbinds.hasOwnProperty(t)&&this.itemUnbinds[t](),this.itemUnbinds[t]=this.cache.customBind(t,e.TradingManager.kBaseMarketValue,e.BindingFactory.createInlineBinding(function(e){var i=InfrontUtil.isNumber(e)&&Math.abs(e)!=1/0?e:0,a=Math.abs(i);n.infrontUI.isTradingLoggedIn()&&(n.lazyUpdate?n.lazyUpdatePointValue(t,r,a,i):n.updatePoint(t,r,a,i))}))},i.prototype.itemRemoved=function(t,n){if(this.itemUnbinds.hasOwnProperty(t)&&(this.itemUnbinds[t](),delete this.itemUnbinds[t]),this.options.type==i.kInstrumentTypes){var r=this.cache.get(t,[e.MWSConstants.instrument,e.MWSConstants.instrument_type]);this.instrumentTypes.hasOwnProperty(r)&&(this.instrumentTypes[r]-=this.instruments[t],this.instrumentTypes[r]<=0&&((a=this.getChart().get(t))&&a.remove(),delete this.instrumentTypes[r]),delete this.instruments[t],this.instrumentCount--)}else if(this.options.type==i.kInstruments&&!this.lazyUpdate){var a;if(a=this.getChart().get(t))a.remove();else if(this.othersGroup.instruments[t]){for(var s in delete this.othersGroup.instruments[t],this.othersGroup.totalValue=0,this.othersGroup.instruments)this.othersGroup.totalValue+=this.othersGroup.instruments[s].y;var o={id:i.kOthers,name:this.languageHandler.get(i.kLanguageKey,"others"),fullName:this.getOthersDetailText(),y:this.othersGroup.totalValue||0,displayValue:this.othersGroup.totalValue};a=this.getChart().get(o.id),0<this.othersGroup.totalValue&&a?(IDS.DEBUG_WIDGET_ASSETSPIECHART&&IDS.log("AssetsPieChart - Update point: ",a,"To point",o,"Chart",this.chart),a.update(o)):a&&a.remove()}}this.fixChartData()},i.prototype.itemMoved=function(e,t,n){},i.prototype.fixChartData=function(){if(this.chart&&0<this.chart.series.length)for(var e=this.chart.get(i.seriesId),t=e.data.length-1;0<=t;t--)e.data[t]||(e.data.splice(t),e.xData.splice(t),e.yData.splice(t),e.points.splice(t))},i.prototype.beginUpdate=function(){this.updating=!0},i.prototype.endUpdate=function(){this.updating=!1},i.prototype.updateClonePoint=function(e,t){var n={};return n.id=t.id?t.id:e.id,n.name=t.name?t.name:e.name,n.fullName=t.fullName?t.fullName:e.fullName,n.y=null!=t.y?t.y:e.y,n.displayValue=null!=t.displayValue?t.displayValue:e.displayValue,n},i.prototype.updateChart=function(){if(this.lazyUpdate&&this.isDirty){this.isDirty=!1;var e=this.dataBufferPrimary,t=[].concat(this.data),n={},r=void 0;this.dataBufferPrimary={};for(var a=this.totalValue=0;a<this.data.length;a++)r=this.data[a],this.totalValue+=r.y,r.id&&e.hasOwnProperty(r.id)&&(r=this.updateClonePoint(r,e[r.id]),this.data[a]=r,delete e[(t[a]=r).id]);for(var s in e)r=this.updateClonePoint(e[s],{}),this.data.push(r),t.push(r),this.totalValue+=e[s].y;if(e={},5<this.data.length){for(n.id=i.kOthers,n.name=this.languageHandler.get(i.kLanguageKey,"others"),n.fullName=this.getOthersDetailText(),n.y=0,n.displayValue=0,a=t.length-1;0<=a;a--)t[a].y<2*this.totalValue/100&&(n.y+=t[a].y,n.displayValue+=t[a].displayValue,t.splice(a,1));(0<n.y||0<n.displayValue)&&t.push(n)}t.sort(function(e,t){return t.y-e.y}),this.clearChart(),this.getChart().get(i.seriesId).setData(t)}},i.kLanguageKey="assetsPieChart",i.kInstrumentTypes="instrumentTypes",i.kInstruments="instruments",i.seriesId="portfolioContents",i.kOthers="Others",i}(e.TradingWidgetBase);e.AssetsPieChart=n}(Infront||(Infront={})),function(e){var t,n,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nominalAmount=1e3,t.nominalInterestRate=2,t.cleanPricePercent=100,t.taxRatePercent=25,t.yieldPercent=2,t.redemptionPrice=100,t.currencies=["EUR","USD","GBP","JPY","NOK","SEK","DKK"],t}return __extends(t,e),t}(e.WidgetOptions);e.BondsCalculatorOptions=i,(n=t=e.BondsCalculatorTab||(e.BondsCalculatorTab={})).TabMain="tabMain",n.TabCashFlow="tabCashFlow",n.TabOther="tabOther";var r,a,s="fixedBond",o="floatingBond";(a=r=e.CouponFrequency||(e.CouponFrequency={})).monthly="monthly",a.quarterly="quarterly",a.four_month_interval="four_month_interval",a.semi_annually="semi_annually",a.annually="annually";var l,c,d=[r.monthly,r.quarterly,r.four_month_interval,r.semi_annually,r.annually];(c=l=e.CalculationMethod||(e.CalculationMethod={})).german_30_360="german_30_360",c.german_30_365="german_30_365",c.french_act_360="french_act_360",c.english_act_365="english_act_365",c.isma_act_act="isma_act_act",c.isma_30e_360="isma_30e_360";var u=[l.german_30_360,l.german_30_365,l.french_act_360,l.english_act_365,l.isma_act_act,l.isma_30e_360],h=function(n){function a(t,i,r){var a=n.call(this,t,i,"bondsCalculator",r)||this;return a.bondTypes=[s,o],a.isUpdating=!1,a.ready=!1,a.instrumentSelected=function(e){a.setSearchBoxInstrument(e)},a.searchFilter=function(t){return(t.hasOwnProperty(e.MWSConstants.instrument)?t[e.MWSConstants.instrument][e.MWSConstants.instrument_type]:null)===InfrontConstants.InstrumentType.BOND},a.amountChanged=function(){a.updateCalculator()},a.onDateChanged=function(e){a.updateCalculator()},a.onDropDownChanged=function(e){a.updateCalculator()},a.onSelectTab=function(e){a.activeTab.set(e)},a.onReceiveBondData=function(e){a.resultPanel&&a.resultPanel.applyResult(e),a.cashFlowPanel&&a.cashFlowPanel.applyResult(e)},a.onReceiveErrorResponse=function(e,t){a.resultPanel&&a.resultPanel.displayErrorMessage(e,t)},a}return __extends(a,n),a.prototype.newInit=function(){n.prototype.newInit.call(this)},a.prototype.newBuildUI=function(){var i=this;this.activeTab=new e.Observable(t.TabMain),this.nominalAmount=new e.TextInputBinding,this.nominalAmount.setNumeric(!0),this.nominalAmount.setValidator(function(e){return 0<InfrontUtil.parseFloatValue(e)}),this.nominalAmount.set(InfrontUtil.formatNumber(this.options.nominalAmount,0)),this.nominalAmount.onBlur(this.amountChanged),this.fixedRate=new e.TextInputBinding,this.fixedRate.setNumeric(!0),this.fixedRate.setValidator(function(e){return InfrontUtil.isNumeric(e)}),this.fixedRate.set(InfrontUtil.formatNumber(this.options.nominalInterestRate,0)),this.fixedRate.onBlur(this.amountChanged),this.cleanPricePercent=new e.TextInputBinding,this.cleanPricePercent.setNumeric(!0),this.cleanPricePercent.setValidator(function(e){return InfrontUtil.isNumeric(e)}),this.cleanPricePercent.set(InfrontUtil.formatNumber(this.options.cleanPricePercent,0)),this.cleanPricePercent.onBlur(this.amountChanged),this.redemptionPrice=new e.TextInputBinding,this.redemptionPrice.setNumeric(!0),this.redemptionPrice.setValidator(function(e){return InfrontUtil.isNumeric(e)}),this.redemptionPrice.set(InfrontUtil.formatNumber(this.options.redemptionPrice,0)),this.redemptionPrice.onBlur(this.amountChanged),this.taxRatePercent=new e.TextInputBinding,this.taxRatePercent.setNumeric(!0),this.taxRatePercent.setValidator(function(e){return InfrontUtil.isNumeric(e)}),this.taxRatePercent.set(InfrontUtil.formatNumber(this.options.taxRatePercent,0)),this.taxRatePercent.onBlur(this.amountChanged),this.yieldPercent=new e.TextInputBinding,this.yieldPercent.setNumeric(!0),this.yieldPercent.setValidator(function(e){return InfrontUtil.isNumeric(e)}),this.yieldPercent.set(InfrontUtil.formatNumber(this.options.yieldPercent,0)),this.yieldPercent.onBlur(this.amountChanged),this.frequencyItems=new e.ObservableArray,this.couponFrequency=new e.SelectInputBinding,this.couponFrequency.observe(function(e){return i.onDropDownChanged(e)}),this.dayCountItems=new e.ObservableArray,this.dayCountConvention=new e.SelectInputBinding,this.dayCountConvention.observe(function(e){return i.onDropDownChanged(e)}),this.calculationMethodItems=new e.ObservableArray,this.calculationMethod=new e.SelectInputBinding,this.calculationMethod.observe(function(e){return i.onDropDownChanged(e)}),this.bondTypeItems=new e.ObservableArray,this.bondType=new e.SelectInputBinding,this.bondType.observe(function(e){return i.onDropDownChanged(e)}),this.currencyItems=new e.ObservableArray,this.currency=new e.SelectInputBinding,this.currency.observe(function(e){return i.onDropDownChanged(e)}),this.domElements=e.WidgetDOMFactory.create_WBondsCalculator_DOM(this.element,this.widgetTitle,this.activeTab,this.bondType,this.bondTypeItems,this.currency,this.currencyItems,this.nominalAmount,this.fixedRate,this.couponFrequency,this.frequencyItems,this.dayCountConvention,this.dayCountItems,this.calculationMethod,this.calculationMethodItems,this.cleanPricePercent,this.redemptionPrice,this.taxRatePercent,this.yieldPercent,this.languageHandler),this.createTabs(),this.createDateSelectors(),this.initializeDropdowns(),this.createPanels(),this.initializeSymbolSearch(),n.prototype.newBuildUI.call(this),this.ready=!0,this.updateCalculator()},a.prototype.createTabs=function(){var t=new e.TabbedContainerOptions;t.tabs=[],t.tabs.push(new e.TabOptions(e.SwapCalculatorTab.TabMain,this.languageHandler.get(this.languageKey,e.SwapCalculatorTab.TabMain),!0)),t.tabs.push(new e.TabOptions(e.SwapCalculatorTab.TabCashFlow,this.languageHandler.get(this.languageKey,e.SwapCalculatorTab.TabCashFlow))),t.onSelect=this.onSelectTab,this.tabBar=new e.TabbedContainer(this.domElements.tabBar,t)},a.prototype.createDateSelectors=function(){this.valueDateSelector=new e.DateSelector(this.domElements.valueDate,this.infrontUI.languageHandler,this.onDateChanged),this.issueDateSelector=new e.DateSelector(this.domElements.issueDate,this.infrontUI.languageHandler,this.onDateChanged),this.firstCouponDateSelector=new e.DateSelector(this.domElements.firstCouponDate,this.infrontUI.languageHandler,this.onDateChanged),this.firstCouponDateSelector.setDate(InfrontUtil.addMonths(InfrontUtil.today(),12)),this.lastCouponDateSelector=new e.DateSelector(this.domElements.lastCouponDate,this.infrontUI.languageHandler,this.onDateChanged),this.lastCouponDateSelector.setDate(InfrontUtil.addMonths(InfrontUtil.today(),120)),this.maturityDateSelector=new e.DateSelector(this.domElements.maturityDate,this.infrontUI.languageHandler,this.onDateChanged),this.maturityDateSelector.setDate(InfrontUtil.addMonths(InfrontUtil.today(),120))},a.prototype.initializeDropdowns=function(){var t=this;this.bondTypes.forEach(function(n){var i=t.languageHandler.get(t.languageKey,n);t.bondTypeItems.push(new e.DropdownParam(i,n))}),this.options.currencies.forEach(function(n){t.currencyItems.push(new e.DropdownParam(n,n))}),d.forEach(function(n){var i=t.languageHandler.get(t.languageKey,n);t.frequencyItems.push(new e.DropdownParam(i,n))}),["german_30_360","german_30_365","french_act_360","english_act_365","isma_act_act","isma_30e_360"].forEach(function(n){var i=t.languageHandler.get(t.languageKey,n);t.dayCountItems.push(new e.DropdownParam(i,n))}),u.forEach(function(n){var i=t.languageHandler.get(t.languageKey,n);t.calculationMethodItems.push(new e.DropdownParam(i,n))});var n=d.indexOf(r.annually);-1<n&&this.couponFrequency.setSelected(n,!1)},a.prototype.createPanels=function(){this.calculatorResponse=new e.CalculatorBondResponse;var t=new g;this.resultPanel=new f(this.domElements.resultPanel,this.infrontUI,this.calculatorResponse,t);var n=new p;this.cashFlowPanel=new m(this.domElements.cashFlowPanel,this.infrontUI,this.calculatorResponse,n)},a.prototype.beginUpdate=function(){this.isUpdating=!0},a.prototype.endUpdate=function(){this.isUpdating=!1,this.updateCalculator()},a.prototype.setSearchBoxInstrument=function(e){var t=this;this.searchOptions&&this.searchBox&&this.searchOptions.preselectedInstruments!=e&&(this.searchOptions.preselectedInstruments=e,this.searchBox.modify(this.searchOptions),e?this.infront.getSymbols([e],[],function(n){t.beginUpdate(),console.log.apply(console,["getSymbols:"].concat(n.inspect())),t.applySymbol(e,n);var i=e.full_name+" ["+n.GetExchangeCode()+"]";t.searchBox.setText(i,!1),t.endUpdate()},0,!1):this.searchBox.clear(!1))},a.prototype.applySymbol=function(e,t){var n=t.getValueOrNull(IDS.RealtimeTags.BondReferenceRate),i=1===e.full_name.indexOf("FRN");this.setBondType(n||i?o:s),this.setCurrency(t.getValueOrNull(IDS.RealtimeTags.Currency));var a=t.getValueOrNull(IDS.RealtimeDateTime.IssueDate);a&&this.issueDateSelector.setDate(a);var c=t.getValueOrNull(IDS.RealtimeDateTime.MaturityDate);c&&this.maturityDateSelector.setDate(c);var d=t.getValueOrNull(IDS.RealtimeTags.BondRedemptionPrice);d&&this.redemptionPrice.set(InfrontUtil.formatNumber(d,2));var u=t.getValueOrNull(IDS.RealtimeTags.CouponsPerYear);if(u)switch(u){case 1:this.setCouponFrequency(r.annually);break;case 2:this.setCouponFrequency(r.semi_annually);break;case 3:this.setCouponFrequency(r.four_month_interval);break;case 4:this.setCouponFrequency(r.quarterly);break;case 12:this.setCouponFrequency(r.monthly)}else switch(this.getCouponFrequency()){case r.annually:u=1;break;case r.semi_annually:u=2;break;case r.four_month_interval:u=3;break;case r.quarterly:u=4;break;case r.monthly:u=12}var h=t.getValueOrNull(IDS.RealtimeTags.DayCountConvention);if(h)switch(h){case IDS.DayCountConvention.Conv_30E_360:this.setDayCountConvention(l.german_30_360);break;case IDS.DayCountConvention.Conv_ACT_360:case IDS.DayCountConvention.Conv_ACT_ACT:this.setDayCountConvention(l.french_act_360);break;case IDS.DayCountConvention.Conv_30U_360:this.setDayCountConvention(l.german_30_360);break;case IDS.DayCountConvention.Conv_ACT_365_FIXED:this.setDayCountConvention(l.english_act_365);break;case IDS.DayCountConvention.Conv_30_365:this.setDayCountConvention(l.german_30_365);break;case IDS.DayCountConvention.Conv_ACT_365_LEAP:this.setDayCountConvention(l.english_act_365)}var p=t.getValueOrNull(IDS.RealtimeDateTime.FirstCouponDate);this.setCouponDates(a,c,p,u)},a.prototype.initializeSymbolSearch=function(){if(this.options.showSearchWidget){var t=new e.SearchBoxOptions;t.placeholder=this.languageHandler.get(this.languageKey,"searchPlaceholder"),t.maxResults=30,t.searchThreshold=2,t.itemTypes=[e.SearchBox.kTypeInstrument],t.instrumentTypes=[InfrontConstants.InstrumentType.BOND],t.instrumentSelected=this.instrumentSelected,this.searchOptions=t,this.searchBox=new e.SearchBox(this.domElements.searchBox,this.infront,t)}},a.prototype.setBondType=function(e){var t=this.bondTypes.indexOf(e);-1<t&&this.bondType.setSelected(t)},a.prototype.setCurrency=function(e){var t=this.options.currencies.indexOf(e);-1<t&&this.currency.setSelected(t)},a.prototype.getCurrency=function(){return this.currencyItems.item(this.currency.getSelectedIndex()).value},a.prototype.setCouponFrequency=function(e){var t=d.indexOf(e);-1<t&&this.couponFrequency.setSelected(t)},a.prototype.getCouponFrequency=function(){return this.frequencyItems.item(this.couponFrequency.getSelectedIndex()).value},a.prototype.setDayCountConvention=function(e){var t=u.indexOf(e);-1<t&&this.dayCountConvention.setSelected(t)},a.prototype.getInterestCalculationMethod=function(){return this.calculationMethodItems.item(this.calculationMethod.getSelectedIndex()).value},a.prototype.getBondType=function(){return this.bondTypeItems.item(this.bondType.getSelectedIndex()).value},a.prototype.setCouponDates=function(e,t,n,i){if(InfrontUtil.isDate(e)&&InfrontUtil.isDate(t)){var r=InfrontUtil.isDate(t),a=12/i,s=void 0,o=void 0;if(r)for(o=s=t;e<s&&e<=o;)n=s,s=InfrontUtil.addMonths(s,-a),o=InfrontUtil.addMonths(s,-a);else n||(n=InfrontUtil.addMonths(e,a));var l=void 0;if(r)l=t;else for(s=e;s<=t;)l=s,s=InfrontUtil.addMonths(s,a);InfrontUtil.isDate(n)&&this.firstCouponDateSelector.setDate(n),InfrontUtil.isDate(l)&&this.lastCouponDateSelector.setDate(l)}},a.prototype.updateCalculator=function(){if(this.ready&&!this.isUpdating){var t=new e.CalculateBondOptions;t.bondType=this.getBondType(),t.currency=this.getCurrency(),t.startDate=this.issueDateSelector.getDate(),t.endDate=this.maturityDateSelector.getDate(),t.valuationDate=this.valueDateSelector.getDate(),t.firstCouponDate=this.firstCouponDateSelector.getDate(),t.lastCouponDate=this.lastCouponDateSelector.getDate(),t.fixRate=InfrontUtil.parseNumber(this.fixedRate.get()),t.frequency=this.getCouponFrequency(),t.interestCalculationMethod=this.getInterestCalculationMethod(),t.marginalTaxRate=InfrontUtil.parseNumber(this.taxRatePercent.get()),t.notional=InfrontUtil.parseNumber(this.nominalAmount.get()),t.redemption=InfrontUtil.parseNumber(this.redemptionPrice.get()),t.yield=InfrontUtil.parseNumber(this.yieldPercent.get()),t.response=this.calculatorResponse,t.onData=this.onReceiveBondData,t.onError=this.onReceiveErrorResponse,t.isIdentical(this.bondOptions)||(this.calculatorResponse.clear(),this.resultPanel.clear(),this.cashFlowPanel.clear(),(this.bondOptions=t).bondType==s?(IDS.log("calculateFixBond:",t),this.infront.calculateFixBond(t)):(IDS.log("calculateFloatingBond:",t),this.infront.calculateFloatingBond(t)))}},a.prototype.returnDefaultWidgetOptions=function(){return new i},a}(e.WidgetBase);e.BondsCalculatorWidget=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.WidgetOptions);e.BondsCalculatorCashFlowWidgetOptions=p;var m=function(t){function n(e,n,i,r){var a=t.call(this,e,n,"bondsCalculator",r)||this;return a.isInitialized=!1,a}return __extends(n,t),n.prototype.newInit=function(){t.prototype.newInit.call(this)},n.prototype.clear=function(){this.cashFlowItems&&this.cashFlowItems.clear()},n.prototype.applyResult=function(t){var n=this;this.cashFlowItems.clear(),t.getArray(e.CalculatorBondInfoTag.bond_cash_flows).data.forEach(function(e){n.cashFlowItems.push(e)})},n.prototype.displayErrorMessage=function(e,t){},n.prototype.newBuildUI=function(){this.cashFlowItems=new e.ObservableArray,e.WidgetDOMFactory.create_WBondsCalculator_cashFlow_DOM(this.element,this.cashFlowItems,this.languageHandler),t.prototype.newBuildUI.call(this),this.isInitialized=!0},n.prototype.returnDefaultWidgetOptions=function(){return new e.SwapCalculatorCashFlowWidgetOptions},n}(e.WidgetBase);e.BondsCalculatorCashFlowWidget=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.WidgetOptions);e.BondsCalculatorResultWidgetOptions=g;var f=function(t){function n(e,n,i,r){var a=t.call(this,e,n,"bondsCalculator",r)||this;return a.isInitialized=!1,a.calculatorResponse=i,a}return __extends(n,t),n.prototype.newInit=function(){t.prototype.newInit.call(this)},n.prototype.clear=function(){this.isInitialized&&(this.yieldPercent.set(void 0),this.cleanPricePercent.set(void 0),this.grossYieldPercent.set(void 0),this.remainingMaturity.set(void 0),this.netYieldPercent.set(void 0),this.duration.set(void 0),this.accruedInterestDays.set(void 0),this.modifiedDuration.set(void 0),this.accruedInterest.set(void 0),this.basisPointValue.set(void 0),this.dirtyPricePercent.set(void 0),this.convexity.set(void 0))},n.prototype.applyResult=function(e){this.isInitialized&&(this.hasValidResponse.set(!0),this.statusText.set(""))},n.prototype.displayErrorMessage=function(e,t){this.hasValidResponse.set(!1),this.statusText.set(this.languageHandler.get("calculatorStatus","statusCode_"+e))},n.prototype.newBuildUI=function(){this.yieldPercent=this.calculatorResponse.getField(e.CalculatorBondInfoTag.yield_in_percent),this.cleanPricePercent=this.calculatorResponse.getField(e.CalculatorBondInfoTag.clean_price_in_percent),this.grossYieldPercent=this.calculatorResponse.getField(e.CalculatorBondInfoTag.gross_yield_in_percent),this.remainingMaturity=this.calculatorResponse.getField(e.CalculatorBondInfoTag.maturity_in_years),this.netYieldPercent=this.calculatorResponse.getField(e.CalculatorBondInfoTag.net_yield_in_percent),this.duration=this.calculatorResponse.getField(e.CalculatorBondInfoTag.duration),this.accruedInterestDays=this.calculatorResponse.getField(e.CalculatorBondInfoTag.accrued_interest_days),this.modifiedDuration=this.calculatorResponse.getField(e.CalculatorBondInfoTag.modified_duration),this.accruedInterest=this.calculatorResponse.getField(e.CalculatorBondInfoTag.accrued_interest),this.basisPointValue=this.calculatorResponse.getField(e.CalculatorBondInfoTag.basis_point_value_in_points),this.dirtyPricePercent=this.calculatorResponse.getField(e.CalculatorBondInfoTag.dirty_price_in_percent),this.convexity=this.calculatorResponse.getField(e.CalculatorBondInfoTag.convexity),this.statusText=new e.Observable,this.hasValidResponse=new e.Observable(!1),e.WidgetDOMFactory.create_WBondsCalculator_result_DOM(this.element,this.yieldPercent,this.cleanPricePercent,this.grossYieldPercent,this.remainingMaturity,this.netYieldPercent,this.duration,this.accruedInterestDays,this.modifiedDuration,this.accruedInterest,this.basisPointValue,this.dirtyPricePercent,this.convexity,this.statusText,this.hasValidResponse,this.languageHandler),t.prototype.newBuildUI.call(this),this.isInitialized=!0},n.prototype.returnDefaultWidgetOptions=function(){return new e.SwapCalculatorResultWidgetOptions},n}(e.WidgetBase);e.BondsCalculatorResultWidget=f}(Infront||(Infront={})),function(e){var t,n,i;(t=e.BondsTradeType||(e.BondsTradeType={}))[t.SPOT=0]="SPOT",t[t.FORWARD=1]="FORWARD",(n=e.BondsActions||(e.BondsActions={}))[n.BUY=0]="BUY",n[n.SELL=1]="SELL",(i=e.BondsTradingState||(e.BondsTradingState={}))[i.DATA_ENTRY=0]="DATA_ENTRY",i[i.CONFIRM=1]="CONFIRM",i[i.MODIFY=2]="MODIFY",i[i.SUCCESS=3]="SUCCESS",i[i.ERROR=4]="ERROR";var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.searchTickersOnly=!1,t.modifyOrderId=0,t.modifyPortfolio="",t.confirmation=!0,t.closeOnComplete=!1,t.keepInstrumentOnNew=!0,t}return __extends(t,e),t.prototype.hasInstrument=function(){return InfrontUtil.isObject(this.instrument)&&InfrontUtil.isNumber(this.instrument.feed)&&InfrontUtil.isString(this.instrument.ticker)},t}(e.TradingWidgetOptions);e.BondsTradingWidgetOptions=r;var a=function(t){function n(n,i,r){var a=t.call(this,n,i,"bondstrading",r)||this;return a.feedMetaData={},a.forwards_instruments=[],a.bondsList=[],a.loanAccount="L\xe5nesagskonto",a.moduleTag="[SYDBANK-WEB-MODULE]: ",a.dropdownLabelVisibility=new e.Observable(!1),a.errorMessage=new e.Observable(null),a.statusMessage=new e.Observable(null),a.displayForwardValues=new e.Observable(!1),a.tradingManager=a.infront.getTradingManager(),a.typeSelectionVisibility=new e.Observable(0),a.date=new e.Observable(null),a.internalDepotNumber=new e.Observable(null),a.bondSpotPrice=new e.Observable,a.bondSpotPrice.set(0),a.currentPortfolio=new e.Observable,a.currentInstrument=new e.Observable(null),a.forwardPrice=new e.Observable(null),a.clientForwardPrice=new e.Observable(null),a.discount=new e.Observable(null),a.premium=new e.Observable(null),a.clientSpotPrice=new e.Observable,a.tradeType=new e.Observable(e.BondsTradeType.FORWARD),a.tradeAction=new e.Observable(e.BondsActions.SELL),a.disableBuySell=new e.Observable(!0),a.nominalBinding=new e.TextInputBinding,a.nominalBinding.setValidator(function(e){return InfrontUtil.isNumber(InfrontUtil.parseFloatValue(e))&&0<InfrontUtil.parseFloatValue(e)}),a.nominalBinding.observe(function(e){return a.nominalInputChange(e)}),a.nominalBinding.setNumeric(!0),a.forwardDateBinding=new e.Observable,a.depositNumberBinding=new e.TextInputBinding,a.depositNumberBinding.observe(function(e){return a.depositNumberChange(e)}),a.depositNumberBinding.setValidator(function(e){return"string"==typeof e&&""!==e}),a.loanTransactionAcc=new e.TextInputBinding,a.loanTransactionAcc.setValidator(function(e){return InfrontUtil.isIntegerString(e)&&0<InfrontUtil.parseFloatValue(e)&&15==e.length}),a.loanTransactionAcc.observe(function(e){return a.loanTransactionAccChange(e)}),a.loanTransactionAcc.setNumeric(!0),a.loanTransactionAcc.setPlaceholder("Kontonummer 15 cifre"),a.freeText=new e.TextInputBinding,a.freeText.observe(function(e){return a.freeTextChange(e)}),a.instrumentValues=new e.Observable,a.forwardOrdersCheck={},a.nominalBinding.setEnabled(!1),a.depositNumberBinding.setEnabled(!1),a.freeText.setEnabled(!1),a.loanTransactionAcc.setEnabled(!1),a.bondsListIndexObj={},a}return __extends(n,t),n.prototype.newInit=function(){var n=this;this.loadFeed(2357);var i=this.getInstrumentsRequestOptions(this.options.availableFeeds,function(i){n.instruments=i.instruments,n.forwards_instruments=InfrontUtil.arrayDeepCopy(n.instruments),n.forwards_instruments.forEach(function(e){e.feed="number"==typeof n.options.forwardCurveFeeds?n.options.forwardCurveFeeds:n.options.forwardCurveFeeds[0]}),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",n.instruments),n.instrumentObserver=new e.ContinouslyFilteredInstrumentObserver(n.cache,n.instruments),t.prototype.newInit.call(n)});this.infront.referenceData(i)},n.prototype.getInstrumentsRequestOptions=function(t,n){var i=this,r=new e.ReferenceDataOptions;return"number"==typeof this.options.availableFeeds?r.feedNumber=t:r.feedNumber=t[0],r.onError=function(e,t){i.options.errorCallback&&i.options.errorCallback(i.moduleTag+"ERROR "+e+", "+t),InfrontUtil.errorLogCallback},r.onData=n,r},n.prototype.loadBondsList=function(e){for(var t=this,n=0,i=0,r=this.instruments;i<r.length;i++){var a=r[i];this.bondsListIndexObj[a.ticker]=n,this.bondsList.push({instrument:a}),this.getValueFromCache(a,IDS.RealtimeTags.Ask,"ask"),this.getValueFromCache(a,IDS.RealtimeTags.Bid,"bid"),this.getValueFromCache(a,IDS.RealtimeTags.Last,"last"),n++}this.infront.snapshot(this.forwards_instruments,["LAST_VALID","LAST_VALID_DATE","BID","ASK","FORWARD_CURVES","TIME"],!0,function(e){var i=e[0];if(t.bondsListIndexObj.hasOwnProperty(i.instrument.ticker)){var r=t.bondsListIndexObj[i.instrument.ticker];t.bondsList[r].forward_curves=i.forward_curves}else t.bondsListIndexObj[i.instrument.ticker]=n,t.bondsList.push(i),n++;100<t.bondsList.length&&IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",t.bondsList)})},n.prototype.getValueFromCache=function(e,t,n){var i=this;this.cache.inlineSymbolBind(e,t,function(t){if(i.bondsListIndexObj.hasOwnProperty(e.ticker))i.bondsList[i.bondsListIndexObj[e.ticker]][n]=t;else{var r={};r.instrument=e,r[n]=t,i.bondsList.push(r)}})},n.prototype.updateBondInstrument=function(e,t,n){if(this.bondsList[e]=t,n)for(var i=Object.getOwnPropertyNames(n),r=0;r<i.length;r++)0==t.hasOwnProperty(i[r])&&(this.bondsList[e][i[r]]=n[i[r]]);return this.bondsList[e]},n.prototype.newBuildUI=function(){var n=this,i=new InfrontUtil.MultiCallbackHandler(function(){IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",n.bondsList)});this.loadBondsList(i.addCallback(function(){}));var r=e.WidgetDOMFactory.create_WBondsTrading_DOM(this.element,this.options.widgetTitle,function(e){return n.bondTypeClick(e)},function(e){return n.onSelectBuySellClick(e)},function(){n.submitClick()},function(){n.resetClick()},this.typeSelectionVisibility,this.nominalBinding,this.forwardDateBinding,this.depositNumberBinding,this.loanTransactionAcc,this.freeText,this.currentInstrument,this.disableBuySell,this.tradeType,this.tradeAction,this.date,this.instrumentValues,this.forwardPrice,this.clientForwardPrice,this.discount,this.premium,this.bondSpotPrice,this.clientSpotPrice,this.displayForwardValues,this.dropdownLabelVisibility,this.errorMessage,this.statusMessage,this.infrontUI.languageHandler);this.attachSearchBoxToElement(r.searchBoxContainer),this.attachPortfolioSelector(r.portfolioContainer),this.options.dropdownComponentList&&this.createDropdownElement(r.depotNumberDropdownContainer),this.dateSelectorElement=r.dateContainer,this.attachDateSelector(r.dateContainer),this.setFocus(),null==this.currentInstrument.get()&&this.dateSelector.setEnabled(!1),t.prototype.newBuildUI.call(this)},n.prototype.attachDateSelector=function(t){this.dateSelector=new e.DateSelector(t,this.infrontUI.languageHandler,function(e){e.getMonth()+1<10?e.getUTCMonth():(e.getMonth()+1).toString(),e.getUTCDate()<10?e.getUTCDate():e.getUTCDate().toString(),e.getUTCFullYear()})},n.prototype.newDestroyUI=function(){this.focus&&this.focus.destroy(),t.prototype.newDestroyUI.call(this)},n.prototype.createDropdownElement=function(e){var t=this;0==this.tradeAction.get()&&this.dropdownLabelVisibility.set(!0),this.dropDownElement=document.createElement("select"),e.appendChild(this.dropDownElement),InfrontUtil.addClassName(this.dropDownElement,"cell-input  cell-width--220px"),this.options.dropdownComponentList.forEach(function(e,n){var i=document.createElement("option");i.value=e,i.text=e,t.dropDownElement.appendChild(i)}),this.dropDownElement.value=""},n.prototype.loadFeed=function(e){var t=this;this.getFeedMetadata(e,function(e){e&&(t.feedMetaData[e.feed]=e)})},n.prototype.freeTextChange=function(e){this.validateForm()},n.prototype.nominalInputChange=function(e){this.nominalValue=InfrontUtil.parseFloatValue(e),this.validateForm()},n.prototype.forwardDateChange=function(t){this.forwardDate!==t&&(this.forwardDate=t,this.forwardDateBinding.set(t),this.date.set(t),this.tradeType.get()==e.BondsTradeType.FORWARD&&null!=this.currentInstrument.get()&&this.calculateForwardPrice(this.instrumentValues.get()),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",this.forwardDateBinding.get())),this.validateForm()},n.prototype.depositNumberChange=function(e){this.depositNumber=e,this.validateForm()},n.prototype.loanTransactionAccChange=function(e){this.validateForm()},n.prototype.bondTypeClick=function(e){0==e&&this.displayForwardValues.set(!1),this.tradeType.set(e),this.typeSelectionVisibility.set(e),this.currentInstrument.set(null),this.forwardPrice.set(null),this.clientForwardPrice.set(null),this.premium.set(null),this.discount.set(null),this.date.set(null),this.resetWidget()},n.prototype.instrumentSelected=function(e){var t=this;if(this.statusMessage.set(null),null!=e&&0==Array.isArray(e)){var n=this.bondsList.indexOf(e);this.processSelectedInstrument(e,n),this.infront.snapshot(e.instrument,["TIME"],!1,function(e){InfrontUtil.mergeRecursive(t.bondsList[n],e,!0),t.processSelectedInstrument(e[0],n)})}else this.currentInstrument.get()&&this.infront.unsubscribe(this.currentInstrument.get().instrument,["LAST_VALID","LAST_VALID_DATE","BID","ASK","FORWARD_CURVES","TIME"],function(e){}),this.currentInstrument.set(null),this.setInputsEnabled(!1)},n.prototype.processSelectedInstrument=function(t,n){if(this.currentInstrument.set(t.instrument),this.setValueDate(n),this.getCustomFields(),this.forwardPrice.set(null),this.instrumentValues.set(this.bondsList[n]),this.setBondSpotPrice(this.bondsList[n]),this.tradeType.get()==e.BondsTradeType.FORWARD){var i=new Date(this.bondsList[n].value_date),r=new Date(i.getTime()-864e5),a=new Date(this.forwardDateBinding.get());this.dateSelector.setMinDate(r),this.dateSelector.setMaxDate(new Date(i.getFullYear()+1+"-"+(i.getMonth()+1).toString()+"-"+i.getDate().toString())),null!==this.forwardDateBinding.get()&&a.getTime()<=i.getTime()&&this.dateSelector.setDate(i),this.calculateForwardPrice(this.bondsList[n])}else if(this.bondsList[n].hasOwnProperty("value_date")){var s=new Date(this.bondsList[n].value_date);this.date.set(s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate())}else this.date.set((new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate());0!=this.bondsList[n].hasOwnProperty("time")&&""!==this.bondsList[n].time||this.statusMessage.set("trading disabled due to inconsistent data"),this.validateForm(),this.setInputsEnabled(!0)},n.prototype.setValueDate=function(t){var n=this.parseValueDate(this.bondsList[t].forward_curves.value_date);if(this.tradeType.get()==e.BondsTradeType.FORWARD){if(n){var i=new Date(n);this.date.set(i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate())}}else n?(i=new Date(n),this.date.set(i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate())):this.date.set((new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate())},n.prototype.parseValueDate=function(e){var t=e.toString();return t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8)},n.prototype.setInputsEnabled=function(e){this.nominalBinding.setEnabled(e),this.depositNumberBinding.setEnabled(e),this.freeText.setEnabled(e),this.loanTransactionAcc.setEnabled(e),this.dateSelector&&this.dateSelector.setEnabled(e),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",e),this.validateForm(),this.setFocus()},n.prototype.setBondSpotPrice=function(e){0==this.tradeAction.get()&&e.hasOwnProperty("ask")?this.bondSpotPrice.set(e.ask):1==this.tradeAction.get()&&e.hasOwnProperty("bid")&&this.bondSpotPrice.set(e.bid),1==this.tradeAction.get()&&this.clientSpotPrice.set((this.bondSpotPrice.get()-.2).toFixed(3))},n.prototype.onSelectBuySellClick=function(e){this.tradeAction.set(e),0==e?this.dropdownLabelVisibility.set(!0):this.dropdownLabelVisibility.set(!1),this.instrumentValues.get()&&this.setBondSpotPrice(this.instrumentValues.get()),this.forwardPrice.get()&&this.calculateForwardPrice(this.instrumentValues.get())},n.prototype.getInterpolatedRate=function(t,n){var i=parseInt(t/30+""),r=this.tradeAction.get()==e.BondsActions.BUY?"bid":"ask",a=30*i,s=30*(i+1);return t<30?n.forward_curves["month1_"+r]:(s-t)/(s-a)*n.forward_curves["month"+i+"_"+r]+(t-a)/(s-a)*n.forward_curves["month"+(i+1)+"_"+r]},n.prototype.calculateForwardPrice=function(t){var n=t.instrument.hasOwnProperty("precision_code")?t.instrument.precision_code:3,i=this.calcNumberOfDays(new Date(this.instrumentValues.get().value_date),new Date(this.forwardDateBinding.get())),r=this.bondSpotPrice.get();IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",this.bondSpotPrice.get());var a=parseFloat(this.getInterpolatedRate(i,t)),s=(t.coupon_rate/r-a/100)*i/360*r;this.forwardPrice.set(parseFloat((this.bondSpotPrice.get()-s).toFixed(n))),this.tradeAction.get()==e.BondsActions.SELL?this.clientForwardPrice.set((this.forwardPrice.get()-.2).toFixed(n)):this.clientForwardPrice.set(this.forwardPrice.get().toFixed(n)),s<0?(this.premium.set(parseFloat(s.toFixed(n))),this.discount.set(null)):(this.discount.set(parseFloat(s.toFixed(n))),this.premium.set(null)),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",typeof this.forwardPrice.get(),this.forwardPrice.get()),this.displayForwardValues.set(!0)},n.prototype.calcNumberOfDays=function(e,t){var n=e.getTime(),i=t.getTime();return Math.round((i-n)/864e5)},n.prototype.validateForm=function(){this.currentInstrument.get()&&this.date.get()&&this.depositNumber&&this.nominalBinding.isValid()&&this.loanTransactionAcc.isValid()&&this.checkTimestamp()?this.disableBuySell.set(!1):this.disableBuySell.set(!0),0==this.disableBuySell.get()&&(this.errorMessage.get()&&this.errorMessage.set(null),this.statusMessage.get()&&this.statusMessage.set(null))},n.prototype.checkTimestamp=function(){var e=new Date(this.instrumentValues.get().time),t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()},n.prototype.resetClick=function(){this.resetWidget(),InfrontUtil.isFunction(this.options.resetCallback)&&this.options.resetCallback()},n.prototype.resetWidget=function(){this.statusMessage.get()&&this.statusMessage.set(null),this.dropDownElement.value=null,this.internalDepotNumber=null,this.searchBox.clear(),this.currentInstrument.set(null),this.nominalBinding.set(""),this.loanTransactionAcc.set(""),this.depositNumberBinding.set(""),this.freeText.set(""),this.searchBox.focus(),this.tradeType.get()==e.BondsTradeType.FORWARD&&this.dateSelector.setDate(new Date)},n.prototype.submitClick=function(){var t=this,n=this.tradeAction.get()==e.BondsActions.BUY?e.BuyOrSell.Buy:e.BuyOrSell.Sell,i=this.bondSpotPrice.get();this.infront.snapshot(this.instrumentValues.get().instrument,["LAST_VALID","LAST_VALID_DATE","BID","ASK","FORWARD_CURVES","TIME"],!1,function(e){var r=e[0];if(0==n&&i!=r.ask||1==n&&i!=r.bid)t.setBondSpotPrice(r),1==t.tradeType.get()?(r.forward_curves=t.instrumentValues.get().forward_curves,r.value_date=t.instrumentValues.get().value_date,r.maturity_date=t.instrumentValues.get().maturity_date,t.instrumentValues.set(r),t.calculateForwardPrice(r)):t.instrumentValues.set(r),t.statusMessage.set("Blocked due to inconsistent data. Reset and try again"),t.disableBuySell.set(!0);else{t.currentOrder=null;var a=t.createOrder(n);if(t.isValidOrder(a)&&(t.currentOrder=a),t.currentOrder)t.infront.trInsertOrder(t.currentOrder),t.disableBuySell.set(!0);else{var s="Insert order failed because of missing tags ";t.errorMessage.set(s),t.options.errorCallback&&t.options.errorCallback(t.moduleTag+s+" "+t.getMissingOrderFieldsList(a.customFields)),t.disableBuySell.set(!0)}t.currentOrder=null}})},n.prototype.getMissingOrderFieldsList=function(e,t){var n=this;t=1==this.tradeType.get()?{5005:!1,5006:!1,5007:!1,5008:!1,64:!1}:{5005:!1,5006:!1};var i=[];return e.forEach(function(e,i){-1<e.value.indexOf("Xs")&&(-1!==e.value.indexOf("5005")?t[5005]=!0:-1!==e.value.indexOf("5006")?t[5006]=!0:-1!==e.value.indexOf("5007")&&1==n.tradeType.get()?t[5007]=!0:-1!==e.value.indexOf("5008")&&1==n.tradeType.get()?t[5008]=!0:-1!==e.value.indexOf("64")&&1==n.tradeType.get()&&(t[64]=!0))}),0==t[5005]&&i.push("5005"),0==t[5006]&&i.push("5006"),0==t[5007]&&1==this.tradeType.get()&&i.push("5007"),0==t[5008]&&1==this.tradeType.get()&&i.push("5008"),0==t[64]&&1==this.tradeType.get()&&i.push("64"),i},n.prototype.isValidOrder=function(e){return!this.getMissingOrderFieldsList(e.customFields).length},n.prototype.returnDefaultWidgetOptions=function(){return new r},n.prototype.getCustomFields=function(){var t=this;if(this.currentInstrument.get()){this.customFields=[];var n=new e.GetCustomFieldsOptions;n.feed=this.currentInstrument.get().feed,n.onData=function(n){t.customFields=n[e.MWSConstants.custom_fields],t.customFields=t.customFields.filter(function(e){return e.hasOwnProperty("value")}),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",t.customFields)},n.onError=function(e,n){t.options.errorCallback&&t.options.errorCallback(t.moduleTag+"ERROR "+e+", "+n),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",n)},this.infront.trGetCustomFields(n)}},n.prototype.processSearch=function(t){var n=this;t=t.toUpperCase();var i=[];return 0==this.bondsList.length&&(this.bondsList=this.instruments),this.bondsList.forEach(function(r,a){var s=r;s.type="INSTRUMENT",r.hasOwnProperty("forward_curves")&&null!=r.forward_curves&&(n.tradeAction.get()==e.BondsActions.BUY&&1==r.forward_curves.availability||n.tradeAction.get()==e.BondsActions.SELL&&2==r.forward_curves.availability||3==r.forward_curves.availability)&&(r.instrument.hasOwnProperty("instrument_type")&&("BOND"===r.instrument.instrument_type&&(s._typeclass=e.CssConstants.kSearchResultBond),"FOREX"===r.instrument.instrument_type&&(s._typeclass=e.CssConstants.kSearchResultForex)),(r.instrument.hasOwnProperty("isin")&&-1!==r.instrument.isin.indexOf(t)||r.instrument.hasOwnProperty("ticker")&&-1!==r.instrument.ticker.indexOf(t)||r.instrument.hasOwnProperty("full_name")&&-1!==r.instrument.full_name.toUpperCase().indexOf(t))&&i.push(s))}),i},n.prototype.createOrder=function(t){var n=this,i=new e.InsertOrderOptions,r={};return i.instrument=this.currentInstrument.get(),i.buyOrSell=t,i.volume=InfrontUtil.parseFloatValue(this.nominalBinding.get()),i.orderType="NORMAL",i.orderType=e.OrderType.NORMAL,i.portfolio=this.tradingManager.getCurrentPortfolio().name,i.price=this.bondSpotPrice.get(),i.onError=function(e,t){IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",n.moduleTag+"Insert order failed",t),n.options.errorCallback&&n.options.errorCallback(n.moduleTag+"ERROR "+e+", "+t),n.errorMessage.set(t)},i.onData=function(e){return n.insertOrderCallback(e)},i.customFields=[],this.customFields.forEach(function(e,t){var a,s;-1!==e.value.indexOf("5005")&&(s="B",a={id:e.id,value:"Xs:5005=B"},r[5006]=!1,i.customFields.push(a)),1==e.modify&&(-1!==e.value.indexOf("5006")?(s=1==n.tradeType.get()?"F":"S",a={id:e.id,value:"Xs:5006="+s},r[5006]=!1):-1!==e.value.indexOf("5007")?((s=-(s=1==n.tradeType.get()?n.discount.get()||n.premium.get():null))&&(a={id:e.id,value:"Xs:5007="+s}),r[5007]=!1):-1!==e.value.indexOf("5008")?((s=1==n.tradeType.get()?n.forwardPrice.get():"")&&(a={id:e.id,value:"Xs:5008="+s}),r[5008]=!1):-1!==e.value.indexOf("64")?(s=1==n.tradeType.get()?n.forwardDateBinding.get():"")&&(a={id:e.id,value:"Xs:64="+s.split("-").join("")}):-1!==e.label.indexOf("Ejendomsnummer")?n.depositNumberBinding.get()&&(a={id:e.id,value:n.depositNumberBinding.get()}):-1!==e.label.indexOf("Internt depotnummer")?""!==n.dropDownElement.value&&0==n.tradeAction.get()&&(a={id:e.id,value:n.dropDownElement.value}):-1!==e.label.indexOf("Client Spot")?a={id:e.id,value:(1==n.tradeAction.get()?n.clientSpotPrice.get().toString():n.bondSpotPrice.get()).toString()}:-1!==e.label.indexOf("Fradrag")?a={id:e.id,value:(.2*parseFloat(n.nominalBinding.get())).toString()}:-1!==e.label.indexOf("L\xe5nesagskonto")?n.loanTransactionAcc.get()&&(a={id:e.id,value:n.loanTransactionAcc.get()}):-1!==e.label.indexOf("Fritekst")?n.freeText.get()&&(a={id:e.id,value:n.freeText.get()}):-1!==e.label.indexOf("Client Forward")&&n.clientForwardPrice.get()&&(a={id:e.id,value:n.clientForwardPrice.get()}),a&&i.customFields.push(a))}),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",i.customFields),i},n.prototype.insertOrderCallback=function(t){this.isSendingRequest=!1,this.options.closeOnComplete&&this.options.closeCallback?this.options.closeCallback():(this.showOrderStatus(this.tradingManager.getCurrentPortfolio().name,t[e.MWSConstants.order_id]),this.disableBuySell.set(!0))},n.prototype.showOrderStatus=function(t,n){var i=this;if(this.orderStatusUnbind&&this.orderStatusUnbind(),InfrontUtil.isNumber(n)&&0<n){var r=e.CacheKeyFactory.createOrderIdKey(t,n),a=[];a.push(this.cache.customBind(r,e.MWSConstants.order_status,e.BindingFactory.createInlineBinding(function(e){i.statusMessage.set(InfrontUtil.formatEnumString(e)),i.options.errorCallback&&i.options.errorCallback(i.moduleTag+i.statusMessage.get()),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",i.statusMessage.get())}))),a.push(this.cache.customBind(r,e.MWSConstants.error_message,e.BindingFactory.createInlineBinding(function(e){i.errorMessage.set(InfrontUtil.formatEnumString(e)),i.options.errorCallback&&i.options.errorCallback(i.moduleTag+i.errorMessage.get()),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",i.errorMessage.get())}))),this.orderStatusUnbind=function(){for(var e=0;e<a.length;e++)a[e]()}}},n.prototype.insertOrder=function(){if(!this.isSendingRequest)if(this.currentOrder)this.isSendingRequest=!0,this.infront.trInsertOrder(this.currentOrder);else{var e=this.moduleTag+"Insert order failed, Current order object missing";this.options.errorCallback&&this.options.errorCallback(e),IDS.DEBUG_WIDGET_BONDSTRADINGWIDGET&&IDS.log("BondsTradingWidget: ",e)}},n.prototype.attachSearchBoxToElement=function(t){var n=this,i=new e.SimpleSearchBoxOptions;i.fields=["full_name","ticker"],i.searchThreshold=1,i.autoselectAfterTab=this.options.autoSelectAfterTab,i.maxResults=10,i.showAfterSelect=function(e){return e.instrument.ticker},i.getSelectedItemStr=function(e){return e.hasOwnProperty("instrument")?e.instrument.isin:""},i.itemSelected=function(e){return n.instrumentSelected(e)},i.processSearch=function(e){return n.processSearch(e)},i.searchItemType="INSTRUMENT",this.searchBox=new e.SimpleSearchBox(t,this.infront,i),this.searchBoxOptions=i},n.prototype.attachFocusWidget=function(){var t=new e.FocusWidgetOptions,n=document.createElement("div");this.currentInstrument.get()&&(t.instrument=this.currentInstrument.get()),t.layout=e.FocusWidgetLayout.MINI,this.focusOptions=t,this.focus=new e.FocusWidget(n,this.infrontUI,t),this.focusElement.appendChild(n)},n.prototype.attachPortfolioSelector=function(t){var n=new e.PortfolioSelectWidgetOptions;n.showFullName=!0,n.widgetTitle=null,this.portfolioSelector=new e.PortfolioSelectWidget(t,this.infrontUI,n)},n.prototype.setFocus=function(){this.currentInstrument.get()?this.tradeType.get()==e.BondsTradeType.FORWARD&&this.forwardDateBinding?this.dateSelector.setFocus():this.nominalBinding&&this.nominalBinding.requestFocus():this.searchBox&&this.searchBox.focus()},n.prototype.link=function(e){throw new Error("Method not implemented.")},n.prototype.unlink=function(e){throw new Error("Method not implemented.")},n.prototype.accepts=function(){throw new Error("Method not implemented.")},n.prototype.receiveMessage=function(e){throw new Error("Method not implemented.")},n.kLanguageKey="BondsTrading",n.kOEStoredTradableFeeds="oe-stored-tradable-feeds",n.kOEStoredInstrument="com.goinfront.wtk.oe.stored.instrumentString",n}(e.TradingWidgetBase);e.BondsTradingWidget=a}(Infront||(Infront={})),function(e){function t(e){return 0<e}function n(e){return e<0}var i,r,a,s=function(e){for(var t=0,n=e;null!=(n=n.previousElementSibling);)++t;return t},o=function(e,t){var n=e/t;return 0<=n?Math.floor(n):Math.ceil(n)};(r=i=e.ListLayout||(e.ListLayout={}))[r.TABLE=0]="TABLE",r[r.DIV=1]="DIV",r[r.CARD=2]="CARD",r[r.COMPACT=3]="COMPACT",r[r.GRID=4]="GRID",r[r.FLEX=5]="FLEX",(a=e.ListType||(e.ListType={}))[a.generic=0]="generic",a[a.screener=1]="screener";var l=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.columns=[],n.defaultSortedColumn=0,n.defaultSortOrder=e.SortOrder.Desc,n.enableChangeStatusColors=!1,n.interactionHighlight=!1,n.linkTrigger=h.LINK_TARGET_ROW_CLICK,n.rowSelectable=!1,n.sortable=!1,n.decimals=e.WidgetDecimals.FEED,n.layout=i.TABLE,n.expandableRows=!1,n.loadSavedColumns=!1,n.enableColumnsMove=!1,n.enableColumnsResize=!1,n.enableFixedHeader=!1,n}return __extends(n,t),n}(e.TradingWidgetOptions);e.CommonListOptions=l;var c,d,u=function(t){function n(i,r,a,s,o){void 0===o&&(o="widgetTitle");var l=t.call(this,i,r,a,s)||this;l.isUpdating=!1,l.isExpanded=!1,l.setOptions(s);var c=l.options.onColumnsChanged;return l.options.onColumnsChanged=function(){l.isUpdating||l.saveColumns(),c&&c()},s.loadSavedColumns&&h._loadColumns(l.getStoredValue(n.kMyColumnsKey),l.options),l.setColumnManager(),l.columnManager&&(l.columnManager.enableColumnsMove=l.options.enableColumnsMove),l.columnManager&&(l.columnManager.enableColumnsResize=l.options.enableColumnsResize),l.columnManager.setSortColumnChangedCallback(function(e,t,n){return l.sortColumnChanged(e,t,n)}),l.columnManager.setRowClickCallback(function(e){return l.rowClicked(e)}),l.columnManager.setLinkTriggerCallback(function(e,t,n){l.linkEvent(n.instrument)}),l.setListItems(),l.unbindingManager=new e.UnbindingManager,l.columns=l.columnManager.getColumns(),l}return __extends(n,t),n.prototype.setOptions=function(e){this.options=e},n.prototype.createRootUI=function(){var e=h.createRootUI(this.options);return this.columnManager&&(this.columnManager.defaultContent=e.defaultContent,this.columnManager.defaultContentParent=e.bodyContainer),e},n.prototype.createHeaderRow=function(){return h.createHeaderRow(this.options,this.columnManager,this.unbindingManager)},n.prototype.createFooterRow=function(e,t){return h.createFooterRow(this.options,this.columnManager,this.unbindingManager,e,t,null,this.infrontUI,this.footerTr,this.cache)},n.prototype.createElementRowFromCache=function(e,t,i){var r=h.createElementRowFromCache(this.options,this.columnManager,e,t,i,n.trCounter,null,this.unbindingManager);return n.trCounter++,r},n.prototype.createRowFromResult=function(e,t,i){var r=h.createRowFromResult(this.options,this.columnManager,e,t,i,n.trCounter,null,this.unbindingManager);return n.trCounter++,r},n.createExpandRowErrorHandling=function(t,n,i,r){var a=t.createExpandRow&&t.layout===e.ListLayout.DIV?t.createExpandRow(n,i):function(){};return function(){try{a()}catch(e){(0,console.log)(e)}if(t.createExpandRow)for(;i.hasChildNodes();)i.removeChild(i.firstChild)}},n.prototype.setRowClickCallback=function(e){this.rowClickCallback=e},n.prototype.loadColumns=function(){this.columnManager.loadColumns(this.getStoredValue(n.kMyColumnsKey))},n.prototype.saveColumns=function(){this.store(n.kMyColumnsKey,this.columnManager.saveColumns())},n.prototype.resetColumns=function(){this.columnManager.resetColumns(),this.store(n.kMyColumnsKey,null)},n.prototype.addCustomColumn=function(e){this.columnManager.addCustomColumn(e)},n.prototype.addDefaultColumn=function(e){this.columnManager.addDefaultColumn(e)},n.prototype.addColumnFromAvailableList=function(e){this.columnManager.addColumnFromAvailableList(e)},n.prototype.removeColumn=function(e){this.columnManager.removeColumn(e)},n.prototype.moveColumn=function(e,t){this.columnManager.moveColumn(e,t)},n.prototype.insertColumn=function(e,t){this.columnManager.insertColumn(e,t,c.Available)},n.prototype.resizeColumn=function(e,t){this.columnManager.resizeColumn(e,t)},n.prototype.getAllFields=function(){return this.columnManager.columns},n.prototype.getDefaultColumns=function(){return this.options.columns},n.prototype.getAvailableColumns=function(){return this.options.availableColumns},n.prototype.beginUpdate=function(){this.isUpdating=!0},n.prototype.endUpdate=function(){this.isUpdating=!1,this.options.onColumnsChanged()},n.prototype.swapInstrument=function(t){t&&(t.feed&&t.ticker&&(this.options.instrument=new e.Instrument(t.feed,t.ticker)),this.newDestroyUI(),this.isInitialised&&this.newInit())},n.kMyColumnsKey="my-columns",n.cacheKeyCounter=0,n.trCounter=0,n}(e.WidgetBase);e.CommonListWidgetBase=u,(d=c=e.ColumnOrigin||(e.ColumnOrigin={}))[d.Default=0]="Default",d[d.Available=1]="Available",d[d.UserDefined=2]="UserDefined";var h=function(){function r(t,n,i,a,s){var o=this;this.isInserting=!1,this.ignoreSortClick=!1,this.rows=[],this.rowIds=[],this.rowsCache=[],this.decimals=[],this.results=[],this.footerDecimals=0,this.subscribes=null,this.isSubscribed=!1,this.indexFix=0,this.tabs=[],this.enableColumnsMove=!1,this.enableColumnsResize=!1,this.options=t,this.subscribes=s,r.Yes=i.languageHandler.get("global","yes"),r.No=i.languageHandler.get("global","no"),this.cacheKey=r.kCacheKeyPrefix+r.cacheKeyCounter++,this.tabIndex=-1,this.columnCreator=a||null,this.languageHandler=i.languageHandler;var l=[].concat(t.columns);if(this.columnsRealIndex=[],this.loadedTabsString=this.options.loadedTabsString,t.hasOwnProperty("storedColumns")&&t.storedColumns?(l=[].concat(t.storedColumns),t.storedColumnsRealIndex&&(this.columnsRealIndex=this.columnsRealIndex.concat(t.storedColumnsRealIndex))):l=[].concat(t.columns),0==this.columnsRealIndex.length)for(var c=0;c<l.length;c++)this.columnsRealIndex.push(c);if(t.tabs&&0<t.tabs.length){var d=t.tabs;t.storedTabs&&t.storedTabs.length&&(d=t.storedTabs);for(var u=0;u<t.tabs.length;u++)u<d.length?this.tabs[u]={columnsSpec:[].concat(d[u].columns),columnsRealIndex:[].concat(d[u].columnsRealIndex||[])}:this.tabs[u]={columnsSpec:[].concat(t.tabs[u].columns),columnsRealIndex:[]}}if(this.createColumns(l,t.extraColumns,i.languageHandler),this.enableInteractionHighlight=t.interactionHighlight,this.enableChangeStatusColors=t.enableChangeStatusColors,this.sortingEnabled=t.sortable,"number"==typeof t.defaultSortedColumn)this.currentlySortedColumn=this.columns[t.defaultSortedColumn];else if("string"==typeof t.defaultSortedColumn)for(var h=0;h<this.columns.length;h++)if(this.columns[h].name==t.defaultSortedColumn){this.currentlySortedColumn=this.columns[h];break}this.currentSortOrder=t.hasOwnProperty("defaultSortOrder")?t.defaultSortOrder:e.SortOrder.Desc,this.infront=n,this.infrontUI=i,this.cache=n.getCache(),this.unbindingManager=new e.UnbindingManager,this.dataRetriever=function(e,t){return e.getValueFromObject(t)},this.extraColumns&&InfrontUtil.addEventListener(window,"click",function(e){o.extraPopup&&(o.extraPopup.destroy(),o.extraPopup=null)})}return r.prototype.toggleState=function(e){throw new Error("Method not implemented.")},r.createRootUI=function(t){var n,i,r,a,s,o;switch(t.layout){case e.ListLayout.DIV:n=document.createElement("div"),i=document.createElement("div"),t.defaultContent&&(o=s=document.createElement("div")),r=document.createElement("div"),a=document.createElement("div"),n.className="cell-flex-list-wrapper",InfrontUtil.addClassName(r,"cell-flex-list cell-flex-list--header"),InfrontUtil.addClassName(i,"cell-flex-list cell-flex-list--body"),InfrontUtil.addClassName(a,"cell-flex-list cell-flex-list--footer"),i.setAttribute("role","rowgroup"),r.setAttribute("role","rowgroup"),t.enableColumnsResize&&InfrontUtil.addClassName(n,"cell-table-resizeable  cell-table-fixed"),(t.enableColumnsResize||t.enableColumnsMove)&&n.classList.add("cell-table-editable");break;default:n=document.createElement("table"),i=document.createElement("tbody"),t.defaultContent&&(s=document.createElement("td"),(o=document.createElement("tr")).appendChild(s)),r=document.createElement("thead"),a=document.createElement("tfoot"),n.className="cell-table",t.enableColumnsResize&&InfrontUtil.addClassName(n,"cell-table-resizeable  cell-table-fixed"),(t.enableColumnsResize||t.enableColumnsMove)&&(n.classList.add("cell-table-editable"),r.addEventListener("mouseover",function(e){n.style.setProperty("--resizable-table-hight",n.offsetHeight+"px")},!1))}return t.className&&InfrontUtil.addClassName(n,t.className),n.appendChild(r),n.appendChild(i),n.appendChild(a),t.defaultContent&&(t.defaultContent instanceof HTMLElement?s.appendChild(t.defaultContent):s.innerHTML=t.defaultContent),{root:n,headerContainer:r,bodyContainer:i,footerContainer:a,defaultContent:o}},r.createHeaderRow=function(e,t,n,r){n||(n=t.getUnbindingManager()),r||(r=t.columns);var a=e.layout===i.DIV||e.layout===i.CARD?document.createElement("div"):document.createElement("tr");t.indexFix=0,e.layout===i.DIV&&(a.className=e.expandableRows?"cell-flex-list__row  cell-flex-list__row--header  cell-flex-list__row--header--offset-left":"cell-flex-list__row  cell-flex-list__row--header",a.setAttribute("role","row"),e.expandableRows&&(t.indexFix=-1));for(var s=function(){var e=t.createHeaderCol(r[o]);r[o].nodeIndex=a.childNodes.length+t.indexFix,a.appendChild(e),(t.enableColumnsMove||t.enableColumnsResize)&&(e.onmousedown=function(n){t.draggingColumnEl=e},e.ontouchstart=function(n){t.draggingColumnEl=e},e.onkeyup=function(n){t.draggingColumnEl=e})},o=0;o<r.length;o++)s();return t.headerRow=a,(t.enableColumnsMove||t.enableColumnsResize)&&t.setupDragAndDrop(),a},r.createFooterRow=function(r,a,s,o,l,c,d,u,h){c||(c=a.columns);var p=null,m=!0;null==p&&((p=r.layout===i.DIV?document.createElement("div"):document.createElement("tr")).className=r.layout===i.TABLE?e.CssConstants.kCellSumRow:"cell-flex-list__row  cell-flex-list__row--footer");for(var g=0;g<c.length;g++){var f=c[g],v=null!=f.decimals?f.decimals:o;if(f.totalReference){m=!1;var y=r.layout===i.DIV?document.createElement("div"):document.createElement("td");p.appendChild(y),r.layout===i.TABLE?(f.genericClass&&InfrontUtil.addClassName(y,f.genericClass),f.specificClass&&InfrontUtil.addClassName(y,f.specificClass+"--sum")):r.layout===i.DIV&&(f.genericClass&&InfrontUtil.addClassName(y,f.genericClass),InfrontUtil.addClassName(y,"cell-flex-list__row__field  cell-flex-list__row__field--footer  cell-flex-list__row__field-wrapper--"+f.getFieldClassName()));var b=[],T=new e.ClassBinding(y,e.CssConstants.kHiddenClass,function(e){return!e});f.visible.observe(T),function(e){b.push(function(){e.visible.unbind(T)})}(f);var S=f.totalReference,C=f.createValueBinding(null,y,"innerHTML",v);if(b.push(h.customBindFR(S,C)),r.enableChangeStatusColors&&f.highlightChange){var I=new e.ClassBinding(y,e.CssConstants.kStatusPositive,t);b.push(h.customBindFR(S,I));var _=new e.ClassBinding(y,e.CssConstants.kStatusNegative,n);b.push(h.customBindFR(S,_))}s.registerUnbinds(y,b)}else y=r.layout===i.DIV?document.createElement("div"):document.createElement("td"),0==g&&(y.innerHTML=d.languageHandler.get(l,"total")||""),y.className=r.layout===i.TABLE?e.CssConstants.kCellSumRowLabel:"cell-flex-list__row__field  cell-flex-list__row__field--footer  cell-flex-list__row__field-wrapper--"+f.getFieldClassName(),f.visible.get()||r.layout!==i.DIV||InfrontUtil.addClassName(y,e.CssConstants.kHiddenClass),T=new e.ClassBinding(y,e.CssConstants.kHiddenClass,function(e){return!e}),f.visible.observe(T),s.registerUnbind(y,function(){f.visible.unbind(T)}),p.appendChild(y)}return m&&(p.style.display="none"),a.footerRow=p,a.footerDecimals=o,p},r.createCompactCardHeader=function(e,t){var n,i=document.createElement("header"),r=document.createElement("div");for(n in InfrontUtil.addClassName(i,"cell-w-positions__header-item"),InfrontUtil.addClassName(r,"cell-flex-row"),i.appendChild(r),t){var a=document.createElement("div"),s=document.createElement("div");s.innerHTML=t[n].heading,0==n?InfrontUtil.addClassName(a,"cell-flex-column cell-flex-small-4"):InfrontUtil.addClassName(a,"cell-flex-column"),InfrontUtil.addClassName(s,"cell-w-positions__header-label"),a.appendChild(s),r.appendChild(a),t[n].className&&InfrontUtil.addClassName(s,t[n].className)}return i},r.createCompactCardSection=function(e,t,n,i,r,a,s,o){var l=this;o||(o=t.unbindingManager);var c,d=document.createElement("section"),u=document.createElement("div"),h=document.createElement("div");for(c in InfrontUtil.addClassName(u,"cell-flex-row cell-w-positions__data"),InfrontUtil.addClassName(d,"cell-w-positions__item"),InfrontUtil.addClassName(h,"cell-w-positions__extension"),d.appendChild(u),d.appendChild(h),d.setAttribute("id","section-"+a),s){var p=document.createElement("div"),m=t.createColfromCache(n,i,s[c],r,c);0==c?InfrontUtil.addClassName(p,"cell-flex-column cell-flex-small-4"):InfrontUtil.addClassName(p,"cell-flex-column"),InfrontUtil.addClassName(m,"cell-w-positions__data-value"),p.appendChild(m),u.appendChild(p)}for(c in t.portfolioColumns){var g=document.createElement("div"),f=document.createElement("div"),v=document.createElement("div");p=document.createElement("div"),m=t.createColfromCache(n,i,t.portfolioColumns[c],r,c),InfrontUtil.addClassName(g,"cell-flex-row cell-w-positions__extension-item"),InfrontUtil.addClassName(p,"cell-flex-column"),InfrontUtil.addClassName(f,"cell-flex-column cell-w-positions__extension-item-label"),InfrontUtil.addClassName(v,"cell-flex-column cell-w-positions__extension-item-value"),f.innerHTML=t.portfolioColumns[c].heading,v.appendChild(m),g.appendChild(f),g.appendChild(v),h.appendChild(g),0==t.portfolioColumns[c].visible.get()&&InfrontUtil.addClassName(g,"cell-display-none")}return InfrontUtil.addEventListener(u,"click",function(t){t.preventDefault(),t.stopPropagation();var i=u.parentElement;!0===o.get(i,"isExpanded")?(InfrontUtil.removeClassName(i,"active"),InfrontUtil.removeClassName(i,"active"),o.unbind(i,!1),o.put(i,"isExpanded",!1)):(InfrontUtil.addClassName(i,"active"),InfrontUtil.addClassName(i,"active"),o.registerUnbind(i,l.createExpandRowErrorHandling(e,n,i)),o.put(i,"isExpanded",!0))}),d},r.createElementCardRowFromCache=function(t,n,r,a,s,o,l,c){var d=this,u=!(l||0<l.length)||t.layout!=i.CARD&&t.layout!=i.COMPACT?[]:l;l=n.columns,c||(c=n.unbindingManager);var h=document.createElement("section");InfrontUtil.addClassName(h,"cell-w-positions__item");var p=document.createElement("div"),m=document.createElement("div"),g=document.createElement("div");p.className="cell-flex-row",m.className="cell-flex-row cell-w-positions__data",g.className="cell-w-positions__extension",h.appendChild(p),h.appendChild(m),h.appendChild(g),h.setAttribute("id",m.tagName+o);for(var f=function(e,n){e.preventDefault(),e.stopPropagation();var i=n.parentElement;!0===c.get(i,"isExpanded")?(InfrontUtil.removeClassName(i,"active"),InfrontUtil.removeClassName(i,"active"),c.unbind(i,!1),c.put(i,"isExpanded",!1)):(InfrontUtil.addClassName(i,"active"),InfrontUtil.addClassName(i,"active"),c.registerUnbind(i,d.createExpandRowErrorHandling(t,r,i)),c.put(i,"isExpanded",!0))},v=0;v<u.length;v++){var y=document.createElement("span"),b=n.createColfromCache(r,a,u[v],s,S),T=document.createElement("div");y.className="cell-w-positions__data-label",y.innerHTML=u[v].heading,InfrontUtil.addClassName(T,"cell-flex-column"),b.className="cell-w-positions__data-value",u[v].name===e.MWSConstants.ticker.toUpperCase()||u[v].name===e.MWSConstants.full_name.toUpperCase()||0==v?(T.appendChild(b),p.appendChild(T),b.className="cell-w-positions__item-header"):(T.appendChild(y),T.appendChild(b),m.appendChild(T))}for(var S=0;S<n.portfolioColumns.length;S++){y=document.createElement("span"),b=n.createColfromCache(r,a,n.portfolioColumns[S],s,S),T=document.createElement("div"),y.className="cell-w-positions__data-label",y.innerHTML=n.portfolioColumns[S].heading,InfrontUtil.addClassName(T,"cell-flex-column");var C=document.createElement("div"),I=document.createElement("div"),_=document.createElement("div");InfrontUtil.addClassName(C,"cell-flex-row  cell-w-positions__extension-item"),I.className="cell-flex-column cell-flex-shrink cell-w-positions__extension-item-label",_.className="cell-flex-column cell-w-positions__extension-item-value",I.innerHTML=n.portfolioColumns[S].heading,InfrontUtil.addClassName(b,"cell-w-positions__extension-label"),_.appendChild(b),C.appendChild(I),C.appendChild(_),g.appendChild(C),0==n.portfolioColumns[S].visible.get()&&InfrontUtil.addClassName(C,"cell-display-none");var M=new e.ClassBinding(T,e.CssConstants.kHiddenClass,function(e){return!e});n.portfolioColumns[S].visible.observe(M),c.registerUnbind(T,function(){n.portfolioColumns[S].visible.unbind(M)})}return n.rows.push(m),n.rowIds.push(r),n.rowsCache.push(a),n.decimals.push(s),n.dataSource=0,InfrontUtil.addEventListener(p,"click",function(e){return f(e,p)}),InfrontUtil.addEventListener(m,"click",function(e){return f(e,m)}),h},r.createSimpleCachedDataBlock=function(t,n,i,r,a,s,o,l){o||(o=n.columns),l||(l=n.unbindingManager),n.removeDefaultContent();var c=document.createElement("div");InfrontUtil.addClassName(c,"cell-flex-column  cell-flex-child-auto"),n.applyCacheInteractionEvents(c,i,r);for(var d=0;d<o.length;d++){var u=n.createColfromCache(i,r,o[d],a,d);c.appendChild(u);var h=new e.ClassBinding(u,e.CssConstants.kHiddenClass,function(e){return!e});o[d].visible.observe(h),l.registerUnbind(u,function(){d<o.length&&o[d].visible.unbind(h)})}return n.rows.push(c),n.rowIds.push(i),n.rowsCache.push(r),n.decimals.push(a),n.dataSource=0,c},r.createElementRowFromCache=function(t,n,r,a,s,o,l,c){var d=this;l||(l=n.columns),c||(c=n.unbindingManager),n.removeDefaultContent();var u=t.layout===i.DIV?document.createElement("div"):document.createElement("tr"),h=t.layout===i.TABLE?"cell-table__item":"cell-flex-list__row  cell-flex-list__row--main-fields";if(t.expandableRows&&(u.setAttribute("tabindex","0"),u.setAttribute("role","button")),InfrontUtil.addClassName(u,h),u.setAttribute("id",u.tagName+o),t.layout===i.DIV){if(t.expandableRows){var p=document.createElement("div");InfrontUtil.addClassName(p,"cell-arrow  cell-arrow--down  cell-flex-list__expand-icon"),u.appendChild(p)}var m=document.createElement("div");InfrontUtil.addClassName(m,"cell-flex-list__row  cell-flex-list__row--expanded"),m.setAttribute("id",u.tagName+o+"--expand")}n.applyCacheInteractionEvents(u,r,a);for(var g,f=0;f<l.length;f++)if(g=n.createColfromCache(r,a,l[f],s,f),l[f].nodeIndex=u.childNodes.length+n.indexFix,t.layout===i.DIV){var v=document.createElement("div");v.className="cell-flex-list__row__field-wrapper  cell-flex-list__row__field-wrapper--"+l[f].getFieldClassName(),l[f].className&&(v.className+="  "+l[f].className),l[f].visible.get()||t.layout!==i.DIV||InfrontUtil.addClassName(v,e.CssConstants.kHiddenClass);var y=document.createElement("div");y.className="cell-flex-list__row__label",y.innerHTML=l[f].heading+":",v.appendChild(g),u.appendChild(v);var b=new e.ClassBinding(v,e.CssConstants.kHiddenClass,function(e){return!e});l[f].visible.observe(b),c.registerUnbind(v,function(){l[f].visible.unbind(b)})}else u.appendChild(g);if(n.rows.push(u),n.rowIds.push(r),n.rowsCache.push(a),n.decimals.push(s),n.dataSource=0,t.layout!==i.DIV)return u;var T=document.createElement("div");return T.setAttribute("role","row"),InfrontUtil.addClassName(T,"cell-flex-list__row-wrapper"),T.appendChild(u),t.expandableRows&&(T.appendChild(m),c.put(m,"isExpanded",!1),InfrontUtil.addEventListener(u,"click",function(e){e.preventDefault(),e.stopPropagation(),!0===c.get(m,"isExpanded")?(InfrontUtil.removeClassName(m,"cell-flex-list__row--expanded--expanded"),InfrontUtil.removeClassName(T,"cell-flex-list__row-wrapper--expanded"),c.unbind(m,!1),c.put(m,"isExpanded",!1),u.setAttribute("aria-expanded","false")):(InfrontUtil.addClassName(m,"cell-flex-list__row--expanded--expanded"),InfrontUtil.addClassName(T,"cell-flex-list__row-wrapper--expanded"),c.registerUnbind(m,d.createExpandRowErrorHandling(t,r,m)),c.put(m,"isExpanded",!0),u.setAttribute("aria-expanded","true")),u.focus()}),InfrontUtil.addEventListener(u,"keyup",function(n){var i=n.which||n.keyCode;i!==e.TextInputBinding.kKeycodeEnter&&i!==e.TextInputBinding.kKeycodeSpace||(n.preventDefault(),n.stopPropagation(),!0===c.get(m,"isExpanded")?(InfrontUtil.removeClassName(m,"cell-flex-list__row--expanded--expanded"),InfrontUtil.removeClassName(T,"cell-flex-list__row-wrapper--expanded"),c.unbind(m,!1),c.put(m,"isExpanded",!1),u.setAttribute("aria-expanded","false")):(InfrontUtil.addClassName(m,"cell-flex-list__row--expanded--expanded"),InfrontUtil.addClassName(T,"cell-flex-list__row-wrapper--expanded"),c.registerUnbind(m,d.createExpandRowErrorHandling(t,r,m)),c.put(m,"isExpanded",!0),u.setAttribute("aria-expanded","true")),u.focus())})),T},r.createRowFromResult=function(t,n,r,a,s,o,l,c){var d,u,h=this;switch(l||(l=n.columns),c||(c=n.unbindingManager),t.layout){case e.ListLayout.DIV:d=document.createElement("div"),u="cell-flex-list__row  cell-flex-list__row--main-fields";var p=document.createElement("div");if(p.appendChild(d),InfrontUtil.addClassName(p,"cell-flex-list__row-wrapper"),t.expandableRows){var m=document.createElement("div");m.classList.add("cell-flex-list__expand-icon"),d.appendChild(m);var g=document.createElement("div");InfrontUtil.addClassName(g,"cell-flex-list__row  cell-flex-list__row--expanded"),g.setAttribute("id",d.tagName+o+"--expand"),p.appendChild(g),InfrontUtil.addEventListener(d,"click",function(e){e.preventDefault(),e.stopPropagation(),!0===c.get(g,"isExpanded")?(InfrontUtil.removeClassName(g,"cell-flex-list__row--expanded--expanded"),InfrontUtil.removeClassName(p,"cell-flex-list__row-wrapper--expanded"),c.unbind(g,!1),c.put(g,"isExpanded",!1)):(InfrontUtil.addClassName(g,"cell-flex-list__row--expanded--expanded"),InfrontUtil.addClassName(p,"cell-flex-list__row-wrapper--expanded"),c.registerUnbind(g,h.createExpandRowErrorHandling(t,r,g)),c.put(g,"isExpanded",!0))})}break;default:d=document.createElement("tr"),u="cell-table__item"}n.applyInteractionEvents(d,r,a),InfrontUtil.addClassName(d,u);for(var f=0;f<l.length;f++)if(l[f].nodeIndex=d.childNodes.length+n.indexFix,t.layout===i.DIV){var v=document.createElement("div");v.className="cell-flex-list__row__field-wrapper  cell-flex-list__row__field-wrapper--"+l[f].getFieldClassName(),l[f].className&&(v.className+="  "+l[f].className);var y=document.createElement("div");y.className="cell-flex-list__row__label",y.innerHTML=l[f].heading+":",v.appendChild(n.createTDfromResult(r,a,l[f],s)),d.appendChild(v)}else d.appendChild(n.createTDfromResult(r,a,l[f],s));return n.rows.push(d),n.rowIds.push(r),n.results.push(a),n.decimals.push(s),n.dataSource=1,d},r.createExpandRowErrorHandling=function(t,n,i,r){var a=t.createExpandRow&&t.layout===e.ListLayout.DIV?t.createExpandRow(n,i):function(){};return function(){try{a()}catch(e){(0,console.log)(e)}if(t.createExpandRow)for(;i.hasChildNodes();)i.removeChild(i.firstChild)}},r.prototype.generateColumnsString=function(e,t){for(var n,i,a,s="",o="",l="",d="",u=0;u<e.length;u++){var h=e[u];switch(n=h.name,i=h.origin||c.Default,d=h.id,a=h.hasOwnProperty("element")&&h.element.style&&h.element.style.width?h.element.style.width:h.width||"",d&&(i=c.UserDefined),i){case c.Default:case c.Available:l=""+i+r.kPropSeperator+t[u]+r.kPropSeperator+n+r.kPropSeperator+a;break;case c.UserDefined:l=""+i+r.kPropSeperator+t[u]+r.kPropSeperator+n+r.kPropSeperator+a+r.kPropSeperator+d}s+=o+l,o=r.kColumnSeperator}return s},r.prototype.saveColumns=function(){var e="",t="";if(this.tabs&&0<this.tabs.length)for(var n=0;n<this.tabs.length;n++)e+=t,this.tabs[n]&&this.tabs[n].columns?e+=this.generateColumnsString(this.tabs[n].columns,this.tabs[n].columnsRealIndex):this.loadedTabsString&&this.loadedTabsString&&n<this.loadedTabsString.length&&(e+=this.loadedTabsString[n]),t=r.kTabSeperator;else e=this.generateColumnsString(this.columns,this.columnsRealIndex);return e},r.parseColumnsString=function(e,t,n){var i,a,s,o,l,d=[],u=[],h=function(e,t){return!(!InfrontUtil.isString(e)||!InfrontUtil.isString(t))&&e.toLowerCase()==t.toLowerCase()},p=function(e,t,n,i){if(!e)return null;if(0<t&&t<e.length&&(h(e[t],n)||h(e[t].name,n))&&e[t].id==i){var r=e[t];return{column:r=InfrontUtil.isString(r)?{name:r}:InfrontUtil.deepCopy(r),index:t}}for(var a=0;a<e.length;a++)if(r=e[a],(h(r,n)||h(r.name,n))&&(null==r.id||null==i||r.id==i))return{column:r=InfrontUtil.isString(r)?{name:r}:InfrontUtil.deepCopy(r),index:a};return null};if(e)for(var m=e.split(r.kColumnSeperator),g=0;g<m.length;g++){var f=m[g].split(r.kPropSeperator);switch(i=Number(f[0]),a=Number(f[1]),s=f[2]||"",l=f[3]||"",o=3<f.length?f[4]:null,i){case c.Default:(v=p(t,a,s,o))&&(v.column.origin=c.Default,v.column.realIndex=v.index,v.column.id=o,v.column.width=l,d.push(v.column),u.push(v.index));break;case c.Available:(v=p(n,a,s,o))&&(v.column.origin=c.Available,v.column.realIndex=v.index,v.column.id=o,v.column.width=l,d.push(v.column),u.push(v.index));break;case c.UserDefined:var v,y=c.Default;(v=p(t,a,s,o))||(v=p(n,a,s,o),y=c.Available),v&&(v.column.origin=y,v.column.realIndex=v.index,v.column.id=o,v.column.width=l,d.push(v.column),u.push(v.index))}}return{columns:d,columnsRealIndex:u}},r._loadColumns=function(e,t){if(t.loadedTabsString=[],e)if(t.tabs&&0<t.tabs.length){var n=e.split(r.kTabSeperator);t.loadedTabsString=n,t.storedTabs=[];for(var i=0;i<t.tabs.length;i++)if(i<n.length)if(""!=n[i]){var a=this.parseColumnsString(n[i],t.tabs[i].columns,t.availableColumns);t.storedTabs.push({columns:a.columns,columnsRealIndex:a.columnsRealIndex})}else t.storedTabs.push({columns:[].concat(t.tabs[i].columns),columnsRealIndex:[]})}else 0<(a=this.parseColumnsString(e,t.columns,t.availableColumns)).columns.length&&(t.storedColumns=a.columns,t.storedColumnsRealIndex=a.columnsRealIndex)},r.prototype.loadColumns=function(e){var t;r._loadColumns(e,this.options),this.loadedTabsString=this.options.loadedTabsString;var n=[];if(this.options.hasOwnProperty("storedColumns")&&this.options.storedColumns?(t=[].concat(this.options.storedColumns),this.options.storedColumnsRealIndex&&(n=[].concat(this.options.storedColumnsRealIndex))):t=[].concat(this.options.columns),0==this.columnsRealIndex.length)for(var i=0;i<this.columns.length;i++)this.columnsRealIndex.push(i);if(this.options.tabs&&0<this.options.tabs.length){var a=this.options.tabs;this.options.storedTabs&&this.options.storedTabs.length&&(a=this.options.storedTabs);for(var s=0;s<this.options.tabs.length;s++)s<a.length?this.tabs[s]={columnsSpec:[].concat(a[s].columns),columnsRealIndex:[].concat(a[s].columnsRealIndex||[])}:this.tabs[s]={columnsSpec:[].concat(this.options.tabs[s].columns),columnsRealIndex:[]};this.selectTab(this.selectedTabIndex())}else{var o=this.columns.length,l=t.length,c=!1;this.columnsSpec=[].concat(t);var d=0==n.length;if(this.headerRow&&this.headerRow.childNodes){for(var u=0;u<l;u++){d&&n.push(u);var h=this.addCol(this.columnsSpec[u],n[u]);0==u&&h.totalReference&&(c=!0)}for(var p=o-1;0<=p;p--)this.removeCol(p);l&&!c&&this.footerRow&&0<this.footerRow.childElementCount&&(this.footerRow.firstElementChild.innerHTML=this.languageHandler.get("global","total"))}else{this.createColumns(this.columnsSpec,this.extraColumns,this.languageHandler);for(var m=0;m<this.columns.length;m++)this.createFooterField(this.items,this.columns[m],this.itemsCacheKeyCreator)}}},r.prototype.resetColumns=function(){if(this.options.tabs&&0<this.options.tabs.length){for(var e=0;e<this.options.tabs.length;e++)this.tabs[e]={columnsSpec:[].concat(this.options.tabs[e].columns),columnsRealIndex:[]};this.selectTab(this.selectedTabIndex())}else{var t=this.columns.length,n=this.options.columns.length,i=!1;if(this.columnsSpec=[].concat(this.options.columns),this.headerRow&&this.headerRow.childNodes){for(var r=0;r<n;r++){delete this.columnsSpec[r].width;var a=this.addCol(this.columnsSpec[r],r);0==r&&a.totalReference&&(i=!0)}for(var s=t-1;0<=s;s--)this.removeCol(s);n&&!i&&this.footerRow&&0<this.footerRow.childElementCount&&(this.footerRow.firstElementChild.innerHTML=this.languageHandler.get("global","total"))}else{for(var o=0;o<n;o++)this.columnsRealIndex.push(o);this.createColumns(this.columnsSpec,this.extraColumns,this.languageHandler);for(var l=0;l<this.columns.length;l++)this.createFooterField(this.items,this.columns[l],this.itemsCacheKeyCreator)}}this.options.onResetColumns&&this.options.onResetColumns(),this.options.onColumnsChanged&&this.options.onColumnsChanged()},r.prototype.setVisible=function(e,t){for(var n=0,i=this.columns;n<i.length;n++){var r=i[n];if(e.toLowerCase()==r.name.toLowerCase()){r.visible.set(t);break}}},r.prototype.visible=function(e){for(var t=0,n=this.columns;t<n.length;t++){var i=n[t];if(e.toLowerCase()==i.name.toLowerCase())return i.visible.get()}return!1},r.prototype.addCustomColumn=function(e){var t=this.addCol(e,-1,c.UserDefined);return this.modifyCurrentTab(),this.updatedColumn&&null!=this.updatedIndex1&&this.options.onColumnInsert&&this.options.onColumnInsert(e,this.updatedIndex1),this.options.onColumnsChanged&&this.options.onColumnsChanged(),t},r.prototype.addColumnFromAvailableList=function(e){var t=this.columns.length-1,n=this.options.availableColumns[e],i=this.addCol(n,e,c.Available),r=this.updatedIndex1,a=i;if(this.isInserting=!0,0<=t&&"right"!=i.frozen&&"left"!=i.frozen)for(var s=this.columns[t];"right"==s.frozen&&0<=t;)this.moveCol(t+1,t),r=this.updatedIndex2,0<=--t&&(s=this.columns[t]);else 0<=t&&"left"==i.frozen&&(this.moveCol(t+1,0),r=this.updatedIndex2);return this.isInserting=!1,a&&this.options.onColumnInsert&&this.options.onColumnInsert(n,r),this.modifyCurrentTab(),this.options.onColumnsChanged&&this.options.onColumnsChanged(),i},r.prototype.addDefaultColumn=function(e){var t=InfrontUtil.deepCopy(this.options.columns[e]),n=this.addCol(t,e,c.Default);return this.modifyCurrentTab(),this.updatedColumn&&null!=this.updatedIndex1&&this.options.onColumnInsert&&this.options.onColumnInsert(t,this.updatedIndex1),this.options.onColumnsChanged&&this.options.onColumnsChanged(),n},r.prototype.removeColumn=function(e){this.removeCol(e),this.modifyCurrentTab(),this.options.onColumnsChanged&&this.options.onColumnsChanged(),this.updatedColumn&&this.options.onColumnDeleted&&this.options.onColumnDeleted(this.updatedColumn,this.updatedIndex1)},r.prototype.moveColumn=function(e,t){this.moveCol(e,t),this.modifyCurrentTab(),this.updatedColumn&&null!=this.updatedIndex1&&null!=this.updatedIndex2&&this.options.onColumnMoved&&this.options.onColumnMoved(this.updatedColumn,this.updatedIndex1,this.updatedIndex2),this.options.onColumnsChanged&&this.options.onColumnsChanged()},r.prototype.insertColumn=function(e,t,n){void 0===n&&(n=c.Default),this.isInserting=!0,this.addCol(e,n),this.moveCol(this.columns.length-1,t),this.isInserting=!1,this.updatedColumn&&null!=this.updatedIndex1&&null!=this.updatedIndex2&&this.options.onColumnInsert&&this.options.onColumnInsert(e,this.updatedIndex2),this.modifyCurrentTab(),this.options.onColumnsChanged&&this.options.onColumnsChanged()},r.prototype.addCol=function(t,n,i){void 0===n&&(n=-1),void 0===i&&(i=c.Default),this.updatedColumn=null,this.updatedIndex1=null,this.updatedIndex2=null;var r=this.createColumn(t,this.infrontUI.languageHandler);return r&&r.isValid()&&(r.locked=t.locked,r.frozen=t.frozen,r.allowZero=t.allowZero,r.sortUsingOriginalValue=t.sortUsingOriginalValue,t.hasOwnProperty("origin")?r.origin=t.origin:r.origin=i,t.hasOwnProperty("id")&&(r.id=t.id),t.hasOwnProperty("width")&&(r.width=t.width),this.columns.push(r),this.columnsRealIndex.push(n),this.columnsSpec.push(t),this.items&&this.createFooterField(this.items,r,this.itemsCacheKeyCreator),this.headerRow&&this.createHeaderColumn(r),this.footerRow&&this.createFooterColumn(r),0==this.dataSource?this.createElementColumnFromCache(r):this.createColumnFromResult(r),this.isSubscribed&&this.subscribes&&this.subscribes.addFields(e.FieldsHelper.getSubscriptionFieldsArray([r])),r.hasOwnProperty("nodeIndex")||(r.nodeIndex=this.columns.length-1),this.updatedColumn=r,this.updatedIndex1=this.columns.length-1,this.updateDefaultContent()),r},r.prototype.removeCol=function(t){this.updatedColumn=null,this.updatedIndex1=null,this.updatedIndex2=null;var n=this.getUnbindingManager(),i=-1,r=-1;if("string"==typeof t)for(var a=t.toLowerCase(),s=0;s<this.columns.length;s++)this.columns[s].hasOwnProperty("nodeIndex")&&(r<0&&a==this.columns[s].name.toLowerCase()?(i=s,r=this.columns[s].nodeIndex):0<=r&&(this.columns[s].nodeIndex=this.columns[s].nodeIndex-1));else{a=t;var o=-1;for(s=0;s<this.columns.length;s++)this.columns[s].hasOwnProperty("nodeIndex")&&(r<0&&a==++o?(i=s,r=this.columns[s].nodeIndex):0<=r&&(this.columns[s].nodeIndex=this.columns[s].nodeIndex-1))}if(0<=i){if(this.updatedColumn=this.columns[i],this.updatedIndex1=i,this.columns[i].totalReference&&this.footerRow){var l=!0;for(s=0;s<this.columns.length;s++)if(s!=i&&this.columns[s].totalReference){l=!1;break}this.footerRow.style.display=l?"none":""}var c;if(0<=r)for(this.headerRow&&(c=this.headerRow.childNodes[r],this.headerRow.removeChild(c),n.unbind(c,!0)),this.footerRow&&(c=this.footerRow.childNodes[r],this.footerRow.removeChild(c),n.unbind(c,!0)),-1==this.indexFix&&r++,s=0;s<this.rows.length;s++)c=this.rows[s].childNodes[r],this.rows[s].removeChild(c),n.unbind(c,!0);for(var d=0,u=e.FieldsHelper.getSubscriptionFieldsArray([this.columns[i]]);d<u.length;d++){var h=u[d];this.subscribes.removeField(h)}this.columns.splice(i,1),this.columnsSpec.splice(i,1),this.columnsRealIndex.splice(i,1),this.updateDefaultContent()}},r.prototype.getColumnRealIndex=function(e){var t=0,n=!1,i="";"number"==typeof e?(e<0&&(e=0),e>=this.columns.length&&(e=this.columns.length)):(n=!0,i=e.toLowerCase());for(var r=0;r<this.columns.length;r++)if(this.columns[r].hasOwnProperty("nodeIndex")&&this.columns[r].visible.get()){if(n&&this.columns[r].name.toLowerCase()==i||t==e)return r;t++}return-1},r.prototype.moveCol=function(e,t){this.updatedColumn=null,this.updatedIndex1=null,this.updatedIndex2=null;var n=this.getColumnRealIndex(e),i=this.getColumnRealIndex(t);if(n!=i&&0<=n&&0<=i){if(this.updatedColumn=this.columns[n],this.updatedIndex1=n,this.updatedIndex2=i,!this.isInserting&&this.options.onColumnMoving&&!this.options.onColumnMoving(this.updatedColumn,this.updatedIndex1,this.updatedIndex2))return this.updatedColumn=null,this.updatedIndex1=null,void(this.updatedIndex2=null);var r=this.columns[n].nodeIndex,a=this.columns[i].nodeIndex;if(0<=r&&0<=a)for(var s=Math.min(n,i),o=Math.max(n,i),l=s;l<=o;l++)if(this.columns[l].hasOwnProperty("nodeIndex")){var c=this.columns[l].nodeIndex;c=c==r?a<r?a:a-0:c==a?a<r?c+1:c-1:a<r?c==r?a:c+1:c==r?a-1:c-1,this.columns[l].nodeIndex=c}if(0<=n&&0<=i&&0<=r&&0<=a){var d;for(d=a==this.headerRow.childNodes.length-1?(this.headerRow.appendChild(this.headerRow.childNodes[r]),0==r&&this.footerRow&&0<this.footerRow.childElementCount&&this.footerRow.firstElementChild.innerHTML==this.languageHandler.get("global","total")&&(this.footerRow.firstElementChild.innerHTML=""),this.footerRow&&this.footerRow.appendChild(this.footerRow.childNodes[r]),0==r&&this.footerRow&&0<this.footerRow.childElementCount&&""==this.footerRow.firstElementChild.innerHTML&&(this.footerRow.firstElementChild.innerHTML=this.languageHandler.get("global","total")),0):a<r?(this.headerRow.insertBefore(this.headerRow.childNodes[r],this.headerRow.childNodes[a]),0==a&&this.footerRow&&0<this.footerRow.childElementCount&&this.footerRow.firstElementChild.innerHTML==this.languageHandler.get("global","total")&&(this.footerRow.firstElementChild.innerHTML=""),this.footerRow&&this.footerRow.insertBefore(this.footerRow.childNodes[r],this.footerRow.childNodes[a]),0==a&&this.footerRow&&0<this.footerRow.childElementCount&&""==this.footerRow.firstElementChild.innerHTML&&(this.footerRow.firstElementChild.innerHTML=this.languageHandler.get("global","total")),-1):(this.headerRow.insertBefore(this.headerRow.childNodes[r],this.headerRow.childNodes[a+1]),0==r&&this.footerRow&&0<this.footerRow.childElementCount&&this.footerRow.firstElementChild.innerHTML==this.languageHandler.get("global","total")&&(this.footerRow.firstElementChild.innerHTML=""),this.footerRow&&this.footerRow.insertBefore(this.footerRow.childNodes[r],this.footerRow.childNodes[a+1]),0==r&&this.footerRow&&0<this.footerRow.childElementCount&&""==this.footerRow.firstElementChild.innerHTML&&(this.footerRow.firstElementChild.innerHTML=this.languageHandler.get("global","total")),1),-1==this.indexFix&&(r++,a++),l=0;l<this.rows.length;l++)switch(d){case 0:this.rows[l].appendChild(this.rows[l].childNodes[r]);break;case 1:this.rows[l].insertBefore(this.rows[l].childNodes[r],this.rows[l].childNodes[a+1]);break;default:this.rows[l].insertBefore(this.rows[l].childNodes[r],this.rows[l].childNodes[a])}this.columns.splice(i,0,this.columns.splice(n,1)[0]),this.columnsSpec.splice(i,0,this.columnsSpec.splice(n,1)[0]),this.columnsRealIndex.splice(i,0,this.columnsRealIndex.splice(n,1)[0])}}},r.prototype.resizeCol=function(e,t){var n,i,r=this.columns[e];r.element&&(r.element.style||(r.element.style={}),r.element.style.width=t),r.width=t,this.columnsSpec[e]=(n=this.columnsSpec[e],"width",i=t,InfrontUtil.isString(n)?{name:n,attribute:i}:(n.width=i,n)),this.updatedColumn=r,this.updatedIndex1=e,this.updatedIndex2=null},r.prototype.resizeColumn=function(e,t){this.resizeCol(e,t),this.options.onColumnsResized&&this.options.onColumnsResized([e])},r.prototype.createHeaderColumn=function(e){var t=this,n=this.createHeaderCol(e);n.nodeIndex=this.headerRow.childNodes.length+this.indexFix,(this.enableColumnsMove||this.enableColumnsResize)&&(n.onmousedown=function(e){t.draggingColumnEl=n},n.ontouchstart=function(e){t.draggingColumnEl=n},n.onkeyup=function(e){t.draggingColumnEl=n}),this.headerRow.appendChild(n)},r.prototype.createFooterColumn=function(r){var a,s=null!=r.decimals?r.decimals:this.footerDecimals;if(this.footerRow)if(r.totalReference){this.footerRow.style.display="";var o=this.options.layout===i.DIV?document.createElement("div"):document.createElement("td");this.footerRow.appendChild(o),this.options.layout===i.TABLE?(r.genericClass&&InfrontUtil.addClassName(o,r.genericClass),r.specificClass&&InfrontUtil.addClassName(o,r.specificClass+"--sum")):this.options.layout===i.DIV&&(r.genericClass&&InfrontUtil.addClassName(o,r.genericClass),InfrontUtil.addClassName(o,"cell-flex-list__row__field  cell-flex-list__row__field--footer  cell-flex-list__row__field-wrapper--"+r.getFieldClassName()));var l=[],c=new e.ClassBinding(o,e.CssConstants.kHiddenClass,function(e){return!e});r.visible.observe(c),a=r,l.push(function(){a.visible.unbind(c)});var d=r.totalReference,u=r.createValueBinding(null,o,"innerHTML",s);if(l.push(this.cache.customBindFR(d,u)),this.options.enableChangeStatusColors&&r.highlightChange){var h=new e.ClassBinding(o,e.CssConstants.kStatusPositive,t);l.push(this.cache.customBindFR(d,h));var p=new e.ClassBinding(o,e.CssConstants.kStatusNegative,n);l.push(this.cache.customBindFR(d,p))}this.unbindingManager.registerUnbinds(o,l)}else(o=this.options.layout===i.DIV?document.createElement("div"):document.createElement("td")).className=this.options.layout===i.TABLE?e.CssConstants.kCellSumRowLabel:"cell-flex-list__row__field  cell-flex-list__row__field--footer  cell-flex-list__row__field-wrapper--"+r.getFieldClassName(),r.visible.get()||this.options.layout!==i.DIV||InfrontUtil.addClassName(o,e.CssConstants.kHiddenClass),c=new e.ClassBinding(o,e.CssConstants.kHiddenClass,function(e){return!e}),r.visible.observe(c),this.unbindingManager.registerUnbind(o,function(){r.visible.unbind(c)}),this.footerRow.appendChild(o)},r.prototype.createElementColumnFromCache=function(t){for(var n,r=e.ComputedField.isComputedField(t),a=0;a<this.rows.length;a++)if(r&&this.createComputedFieldInCache(t,this.rowIds[a],this.rowsCache[a]),n=this.createColfromCache(this.rowIds[a],this.rowsCache[a],t,this.decimals[a],this.columns.length-1),t.nodeIndex=this.rows[a].childNodes.length+this.indexFix,this.options.layout===i.DIV){var s=document.createElement("div");s.className="cell-flex-list__row__field-wrapper  cell-flex-list__row__field-wrapper--"+t.getFieldClassName(),t.className&&(s.className+="  "+t.className),t.visible.get()||this.options.layout!==i.DIV||InfrontUtil.addClassName(s,e.CssConstants.kHiddenClass);var o=document.createElement("div");o.className="cell-flex-list__row__label",o.innerHTML=t.heading+":",s.appendChild(n),this.rows[a].appendChild(s);var l=new e.ClassBinding(s,e.CssConstants.kHiddenClass,function(e){return!e});t.visible.observe(l),this.unbindingManager.registerUnbind(s,function(){t.visible.unbind(l)})}else this.rows[a].appendChild(n)},r.prototype.createColumnFromResult=function(e){for(var t=0;t<this.rows.length;t++){var n=this.createTDfromResult(this.rowIds[t],this.results[t],e,this.decimals[t]);if(e.nodeIndex=this.rows[t].childNodes.length+this.indexFix,this.options.layout===i.DIV){var r=document.createElement("div");r.className="cell-flex-list__row__field-wrapper  cell-flex-list__row__field-wrapper--"+e.getFieldClassName(),e.className&&(r.className+="  "+e.className);var a=document.createElement("div");a.className="cell-flex-list__row__label",a.innerHTML=e.heading+":",r.appendChild(n),this.rows[t].appendChild(r)}else this.rows[t].appendChild(n)}},r.prototype.selectTab=function(e){var t=this.columns.length;if(this.options.tabs&&0<this.options.tabs.length){if(this.tabIndex=-1,"string"==typeof e){for(var n=0;n<this.options.tabs.length;n++)if(this.options.tabs[n].id==e){this.tabIndex=n;break}}else 0<=e&&e<this.options.tabs.length&&(this.tabIndex=e);if(0<=this.tabIndex&&this.tabs[this.tabIndex].columnsSpec){if(this.headerRow&&this.headerRow.childNodes){var i=!1,r=this.tabs[this.tabIndex].columnsSpec.length;if(0==this.tabs[this.tabIndex].columnsRealIndex.length)for(var a=0;a<this.tabs[this.tabIndex].columnsSpec.length;a++)this.tabs[this.tabIndex].columnsRealIndex.push(a);for(n=0;n<r;n++){var s=this.addCol(this.tabs[this.tabIndex].columnsSpec[n],this.tabs[this.tabIndex].columnsRealIndex[n]);0==n&&s.totalReference&&(i=!0)}for(var o=t-1;0<=o;o--)this.removeCol(o);r&&!i&&this.footerRow&&0<this.footerRow.childElementCount&&(this.footerRow.firstElementChild.innerHTML=this.languageHandler.get("global","total"))}else{if(this.columnsRealIndex=this.tabs[this.tabIndex].columnsRealIndex,0==this.columnsRealIndex.length)for(n=0;n<this.tabs[this.tabIndex].columnsSpec.length;n++)this.columnsRealIndex.push(n);for(this.createColumns(this.tabs[this.tabIndex].columnsSpec,this.extraColumns,this.languageHandler),n=0;n<this.columns.length;n++)this.createFooterField(this.items,this.columns[n],this.itemsCacheKeyCreator)}this.modifyCurrentTab()}}},r.prototype.modifyCurrentTab=function(){var e=!1;return 0<=this.tabIndex&&this.options.tabs&&0<this.options.tabs.length&&(this.tabs[this.tabIndex]={columns:[].concat(this.columns),columnsSpec:[].concat(this.columnsSpec),columnsRealIndex:[].concat(this.columnsRealIndex)},e=!0),e},r.prototype.selectedTab=function(){return 0<=this.tabIndex&&this.options.tabs&&this.tabIndex<this.options.tabs.length?this.options.tabs[this.tabIndex].id:""},r.prototype.selectedTabIndex=function(){return this.tabIndex},r.prototype.subscribe=function(e){e&&(this.subscribes=e),this.subscribes?(this.isSubscribed=!0,this.subscribes.addFields(this.getSubscriptionFields())):this.isSubscribed=!1},r.prototype.unsubscribe=function(){this.subscribes&&(this.isSubscribed=!1,this.subscribes.removeAllFields())},r.prototype.getUnbindingManager=function(){return this.unbindingManager},r.prototype.getSubscriptionFields=function(){var t=[];return this.columns&&(t=t.concat(e.FieldsHelper.getSubscriptionFieldsArray(this.columns))),this.extraColumns&&(t=t.concat(e.FieldsHelper.getSubscriptionFieldsArray(this.extraColumns))),t},r.prototype.createColumn=function(t,n,i){return void 0===i&&(i=[e.FieldSource.Unknown]),this.columnCreator?this.columnCreator(t,n):e.FieldsHelper.createFieldFromSpec(t,n,i)},r.prototype.applyInteractionEvents=function(t,n,i){var r=this;this.options.interactionHighlight&&InfrontUtil.addClassName(t,e.CssConstants.kCellRowInteraction),this.rowClickCallback&&InfrontUtil.addEventListener(t,"click",function(t){if(r.rowClickCallback&&r.rowClickCallback(n),r.linkCallback){var a=null;i.hasOwnProperty("instrument")&&(a=new e.Instrument(i[e.MWSConstants.instrument][e.MWSConstants.feed],i[e.MWSConstants.instrument][e.MWSConstants.ticker])),r.linkCallback(n,null,{instrument:a,target:i})}})},r.prototype.applyCacheInteractionEvents=function(t,n,i){var r=this;this.enableInteractionHighlight&&InfrontUtil.addClassName(t,e.CssConstants.kCellRowInteraction),(this.rowClickCallback||this.linkCallback)&&(InfrontUtil.addEventListener(t,"click",function(e){if(r.rowClickCallback&&r.rowClickCallback(n),r.linkCallback){var a=r.cache.getInstrument(i);r.linkCallback(n,null,{instrument:a,target:t})}}),InfrontUtil.addEventListener(t,"keyup",function(a){var s=a.which||a.keyCode;if((s===e.TextInputBinding.kKeycodeEnter||s===e.TextInputBinding.kKeycodeSpace)&&(a.preventDefault(),a.stopPropagation(),r.rowClickCallback&&r.rowClickCallback(n),r.linkCallback)){var o=r.cache.getInstrument(i);r.linkCallback(n,null,{instrument:o,target:t})}}))},r.prototype.createColumns=function(e,t,n){var i=this;this.columns=[];var r=function(e){for(var t=[],r=0;r<e.length;r++){var a=i.createColumn(e[r],n);a&&a.isValid()&&(a.locked=e[r].locked,a.frozen=e[r].frozen,a.allowZero=e[r].allowZero,a.nodeIndex=e[r].nodeIndex,e[r].nodeIndex||(a.nodeIndex=t.length),a.sortUsingOriginalValue=e[r].sortUsingOriginalValue,e[r].hasOwnProperty("origin")?a.origin=e[r].origin:a.origin=c.Default,e[r].hasOwnProperty("id")&&(a.id=e[r].id),e[r].hasOwnProperty("width")&&(a.width=e[r].width),e[r].hasOwnProperty("blinkType")&&(a.blinkType=e[r].blinkType),t.push(a))}return t};(this.columnsSpec=e)&&0<e.length&&(this.columns=r(e)),t&&0<t.length&&(this.extraColumns=r(t)),this.modifyCurrentTab()},r.prototype.updateDefaultContent=function(){this.options.defaultContent&&this.defaultContent&&(this.defaultContentParent&&!this.defaultContent.parentElement&&0==this.rows.length?this.defaultContentParent.appendChild(this.defaultContent):this.defaultContent.parentElement&&0<this.rows.length&&this.defaultContent.parentElement.removeChild(this.defaultContent),this.options.layout==i.TABLE&&this.defaultContent.firstElementChild&&this.defaultContent.firstElementChild.setAttribute("colspan",""+this.columns.length))},r.prototype.removeDefaultContent=function(){this.options.defaultContent&&this.defaultContent&&this.defaultContent.parentElement&&this.defaultContent.parentElement.removeChild(this.defaultContent)},r.prototype.findColumn=function(e){for(var t=null,n=0;n<this.columns.length;n++)if(this.columns[n].name==e){t=this.columns[n];break}return t},r.prototype.getColumns=function(){return this.extraColumns?this.columns.concat(this.extraColumns):this.columns},r.prototype.createQuoteOptions=function(){var t=this.extraColumns?this.columns.concat(this.extraColumns):this.columns,n=new e.QuoteOptions;return n.fields=e.FieldsHelper.getSubscriptionFieldsArray(t),n},r.prototype.createFooterFields=function(e,t){for(var n=this,i=function(e){return function(i){var r=t(i);return n.cacheKeyConverter?n.cacheKeyConverter(r,e):r}},r=0;r<this.columns.length;r++){var a=this.columns[r];this.createFooterField(e,a,i)}this.items=e,this.itemsCacheKeyCreator=i},r.prototype.createFooterField=function(t,n,i){var r,a=this,s=InfrontUtil.isObject(n.footer)?n.footer.type:n.footer,o=new e.FieldReference(this.cacheKey,"FOOTER_"+n.name);if("sum"==s)this.cache.createFieldComputation(o,n.getFieldSpec(),t,n.footerStrategy,i(n),InfrontUtil.sumArray),n.totalReference=o;else if("average"==s){var l=n.getFieldSpec(),c=null,d=null;if(n.weight){var u=this.findColumn(n.weight);c=u.getFieldSpec(),d=i(u)}this.cache.createWeightedAverage(o,l,c,t,i(n),d),n.totalReference=o}else if("computed"==s){var h,p;p=InfrontUtil.isObject(n.footer)?(h=n.footer.computeFields,n.footer.compute):(h=n.computeFields.map(function(e,t,n){return e.name}),n.compute);for(var m=[],g=0;g<h.length;g++)m.push(new e.FieldReference(this.cacheKey,"FOOTER_"+h[g]));r=p,a.cache.createComputedField(o.cacheKey,o.fieldSpec,m,function(e){return r(null,e,a.cache.getInstrument(o.cacheKey))}),n.totalReference=o}},r.prototype.createComputedFieldInCache=function(t,n,i){if(e.ComputedField.isComputedField(t))t.createComputedFieldInCache(this.cache,n,i,this.cacheKeyConverter);else if(t.type==e.FieldType.Converted){var r=this.createColumn("CURRENCY",this.infrontUI.languageHandler),a=this.cacheKeyConverter?this.cacheKeyConverter(i,t):i,s=new e.FieldReference(a,t.getFieldSpec()[0]),o=t.sourceField,l=new e.FieldReference(this.cacheKeyConverter?this.cacheKeyConverter(i,o):i,o.getFieldSpec()[0]),c=new e.FieldReference(this.cacheKeyConverter?this.cacheKeyConverter(i,r):i,r.getFieldSpec());this.infront.getCurrencyConverter().createConvertedFieldFromCache(l,c,t.currency,s)}},r.prototype.createComputedFieldsInCache=function(t,n){if(this.cache)for(var i,r=0;r<this.columns.length;r++){var a=this.columns[r];if(e.ComputedField.isComputedField(a))a.createComputedFieldInCache(this.cache,t,n,this.cacheKeyConverter);else if(a.type==e.FieldType.Converted){i=i||this.createColumn("CURRENCY",this.infrontUI.languageHandler);var s=this.cacheKeyConverter?this.cacheKeyConverter(n,a):n,o=new e.FieldReference(s,a.getFieldSpec()[0]),l=a.sourceField,c=new e.FieldReference(this.cacheKeyConverter?this.cacheKeyConverter(n,l):n,l.getFieldSpec()[0]),d=new e.FieldReference(this.cacheKeyConverter?this.cacheKeyConverter(n,i):n,i.getFieldSpec());this.infront.getCurrencyConverter().createConvertedFieldFromCache(c,d,a.currency,o)}}},r.prototype.setSortColumnChangedCallback=function(e){var t=this;this.sortedColumnChangedCallback=e,InfrontUtil.setZeroTimeout(function(){e(t.currentlySortedColumn,t.currentSortOrder,!1)})},r.prototype.setRowClickCallback=function(e){this.rowClickCallback=e},r.prototype.setLinkTriggerCallback=function(e){if(this.options.linkTrigger!=r.LINK_TARGET_ROW_CLICK){var t=this.findColumn(this.options.linkTrigger);if(t)if(t.onClick){var n=t.onClick;t.onClick=function(t,i,r){n(t,i,r),e(t,i,r)}}else t.onClick=function(t,n,i){e(t,n,i)}}else this.linkCallback=e},r.prototype.setCacheKeyConverter=function(e){this.cacheKeyConverter=e},r.prototype.setDataRetriever=function(e){this.dataRetriever=e},r.prototype.setVisibleColumns=function(e){for(var t=0;t<this.columns.length;t++)this.columns[t].visible.set(-1<e.indexOf(this.columns[t].name))},r.prototype.showExtraPopup=function(t,n,i){this.extraPopup&&(this.extraPopup.destroy(),this.extraPopup=null);var r=new e.ExtendedTableRowPopupOptions;r.columns=this.extraColumns,r.cacheKey=n,r.cacheKeyConverter=this.cacheKeyConverter,r.arrow=!0,r.anchor=i<this.columns.length/2?e.PopupAnchorLocation.TOP_LEFT:e.PopupAnchorLocation.TOP_RIGHT,this.options.extraOptions&&InfrontUtil.mergeRecursive(r,this.options.extraOptions),this.extraPopup=new e.ExtendedTableRowPopup(null,t,this.infrontUI,r)},r.prototype.createHeaderCol=function(t){var n=this,r=this.options.layout===i.DIV?document.createElement("div"):document.createElement("th");if((t.element=r).setAttribute("data-frozen",""+t.frozen),this.sortingEnabled?(r.setAttribute("tabindex","0"),r.removeAttribute("aria-sort"),r.setAttribute("aria-live","polite"),r.setAttribute("aria-label",this.languageHandler.get(e.Field.kFieldsLanguageKey,t.name)+" : Not sorted. Activate to sort ascending")):r.setAttribute("aria-label",""+this.languageHandler.get(e.Field.kFieldsLanguageKey,t.name)),r.setAttribute("role","columnheader"),t.genericClass&&InfrontUtil.addClassName(r,t.genericClass),this.options.layout===i.TABLE?(r.style.overflow="hidden",t.specificClass&&InfrontUtil.addClassName(r,t.specificClass)):this.options.layout===i.DIV&&InfrontUtil.addClassName(r,"cell-flex-list__row__field  cell-flex-list__row__field--header  cell-flex-list__row__field--"+t.getFieldClassName()+"--header"),t.className&&InfrontUtil.addClassName(r,t.className),t.heading){var a=document.createTextNode(t.heading);r.appendChild(a)}t.headingHover?r.setAttribute("title",t.headingHover):r.setAttribute("title",t.heading),t.visible.get()||InfrontUtil.addClassName(r,e.CssConstants.kHiddenClass);var s=new e.ClassBinding(r,e.CssConstants.kHiddenClass,function(e){return!e});if(t.visible.observe(s),this.unbindingManager.registerUnbind(r,function(){t.visible.unbind(s)}),this.sortingEnabled&&t.isSortable()){var o=document.createElement("span");InfrontUtil.addClassName(o,e.CssConstants.kCellTableSortable),t.equals(this.currentlySortedColumn)&&(this.currentlySelectedSortArrows=o,InfrontUtil.addClassName(o,this.currentSortOrder==e.SortOrder.Desc?e.CssConstants.kCellTableSortableDesc:e.CssConstants.kCellTableSortableAsc)),r.appendChild(o),InfrontUtil.addClassName(r,e.CssConstants.kCursorPointer);var l=function(i){if(!n.ignoreSortClick){if(n.currentlySortedColumn&&n.currentlySortedColumn.equals(t)?n.currentSortOrder=n.currentSortOrder==e.SortOrder.Desc?e.SortOrder.Asc:n.currentSortOrder==e.SortOrder.Asc?e.SortOrder.None:e.SortOrder.Desc:(n.currentlySortedColumn=t,n.currentSortOrder=e.SortOrder.Desc),n.sortingEnabled)switch(n.currentSortOrder){case e.SortOrder.Desc:r.setAttribute("aria-sort","ascending"),r.setAttribute("aria-label",n.languageHandler.get(e.Field.kFieldsLanguageKey,t.name)+" : Sorted Ascending. Activate to sort descending.");break;case e.SortOrder.Asc:r.setAttribute("aria-sort","descending"),r.setAttribute("aria-label",n.languageHandler.get(e.Field.kFieldsLanguageKey,t.name)+" : Sorted descending. Activate to unsort");break;default:r.removeAttribute("aria-sort"),r.setAttribute("aria-label",n.languageHandler.get(e.Field.kFieldsLanguageKey,t.name)+" : Not sorted. Activate to sort ascending")}n.currentlySelectedSortArrows&&(InfrontUtil.removeClassName(n.currentlySelectedSortArrows,e.CssConstants.kCellTableSortableAsc),InfrontUtil.removeClassName(n.currentlySelectedSortArrows,e.CssConstants.kCellTableSortableDesc)),n.currentSortOrder!=e.SortOrder.None&&InfrontUtil.addClassName(o,n.currentSortOrder==e.SortOrder.Desc?e.CssConstants.kCellTableSortableDesc:e.CssConstants.kCellTableSortableAsc),n.currentlySelectedSortArrows=o,n.sortedColumnChangedCallback&&n.sortedColumnChangedCallback(n.currentlySortedColumn,n.currentSortOrder,!0)}};InfrontUtil.addEventListener(r,"touchend",l),InfrontUtil.addEventListener(r,"click",l),InfrontUtil.addEventListener(r,"keyup",function(t){var n=t.which||t.keyCode;n!==e.TextInputBinding.kKeycodeEnter&&n!==e.TextInputBinding.kKeycodeSpace||l()})}if(t.hasOwnProperty("width")&&t.width&&(r.style.width=t.width),this.options.layout==i.TABLE&&(this.options.enableColumnsMove||this.options.enableColumnsResize)){var c=document.createElement("div");c.className="cell-table__col--setting";var d=document.createElement("button");d.setAttribute("role","button"),d.className="cell-table__col--setting--choose-col",d.title="Open column chooser",d.onclick=function(e){e.stopPropagation(),r.blur(),n.options.onSettingsClicked&&n.options.onSettingsClicked()};var u=document.createElement("button");u.setAttribute("role","button"),u.className="cell-table__col--setting--reset-col",u.title="Restore default columns",u.onclick=function(e){e.stopPropagation(),r.blur(),n.resetColumns()};var h=document.createElement("button");h.setAttribute("role","button"),h.className="cell-table__col--setting--remove-col",h.title="Remove column",t.heading&&(h.title+=": "+t.heading),h.onclick=function(e){e.stopPropagation(),r.blur(),!t.locked&&n.isColInAvailableList(t)?n.removeColumn(t.name):(h.classList.add("cell-table__col--setting--remove-col-disabled"),h.classList.remove("cell-shake"),h.classList.add("cell-shake"),h.title="This column is locked")};var p=document.createElement("div");p.className="cell-table__col--setting--seperator",c.style.display="none",c.appendChild(d),c.appendChild(u),c.appendChild(p),c.appendChild(h),c.onmousedown=function(e){e.stopPropagation()},r.appendChild(c)}return r},r.prototype.isColInAvailableList=function(e){var t=e.name.toLowerCase();if(this.options.availableColumns)for(var n=0,i=this.options.availableColumns;n<i.length;n++){var r=i[n];if(InfrontUtil.isString(r)){if(r.toLowerCase()==t)return!0}else if(r.name&&r.name.toLowerCase()==t)return!0}return!1},r.prototype.unbindFooterTr=function(){this.footerTr&&(this.unbindingManager.unbind(this.footerTr,!0),this.footerTr=null)},r.prototype.createGenericCol=function(t,n){var r;if((r=this.options.layout===i.DIV||this.options.layout===i.CARD||this.options.layout===i.COMPACT?document.createElement("div"):document.createElement("td")).setAttribute("role","cell"),this.options.layout===i.TABLE)t.genericClass&&InfrontUtil.addClassName(r,t.genericClass),t.specificClass&&InfrontUtil.addClassName(r,t.specificClass);else if(this.options.layout===i.DIV){var a=document.createElement("div");t.genericClass&&InfrontUtil.addClassName(r,t.genericClass),a.appendChild(r),InfrontUtil.addClassName(r,"cell-flex-list__row__field cell-flex-list__row__field--"+t.getFieldClassName())}else this.options.layout===i.CARD&&(a=document.createElement("div")).appendChild(r);if(t.className&&InfrontUtil.addClassName(r,t.className),t.onClick&&InfrontUtil.addClassName(r,e.CssConstants.kTableCellInteraction),1==t.flag){var s=document.createElement("span"),o=this.infront.getFeedHandler().getFeedMetaData(n.feed),l=o&&o.iso_country?o.iso_country:null,c=l?"  cell-flag-"+l.toLowerCase():"";InfrontUtil.addClassName(s,"cell-flag"+c),s.setAttribute("title",l),r.appendChild(s)}t.visible.get()||InfrontUtil.addClassName(r,e.CssConstants.kHiddenClass);var d=new e.ClassBinding(r,e.CssConstants.kHiddenClass,function(e){return!e});return t.visible.observe(d,e.InitialUpdate.None),this.unbindingManager.registerUnbind(r,function(){t.visible.unbind(d)}),r},r.prototype.createTDfromResult=function(t,n,i,r){var a=this.createGenericCol(i,t),s=null!=i.decimals?i.decimals:r,o=this.dataRetriever(i,n);if(null!=i.onClick&&InfrontUtil.addEventListener(a,"click",function(r){var s=null;n[e.MWSConstants.instrument]&&n[e.MWSConstants.instrument][e.MWSConstants.feed]&&n[e.MWSConstants.instrument][e.MWSConstants.ticker]&&(s=new e.Instrument(n[e.MWSConstants.instrument][e.MWSConstants.feed],n[e.MWSConstants.instrument][e.MWSConstants.ticker])),r.stopPropagation(),i.onClick(t,o,{target:a,instrument:s})}),i.hover){var l=i.hover;null!=l&&l.type==e.FieldType.Normal&&(a.title=this.formatValueForColumn(l,t,s,l.getValueFromObject(n)))}if(i.content)"function"==typeof i.content?a.innerHTML=i.content(t,n[e.MWSConstants.instrument])||"":a.innerHTML=i.content||"";else if(i.computeFields&&0<i.computeFields.length){for(var c=[],d=0;d<i.computeFields.length;d++){var u=i.computeFields[d];null!=u&&c.push(this.dataRetriever(u,n))}var h=i.compute(t,c,n[e.MWSConstants.instrument]);a.innerHTML=this.formatValueForColumn(i,t,s,h)||""}else null!=o&&(a.innerHTML=this.formatValueForColumn(i,t,s,o)||"",this.enableChangeStatusColors&&i.highlightChange&&(0<o?InfrontUtil.addClassName(a,e.CssConstants.kStatusPositive):o<0&&InfrontUtil.addClassName(a,e.CssConstants.kStatusNegative)));return a},r.prototype.formatValueForColumn=function(t,n,i,r){return t.translate?t.translate(n,r):t.dataType==e.DataType.Text?r:t.dataType==e.DataType.DateTime?InfrontUtil.formatStandardTimestamp(new Date(r)):t.dataType==e.DataType.DateOnly?InfrontUtil.formatDate(new Date(r)):t.dataType==e.DataType.Time?r:t.dataType==e.DataType.Percent?InfrontUtil.formatPercent(r,null!=t.decimals?t.decimals:2):t.dataType==e.DataType.Integer&&t.shorten?InfrontUtil.formatAndShortenInteger(r):t.dataType==e.DataType.Integer?InfrontUtil.formatNumber(r,0):t.dataType==e.DataType.ID?InfrontUtil.formatID(r):InfrontUtil.formatNumber(r,i)},r.prototype.createColfromCache=function(i,r,a,s,o){var l=this,c=this.cacheKeyConverter?this.cacheKeyConverter(r,a):r;c||(c=r);var d=null!=a.decimals?a.decimals:s,u=e.Instrument.isInstrument(i)&&i.feed&&i.ticker;(u&&r!=c||!i&&r!=c)&&(i=this.cache.getInstrument(c));var h=this.createGenericCol(a,i),p=a.flag?document.createElement("span"):h;p.setAttribute("aria-label",a.name),null!=a.onClick?(InfrontUtil.addEventListener(h,"click",function(e){var t=l.cache.getInstrument(r);e.stopPropagation(),a.onClick(i,l.cache.get(c,a.getFieldSpec()),{target:h,instrument:t})}),InfrontUtil.addEventListener(h,"keyup",function(t){var n=t.which||t.keyCode;if(n===e.TextInputBinding.kKeycodeEnter||n===e.TextInputBinding.kKeycodeSpace){var s=l.cache.getInstrument(r);t.stopPropagation(),a.onClick(i,l.cache.get(c,a.getFieldSpec()),{target:h,instrument:s})}})):a.showExtra&&(InfrontUtil.addEventListener(h,"click",function(e){e.preventDefault(),e.stopPropagation(),l.showExtraPopup(h,r,o)}),InfrontUtil.addEventListener(h,"keyup",function(t){var n=t.which||t.keyCode;n!==e.TextInputBinding.kKeycodeEnter&&n!==e.TextInputBinding.kKeycodeSpace||(t.preventDefault(),t.stopPropagation(),l.showExtraPopup(h,r,o))}));var m=[];if(a.hover){var g=a.hover;if(null!=g&&g.type==e.FieldType.Normal){var f=this.cacheKeyConverter?this.cacheKeyConverter(r,g):r,v=g.createValueBinding(i,p,"title",d);i&&m.push(this.bindField(u,f,i,g,v))}}if(a.type==e.FieldType.Custom)if("function"==typeof a.content){var y=this.cache.getInstrument(r),b=a.content(i,y,p);b instanceof HTMLElement?(InfrontUtil.removeAllChildNodes(p),p.appendChild(b)):p.innerHTML=b||""}else a.flag&&null==a.content||(p.innerHTML=a.content||"");else{var T=a.createValueBinding(i,p,"innerHTML",d,!0===a.allowZero);i&&m.push(this.bindField(u,c,i,a,T))}if(a.blinkType!=e.BlinkType.None){var S=new e.CssUpdateBinding(h,a.blinkDuration,a.blinkType);i&&m.push(this.bindField(u,c,i,a,S))}if(this.enableChangeStatusColors&&a.highlightChange){var C=new e.ClassBinding(h,e.CssConstants.kStatusPositive,t);i&&m.push(this.bindField(u,c,i,a,C));var I=new e.ClassBinding(h,e.CssConstants.kStatusNegative,n);i&&m.push(this.bindField(u,c,i,a,I))}return 0<m.length&&this.unbindingManager.registerUnbinds(h,m),h!=p&&h.appendChild(p),h},r.prototype.bindField=function(e,t,n,i,r){var a=i.getFieldTag();return e&&"string"!=typeof a?this.cache.customSymbolBind(n,a,r):this.cache.customBind(t,i.getFieldSpec(),r)},r.prototype.htmlElementTreeAdded=function(e,t,n){},r.prototype.htmlElementTreeRemoved=function(e,t,n){n<this.rows.length&&(this.rows.splice(n,1),this.rowIds.splice(n,1),this.rowsCache.splice(n,1),this.decimals.splice(n,1)),this.defaultContentParent&&this.defaultContent&&0==this.rows.length&&this.defaultContentParent.appendChild(this.defaultContent),this.unbindingManager.unbind(e,!0)},r.prototype.htmlElementTreeMoved=function(e,t,n,i){},r.prototype.setupDragAndDrop=function(){var t,n,i,r,a=this;(n=t||(t={}))[n.Move=0]="Move",n[n.ResizeLeft=1]="ResizeLeft",n[n.ResizeRight=2]="ResizeRight",(r=i||(i={}))[r.None=0]="None",r[r.Left=1]="Left",r[r.Right=2]="Right",r[r.Middle=3]="Middle";var l,c=this.headerRow,d=!1,u=0,h=0,p=null,m=null,g=null,f=null,v=0,y=0,b=null,T=0,S=0,C=0,I=i.None,_=0,M=function(){return InfrontUtil.browserInfo.msie||!!InfrontUtil.browserInfo.uagent.match("trident.*rv:11.")},E=function(e){if(e instanceof MouseEvent){if(e.pageX)return e.pageX;if(e.clientX)return e.clientX+(c.scrollLeft?c.scrollLeft:document.body.scrollLeft)}else if(!M()&&e instanceof TouchEvent&&0<e.touches.length){if(e.touches[0].pageX)return e.touches[0].pageX;if(e.touches[0].clientX)return e.touches[0].clientX+(c.scrollLeft?c.scrollLeft:document.body.scrollLeft)}return null},w=function(e){if(e instanceof MouseEvent){if(e.offsetX)return e.offsetX;if(e.layerX)return e.layerX}else if(!M()&&e instanceof TouchEvent&&0<e.touches.length&&e.touches[0].pageX)return e.touches[0].pageX-0;return null},A=function(e){var t=i.None,n=e.getAttribute("data-frozen");return"left"==n?t=i.Left:"right"==n?t=i.Right:"middle"==n&&(t=i.Middle),t},D=function(){a.draggingColumnEl.nextElementSibling&&a.draggingColumnEl.nextElementSibling.classList.remove("cell-table__cell--next-column"),a.draggingColumnEl.previousElementSibling&&a.draggingColumnEl.previousElementSibling.classList.remove("cell-table__cell--prev-column"),a.draggingColumnEl.classList.remove("cell-table__cell--drag-disabled")},O=function(e){var t=s(a.draggingColumnEl)+e;t>=a.headerRow.childNodes.length&&(t=a.headerRow.childNodes.length-1),t<0&&(t=0);var n=a.headerRow.children[t];if(a.draggingColumnEl==n||A(n)!=i.None)return!1;var r=s(a.draggingColumnEl),o=t,l=a.getColumnRealIndex(r),c=a.getColumnRealIndex(o);return l!=r&&(r+=r-l),c!=o&&(o+=o-c),D(),a.moveCol(r,o),a.updatedColumn&&null!=a.updatedIndex1&&null!=a.updatedIndex2&&a.options.onColumnMoved&&a.options.onColumnMoved(a.updatedColumn,a.updatedIndex1,a.updatedIndex2),a.modifyCurrentTab(),!0},k=function(e){if(e=e||window.event,!d)return!0;var n,r=E(e);if(v=r-u,l==t.Move){if(0<v?a.draggingColumnEl.nextElementSibling&&(y=a.draggingColumnEl.nextElementSibling.clientWidth||100):a.draggingColumnEl.previousElementSibling&&(y=a.draggingColumnEl.previousElementSibling.clientWidth||100),0!=(v=o(v,y))&&I==i.None){if(!O(v))return N(e),!1;h=u=r,a.draggingColumnEl.style.left="0px"}else if(r!=h)if(I==i.None){var c=parseInt(a.draggingColumnEl.style.left)||0;a.draggingColumnEl.style.left=c+(r-h)+"px",D(),Math.abs(r-u)>y/2&&(0<(n=r-u)&&a.draggingColumnEl.nextElementSibling&&(A(a.draggingColumnEl.nextElementSibling)==i.None?(a.draggingColumnEl.nextElementSibling.classList.add("cell-table__cell--next-column"),a.draggingColumnEl.classList.remove("cell-table__cell--drag-disabled")):a.draggingColumnEl.classList.add("cell-table__cell--drag-disabled")),n<0&&a.draggingColumnEl.previousElementSibling&&(A(a.draggingColumnEl.previousElementSibling)==i.None?(a.draggingColumnEl.previousElementSibling.classList.add("cell-table__cell--prev-column"),a.draggingColumnEl.classList.remove("cell-table__cell--drag-disabled")):a.draggingColumnEl.classList.add("cell-table__cell--drag-disabled")),v=0<r-u?1:-1),h=r}else 5<Math.abs(r-u)&&a.draggingColumnEl.classList.add("cell-table__cell--drag-disabled")}else if(l==t.ResizeRight){if(b&&15<T+v&&15<S-v){var p=s(a.draggingColumnEl);a.resizeCol(p,100*(T+v)/C+"%");var m=s(b);a.resizeCol(m,100*(S-v)/C+"%"),a.options.onColumnsResized&&a.options.onColumnsResized([p,m])}}else l==t.ResizeLeft&&b&&15<T-v&&15<S+v&&(p=s(a.draggingColumnEl),a.resizeCol(p,100*(T-v)/C+"%"),m=s(b),a.resizeCol(m,100*(S+v)/C+"%"),a.options.onColumnsResized&&a.options.onColumnsResized([p,m]));return!0},R=function(e){if(e=e||window.event,a.draggingColumnEl){v=0,u=h=E(e),e instanceof MouseEvent||a.draggingColumnEl.focus();var n=w(e);if(y=a.draggingColumnEl.clientWidth||0,(l=n<=10?t.ResizeLeft:10<n&&n<y&&y-10<n?t.ResizeRight:t.Move)==t.Move&&!a.enableColumnsMove)return!0;if(l!=t.Move&&!a.enableColumnsResize)return!0;d=!0,l!=t.Move?(b=l==t.ResizeLeft?a.draggingColumnEl.previousElementSibling:a.draggingColumnEl.nextElementSibling,C=a.headerRow.clientWidth||0,T=a.draggingColumnEl.clientWidth||o(C,a.headerRow.childElementCount),S=b.clientWidth||o(C,a.headerRow.childElementCount)):(I=A(a.draggingColumnEl))==i.None&&(a.draggingColumnEl.classList.add("cell-table__cell--drag"),a.draggingColumnEl.classList.add("cell-table__cell--current-column")),document.onmousemove&&(p=document.onmousemove),document.onmousemove=k,document.ontouchmove&&(g=document.ontouchmove),document.ontouchmove=k,document.onmouseup&&(m=document.onmouseup),document.onmouseup=N,document.ontouchend&&(f=document.ontouchend),document.ontouchend=N}return!1},N=function(e){return a.draggingColumnEl&&(e instanceof MouseEvent||a.draggingColumnEl.blur(),l==t.Move?(A(a.draggingColumnEl)==i.None?(0<Math.abs(v)&&O(v),a.ignoreSortClick=5<Math.abs(parseInt(a.draggingColumnEl.style.left)),a.draggingColumnEl.style.left="0px",a.draggingColumnEl.classList.remove("cell-table__cell--drag"),a.draggingColumnEl.classList.remove("cell-table__cell--current-column")):(a.draggingColumnEl.classList.remove("cell-table__cell--drag-disabled"),a.ignoreSortClick=5<Math.abs(u-E(e))),a.draggingColumnEl.style.cursor="default",D(),a.draggingColumnEl=null):(a.modifyCurrentTab(),a.ignoreSortClick=!0),a.options.onColumnsChanged&&a.options.onColumnsChanged(),p&&(document.onmousemove=p,p=null),m&&(document.onmouseup=m,m=null),g?(document.ontouchmove=g,g=null):document.ontouchmove=null,f?(document.ontouchend=f,f=null):document.ontouchend=null),h=u=0,d=!1},L=function(e,n,i){if(C=a.headerRow.clientWidth||0,T=a.draggingColumnEl.clientWidth||o(C,a.headerRow.childElementCount),S=i.clientWidth||o(C,a.headerRow.childElementCount),e==t.ResizeRight&&i&&15<T+n&&15<S-n){var r=s(a.draggingColumnEl);a.resizeCol(r,100*(T+n)/C+"%");var l=s(i);a.resizeCol(l,100*(S-n)/C+"%"),a.options.onColumnsResized&&a.options.onColumnsResized([r,l])}};c.onkeyup=function(n){a.draggingColumnEl&&(n.shiftKey&&n.which===e.TextInputBinding.kKeycodeLeftArrow?(O(-1),a.draggingColumnEl.focus()):n.shiftKey&&n.which===e.TextInputBinding.kKeycodeRightArrow?(O(1),a.draggingColumnEl.focus()):n.shiftKey&&n.which===e.TextInputBinding.kKeycodeDownArrow?(_=0,_-=10,l=t.ResizeRight,b=a.draggingColumnEl.nextElementSibling,L(l,_,b),a.draggingColumnEl.focus()):n.shiftKey&&n.which===e.TextInputBinding.kKeycodeUpArrow&&(_=0,_+=10,l=t.ResizeRight,b=a.draggingColumnEl.nextElementSibling,L(l,_,b),a.draggingColumnEl.focus()))},c.onmousedown=R,c.ontouchstart=R,c.onmousemove=function(e){var t=e.target||e.srcElement;if(a.enableColumnsResize&&t&&"TH"==t.tagName){var n=w(e);y=t.clientWidth||0,n<=10||10<n&&n<y&&y-10<n?t.classList.add("cell-table__col--resize"):t.classList.remove("cell-table__col--resize")}}},r.LINK_TARGET_ROW_CLICK="LINK_TARGET_ROW_CLICK",r.kCacheKeyPrefix="ColumnManager",r.kColumnSeperator=",",r.kPropSeperator=":",r.kTabSeperator="|",r.cacheKeyCounter=0,r.trCounter=0,r.Yes="Yes",r.No="No",r.expanded=!1,r}(),p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n,[e.FieldSource.Instrument,e.FieldSource.Snapshot,e.FieldSource.Unknown])},n}(e.ColumnManager=h);e.SnapshotColumnManager=p;var m=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n,[e.FieldSource.Instrument,e.FieldSource.Brokerstats,e.FieldSource.Unknown])},n}(h);e.BrokerstatsColumnManager=m;var g=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n,[e.FieldSource.Market,e.FieldSource.Unknown])},n}(h);e.MarketListColumnManager=g;var f=function(){function t(e){this.cache=e,this.targetManager=new InfrontUtil.LinkTargetManager,this.isinTargetManager=new InfrontUtil.LinkTargetManager}return t.prototype.instrumentClicked=function(t){if(this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,t),this.isinTargetManager.isLinked()){var n=this.cache.get(e.CacheKeyFactory.createInstrumentKey(t),[e.MWSConstants.instrument,e.MWSConstants.isin]),i=InterLibraryLink.DataType.isin;this.isinTargetManager.updateTargets(i,n)}},t.prototype.link=function(e){var t=e.accepts();-1!=t.indexOf(InterLibraryLink.DataType.infrontInstrument)?this.targetManager.addTarget(e):-1<t.indexOf(InterLibraryLink.DataType.isin)&&this.isinTargetManager.addTarget(e)},t.prototype.unlink=function(e){this.targetManager.removeTarget(e),this.isinTargetManager.removeTarget(e)},t}();e.InstrumentListLinkControllerDelegate=f}(Infront||(Infront={})),function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.columns=["NAME","FULLNAME","BUY_VOLUME","SELL_VOLUME","INT_VOLUME","TOTAL_VOLUME"],n.defaultSortedColumn=0,n.defaultSortOrder=e.SortOrder.Desc,n}return __extends(n,t),n}(e.CommonListOptions);e.BrokerstatsWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"brokerstats",r)||this;return a.displayTicker=new e.Observable,a.periodObserver=new e.SelectInputBinding,a.periodObserver.observe(function(e){return a.periodSelected(e)}),a.showProgressIndicator=new e.Observable,a.showProgressIndicator.set(!1),a.widgetTitleObs=new e.Observable,a.widgetTitleObs.set(a.widgetTitle),a}return __extends(i,n),i.prototype.linkEvent=function(e){},i.prototype.setColumnManager=function(){var t=this;this.getStoredColumn(),this.decimals=e.UI.kDefaultDecimals,this.currentPeriod=this.options.period,this.columnManager=new e.BrokerstatsColumnManager(this.options,this.infront,this.infrontUI),this.columnManager.setSortColumnChangedCallback(function(e,n,i){return t.sortColumnChanged(e,n,i)}),this.columnManager.setRowClickCallback(function(e){return t.rowClicked(e)})},i.prototype.setListItems=function(){this.data=new e.ContinouslySortedColumnCacheKeyObservableArray(this.columnManager.currentlySortedColumn,this.columnManager.currentSortOrder,this.infront.getCache()),this.options.hasOwnProperty("maxItems")&&(this.dataCap=new e.ObservableArrayCap(this.data,this.options.maxItems)),this.periods=["INTRADAY","TWO_DAYS","ONE_WEEK","ONE_MONTH","THREE_MONTHS","SIX_MONTHS","ONE_YEAR","YTD"],this.periodTitles=[];for(var t=0;t<this.periods.length;t++)this.periodTitles.push(this.infrontUI.languageHandler.get("brokerstats",this.periods[t]))},i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){var e=this;if(this.options.feed||this.options.instrument){var t=this.options.feed?this.options.feed:this.options.instrument.feed;this.infront.getFeedHandler().getFeed(t,function(t){e.feedMetadata=t,e.feedMetadata.hasOwnProperty("decimals")&&(e.decimals=e.feedMetadata.decimals),e.brokerstatsAvailableForFeed=e.feedMetadata&&e.feedMetadata.buyer_seller,n.prototype.newInit.call(e)}),this.displayTicker.set(this.options.instrument.ticker)}},i.prototype.newBuildUI=function(){var t=this;this.options.tickerInHeader&&(this.options.instrument?this.widgetTitleObs.set(this.widgetTitle+" "+this.options.instrument.ticker):this.widgetTitleObs.set(this.widgetTitle));var i=e.WidgetDOMFactory.create_WBrokerStats_DOM(this.element,this.displayTicker,this.widgetTitleObs,this.options.enablePeriodSelector,this.periodTitles,this.periodObserver,this.options.layout,this.brokerstatsAvailableForFeed,this.options.showSearchWidget,function(e){return t.onSearchButtonClick(e)},this.infrontUI.languageHandler),r=i.thead;if(this.tableHeader=i.thead,r.appendChild(this.createHeaderRow()),this.brokerstatsAvailableForFeed){var a=i.tbody,s=new e.ArrayBinding(a,this,this.columnManager);this.dataCap?(this.dataCap.observe(s),this.unbinds.push(function(){t.dataCap.unbind(s)})):(this.data.observe(s),this.unbinds.push(function(){t.data.unbind(s)})),this.progressIndicator=new e.ProgressIndicator(this.element),this.progressIndicator.observe(this.showProgressIndicator),this.getBrokerstatsData()}this.options.showSearchWidget&&(this.searchWidget=new e.SearchBox(i.searchContainer,this.infront,this.addInstrumentSearchOpts("brokerstats")),this.searchContainer=i.searchContainer,this.options.tickerInHeader=!0),this.addLabelToSelectElement(i),n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){this.data.clear(),n.prototype.newDestroyUI.call(this)},i.prototype.addLabelToSelectElement=function(e){var t=this,n=e.labelPeriodSelect,i=e.periodSelect;n.htmlFor=i.id,n.style.cssText="opacity:0; position;absolute; right:-99999px;",n.innerHTML=this.periodTitles[0],this.periodObserver.observe(function(n){e.labelPeriodSelect.innerHTML=t.periodTitles[n]})},i.prototype.createCacheKey=function(t){return this.options.instrument?e.CacheKeyFactory.createInstrumentBrokerstatsKey(this.currentPeriod,this.options.instrument,t.name):t.hasOwnProperty(e.MWSConstants.instrument)?e.CacheKeyFactory.createInstrumentBrokerstatsKey(this.currentPeriod,t[e.MWSConstants.instrument],t.name):e.CacheKeyFactory.createBrokerKey(this.currentPeriod,this.options.feed,t.name)},i.prototype.getBrokerstatsData=function(){var t=this;this.showProgressIndicator.set(!0),this.data.clear();var n=new e.BrokerStatsOptions;n.instrument=this.options.instrument,n.feed=this.options.feed,n.broker=this.options.broker,n.onData=function(e){t.showProgressIndicator.set(!1);for(var n=e,i=0;i<n.length;i++){var r=t.createCacheKey(e[i]);t.infront.getCache().update(r,e[i]),t.columnManager.createComputedFieldsInCache(r,r),-1===t.data.indexOf(r)&&t.data.push(r)}},n.onError=function(e,n){t.showProgressIndicator.set(!1),InfrontUtil.errorLogCallback(e,n)},this.infront.brokerStats(this.currentPeriod,n)},i.prototype.createRow=function(e,t){return this.createElementRowFromCache(e,e,this.decimals)},i.prototype.rowClicked=function(t){this.options.broker&&this.options.onInstrumentSelected?this.options.onInstrumentSelected(new e.Instrument(this.infront.getCache().get(t,["instrument","feed"]),this.infront.getCache().get(t,["instrument","ticker"]))):this.options.onBrokerSelected&&this.options.onBrokerSelected(this.infront.getCache().get(t,["name"]))},i.prototype.periodSelected=function(e){0<=e&&e<this.periods.length&&this.currentPeriod!=this.periods[e]&&(this.data.clear(),this.currentPeriod=this.periods[e],this.getBrokerstatsData())},i.prototype.sortColumnChanged=function(e,t,n){this.data.setSortColumn(e,t),n&&this.store(i.kMySortingColumnKey,e.name+t)},i.prototype.getStoredColumn=function(){var t=this.getStoredValue(i.kMySortingColumnKey);if(t){var n=t.substr(0,t.length-1),r=t.substr(t.length-1);this.options.defaultSortedColumn=n,"0"==r?this.options.defaultSortOrder=e.SortOrder.Desc:"1"==r&&(this.options.defaultSortOrder=e.SortOrder.Asc)}},i.prototype.modify=function(e){InfrontUtil.mergeRecursive(this.options,e),this.newDestroyUI(),this.newInit()},i.prototype.receiveMessage=function(t){t.type==InterLibraryLink.DataType.infrontInstrument?e.Instrument.isSameInstrument(this.options.instrument,t.value)||(this.options.instrument=e.Instrument.prototype.inf_clone.apply(t.value),this.newDestroyUI(),this.newInit()):t.type==InterLibraryLink.DataType.feed&&this.options.feed!=t.value&&(this.options.feed=t.value,this.newDestroyUI(),this.newInit())},i.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument,InterLibraryLink.DataType.feed]},i.kMySortingColumnKey="my-sorting-column",i}(e.CommonListWidgetBase);e.BrokerstatsWidget=n}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showPortfolio=!1,t.columns=[{name:"TICKER",allowZero:!0},{name:"AMOUNT",allowZero:!0}],t}return __extends(t,e),t}(e.CommonListOptions);e.CashPositionsWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"cashPositions",r)||this;return a.options=r,a.showPortfolioSelect=r.showPortfolioSelect,a.showPortfolio=!a.showPortfolioSelect&&r.showPortfolio,a.columnManager=new e.ColumnManager(a.options,a.infront,a.infrontUI),a.items=new e.ObservableArray,a.sync=new e.ObservableArraySync(a.items),a.isTrading=new e.Observable,a.isTrading.set(!1),a.currentPortfolioNameObs=new e.Observable,a.currentPortfolioNameObs.set(""),a.setHasContent(!0),a.items.observe(a),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){var t=this,i=e.WidgetDOMFactory.create_WTradingTable_DOM(this.element,this.options.layout,this.showPortfolioSelect?null:this.widgetTitle,this.currentPortfolioNameObs,this.showPortfolio,this.showPortfolioSelect,!1,null,null,this.options.titleClick,this.infrontUI.languageHandler);i.thead.appendChild(e.ColumnManager.createHeaderRow(this.options,this.columnManager,this.columnManager.getUnbindingManager(),this.columnManager.columns)),i.thead.appendChild(this.createNoTradingContentDisplay()),this.showPortfolioSelect&&this.createPortfolioSelect(i.portfolioContainer);var r=new e.ArrayBinding(i.tbody,this,null);this.items.observe(r),this.unbinds.push(function(){t.items.unbind(r)}),n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){this.infront.getTradingManager().removeObserver(this),this.unbind&&(this.unbind(),this.unbind=null),n.prototype.newDestroyUI.call(this)},i.prototype.createRow=function(t,n){return e.ColumnManager.createElementRowFromCache(this.options,this.columnManager,t,t,2)},i.prototype.currentPortfolioChanged=function(t){var n=null==t?"":t.name;this.currentPortfolioNameObs.get()!=n&&(this.currentPortfolioNameObs.set(n),this.items.clear(),null!=t&&(this.unbind=this.infront.getCache().bindToArray(e.CacheKeyFactory.createPortfolioCashPositionsKey(t),this.sync)))},i.prototype.currentPortfolioReady=function(t){this.unbind&&(this.unbind(),this.unbind=null),this.unbind=this.infront.getCache().bindToArray(e.CacheKeyFactory.createPortfolioCashPositionsKey(t),this.sync)},i.prototype.supportsHasContent=function(){return!0},i.prototype.updateHasContent=function(){this.setHasContent(0<this.items.length())},i.prototype.reInit=function(e){this.updateHasContent()},i.prototype.itemAdded=function(e,t){this.updateHasContent()},i.prototype.itemRemoved=function(e,t){this.updateHasContent()},i.prototype.itemMoved=function(e,t,n){},i.prototype.createPortfolioSelect=function(t){var n=new e.PortfolioSelectWidgetOptions;n.widgetTitle=this.widgetTitle,n.scaling=!0,this.portfolioSelectWidget=new e.PortfolioSelectWidget(t,this.infrontUI,n)},i}(e.TradingWidgetBase);e.CashPositionsWidget=n}(Infront||(Infront={})),function(e){var t=function(){function e(){}return e.kVisbilityHidden="cell-visibility-hidden",e.kHiddenClass="cell-display-none",e.kNoDataClass="cell-w-no-data",e.kNoPaddingClass="cell-no-padding",e.kFullButtonCellClass="cell-tablecell--interaction--full-button",e.kDeleteButton="cell-table__deletebutton",e.kModifyButton="cell-table__editbutton",e.kActivateButton="cell-table__activatebutton",e.kDeactivateButton="cell-table__deactivatebutton",e.kCursorPointer="cell-cursor-pointer",e.kCellRowInteraction="cell-row--interaction",e.kTableCellInteraction="cell-tablecell--interaction",e.kCellActiveRow="cell-active-row",e.kCellSumRow="cell-sumrow",e.kCellSumRowLabel="cell-sumrow__label",e.kCellTableSortable="cell-table__col-sortable",e.kCellTableSortableDesc="cell-table__col-sortable--descending",e.kCellTableSortableAsc="cell-table__col-sortable--ascending",e.kCellNumeric="cell-table__num",e.kCellText="cell-table__txt",e.kCellNumTime="cell-table__num--time",e.kCellNumDate="cell-table__num--date",e.kCellArrow="cell-table__arrow",e.kUpdateUp="cell-update-up",e.kUpdateDown="cell-update-down",e.kUpdateNeutral="cell-update-neutral",e.kUpdateNone="cell-table__arrow-hidden",e.kUpdateFlashUp="cell-update-flash-up",e.kUpdateFlashDown="cell-update-flash-down",e.kStatusPositive="cell-status-positive",e.kStatusNegative="cell-status-negative",e.kInputConfirmed="cell-input--confirmed",e.kSearchResultEquity="cell-search-result  cell-search-result--equity",e.kSearchResultBond="cell-search-result  cell-search-result--bond",e.kSearchResultFeed="cell-search-result  cell-search-result--feed",e.kSearchResultFuture="cell-search-result  cell-search-result--future",e.kSearchResultOption="cell-search-result  cell-search-result--option",e.kSearchResultFund="cell-search-result  cell-search-result--fund",e.kSearchResultForex="cell-search-result  cell-search-result--forex",e.kSearchResultChain="cell-search-result  cell-search-result--chain",e.kSearchResultIndex="cell-search-result  cell-search-result--index",e.kSearchResultCertificate="cell-search-result  cell-search-result--certificate",e.kSearchResultOther="cell-search-result  cell-search-result--other",e.kCellNotificationsSuccess="cell-notifications__row--success",e.kCellNotificationsAlert="cell-notifications__row--alert",e.kCellNotificationsInfo="cell-notifications__row--info",e.kTableRowBuy="cell-table-row__highlight--buy",e.kTableRowSell="cell-table-row__highlight--sell",e.kPopupArrowTopLeft="cell-tooltip__arrow--top-left",e.kPopupArrowTopRight="cell-tooltip__arrow--top-right",e.kPopupArrowBottomLeft="cell-tooltip__arrow--bottom-left",e.kPopupArrowBottomRight="cell-tooltip__arrow--bottom-right",e.kInstrumentValuesHorizontal="cell-instrument-values--horizontal",e.kInstrumentValuesVertical="cell-instrument-values--vertical",e.kInstrumentValuesVerticalHeading="cell-instrument-values--vertical__heading",e.kInstrumentValuesVerticalValue="cell-instrument-values--vertical__value",e.kCellTradingInfoWrapper="cell-flex-row cell-flex-unstack cell-w-positions__trading",e.kCellActiveOrderMessageBox="cell-w-positions__trading-notification--active-orders",e.kCellTradesMessageBox="cell-w-positions__trading-notification--trades",e}();e.CssConstants=t}(Infront||(Infront={})),function(e){e.TabOptions=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1),this.id=e,this.label=t,this.selected=n};var t=function(){};e.TabbedContainerOptions=t;var n=function(){function n(i,r){var a=new t;a.tabs=[],a.useContainers=!0,this.options=InfrontUtil.mergeRecursive(a,r),this.element=i,this.enabled=new e.Observable,this.enabled.set(!0),this.tabs=new e.ObservableArray,this.tabs.replaceWith(this.options.tabs),this.options.useContainers&&this.tabs.foreach(function(e){e[n.kContainer]=document.createElement("div"),InfrontUtil.addClassName(e[n.kContainer],"cell-tabs__content"),InfrontUtil.addClassName(e[n.kContainer],n.kHiddenClassname)}),this.selectedId=new e.Observable;for(var s=0;s<this.options.tabs.length;s++)if(this.options.tabs[s].selected){this.setSelectedId(this.options.tabs[s].id);break}this.selectedId.isNull()&&0<this.options.tabs.length&&this.setSelectedId(this.options.tabs[0].id),this.buildUI()}return n.prototype.buildUI=function(){var t=this,i=e.WidgetDOMFactory.create_CTabs_DOM(this.element,this.tabs,this.selectedId,function(e){t.enabled.get()&&t.setSelectedId(e)});this.options.useContainers&&this.tabs.foreach(function(e){i.appendChild(e[n.kContainer])})},n.prototype.setSelectedId=function(e){this.selectedId.set(e),this.options.onSelect&&this.options.onSelect(e),this.options.useContainers&&this.tabs.foreach(function(t){t.id==e?InfrontUtil.removeClassName(t[n.kContainer],n.kHiddenClassname):InfrontUtil.addClassName(t[n.kContainer],n.kHiddenClassname)})},n.prototype.getContainer=function(e){if(!this.options.useContainers)return null;var t=this.tabs.find(function(t){return t.id==e});return t?t[n.kContainer]:null},n.prototype.setEnabled=function(e){this.enabled.set(e)},n.prototype.destroy=function(){e.WidgetDOMFactory.unbindAll(this.element),InfrontUtil.removeAllChildNodes(this.element)},n.kContainer="_container",n.kHiddenClassname="cell-display-none",n}();e.TabbedContainer=n;var i=function(){};e.SimpleSearchBoxOptions=i;var r=function(e,t,n,i,r){this.opts={hide:"hide"},t.setAttribute("for",i),t.innerHTML=r,n===this.opts.hide&&(t.style.cssText="opacity:0; position: absolute; right:-999;"),e.setAttribute("id",i),t.setAttribute("aria-label",r),e.setAttribute("autocomplete","off"),e.insertAdjacentElement("beforebegin",t)};e.SetLabel=r;var a=function(){function t(e,t,n){this.currentSearchId=0,this.lastReturnedSearchId=0,this.itemHasBeenSelected=!1,this.options=InfrontUtil.mergeRecursive(this.createDefaults(),n),this.element=e,this.init()}return t.prototype.createDefaults=function(){var e=new i;return e.searchThreshold=3,e.maxResults=5,e.placeholder="",e.showAfterSelect=o.kShowEmpty,e.autoselectAfterTab=!1,e.enableMultiSelect=!1,e.preselectedElements=[],e},t.prototype.init=function(){var t=this;this.textObserver=new e.TextInputBinding,this.textObserver.observe(function(e){return t.searchTextUpdated(e)}),this.textObserver.observeSpecialKeys([e.TextInputBinding.kKeycodeDownArrow,e.TextInputBinding.kKeycodeUpArrow,e.TextInputBinding.kKeycodeEscape,e.TextInputBinding.kKeycodeEnter,e.TextInputBinding.kKeycodeTab,e.TextInputBinding.kKeycodeBackspace],function(e){return t.keyPressed(e)}),this.textObserver.setPlaceholder(this.options.placeholder),this.searchResults=new e.ObservableArray,this.showResults=new e.Observable,this.showResults.set(!1),this.selectedResult=new e.Observable,this.selectedResult.set(-1),this.selectLastElement=new e.Observable,this.selectLastElement.set(!1),this.buildUI(),this.options.preselectedElements&&this.options.getSelectedItemStr&&this.searchResultSelected(this.options.preselectedElements)},t.prototype.buildUI=function(){var t=this,n=e.WidgetDOMFactory.create_CSearch_DOM(this.element,this.textObserver,this.searchResults,this.options.fields,this.selectedResult,this.showResults,this.options.enableMultiSelect,this.currentElements,this.selectLastElement,function(e){return t.searchResultSelected(e)},function(e){return t.removeElement(e)},function(e){return t.textObserver.requestFocus()}),i=window.getComputedStyle(this.element);this.absolutePosWrapper=document.createElement("div"),this.absolutePosWrapper.style.position="fixed"==i.position?"fixed":"absolute",this.absolutePosWrapper.className="cell-super-absolute",this.absolutePosWrapper.appendChild(n.dropdownContainer),document.body.appendChild(this.absolutePosWrapper);var r=e.BindingFactory.createInlineBinding(function(e){if(e){var n=t.element.getBoundingClientRect(),r=document.body.getBoundingClientRect(),a="fixed"==i.position?0:r.top,s="fixed"==i.position?0:r.left;t.absolutePosWrapper.style.top=n.bottom-a+"px",t.absolutePosWrapper.style.left=n.left-s+"px",t.perfectScrollbar&&t.perfectScrollbar.update()}});if(this.showResults.observe(r),!this.options.enableMultiSelect&&0<this.options.preselectedElements.length&&InfrontUtil.addClassName(this.textObserver.getElement(),e.CssConstants.kInputConfirmed),this.options.dropdownUpdatedCallback){var a=e.BindingFactory.createInlineBinding(function(){return t.options.dropdownUpdatedCallback(n.dropdownContainer)});this.searchResults.lengthObservable.observe(a)}e.PerfectScrollbar&&(this.perfectScrollbar=new e.PerfectScrollbar(n,{suppressScrollX:!0}))},t.prototype.searchTextUpdated=function(e){var t=[];this.noSearchResultSelected(),e.length>=this.options.searchThreshold?(this.options.processSearch&&(t=this.options.processSearch(e)),0<t.length?(this.searchResults.replaceWith(t),this.selectedResult.set(0),this.showResults.set(!0)):this.showResults.set(!1)):this.showResults.set(!1),this.selectedResult.set(-1),this.selectLastElement.set(!1)},t.prototype.keyPressed=function(t){switch(t){case e.TextInputBinding.kKeycodeUpArrow:this.selectedResult.set(this.selectedResult.get()-1),this.selectedResult.get()<0&&this.selectedResult.set(this.searchResults.length()-1);break;case e.TextInputBinding.kKeycodeDownArrow:this.selectedResult.set(this.selectedResult.get()+1),this.selectedResult.get()>=this.searchResults.length()&&this.selectedResult.set(0);break;case e.TextInputBinding.kKeycodeTab:this.currentSearchId,this.lastReturnedSearchId,this.selectedResult.set(this.selectedResult.get()+1),this.selectedResult.get()>=this.searchResults.length()&&this.selectedResult.set(0);break;case e.TextInputBinding.kKeycodeEnter:0<this.searchResults.length()&&0<=this.selectedResult.get()?this.searchResultSelected(this.searchResults.item(this.selectedResult.get())):0==this.searchResults.length()&&this.options.emptyResultSelected&&this.options.emptyResultSelected(this.textObserver.get());break;case e.TextInputBinding.kKeycodeEscape:this.textObserver.set("");break;case e.TextInputBinding.kKeycodeBackspace:this.options.enableMultiSelect&&0==this.textObserver.get().length&&0<this.currentElements.length()&&(this.selectLastElement.get()?(this.removeElement(this.currentElements.lastItem()),this.selectLastElement.set(!1)):this.selectLastElement.set(!0))}},t.prototype.getShowAfterSelect=function(e){return this.options.getSelectedItemStr?this.options.getSelectedItemStr(e):""},t.prototype.searchResultSelected=function(t){this.textObserver.set(this.getShowAfterSelect(t),!1),this.showResults.set(!1),t[e.MWSConstants.type]==this.options.searchItemType&&(InfrontUtil.addClassName(this.textObserver.getElement(),e.CssConstants.kInputConfirmed),this.itemHasBeenSelected=!0,this.options.itemSelected&&this.options.itemSelected(t),this.options.enableMultiSelect&&(this.currentElements.push(t[e.MWSConstants.instrument]),this.options.itemAdded&&this.options.itemAdded(t[e.MWSConstants.instrument])))},t.prototype.noSearchResultSelected=function(){InfrontUtil.removeClassName(this.textObserver.getElement(),e.CssConstants.kInputConfirmed),this.options.itemSelected&&this.itemHasBeenSelected&&this.options.itemSelected(null),this.itemHasBeenSelected=!1},t.prototype.removeElement=function(e){this.currentElements.remove(e),this.options.itemRemoved&&this.options.itemRemoved(e)},t.prototype.focus=function(){this.textObserver.requestFocus()},t.prototype.clear=function(){this.textObserver.set(""),this.noSearchResultSelected()},t.prototype.setText=function(e,t){void 0===t&&(t=!0),this.textObserver.set(e,t)},t.prototype.setEnabled=function(e){this.textObserver.setEnabled(e)},t.prototype.modify=function(e){this.destroy(),InfrontUtil.mergeRecursive(this.options,e),this.init()},t.prototype.destroy=function(){e.WidgetDOMFactory.unbindAll(this.element),InfrontUtil.removeAllChildNodes(this.element),this.absolutePosWrapper.parentElement.removeChild(this.absolutePosWrapper)},t.kShowEmpty="EMPTY",t}();e.SimpleSearchBox=a;var s=function(){this.popupOffset=0,this.disableSearchOnEnter=!1,this.rightAlignDropDown=!1,this.hiddenLabel=!1};e.SearchBoxOptions=s;var o=function(){function t(n,i,r){var a=this;this.currentSearchId=0,this.lastReturnedSearchId=0,this.tabbedOutBeforeResult=!1,this.instrumentHasBeenSelected=!1,this.outsideClickCheckKeyboard=function(t){(t.which||t.keyCode)==e.TextInputBinding.kKeycodeEscape&&a.outsideClickCheck(t)},this.outsideClickCheck=function(n){n.target==a.element||a.element.contains(n.target)||(a.options.showAfterSelect==t.kShowEmpty&&a.textObserver.set("",!1),a.showResults.set(!1),n&&n.keyCode==e.TextInputBinding.kKeycodeEscape&&a.textObserver.requestFocus())};var s=this.createDefaults();this.options=InfrontUtil.mergeRecursive(s,r),this.infront=i,this.element=n,this.init()}return t.prototype.init=function(){var t=this;this.textObserver=new e.TextInputBinding,this.textObserver.observe(function(e){return t.searchTextUpdated(e)}),this.textObserver.observeSpecialKeys([e.TextInputBinding.kKeycodeDownArrow,e.TextInputBinding.kKeycodeUpArrow,e.TextInputBinding.kKeycodeEscape,e.TextInputBinding.kKeycodeEnter,e.TextInputBinding.kKeycodeTab,e.TextInputBinding.kKeycodeBackspace],function(e){return t.keyPressed(e)}),this.searchResults=new e.ObservableArray,this.showResults=new e.Observable,this.showResults.set(!1),this.selectedResult=new e.Observable,this.selectedResult.set(-1),this.instrumentTypeClassMap={},this.instrumentTypeClassMap[InfrontConstants.InstrumentType.STOCK]=e.CssConstants.kSearchResultEquity,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.INDEX]=e.CssConstants.kSearchResultIndex,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.FOREX]=e.CssConstants.kSearchResultForex,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.FUND]=e.CssConstants.kSearchResultFund,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.FUTURES]=e.CssConstants.kSearchResultFuture,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.BOND]=e.CssConstants.kSearchResultBond,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.OPTION]=e.CssConstants.kSearchResultOption,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.US_OPTION]=e.CssConstants.kSearchResultOption,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.EURO_OPTION]=e.CssConstants.kSearchResultOption,this.instrumentTypeClassMap[InfrontConstants.InstrumentType.CERTIFICATE]=e.CssConstants.kSearchResultCertificate,this.instrumentItemTypeClassMap={},this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.STOCK]="type-stock",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.INDEX]="type-index",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.FOREX]="type-forex",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.FUND]="type-fund",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.FUTURES]="type-futures",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.BOND]="type-bond",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.OPTION]="type-option",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.US_OPTION]="type-option",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.EURO_OPTION]="type-option",this.instrumentItemTypeClassMap[InfrontConstants.InstrumentType.CERTIFICATE]="type-certificate",this.selectLastElement=new e.Observable,this.selectLastElement.set(!1),this.options.enableMultiSelect?(this.currentElements=new e.ObservableArray,this.options.preselectedInstruments&&this.currentElements.replaceWith(this.options.preselectedInstruments)):(InfrontUtil.isArray(this.options.preselectedInstruments)||(this.options.preselectedInstruments=[this.options.preselectedInstruments]),0<this.options.preselectedInstruments.length&&(this.textObserver.set(this.getShowAfterSelect({type:InfrontConstants.SearchItemType.INSTRUMENT,instrument:this.options.preselectedInstruments[0]}),!1),this.options.instrumentInfoCallback&&this.options.instrumentInfoCallback(!0),this.instrumentHasBeenSelected=!0)),this.targetManager=new InfrontUtil.LinkTargetManager,this.buildUI()},t.prototype.createDefaults=function(){var e=new s;return e.searchThreshold=3,e.maxResults=5,e.placeholder="",e.showAfterSelect=t.kShowEmpty,e.fields=["full_name","ticker"],e.autoselectAfterTab=!1,e.searchTickersOnly=!1,e.enableMultiSelect=!1,e.preselectedInstruments=[],e},t.prototype.buildUI=function(){var t=this,n=function(e){return t.removeElement(e)},i=function(e){return t.textObserver.requestFocus()};if("function"==typeof this.options.searchResultCallback){e.WidgetDOMFactory.create_CSearchInputOnly_DOM(this.element,this.textObserver,this.options.enableMultiSelect,this.currentElements,this.selectLastElement,n,i);var a={};a.reInit=a.itemAdded=a.itemRemoved=a.itemMoved=function(e,n,i){t.options.searchResultCallback(t.searchResults.get())},this.searchResults.observe(a);var s=e.BindingFactory.createInlineBinding(function(e){e||t.options.searchResultCallback([])});this.showResults.observe(s)}else{var o=e.WidgetDOMFactory.create_CSearch_DOM(this.element,this.textObserver,this.searchResults,this.options.fields,this.selectedResult,this.showResults,this.options.enableMultiSelect,this.currentElements,this.selectLastElement,function(e){return t.searchResultSelected(e)},n,i);this.searchField=o.searchfield,this.dropDownEl=o.dropdownContainer;var l=document.createElement("label");l.innerHTML=this.options.placeholder,this.searchField.setAttribute("aria-label",this.options.placeholder),this.searchField.setAttribute("id",InfrontUtil.makeUUID()),this.searchField.setAttribute("aria-live","polite"),null!=this.options.role&&this.searchField.setAttribute("role",this.options.role),this.searchField.placeholder=this.options.placeholder,new r(this.searchField,l,"hide",this.searchField.id,this.options.placeholder);var c=window.getComputedStyle(o.dropdownContainer);if(this.absolutePosWrapper=document.createElement("div"),this.absolutePosWrapper.style.position="fixed"==c.position?"fixed":"absolute",this.absolutePosWrapper.className="cell-super-absolute",this.absolutePosWrapper.appendChild(o.dropdownContainer),document.body.appendChild(this.absolutePosWrapper),s=e.BindingFactory.createInlineBinding(function(e){if(e){t.searchField.setAttribute("aria-label","Result box open, please press arrow-key down to explore serach results.");var n=t.textObserver.getElement().getBoundingClientRect(),i=document.body.getBoundingClientRect(),r="fixed"==c.position?0:i.top,a="fixed"==c.position?0:i.left;if(t.absolutePosWrapper.style.top=n.bottom-r+"px",t.options.rightAlignDropDown){var s=t.textObserver.getElement().getBoundingClientRect().width,l=o.dropdownContainer.getBoundingClientRect().width;t.absolutePosWrapper.style.left=n.left-a-(l-s)-t.options.popupOffset+"px"}else t.absolutePosWrapper.style.left=n.left+t.options.popupOffset-a+"px";InfrontUtil.addEventListener(document,"keyup",t.outsideClickCheckKeyboard),InfrontUtil.addEventListener(document,"click",t.outsideClickCheck),t.perfectScrollbar&&t.perfectScrollbar.update()}else t.searchField.removeAttribute("aria-label")}),this.showResults.observe(s),!this.options.enableMultiSelect&&0<this.options.preselectedInstruments.length&&InfrontUtil.addClassName(this.textObserver.getElement(),e.CssConstants.kInputConfirmed),this.options.dropdownUpdatedCallback){var d=e.BindingFactory.createInlineBinding(function(){return t.options.dropdownUpdatedCallback(o.dropdownContainer)});this.searchResults.lengthObservable.observe(d)}e.PerfectScrollbar&&(this.perfectScrollbar=new e.PerfectScrollbar(o.dropdownContainer,{suppressScrollX:!0}))}},t.prototype.searchTextUpdated=function(t){var n=this;if(this.textObserver.requestFocus(),this.noSearchResultSelected(),t.length>=this.options.searchThreshold){var i=++this.currentSearchId,r=new e.SearchOptions;r.maxResults=this.options.maxResults,r.freeTextTagMustMatch=this.options.matchOnlyOnTags,this.options.itemTypes&&(r.itemTypes=this.options.itemTypes),this.options.instrumentTypes&&(r.instrumentTypes=this.options.instrumentTypes),this.options.feeds&&(r.feeds=this.options.feeds),this.options.searchTickersOnly&&(r.ticker=!0),r.onError=function(e,t){n.lastReturnedSearchId=i,IDS.log("SearchBox: ",e+" - "+t)},r.onData=function(e){(n.lastReturnedSearchId=i)==n.currentSearchId&&n.processSearchResult(e)},this.infront.search(t,r)}else this.showResults.set(!1);this.selectedResult.set(-1),this.selectLastElement.set(!1)},t.prototype.processSearchResult=function(n){for(var i,r=this,a=n,s=[],o=[],l=0,c=0;c<a.length;c++)if(a[c][e.MWSConstants.instrument]){var d=a[c][e.MWSConstants.instrument][e.MWSConstants.feed];-1==o.indexOf(d)&&o.push(d);var u=(h=a[c])[e.MWSConstants.instrument][e.MWSConstants.instrument_type];4504!=d&&4502!=d||(u=InfrontConstants.InstrumentType.FUND),h[t.kClassTypeProperty]=this.instrumentTypeClassMap.hasOwnProperty(u)?this.instrumentTypeClassMap[u]:e.CssConstants.kSearchResultOther,h[t.kItemClassTypeProperty]=this.instrumentItemTypeClassMap.hasOwnProperty(u)?"cell-search-result__item--"+this.instrumentItemTypeClassMap[u]:"cell-search-result__item--type-other",h[e.MWSConstants.instrument][e.MWSConstants.ticker].toUpperCase()==this.textObserver.get().toUpperCase()&&(l++,i=h),h[e.MWSConstants.instrument][e.MWSConstants.full_name]||(h[e.MWSConstants.instrument][e.MWSConstants.full_name]=h[e.MWSConstants.instrument][e.MWSConstants.ticker]),this.options.filter&&!this.options.filter(h)||s.push(h)}else if(a[c][e.MWSConstants.chain]){var h;d=a[c][e.MWSConstants.chain][e.MWSConstants.feed],-1==o.indexOf(d)&&o.push(d),(h=a[c])[e.MWSConstants.type]==t.kTypeChain&&(h[t.kClassTypeProperty]=e.CssConstants.kSearchResultChain),this.options.filter&&!this.options.filter(h)||s.push(h)}return this.infront.getFeedHandler().getFeeds(o,function(t){for(var n=0;n<s.length;n++)for(var a=0;a<t.length;a++)t[a].hasOwnProperty(e.MWSConstants.iso_country)&&(s[n][e.MWSConstants.instrument]?s[n][e.MWSConstants.instrument][e.MWSConstants.feed]==t[a][e.MWSConstants.feed]&&(s[n][e.MWSConstants.country]="cell-flag  cell-flag-"+t[a][e.MWSConstants.iso_country].toLowerCase()):s[n][e.MWSConstants.chain]&&s[n][e.MWSConstants.chain][e.MWSConstants.feed]==t[a][e.MWSConstants.feed]&&(s[n][e.MWSConstants.country]="cell-flag  cell-flag-"+t[a][e.MWSConstants.iso_country].toLowerCase()));r.options.customSortResult&&(s=r.options.customSortResult(s)),r.options.autoselectAfterTab&&r.tabbedOutBeforeResult&&1==l?r.searchResultSelected(i):(r.searchResults.replaceWith(s),r.selectedResult.set(0),r.showResults.set(!0),r.perfectScrollbar&&(r.perfectScrollbar.element.scrollTop=0,r.perfectScrollbar.update())),Array.prototype.slice.call(r.dropDownEl.childNodes).forEach(function(e,t){InfrontUtil.isMobileDevice()?e.addEventListener("touchend",function(e){return n=t,e.preventDefault(),r.searchResultSelected(r.searchResults.data[n]),void r.showResults.set(!1);var n}):e.addEventListener("click",function(e){return r.searchResultSelected(r.searchResults.data[t])})})}),!0},t.prototype.keyPressed=function(t){switch(t){case e.TextInputBinding.kKeycodeUpArrow:this.selectedResult.set(this.selectedResult.get()-1),this.selectedResult.get()<0&&this.selectedResult.set(this.searchResults.length()-1);break;case e.TextInputBinding.kKeycodeDownArrow:this.selectedResult.set(this.selectedResult.get()+1),this.selectedResult.get()>=this.searchResults.length()&&this.selectedResult.set(0);break;case e.TextInputBinding.kKeycodeTab:this.currentSearchId>this.lastReturnedSearchId&&(this.tabbedOutBeforeResult=!0),this.searchResults.length()&&0<=this.selectedResult.get()&&this.searchResultSelected(this.searchResults.item(this.selectedResult.get()));break;case e.TextInputBinding.kKeycodeEnter:if(this.options.disableSearchOnEnter)break;0<this.searchResults.length()&&0<=this.selectedResult.get()?this.searchResultSelected(this.searchResults.item(this.selectedResult.get())):0==this.searchResults.length()&&this.options.emptyResultSelected&&this.options.emptyResultSelected(this.textObserver.get());break;case e.TextInputBinding.kKeycodeEscape:this.textObserver.set("");break;case e.TextInputBinding.kKeycodeBackspace:this.options.enableMultiSelect&&0==this.textObserver.get().length&&0<this.currentElements.length()&&(this.selectLastElement.get()?(this.removeElement(this.currentElements.lastItem()),this.selectLastElement.set(!1)):this.selectLastElement.set(!0))}},t.prototype.getShowAfterSelect=function(n){var i;return n[e.MWSConstants.type]==InfrontConstants.SearchItemType.CHAIN||this.options.showAfterSelect==t.kShowEmpty?i="":this.options.showAfterSelect==t.kShowTicker?i=n[e.MWSConstants.instrument][e.MWSConstants.ticker]:this.options.showAfterSelect==t.kShowName?i=n[e.MWSConstants.instrument][e.MWSConstants.full_name]:this.options.showAfterSelect==t.kShowTickerAndFeedCode?(i=n[e.MWSConstants.instrument][e.MWSConstants.ticker],i+=" ["+n[e.MWSConstants.instrument].feed_code+"]"):InfrontUtil.isFunction(this.options.showAfterSelect)&&(i=this.options.showAfterSelect(n[e.MWSConstants.instrument])),i},t.prototype.searchResultSelected=function(t){if(this.textObserver.set(this.getShowAfterSelect(t),!1),this.showResults.set(!1),this.textObserver.requestFocus(),t[e.MWSConstants.type]==InfrontConstants.SearchItemType.INSTRUMENT){if(InfrontUtil.addClassName(this.textObserver.getElement(),e.CssConstants.kInputConfirmed),this.instrumentHasBeenSelected=!0,this.options.instrumentInfoCallback&&this.options.instrumentInfoCallback(!0),t[e.MWSConstants.type]==InfrontConstants.SearchItemType.INSTRUMENT&&this.options.instrumentSelected){var n=InfrontUtil.mergeRecursive(new e.Instrument(t[e.MWSConstants.instrument][e.MWSConstants.feed],t[e.MWSConstants.instrument][e.MWSConstants.ticker]),t[e.MWSConstants.instrument]);this.options.instrumentSelected(n)}this.options.instrumentAdded&&this.options.instrumentAdded(t[e.MWSConstants.instrument]),this.options.enableMultiSelect&&(this.currentElements.push(t[e.MWSConstants.instrument]),this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,t[e.MWSConstants.instrument]))}else t[e.MWSConstants.type]==InfrontConstants.SearchItemType.CHAIN&&this.options.chainSelected&&this.options.chainSelected(t[e.MWSConstants.chain])},t.prototype.noSearchResultSelected=function(){InfrontUtil.removeClassName(this.textObserver.getElement(),e.CssConstants.kInputConfirmed),this.options.instrumentSelected&&this.instrumentHasBeenSelected&&this.options.instrumentSelected(null),this.options.instrumentInfoCallback&&this.options.instrumentInfoCallback(!1),this.instrumentHasBeenSelected=!1},t.prototype.removeElement=function(e){this.currentElements.remove(e),this.options.instrumentRemoved&&this.options.instrumentRemoved(e),this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.removeInfrontInstrument,e)},t.prototype.focus=function(){this.textObserver.requestFocus()},t.prototype.clear=function(e){void 0===e&&(e=!0),this.textObserver.set("",e),this.noSearchResultSelected()},t.prototype.setText=function(e,t){void 0===t&&(t=!0),this.textObserver.set(e,t)},t.prototype.setEnabled=function(e){this.textObserver.setEnabled(e)},t.prototype.modify=function(e){this.destroy(),this.options=InfrontUtil.mergeRecursive(this.createDefaults(),e),this.init()},t.prototype.destroy=function(){InfrontUtil.removeEventListener(document,"keyup",this.outsideClickCheckKeyboard),InfrontUtil.removeEventListener(document,"click",this.outsideClickCheck),e.WidgetDOMFactory.unbindAll(this.element),InfrontUtil.removeAllChildNodes(this.element),this.absolutePosWrapper.parentElement.removeChild(this.absolutePosWrapper)},t.prototype.link=function(e){InterLibraryLink.targetSupportsType(e,InterLibraryLink.DataType.infrontInstrument)&&this.targetManager.addTarget(e)},t.prototype.unlink=function(e){this.targetManager.removeTarget(e)},t.kShowTicker="TICKER",t.kShowName="FULL_NAME",t.kShowEmpty="EMPTY",t.kShowTickerAndFeedCode="NAME+FEEDCODE",t.kTypeChain="CHAIN",t.kTypeForex="FOREX",t.kTypeInstrument="INSTRUMENT",t.kClassTypeProperty="_typeclass",t.kItemClassTypeProperty="_itemTypeClass",t}();e.SearchBox=o;var l=function(){this.title="",this.subNodeName="",this.multiSelect=!1,this.sortAlphabetically=!0,this.showToggleAll=!1,this.closeOnClick=!1,this.className="",this.dropDownClassName="",this.itemLabelPropertyKeys=["defTitle"],this.itemPath="",this.selectionUpdatesTitle=!1,this.visible=!0};e.DropDownOptions=l;var c=function(){function t(n,i,r,a){void 0===a&&(a=[]);var s=this;if(this.hasSubMenu=!1,this.subMenu=[],this.subItems=0,this.lastToggle=!1,this.selected=new e.Observable(!1),this.isSelectedBinding=e.BindingFactory.createInlineBinding(function(e){var t=r.indexOf(s);if(1==e&&t<0){if(r.push(s),a)for(var n=0,i=a;n<i.length;n++)(c=i[n]).set(c.get()+1)}else if(!e&&0<=t&&(r.splice(t,1),a))for(var o=0,l=a;o<l.length;o++){var c;(c=l[o]).set(c.get()-1)}}),this.selected.observe(this.isSelectedBinding,e.InitialUpdate.Synchronous),i.itemPath&&n.hasOwnProperty(i.itemPath)?this.item=n[i.itemPath]:this.item=n,this.title=this.getTitleFromItem(this.item,i.itemLabelPropertyKeys),InfrontUtil.isObject(this.item)&&""!=i.subNodeName&&this.item.hasOwnProperty(i.subNodeName)&&this.item[i.subNodeName]){this.subItemsSelected=new e.Observable,this.subItemsSelected.set(0),this.subItemsSelectedText=new e.ObservableBinding(function(e){return e+"/"+s.subItems}),this.hasSubMenu=!0;for(var o=this.item[i.subNodeName],l=a?a.concat(this.subItemsSelected):[this.subItemsSelected],c=0,d=o;c<d.length;c++){var u=new t(d[c],i,r,l);this.subMenu.push(u),this.subItems+=u.subItems||1}i.sortAlphabetically&&(i.onSortItems?this.subMenu.sort(i.onSortItems):this.subMenu.sort(this.sortAlphabetically)),this.subItemsSelected.observe(this.subItemsSelectedText)}}return t.prototype.sortAlphabetically=function(t,n){return e.CompareFunctions.compareStringsDesc(t.title,n.title)},t.prototype.destroy=function(){for(var e=0,t=this.subMenu;e<t.length;e++)t[e].destroy();this.subItemsSelected&&this.selected.unbind(this.subItemsSelectedText),this.selected.unbind(this.isSelectedBinding)},t.prototype.getTitleFromItem=function(e,t){var n=InfrontUtil.isString(e)?e:"";if(InfrontUtil.isObject(e))for(var i=0,r=t;i<r.length;i++){var a=r[i];if(e.hasOwnProperty(a)&&""!=(n=this.getTitleFromItem(this.item[a],t)))break}return n},t.prototype.checkSelected=function(e){if(this.hasSubMenu)for(var t=0,n=this.subMenu;t<n.length;t++)n[t].checkSelected(e);else this.selected.set(0<=e.indexOf(this.item))},t.prototype.toggleAllSubItems=function(){if(this.hasSubMenu){var e=0<this.subItemsSelected.get();this.setAllSubItems(!e)}},t.prototype.setAllSubItems=function(e){if(this.lastToggle=e,this.hasSubMenu)for(var t=0,n=this.subMenu;t<n.length;t++)n[t].setAllSubItems(this.lastToggle);else this.selected.set(this.lastToggle)},t.prototype.hasSubItemsWithSubMenus=function(){if(this.hasSubMenu)for(var e=0,t=this.subMenu;e<t.length;e++)if(t[e].hasSubMenu)return!0;return!1},t}(),d=function(){function t(t,n,i,r){var a=this;this.upperPaneVisible=!1,this.lowerPaneVisible=!1,this.windowClick=function(){1==a.showDropDownMenu.get()&&(a.close(),a.isActive.set(!1))},this.keyboardListener=function(e){27==e.keyCode&&a.windowClick()},InfrontUtil.addEventListener(document.body,"click",this.windowClick),InfrontUtil.addEventListener(document.body,"keyup",this.keyboardListener),this.options=InfrontUtil.mergeRecursive(new l,n,!1),this.language=i,this.element=t,this.parent=r,this.stack=[],this.id=n.id,this.showDropDownMenu=new e.Observable,this.showDropDownMenu.set(!1),this.inSubMenu=new e.Observable,this.inSubMenu.set(!1),this.isActive=new e.Observable,this.isActive.set(!1),this.dropDownTitle=new e.Observable,this.list=new e.ObservableArray,this.title=new e.Observable(this.options.title?this.options.title:""),this.dropDownTitle.set(this.title.get()),this.options.list&&0<this.options.list.length&&this.buildDropdownFromList(this.options.list,this.options.preSelectedItems),this.buildUI()}return t.prototype.buildDropdownFromList=function(e,t){this.options.subNodeName=this.options.subNodeName||"subnode";var n={};this.selectedDropdownItems=[],n[this.options.subNodeName]=e,this.options.itemLabelPropertyKeys&&0<this.options.itemLabelPropertyKeys.length&&(n[this.options.itemLabelPropertyKeys[0]]=this.title.get()),this.rootItem=new c(n,this.options,this.selectedDropdownItems,null),this.isMultiLevel=this.rootItem.hasSubItemsWithSubMenus(),t&&this.rootItem.checkSelected(t),this.resetMenuNavigation(),this.dropDownTitle.set(this.getDropdownTitle(this.selectedDropdownItems.length||0))},t.prototype.buildUI=function(){var t=this;this.backButtonLabel=this.language.get("dropdowns","backButtonLabel"),this.toggleAllButtonLabel=this.language.get("dropdowns","toggleAllButtonLabel");var n=e.WidgetDOMFactory.create_CDropDown_DOM(this.element,this.title,this.options.showToggleAll,this.list,this.showDropDownMenu,this.dropDownTitle,this.inSubMenu,function(e){return t.dropDownClicked()},function(e){return t.itemClicked(e)},function(e){return t.setActiveSubMenu(e)},function(e){return t.backItemClicked()},function(){return t.onOkClick()},function(){return t.onToggleAllClick()},this.options.multiSelect,this.isMultiLevel,this.backButtonLabel,this.toggleAllButtonLabel,this.language);this.dropdownContainer=n.dropdownContainer,this.dropDownElements=n.dropdownElements,this.upperPaneElement=n.upperPaneContainer,this.lowerPaneElement=n.lowerPaneContainer,this.dropdownLabel=n.dropDownLabel,this.showUpperPane(!1),this.showLowerPane(!1),this.closeBtn=n.closeBtn;var i=window.getComputedStyle(this.dropdownContainer);this.absolutePosWrapper=document.createElement("div"),this.options.overridePosition?this.absolutePosWrapper.style.position=this.options.overridePosition:this.absolutePosWrapper.style.position="fixed"==i.position?"fixed":"absolute",this.absolutePosWrapper.className="cell-super-absolute",this.element.className=this.element.className+" "+this.options.className,this.dropdownContainer.className=this.dropdownContainer.className+" "+this.options.dropDownClassName,this.absolutePosWrapper.appendChild(this.dropdownContainer),document.body.appendChild(this.absolutePosWrapper);var r=e.BindingFactory.createInlineBinding(function(e){if(e){var n=window.scrollX,r=window.scrollY;t.closeBtn.focus(),window.scrollTo(n,r);var a=t.element.getBoundingClientRect(),s=document.body.getBoundingClientRect(),o="fixed"==i.position?0:s.top,l="fixed"==i.position?0:s.left;t.absolutePosWrapper.style.top=a.bottom-o+"px",t.absolutePosWrapper.style.right=s.width-a.right+l+"px",t.perfectScrollbar&&t.perfectScrollbar.update()}else t.absolutePosWrapper.style.top="",t.absolutePosWrapper.style.right=""});this.showDropDownMenu.observe(r);var a=e.BindingFactory.createInlineBinding(function(e){if(e){var n=window.scrollX,i=window.scrollY;t.closeBtn.focus(),window.scrollTo(n,i)}});this.inSubMenu.observe(a),e.PerfectScrollbar&&(this.perfectScrollbar=new e.PerfectScrollbar(this.dropDownElements),InfrontUtil.addEventListener(this.perfectScrollbar.element,"click",function(){return event.stopPropagation()})),this.showDropDownMenu.observe(r)},t.prototype.onOkClick=function(){this.showDropDownMenu.set(!this.showDropDownMenu.get())},t.prototype.onToggleAllClick=function(){this.stack[this.stack.length-1].toggleAllSubItems(),this.emitSelectedItems(),this.options.closeOnClick&&1==this.showDropDownMenu.get()&&this.showDropDownMenu.set(!this.showDropDownMenu.get()),this.dropDownTitle.set(this.getDropdownTitle(this.selectedDropdownItems.length))},t.prototype.getDropdownTitle=function(e){return this.options.title?this.options.title&&this.options.multiSelect?this.options.title+" ("+e+")":this.options.title:"("+e+")"},t.prototype.setActiveSubMenu=function(e){this.stack.push(e),this.list.replaceWith(e.subMenu),this.inSubMenu.set(1<this.stack.length),this.dropDownTitle.set(e.title)},t.prototype.display=function(e){this.findElement().style.display=1==e?"block":"none"},t.prototype.close=function(){this.showDropDownMenu.set(!1),1<this.stack.length&&this.resetMenuNavigation()},t.prototype.findElement=function(){for(var e=0;e<this.element.children.length;e++)if(this.element.childNodes[e].childNodes[0].innerHTML==this.title)return this.element.childNodes[e];return this.element},t.prototype.backItemClicked=function(){if(1<this.stack.length){this.stack.pop();var e=this.stack[this.stack.length-1];this.list.replaceWith(e.subMenu),this.dropDownTitle.set(e.title),this.closeBtn.focus()}else this.close(),this.isActive.set(!1);this.inSubMenu.set(1<this.stack.length)},t.prototype.resetMenuNavigation=function(){this.stack=[],this.setActiveSubMenu(this.rootItem)},t.prototype.dropDownClicked=function(){if(this.isActive.set(!0),this.dropdownLabel.blur(),this.parent&&this.parent.dropDowns){this.dropdownLabel.blur();for(var e=0;e<this.parent.dropDowns.length();e++)this.parent.dropDowns.item(e)==this?this.showDropDownMenu.set(!this.showDropDownMenu.get()):this.parent.dropDowns.item(e).showDropDownMenu.set(!1)}else this.showDropDownMenu.get()?this.close():this.showDropDownMenu.set(!0)},t.prototype.emitSelectedItems=function(){this.options.onSelectedItemsChanged&&this.options.onSelectedItemsChanged(this.getSelectedItems())},t.prototype.itemClicked=function(e){var t=1!=e.selected.get();if(this.options.multiSelect)e.selected.set(t),this.emitSelectedItems();else if(t&&0==this.selectedDropdownItems.length||this.selectedDropdownItems[0]!=e){for(var n=0,i=this.selectedDropdownItems;n<i.length;n++)i[n].selected.set(!1);e.selected.set(!0),this.dropDownTitle.set(this.dropDownTitle.get()+"("+this.selectedDropdownItems.length+")"),this.emitSelectedItems()}this.options.onItemClicked&&this.options.onItemClicked(e.item),this.options.selectionUpdatesTitle&&this.title.set(e.title),this.options.closeOnClick&&1==this.showDropDownMenu.get()&&this.showDropDownMenu.set(!this.showDropDownMenu.get()),this.dropDownTitle.set(this.getDropdownTitle(this.selectedDropdownItems.length))},t.prototype.setList=function(e,t){t||(t=this.options.preSelectedItems),this.rootItem&&this.rootItem.destroy(),this.buildDropdownFromList(e,t)},t.prototype.setSelectedItem=function(e){this.rootItem.checkSelected([e])},t.prototype.setSelectedItems=function(e){this.rootItem.checkSelected(e)},t.prototype.getSelectedItems=function(){return this.selectedDropdownItems.map(function(e){return e.item})},t.prototype.updateScrollAreaSize=function(){var e="cell-custom-dropdown-selector-scroller";this.upperPaneVisible&&this.lowerPaneVisible?e="cell-custom-dropdown-selector-scroller__upper__lower":this.upperPaneVisible?e="cell-custom-dropdown-selector-scroller__upper":this.lowerPaneVisible&&(e="cell-custom-dropdown-selector-scroller__lower"),InfrontUtil.addClassName(this.dropDownElements,e)},t.prototype.showUpperPane=function(e){void 0===e&&(e=!0),this.upperPaneElement.className=+e?"cell-custom-dropdown-selector__item__upper-pane":"cell-custom-dropdown-selector__item__upper-pane cell-display-none",this.upperPaneVisible=e,this.updateScrollAreaSize()},t.prototype.showLowerPane=function(e){void 0===e&&(e=!0),this.lowerPaneElement.className=e?"cell-custom-dropdown-selector__item__lower-pane":"cell-custom-dropdown-selector__item__lower-pane cell-display-none",this.lowerPaneVisible=e,this.updateScrollAreaSize()},t.prototype.destroy=function(){InfrontUtil.removeEventListener(document.body,"click",this.windowClick),InfrontUtil.removeEventListener(document.body,"keyup",this.keyboardListener),this.rootItem&&this.rootItem.destroy(),e.WidgetDOMFactory.unbindAll(this.element),InfrontUtil.removeAllChildNodes(this.element),this.absolutePosWrapper.parentElement.removeChild(this.absolutePosWrapper)},t.kRootElementName="ddRoot",t}();e.DropDown=d;var u=function(e,t){e&&(this.value=e),t&&(this.label=t)};e.SliderItem=u;e.SliderOptions=function(){this.steps=5,this.initialPosition=1};var h=function(){function t(e,t,n){var i=this;this.position=-1,this.clickBackground=function(e){e.stopPropagation(),i.initialized||i.initializeEasing();var t=e.clientX-i.backgroundBarBounds.left;t<i.stepMarkerWidth-i.bulletWidth&&(t=i.stepMarkerWidth-i.bulletWidth),t>i.backgroundBarBounds.width-i.stepMarkerWidth-i.bulletWidth&&(t=i.backgroundBarBounds.width-i.stepMarkerWidth-i.bulletWidth),i.currentPosition=Math.floor((t+i.stepMarkerWidth+2*i.bulletWidth)/(i.backgroundBarBounds.width-2*i.stepMarkerWidth)/i.stepSize),i.domElements.sliderBullet.style.left=i.currentPosition*i.stepSize*(i.backgroundBarBounds.width-2*i.stepMarkerWidth)-i.bulletWidth+i.stepMarkerWidth+"px",i.domElements.sliderSelectedRange.style.width=i.currentPosition*i.stepSize*i.backgroundBarBounds.width+"px",i.updatePosition(i.currentPosition,!1)},this.clickBullet=function(e){e.stopPropagation(),i.initialized||i.initializeEasing(),i.mouseStartX=e.screenX,i.currentPosition=0,i.offsetX=e.screenX-i.domElements.sliderBullet.getBoundingClientRect().left,InfrontUtil.addEventListener(document,"mousemove",i.moveBullet),InfrontUtil.addEventListener(document,"mouseup",i.stopBullet)},this.moveBullet=function(e){var t=e.screenX-i.backgroundBarBounds.left-i.offsetX;t<i.stepMarkerWidth-i.bulletWidth&&(t=i.stepMarkerWidth-i.bulletWidth),t>i.backgroundBarBounds.width-i.stepMarkerWidth-i.bulletWidth&&(t=i.backgroundBarBounds.width-i.stepMarkerWidth-i.bulletWidth),i.currentPosition=Math.floor((t+i.stepMarkerWidth+2*i.bulletWidth)/(i.backgroundBarBounds.width-2*i.stepMarkerWidth)/i.stepSize),i.domElements.sliderBullet.style.left=i.currentPosition*i.stepSize*(i.backgroundBarBounds.width-2*i.stepMarkerWidth)-i.bulletWidth+i.stepMarkerWidth+"px",i.domElements.sliderSelectedRange.style.width=i.currentPosition*i.stepSize*i.backgroundBarBounds.width+"px",i.updatePosition(i.currentPosition,!1)},this.stopBullet=function(e){InfrontUtil.removeEventListener(document,"mousemove",i.moveBullet),InfrontUtil.removeEventListener(document,"mouseup",i.stopBullet),e.screenX!=i.mouseStartX&&i.updatePosition(i.currentPosition,!0)},this.element=e,this.options=t,this.parent=n,this.stepSize=1/(t.steps-1),this.buildUI()}return t.prototype.getSliderItems=function(e){for(var t=[],n=0;n<e;n++){var i="";this.options.getLabel&&(i=this.options.getLabel(n));var r=new u(n,i);t.push(r)}return t},t.prototype.buildUI=function(){var t=this.getSliderItems(this.options.steps);this.domElements=e.WidgetDOMFactory.create_CSlider_DOM(this.element,t),this.stepElement=this.domElements.sliderRangeContainer.childNodes[0].childNodes[0],this.stepMarkerWidth=this.stepElement.getBoundingClientRect().width/2,this.bulletWidth=this.domElements.sliderBullet.getBoundingClientRect().width/2,this.backgroundBarBounds=this.domElements.backgroundBar.getBoundingClientRect(),this.domElements.sliderBullet.onmousedown=this.clickBullet,this.domElements.sliderWrapper.onmousedown=this.clickBackground,null!=this.options.initialPosition&&(this.position=this.options.initialPosition,this.updatePosition(null,!0))},t.prototype.initializeEasing=function(){this.domElements.sliderBullet.style.transition="left ease-out 0.10s",this.domElements.sliderSelectedRange.style.transition="width ease-out 0.10s",this.initialized=!0},t.prototype.updatePosition=function(e,t){if(null!=e&&(this.options.onPositionChanged&&e!=this.position&&this.options.onPositionChanged(e),this.position=e),t){var n=this.domElements.backgroundBar.getBoundingClientRect(),i=this.domElements.sliderBullet.getBoundingClientRect().width;this.domElements.sliderBullet.style.left=this.position*this.stepSize*(n.width-2*this.stepMarkerWidth)-i/2+this.stepMarkerWidth+"px",this.domElements.sliderSelectedRange.style.width=this.position*this.stepSize*n.width+"px"}},t.prototype.destroy=function(){e.WidgetDOMFactory.unbindAll(this.element)},t}();e.Slider=h;e.PagerOptions=function(){};var p=function(){function t(t,n,i){this.options=InfrontUtil.deepCopy(i),this.element=t,this.languageHandler=n,this.currentPage=0,this.prevEnabled=new e.Observable,this.prevEnabled.set(!1),this.nextEnabled=new e.Observable,this.nextEnabled.set(this.currentPage<this.options.pages-1),this.visible=new e.Observable,this.visible.set(1<this.options.pages),this.buildUI()}return t.prototype.buildUI=function(){var t=this;e.WidgetDOMFactory.create_CPager_DOM(this.element,this.visible,this.prevEnabled,this.nextEnabled,function(e){return t.firstClicked()},function(e){return t.prevClicked()},function(e){return t.nextClicked()},this.languageHandler)},t.prototype.pageChanged=function(e){this.options.onPageChange&&this.options.onPageChange(this.currentPage,e),this.prevEnabled.set(0<this.currentPage),this.nextEnabled.set(this.currentPage<this.options.pages-1)},t.prototype.prevClicked=function(){this.prevEnabled.get()&&(this.currentPage--,this.pageChanged(this.currentPage+1))},t.prototype.nextClicked=function(){this.nextEnabled.get()&&(this.currentPage++,this.pageChanged(this.currentPage-1))},t.prototype.firstClicked=function(){if(this.prevEnabled.get()){var e=this.currentPage;this.currentPage=0,this.pageChanged(e)}},t.prototype.setPages=function(e){this.options.pages=e,this.currentPage>=e?this.setCurrentPage(e-1):(this.visible.set(1<this.options.pages),this.nextEnabled.set(this.currentPage<this.options.pages-1))},t.prototype.getCurrentPage=function(){return this.currentPage},t.prototype.setCurrentPage=function(e){if(0<=e&&e<this.options.pages&&e!=this.currentPage){var t=this.currentPage;this.currentPage=e,this.pageChanged(t)}},t.prototype.destroy=function(){e.WidgetDOMFactory.unbindAll(this.element)},t}();e.Pager=p;var m=function(){function t(t,n,i){var r=this;this.dropdownListener=function(e){e.stopPropagation()},this.windowClick=function(e){r.showCalendar.set(!1)},this.element=t,this.strings=n,this.showCalendar=new e.Observable,this.showCalendar.set(!1),this.disabled=new e.Observable,this.disabled.set(!1),this.fromDate=InfrontUtil.today(),this.toDate=InfrontUtil.today(),this.currentDate=InfrontUtil.today(),this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentMonthName=new e.Observable(""),this.currentYearName=new e.Observable(""),this.textFieldBinding=new e.TextInputBinding,this.textFieldBinding.setOnClick(function(e){r.calendarVisibility(e)}),this.textFieldBinding.setValidator(g),this.textFieldBinding.observe(function(e){return r.textUpdated(e)}),this.textFieldBinding.observeSpecialKeys([e.TextInputBinding.kKeycodeEnter,e.TextInputBinding.kKeycodeEscape],function(e){return r.showCalendar.set(!1)}),this.data=new e.Data,this.onClickListener=function(e){return r.dateClick(e)},this.dateChangeCallback=i,this.updateTextfield(),this.buildUI()}return t.prototype.buildUI=function(){var t=this;document.body.addEventListener("click",this.windowClick,!0),this.elements=e.WidgetDOMFactory.create_CDateSelector_DOM(this.element,this.disabled,this.showCalendar,this.textFieldBinding,this.currentMonthName,this.currentYearName,function(e){return t.nextMonthClick(e)},function(e){return t.prevMonthClick(e)},function(e){return t.nextYearClick(e)},function(e){return t.prevYearClick(e)}),this.calendarContainer=this.elements.calendar,InfrontUtil.addEventListener(this.elements.dropdownContainer,"click",this.dropdownListener),this.updateCalendar()},t.prototype.calendarVisibility=function(e){this.showCalendar.set(!this.showCalendar.get()),this.showCalendar.get()?this.textFieldBinding.requestFocus():this.textFieldBinding.requestBlur(),e.stopPropagation(),e.preventDefault()},t.prototype.createCalendar=function(e,n){this.clearAllData(this.calendarContainer);var i=new Date(n,e,1),r=(0==i.getDay()?7:i.getDay())-1,a=InfrontUtil.addDays(i,-1*r),s=7*Math.ceil((InfrontUtil.daysInMonth(e,n)+r)/7),o=document.createElement("table");o.className="cell-w-date-selector__table";var l=document.createElement("tr");l.className="cell-w-date-selector__table__row";for(var c=0;c<t.oneLetterDays.length;c++)(p=document.createElement("td")).className="cell-w-date-selector__table__row__th",p.innerHTML=t.oneLetterDays[c],l.appendChild(p);o.appendChild(l);var d,u=a;for(c=0;c<s;c++){1==u.getDay()&&(d=document.createElement("tr"),o.appendChild(d));var h,p=document.createElement("td"),m=[];m.push("cell-w-date-selector__table__row__td"),6!=u.getDay()&&0!=u.getDay()||m.push("cell-w-date-selector__table__row__td--weekend"),u.getMonth()!=e&&m.push("cell-w-date-selector__table__row__td--off-month"),InfrontUtil.isSameDate(u,this.currentDate)&&m.push("cell-w-date-selector__table__row__td--selected"),this.dateIsOutsideRange(u)&&m.push("cell-w-date-selector__table__row__td--disabled"),this.dateIsOutsideRange(u)&&m.push("cell-w-date-selector__table__row__td--disabled"),"from"===this.element.getAttribute("data-destination")?this.toDate.getTime()<u.getTime()||-1<(h=m.indexOf("cell-w-date-selector__table__row__td--disabled"))&&m.splice(h,1):this.fromDate.getTime()>u.getTime()?m.push("cell-w-date-selector__table__row__td--disabled"):-1<(h=m.indexOf("cell-w-date-selector__table__row__td--disabled"))&&m.splice(h,1),p.className=m.join("  "),this.data.put(p,"date",u),InfrontUtil.addEventListener(p,"click",this.onClickListener),p.innerHTML=InfrontUtil.formatNumber(u.getDate(),0),d.appendChild(p),u=InfrontUtil.addDays(u,1)}this.calendarContainer.innerHTML="",this.calendarContainer.appendChild(o)},t.prototype.dateIsOutsideRange=function(e){return null!=this.minDate&&e<this.minDate||null!=this.maxDate&&e>this.maxDate},t.prototype.clearAllData=function(e){for(var t=0;t<e.childNodes.length;t++)this.clearAllData(e.childNodes.item(t));this.data.clear(e)},t.prototype.updateCalendar=function(){this.currentMonthName.set(this.strings.get("time",t.months[this.currentMonth])),this.currentYearName.set(this.currentYear.toString()),this.calendarContainer&&this.createCalendar(this.currentMonth,this.currentYear)},t.prototype.updateTextfield=function(){if(e.MWSConstants.iso_8601_format)var t=InfrontUtil.getApiDateString(this.currentDate);else t=this.currentDate.getDate()+"."+(this.currentDate.getMonth()+1)+"."+this.currentDate.getFullYear();this.textFieldBinding.set(t)},t.prototype.nextMonthClick=function(e){this.currentMonth++,12==this.currentMonth&&(this.currentMonth=0,this.currentYear++),this.updateCalendar(),e.stopPropagation(),e.preventDefault(),this.showCalendar.set(!0)},t.prototype.prevMonthClick=function(e){this.currentMonth--,-1==this.currentMonth&&(this.currentMonth=11,this.currentYear--),this.updateCalendar(),e.stopPropagation(),e.preventDefault(),this.showCalendar.set(!0),IDS.log("DateSelector: ",this.showCalendar.get())},t.prototype.nextYearClick=function(e){this.currentYear++,this.updateCalendar(),e.stopPropagation(),e.preventDefault(),this.showCalendar.set(!0)},t.prototype.prevYearClick=function(e){this.currentYear--,this.updateCalendar(),e.stopPropagation(),e.preventDefault(),this.showCalendar.set(!0),IDS.log("DateSelector: ",this.showCalendar.get())},t.prototype.dateClick=function(e){var t=e.target;this.data.hasKey(t,"date")&&("from"===this.element.getAttribute("data-destination")?this.fromDate=this.data.get(t,"date"):this.toDate=this.data.get(t,"date"),this.currentDate=this.data.get(t,"date"),this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.updateTextfield(),this.updateCalendar()),e.stopPropagation(),e.preventDefault(),this.showCalendar.get()&&this.showCalendar.set(!1)},t.prototype.setFromDate=function(e){this.fromDate=e},t.prototype.setToDate=function(e){this.toDate=e},t.prototype.setCurrentDate=function(e){this.currentDate=e,this.updateTextfield()},t.prototype.textUpdated=function(t){if(this.textFieldBinding.isValid()){if(e.MWSConstants.iso_8601_format)this.currentDate=InfrontUtil.parseIso8601DateString(t),this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear();else{var n=t.split("."),i=parseInt(n[0]),r=parseInt(n[1])-1,a=parseInt(n[2]);this.currentDate=new Date(a,r,i),this.currentMonth=r,this.currentYear=a}this.updateCalendar(),InfrontUtil.isFunction(this.dateChangeCallback)&&this.dateChangeCallback(this.currentDate)}},t.prototype.setFocus=function(){this.textFieldBinding&&this.textFieldBinding.requestFocus()},t.prototype.getDate=function(){return this.currentDate},t.prototype.setDate=function(e){this.currentDate=e,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.updateTextfield(),this.updateCalendar()},t.prototype.setMinDate=function(e){this.minDate=e,this.updateCalendar()},t.prototype.setMaxDate=function(e){this.maxDate=e,this.updateCalendar()},t.prototype.setEnabled=function(e){this.disabled.set(!e)},t.prototype.destroy=function(){InfrontUtil.removeEventListener(this.elements.dropdownContainer,"click",this.dropdownListener),InfrontUtil.removeEventListener(document.body,"click",this.windowClick),this.dateChangeCallback=null,this.clearAllData(this.calendarContainer),e.WidgetDOMFactory.unbindAll(this.element)},t.prototype.reset=function(){this.fromDate=new Date,this.toDate=new Date,this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.updateTextfield(),this.updateCalendar()},t.months=["january","february","march","april","may","june","july","august","september","october","november","december"],t.oneLetterDays=["M","T","W","T","F","S","S"],t}();function g(t){var n=!1;if(e.MWSConstants.iso_8601_format){if(/[0-9]{4}[-][0-9]{2}[-][0-9]{2}/.test(t)){var i=t.split("-"),r=parseInt(i[1]),a=parseInt(i[1])-1,s=parseInt(i[2]);n=0<=a&&a<12&&0<s&&s<=InfrontUtil.daysInMonth(a,r)}}else/([0-9]{1,2}[.]){2}[0-9]{4}/.test(t)&&(i=t.split("."),s=parseInt(i[0]),a=parseInt(i[1])-1,r=parseInt(i[2]),n=0<=a&&a<12&&0<s&&s<=InfrontUtil.daysInMonth(a,r));return n}e.DateSelector=m;var f,v,y=function(){function t(t,n,i){this.element=t,this.strings=n,this.hourSelector=new e.SelectInputBinding,this.minuteSelector=new e.SelectInputBinding,this.hourItems=new e.ObservableArray,this.hourItems.replaceWith(["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]),this.minuteItems=new e.ObservableArray,this.minuteItems.replaceWith(["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"]),this.disabled=new e.Observable,this.disabled.set(!1),this.seperator=new e.Observable(":"),this.minHour=-1,this.maxHour=24,this.currentTime=new Date,this.currentTime.setFullYear(0,0,0),this.currentTime.setSeconds(0),this.currentHour=this.currentTime.getHours(),this.currentMinute=this.currentTime.getMinutes(),this.timeChangeCallback=i,this.buildUI()}return t.prototype.buildUI=function(){var t=this;e.WidgetDOMFactory.create_CTimeSelector_DOM(this.element,this.hourItems,this.minuteItems,this.hourSelector,this.minuteSelector,this.minHour,this.maxHour,this.seperator,this.disabled),this.setTimeInternal(this.currentHour,this.currentMinute),this.hourSelector.setSelected(this.currentHour),this.minuteSelector.setSelected(this.currentMinute),this.hourSelector.observe(function(e){t.setTimeInternal(e,t.currentMinute),InfrontUtil.isFunction(t.timeChangeCallback)&&t.timeChangeCallback(t.currentTime)}),this.minuteSelector.observe(function(e){t.setTimeInternal(t.currentHour,e),InfrontUtil.isFunction(t.timeChangeCallback)&&t.timeChangeCallback(t.currentTime)})},t.prototype.setTimeInternal=function(e,t){if(!(0<=e&&e<24&&0<=t&&t<60))throw new Error("Error time");this.currentTime.setHours(e,t),this.currentHour=e,this.currentMinute=t},t.prototype.setTimeA=function(e,t){if(0<=e&&e<24&&0<=t&&t<60)return e==this.currentHour&&t==this.currentMinute||(this.setTimeInternal(e,t),this.hourSelector.setSelected(e),this.minuteSelector.setSelected(t)),this.currentTime;throw new Error("Error time")},t.prototype.setTimeB=function(e){return e?this.setTimeA(e.getHours(),e.getMinutes()):e},t.prototype.setHour=function(e){return this.setTimeA(e,this.currentMinute)},t.prototype.setMinute=function(e){return this.setTimeA(this.currentHour,e)},t.prototype.getHour=function(){return this.currentHour},t.prototype.getMinute=function(){return this.currentMinute},t.prototype.getTime=function(){return this.currentTime},t.prototype.setEnabled=function(e){this.disabled.set(!e)},t.prototype.getSeperator=function(){return this.seperator.get()},t.prototype.setSeperator=function(e){this.seperator.set(e)},t.prototype.setMinMaxHour=function(e,t){this.minHour=e,this.maxHour=t,this.destroyUI(),this.buildUI()},t.prototype.getFormattedTime=function(){return(this.currentHour<10?"0"+this.currentHour:""+this.currentHour)+":"+(this.currentMinute<10?"0"+this.currentMinute:""+this.currentMinute)+":00"},t.prototype.destroyUI=function(){e.WidgetDOMFactory.unbindAll(this.element)},t.prototype.destroy=function(){this.destroyUI(),this.timeChangeCallback=null},t.prototype.reset=function(){this.currentTime=new Date,this.currentTime.setFullYear(0,0,0),this.currentTime.setSeconds(0),this.currentHour=this.currentTime.getHours(),this.currentMinute=this.currentTime.getMinutes(),this.setTimeB(this.currentTime)},t}();e.TimeSelector=y,(v=f=e.PopupAnchorLocation||(e.PopupAnchorLocation={}))[v.TOP_LEFT=0]="TOP_LEFT",v[v.TOP_RIGHT=1]="TOP_RIGHT",v[v.BOTTOM_LEFT=2]="BOTTOM_LEFT",v[v.BOTTOM_RIGHT=3]="BOTTOM_RIGHT";var b=function(){};e.PopupOptions=b;var T=function(){function t(e,t,n){var i=new b;i.anchor=f.TOP_LEFT,i.arrow=!1,this._options=InfrontUtil.mergeRecursive(i,n),this.anchorTo=t,this.parent=e||this.findTopLevelParent(),this.buildUI()}var n;return t.prototype.getContent=function(){return this.content},t.prototype.buildUI=function(){var n=this._options.arrow?t.kArrowClasses[this._options.anchor]:null,i=e.WidgetDOMFactory.create_CPopup_DOM(this.parent,this._options.arrow,n);this.container=i.container,this.content=i.content,this._options.width&&(this.container.style.width=this._options.width+"px");var r=this.findParentOffset(),a=this.anchorTo.offsetWidth,s=this.anchorTo.offsetHeight,o=this.parent.offsetWidth,l=InfrontUtil.isNumber(this._options.offsetX)?this._options.offsetX:0,c=InfrontUtil.isNumber(this._options.offsetY)?this._options.offsetY:0;switch(this._options.anchor){case f.TOP_LEFT:this.container.style.top=r.y+s+c+"px",this.container.style.left=r.x+l+"px";break;case f.TOP_RIGHT:this.container.style.top=r.y+s+c+"px",this.container.style.right=o-(r.x+a+l)+"px";break;case f.BOTTOM_LEFT:this.container.style.bottom=r.y+c+"px",this.container.style.left=r.x+l+"px";break;case f.BOTTOM_RIGHT:this.container.style.bottom=r.y+c+"px",this.container.style.right=o-(r.x+a+l)+"px"}},t.prototype.findTopLevelParent=function(){for(var e=null,t=this.anchorTo;null!=(t=(e=t).offsetParent)&&t!=document.body;);return e},t.prototype.findParentOffset=function(){for(var e=this.anchorTo,t=0,n=0;t+=e.offsetLeft,n+=e.offsetTop,(e=e.offsetParent)!=this.parent&&e;);return{x:t,y:n}},t.prototype.destroy=function(){this.container&&InfrontUtil.removeAllChildNodes(this.container),this.parent&&this.parent.removeChild(this.container),this.content=null,this.container=null,this.parent=null,this.anchorTo=null},t.kArrowClasses=((n={})[f.TOP_LEFT]=e.CssConstants.kPopupArrowTopLeft,n[f.TOP_RIGHT]=e.CssConstants.kPopupArrowTopRight,n[f.BOTTOM_LEFT]=e.CssConstants.kPopupArrowBottomLeft,n[f.BOTTOM_RIGHT]=e.CssConstants.kPopupArrowBottomRight,n),t}();e.Popup=T;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(b);e.YesNoPopupOptions=S;var C=function(t){function n(e,n,i,r,a){var s=t.call(this,e,n,a)||this;return s.options=InfrontUtil.deepCopy(a),s.questionText=i,s.languageHandler=r,s.doBuildUI(),s}return __extends(n,t),n.prototype.doBuildUI=function(){var t=this,n=this.getContent();e.WidgetDOMFactory.create_CYesNoPopup_DOM(n,this.questionText,function(){return t.onYes()},function(){return t.onNo()},this.languageHandler)},n.prototype.onYes=function(){this.options.onYes&&this.options.onYes(),this.destroy()},n.prototype.onNo=function(){this.options.onNo&&this.options.onNo(),this.destroy()},n}(T);e.YesNoPopup=C;var I=function(){function t(t,n,i,r){void 0===i&&(i=!1),this.state=new e.Observable,this.state.set(i),this.binding=e.BindingFactory.createInlineBinding(n),this.state.observe(this.binding),this.ariaLabelString=r,this.element=t,this.buildUI()}return t.prototype.setState=function(e){this.state.set(e)},t.prototype.buildUI=function(){var t=this;this.element&&e.WidgetDOMFactory.create_CSwitch_DOM(this.element,this.state,function(e){t.state.set(!t.state.get()),t.onSwitch&&t.onSwitch()}).switchBtn.setAttribute("aria-label",this.ariaLabelString)},t.prototype.destroy=function(){this.state.unbind(this.binding)},t}();e.Switch=I;var _=function(){function t(t,n,i,r,a,s){void 0===a&&(a=null),void 0===s&&(s=!1),this.element=t,this.id=i,this.label=r,this.state=new e.Observable,this.state.set(s),this.group=M.getGroup(n),this.group.addButton(this),a&&this.group.setStateChangeListener(a),!0===s&&this.group.setSelected(this),this.buildUI()}return t.prototype.buildUI=function(){var t=this;this.element&&e.WidgetDOMFactory.create_CRadio_DOM(this.element,this.label,this.state,function(e){t.radioClicked()})},t.prototype.radioClicked=function(){this.state.get()||this.group.setSelected(this)},t.prototype.setSelected=function(e){this.state.set(e)},t.prototype.getId=function(){return this.id},t.prototype.destroy=function(){e.WidgetDOMFactory.unbindAll(this.element)},t}();e.RadioButton=_;var M=function(){function e(e){this.name=e,this.buttons=[]}return e.prototype.addButton=function(e){this.buttons.push(e)},e.prototype.setSelected=function(e){if(this.selected!=e){this.selected=e;for(var t=0;t<this.buttons.length;t++)this.buttons[t].setSelected(!1);this.selected.setSelected(!0),this.stateChangeListener&&this.stateChangeListener(this.selected.getId())}},e.prototype.setStateChangeListener=function(e){this.stateChangeListener=e},e.getGroup=function(t){var n=null;return e.groups.hasOwnProperty(t)?n=e.groups[t]:(n=new e(t),e.groups[t]=n),n},e.groups={},e}(),E=function(){function e(){}return e.prototype.getKeyboardNav=function(e,t){function n(t){null!=t&&(e.focus(),e.style.backgroundColor="",e.style.color="",t.focus(),e=t)}t.onkeyup=function(t){if(9==t.keyCode){t.preventDefault();var i=e.children[0].children[0];if(i.setAttribute("tabindex","0"),i.focus(),document.activeElement==i)for(var r=0;r<e.children.length;r++){var a=e.children.item(r);a.setAttribute("tabindex","-1");for(var s=0;s<a.children.length;s++)a.children.item(s)!=i&&a.children.item(s).setAttribute("tabindex","-1")}}else if(38==t.keyCode){t.preventDefault();var o=e.cellIndex;if(null!=(l=e.parentElement.previousElementSibling))n(l.cells[o])}else if(40==t.keyCode){t.preventDefault();var l;o=e.cellIndex;if(null!=(l=e.parentElement.nextElementSibling))n(l.cells[o])}else if(37==t.keyCode){t.preventDefault(),n(document.activeElement.previousElementSibling)}else if(39==t.keyCode){t.preventDefault(),n(document.activeElement.nextElementSibling)}return t.preventDefault(),!1}},e}();e.AccesabilityCommon=E;var w=function(t){function n(n,i,r,a){var s=t.call(this,null,n,null,{id:null,persistState:!0,linkChannels:r,storageType:null,widgetTitle:null,hasContentCallback:function(e,t){},navButton:0,navButtonClicked:function(){},useOriginal:!1,decimals:e.WidgetDecimals.INSTRUMENT,showSearchWidget:!1,widgetStateCallback:function(e){}})||this;return s.linkAction=i,s.linkChannels=r,s.receiveCallback=a,s.targetManager=new InfrontUtil.LinkTargetManager,s}return __extends(n,t),n.prototype.returnDefaultWidgetOptions=function(){return new e.WidgetOptions},n.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument]},n.prototype.receiveMessage=function(t){if(this.linkAction!=e.LinkAction.None)switch(t.type){case InterLibraryLink.DataType.infrontInstrument:this.receiveCallback&&this.receiveCallback(t.type,t.value)}},n.prototype.link=function(e){-1!=e.accepts().indexOf(InterLibraryLink.DataType.infrontInstrument)&&this.targetManager.addTarget(e)},n.prototype.unlink=function(e){this.targetManager.removeTarget(e)},n.prototype.doLink=function(e,t){this.targetManager.isLinked()&&this.targetManager.updateTargets(e,t)},n.prototype.linkInstrument=function(e){this.doLink(InterLibraryLink.DataType.infrontInstrument,e)},n.prototype.linkIsin=function(e){},n}(e.WidgetBase);e.Link=w;var A=function(){function t(t){var n=this;this.hidden=new e.Observable(!0),this.overlayClassName="cell-c-super-absolute-modal-overlay",this.modalClassName="cell-c-super-absolute-modal",this.headerClassName="cell-c-super-absolute-modal__header",this.outsideClickListener=function(e){e.target==n.editBox||n.editBox.contains(e.target)||n.remove()},this.parentElement=t,this.overlay=document.createElement("div"),this.overlay.className=this.overlayClassName,this.editBox=document.createElement("div"),this.editBox.className=this.modalClassName+" cell-content  cell-content--raised";var i=e.BindingFactory.createInlineBinding(function(e){n.overlay.hidden=!e,n.editBox.hidden=!e});this.hidden.observe(i,e.InitialUpdate.Synchronous),this.parentElement.appendChild(this.overlay),document.body.appendChild(this.editBox),InfrontUtil.setZeroTimeout(function(){InfrontUtil.addEventListener(document,"click",n.outsideClickListener)})}return t.prototype.addHeader=function(e){var t=document.createElement("div");t.className=this.headerClassName,t.innerHTML=e,this.editBox.appendChild(t)},t.prototype.appendChild=function(e){this.editBox.appendChild(e)},t.prototype.setVisible=function(e){this.hidden.set(e),e&&this.positionCheck()},t.prototype.positionCheck=function(){var e=this.parentElement.getBoundingClientRect(),t=document.body.getBoundingClientRect(),n=this.editBox.getBoundingClientRect(),i=e.top+2;i+n.height>t.bottom-30&&(i=Math.max(75,t.bottom-n.height-30));var r=e.left+(e.width/2-n.width/2);this.editBox.style.top=i-t.top+"px",this.editBox.style.left=r+"px"},t.prototype.remove=function(){InfrontUtil.removeEventListener(document,"click",this.outsideClickListener),this.editBox.parentElement.removeChild(this.editBox),this.overlay.parentElement.removeChild(this.overlay)},t}();e.SuperAbsoluteModal=A}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.TabOptions);e.QuoteListTabOptions=t;var n=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.showDropDowns=!0,n.linkAction=e.LinkAction.None,n.columns=["TICKER","FULL_NAME","LAST_VALID","CHANGE","PCT_CHANGE","HIGH","LOW","TIME"],n.useChains=!1,n.chains=[],n.defaultChain=null,n.enableSearch=!1,n.types=null,n.showFilters=null,n.showUnderlyings=!0,n.showIssuers=!0,n.showExpiries=!0,n.issuersHasAll=!0,n.issuersHasNone=!0,n.underlyingsHasNone=!0,n}return __extends(n,t),n}(e.CommonListOptions);e.QuoteListWidgetOptions=n;var i=function(){};e.FilterOpts=function(){};var r=function(t){function r(n,i,a,s){var o=t.call(this,n,a,r.kLanguageKey,s)||this;if(o.sAll="all",o.sNone="none",o.cachedReferenceData={feed:void 0,data:[]},o.instruments=new e.ObservableArray,o.feedMetaData={},o.chainName="",o.feedDescription="",o.dataTypes=[],o.issuers=[],o.underlying=[],o.underlyingFeeds=[],o.underlyingFullName=[],o.visibleExpirydates=[],o.updateVisibleExpiryDates=!1,o.selectedRow=null,o.selectedInstrument=null,o.initiallySelectedInstrument=null,o.dropDownContainer=null,o.headerElement=null,o.linkTargets=[],o.requestsCount=0,o.showCustomDropDowns=[],"number"==typeof s.defaultSortedColumn)o.defaultSortColumn=o.columns[s.defaultSortedColumn];else if("string"==typeof s.defaultSortedColumn)for(var l=0;l<o.columns.length;l++)if(o.columns[l].name==s.defaultSortedColumn){o.defaultSortColumn=o.columns[l];break}return o.options.cacheKeyConverter&&o.columnManager.setCacheKeyConverter(o.options.cacheKeyConverter),o.columnManager.createFooterFields(o.instrumentsToShow,function(t){return e.CacheKeyFactory.createInstrumentKey(t)}),o.widgetSubTitle=new e.Observable,o.widgetSubTitle.set(""),o.sAll="&lt;"+o.languageHandler.get(r.kLanguageKey,"all")+"&gt;",o.sNone="&lt;"+o.languageHandler.get(r.kLanguageKey,"none")+"&gt;",o.dropDowns=new e.ObservableArray,o.showIssuers=new e.Observable,o.showIssuers.set(!1),o.showUnderlying=new e.Observable,o.showUnderlying.set(!1),o.showExpiryDates=new e.Observable,o.showExpiryDates.set(!1),o.showChains=new e.Observable,o.showChains.set(!1),o.targetManager=new InfrontUtil.LinkTargetManager,o.isinTargetManager=new InfrontUtil.LinkTargetManager,o.showProgressIndicator=new e.Observable,o.showProgressIndicator.set(!1),o.options.selectedInstrument?o.initiallySelectedInstrument=o.options.selectedInstrument:o.options.hasOwnProperty("selectedRow")&&o.options.instruments&&o.options.instruments.length>o.options.selectedRow&&(o.initiallySelectedInstrument=o.options.instruments[o.options.selectedRow]),o.chains=new e.ObservableArray,o.options.chains&&o.chains.replaceWith(o.options.chains),o.selectedChain=null,o.selectedChainName=new e.Observable,o.hasMultipleChains=new e.Observable,o}return __extends(r,t),r.prototype.setListItems=function(){this.itemsToShow=new e.ContinouslySortedCachedInstrumentObservableArray(this.options.sortable?this.columnManager.currentlySortedColumn:null,this.getTickerField(),this.cache,this.columnManager.currentSortOrder?this.columnManager.currentSortOrder:this.options.defaultSortOrder),this.instrumentsToShow=this.itemsToShow},r.prototype.setColumnManager=function(){var t=this.options,n=t.customDropDowns,i=t.customElementsBefore,r=t.customElementsAfter,a=t.customTitle;delete t.customDropDowns,delete t.customElementsBefore,delete t.customElementsAfter,delete t.customTitle;var s=InfrontUtil.deepCopy(this.options);t.customDropDowns=n,t.customElementsBefore=i,t.customElementsAfter=r,t.customTitle=a;var o=this.getStoredColumnSortingOptions();o&&(s.defaultSortedColumn=o.column,s.defaultSortOrder=o.sortOrder),this.columnManager=new e.ColumnManager(s,this.infront,this.infrontUI,null,this.subscribes)},r.prototype.returnDefaultWidgetOptions=function(){return new n},r.prototype.newInit=function(){var n=this;if(this.instrumentFilter=new i,this.createAndBindRootElement(),this.createSettings(),this.createCustomElementsBefore(),this.createCustomDropDowns(),this.options.feed&&!this.options.useChains)this.loadFeed(this.options.feed);else if(this.options.useChains){var r=e.BindingFactory.createInlineBinding(function(e){n.chainName=e});this.selectedChainName.observe(r),null!=this.options.feed?this.loadFeedChains():this.options.chains&&0<this.options.chains.length?this.buildChainNodes(this.options.chains):this.options.defaultChain&&"string"!=typeof this.options.defaultChain&&this.chainSelected(this.options.defaultChain),this.selectedChainName.set(null!=this.selectedChain?this.selectedChain.description:"Select a list"),this.hasMultipleChains.set(0<this.chains.length());for(var a=0;a<this.linkTargets.length;a++)this.link(this.linkTargets[a])}else this.addAllInstruments(this.options.instruments),this.createCustomElementsAfter();if(this.options.onItemCountChange){var s=e.BindingFactory.createInlineBinding(function(e){n.options.onItemCountChange(e)});this.instrumentsToShow.lengthObservable.observe(s,e.InitialUpdate.Synchronous)}t.prototype.newInit.call(this)},r.prototype.newBuildUI=function(){t.prototype.newBuildUI.call(this)},r.prototype.newSubscribe=function(){this.columnManager.subscribe()},r.prototype.newUnsubscribe=function(){this.columnManager.unsubscribe(),this.subscribes.removeAllFields()},r.prototype.newDestroyUI=function(){this.pause(),this.columnManager.unbindFooterTr(),this.chainDropDown&&(this.chainDropDown.destroy(),delete this.chainDropDown),this.expiryDropDown&&(this.expiryDropDown.destroy(),delete this.expiryDropDown),this.underlyingDropDown&&(this.underlyingDropDown.destroy(),delete this.underlyingDropDown),this.issuerDropDown&&(this.issuerDropDown.destroy(),delete this.issuerDropDown),this.clear(),t.prototype.newDestroyUI.call(this)},r.prototype.finalize=function(){this.tabBar&&this.tabBar.destroy(),this.dataCap&&this.dataCap.unbind(this.binding),this.instrumentsToShow.unbind(this.binding),t.prototype.finalize.call(this)},r.prototype.addAllInstruments=function(t){var n=this;if(t&&0<t.length){for(var i=function(t){r.feedMetaData.hasOwnProperty(t.feed.toString())?(r.doAddInstrument(new e.Instrument(t.feed,t.ticker)),r.instrumentsToShow.push(new e.Instrument(t.feed,t.ticker))):r.infront.getFeedHandler().getFeed(t.feed,function(i){n.feedMetaData[t.feed]=i,n.doAddInstrument(new e.Instrument(t.feed,t.ticker)),n.instrumentsToShow.push(new e.Instrument(t.feed,t.ticker))})},r=this,a=0,s=t;a<s.length;a++)i(s[a]);this.subscribes.addInstruments(t)}},r.prototype.doAddInstrument=function(t){this.instruments.push(t),this.columnManager.createComputedFieldsInCache(t,e.CacheKeyFactory.createInstrumentKey(t))},r.prototype.handleItemTypes=function(t){this.showIssuers.set(!1),this.showUnderlying.set(!1),this.showExpiryDates.set(!1);for(var n=0;n<t.length;n++)this.dataTypes.push(t[n]);if(this.options.showDropDowns&&null==this.options.showFilters)for(n=0;n<this.dataTypes.length;n++)this.dataTypes[n]==r.kBonds||this.dataTypes[n]==r.kFunds?this.options.issuer||this.showIssuers.set(!0):this.dataTypes[n]==r.kOptions||this.dataTypes[n]==e.FeedDataTypes.EUROOPTIONS||this.dataTypes[n]==e.FeedDataTypes.USOPTIONS?(this.showUnderlying.set(!0),this.showExpiryDates.set(!0)):this.dataTypes[n]==r.kWarrants&&(this.options.issuer||this.showIssuers.set(!0),this.showUnderlying.set(!0),this.showExpiryDates.set(!0))},r.prototype.setSorting=function(e,t,n){var i=this.columnManager.findColumn(e);i&&this.sortColumnChanged(i,t,n)},r.prototype.sortColumnChanged=function(t,n,i){if(n==e.SortOrder.None){var a=this.defaultSortColumn;n=this.options.defaultSortOrder,a&&(t=a)}if(t&&t.getFieldSpec()&&this.options.sortable){var o=null;t.dataType!=e.DataType.DateTime&&t.dataType!=e.DataType.DateOnly||(o=s),this.instrumentsToShow.setSortingField(t,n,o),i&&this.store(r.kMySortingColumnKey,t.name+n)}},r.prototype.getTickerField=function(){var t=null;if(this.secondarySortColumn=null,this.options.sortable){var n=this.columnManager.findColumn(e.MWSConstants.ticker.toUpperCase());t=(this.secondarySortColumn=n)||null}return t},r.prototype.getStoredColumnSortingOptions=function(){var t=this.getStoredValue(r.kMySortingColumnKey);if(t){var n={column:void 0,sortOrder:void 0},i=t.substr(0,t.length-1),a=t.substr(t.length-1);return n.column=i,"0"==a?n.sortOrder=e.SortOrder.Desc:"1"==a&&(n.sortOrder=e.SortOrder.Asc),n}},r.prototype.createSettings=function(){var e=this;if(this.options.enableColumnsMove||this.options.enableColumnsResize){var t=document.createElement("button");t.style.cssText="margin: 0 0 0 5px;",t.className="cell-pull-right cell-table__col--setting--choose-col",t.setAttribute("tabindex","0"),t.title="Open column chooser",t.onclick=function(t){t.stopPropagation(),e.options.onSettingsClicked&&e.options.onSettingsClicked()},this.addCustomElement(t)}},r.prototype.createAndBindRootElement=function(){var t,n=this;this.dropDownContainer=document.createElement("div"),this.dropDownContainer.className="cell-pull-right",this.element.appendChild(this.dropDownContainer);var i=document.createElement("div");if(this.options.customTitle&&i.appendChild(this.options.customTitle),null!==this.options.widgetTitle){if(this.options.widgetTitle){var r=document.createElement("span");r.innerHTML=this.widgetTitle,i.appendChild(r);var a=document.createElement("span");a.innerHTML="",i.appendChild(a),(s=document.createElement("span")).innerHTML="",i.appendChild(s),i.className="cell-h4",t=e.BindingFactory.createInlineBinding(function(e){s.innerHTML=""!=e?(a.innerHTML=" | ",e):a.innerHTML=""}),this.element.appendChild(i)}else{var s=document.createElement("span");t=e.BindingFactory.createInlineBinding(function(e){i.appendChild(s),i.className="cell-h4",s.innerHTML=e}),this.element.appendChild(i)}this.widgetSubTitle.observe(t,e.InitialUpdate.None)}if(this.options.tabs&&0<this.options.tabs.length){var o=document.createElement("div"),l=new e.TabbedContainerOptions;l.tabs=this.options.tabs,l.useContainers=!1,l.onSelect=function(e){return n.tabSelected(e)},this.tabBar=new e.TabbedContainer(o,l),this.element.appendChild(o)}var c=this.createRootUI(),d=this.createHeaderRow();c.headerContainer.appendChild(d);var u=this.createFooterRow(2,this.languageKey);u&&c.footerContainer.appendChild(u);var h=document.createElement("div");if(InfrontUtil.addClassName(h,"cell-table-wrapper"),h.appendChild(c.root),this.element.appendChild(h),this.options.enableFixedHeader&&80<this.element.offsetHeight&&(h.style.height=this.element.offsetHeight-d.offsetHeight+"px",InfrontUtil.addClassName(h,"cell-table-fixed"),e.PerfectScrollbar)){var p=new e.PerfectScrollbar(h,{suppressScrollX:!0});this.addEventListener(h,"mouseover",function(e){return p.update()})}this.binding=new e.ArrayBinding(c.bodyContainer,this,this),InfrontUtil.isNumber(this.options.maxItems)?(this.dataCap=new e.ObservableArrayCap(this.instrumentsToShow,this.options.maxItems),this.dataCap.observe(this.binding)):this.instrumentsToShow.observe(this.binding),this.columnManager.updateDefaultContent(),this.progressIndicator=new e.ProgressIndicator(this.element),this.progressIndicator.observe(this.showProgressIndicator)},r.prototype.setMaxItems=function(e){this.dataCap&&this.dataCap.setCap(e)},r.prototype.createRow=function(t,n){var i=this,r=e.CacheKeyFactory.createInstrumentKey(t),a=new e.Observable;this.options.decimals==e.WidgetDecimals.DEFAULT?a.set(e.UI.kDefaultDecimals):InfrontUtil.isNumber(this.options.decimals)?a.set(this.options.decimals):this.options.decimals==e.WidgetDecimals.INSTRUMENT&&this.cache.guaranteedAsyncGet(function(e){InfrontUtil.isNumber(e)&&a.set(e)},new e.FieldReference(r,[e.MWSConstants.instrument,e.MWSConstants.precision_code])),this.options.decimals!=e.WidgetDecimals.INSTRUMENT&&this.options.decimals!=e.WidgetDecimals.FEED||!this.feedMetaData[t.feed]||void 0===this.feedMetaData[t.feed].decimals||a.set(this.feedMetaData[t.feed].decimals);var s=this.createElementRowFromCache(t,r,a);return this.options.rowSelectable&&this.addEventListener(s,"click",function(n){i.selectedRow&&InfrontUtil.removeClassName(i.selectedRow,e.CssConstants.kCellActiveRow),i.selectedRow=s,i.selectedInstrument=t,InfrontUtil.addClassName(i.selectedRow,e.CssConstants.kCellActiveRow)}),this.initiallySelectedInstrument&&t.feed==this.initiallySelectedInstrument.feed&&t.ticker==this.initiallySelectedInstrument.ticker&&(this.selectedRow&&InfrontUtil.removeClassName(this.selectedRow,e.CssConstants.kCellActiveRow),this.selectedRow=s,this.selectedInstrument=t,InfrontUtil.addClassName(this.selectedRow,e.CssConstants.kCellActiveRow)),s},r.prototype.htmlElementTreeAdded=function(e,t,n){this.showProgressIndicator.set(!1),this.columnManager.htmlElementTreeAdded(e,t,n)},r.prototype.htmlElementTreeRemoved=function(e,t,n){this.columnManager.htmlElementTreeRemoved(e,t,n)},r.prototype.htmlElementTreeMoved=function(e,t,n,i){this.columnManager.htmlElementTreeMoved(e,t,n,i)},r.prototype.rowClicked=function(t){if(this.options.onInstrumentSelected){var n=e.CacheKeyFactory.createInstrumentKey(t);this.options.onInstrumentSelected(this.cache.getInstrument(n))}},r.prototype.linkEvent=function(t){if(this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,t),this.isinTargetManager.isLinked()){var n=this.cache.get(e.CacheKeyFactory.createInstrumentKey(t),[e.MWSConstants.instrument,e.MWSConstants.isin]),i=InterLibraryLink.DataType.isin;this.isinTargetManager.updateTargets(i,n)}},r.prototype.tabSelected=function(e){this.columnManager.selectTab(e)},r.prototype.setVisibleColumns=function(e){this.columnManager.setVisibleColumns(e)},r.prototype.getColumnManager=function(){return this.columnManager},r.prototype.setInitiallySelectedInstrument=function(t){this.options.rowSelectable&&(this.initiallySelectedInstrument=e.Instrument.prototype.inf_clone.apply(t),this.rowClicked(this.initiallySelectedInstrument))},r.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument,InterLibraryLink.DataType.removeInfrontInstrument,InterLibraryLink.DataType.clearAllInstruments,InterLibraryLink.DataType.replaceAllInstruments]},r.prototype.receiveMessage=function(t){if(this.options.linkAction!=e.LinkAction.None)if(t.type==InterLibraryLink.DataType.clearAllInstruments)this.clear();else if(t.type==InterLibraryLink.DataType.replaceAllInstruments)r.replaceAlls++,this.clear(),InfrontUtil.isArray(t.value)&&this.addInstruments(t.value);else if(t.type==InterLibraryLink.DataType.infrontInstrument){if(t.value&&!this.hasInstrument(t.value)){r.adds++;var n=new e.Instrument(t.value.feed,t.value.ticker);this.options.linkAction==e.LinkAction.Replace&&this.clear(),this.addInstrument(n)}}else t.type==InterLibraryLink.DataType.removeInfrontInstrument&&this.removeInstrument(t.value)},r.prototype.link=function(e){var t=e.accepts();-1!=t.indexOf(InterLibraryLink.DataType.infrontInstrument)||-1!=t.indexOf(InterLibraryLink.DataType.listInstrument)?this.targetManager.addTarget(e):-1<t.indexOf(InterLibraryLink.DataType.isin)&&this.isinTargetManager.addTarget(e)},r.prototype.unlink=function(e){this.targetManager.removeTarget(e),this.isinTargetManager.removeTarget(e)},r.prototype.hasInstrument=function(t){for(var n=this.instrumentsToShow.length(),i=0;i<n;i++)if(e.Instrument.prototype.equals.call(this.instrumentsToShow.item(i),t))return!0;return!1},r.prototype.addInstrument=function(e){var t=this;this.hasInstrument(e)||(this.feedMetaData.hasOwnProperty(e.feed.toString())?(this.doAddInstrument(e),this.instrumentsToShow.push(e)):this.infront.getFeedHandler().getFeed(e.feed,function(n){t.feedMetaData[e.feed]=n,t.doAddInstrument(e),t.instrumentsToShow.push(e)}),this.subscribes.addInstrument(e))},r.prototype.addInstruments=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];if(!this.hasInstrument(r)){if(!this.feedMetaData.hasOwnProperty(r.feed.toString())){var a=this.getSyncFeedMetadata(r.feed);a&&(this.feedMetaData[r.feed]=a)}this.doAddInstrument(r),t.push(r)}}if(0<t.length){var s=this.instrumentsToShow.data.concat(t);this.instrumentsToShow.replaceWith(s),this.subscribes.addInstruments(t)}},r.prototype.removeInstrument=function(t){for(var n=this.instrumentsToShow.length(),i=0;i<n;i++)if(e.Instrument.prototype.equals.call(this.instrumentsToShow.item(i),t)){this.instrumentsToShow.removeItemAt(i),this.subscribes.removeInstrument(t);break}this.columnManager.updateDefaultContent()},r.prototype.clear=function(){this.clearVisible(),this.instruments.clear()},r.prototype.clearVisible=function(){this.instrumentsToShow&&0<this.instrumentsToShow.length()&&this.subscribes.removeAllInstruments(),this.instrumentsToShow.clear(),this.columnManager.updateDefaultContent()},r.prototype.loadChain=function(t){var n=this,i=new e.ChainOptions;t.hasOwnProperty("provider")&&"number"==typeof t.provider&&(i.provider=t.provider),i.onError=function(e,t){n.showProgressIndicator.set(!1)},i.onData=function(t){for(var i=t.items,r=[],a=[],s=0;s<i.length;s++){var o=new e.Instrument(i[s].feed,i[s].ticker);n.hasInstrument(o)||(-1==a.indexOf(o.feed)&&a.push(o.feed),r.push(o))}var l=!n.feedMetaData||!n.feedMetaData[a[0]]||!n.feedMetaData[a[0]].full_feed&&0<n.feedMetaData[a[0]].data_types.filter(function(t){return t!=e.FeedDataTypes.STOCKS&&t!=e.FeedDataTypes.INDICES}).length;if(1==a.length&&n.options.feed&&n.options.feed==a[0]&&l)n.issuers=[],n.underlying=[],n.underlyingFeeds=[],n.underlyingFullName=[],n.getReferenceData(a[0],r);else{for(var c=0,d=r;c<d.length;c++){var u=d[c];n.addInstrument(u)}n.options.hasOwnProperty("selectedRow")&&!n.options.selectedInstrument&&i.length>n.options.selectedRow&&(n.initiallySelectedInstrument=i[n.options.selectedRow],n.selectedInstrument=n.initiallySelectedInstrument,n.rowClicked(n.selectedInstrument)),n.showProgressIndicator.set(!1)}},this.infront.chain(t.name,t.feed,i)},r.prototype.loadFeed=function(e){var t=this;this.showProgressIndicator.set(!0),this.clear();var n=this.getSyncFeedMetadata(e);n?(this.feedMetaData[n.feed]=n,this.feedDescription=n.description,n.data_types&&(this.handleItemTypes(n.data_types),n.full_feed&&!this.options.showFilters?this.getReferenceData(e):(this.requestsCount=0,this.fillIssuers(e,function(){t.showUnderlying.set(t.options.showUnderlyings),t.createUnderlyingDropDown(),t.options.showExpiries||t.options.showUnderlyings||t.options.showIssuers||t.createCustomElementsAfter(),t.updateUnderlyings(t.instrumentFilter.issuer,t.instrumentFilter.issuer?null:t.instrumentFilter.issuerLabel,function(){t.selectDefaultFilters()})}),this.setWidgetSubtitle(),this.showProgressIndicator.set(!1)))):this.showProgressIndicator.set(!1)},r.prototype.addExtraFieldsToInstrument=function(t,n){if(n[e.MWSConstants.issuer_full_name]){var i=n[e.MWSConstants.issuer_full_name];n[e.MWSConstants.issuer]&&n[e.MWSConstants.issuer]!=n[e.MWSConstants.issuer_full_name]&&(i=n[e.MWSConstants.issuer]+" - "+i),t[e.MWSConstants.issuer]=n[e.MWSConstants.issuer],this.addIssuer(t[e.MWSConstants.issuer],i)}else n[e.MWSConstants.issuer]&&(t[e.MWSConstants.issuer]=n[e.MWSConstants.issuer],this.addIssuer(t[e.MWSConstants.issuer],t[e.MWSConstants.issuer]));n[e.MWSConstants.under_ticker]&&n[e.MWSConstants.under_feed]&&(t.under_feed=n[e.MWSConstants.under_feed],t.under_ticker=n[e.MWSConstants.under_ticker],this.findUnderlying(t.under_ticker,t.under_feed)),n[e.MWSConstants.expiry_date]&&(t[e.MWSConstants.expiry_date]=n[e.MWSConstants.expiry_date])},r.prototype.addExpiryDate=function(e){this.visibleExpirydates.indexOf(e)<0&&this.visibleExpirydates.push(e)},r.prototype.fillIssuers=function(t,n){var i=this;if(this.options.issuer)this.instrumentFilter.issuerLabel=this.options.issuer,this.instrumentFilter.issuer=this.instrumentFilter.issuerLabel.substring(0,this.instrumentFilter.issuerLabel.indexOf(" - "))||this.instrumentFilter.issuerLabel,(r=new e.DataOptions).onData=function(t){i.instrumentFilter.issuer="",i.instrumentFilter.issuerLabel="";for(var r=0,a=t;r<a.length;r++){var s=a[r],o=s.IssuerFullName,l=s[e.MWSConstants.issuer];if(i.options.issuer==l||i.options.issuer==o||i.options.issuer==l+" - "+o){l&&(i.instrumentFilter.issuerLabel=l,i.instrumentFilter.issuer=l),o&&(l?i.instrumentFilter.issuerLabel+=" - "+o:(i.instrumentFilter.issuerLabel+=o,i.instrumentFilter.issuer=null));break}}n&&n()},r.onError=function(e,t){i.instrumentFilter.issuer=null,i.instrumentFilter.issuerLabel=null,n&&n(),IDS.DEBUG_ERROR_LOG_CALLBACK&&IDS.log(t)},this.infront.issuers(this.options.feed,void 0,r);else{if(!this.options.showIssuers)return void(n&&n());var r;(r=new e.DataOptions).onData=function(t){var r=t;i.issuers=[];for(var a=0,s=r;a<s.length;a++){var o=s[a];if(o.IssuerFullName){var l=o.IssuerFullName;o[e.MWSConstants.issuer]&&o[e.MWSConstants.issuer]!=o.IssuerFullName&&(l=o[e.MWSConstants.issuer]+" - "+l),i.issuers.push({name:o[e.MWSConstants.issuer],fullName:l})}else o[e.MWSConstants.issuer]&&i.issuers.push({name:o[e.MWSConstants.issuer],fullName:o[e.MWSConstants.issuer]})}if(0<i.issuers.length){if(i.sortList(i.issuers,"fullName"),i.setWidgetSubtitle(),i.options.issuersHasNone&&i.issuers.unshift({name:i.sNone,fullName:i.sNone}),i.options.issuersHasAll&&i.issuers.unshift({name:i.sAll,fullName:i.sAll}),i.options.preferredIssuers&&0<i.options.preferredIssuers.length&&0<i.issuers.length){for(var c=0,d=void 0,u=0;u<i.options.preferredIssuers.length&&!d;u++){var h=i.options.preferredIssuers[u];if("all"==(h=h.substring(0,h.indexOf(" - "))||h)||"none"==h)c="all"==h?0:1,d=!0;else for(var p=0;p<i.issuers.length;p++)if(i.issuers[p]&&(i.issuers[p].name==h||i.issuers[p].fullName==h)){c=p,d=!0;break}}i.instrumentFilter.issuerLabel=i.issuers[c].fullName,i.instrumentFilter.issuer=i.issuers[c].name}i.showIssuers.set(0<i.issuers.length),i.createIssuerDropDown()}n&&n()},r.onError=function(e,t){n&&n(),IDS.DEBUG_ERROR_LOG_CALLBACK&&IDS.log(t)},this.infront.issuers(this.options.feed,void 0,r)}},r.prototype.updateIssuers=function(e){!this.options.issuer&&this.options.showIssuers},r.prototype.fillUnderlyings=function(t,n,i){var r=this;if(this.options.showUnderlyings){var a=new e.DataOptions;a.onData=function(t){var n=t;r.underlying=[],r.underlyingFeeds=[],r.underlyingFullName=[];for(var i=0,a=n;i<a.length;i++){var s=a[i][e.MWSConstants.underlying];if(s&&s[e.MWSConstants.feed]&&s[e.MWSConstants.ticker]){r.underlying.push(s[e.MWSConstants.ticker]),r.underlyingFeeds.push(s[e.MWSConstants.feed]);var o=s[e.MWSConstants.ticker]+(s.descr?" - "+s.descr:"");r.underlyingFullName.push(o),r.options.preferredUnderlying&&r.options.preferredUnderlying==s[e.MWSConstants.ticker]&&(r.perfferedUnderlying=o)}}r.sortList(r.underlyingFullName),r.underlyingFullName.unshift(r.sNone),r.createUnderlyingDropDown(),r.options.showExpiries||r.createCustomElementsAfter(),r.selectDefaultFilters()},a.onError=function(e,t){r.selectDefaultFilters(),IDS.DEBUG_ERROR_LOG_CALLBACK&&IDS.log(t)},this.infront.underlyings(this.options.feed,n,i,a)}},r.prototype.updateUnderlyings=function(t,n,i){var r=this;if(void 0===i&&(i=null),this.options.showUnderlyings){var a=new e.DataOptions;a.onData=function(t){var n=t;r.underlying=[],r.underlyingFeeds=[],r.underlyingFullName=[],r.perfferedUnderlying=null;for(var a=0,s=n;a<s.length;a++){var o=s[a][e.MWSConstants.underlying];if(o&&o[e.MWSConstants.feed]&&o[e.MWSConstants.ticker]){r.underlying.push(o[e.MWSConstants.ticker]),r.underlyingFeeds.push(o[e.MWSConstants.feed]);var l=o[e.MWSConstants.ticker]+(o.descr?" - "+o.descr:"");r.underlyingFullName.push(l),r.perfferedUnderlying||(r.instrumentFilter.under_ticker&&r.instrumentFilter.under_ticker==o[e.MWSConstants.ticker]&&(r.perfferedUnderlying=l),r.options.preferredUnderlying&&r.options.preferredUnderlying==o[e.MWSConstants.ticker]&&(r.perfferedUnderlying=l))}}r.showUnderlying.set(!0),r.sortList(r.underlyingFullName),!r.perfferedUnderlying&&0<r.underlyingFullName.length&&(r.perfferedUnderlying=r.underlyingFullName[0]),r.options.underlyingsHasNone&&r.underlyingFullName.unshift(r.sNone),r.perfferedUnderlying||(r.perfferedUnderlying=r.sNone),r.underlyingDropDown.setList(r.underlyingFullName,r.perfferedUnderlying?[r.perfferedUnderlying]:void 0),r.instrumentFilter.under_ticker=null,r.instrumentFilter.under_feed=null,r.underlyingSelected(r.perfferedUnderlying),i&&i()},a.onError=function(e,t){r.underlyingSelected(null),i&&i(),IDS.DEBUG_ERROR_LOG_CALLBACK&&IDS.log(t)};var s=function(e){var t=e;return t==r.sAll?t=null:t==r.sNone&&(t=""),t};this.infront.underlyings(this.options.feed,s(t),s(n),a)}else i&&i()},r.prototype.getReferenceData=function(t,n){var i=this;if(t===this.cachedReferenceData.feed)this.preFilterInstruments(this.cachedReferenceData.data,n),this.showProgressIndicator.set(!1);else{var r=new e.ReferenceDataOptions;r.feedNumber=t,r.onError=function(e,t){i.showProgressIndicator.set(!1)},r.onData=function(r){i.clear(),i.cachedReferenceData.data=r[e.MWSConstants.instruments],i.cachedReferenceData.feed=t,i.preFilterInstruments(r[e.MWSConstants.instruments],n),i.showProgressIndicator.set(!1)},this.infront.referenceData(r)}},r.prototype.selectDefaultFilters=function(){this.requestsCount++,this.options.showUnderlyings&&this.options.showIssuers,this.requestsCount=0,this.showUnderlying.get()&&(this.perfferedUnderlying?this.underlyingSelected(this.perfferedUnderlying):(this.underlyingDropDown.setSelectedItem(this.underlyingFullName[1<this.underlyingFullName.length?1:0]),this.underlyingSelected(this.underlyingFullName[1<this.underlyingFullName.length?1:0]))),!this.showIssuers.get()&&!this.options.issuer||this.showUnderlying.get()?!this.options.showExpiries||this.options.showUnderlyings||this.options.showIssuers||this.createCustomElementsAfter():this.requestInstruments()},r.prototype.preFilterInstruments=function(t,n){var i=this,r=[];this.issuers=[],this.underlying=[],this.underlyingFeeds=[],this.underlyingFullName=[];var s=function(t){r.push(t);var n=new e.Instrument(t.feed,t.ticker);i.addExtraFieldsToInstrument(n,t),i.doAddInstrument(n),i.options.preferredUnderlying&&i.options.preferredUnderlying==t.ticker&&(i.perfferedUnderlying=t.ticker)};if(this.options.instrumentTypes||n)for(var o=0;o<t.length;o++){var l=!0;n&&!a(n,t[o])&&(l=!1),this.options.instrumentTypes&&this.options.instrumentTypes.indexOf(t[o][e.MWSConstants.instrument_type])<0&&(l=!1),l&&s(t[o])}else for(o=0;o<t.length;o++)s(t[o]);if(this.showUnderlying.get()&&0<this.underlying.length&&this.getUnderlyingFullName(),this.options.issuer&&(this.instrumentFilter.issuerLabel=this.options.issuer,this.instrumentFilter.issuer=this.instrumentFilter.issuerLabel.substring(0,this.instrumentFilter.issuerLabel.indexOf(" - "))||this.instrumentFilter.issuerLabel),this.showIssuers.get()&&0<this.issuers.length){if(this.sortList(this.issuers,"fullName"),!this.instrumentFilter.issuer)if(this.options.preferredIssuers&&0<this.options.preferredIssuers.length&&0<this.issuers.length){var c=0,d=void 0;for(o=0;o<this.options.preferredIssuers.length&&!d;o++){var u=this.options.preferredIssuers[o];u=u.substring(0,u.indexOf(" - "))||u;for(var h=0;h<this.issuers.length;h++)if(this.issuers[h]&&this.issuers[h].name==u){c=h,d=!0;break}}this.instrumentFilter.issuerLabel=this.issuers[c].fullName,this.instrumentFilter.issuer=this.issuers[c].name}else this.instrumentFilter.issuerLabel=this.issuers[0].fullName,this.instrumentFilter.issuer=this.issuers[0].name;this.createIssuerDropDown()}this.showExpiryDates.get()&&(this.createExpiryDatesDropDown(),this.updateVisibleExpiryDates=!0),this.options.showIssuers&&this.options.showUnderlyings&&this.options.showExpiries&&this.createCustomElementsAfter(),this.filterAndAddInstruments(),this.options.hasOwnProperty("selectedRow")&&!this.options.selectedInstrument&&r.length>this.options.selectedRow&&(this.initiallySelectedInstrument=r[this.options.selectedRow],this.selectedInstrument=this.initiallySelectedInstrument,this.rowClicked(this.selectedInstrument))},r.prototype.requestInstruments=function(){var t=this;this.showProgressIndicator.set(!0),this.clear(),delete this.instrumentFilter.expiry_date,this.visibleExpirydates=[];var n=new e.DataOptions;n.onData=function(n){for(var i=0,r=n;i<r.length;i++){var a=r[i];if(a.instrument&&a.instrument.feed&&a.instrument.ticker){var s=new e.Instrument(a.instrument.feed,a.instrument.ticker);t.addExtraFieldsToInstrument(s,a.instrument),t.options.showExpiries&&s.expiry_date&&t.addExpiryDate(s.expiry_date),t.doAddInstrument(s)}}t.showExpiryDates.set(0<t.visibleExpirydates.length),t.visibleExpirydates&&0<t.visibleExpirydates.length&&(t.createExpiryDatesDropDown(),t.updateVisibleExpiryDates=!1),t.createCustomElementsAfter(),t.filterAndAddInstruments(),t.showProgressIndicator.set(!1)},n.onError=function(e,n){t.showProgressIndicator.set(!1),IDS.log(n)};var i,r,a=!this.showIssuers.get()&&!this.options.issuer||this.instrumentFilter.issuer==this.sAll;this.instrumentFilter.issuer==this.sAll||this.instrumentFilter.issuer==this.sNone?r=i=null:(i=this.instrumentFilter.issuer)||(r=this.instrumentFilter.issuerLabel);var s=!this.showUnderlying.get()||this.instrumentFilter.under_ticker==this.sAll,o=this.instrumentFilter.under_ticker==this.sAll||this.instrumentFilter.under_ticker==this.sNone?null:this.instrumentFilter.under_ticker,l=o?this.instrumentFilter.under_feed:null;this.infront.feedInstruments(this.options.feed,l,o,i,r,null,null,s,a,n)},r.prototype.filterAndAddInstruments=function(){var t=this;this.clearVisible();var n=this.showExpiryDates.get()&&this.updateVisibleExpiryDates,i=null==this.options.showFilters;this.updateVisibleExpiryDates&&(delete this.instrumentFilter.expiry_date,this.visibleExpirydates=[]);var r=this.instruments.data.filter(function(r){for(var a in t.instrumentFilter)if("issuerLabel"!=a)if(InfrontUtil.isArray(t.instrumentFilter[a])){if(t.instrumentFilter[a].indexOf(r[a])<0)return!1}else if(i&&"chain"!=a&&t.instrumentFilter[a]&&r[a]!=t.instrumentFilter[a])return!1;return n&&r[e.MWSConstants.expiry_date]&&t.addExpiryDate(r[e.MWSConstants.expiry_date]),!0});n&&(this.updateVisibleExpiryDates=!1,this.sortList(this.visibleExpirydates),this.expiryDropDown&&this.expiryDropDown.setList(this.visibleExpirydates,this.visibleExpirydates)),this.subscribes.addInstruments(r),this.instrumentsToShow.replaceWith(r),this.columnManager.updateDefaultContent(),this.setWidgetSubtitle(),(!r||r.length<1)&&this.showProgressIndicator.set(!1)},r.prototype.setWidgetSubtitle=function(){var e="";if(""!=this.options.widgetTitle)for(var t in void 0===this.options.widgetTitle&&(e+=this.feedDescription),this.chainName&&(e+=0<e.length?" | "+this.chainName:this.chainName),this.instrumentFilter)if(this.instrumentFilter[t]){if("under_feed"==t||"issuer"==t||this.instrumentFilter[t]==this.sAll||this.instrumentFilter[t]==this.sNone)continue;var n=this.instrumentFilter[t];e+=0<e.length?" | "+n:n}this.widgetSubTitle.set(e)},r.prototype.getUnderlyingFullName=function(){var t=this;this.underlyingFullName=[];for(var n,i,r=[],a=function(a){r.push(s.underlying[a]),(i=new e.DataOptions).onData=function(i){var s;(s=InfrontUtil.isArray(i)?i[0][e.MWSConstants.instrument]:i[e.MWSConstants.instrument])&&(r[a]=s.ticker+" - "+s.full_name,t.options.preferredUnderlying&&t.options.preferredUnderlying==s.ticker&&(t.perfferedUnderlying=r[a])),clearInterval(n),n=setInterval(function(){clearInterval(n),t.underlyingFullName=[].concat(r),t.sortList(t.underlyingFullName),t.createUnderlyingDropDown(),t.options.showExpiries||t.createCustomElementsAfter()},2e3)},i.onError=function(e,t){IDS.DEBUG_ERROR_LOG_CALLBACK&&IDS.log(t)},s.infront.instrumentInfo(s.underlyingFeeds[a],s.underlying[a],i)},s=this,o=0;o<this.underlying.length;o++)a(o);this.underlyingFullName=[].concat(r),this.sortList(this.underlyingFullName),this.underlyingFullName&&0<this.underlyingFullName.length&&(this.instrumentFilter.under_ticker=this.underlyingFullName[0]),this.createUnderlyingDropDown(),this.options.showExpiries||this.createCustomElementsAfter(),this.setWidgetSubtitle()},r.prototype.sortList=function(e,t){return void 0===t&&(t=null),t?e.sort(function(e,n){return null==e&&null==n?0:null!=e&&null==n?1:null==e&&null!=n||e[t]<n[t]?-1:e[t]>n[t]?1:0}):e.sort(function(e,t){return e<t?-1:t<e?1:0}),e},r.prototype.findUnderlying=function(e,t){null!=this.options.showFilters||this.hasUnderlying(e)||(this.underlyingFeeds.push(t),this.underlying.push(e))},r.prototype.underlyingSelected=function(e,t){if(void 0===t&&(t=!0),e)if(e!=this.sNone){if(e=e.substring(0,e.indexOf(" - "))||e,this.instrumentFilter.under_ticker==e)return;var n=this.underlying.indexOf(e);0<=n&&n<this.underlying.length&&(this.instrumentFilter.under_ticker=this.underlying[n],this.instrumentFilter.under_feed=this.underlyingFeeds[n],this.updateVisibleExpiryDates=!0,this.options.showFilters?t&&this.requestInstruments():this.filterAndAddInstruments())}else this.instrumentFilter.under_ticker!=e&&(this.instrumentFilter.under_ticker=this.sNone,this.instrumentFilter.under_feed=0,this.updateVisibleExpiryDates=!0,t&&this.requestInstruments())},r.prototype.hasUnderlying=function(e,t){if(void 0===t&&(t=!1),0<this.underlying.length){for(var n=0;n<this.underlying.length;n++)if(this.underlying[n]==e)return!0;return!1}return t},r.prototype.addIssuer=function(e,t){null!=this.options.showFilters||this.hasIssuer(e)||this.issuers.push({name:e,fullName:t})},r.prototype.issuerSelected=function(e,t){var n=this;if(void 0===t&&(t=!0),e){for(var i=-1,r=!1,a=0;a<this.issuers.length;a++)if(this.issuers[a]&&this.issuers[a].fullName==e){i=a,r=!this.issuers[a].name;break}if(i<0)return;var s=this.issuers[i].name;if(s!=this.instrumentFilter.issuer||e!=this.instrumentFilter.issuerLabel)if(this.instrumentFilter.issuer=r?null:s,this.instrumentFilter.issuerLabel=e,this.updateVisibleExpiryDates=!0,this.options.showFilters){if(t){var o=s;if(r)this.updateUnderlyings(null,e,function(){return n.selectDefaultFilters()});else{switch(o=s){case this.sAll:o=null;break;case this.sNone:o=""}this.updateUnderlyings(o,null,function(){return n.selectDefaultFilters()})}}}else this.filterAndAddInstruments()}},r.prototype.hasIssuer=function(e,t){if(void 0===t&&(t=!1),0<this.issuers.length){for(var n=0;n<this.issuers.length;n++)if(this.issuers[n]&&this.issuers[n].name==e)return!0;return!1}return t},r.prototype.addCustomElement=function(e){return e.classList.add("cell-pull-right"),this.dropDownContainer.appendChild(e),e},r.prototype.addDropDown=function(t,n){var i=this;if(this.options.dropDownItemClick){var r,a=function(e){};t.onItemClicked&&(a=t.onItemClicked),t.id?r=t.id:t.title&&(r=t.title),t.onItemClicked=function(e){var t;InfrontUtil.isString(e)?t={name:e,id:r}:(t=e).id=r,a(e),i.options.dropDownItemClick(t)}}var s=document.createElement("div");s.className="cell-pull-right",this.dropDownContainer.appendChild(s),0<t.list.length&&(!t.preSelectedItems||t.preSelectedItems.length<1)&&(t.preSelectedItems=[t.list[0]]);var o=new e.DropDown(s,t,this.languageHandler,this);this.dropDowns.push(o);var l=e.BindingFactory.createInlineBinding(function(e){o.display(e)});return n.observe(l),o},r.prototype.createCustomElementsBefore=function(){if(this.options.customElementsBefore&&0<this.options.customElementsBefore.length)for(var e=0;e<this.options.customElementsBefore.length;e++)this.addCustomElement(this.options.customElementsBefore[e])},r.prototype.createCustomElementsAfter=function(){if(this.options.customElementsAfter&&0<this.options.customElementsAfter.length)for(var e=0;e<this.options.customElementsAfter.length;e++)this.addCustomElement(this.options.customElementsAfter[e])},r.prototype.createCustomDropDowns=function(){if(this.options.customDropDowns&&0<this.options.customDropDowns.length)for(var t=0;t<this.options.customDropDowns.length;t++){var n=new e.Observable(!0);this.showCustomDropDowns.push(n);var i=this.options.customDropDowns[t];i instanceof e.DropDownOptions&&(this.addDropDown(i,n),n.set(i.visible))}},r.prototype.showHideDropDown=function(e,t){if(this.options.customDropDowns&&0<this.options.customDropDowns.length)for(var n=0;n<this.options.customDropDowns.length;n++)this.options.customDropDowns[n]==e&&this.showCustomDropDowns.length>n&&this.showCustomDropDowns[n].set(t)},r.prototype.createIssuerDropDown=function(){var t=this;if(this.issuerDropDown)this.issuerDropDown.setList(this.issuers,[this.instrumentFilter.issuerLabel]);else{var n=new e.DropDownOptions;n.title=this.languageHandler.get(r.kLanguageKey,"issuersDropDownTitle"),n.list=this.issuers,n.preSelectedItems=[this.instrumentFilter.issuerLabel||this.sAll],n.closeOnClick=!0,n.sortAlphabetically=!1,n.itemPath="fullName",n.id="issuersDropDown",n.onItemClicked=function(e){t.issuerSelected(e)},this.issuerDropDown=this.addDropDown(n,this.showIssuers)}},r.prototype.createUnderlyingDropDown=function(){var t=this;if(this.underlyingDropDown)this.underlyingDropDown.setList(this.underlyingFullName,0<this.underlyingFullName.length?[this.underlyingFullName[0]]:[]);else{var n=new e.DropDownOptions;n.title=this.languageHandler.get(r.kLanguageKey,"underlyingDropDownTitle"),n.list=this.underlyingFullName,n.preSelectedItems=this.perfferedUnderlying?[this.perfferedUnderlying]:void 0,n.closeOnClick=!0,n.id="underlyingDropDown",n.onItemClicked=function(e){t.underlyingSelected(e)},this.underlyingDropDown=this.addDropDown(n,this.showUnderlying)}},r.prototype.expiryDateSelected=function(e){null==e||0==e.length?delete this.instrumentFilter.expiry_date:this.instrumentFilter.expiry_date=e,this.filterAndAddInstruments()},r.prototype.createExpiryDatesDropDown=function(){var t=this;if(this.expiryDropDown)this.expiryDropDown.setList(this.visibleExpirydates,this.visibleExpirydates);else{var n=new e.DropDownOptions;n.title=this.languageHandler.get(r.kLanguageKey,"expiryDateDropDownTitle"),n.list=this.visibleExpirydates,n.preSelectedItems=this.visibleExpirydates,n.multiSelect=!0,n.showToggleAll=!0,n.id="expiryDatesDropDown",n.onSelectedItemsChanged=function(e){e.length==t.visibleExpirydates.length?t.expiryDateSelected(null):t.expiryDateSelected(e)},this.expiryDropDown=this.addDropDown(n,this.showExpiryDates)}},r.prototype.getInstruments=function(){return this.instrumentsToShow.get()},r.prototype.getSelectedInstrument=function(){return this.selectedInstrument},r.prototype.loadFeedChains=function(){var t=this,n=new e.ChainsOptions;n.homeProvider=!0,this.options.types&&(n.types=this.options.types),n.tree=!0,n.onError=InfrontUtil.errorLogCallback,n.onData=function(e){t.chains.clear(),t.buildChainNodes(e)},this.infront.chains(this.options.feed,n)},r.prototype.nodesFromFlatChains=function(e){for(var t=[],n=0;n<e.length;n++)t.push({chain:e[n]});return t},r.prototype.buildChainNodes=function(t){var n=this,i=this.getStoredValue(r.kMyStoredChainKey)||this.options.defaultChain,a=0<t.length&&t[0].hasOwnProperty("description")?this.nodesFromFlatChains(t):t;if(this.selectInitChain(a,i)||this.selectInitChain(a,""),this.showChains.set(0<a.length&&this.options.showDropDowns),this.options.showDropDowns){var s=new e.DropDownOptions;s.itemLabelPropertyKeys=["label","description"],s.itemPath="chain",s.subNodeName=e.MWSConstants.nodes,s.title=this.options.chainButtonTitle||this.infrontUI.languageHandler.get("quoteList","chainsDropDownTitle"),s.sortAlphabetically=!0,s.id="chainsDropDown",s.onSortItems=function(t,n){return t.item&&t.item.hasOwnProperty("sortField")&&null!=t.item.sortField&&n.item&&n.item.hasOwnProperty("sortField")&&null!=n.item.sortField?e.CompareFunctions.compareNumberAsc(t.item.sortField,n.item.sortField):t.item&&t.item.hasOwnProperty("sortField")&&null!=t.item.sortField?e.CompareFunctions.compareStringsDesc(t.item.sortField,n.title):n.item&&n.item.hasOwnProperty("sortField")&&null!=n.item.sortField?e.CompareFunctions.compareStringsDesc(t.title,n.item.sortField):e.CompareFunctions.compareStringsDesc(t.title,n.title)},s.list=a,s.closeOnClick=!0,s.onItemClicked=function(e){n.chainSelected(e),n.store(r.kMyStoredChainKey,e.name)},s.preSelectedItems=[this.selectedChain],this.chainDropDown=this.addDropDown(s,this.showChains)}this.createCustomElementsAfter()},r.prototype.selectInitChain=function(e,t){for(var n=0;n<e.length;n++)if(e[n].hasOwnProperty("chain")){if(!t||t==e[n].chain.name)return this.chainSelected(e[n].chain),!0}else if(e[n].hasOwnProperty("nodes")&&this.selectInitChain(e[n].nodes,t))return!0;return!1},r.prototype.chainSelected=function(e){if(e!=this.selectedChain){this.clear(),this.showProgressIndicator.set(!0),(this.selectedChain=e).fullPath?this.selectedChainName.set(e.fullPath):this.selectedChainName.set(e.description),this.setWidgetSubtitle();var t=this.getSyncFeedMetadata(e.feed);t&&(this.feedMetaData[t.feed]=t).data_types&&this.handleItemTypes(t.data_types),this.loadChain(e)}},r.kMyStoredChainKey="chain",r.kLanguageKey="quoteList",r.kMySortingColumnKey="my-sorting-column",r.kDropDownToggleAllValues="dropDownToggleAllValues",r.kWarrants="WARRANTS",r.kOptions="OPTIONS",r.kBonds="BONDS",r.kFunds="FUNDS",r.replaceAlls=0,r.adds=0,r}(e.CommonListWidgetBase);function a(e,t){return InfrontUtil.arrayContains(e,function(e){return t.feed==e.feed&&t.ticker==e.ticker})}function s(t,n,i){return i==e.SortOrder.Desc?Date.parse(n)-Date.parse(t):Date.parse(t)-Date.parse(n)}e.QuoteListWidget=r}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.feed=null,t.types=null,t.defaultChain=null,t.enableSearch=!1,t.useChains=!0,t}return __extends(t,e),t}(e.QuoteListWidgetOptions);e.ChainViewerWidgetOptions=t}(Infront||(Infront={})),function(e){!function(t){var n,i;(i=n=t.ChartResolution||(t.ChartResolution={}))[i.TICKS=0]="TICKS",i[i.SECONDS=1]="SECONDS",i[i.MINUTES=2]="MINUTES",i[i.DAYS=3]="DAYS",i[i.WEEKS=4]="WEEKS",i[i.MONTHS=5]="MONTHS",i[i.AUTO=6]="AUTO";var r=function(){function e(){this.instrumentArray=[]}return Object.defineProperty(e.prototype,"visibleInstruments",{get:function(){var e=0;return this.instrumentArray.forEach(function(t){e+=t.hidden?0:1}),e},enumerable:!0,configurable:!0}),e.prototype.insturmentDataAtIndex=function(e){var t={};return this.instrumentArray.forEach(function(n){t[n.instrumentId]=n.resolutions[e].data}),t},e.prototype.setResolutions=function(e,t,n,i,r){this.instrumentArray.forEach(function(a){a.instrument==e&&a.setResolutions(t,n,i,r)})},e.prototype.addData=function(e,t,n){var i=null;this.instrumentArray.forEach(function(e){e.instrumentId==t&&(i=e)}),i.appendTrades(e,n)},e.prototype.indexOf=function(e){for(var t=0;t<this.instrumentArray.length;t++)if(this.instrumentArray[t].instrument==e)return t;return-1},e.prototype.shallowCheckIndexOf=function(e){for(var t=0;t<this.instrumentArray.length;t++)if(this.instrumentArray[t].instrument.feed==e.feed&&this.instrumentArray[t].instrument.ticker===e.ticker)return t;return-1},e}();t.ChartCache=r;var a=function(){function e(e,t,n,i){void 0===i&&(i=!1),this.last=e.last,this.high=e.high?e.high:e.last,this.low=e.low?e.low:e.last,this.open=e.open?e.open:e.last,this.isNewDay=e.isNewDay,this.calculateCompare(n),!i&&e.volume&&(this.volume=e.volume,e.turnover?this.turnover=e.turnover:this.turnover=e.volume*e.last),InfrontUtil.isNumber(t)?(this.time=new Date(t).toJSON(),this.timestamp=t):(this.time=t.toJSON(),this.timestamp=t.getTime())}return e.prototype.calculateCompare=function(e){this._compare=(this.last-e)/e*100},e}();t.ChartCachePoint=a;var s=function(){function e(){}return e.getFieldTypeDisplayName=function(t,n){switch(t){case e.last:return n.get("chart","close");case e.open:return n.get("columns","OPEN");case e.high:return n.get("columns","HIGH");case e.low:return n.get("columns","LOW");case e._compare:return n.get("chart","change");default:return n.get("chart","close")}},e.last="last",e.open="open",e.high="high",e.low="low",e._compare="_compare",e}();t.ChartFieldType=s;var o=function(){function t(){this.mainField=s.last,this.prevSelectedField=s.last}return t.prototype.getMainFieldAsString=function(){return this.mainField},t.prototype.getLastTimeStamp=function(){return this.lastTimeStamp},t.prototype.setLastTimeStamp=function(e){this.lastTimeStamp=e},t.prototype.setMainField=function(e,t){void 0===t&&(t=!1),this.prevSelectedField=e,t||(this.mainField=e)},t.prototype.setCompare=function(e){this.mainField=e?s._compare:this.prevSelectedField},t.prototype.setResolutions=function(t,i,r,a){var s=this;if(this.resolutions=[],this.tempStorage=[],i==e.Resolution.TICKS)this.basedOnTicks=!0,t==e.IntradayPeriod.TICK||t==e.IntradayPeriod.SECOND?this.resolutions.push(new c(n.TICKS,1),new c(n.SECONDS,1),new c(n.MINUTES,1)):(this.resolutions.push(new c(n.SECONDS,1),new c(n.MINUTES,1)),[2,3,5].forEach(function(e){s.resolutions.push(new c(n.MINUTES,e))}));else if(i==e.Resolution.MINUTES){this.basedOnTicks=!1;var o=[1,2,3,5,15,30,60];o.splice(o.indexOf(r),e.ChartWidgetConstants.kNumberOfResolutionsToStore).forEach(function(e){s.resolutions.push(new c(n.MINUTES,e))})}else this.basedOnTicks=!1,this.resolutions.push(new c(n.DAYS,1,a),new c(n.WEEKS,1,a),new c(n.MONTHS,1,a))},t.prototype.setData=function(e){var t=this,n=new c(this.resolutions[0].resolution,this.resolutions[0].stepSize);e.forEach(function(e){n.addMWSTick(e)}),this.basedOnTicks?this.resolutions[0]=n:(this.resolutions[0].baseRes=n,this.resolutions[0].setData());for(var i=1;i<this.resolutions.length;i++){var r=this.resolutions[i];r.baseRes=this.closestEligbleRes(i),r.setData()}0!=this.tempStorage.length&&(this.tempStorage.forEach(function(e){t.appendTrades(e)}),this.tempStorage=[])},t.prototype.appendTrades=function(e,t){if(0<e.length)if(0==this.resolutions[0].data.length)this.tempStorage.push(e);else{var i,r=[],a=void 0;i=this.resolutions[0].resolution==n.TICKS?(a=1,!0):(a=0,!1);for(var s=this.resolutions[a].data[this.resolutions[a].data.length-1].timestamp,o=this.resolutions[a].stepSizeMilliseconds,l=void 0,c=null,d=null,u=0;u<e.length;u++){var h=e[u],p=new Date(h.time),m=p.getTime();if(!(m<s-o)){var g=m-m%o+o;null==c?(d=this.resolutions[0].addMWSTick(h,i,p),c=g):d=g!=c?(r.push(d),c=g,this.resolutions[0].addMWSTick(h,i,p)):((l=this.resolutions[0].addMWSTick(h,i,p)).volume+=d.volume,l.turnover+=d.turnover,l)}}for(d&&r.push(d),u=0;u<r.length;u++)this.addMergedTickToResolutions(r[u],a);InfrontUtil.isFunction(t)&&t(this)}},t.prototype.addMergedTickToResolutions=function(e,t){if(e)for(;t<this.resolutions.length;t++){var n=this.resolutions[t],i=(e.timestamp-n.data[n.data.length-1].timestamp)/n.stepSizeMilliseconds;0<=i?n.addCacheTick(e):-1<i&&n.updateLastTick(e)}},t.prototype.closestEligbleRes=function(e){for(var t=e-1;0<=t;t--)if(this.resolutions[e].stepSizeMilliseconds%this.resolutions[t].stepSizeMilliseconds==0)return this.resolutions[t];return this.resolutions[0]},t}();function l(e){return 24*InfrontUtil.daysInMonth(e.getMonth(),e.getFullYear())*60*60*1e3}t.InstrumentData=o;var c=function(){function t(t,i,r){this.data=[],this.closeValue=null,this.hasCompareData=!1,this.latestLastValue=null,this.pointsShownInChart=0,this.selected=new e.Observable(!1),this.available=new e.Observable(!0),this.selectedAuto=!0,this.resolution=t,this.stepSize=i,this.realStartTime=r?r.getTime():0,this.languageHandler=new e.Language(new e.LanguageOptions);var a=1<i?"s":"";switch(t){case n.TICKS:this.stepSizeMilliseconds=i,this.label="TICK";break;case n.SECONDS:this.stepSizeMilliseconds=1e3*i,this.label=i+this.languageHandler.get("chartResolution","S")+a;break;case n.MINUTES:this.stepSizeMilliseconds=60*i*1e3,this.label=i+this.languageHandler.get("chartResolution","m")+a;break;case n.DAYS:this.stepSizeMilliseconds=24*i*60*60*1e3,this.label=i+this.languageHandler.get("chartResolution","D")+a;break;case n.WEEKS:this.stepSizeMilliseconds=7*i*24*60*60*1e3,this.label=i+this.languageHandler.get("chartResolution","W")+a;break;case n.MONTHS:this.stepSizeMilliseconds=void 0,this.label=i+this.languageHandler.get("chartResolution","M")+a;break;default:this.stepSizeMilliseconds=1e3*i,this.label=i+"x"}}return t.prototype.setData=function(){var e=this.baseRes.data;if(e&&0<e.length){if(this.closeValue=this.realStartTime?1/0:e[0].last,1<e.length)for(var t=0,n=e[e.length-1].timestamp,i=0;t<=n&&i<e.length;i++)for(this.realStartTime&&this.closeValue===1/0&&e[i].timestamp>this.realStartTime&&(this.closeValue=e[i].last),t=this.addCacheTick(e[i]),t+=this.stepSizeMilliseconds;i+1<e.length&&e[i+1].timestamp<t;i++)this.updateLastTick(e[i+1]);else this.addCacheTick(e[0]);InfrontUtil.isTimeStampSameDate(this.data[this.data.length-1].timestamp,Date.now())||(this.isYesterday=!0)}},t.prototype.updateLatestLast=function(){0<this.data.length&&(this.latestLastValue=this.data[this.data.length-1].last)},t.prototype.updateLastTick=function(e){var t=this.data[this.data.length-1];return e.last&&(e.high||(e.high=e.low=e.last),t.last=e.last,t.high=Math.max(e.high,t.high),t.low=Math.min(e.low,t.low),t._compare=(e.last-this.closeValue)/this.closeValue*100),e.volume&&(t.volume=t.volume?t.volume+e.volume:e.volume),e.turnover&&(t.turnover=t.turnover?t.turnover+e.turnover:e.turnover),t},t.prototype.getNewDayTimeStamp=function(e){if(this.resolution!=n.MONTHS)return this.resolution==n.WEEKS?0!=this.data.length?this.data[this.data.length-1].timestamp+this.stepSizeMilliseconds:e-e%this.stepSizeMilliseconds-432e6:e-e%this.stepSizeMilliseconds;var t=void 0;if(0==this.data.length){var i=new Date(e);i.setUTCHours(0,0,0),i.setDate(1),t=i.getTime()}else t=this.data[this.data.length-1].timestamp+this.stepSizeMilliseconds;return this.stepSizeMilliseconds=l(new Date(e)),t},t.prototype.addCacheTick=function(e){var t;if(e.isNewDay)t=this.getNewDayTimeStamp(e.timestamp);else if(e.isTick)for(t=this.data[this.data.length-1].timestamp+this.stepSizeMilliseconds;t<e.timestamp;t+=this.stepSizeMilliseconds)this.addFakeTick(t);else t=this.data[this.data.length-1].timestamp+this.stepSizeMilliseconds;return this.data.push(new a(e,t,this.closeValue,!1)),t},t.prototype.addFakeTick=function(e){this.resolution==n.MONTHS&&(this.stepSizeMilliseconds=l(new Date(e)));var t=this.data[this.data.length-1];this.data.push(new a(t,e,this.closeValue,!0))},t.prototype.addMWSTick=function(e,t,n){var i;if(void 0===t&&(t=!0),n)i=n;else if(e.time)i=new Date(e.time).getTime(),t&&1<this.data.length&&i<=this.data[this.data.length-1].timestamp&&(i=this.data[this.data.length-1].timestamp+1);else{var r=new Date(e.date);r.setUTCHours(0,0,0),i=r}this.closeValue||(this.closeValue=e.last);var s=new a(e,i,this.closeValue);return s.isTick=!0,0!=this.data.length&&!this.isYesterday&&InfrontUtil.isTimeStampSameDate(s.timestamp,this.data[this.data.length-1].timestamp)||(s.isNewDay=!0,this.isYesterday=!1),t&&this.data.push(s),s},t.prototype.getStepsAfterTimeStamp=function(e){for(var t=0,n=this.data.length-1;0<=n;n--){if(!(this.data[n].timestamp>e))return t;t++}},t.prototype.findFittingZoomFromTimeStamp=function(e,t,n){var i=0;if(t){for(var r=0;r<this.data.length;r++)if(this.data[r].timestamp>=e)return i=Math.min(this.data.length-1,r+n),this.data[i].timestamp}else for(r=this.data.length-1;0<=r;r--)if(this.data[r].timestamp<=e)return i=Math.max(0,r-n),this.data[i].timestamp},t}();t.ResolutionArray=c}(e.ChartCache||(e.ChartCache={}))}(Infront||(Infront={})),function(e){!function(t){var n=function(){function t(e,t){this.setPeriods(e),this.referenceInstrument=t}return t.prototype.setPeriods=function(e){this.periods=e,this.longestPeriod=Math.max.apply(null,e)},t.prototype.equals=function(t){return InfrontUtil.arraysAreEqual(this.periods,t.periods)&&(this.referenceInstrument==t.referenceInstrument||e.Instrument.isSameInstrument(this.referenceInstrument,t.referenceInstrument))},t}();t.IndicatorCalculationOptions=n;var i=function(){function t(t,n){this.priceType=0,this.firstValidTick=0,this.rebaseFactor=1,this.calcField=e.ChartCache.ChartFieldType.last,this.dataValues=t,this.options=n,this.resetValues()}return t.prototype.doRebase=function(e){return e*this.rebaseFactor},t.prototype.resetValues=function(){this.prevTempValues=[0,0,0,0,0,0,0,0,0,0],this.tempValues=[0,0,0,0,0,0,0,0,0,0],this.resetIndicatorChildValues(),this.firstValidTick=0},t.prototype.setData=function(e){this.dataValues=e,this.resetValues()},t.prototype.setReferenceData=function(e){},t.prototype.calcTick=function(e,t){this.saveOrLoadPreviousValues(e,t);var n=e-this.firstValidTick+1,i=[];return isNaN(this.dataValues[e][this.calcField])?this.firstValidTick=e+1:this.indicatorCalculation(e,n,i,t),i},t.prototype.saveOrLoadPreviousValues=function(e,t){if(t)for(var n=0;n<this.prevTempValues.length;n++)this.tempValues[n]=this.prevTempValues[n];else if(e>=this.dataValues.length-1)for(n=0;n<this.tempValues.length;n++)this.prevTempValues[n]=this.tempValues[n]},t.prototype.setDataIsCompare=function(t){this.calcField=t?e.ChartCache.ChartFieldType._compare:e.ChartCache.ChartFieldType.last},t.prototype.usesCompareData=function(){return this.calcField==e.ChartCache.ChartFieldType._compare},t}(),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){var r=this.tempValues[0];t>=this.options.longestPeriod?n[0]=r:n[0]=NaN},t}(t.baseIndicatorCalculation=i);t.template_Calculation=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){this.tempValues[0]=(this.dataValues[e].last-this.tempValues[0])*(2/(1+Math.min(this.options.periods[0],t)))+this.tempValues[0],this.tempValues[1]=(this.dataValues[e].last-this.tempValues[1])*(2/(1+Math.min(this.options.periods[1],t)))+this.tempValues[1];var r=this.doRebase(this.tempValues[1]-this.tempValues[0]);this.tempValues[9]=(r-this.tempValues[9])*(2/(1+Math.min(this.options.periods[2],t)))+this.tempValues[9],t>=this.options.longestPeriod?(n[0]=r,n[1]=this.tempValues[9],n[2]=r-this.tempValues[9]):(n[0]=NaN,n[1]=NaN,n[2]=NaN)},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.MACD_Calculation=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){this.Prev_K_Values=[],this.timespan1=0,this.timespan2=0,this.timespan3=0},t.prototype.calc_SO_K=function(e,t){for(var n=this.dataValues[e].high,i=this.dataValues[e].low,r=Math.max(this.firstValidTick,e-t);r<e;r++)n=Math.max(n,this.dataValues[r].high),i=Math.min(i,this.dataValues[r].low);var a=n-i;return 0!=a?(this.dataValues[e].last-i)/a*100:50},t.prototype.indicatorCalculation=function(e,t,n,i){t>this.options.periods[1]&&(this.tempValues[0]=this.tempValues[0]-this.calc_SO_K(e-this.timespan2,this.timespan1)),this.tempValues[0]=this.tempValues[0]+this.calc_SO_K(e,this.timespan1),this.timespan1=Math.min(this.options.periods[0],this.timespan1+1),this.timespan2=Math.min(this.options.periods[1],this.timespan2+1),this.tempValues[2]=this.doRebase(this.tempValues[0]/this.timespan2),t>this.options.periods[2]&&!i&&this.Prev_K_Values.shift(),this.timespan3=Math.min(this.options.periods[2],this.timespan3+1),i?this.Prev_K_Values[this.Prev_K_Values.length-1]=this.tempValues[2]:this.Prev_K_Values.push(this.tempValues[2]);for(var r=this.tempValues[1]=0,a=this.Prev_K_Values;r<a.length;r++){var s=a[r];this.tempValues[1]+=s}n[0]=this.tempValues[2],n[1]=this.doRebase(this.tempValues[1]/this.timespan3)},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.SO_Calculation=s;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){t>this.options.periods[0]&&(this.tempValues[0]-=this.dataValues[e-this.options.periods[0]][this.calcField]),this.tempValues[0]+=this.dataValues[e][this.calcField],t>=this.options.longestPeriod?n[0]=this.tempValues[0]/this.options.periods[0]:n[0]=NaN},t}(i);t.SMA_Calculation=o;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){this.tempValues[0]=(this.dataValues[e][this.calcField]-this.tempValues[0])*(2/(1+Math.min(this.options.periods[0],t)))+this.tempValues[0];var r=this.doRebase(this.tempValues[0]);t>=this.options.longestPeriod?n[0]=r:n[0]=NaN},t}(i);t.EMA_Calculation=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){this.maxDivisor=Math.floor((Math.pow(this.options.periods[0],2)+this.options.periods[0])/2)},t.prototype.indicatorCalculation=function(e,t,n,i){var r=Math.min(this.options.periods[0],t);if(t>this.options.periods[0]){this.tempValues[1]+=this.dataValues[e][this.calcField]*r-this.tempValues[0],t>this.options.periods[0]&&(this.tempValues[0]=this.tempValues[0]-this.dataValues[e-r][this.calcField]);var a=this.tempValues[1]/this.maxDivisor;a=this.doRebase(a),n[0]=a}else this.tempValues[1]+=r*this.dataValues[e][this.calcField],a=this.tempValues[1]/Math.floor((Math.pow(r,2)+r)/2),a=this.doRebase(a),n[0]=NaN;this.tempValues[0]=this.tempValues[0]+this.dataValues[e][this.calcField]},t}(i);t.WMA_Calculation=c;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.GetBBPrice=function(e,t){return this.dataValues[t][this.calcField]},t.prototype.indicatorCalculation=function(e,t,n,i){this.tempValues[0]=this.tempValues[0]+this.GetBBPrice(this.priceType,e),t>this.options.periods[0]&&(this.tempValues[0]=this.tempValues[0]-this.GetBBPrice(this.priceType,e-this.options.periods[0]));var r=this.tempValues[0]/this.options.periods[0],a=Math.min(this.options.periods[0],a+1),s=this.tempValues[1];if(t>=this.options.periods[0]){s=0;for(var o=t-this.options.periods[0];o<=e;o++)s+=Math.pow(r-this.GetBBPrice(this.priceType,o),2);s=this.options.periods[1]*Math.sqrt(s/this.options.periods[0]),n[0]=r,n[1]=r+s,n[2]=r-s}else n[0]=NaN,n[1]=NaN,n[2]=NaN},t}(i);t.BB_Calculation=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){var r,a;t>this.options.periods[1]&&(r=this.dataValues[e].last-this.dataValues[e-this.options.periods[1]].last,t>=this.options.periods[0]+this.options.periods[1]?t==this.options.periods[0]+this.options.periods[1]?(this.tempValues[3]=this.tempValues[1]/this.options.periods[0],this.tempValues[4]=this.tempValues[0]/this.options.periods[0]):(this.tempValues[3]=(this.tempValues[3]*(this.options.periods[0]-1)+Math.max(0,r))/this.options.periods[0],this.tempValues[4]=(this.tempValues[4]*(this.options.periods[0]-1)+Math.max(0,-r))/this.options.periods[0]):0<r?this.tempValues[1]+=r:this.tempValues[0]-=r),0!=this.tempValues[4]?(a=100-100/(1+this.tempValues[3]/this.tempValues[4]))<0?a=0:100<a&&(a=100):a=0==this.tempValues[3]?50:100,a=this.doRebase(a),t>=this.options.periods[0]+this.options.periods[1]?n[0]=a:n[0]=NaN},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.RSI_Calculation=u;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.trueRange=function(e){return Math.max(this.dataValues[e].high-this.dataValues[e].low,Math.abs(this.dataValues[e].high-this.dataValues[e-1].last),Math.abs(this.dataValues[e].low-this.dataValues[e-1].last))},t.prototype.indicatorCalculation=function(e,t,n,i){1==t?this.tempValues[0]+=(this.dataValues[e].high-this.dataValues[e].low)/this.options.periods[0]:t<=this.options.periods[0]?this.tempValues[0]+=this.trueRange(e)/this.options.periods[0]:t>this.options.periods[0]&&(this.tempValues[0]=(this.tempValues[0]*(this.options.periods[0]-1)+this.trueRange(e))/this.options.periods[0]),t>=this.options.longestPeriod?n[0]=this.tempValues[0]:n[0]=NaN},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.ATR_Calculation=h;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getVolume=function(e){return isNaN(this.dataValues[e].volume)?0:this.dataValues[e].volume},t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){if(new Date(this.dataValues[e].time)>new Date)return IDS.DEBUG_WIDGET_COMPLEXCHARTWIDGET&&IDS.log("ComplexChartWidget: Invalid date, got "+this.dataValues[e].time+" expected dates before or equal to "+(new Date).toISOString()),void(n[0]=NaN);this.tempValues[0]+=this.getVolume(e),t>=this.options.periods[0]?(0<=e-this.options.periods[0]&&(this.tempValues[0]-=this.getVolume(e-this.options.periods[0])),n[0]=this.tempValues[0]):n[0]=NaN,IDS.DEBUG_WIDGET_COMPLEXCHARTWIDGET&&IDS.log("ComplexChartWidget: tick: "+e+", periodTick: "+t+", volume: "+this.getVolume(e)+", out: "+n[0]+", time: "+this.dataValues[e].time)},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.Volume_Calculation=p;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){this.tempValues[1]=0===e?(this.tempValues[0]=isNaN(this.dataValues[e].high)?this.dataValues[e].last:this.dataValues[e].high,isNaN(this.dataValues[e].low)?this.dataValues[e].last:this.dataValues[e].low):(this.tempValues[0]=Math.max(this.tempValues[0],isNaN(this.dataValues[e].high)?this.dataValues[e].last:this.dataValues[e].high),Math.min(this.tempValues[1],isNaN(this.dataValues[e].low)?this.dataValues[e].last:this.dataValues[e].low)),t>=this.options.periods[0]?(n[0]=this.tempValues[0]-this.tempValues[1],this.tempValues[0]=-1/0,this.tempValues[1]=1/0):n[0]=NaN},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.HI_LO_Calculation=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){},t.prototype.indicatorCalculation=function(e,t,n,i){if((0==e||this.dataValues[e].isNewDay)&&(this.tempValues[0]=0,(this.tempValues[1]=0)==e&&(this.tempValues[2]=this.dataValues[e].turnover/this.dataValues[e].volume)),0<this.dataValues[e].volume&&(this.tempValues[0]+=this.dataValues[e].volume,this.tempValues[1]+=this.dataValues[e].turnover),0<this.tempValues[0]){var r=this.tempValues[1]/this.tempValues[0];this.usesCompareData()&&(r=(r-this.tempValues[2])/this.tempValues[2]*100),n[0]=r}else n[0]=NaN},t}(i);t.VWAP_Calculation=g;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timespan=0,t}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){this.timespan=0},t.prototype.indicatorCalculation=function(e,t,n,i){for(var r=0,a=0,s=Math.max(1,e-this.timespan),o=s;o<=e;o++)0!==(l=this.dataValues[o-1].last)&&(a+=Math.log(this.dataValues[o].last/l));for(a/=Math.max(this.timespan,1),o=s;o<=e;o++){var l;0!==(l=this.dataValues[o-1].last)&&(r+=Math.pow(Math.log(this.dataValues[o].last/l)-a,2))}this.timespan=Math.min(this.options.periods[0],this.timespan+1),r=this.doRebase(Math.max(Math.min(100*Math.sqrt(r/this.timespan*252),500),.01)),t>=this.options.periods[0]?n[0]=r:n[0]=NaN},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.HV_Calculation=f;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timespan=0,t}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){this.timespan=0},t.prototype.indicatorCalculation=function(e,t,n,i){if(t>this.options.periods[0]&&(this.tempValues[0]=this.tempValues[0]-this.dataValues[e-this.options.periods[0]].last),this.tempValues[0]=this.tempValues[0]+this.dataValues[e].last,this.timespan=Math.min(this.options.periods[0],this.timespan+1),t>=this.options.periods[0]){for(var r=this.tempValues[0]/this.timespan,a=0,s=t-this.timespan;s<=e;s++)a+=Math.pow(r-this.dataValues[s].last,2);a=this.doRebase(Math.sqrt(a/this.timespan)),n[0]=a}else n[0]=NaN},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.SD_Calculation=v;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timespan1=0,t.timespan2=0,t}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){this.timespan1=0,this.timespan2=0},t.prototype.indicatorCalculation=function(e,t,n,i){var r,a,s,o,l,c=Math.max(0,e-1),d=0,u=0,h=0,p=0,m=0,g=0;for(t>=this.options.periods[0]&&(this.tempValues[0]=this.tempValues[0]-this.dataValues[e-this.timespan1].high,this.tempValues[1]=this.tempValues[1]-this.dataValues[e-this.timespan1].low),this.tempValues[0]=this.tempValues[0]+this.dataValues[e].high,this.tempValues[1]=this.tempValues[1]+this.dataValues[e].low,o=this.tempValues[0]/Math.max(this.timespan1,1),l=this.tempValues[1]/Math.max(this.timespan1,1),r=e-this.timespan1;r<=e;r++)m+=Math.pow(o-this.dataValues[r].high,2),g+=Math.pow(l-this.dataValues[r].low,2);if(m=Math.sqrt(m/this.timespan1),g=Math.sqrt(g/this.timespan1),0==this.tempValues[0]&&0==this.tempValues[2]&&0==this.tempValues[1]&&0==this.tempValues[3])for(r=Math.max(this.firstValidTick+1,e-this.timespan2);r<=e;r++)this.dataValues[r].high>this.dataValues[r-1].high&&(d+=m),this.dataValues[r].high<this.dataValues[r-1].high&&(u+=m),this.dataValues[r].low>this.dataValues[r-1].low&&(h+=g),this.dataValues[r].low<this.dataValues[r-1].low&&(p+=g),this.tempValues[0]=d/this.options.periods[1],this.tempValues[2]=u/this.options.periods[1],this.tempValues[1]=h/this.options.periods[1],this.tempValues[3]=p/this.options.periods[1],a=50,this.tempValues[0]!==this.tempValues[2]&&(a=100*this.tempValues[0]/(this.tempValues[0]+this.tempValues[2])),s=50,this.tempValues[1]!==this.tempValues[3]&&(s=100*this.tempValues[1]/(this.tempValues[1]+this.tempValues[3]));else this.dataValues[e].high>this.dataValues[c].high&&(d=m),this.dataValues[e].high<this.dataValues[c].high&&(u=m),this.dataValues[e].low>this.dataValues[c].low&&(h=g),this.dataValues[e].low<this.dataValues[c].low&&(p=g),this.tempValues[0]=this.tempValues[0]+1/this.options.periods[1]*(d-this.tempValues[0]),this.tempValues[2]=this.tempValues[2]+1/this.options.periods[1]*(u-this.tempValues[2]),a=0,this.tempValues[0]+this.tempValues[2]!==0&&(a=100*this.tempValues[0]/(this.tempValues[0]+this.tempValues[2])),this.tempValues[1]=this.tempValues[1]+1/this.options.periods[1]*(h-this.tempValues[1]),this.tempValues[3]=this.tempValues[3]+1/this.options.periods[1]*(p-this.tempValues[3]),s=0,this.tempValues[1]+this.tempValues[3]!==0&&(s=100*this.tempValues[1]/(this.tempValues[1]+this.tempValues[3]));this.timespan1=Math.min(this.options.periods[0],this.timespan1+1),this.timespan2=Math.min(this.options.periods[1],this.timespan2+1);var f=this.doRebase((a+s)/2);t>Math.max(this.options.periods[0],this.options.periods[1])?n[0]=f:n[0]=NaN},t.prototype.setDataIsCompare=function(e){this.calcField="last"},t}(i);t.RVI_Calculation=y;var b=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;return r.timespan=0,r.refDataValues=[],r.refDataValues=n,r}return __extends(t,e),t.prototype.resetIndicatorChildValues=function(){this.timespan=0},t.prototype.setReferenceData=function(e){this.refDataValues=e,this.resetValues()},t.prototype.priceChange=function(e){return this.dataValues[e].last/this.dataValues[Math.max(e-1,0)].last-1},t.prototype.refChange=function(e){return this.refDataValues[e].last/this.refDataValues[Math.max(e-1,0)].last-1},t.prototype.indicatorCalculation=function(e,t,n,i){if(this.refDataValues&&this.refDataValues[e])if(t>this.options.periods[0]&&(this.tempValues[0]-=this.priceChange(e-this.options.periods[0]),this.tempValues[1]-=this.refChange(e-this.options.periods[0])),this.tempValues[0]+=this.priceChange(e),this.tempValues[1]+=this.refChange(e),this.timespan=Math.min(this.options.periods[0],this.timespan+1),t>=this.options.periods[0]){for(var r=this.tempValues[0]/this.timespan,a=this.tempValues[1]/this.timespan,s=0,o=0,l=t-this.timespan;l<t;l++){var c=this.priceChange(l)-r,d=this.refChange(l)-a;s+=c*d,o+=Math.pow(d,2)}n[0]=s/o}else n[0]=NaN;else n[0]=NaN},t}(i);t.Beta_Calculation=b}(e.Indicators||(e.Indicators={}))}(Infront||(Infront={})),function(e){!function(t){var n,i;(i=n=t.IndicatorTypes||(t.IndicatorTypes={})).MACD="MACD",i.STOCHASTIC="STOCHASTIC",i.SIMPLE_MOVING_AVG="SIMPLE_MOVING_AVG",i.EXPONENTIAL_MOVING_AVG="EXPONENTIAL_MOVING_AVG",i.WEIGHTED_MOVING_AVG="WEIGHTED_MOVING_AVG",i.BOLLINGER_BANDS="BOLLINGER_BANDS",i.RELATIVE_STRENGTH_INDEX="RELATIVE_STRENGTH_INDEX",i.AVERAGE_TRUE_RANGE="AVERAGE_TRUE_RANGE",i.VOLUME="VOLUME",i.VOLUME_UNDERLAY="VOLUME_UNDERLAY",i.HIGH_LOW="HIGH_LOW",i.VOLUME_WEIGHTED_AVERAGE_PRICE="VOLUME_WEIGHTED_AVERAGE_PRICE",i.HISTORICAL_VOLATILITY="HISTORICAL_VOLATILITY",i.STANDARD_DEVIATION="STANDARD_DEVIATION",i.RELATIVE_VOLATILITY_INDEX="RELATIVE_VOLATILITY_INDEX",i.BETA="BETA";var r=function(){function e(e,t){if(this.lastY=NaN,"string"==typeof e.yAxis){var i=e.yAxis.split("|")[1];e.colorIndex=Object.keys(n).indexOf(i)}this.highChartSeries=t.addSeries(e,!1)}return e.prototype.addPoint=function(e,t,n){this.highChartSeries.addPoint([e,t],!1,n.shift),this.lastY=t},e.prototype.updatePoint=function(e,t){this.highChartSeries.points[this.highChartSeries.points.length-1]&&this.highChartSeries.points[this.highChartSeries.points.length-1].update(e,!1),this.lastY=e},e.prototype.clear=function(){this.highChartSeries.setData([],!1),this.lastY=NaN},e.prototype.removeLines=function(){this.highChartSeries.remove()},e.prototype.getColor=function(){var e,t=this.highChartSeries.data[this.highChartSeries.data.length-1];return t&&(void 0!==t.plotClose?e="none"!=getComputedStyle(t.graphic.element).fill?getComputedStyle(t.graphic.element).fill:getComputedStyle(t.graphic.element).stroke:this.highChartSeries.graph&&(e=getComputedStyle(this.highChartSeries.graph.element).stroke)),e},e.prototype.setColor=function(e){this.highChartSeries&&(this.highChartSeries.graph?(this.previousSetColorClass&&this.highChartSeries.graph.parentGroup.removeClass(this.previousSetColorClass),this.highChartSeries.graph.parentGroup.addClass(e),this.previousSetColorClass=e):this.highChartSeries.options.className=this.highChartSeries.options.className+" "+e),this.highChartSeries.redraw()},e}();t.LineInfo=r;var a=function(e){this.shift=!1,this.shift=e};t.IndicatorGraphOptions=a;t.IndicatorAxisOptions=function(e,t,n){this.lineWidth=0,this.title={text:null},this.labels={enabled:!1},this.id=e,this.height=t.toString()+"%",this.top=(100-n-t).toString()+"%"};var s=function(){function e(e,t,n,i){this.customColorClasses=t?(this.type=e,this.axID=t,this.prds=n,i):(this.type=e.indicatorType,this.axID=e.axisID,this.prds=e.calcOptions.periods,e.colorClassList)}return e.prototype.createCalcOptionsObject=function(){return new t.IndicatorCalculationOptions(this.prds)},e.prototype.toString=function(){return JSON.stringify(this)},e}(),o=function(){function e(e,t,n,i,r){this.indicatorOptions=new a,this.indicators=[],this.chart=e,this.labelManager=t,this.axisChangeCallback=i,this.editCallback=r,this.languageHandler=n}return e.prototype.addIndicator=function(e,t,i,r){var a;switch(e){case n.MACD:a=new c(this.indicators.length,t,this,i,r);break;case n.STOCHASTIC:a=new d(this.indicators.length,t,this,i,r);break;case n.SIMPLE_MOVING_AVG:a=new u(this.indicators.length,t,this,i,r);break;case n.WEIGHTED_MOVING_AVG:a=new p(this.indicators.length,t,this,i,r);break;case n.EXPONENTIAL_MOVING_AVG:a=new h(this.indicators.length,t,this,i,r);break;case n.RELATIVE_STRENGTH_INDEX:a=new g(this.indicators.length,t,this,i,r);break;case n.AVERAGE_TRUE_RANGE:a=new f(this.indicators.length,t,this,i,r);break;case n.BOLLINGER_BANDS:a=new m(this.indicators.length,t,this,i,r);break;case n.HIGH_LOW:a=new b(this.indicators.length,t,this,i,r);break;case n.HISTORICAL_VOLATILITY:a=new S(this.indicators.length,t,this,i,r);break;case n.RELATIVE_VOLATILITY_INDEX:a=new I(this.indicators.length,t,this,i,r);break;case n.STANDARD_DEVIATION:a=new C(this.indicators.length,t,this,i,r);break;case n.VOLUME_UNDERLAY:a=new y(this.indicators.length,t,this,i,r);break;case n.VOLUME:a=new v(this.indicators.length,t,this,i,r);break;case n.VOLUME_WEIGHTED_AVERAGE_PRICE:a=new T(this.indicators.length,t,this,i,r);break;case n.BETA:a=new _(this.indicators.length,t,this,i,r);break;default:a=null}return a&&this.indicators.push(a),a},e.prototype.removeIndicator=function(e){var t;e&&(t=e.removeLines(),this.labelManager.removeLabels(e.indicatorID)),delete this.indicators[this.indicators.indexOf(e)],this.axisChangeCallback(t,!0)},e.prototype.getStorageString=function(){var e=[];return this.indicators.forEach(function(t){var n=new s(t);e.push(n.toString())}),JSON.stringify(e)},e.prototype.loadFromStorage=function(e,t){this.loadingFromStorage=!0;for(var n=0,i=0,r=JSON.parse(e);i<r.length;i++){var a=r[i];try{var o=JSON.parse(a);if(this.chart.get(o.axID)){var l=new s(o.type,o.axID,o.prds,o.customColorClasses),c=l.createCalcOptionsObject();this.addIndicator(l.type,l.axID,c,l.customColorClasses),n=Math.max(n,c.longestPeriod)}}catch(e){InfrontUtil.errorLog("Unable to add stored indicator",o)}}this.loadingFromStorage=!1,n&&this.periodChangedCallBack&&this.periodChangedCallBack(n)},e.prototype.pointAdded=function(e){var t=e||this.dataValues.length-1;this.indicators.forEach(function(e){e.addPoint(t)})},e.prototype.updateLastPoint=function(){this.indicators.forEach(function(e){e.updateLastPoint()})},e.prototype.setIndicatorsData=function(e,t){void 0===t&&(t=!1),this.dataValues==e&&this.dataIsCompare==t||(this.dataValues=e,this.dataIsCompare=t,this.indicators.forEach(function(t){t.setData(e)}))},e.prototype.setReferenceData=function(e){this.referenceData=e,this.indicators.forEach(function(t){t.setReferenceData(e)})},e.prototype.clear=function(){for(var e=0,t=this.indicators;e<t.length;e++){var n=t[e];this.removeIndicator(n)}},e.prototype.showPeriodEdit=function(e,t){var n,i=this,r=[],a=InfrontUtil.arrayDeepCopy(t.calcOptions.periods),s=[];e.addHeader(t.getIndicatorName());for(var o=t.getAdjustableCalcOptions(),l=t.getPeriodNames(),c=0;c<o.length;c++){var d=o[c],u=document.createElement("div");u.className="cell-chart__edit-box__period-element",e.appendChild(u);var h=document.createElement("span");h.className="cell-chart__edit-box__period-element__name  cell-chart__edit-box__period-element__name--input-label",h.innerHTML=l[c],u.appendChild(h);var p=r[d]=document.createElement("input");p.type="number",p.className="cell-input  cell-chart__edit-box__period-element__value",p.value=d.toString(),u.appendChild(p)}for(var m=function(r){var a=t.lineinfo[r],o=a.getColor(),l=t.getLineNames();if(o){s[r]=void 0;var c=document.createElement("div");c.className="cell-chart__edit-box__period-element",e.appendChild(c);var d=document.createElement("span");d.className="cell-chart__edit-box__period-element__name",d.innerHTML=l[r],c.appendChild(d);var u=document.createElement("div");u.className="cell-chart__edit-box__color_box",u.style.backgroundColor=o,c.appendChild(u);var h=function(e){return InfrontUtil.setZeroTimeout(function(){n=!0,s[r]=e,a.setColor(e),i.chart.redraw(),u.style.backgroundColor=a.getColor(),t.labels.update()})};u.onclick=function(){!function(e,t,n){if(2<t.childElementCount)t.removeChild(t.lastChild),e.positionCheck();else{var i=document.createElement("table");i.className="cell-chart__edit-box__color_table";for(var r=0,a=[["cell-chart-indicator-custom--color-1","cell-chart-indicator-custom--color-2","cell-chart-indicator-custom--color-3","cell-chart-indicator-custom--color-4","cell-chart-indicator-custom--color-5","cell-chart-indicator-custom--color-6"],["cell-chart-indicator-custom--color-12","cell-chart-indicator-custom--color-11","cell-chart-indicator-custom--color-10","cell-chart-indicator-custom--color-9","cell-chart-indicator-custom--color-8","cell-chart-indicator-custom--color-7"],["cell-chart-indicator-custom--color-white","cell-chart-indicator-custom--color-black"]];r<a.length;r++)for(var s=a[r],o=i.insertRow(-1),l=function(t){var r=o.insertCell(-1),a=document.createElement("div");a.className="cell-chart-indicator-custom  "+t,a.onclick=function(r){n(t),e.positionCheck(),i.parentElement.removeChild(i),r.stopPropagation()},r.appendChild(a)},c=0,d=s;c<d.length;c++){l(d[c])}t.appendChild(i),e.positionCheck()}}(e,c,h)}}},g=0;g<t.lineinfo.length;g++)m(g);var f=document.createElement("button");f.onclick=function(){i.removeIndicator(t),e.remove()},f.className="cell-button  cell-button--cancel",f.innerHTML=this.languageHandler.get("alert","delete"),e.appendChild(f);var v=document.createElement("button");v.className="cell-button  cell-button--confirm",v.innerHTML="Ok",v.onclick=function(){for(var o=0,l=0,c=t.getAdjustableCalcOptions();l<c.length;l++){var d=c[l];a[o]=parseInt(r[d].value),o++}if(!InfrontUtil.arraysAreEqual(a,t.calcOptions.periods)||n){if(n&&(t.colorClassList?t.colorClassList=InfrontUtil.mergeRecursive(t.colorClassList,s):t.colorClassList=s),!InfrontUtil.arraysAreEqual(a,t.calcOptions.periods)){t.calcOptions.setPeriods(a),t.setData(i.dataValues),i.labelManager.removeLabels(t.indicatorID),t.setID();for(var u=0,h=t.lineinfo;u<h.length;u++)h[u].highChartSeries.update({id:t.indicatorID+":0"});t.setColors(t.colorClassList),t.addLabels(),i.chart.redraw(),t.labels.update()}i.editCallback()}i.periodChangedCallBack&&i.periodChangedCallBack(t.calcOptions.longestPeriod),e.remove()},e.appendChild(v)},e}();t.IndicatorManager=o;var l=function(){function e(e,t,n,i,r,a){this.lineinfo=[],this.manager=i,this.index=e,this.indicatorType=t,this.graphOptions=i.indicatorOptions,this.axisID=n,this.labelManager=i.labelManager;var s=this.getDefaultCalcOptions();r&&InfrontUtil.mergeRecursive(s,r,!1),this.constructCalcObject(s),this.calcOptions=s,this.setID(),this.constructLines(i.chart),this.setData(i.dataValues),this.setReferenceData(i.referenceData),this.setColors(a),this.addLabels()}return e.prototype.removeLines=function(){return this.lineinfo.forEach(function(e){e.removeLines()}),this.lineinfo=[],this.axisID},e.prototype.addPoint=function(e){var t=this.dataValues[e];if(t)for(var n=this.calcObject.calcTick(e),i=0;i<n.length;i++)n[i]&&!isNaN(n[i])&&this.lineinfo[i].addPoint(t.timestamp,n[i],this.graphOptions)},e.getAxisHeight=function(){return 15},e.prototype.updateLastPoint=function(){for(var e=this.calcObject.calcTick(this.dataValues.length-1,!0),t=0;t<e.length;t++)isNaN(e[t])||this.lineinfo[t].updatePoint(e[t],this.graphOptions);this.labels&&this.labels.update()},e.prototype.setData=function(e){if(this.dataValues&&this.lineinfo.forEach(function(e){e.clear()}),this.dataValues=e,this.calcObject.setDataIsCompare(this.manager.dataIsCompare),this.calcObject.setData(e),e)for(var t=0;t<e.length;t++)this.addPoint(t);this.labels&&(this.labels.updateIsCompared(this.calcObject.usesCompareData()),this.labels.update())},e.prototype.setReferenceData=function(e){},e.prototype.addLabels=function(){var e=this,t=this.lineinfo[0].highChartSeries;this.labels=this.labelManager.addIndicatorLabels(t,this.indicatorID,function(t){t?e.manager.showPeriodEdit(t,e):e.manager.removeIndicator(e)},this.calcObject.usesCompareData())},e.prototype.setColors=function(e){for(var t=0;t<this.lineinfo.length&&e;t++)e[t]&&this.lineinfo[t].setColor(e[t]);this.colorClassList=e},e.prototype.setID=function(){for(var e="",t=0;t<this.calcOptions.periods.length;t++){var n=this.calcOptions.periods[t];e+=0==t?n.toString():", "+n}this.indicatorID=this.index+"|"+this.getIndicatorNameShort()+("1"==e?"":" "+e)},e.prototype.getAdjustableCalcOptions=function(){return this.calcOptions.periods},e.prototype.getPeriodNames=function(){return[this.manager.languageHandler.get("chartIndicatores","period")]},e.prototype.getLineNames=function(){return[this.getIndicatorNameShort()]},e}(),c=function(e){function i(t,i,r,a,s){return e.call(this,t,n.MACD,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([26,12,9])},i.prototype.constructCalcObject=function(e){this.calcObject=new t.MACD_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","MACD")+"1",id:this.indicatorID+":0",className:"cell-chart-default-series--macd1",type:"line",yAxis:this.axisID},e)),this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","MACD")+"2",id:this.indicatorID+":1",className:"cell-chart-default-series--macd2",type:"line",yAxis:this.axisID},e)),this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","MACD")+"3",id:this.indicatorID+":2",className:"cell-chart-default-series--macd-column",type:"column",yAxis:this.axisID},e))},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","MACD")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","MACD_full_name")},i.prototype.getPeriodNames=function(){return[this.manager.languageHandler.get("chartIndicatores","firstEMAperiod"),this.manager.languageHandler.get("chartIndicatores","secondEMAperiod"),this.manager.languageHandler.get("chartIndicatores","signalPeriod")]},i.prototype.getLineNames=function(){return[this.manager.languageHandler.get("chartIndicatores","MACD"),this.manager.languageHandler.get("chartIndicatores","macdSignal"),this.manager.languageHandler.get("chartIndicatores","macdHistogram")]},i}(t.ChartIndicator=l),d=function(e){function i(t,i,r,a,s){return e.call(this,t,n.STOCHASTIC,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([5,3,3])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","SO")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","stochasticOscillator")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.SO_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","SO")+"1",id:this.indicatorID+":0",className:"cell-chart-default-series--so1",type:"line",yAxis:this.axisID},e)),this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","SO")+"2",id:this.indicatorID+":1",className:"cell-chart-default-series--so2",type:"line",yAxis:this.axisID},e))},i.prototype.getPeriodNames=function(){return[this.manager.languageHandler.get("chartIndicatores","periodForK"),this.manager.languageHandler.get("chartIndicatores","pkSlowing"),this.manager.languageHandler.get("chartIndicatores","periodForD")]},i.prototype.getLineNames=function(){return[this.manager.languageHandler.get("chartIndicatores","psKO"),this.manager.languageHandler.get("chartIndicatores","pdMA")]},i}(l),u=function(e){function i(t,i,r,a,s){return e.call(this,t,n.SIMPLE_MOVING_AVG,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([14])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","SMA")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","simpleMovingAverage")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.SMA_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","SMA"),id:this.indicatorID+":0",className:"cell-chart-default-series--sma",type:"line",yAxis:this.axisID},e))},i}(l),h=function(e){function i(t,i,r,a,s){return e.call(this,t,n.EXPONENTIAL_MOVING_AVG,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([14])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","EMA")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","exponentialMovingAverage")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.EMA_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","EMA"),id:this.indicatorID+":0",className:"cell-chart-default-series--ema",type:"line",yAxis:this.axisID},e))},i}(l),p=function(e){function i(t,i,r,a,s){return e.call(this,t,n.WEIGHTED_MOVING_AVG,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([14])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","WMA")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","weightedMovingAverage")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.WMA_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","WMA"),id:this.indicatorID+":0",className:"cell-chart-default-series--wma",type:"line",yAxis:this.axisID},e))},i}(l),m=function(e){function i(t,i,r,a,s){return e.call(this,t,n.BOLLINGER_BANDS,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([20,2])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","BB")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","boolingerBands")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.BB_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","BB")+"2",id:this.indicatorID+":1",className:"cell-chart-default-series--bb2",type:"line",yAxis:this.axisID},e)),this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","BB")+"1",id:this.indicatorID+":0",className:"cell-chart-default-series--bb1",type:"line",yAxis:this.axisID},e)),this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","BB")+"3",id:this.indicatorID+":2",className:"cell-chart-default-series--bb3",type:"line",yAxis:this.axisID},e))},i.prototype.addLabels=function(){var e=this,t=[];this.lineinfo.forEach(function(e){t.push(e.highChartSeries)}),this.labels=this.labelManager.addIndicatorLabels(t,this.indicatorID,function(t){t?e.manager.showPeriodEdit(t,e):e.manager.removeIndicator(e)},this.calcObject.usesCompareData())},i.prototype.getPeriodNames=function(){return[this.manager.languageHandler.get("chartIndicatores","period"),this.manager.languageHandler.get("chartIndicatores","standardDeviation")]},i.prototype.getLineNames=function(){return[this.manager.languageHandler.get("chartIndicatores","midLine"),this.manager.languageHandler.get("chartIndicatores","upperLine"),this.manager.languageHandler.get("chartIndicatores","lowerLine")]},i}(l),g=function(e){function i(t,i,r,a,s){return e.call(this,t,n.RELATIVE_STRENGTH_INDEX,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([14,1])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","RSI")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","relativeStrengthIndex")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.RSI_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","RSI"),id:this.indicatorID+":0",className:"cell-chart-default-series--rsi",type:"line",yAxis:this.axisID},e))},i.prototype.getAdjustableCalcOptions=function(){return[this.calcOptions.periods[0]]},i}(l),f=function(e){function i(t,i,r,a,s){return e.call(this,t,n.AVERAGE_TRUE_RANGE,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([14])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","ATR")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","averageTrueRange")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.ATR_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","ATR"),id:this.indicatorID+":0",className:"cell-chart-default-series--atr",type:"line",yAxis:this.axisID},e))},i}(l),v=function(e){function i(t,i,r,a,s){return e.call(this,t,n.VOLUME,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([1])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","VOL")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","Volume")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.Volume_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","VOLUME"),id:this.indicatorID+":0",className:"cell-chart-default-series--volume",type:"column",yAxis:this.axisID},e))},i}(l),y=function(e){function i(t,i,r,a,s){return e.call(this,t,n.VOLUME_UNDERLAY,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([1])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","VOL")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","Volume")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.Volume_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","VOLUME"),id:this.indicatorID+":0",className:"cell-chart-default-series--volume",type:"column",yAxis:this.axisID},e))},i}(l),b=function(e){function i(t,i,r,a,s){return e.call(this,t,n.HIGH_LOW,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([1])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","H-L")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","high-low")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.HI_LO_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","H_L"),id:this.indicatorID+":0",className:"cell-chart-default-series--hl",type:"line",yAxis:this.axisID},e))},i}(l),T=function(e){function i(t,i,r,a,s){return e.call(this,t,n.VOLUME_WEIGHTED_AVERAGE_PRICE,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([14])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","VWAP")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","volumeWeightedAveragePrice")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.VWAP_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","VWAP"),id:this.indicatorID+":0",className:"cell-chart-default-series--vwap",type:"line",yAxis:this.axisID},e))},i}(l),S=function(e){function i(t,i,r,a,s){return e.call(this,t,n.HISTORICAL_VOLATILITY,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([60])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","VLTY")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","historicalVolatility")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.HV_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","VLTY"),id:this.indicatorID+":0",className:"cell-chart-default-series--hist-vol",type:"line",yAxis:this.axisID},e))},i}(l),C=function(e){function i(t,i,r,a,s){return e.call(this,t,n.STANDARD_DEVIATION,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([50])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","SD")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","standardDeviation")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.SD_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","SD"),id:this.indicatorID+":0",className:"cell-chart-default-series--sd",type:"line",yAxis:this.axisID},e))},i}(l),I=function(e){function i(t,i,r,a,s){return e.call(this,t,n.RELATIVE_VOLATILITY_INDEX,i,r,a,s)||this}return __extends(i,e),i.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([10,14])},i.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","RVI")},i.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","relativeVolatilityIndex")},i.prototype.constructCalcObject=function(e){this.calcObject=new t.RVI_Calculation(this.dataValues,e)},i.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","RVI"),id:this.indicatorID+":0",className:"cell-chart-default-series--rvi",type:"line",yAxis:this.axisID},e))},i}(l),_=function(i){function a(e,t,r,a,s){var o=i.call(this,e,n.BETA,t,r,a,s)||this;return o.requiresReferenceInstrument=!0,o}return __extends(a,i),a.prototype.getDefaultCalcOptions=function(){return new t.IndicatorCalculationOptions([10,14])},a.prototype.getIndicatorNameShort=function(){return this.manager.languageHandler.get("chartIndicatores","beta")},a.prototype.getIndicatorName=function(){return this.manager.languageHandler.get("chartIndicatores","beta")},a.prototype.setReferenceData=function(t){this.referenceInstrumentData&&this.lineinfo.forEach(function(e){e.clear()});var n=e.CacheKeyFactory.createInstrumentKey(this.calcOptions.referenceInstrument);if(this.referenceInstrumentData=t[n],this.calcObject.setReferenceData(this.referenceInstrumentData),this.dataValues)for(var i=0;i<this.dataValues.length;i++)this.addPoint(i);this.labels&&this.labels.update()},a.prototype.constructCalcObject=function(e){this.calcObject=new t.Beta_Calculation(this.dataValues,this.referenceInstrumentData,e)},a.prototype.constructLines=function(e){this.lineinfo.push(new r({name:this.manager.languageHandler.get("chartIndicatores","BETA"),id:this.indicatorID+":0",className:"cell-chart-default-series--beta",type:"line",yAxis:this.axisID},e))},a}(l)}(e.Indicators||(e.Indicators={}))}(Infront||(Infront={})),function(e){!function(t){var n,i=e.ChartCache.ChartFieldType;(n=t.LabelTypes||(t.LabelTypes={})).RSI="RSI",n.ATR="ATR",n.VOL="VOL",n["H-L"]="H-L",n.VWAP="VWAP",n.VLTY="VLTY",n.SD="SD",n.RVI="RVI",n.BETA="BETA",n.SMA="SMA";var r=function(){};function a(e,t){var n=new r;return n.lastBanner=(n.mainLabel=e?{wrapper:t?"cell-chart__label-separate-axis":"cell-chart__label-element",label:"cell-chart__label-element__label"}:{wrapper:"cell-chart__label-element",label:"cell-chart__label-element__label"},{wrapper:"cell-chart__last-banner",label:"cell-chart__last-banner__label"}),n}t.LabelStylingTemplate=r;var s,o,l=function(){function e(e){var t=this;this.outsideClickListener=function(e){e.target==t.editBox||t.editBox.contains(e.target)||t.remove()},this.isVisible=!0,this.parentElement=e,this.overlay=document.createElement("div"),this.overlay.className="cell-chart__edit-overlay",this.parentElement.appendChild(this.overlay),this.editBox=document.createElement("div"),this.editBox.className="cell-chart__edit-box  cell-content  cell-content--raised",document.body.appendChild(this.editBox),InfrontUtil.setZeroTimeout(function(){InfrontUtil.addEventListener(document,"click",t.outsideClickListener)})}return e.prototype.addHeader=function(e){var t=document.createElement("div");t.className="cell-chart__edit-box__header",t.innerHTML=e,this.editBox.appendChild(t)},e.prototype.appendChild=function(e){this.editBox.appendChild(e)},e.prototype.positionCheck=function(){var e=this.parentElement.getBoundingClientRect(),t=document.body.getBoundingClientRect(),n=this.editBox.getBoundingClientRect(),i=e.top+2;if(InfrontUtil.isMobileDevice())i+n.height>t.bottom-30&&(i=Math.max(75,t.bottom-n.height-30)),this.editBox.style.top=i-t.top+"px",this.editBox.style.left=.3*t.width/2+"px",this.editBox.style.width="70%";else{i+n.height>t.bottom-30&&(i=Math.max(75,t.bottom-n.height-30));var r=e.left+(e.width/2-n.width/2);this.editBox.style.top=i-t.top+"px",this.editBox.style.left=r+"px"}},e.prototype.remove=function(){InfrontUtil.removeEventListener(document,"click",this.outsideClickListener),this.editBox.parentElement.removeChild(this.editBox),this.overlay.parentElement.removeChild(this.overlay),this.isVisible=!1},e}();t.ChartEditModal=l,(o=s=t.CustomLabelType||(t.CustomLabelType={}))[o.Static=1]="Static",o[o.Hover=2]="Hover",o[o.None=void 0]="None";var c=function(){function t(e,t,n,i,r,a,s,o,l){this.infront=n,this.languageHandler=l,this.decimals=r,this.labelType=i,this.labels={},this.chartContainer=e,this.mainAxisLabelWrappers=new d(t),this.showFullName=a,this.customLabelFormatter=s,this.hasInvertedYAxis=o}return t.prototype.addInstrumentLabels=function(t,n,i,r,o,l){var c=this;if(this.labelType==s.Hover){var d=a(),p=function(){var n=t.name+(i?" ("+i+")":"");t.yAxis.options.id==e.ChartWidgetConstants.kValueYAxisId?c.labels[t.options.id]=new h(t,c.decimals,n,c.languageHandler,d,c.chartContainer,r,o,c.hasInvertedYAxis,c.mainAxisLabelWrappers.instrumentLabelWrapper,l):c.labels[t.options.id]=new h(t,c.decimals,n,c.languageHandler,d,c.chartContainer,r,o,c.hasInvertedYAxis,null,l)};if(this.showFullName){var m=this.infront.cache.get(n,["FULL_NAME"]),g=n.split("|"),f=new e.Instrument(parseInt(g[0]),g[1]),v=function(e){return InfrontUtil.isFunction(c.customLabelFormatter)?c.customLabelFormatter(e):e.full_name};if(m)f.full_name=m,t.update({name:v(f)},!0),p();else{var y,b=new e.DataOptions;b.onError=InfrontUtil.errorLogCallback,b.onData=function(n){(n=n[0])[e.MWSConstants.instrument]&&null!==n[e.MWSConstants.instrument][e.MWSConstants.full_name]&&(t.update({name:v(n[e.MWSConstants.instrument])}),y(),p())},y=this.infront.instrumentInfo(f,b)}}else p()}else this.labelType==s.Static&&(t.yAxis.options.id==e.ChartWidgetConstants.kValueYAxisId?this.labels[t.options.id]=new u(t,this.decimals,this.languageHandler,this.chartContainer,o,this.hasInvertedYAxis,this.mainAxisLabelWrappers.instrumentLabelWrapper):this.labels[t.options.id]=new u(t,this.decimals,this.languageHandler,this.chartContainer,o,this.hasInvertedYAxis))},t.prototype.showFullnameOnLabel=function(){this.showFullName=!0},t.prototype.addIndicatorLabels=function(t,n,i,r){if(this.labelType==s.Hover){var o=InfrontUtil.isArray(t)?t[0]:t,l=n.split("|")[1];if(o.yAxis.options.id==e.ChartWidgetConstants.kValueYAxisId){var c=a(!0,!1);this.labels[n]=new h(t,this.decimals,l,this.languageHandler,c,this.chartContainer,i,r,this.hasInvertedYAxis,this.mainAxisLabelWrappers.indicatorLabelWrapper)}else c=a(!0,!0),this.labels[n]=new h(t,this.decimals,l,this.languageHandler,c,this.chartContainer,i,r,this.hasInvertedYAxis);return this.labels[n]}},t.prototype.addHoverDataToLabel=function(e,t,n,i){this.labelType==s.Hover&&this.labels[e]&&this.labels[e].mainLabel.addHoverData(t,n,i)},t.prototype.addVolumeDataToLabel=function(e,t,n){this.labelType==s.Hover&&this.labels[e]&&this.labels[e].mainLabel.showVolume(t,n)},t.prototype.updateAllLabels=function(e){if(void 0===e&&(e=-1),this.labelType==s.Hover)for(var t in this.labels)this.labels[t].update(e)},t.prototype.updateLabelDecimalCount=function(e){if(this.decimals=e,this.labelType==s.Hover)for(var t in this.labels)this.labels[t].updateDecimalCount(e)},t.prototype.updateSpecificLabels=function(e,t){void 0===t&&(t=-1),this.labelType&&this.labels[e]&&this.labels[e].update(t)},t.prototype.updateSpecificLabelCompare=function(e,t){this.labelType&&this.labels[e]&&this.labels[e].updateIsCompared(t)},t.prototype.updateSpecificLabelField=function(e,t){this.labelType&&this.labels[e]&&this.labels[e].updateField(i.getFieldTypeDisplayName(t,this.languageHandler))},t.prototype.setSpecificStaticChange=function(e,t){this.labelType==s.Static&&this.labels[e]&&this.labels[e].setPercentChange(t)},t.prototype.removeLabels=function(e){this.labelType&&this.labels[e]&&(this.labels[e].remove(),delete this.labels[e])},t.prototype.clearVolumeData=function(e){this.labels[e].mainLabel.clearVolumeData()},t.prototype.clearSeriesData=function(){if(this.labelType==s.Hover)for(var e in this.labels)this.labels[e].mainLabel.clearSeriesData()},t}();t.ChartWidgetLabelHandler=c;var d=function(e){this.mainAxisWrapper=document.createElement("div"),this.mainAxisWrapper.className="cell-chart__label-wrapper",e.appendChild(this.mainAxisWrapper),this.instrumentLabelWrapper=document.createElement("div"),this.instrumentLabelWrapper.className="cell-chart__series-label-wrapper",this.mainAxisWrapper.appendChild(this.instrumentLabelWrapper),this.indicatorLabelWrapper=document.createElement("div"),this.indicatorLabelWrapper.className="cell-chart__indicator-label-wrapper",this.mainAxisWrapper.appendChild(this.indicatorLabelWrapper)};t.MainAxisLabelWrappers=d;var u=function(){function e(e,t,n,i,r,a,s){this.forSeries=e,this.languageHandler=n,this.axisContainer=s||i,this.chartContainer=i,this.mainLabel=new p(this.forSeries,this.axisContainer,r,this.languageHandler)}return e.prototype.update=function(e){void 0===e&&(e=-1),this.mainLabel.update()},e.prototype.updateDecimalCount=function(e){void 0===e&&(e=2)},e.prototype.updateIsCompared=function(e){},e.prototype.updateField=function(e){},e.prototype.setPercentChange=function(e){this.mainLabel.setPercentChange(e)},e.prototype.remove=function(){this.mainLabel.remove()},e}(),h=function(){function e(e,t,n,i,r,a,s,o,l,c,d){var u=this;this.languageHandler=i,this.forSeries=[],InfrontUtil.isArray(e)?this.forSeries=e:this.forSeries.push(e),this.axisContainer=c||a,this.chartContainer=a,this.mainLabel=new m(this.forSeries[0],n,r.mainLabel,this.axisContainer,s,o,this.languageHandler,!d),this.lastBanners=[],this.forSeries.forEach(function(e){u.lastBanners.push(new g(e,r.lastBanner,a,o,t,l))})}return e.prototype.update=function(e){void 0===e&&(e=-1),this.mainLabel.update(),this.lastBanners.forEach(function(t){t.update(e)})},e.prototype.updateDecimalCount=function(e){void 0===e&&(e=2),this.lastBanners.forEach(function(t){t.decimalCount!=e&&(t.decimalCount=e,t.update())}),this.mainLabel.decimalCount=e},e.prototype.updateIsCompared=function(e){this.mainLabel.isCompare!=e&&(this.mainLabel.isCompare=e,this.mainLabel.update()),this.lastBanners.forEach(function(t){t.isCompare!=e&&(t.isCompare=e,t.update())})},e.prototype.updateField=function(e){this.mainLabel.showsDataForField!=e&&(this.mainLabel.showsDataForField=e,this.mainLabel.update())},e.prototype.remove=function(){this.mainLabel.remove(),this.lastBanners.forEach(function(e){e.remove()})},e.prototype.setPercentChange=function(e){},e}();t.SeriesLabels=h;var p=function(){function e(e,t,n,i){this.isCompare=!1,this.languageHandler=i,this.forSeries=e,this.isCompare=n,this.targetWrapper=t,this.wrapper=document.createElement("div"),this.wrapper.className="cell-chart__static-wrapper",t.appendChild(this.wrapper);var r=document.createElement("div");r.innerHTML=this.forSeries.name,r.className="cell-chart__static-header",this.wrapper.appendChild(r);var a=document.createElement("div");a.className="cell-chart__static-values",this.wrapper.appendChild(a);var s=document.createElement("div");s.innerHTML=this.forSeries.options.id.split("|")[1],a.appendChild(s),this.valueField=document.createElement("div"),a.appendChild(this.valueField),this.changeField=document.createElement("div"),a.appendChild(this.changeField),this.update()}return e.prototype.update=function(){var e=this.forSeries.options.data[0],t=this.forSeries.options.data[this.forSeries.options.data.length-1];if(t){var n=t[1],i=e[1];this.valueField.innerHTML=InfrontUtil.formatNumber(n,2);var r=(n-i)/n*100;this.changeField.innerHTML=InfrontUtil.formatPercent(r,2),this.changeField.className=0<r?"cell-status-positive":r<0?"cell-status-negative":"cell-status-neutral"}},e.prototype.setPercentChange=function(e){this.changeField.innerHTML=InfrontUtil.formatPercent(e,2),this.changeField.className=0<e?"cell-status-positive":e<0?"cell-status-negative":"cell-status-neutral"},e.prototype.addHoverData=function(e,t,n){},e.prototype.showVolume=function(e,t){},e.prototype.clearVolumeData=function(){},e.prototype.clearSeriesData=function(){},e.prototype.getAbsolutePosition=function(){var e=this.wrapper.getBoundingClientRect(),t=document.body.getBoundingClientRect();return{bottom:e.top-t.top+this.wrapper.clientHeight,left:e.left-t.left}},e.prototype.remove=function(){this.targetWrapper.removeChild(this.wrapper)},e}(),m=function(){function e(e,t,n,i,r,a,s,o){var l=this;this.isCompare=!1,this.hasOHLC=!1,this.showsDataForField="Close",this.colorFactors=[.299,.587,.114],this.nowDate=new Date,this.languageHandler=s,this.styleSettings=n,this.forSeries=e,this.isCompare=a,this.targetWrapper=i,this.showPeriodEdit=function(){return l.toggleAdvancedModal(r)},this.wrapper=document.createElement("div"),this.wrapper.className=n.wrapper,i.appendChild(this.wrapper),this.rect=document.createElement("div"),this.rect.className=n.label,this.colorBox=document.createElement("div"),this.colorBox.className="cell-chart__label-element__label__color_box",this.rect.appendChild(this.colorBox),this.textBox=document.createElement("div"),this.textBox.className="cell-chart__label-element__label__text_box",this.textBox.textContent=t,this.rect.appendChild(this.textBox),this.wrapper.appendChild(this.rect);var c=document.createElement("div");c.setAttribute("role","button"),c.setAttribute("tabindex","0"),c.setAttribute("aria-label","Press to remove graph"),this.setTimeFormat(),this.forSeries.chart.parentWidget.showAdvancedParameters?(this.wrapper.classList.add("cell-cursor-pointer"),c.className="cell-arrow  cell-arrow--down",this.rect.onclick=this.showPeriodEdit):o&&(c.className="cell-chart-label-element__remove-button cell-cursor-pointer",c.onclick=function(){return r()},c.onkeyup=function(e){32!=e.keyCode&&13!=e.keyCode||r()}),this.rect.appendChild(c),this.tooltipContainer=document.createElement("div"),this.tooltipContainer.className="cell-chart__label-element__values",this.wrapper.appendChild(this.tooltipContainer);var d=document.createElement("span");d.className="cell-chart__label-element__values__element",this.tooltipContainer.appendChild(d);var u=document.createElement("span");u.className="cell-chart__label-element__values__element",this.tooltipContainer.appendChild(u);var h=document.createElement("span");h.className="cell-chart__label-element__values__element",this.tooltipContainer.appendChild(h);var p=document.createElement("span");p.className="cell-chart__label-element__values__element",this.tooltipContainer.appendChild(p);var m=document.createElement("span");p.className="cell-chart__label-element__values__element",this.tooltipContainer.appendChild(m);var g=document.createElement("span");g.className="cell-chart__label-element__values__element  cell-chart__label-element__values__element--time",this.tooltipContainer.appendChild(g),this.update()}return e.prototype.setTimeFormat=function(){var e=new Date(this.forSeries.xData[0]);this.dateFormat=this.forSeries.xData[0]>InfrontUtil.addDays(this.nowDate,-30).getTime()?InfrontUtil.isToday(e)?InfrontUtil.formatSettings.timeFormat:InfrontUtil.formatSettings.dayMonthTimeFormat:InfrontUtil.formatSettings.longDateFormat},e.prototype.update=function(){var e,t="";if(this.setTimeFormat(),this.forSeries.points&&0<this.forSeries.points.length){var n=this.forSeries.points?this.forSeries.points[this.forSeries.points.length-1]:void 0;this.forSeries.graph?t=getComputedStyle(this.forSeries.graph.element).stroke:n.graphic&&(t="none"!=getComputedStyle(n.graphic.element).fill?getComputedStyle(n.graphic.element).fill:getComputedStyle(n.graphic.element).stroke);for(var i=t.split(","),r=0,a=0;a<i.length;a++)r+=parseInt(i[a].replace(/\D/g,""))*this.colorFactors[a];e=180<r?"cell-chart__label-element--dark-text":"cell-chart__label-element--light-text"}else this.clearSeriesData();if(this.forSeries.yAxis){var s=this.forSeries.yAxis.top;this.wrapper.style.top=s+"px"}this.rect.className=this.styleSettings.label+" "+e,this.colorBox.style.backgroundColor=t},e.prototype.addHoverData=function(e,t,n){var i;if(this.hasOHLC=t,InfrontUtil.isNumber(n))i=this.isCompare?InfrontUtil.formatNumber(e.y,this.decimalCount)+"%":InfrontUtil.formatNumber(e.y,this.decimalCount),this.tooltipContainer.children[n].textContent=i;else if(this.hasOHLC){var r=e;i=" C:"+InfrontUtil.formatNumber(r.close,2),this.tooltipContainer.children[0].textContent=i,i=" O:"+InfrontUtil.formatNumber(r.open,2),this.tooltipContainer.children[1].textContent=i,i=" H:"+InfrontUtil.formatNumber(r.high,2),this.tooltipContainer.children[2].textContent=i,i=" L:"+InfrontUtil.formatNumber(r.low,2),this.tooltipContainer.children[3].textContent=i;var a=InfrontUtil.formatDateTime(new Date(e.x),this.dateFormat,this.languageHandler);this.tooltipContainer.children[5].textContent=i+" "+this.languageHandler.get("columns","TIME")+": "+a}else i=this.isCompare?InfrontUtil.formatNumber(e.y,this.decimalCount)+"%":(this.languageHandler.get("chart",this.showsDataForField.toLowerCase())||this.languageHandler.get("columns",this.showsDataForField.toUpperCase()))+": "+InfrontUtil.formatNumber(e.y,this.decimalCount),a=InfrontUtil.formatDateTime(new Date(e.x),this.dateFormat,this.languageHandler),this.tooltipContainer.children[0].textContent=i,this.tooltipContainer.children[5].textContent=this.languageHandler.get("columns","TIME")+": "+a},e.prototype.showVolume=function(e,t){this.hasOHLC=t;var n=this.hasOHLC?4:1,i=this.languageHandler.get("columns","VOLUME")+": "+InfrontUtil.formatNumber(e.y,2);this.tooltipContainer.children[n].textContent=i},e.prototype.clearVolumeData=function(){var e=this.hasOHLC?4:1;this.tooltipContainer.children[e].textContent=""},e.prototype.clearSeriesData=function(){this.tooltipContainer.children[0].textContent="",this.tooltipContainer.children[1].textContent="",this.tooltipContainer.children[2].textContent="",this.tooltipContainer.children[3].textContent="",this.tooltipContainer.children[4].textContent="",this.tooltipContainer.children[5].textContent=""},e.prototype.getAbsolutePosition=function(){var e=this.wrapper.getBoundingClientRect(),t=document.body.getBoundingClientRect();return{bottom:e.top-t.top+this.wrapper.clientHeight,left:e.left-t.left}},e.prototype.remove=function(){this.targetWrapper.removeChild(this.wrapper)},e.prototype.toggleAdvancedModal=function(e){this.editModal=new l(this.forSeries.chart.container.parentElement),this.forSeries.chart.parentWidget.editModal=this.editModal,e(this.editModal),this.editModal.positionCheck()},e}();t.MainLabel=m;var g=function(){function e(e,t,n,i,r,a){this.isCompare=!1,this.colorFactors=[.299,.587,.114],this.styleSettings=t,this.forSeries=e,this.targetWrapper=n,this.isCompare=i,this.invertedAxis=a,this.wrapper=document.createElement("div"),this.wrapper.className=t.wrapper,this.decimalCount=r,n.appendChild(this.wrapper),this.element=document.createElement("div"),this.element.className=t.label,this.wrapper.appendChild(this.element),this.update()}return e.prototype.update=function(e){if(this.forSeries.points&&0<this.forSeries.points.length){var t=this.forSeries.chart.yAxis[0].width+7,n=this.forSeries.yAxis.top,i=void 0,r="",a=void 0,s=this.forSeries.data[this.forSeries.data.length-1];if(s){var o;o=void 0!==s.plotClose?(i=s.plotClose,this.formatToMatchYAxis(s.close)):(i=s.plotY,this.formatToMatchYAxis(s.y)),this.forSeries.graph?r=getComputedStyle(this.forSeries.graph.element).stroke:s.graphic&&(r="none"!=getComputedStyle(s.graphic.element).fill?getComputedStyle(s.graphic.element).fill:getComputedStyle(s.graphic.element).stroke);for(var l=r.split(","),c=0,d=0;d<l.length;d++)c+=parseInt(l[d].replace(/\D/g,""))*this.colorFactors[d];a=180<c?"cell-chart__label-element--dark-text":"cell-chart__label-element--light-text",i=i>this.forSeries.yAxis.height?this.forSeries.yAxis.height:i<0?0:i,this.wrapper.style.display="block",this.wrapper.style.top=i+n-this.wrapper.offsetHeight/2+"px",this.invertedAxis?this.wrapper.style.right="0px":this.wrapper.style.left=t+"px",this.element.className=this.styleSettings.label+" "+a,this.element.textContent=this.isCompare?o+"%":o,this.element.style.backgroundColor=r,this.element.style.opacity=this.invertedAxis?".8":"1"}}else this.wrapper.style.display="none"},e.prototype.remove=function(){this.targetWrapper.removeChild(this.wrapper)},e.prototype.formatToMatchYAxis=function(e){return this.isCompare?InfrontUtil.formatNumber(e,2).toString():InfrontUtil.formatNumber(e,this.decimalCount).toString()},e}();t.LastBanner=g}(e.ChartLabels||(e.ChartLabels={}))}(Infront||(Infront={})),function(e){var t,n,i,r,a,s,o,l,c,d,u,h,p=e.Indicators,m=e.Indicators.IndicatorTypes,g=e.ChartCache.ChartCache,f=e.ChartCache.InstrumentData,v=e.ChartCache.ChartResolution,y=e.ChartCache.ChartFieldType,b=e.ChartLabels.ChartWidgetLabelHandler,T=e.ChartLabels.ChartEditModal,S=e.ChartLabels.CustomLabelType;(n=t=e.IntradayPeriod||(e.IntradayPeriod={}))[n.TICK=0]="TICK",n[n.SECOND=1]="SECOND",n[n.ONE_DAY=2]="ONE_DAY",n[n.PERIOD_24H=3]="PERIOD_24H",n[n.TWO_DAYS=4]="TWO_DAYS",n[n.THREE_DAYS=5]="THREE_DAYS",n[n.FIVE_DAYS=6]="FIVE_DAYS",n[n.TEN_DAYS=7]="TEN_DAYS",n[n.THIRTY_DAYS=8]="THIRTY_DAYS",(r=i=e.HistoricalPeriod||(e.HistoricalPeriod={}))[r.ONE_MONTH=1e3]="ONE_MONTH",r[r.ONE_WEEK=1001]="ONE_WEEK",r[r.THREE_MONTHS=1002]="THREE_MONTHS",r[r.SIX_MONTHS=1003]="SIX_MONTHS",r[r.ONE_YEAR=1004]="ONE_YEAR",r[r.THREE_YEARS=1005]="THREE_YEARS",r[r.FIVE_YEARS=1006]="FIVE_YEARS",r[r.TEN_YEARS=1007]="TEN_YEARS",r[r.YTD=1008]="YTD",r[r.ALL=1009]="ALL",r[r.CUSTOM=1010]="CUSTOM",(a=e.WatermarkType||(e.WatermarkType={})).full_name="full_name",(o=s=e.TooltipVersion||(e.TooltipVersion={})).Standard="standard",o.Advanced="advanced",o.CustomLabel="customLabel",o.None="none",(c=l=e.HighchartsSeriesType||(e.HighchartsSeriesType={}))[c.line=0]="line",c[c.area=1]="area",c[c.arearange=2]="arearange",c[c.areaspline=3]="areaspline",c[c.areasplinerange=4]="areasplinerange",c[c.candlestick=5]="candlestick",c[c.column=6]="column",c[c.columnrange=7]="columnrange",c[c.flags=8]="flags",c[c.ohlc=9]="ohlc",c[c.polygon=10]="polygon",c[c.scatter=11]="scatter",c[c.spline=12]="spline",(u=d=e.ChartType||(e.ChartType={})).area="area",u.candlestick="candlestick",u.line="line",u.ohlc="ohlc",(h=e.CurrencyType||(e.CurrencyType={})).NOK="NOK",h.SEK="SEK",h.USD="USD";var C=function(){function e(e,t,n){this.id=e,this.name=t,this.label=n}return e.fromString=function(t,n){var i=null;return e.kPeriodIds.hasOwnProperty(t)&&(i=new e(e.kPeriodIds[t],t,n.get(I.kLanguageKey,t))),i},e.kPeriodIds={T:t.TICK,S:t.SECOND,"1D":t.ONE_DAY,"24H":t.PERIOD_24H,"2D":t.TWO_DAYS,"3D":t.THREE_DAYS,"5D":t.FIVE_DAYS,"10D":t.TEN_DAYS,"30D":t.THIRTY_DAYS,"1W":i.ONE_WEEK,"1M":i.ONE_MONTH,"3M":i.THREE_MONTHS,"6M":i.SIX_MONTHS,"1Y":i.ONE_YEAR,"3Y":i.THREE_YEARS,"5Y":i.FIVE_YEARS,"10Y":i.TEN_YEARS,YTD:i.YTD,ALL:i.ALL,CUSTOM:i.CUSTOM},e}();e.ChartPeriodButton=C;var I=function(){function e(){}return e.kLanguageKey="chart",e.kXaxisId="infrontXAxis",e.kValueYAxisId="VALUE_Y_AXIS",e.kVolumeYAxisId="VOLUME_Y_AXIS",e.kVolumeSeriesId="VOLUME_SERIES",e.kNavigatorSeriesId="NAVIGATOR_SERIES",e.kIntraday="INTRADAY",e.kHistorical="HISTORICAL",e.kInteractive="INTERACTIVE",e.kRangeDay="DAY",e.kRangeAll="ALL",e.kPeriodSelectorPosRight="RIGHT",e.kPeriodSelectorPosLeft="LEFT",e.kTicker="TICKER",e.kFullName="FULL_NAME",e.kCompareValueField="_compare",e.kVolumeAxisHeight=35,e.kSeparateAxisHeight=15,e.kPaneMarginHeight=4,e.kIndicatorSaveKey="indicatorString",e.kSeperateAxisSaveKey="indAxisString",e.kPeriodSaveKey="selectedPeriodID",e.kInstrumentsStoreKey="instruments",e.kTypeStoreKey="chartType",e.kMainFieldStoreKey="mainField",e.kIntradayGrouping={enabled:!0,units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]]]},e.kDefaultChartColors=["#5DA5DA","#4D4D4D","#FAA43A","#60BD68","#B276B2","#DECF3F","#F15854","#F17CB0","#B2912F"],e.kDefaultVolumeSeriesColor="#00384d",e.kNumberOfResolutionsToStore=5,e.kMinTickPixelInterval=3,e}();e.ChartWidgetConstants=I;var _=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.zoom=!1,n.showVolume=!1,n.styledMode=!1,n.enableReferenceSymbols=!1,n.linkAction=e.LinkAction.Replace,n.streaming=!1,n.hasCustomSearchButton=!1,n.searchMatchesOnFields=[IDS.RealtimeTags.FullName,IDS.RealtimeTags.Symbol,IDS.RealtimeTags.ISIN],n.maxCompares=3,n.targetCurrency=null,n.selectedCurrency=null,n.selectablePeriods=["T","S","1D","2D","5D","10D","30D","6M","1Y","5Y","YTD","ALL"],n.defaultPeriod="5D",n.availableIndicators=[m.AVERAGE_TRUE_RANGE,m.BOLLINGER_BANDS,m.EXPONENTIAL_MOVING_AVG,m.HIGH_LOW,m.HISTORICAL_VOLATILITY,m.MACD,m.RELATIVE_STRENGTH_INDEX,m.RELATIVE_VOLATILITY_INDEX,m.SIMPLE_MOVING_AVG,m.STANDARD_DEVIATION,m.STOCHASTIC,m.VOLUME_UNDERLAY,m.VOLUME_WEIGHTED_AVERAGE_PRICE,m.WEIGHTED_MOVING_AVG],n.defaultIndicators=[],n.availableChartTypes=[d.line,d.area,d.candlestick,d.ohlc],n.chartTypeID=d.line,n.intradayStepSize=1,n.breakSize=0,n.step=!1,n.hideBreaks=!1,n.yAxisOpposite=!1,n.showTimeResolution=!1,n.axisDateTimeFormat={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},n.adjustDividends=!1,n.adjustSplits=!0,n.chartUI={tooltipVersion:s.Advanced,periodMenu:!0,searchBox:!0,expandButton:!0,resolutionMenu:!1,advancedParameters:!1,customButtons:[],showStaticInfo:!1,resetButton:!1,saveButton:!1,multiLineMenu:!1},n}return __extends(n,t),n}(e.WidgetOptions);e.ChartWidgetOptions2=_;var M=function(){function t(t,n,i,r,a,s,o,l,c,d){var u=this,h=e.WidgetDOMFactory.create_CChartDropDown_DOM(t,n,i,r,a,s,o,l,c,d),p=window.getComputedStyle(h.dropdownContainer);this.doShow=i,this.absolutePosWrapper=document.createElement("div"),this.absolutePosWrapper.style.position="fixed"==p.position?"fixed":"absolute",this.absolutePosWrapper.className="cell-super-absolute",this.absolutePosWrapper.appendChild(h.dropdownElement),this.absolutePosWrapper.style.top="0px",this.absolutePosWrapper.style.right="0px",document.body.appendChild(this.absolutePosWrapper);var m=e.BindingFactory.createInlineBinding(function(e){if(e){var t=h.dropdownContainer.getBoundingClientRect(),n=document.body.getBoundingClientRect(),i="fixed"==p.position?0:n.top,r="fixed"==p.position?0:n.left;u.absolutePosWrapper.style.top=t.bottom-i+"px",u.absolutePosWrapper.style.right=n.width-t.right+r+"px",h.dropdownContainer.blur();var a=h.dropdownElement.firstChild.firstChild;a.setAttribute("tabindex","0"),a.focus()}});i.observe(m)}return t.prototype.hide=function(){this.doShow.set(!1)},t.prototype.destroy=function(){this.absolutePosWrapper.parentElement&&this.absolutePosWrapper.parentElement.removeChild(this.absolutePosWrapper)},t}(),E=function(n){function r(t,i,r){var a=n.call(this,t,i,"chartwidget2",r)||this;return a.unbindingManager=new e.UnbindingManager,a.zIndexCounter=1,a.isCompareChart=!1,a.afterSetExtremesCallback=function(e){void 0===e&&(e=null)},a.nextUniqueAxisIdNumber=0,a.showFullnameForLabel=!1,a.chartDropdowns=[],a.requestId=0,a.indicatorPeriod=0,a.watermarkLabel="",a.tooltipClearTimeout=setTimeout(function(){},500),a.constructFromOptions(r),a}return __extends(r,n),r.prototype.constructFromOptions=function(t){!t.buypassDefaultGlobalHighchartsOptions&&window.Highcharts&&this.setHighchartsLanguage(),this.chartCache=new g,this.pointPixelInterval=I.kMinTickPixelInterval,this._unsubscribes={},this.progressIndicator=new e.ProgressIndicator(this.element),this.defaults=this.options;var n=InfrontUtil.isArray(this.options.instruments)?this.options.instruments:this.options.instruments?[this.options.instruments]:[];this.selectedPeriodId=new e.Observable,this.selectedPeriodName=new e.Observable,this.selectedChartTypeName=new e.Observable,this.selectedResolutionName=new e.Observable,this.autoResolution=new e.Observable,this.displayedInstrumentHasNoIntraday=new e.Observable,this.displayedInstrumentHasNoIntraday.set(!1),this.hcSeries={},this.intraday=!1,this.currentStartDate=this.options.startDate,this.currentEndDate=this.options.endDate,this.isInitialised=!1,this.vIndicatorsCombinedHeight=0,this.vSeparateAxesCount=0,this.secondsStepSize=1,this.showIndicatorMenu=new e.Observable(!1),this.showChartTypeMenu=new e.Observable(!1),this.showPeriodMenu=new e.Observable(!1),this.showResolutionsMenu=new e.Observable(!1),this.chartIsMaximized=new e.Observable(!1),this.showToolbar=new e.Observable(!1),this.hasSearchBox=new e.Observable(!1),this.hasExpandButton=new e.Observable(!1),this.hasResetButton=new e.Observable(this.options.chartUI.resetButton&&!this.options.chartUI.multiLineMenu),this.hasSaveButton=new e.Observable(this.options.chartUI.saveButton&&!this.options.chartUI.multiLineMenu),this.hasChartTypeMenu=new e.Observable(!1),this.hasIndicatorMenu=new e.Observable(!1),this.hasPeriodMenu=new e.Observable(!1),this.hasResolutionMenu=new e.Observable(!1),this.customMenuButtons=new e.ObservableArray,this.isAuto=new e.Observable(!1),this.showAdvancedParameters=this.options.chartUI.advancedParameters,this.chartTypes=new e.ObservableArray,this.indicatorTypes=new e.ObservableArray,this.periods=new e.ObservableArray,this.resolutions=new e.ObservableArray,this.pointPixelInterval=I.kMinTickPixelInterval;var i=this.getStoredValue(I.kInstrumentsStoreKey);"string"==typeof i&&(i=JSON.parse(i)),InfrontUtil.isArray(i)&&0<i.length&&(this.chartCache.instrumentArray=[],n=i);for(var r=0;r<n.length;r++)if(n[r]&&!this.hasInstrument(n[r])){var a=new f;a.instrument=new e.Instrument(n[r].feed,n[r].ticker),a.instrumentId=A(a.instrument),this.chartCache.instrumentArray.push(a)}if(this.isCompareChart=1<this.chartCache.visibleInstruments,this.isCompareChart)for(var o=0,l=this.chartCache.instrumentArray;o<l.length;o++)l[o].setCompare(this.isCompareChart);this.options.chartUI.showStaticInfo&&(this.options.chartUI.tooltipVersion=s.None)},r.prototype.setMetadataParameters=function(t){this.periods.data.forEach(function(e){!t||e.id<1e3&&!t.trades?e.available.set(!1):e.available.set(!0)}),t&&t.additional_info&&t.additional_info.PreferDescriptionOverTicker&&"true"==t.additional_info.PreferDescriptionOverTicker.trim().toLowerCase()&&this.labelManager.showFullnameOnLabel(),t&&!t.trades&&C.fromString(this.options.defaultPeriod,this.languageHandler).id<1e3&&(this.options.defaultPeriod=this.periods.data[7].name),t||IDS.DEBUG_WIDGET_COMPLEXCHARTWIDGET&&InfrontUtil.errorLog("Missing metadata for feed: "+this.chartCache.instrumentArray[0].instrument.feed),"number"==typeof this.options.decimals?this.decimalCount=this.options.decimals:this.decimalCount=t&&t.hasOwnProperty("decimals")?t.decimals:e.UI.kDefaultDecimals,this.labelManager&&this.labelManager.updateLabelDecimalCount(this.decimalCount)},r.prototype.newInit=function(){var t=this,i=[];this.options.availableIndicators.forEach(function(n){var r="object"==typeof n?n.type:n,a=t.languageHandler.get("chart",r.toLowerCase())?t.languageHandler.get("chart",r.toLowerCase()):t.languageHandler.get("chart",r);i.push({id:n,label:a,selected:new e.Observable,available:new e.Observable})}),this.indicatorTypes.replaceWith(i);var r=[];this.options.availableChartTypes.forEach(function(n){switch(n){case d.line:r.push({id:n,label:t.languageHandler.get("chart","line"),selected:new e.Observable,available:new e.Observable});break;case d.ohlc:r.push({id:n,label:t.languageHandler.get("chart","bar"),selected:new e.Observable,available:new e.Observable});break;case d.candlestick:r.push({id:n,label:t.languageHandler.get("chart","candlestick"),selected:new e.Observable,available:new e.Observable});break;case d.area:r.push({id:n,label:t.languageHandler.get("chart","area"),selected:new e.Observable,available:new e.Observable})}}),this.chartTypes.replaceWith(r),this.createPeriodButtons(),this.customMenuButtons.replaceWith(this.options.chartUI.customButtons),n.prototype.newInit.call(this),this.addIndicatorsFromStorage();var a=this.getStoredValue(I.kPeriodSaveKey),s=new InfrontUtil.MultiCallbackHandler(function(){if(0<t.chartCache.instrumentArray.length)t.getFeedMetadata(t.chartCache.instrumentArray[0].instrument.feed,function(e){t.setMetadataParameters(e);var n=InfrontUtil.isNumber(a)?a:C.fromString(t.options.defaultPeriod,t.languageHandler).id;t.periodSelected(n)});else{var e=InfrontUtil.isNumber(a)?a:C.fromString(t.options.defaultPeriod,t.languageHandler).id;t.periodSelected(e),t.toggleExpandRestoreChart()}});if(this.chartCache.instrumentArray.length)for(var o=function(e){var n=s.addCallback(function(n){var i=e.instrument;n&&(n!=i&&t.removeInstrument(e.instrument),t.checkforReferenceSymbol(e.instrument,function(){}))});l.processSelectedSymbol(e.instrument,n);var i=l.getStoredValue(e.instrumentId+I.kMainFieldStoreKey);i&&i!=y.last&&e.setMainField(i,l.isCompareChart)},l=this,c=0,u=this.chartCache.instrumentArray;c<u.length;c++)o(u[c]);else{var h=InfrontUtil.isNumber(a)?a:C.fromString(this.options.defaultPeriod,this.languageHandler).id;this.periodSelected(h),this.toggleExpandRestoreChart()}},r.prototype.processSelectedSymbol=function(t,n){var i=this;null!==this.options.selectedCurrency&&this.options.selectedCurrency in e.CurrencyType?this.retrieveIsinCurrency(t,function(e){e.currency===i.options.selectedCurrency||InfrontUtil.isEmptyObject(e)?n(t):i.selectInstrumentWithSpecifiedCurrency(t,e.isin,n)}):InfrontUtil.setZeroTimeout(function(){n(t)})},r.prototype.retrieveIsinCurrency=function(e,t){var n={};this.cache.inlineSymbolBind(e,IDS.RealtimeTags.ISIN,function(e){n.isin=e,n.hasOwnProperty("currency")&&t&&t(n)}),this.cache.inlineSymbolBind(e,IDS.RealtimeTags.Currency,function(e){n.currency=e,n.hasOwnProperty("isin")&&t&&t(n)}),t&&t(n)},r.prototype.newBuildUI=function(){var t=this;this.addEventListener(document.body,"click",function(){return t.windowClicked()}),this.addEventListener(document.body,"keyup",function(e){return t.windowClickedKeyboard(e)});var i=e.WidgetDOMFactory.create_WComplexChart_DOM(this.element,this.showToolbar);this.toolbarContainers=[i.topbarWrapper,i.subToolbarWrapper,i.bottomToolbarWrapper],this.initHighcharts(i.chartContainer),this.buildMenuUI(i.topbarWrapper);var r=this.chart.container;this.options.chartUI.multiLineMenu&&(r=e.WidgetDOMFactory.create_CChartSubMenu_DOM(i.subToolbarWrapper,this.options.chartUI.resetButton,function(){t.modify(t.defaults)},this.languageHandler),e.WidgetDOMFactory.create_CChartBottomMenu_DOM(i.bottomToolbarWrapper,this.options.chartUI.saveButton,function(){if(t.chart.exportChart){var e="";t.chart.series.forEach(function(t){e+="|"+t.name}),t.chart.exportChart({filename:"Chart"+e,allowHTML:!0})}},this.languageHandler));var a=this.options.chartUI.showStaticInfo?S.Static:this.options.chartUI.tooltipVersion==s.Advanced||this.options.chartUI.tooltipVersion==s.CustomLabel?S.Hover:S.None;this.labelManager=new b(this.chart.container,r,this.infront,a,this.decimalCount,this.options.legend==I.kFullName,this.options.legendCreator,this.options.invertYAxis,this.languageHandler),this.indicatorManager=new p.IndicatorManager(this.chart,this.labelManager,this.languageHandler,function(e,n){void 0===n&&(n=!1),t.removeIndicatorCallback(e,n)},function(){t.store(I.kIndicatorSaveKey,t.indicatorManager.getStorageString())}),this.indicatorManager.periodChangedCallBack=function(e){e>t.indicatorPeriod&&(t.indicatorPeriod=e,t.chartIsInitialized&&t.periodSelected(t.selectedPeriodId.get()))},"0px"!=window.getComputedStyle(this.element).height&&"auto"!=window.getComputedStyle(this.element).height||(this.element.parentElement.style.height="100%",this.element.style.height="100%"),n.prototype.newBuildUI.call(this)},r.prototype.buildMenuUI=function(t){var n=this,i=function(e){n.chartIsMaximized.set(!n.chartIsMaximized.get()),n.toggleExpandRestoreChart()};this.options.chartUI.customButtons.push();var r=e.WidgetDOMFactory.create_CChartMenu_DOM(t,this.options.hasCustomSearchButton,this.hasSearchBox,this.hasExpandButton,this.hasResetButton,this.hasSaveButton,this.customMenuButtons,i,function(e){var t=e.which||e.keyCode;13!==t&&32!==t||i()},function(){n.options.customSearchClicked()},function(){n.modify(n.defaults)},function(){if(n.chart.exportChart){var e="";n.chart.series.forEach(function(t){e+="|"+t.name}),n.chart.exportChart({filename:"Chart"+e,allowHTML:!0})}},this.languageHandler),a=new e.SearchBoxOptions;a.placeholder=this.languageHandler.get(I.kLanguageKey,"searchPlaceholder"),a.maxResults=30,a.searchThreshold=2,a.customSortResult=this.options.customSearchSortingFunction,a.matchOnlyOnTags=this.options.searchMatchesOnFields,a.itemTypes=["INSTRUMENT"],a.instrumentSelected=function(e){n.addInstrument(e)},a.instrumentAdded=function(e){r.searchContainer.getElementsByTagName("input")[0].blur()},this.searchWidget=new e.SearchBox(r.searchContainer,this.infront,a),this.clearDropdowns(),new e.Observable(this.languageHandler.get("orderEntry","type")),this.chartDropdowns.push(new M(r.dropDownContainer,this.hasChartTypeMenu,this.showChartTypeMenu,this.chartTypes,this.selectedChartTypeName,function(e){return n.toggleChartTypeMenu()},function(e){return n.setChartType(e.id)},"chart-type",void 0,this.isAuto));var s=new e.Observable(this.languageHandler.get("chart","indicators"));this.chartDropdowns.push(new M(r.dropDownContainer,this.hasIndicatorMenu,this.showIndicatorMenu,this.indicatorTypes,s,function(e){return n.toggleIndicatorMenu()},function(e){if(!n.options.chartUI.advancedParameters)if(e.selected.get()){var t=n.getActiveIndicator(e);t&&n.indicatorManager.removeIndicator(t)}else n.addIndicator(e.id),n.updateIndicatorDropdown()},"indicators",void 0,this.isAuto)),this.chartDropdowns.push(new M(r.dropDownContainer,this.hasPeriodMenu,this.showPeriodMenu,this.periods,this.selectedPeriodName,function(e){return n.togglePeriodMenu()},function(e){return n.periodButtonClicked(e)},"time-period",void 0,this.isAuto)),this.chartDropdowns.push(new M(r.dropDownContainer,this.hasResolutionMenu,this.showResolutionsMenu,this.resolutions,this.selectedResolutionName,function(e){return n.toggleResolutionMenu()},function(e){e==n.autoResolution?(n.isAuto.set(!0),n.resolutionUserLocked=!1,n.resolutionSelected(e)):e.available&&e.available.get()&&(n.isAuto.set(!1),n.resolutionSelected(e))},"resolution",this.autoResolution,this.isAuto)),this.expandButtonContainer=r.expandButtonContainer,this.customSearchContainer=r.customSearchContainer},r.prototype.periodButtonClicked=function(t){var n=this;if(this.realStartDate=void 0,this.realEndDate=void 0,t.id==i.CUSTOM){var r=w();this.editModal=new T(this.chart.container.parentElement),this.editModal.addHeader("Select period");var a=document.createElement("label");a.textContent="From";var s=document.createElement("input");s.type=r?"date":"text",s.required=!0;var o=document.createElement("label");o.textContent="To";var l,c=document.createElement("input");if(c.type=r?"date":"text",c.required=!0,w()?(s.setAttribute("data-destination","from"),a.appendChild(s),s.valueAsDate=new Date):((l=a.appendChild(document.createElement("div"))).setAttribute("data-destination","from"),this.dateSelectorFrom=new e.DateSelector(l,this.languageHandler,function(e){s.value=e.toDateString(),n.currentDateFrom=e,n.dateSelectorTo&&(e.setHours(0,0,0),e.setMilliseconds(0),n.dateSelectorTo.setFromDate(e),n.dateSelectorFrom.setToDate(n.currentDateTo),n.dateSelectorTo.getDate().getTime()<e.getTime()&&(n.dateSelectorTo.setCurrentDate(e),c.value=e.toDateString()),n.dateSelectorFrom.updateCalendar(),n.dateSelectorTo&&n.dateSelectorTo.updateCalendar())})),w())c.setAttribute("data-destination","to"),o.appendChild(c),c.valueAsDate=new Date;else(l=o.appendChild(document.createElement("div"))).setAttribute("data-destination","to"),this.dateSelectorTo=new e.DateSelector(l,this.languageHandler,function(e){c.value=e.toDateString(),n.currentDateTo=e,n.dateSelectorFrom&&(e.setHours(0,0,0),e.setMilliseconds(0),n.dateSelectorFrom.setToDate(e),n.dateSelectorFrom.setFromDate(n.currentDateFrom),n.dateSelectorFrom.updateCalendar(),n.dateSelectorTo&&n.dateSelectorTo.updateCalendar())});var d=document.createElement("input");d.type="submit",d.textContent="submit";var u=document.createElement("form");u.action="",u.onsubmit=function(e){n.customPeriodSubmit(s.value,c.value),e.preventDefault()},u.appendChild(a),u.appendChild(o),u.appendChild(d),this.editModal.appendChild(u),this.editModal.positionCheck(),s.setAttribute("tabindex","0"),s.focus()}else this.periodSelected(t.id,!0)},r.prototype.customPeriodSubmit=function(e,n){var r=new Date(e),a=new Date(n),s=Date.now();if(this.options.timeOffsetFunction){var o=(new Date).toISOString();s=new Date(this.options.timeOffsetFunction(o)).getTime()}var l=(s-r.getTime())/864e5;30<=l?(this.currentStartDate=r,this.currentEndDate=a,this.intraday=!1):(InfrontUtil.isToday(r)?this.currentIntradayPeriod=t.ONE_DAY:l<=1?this.currentIntradayPeriod=t.PERIOD_24H:l<2?this.currentIntradayPeriod=t.TWO_DAYS:l<5?this.currentIntradayPeriod=t.FIVE_DAYS:l<10?this.currentIntradayPeriod=t.TEN_DAYS:l<30&&(this.currentIntradayPeriod=t.THIRTY_DAYS),this.intraday=!0,this.currentStartDate=r,this.currentEndDate=a,this.realStartDate=r,this.realEndDate=a),this.editModal.remove(),this.periodSelected(i.CUSTOM,!0)},r.prototype.newDestroyUI=function(){this.searchWidget&&this.searchWidget.destroy(),this.clearDropdowns(),n.prototype.newDestroyUI.call(this)},r.prototype.clearDropdowns=function(){this.chartDropdowns.forEach(function(e){return e.destroy()})},r.prototype.hideDropdowns=function(){this.chartDropdowns.forEach(function(e){return e.hide()}),this.editModal&&this.editModal.isVisible&&this.editModal.remove()},r.prototype.returnDefaultWidgetOptions=function(){return new _},r.prototype.newUnsubscribe=function(){this.unsubscribeFromAll(),n.prototype.newUnsubscribe.call(this)},r.prototype.setHighchartsLanguage=function(){Highcharts.setOptions({global:{useUTC:!1},lang:{weekdays:[this.languageHandler.get("time","sunday"),this.languageHandler.get("time","monday"),this.languageHandler.get("time","tuesday"),this.languageHandler.get("time","wednesday"),this.languageHandler.get("time","thursday"),this.languageHandler.get("time","friday"),this.languageHandler.get("time","saturday")],shortWeekdays:[this.languageHandler.get("timeShort","sunday"),this.languageHandler.get("timeShort","monday"),this.languageHandler.get("timeShort","tuesday"),this.languageHandler.get("timeShort","wednesday"),this.languageHandler.get("timeShort","thursday"),this.languageHandler.get("timeShort","friday"),this.languageHandler.get("timeShort","saturday")],months:[this.languageHandler.get("time","january"),this.languageHandler.get("time","february"),this.languageHandler.get("time","march"),this.languageHandler.get("time","april"),this.languageHandler.get("time","may"),this.languageHandler.get("time","june"),this.languageHandler.get("time","july"),this.languageHandler.get("time","august"),this.languageHandler.get("time","september"),this.languageHandler.get("time","october"),this.languageHandler.get("time","november"),this.languageHandler.get("time","december")],shortMonths:[this.languageHandler.get("timeShort","january"),this.languageHandler.get("timeShort","february"),this.languageHandler.get("timeShort","march"),this.languageHandler.get("timeShort","april"),this.languageHandler.get("timeShort","may"),this.languageHandler.get("timeShort","june"),this.languageHandler.get("timeShort","july"),this.languageHandler.get("timeShort","august"),this.languageHandler.get("timeShort","september"),this.languageHandler.get("timeShort","october"),this.languageHandler.get("timeShort","november"),this.languageHandler.get("timeShort","december")]}})},r.prototype.getColor=function(e){var t;if(this.chart&&0<this.chart.series[0].data.length){var n=this.chart.series[0].data[this.chart.series[0].data.length-1];n&&(t=void 0!==n.plotClose?"none"!=getComputedStyle(n.graphic.element).fill?getComputedStyle(n.graphic.element).fill:getComputedStyle(n.graphic.element).stroke:getComputedStyle(this.chart.series[0].graph.element).stroke)}return t},r.prototype.selectInstrumentWithSpecifiedCurrency=function(t,n,i){var r=this,a=new e.SearchOptions,s=null;a.maxResults=30,a.onError=function(e,t){IDS.DEBUG_WIDGET_COMPLEXCHARTWIDGET&&IDS.log("ComplexChartWidget: ",e+" - "+t)},a.onData=function(t){for(var n in t||i&&i(null),t){var a=new e.Instrument(t[n].instrument.feed,t[n].instrument.ticker);r.infront.snapshot(a,["CURRENCY"],!0,function(e){(s=e[0]).instrument.currency===r.options.selectedCurrency&&-1==r.chartCache.shallowCheckIndexOf(a)&&(r.addInstrument(a),i&&i(a))})}s&&i(a)},this.infront.search(n,a)},r.prototype.checkforReferenceSymbol=function(t,n){var i=this;if(this.options.enableReferenceSymbols){var r={};this.cache.inlineSymbolBind(t,IDS.RealtimeFundTags.ReferenceSymbol,function(t){if(r.symbol=t,r.hasOwnProperty("feed")){var n=new e.Instrument(r.feed,r.symbol);i.hasInstrument(n)||i.addInstrument(n)}}),this.cache.inlineSymbolBind(t,IDS.RealtimeFundTags.ReferenceFeed,function(t){if(r.feed=t,r.hasOwnProperty("symbol")){var n=new e.Instrument(r.feed,r.symbol);i.hasInstrument(n)||i.addInstrument(n)}})}n&&n()},r.prototype.getChartData=function(e){var t=this;if(void 0===e&&(e=!1),this.progressIndicator)if(0<this.chartCache.instrumentArray.length){this.progressIndicator.start(),this.isCalculating=!0;var n=new InfrontUtil.MultiCallbackHandler(function(){t.setResolution(),t.createHighcharts(e),t.progressIndicator&&t.progressIndicator.stop(),t.isCalculating=!1});this.chartCache.instrumentArray.forEach(function(e){t.loadDataForInstrument(e.instrument,n.addCallback(function(){}))})}else this.createHighcharts(e)},r.prototype.setResolution=function(){var e=this;if(this.maxNumberOfPointsAllowed=Math.floor(this.element.offsetWidth/this.pointPixelInterval),this.options.defaultResolution||this.isAuto.set(!1),0<this.chartCache.instrumentArray.length)if(this.lockNavigator){var n=void 0;n=this.selectedPeriodId.get()==t.TICK?0:1,this.navCacheIndex=this.chartCache.instrumentArray[0].resolutions.length-1,this.setDisplayedCacheIndex(n),this.autoResolution.set(this.languageHandler.get(I.kLanguageKey,"resolutionAuto")+" ("+this.chartCache.instrumentArray[0].resolutions[n].label+")")}else{var i=-1;this.chartCache.instrumentArray.forEach(function(t){if(t.resolutions){for(var n=t.resolutions,r=0;r<n.length;r++)if(n[r].data.length<e.maxNumberOfPointsAllowed||n[r].label==e.options.defaultResolution){if(!e.options.defaultResolution)return void(i=i<r?r:i);if(-1==i&&(i=r),n[r].label==e.options.defaultResolution)return n[r].selected.set(!0),void(i=r)}-1!=i&&n[i].selected.set(!0)}}),n=-1<i?i:0<this.chartCache.instrumentArray.length?this.chartCache.instrumentArray[0].resolutions.length-1:0,this.setDisplayedCacheIndex(n,!!this.options.defaultResolution),this.navCacheIndex=n,this.autoResolution.set(this.languageHandler.get(I.kLanguageKey,"resolutionAuto")+" ("+this.chartCache.instrumentArray[0].resolutions[n].label+")")}},r.prototype.setDisplayedCacheIndex=function(e,t){void 0===t&&(t=!1);var n=this.displayedCacheIndex;if(t&&!this.isAuto.get())this.resolutionUserLocked=!0,n=e,this.selectedResolutionName.set(this.chartCache.instrumentArray[0].resolutions[e].label),this.isAuto.set(!1);else{n=e;var i="";this.chartCache.instrumentArray[0]&&(i=this.chartCache.instrumentArray[0].resolutions[e].label),this.selectedResolutionName.set(this.languageHandler.get(I.kLanguageKey,"resolutionAuto")+" ("+i+")"),this.isAuto.set(!0)}n!=this.displayedCacheIndex&&(this.displayedCacheIndex=n),this.options.showTimeResolution&&this.chart.xAxis[0].setTitle({text:this.chartCache.instrumentArray[0].resolutions[e].label},!1)},r.prototype.loadDataForInstrument=function(e,t){var n=this;this.getChartDataForInstrument(e,function(i){var r=n.chartCache.shallowCheckIndexOf(e);if(i.length<1){IDS.DEBUG_WIDGET_COMPLEXCHARTWIDGET&&IDS.log("ComplexChartWidget: ","No data");var a=n.chartCache.instrumentArray.some(function(e){if(!e.hidden&&e.resolutions[0]&&e.resolutions[0].data&&e.resolutions[0].data.length)return!0});n.chartNoData=!a,n.options.hasData&&n.options.hasData(!1,e)}else{for(var s=null,o=0;o<n.chartCache.instrumentArray.length;o++)if(e.equals(n.chartCache.instrumentArray[o].instrument)){s=n.chartCache.instrumentArray[o];break}s&&i&&(IDS.DEBUG_WIDGET_COMPLEXCHARTWIDGET&&IDS.log("ComplexChartWidget: ",s),s.setData(i),n.updateMinMax(i),n.options.hasData&&n.options.hasData(!0,e)),n.chartCache.instrumentArray[r].setLastTimeStamp(i[i.length-1].date)}n.setWatermark(),t()})},r.prototype.updateMinMax=function(e){var t,n;if(InfrontUtil.isArray(e))0<e.length&&(t=new Date(e[0].time||e[0].date).getTime(),n=new Date(e[e.length-1].time||e[e.length-1].date).getTime());else if(e.hasOwnProperty("trades")){var i=e.trades;t=new Date(i[0].time).getTime(),n=new Date(i[i.length-1].time).getTime()}else t=new Date(e.time).getTime(),n=new Date(e.time).getTime();if(t&&n){this.chartNoData=!1;var r=this.realStartDate?this.realStartDate.getTime():-1;this.minTimeStamp=Math.max(r,this.minTimeStamp?Math.min(this.minTimeStamp,t):t),this.maxTimeStamp=this.maxTimeStamp?Math.max(this.maxTimeStamp,n):n}},r.prototype.getInstrumentDataFromCache=function(e){for(var t=null,n=0;n<this.chartCache.instrumentArray.length;n++)if(InfrontUtil.isString(e)&&this.chartCache.instrumentArray[n].instrumentId==e||!InfrontUtil.isString(e)&&this.chartCache.instrumentArray[n].instrument.equals(e)){t=this.chartCache.instrumentArray[n];break}return t.resolutions[this.displayedCacheIndex]},r.prototype.unsubscribeFromAll=function(){for(var e in this._unsubscribes)this._unsubscribes.hasOwnProperty(e)&&(this._unsubscribes[e](),delete this._unsubscribes[e])},r.prototype.unsubscribeFromInstrument=function(e){var t=A(e);this._unsubscribes.hasOwnProperty(t)&&(this._unsubscribes[t](),delete this._unsubscribes[t])},r.prototype.subscribeToInstrumentIntraday=function(e){var t=this;this.unsubscribeFromInstrument(e);var n=A(e),i=["TRADES"],r=function(i){if(null!=n&&t.chart&&(!i.instrument||i.instrument.ticker==e.ticker)&&i.trades){t.updateMinMax(i);var r=i.trades;t.options.targetCurrency&&(r=t.infront.getCurrencyConverter().convertTrades(e,r,t.options.targetCurrency)),t.chartCache.addData(r,n,function(e){t.updateSeriesToReflectUpdatedCache(e)})}},a=[e];this.options.targetCurrency?this.infront.getCurrencyConverter().getCrossSymbolsPromise(e,this.options.targetCurrency).then(function(e){e&&0<e.length&&(a=a.concat(e)),t._unsubscribes[n]=t.infront.subscribe(a,i,!1,r)}):this._unsubscribes[n]=this.infront.subscribe(a,i,!1,r)},r.prototype.updateSeriesToReflectUpdatedCache=function(e){var t=this;if("number"==typeof this.displayedCacheIndex&&-1<this.displayedCacheIndex){var n=this.hcSeries[e.instrumentId]||(this.hcSeries[e.instrumentId]=this.chart.get(e.instrumentId)),i=(this.options.showVolume&&(this.hcSeries[I.kVolumeSeriesId]||(this.hcSeries[I.kVolumeSeriesId]=this.chart.get(I.kVolumeSeriesId))),this.chart.get(I.kNavigatorSeriesId)),r=e.resolutions[this.displayedCacheIndex],a=r.data;if(!this.lockNavigator&&r.pointsShownInChart>this.maxNumberOfPointsAllowed&&this.displayedCacheIndex<e.resolutions.length-1)this.setDisplayedCacheIndex(this.displayedCacheIndex+1),this.updateChart();else if(n.points){var s=a[a.length-1].timestamp-n.xData[n.xData.length-1],o=n.points[n.points.length-1],l=a[a.length-1];if(0<s){for(var c=n.xData.length;0<=c&&c<a.length;c++){var d=a[c],u=this.createPointObject(d,n.type,e.getMainFieldAsString());n.addPoint(u,!1,!1,!1),e.instrumentId==this.navInstrumentId&&this.indicatorManager.pointAdded(c)}if(i&&e.instrumentId==this.navInstrumentId)for(var h=e.resolutions[this.navCacheIndex].data,p=i.xData.length;0<=p&&p<h.length-1;p++){var m=h[p],g=i.points[i.points.length-1],f=0<i.points.length?g.x:0;if(m.timestamp<f){var v=0<p?h[p-1]:null;v&&g.update([v.timestamp,v.last],!1,!1)}m.timestamp<=this.maxTimeStamp&&i.addPoint([m.timestamp,m.last],!1,!1,!1)}else if(i&&i.data[i.data.length-1]&&this.maxTimeStamp>i.data[i.data.length-1].x){var y=i.points[i.points.length-1];y&&y.update([this.maxTimeStamp,y.y],!1,!1)}var b=this.chart.navigator;if(!b||Math.round(b.zoomedMax)>=Math.round(b.size)-5){var T=this.realStartDate?this.realStartDate.getTime():-1;this.chart.xAxis[0].setExtremes(Math.max(T,this.chart.xAxis[0].getExtremes().min),this.maxTimeStamp,!1)}}else if(o.x===l.timestamp){var S=this.createPointObject(l,n.type,e.getMainFieldAsString());o.update(S,!1,!1),e.instrumentId==this.navInstrumentId&&this.indicatorManager.updateLastPoint()}this.redrawChartAsync().then(function(){t.labelManager.updateSpecificLabels(n.options.id)})}}},r.prototype.redrawChartAsync=function(){var e=this;return this.redrawPromise||(this.redrawPromise=new Promise(function(t){e.chart.redraw(),t()}),this.redrawPromise.catch(function(){}).then(function(){e.redrawPromise=null})),this.redrawPromise},r.prototype.createPointObject=function(e,t,n){var i=[];return t==l[l.ohlc]||t==l[l.candlestick]?(i[0]=e.timestamp,i[1]=e.open,i[2]=e.high,i[3]=e.low,i[4]=e.last):(i[0]=e.timestamp,i[1]=e[n]),i},r.prototype.getIntradayChartDataForInstrument=function(n,i,r){var a,s,o=this;this.options.streaming&&this.subscribeToInstrumentIntraday(n);var l=new InfrontUtil.MultiCallbackHandler(function(){if(s&&a.unshift(s),o.options.timeOffsetFunction)for(var e=0,t=a;e<t.length;e++){var n=t[e];n.time=o.options.timeOffsetFunction(n.time)}r(a)}),c=l.addCallback(function(){}),d=new e.TradesByDaysOptions;switch(i){case t.ONE_DAY:d.days_back=0,d.resolution=e.Resolution.MINUTES,d.stepSize=1;break;case t.PERIOD_24H:d.days_back=1,d.resolution=e.Resolution.MINUTES,d.stepSize=5;break;case t.TWO_DAYS:d.days_back=1,d.resolution=e.Resolution.MINUTES,d.stepSize=1;break;case t.THREE_DAYS:d.days_back=2,d.resolution=e.Resolution.MINUTES,d.stepSize=1;break;case t.FIVE_DAYS:d.days_back=4,d.resolution=e.Resolution.MINUTES,d.stepSize=1;break;case t.TEN_DAYS:d.days_back=9,d.resolution=e.Resolution.MINUTES,d.stepSize=15;break;case t.THIRTY_DAYS:d.days_back=29,d.resolution=e.Resolution.MINUTES,d.stepSize=30;break;case t.TICK:case t.SECOND:default:d.days_back=0,d.resolution=e.Resolution.TICKS,d.stepSize=1}if(d.targetCurrency=this.options.targetCurrency,this.chartCache.setResolutions(n,i,d.resolution,d.stepSize),d.fields=["LAST","OPEN","HIGH","LOW","VOLUME"],d.onData=function(n){var r=n.trades;if(n.first_trade_of_day_offsets,i==t.PERIOD_24H)for(var s=InfrontUtil.addDays(new Date,-1).getTime(),o=!0;o&&0<r.length;)Date.parse(r[0][e.MWSConstants.time])<s?r.splice(0,1):o=!1;a=r,c()},d.onError=function(e,t){a=[],c(),InfrontUtil.errorLogCallback(e,t)},this.options.maxLookupDays&&(d.maxLookupDays=this.options.maxLookupDays),this.infront.tradesByDays(n,d),0==d.days_back){var u=l.addCallback(function(){}),h=new e.TradesByDaysOptions;h.days_back=1,h.resolution=e.Resolution.HOURS,h.stepSize=1,h.targetCurrency=this.options.targetCurrency,this.options.maxLookupDays&&(h.maxLookupDays=this.options.maxLookupDays),h.onData=function(e){var t=e.trades;if(t&&0<t.length){var n=e.first_trade_of_day_offsets,i=n[1]?n[1]-1:t.length-1;t[i].volume=void 0,t[i].turnover=void 0,0<=i&&i<t.length&&(s=t[i])}u()},h.onError=function(e,t){u(),InfrontUtil.errorLogCallback(e,t)},this.infront.tradesByDays(n,h)}},r.prototype.calculateDayBasedOnIntradayData=function(e){var t=null;return e.forEach(function(e){if(t)t.last=e.last,t.high=Math.max(e.high,t.high),t.low=Math.min(e.low,t.low),t.volume&&(t.volume+=e.volume),t.turnover&&(t.turnover+=e.turnover);else{var n=new Date(e.time);n.setUTCHours(0,0,0),e.time=n.toJSON(),t=e}}),t},r.prototype.getHistoricalChartDataForInstrument=function(t,n,i,r){var a=this;this.options.streaming&&this.subscribeToInstrumentIntraday(t),this.chartCache.setResolutions(t,void 0,void 0,void 0,this.realStartDate);var s=[],o=[],l=!1,c=new InfrontUtil.MultiCallbackHandler(function(){if(!l){l=!0;var e=a.calculateDayBasedOnIntradayData(s);e&&o.push(e),r(o)}}),d=new e.HistoricalTradesOptions;d.start_date=n,d.end_date=i,d.adjust_dividends=this.options.adjustDividends,d.adjust_splits=this.options.adjustSplits,d.targetCurrency=this.options.targetCurrency,d.fields=["LAST","OPEN","HIGH","LOW","VOLUME"];var u=c.addCallback(function(e){e&&(o=e)});d.onError=function(e,t){u(),InfrontUtil.errorLogCallback(e,t)},d.onData=u,this.infront.historicalTrades(t,d);var h=new e.TradesByDaysOptions;h.resolution=e.Resolution.HOURS,h.days_back=0,h.stepSize=1,h.targetCurrency=this.options.targetCurrency,h.fields=["LAST","OPEN","HIGH","LOW","VOLUME"];var p=c.addCallback(function(e){e&&(s=e.trades)});h.onError=function(e,t){p(),InfrontUtil.errorLogCallback(e,t)},h.onData=p,this.infront.tradesByDays(t,h)},r.prototype.addInstrument=function(t,n,i){var r=this;if(void 0===n&&(n=!1),void 0===i&&(i=!1),null!=t){var a=new e.Instrument(t.feed,t.ticker),s=0===this.chartCache.instrumentArray.length,o=this.chartCache.shallowCheckIndexOf(a);if(-1<o)this.chartCache.instrumentArray[o].hidden!=i&&(this.chartCache.instrumentArray[o].hidden=i,this.setUseCompare(),this.setChartType(this.options.chartTypeID));else{var l=new f;l.hidden=i,l.instrument=a,l.instrumentId=A(a),n?this.chartCache.instrumentArray.unshift(l):this.chartCache.instrumentArray.push(l),this.checkforReferenceSymbol(t,null),this.loadDataForInstrument(a,function(){if(r.setUseCompare(),r.setChartType(r.options.chartTypeID),s)r.toggleExpandRestoreChart();else{var e=r.chartCache.insturmentDataAtIndex(r.displayedCacheIndex);if(r.indicatorManager.setReferenceData(e),r.lockNavigator){var t=r.calculateAndLockNavigator();r.chart.xAxis[0].setExtremes(t.min,t.max,!0,!1)}else t=r.getDataTimestampExtremes(),r.chart.xAxis[0].setExtremes(t.min,t.max,!0,!1)}})}}},r.prototype.removeInstrument=function(e){for(var t=0;t<this.chartCache.instrumentArray.length;t++)if(this.chartCache.instrumentArray[t].instrument.equals(e)){this.unsubscribeFromInstrument(e);var n=this.chartCache.instrumentArray[t];this.chartCache.instrumentArray.splice(t,1);var i=A(n.instrument);this.labelManager.removeLabels(i),this.hcSeries[i].remove(),delete this.hcSeries[i],i==this.navInstrumentId&&this.clearNavSeries(),this.clearStoredValue(i);var r=this.getStoredValue(I.kTypeStoreKey),a=InfrontUtil.isString(r)?r:this.options.chartTypeID;this.setUseCompare(),this.setChartType(a),this.updateNavigatorDataSeries();break}this.periodSelected(this.selectedPeriodId.get(),!1),this.setWatermark()},r.prototype.setUseCompare=function(){var e=1<this.chartCache.visibleInstruments;if(e!=this.isCompareChart){this.isCompareChart=e;for(var t=0,n=this.chartCache.instrumentArray;t<n.length;t++){var i=n[t];i.setCompare(e);var r=i.instrumentId;this.labelManager.updateSpecificLabelCompare(r,e)}this.labelManager.updateAllLabels()}},r.prototype.clearNavSeries=function(){var e=this.chart.get(I.kNavigatorSeriesId);e&&(e.setData(null,!1),this.navInstrumentId=null)},r.prototype.clear=function(){for(;0<this.chartCache.instrumentArray.length;){var e=this.chartCache.instrumentArray.pop(),t=this.chart.get(A(e.instrument));t&&t.remove()}this.clearNavSeries(),this.updateChart()},r.prototype.hasInstrument=function(e){return-1<this.chartCache.shallowCheckIndexOf(e)},r.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument,InterLibraryLink.DataType.removeInfrontInstrument]},r.prototype.receiveMessage=function(t){if(t.type==InterLibraryLink.DataType.infrontInstrument){var n=!1;if(this.options.linkAction==e.LinkAction.Replace&&0<this.chartCache.instrumentArray.length){var i=this.chartCache.instrumentArray[0].instrument,r=new e.Instrument(t.value.feed,t.value.ticker);if(i.equals(r))n=!0;else{this.chartCache.instrumentArray.splice(0,1),this.unsubscribeFromInstrument(i);var a=A(i),s=this.hcSeries[a];s&&(s.remove(),this.labelManager.removeLabels(a)),this.clearNavSeries(),this.subscribes.removeInstrument(i),delete this.hcSeries[a]}}n||this.addInstrument(t.value,!0)}else t.type==InterLibraryLink.DataType.removeInfrontInstrument&&this.removeInstrument(t.value)},r.prototype.modify=function(e){this.newDestroyUI(),this.constructFromOptions(e),this.newInit(),this.toggleExpandRestoreChart(),this.setChartType(d.line)},r.prototype.updateAllInstruments=function(){this.getChartData(!1),this.subscribes.updateInstruments()},r.prototype.getChartDataForInstrument=function(e,t){this.intraday?this.getIntradayChartDataForInstrument(e,this.currentIntradayPeriod,t):this.getHistoricalChartDataForInstrument(e,this.currentStartDate,this.currentEndDate,t)},r.prototype.createHighcharts=function(e){void 0===e&&(e=!1),this.chartIsInitialized?this.updateChartData(e):this.initializeChart()},r.prototype.createPeriodButtons=function(){for(var t=this,n=[],i=0;i<this.options.selectablePeriods.length;i++){var r=C.fromString(this.options.selectablePeriods[i],this.languageHandler);r&&n.push(r)}n.forEach(function(n){var i={id:n.id,name:n.name,label:n.label,selected:new e.Observable,available:new e.Observable};t.periods.push(i)})},r.prototype.initializeChart=function(){this.chartIsInitialized=!0;var e=this.getStoredValue(I.kTypeStoreKey)||this.options.chartTypeID;this.setChartType(e,!0),this.updateChartTypeMenu(),this.updateChart(!0),0<this.chartCache.instrumentArray.length&&this.toggleExpandRestoreChart()},r.prototype.updateIndicatorData=function(){if(0<this.chartCache.instrumentArray.length){var e=this.chartCache.instrumentArray[0];e.hasOwnProperty("resolutions")||this.chartCache.setResolutions(e.instrument),null==this.displayedCacheIndex&&this.setResolution();var t=this.chartCache.insturmentDataAtIndex(this.displayedCacheIndex);this.indicatorManager.setIndicatorsData(e.resolutions[this.displayedCacheIndex].data,this.isCompareChart),this.indicatorManager.setReferenceData(t)}else this.indicatorManager.setIndicatorsData([],!1),this.indicatorManager.setReferenceData({})},r.prototype.initHighcharts=function(e){var t=this,n=function(e,t){var n={};return n.type=e.chartTypeID,n.chart={className:"cell-chart-default",alignAxes:!1,animation:!1,styledMode:e.styledMode,spacingRight:e.noSpacing?0:6,spacingBottom:e.noSpacing?0:8,spacingLeft:e.noSpacing?0:6,spacingTop:e.noSpacing?0:6,panning:!1,pinchType:void 0,plotBackGroundColor:"transparent",style:{fontFamily:'Roboto, HelveticaNeue, "Helvetica Neue", "Open Sans", Arial, sans-serif',fontSize:"10px"}},n.exporting={enabled:!0,chartOptions:{legend:{enabled:!0,verticalAlign:"top",align:"left",itemDistance:50}}},n.xAxis=[{id:I.kXaxisId,showEmpty:!0,endOnTick:!1,ordinal:!0,alternateGridColor:"rgba(0,0,0,0.30)",title:{text:null,align:"low",offset:-16},labels:{y:e.invertXAxis?0:void 0},maxPadding:.5,minPadding:.5,tickPosition:e.invertXAxis?"inside":"outside",visible:!e.hideAxes&&!e.hideXAxis,dateTimeLabelFormats:e.axisDateTimeFormat}],n.yAxis=[{id:I.kValueYAxisId,showEmpty:!0,opposite:!0,labels:{align:e.invertYAxis?"right":"left",x:e.invertYAxis?-7:7,y:e.invertYAxis?-3:4},showFirstLabel:!e.invertYAxis,visible:!e.hideAxes&&!e.hideYAxis}],n.plotOptions={},n.plotOptions.line={animation:!1,step:e.step},n.plotOptions.column={animation:!1,grouping:!0,groupPadding:.1,pointPadding:.1},n.plotOptions.area={animation:!1,threshold:null,softThreshold:!0},n.plotOptions.candlestick={animation:!1,groupPadding:.1,pointPadding:.1},n.plotOptions.ohlc={animation:!1,groupPadding:.1,pointPadding:.1},n.plotOptions.series={animation:!1,enableMouseTracking:e.chartUI.tooltipVersion!=s.None,dataGrouping:{enabled:!1},cropThreshold:1e3,stickyTracking:!0,states:{hover:{animation:!1}}},n.credits={enabled:!1},n.tooltip={enabled:e.chartUI.tooltipVersion!=s.None,hideDelay:0,useHTML:!0,shared:!0,xDateFormat:e.xDateFormat,padding:6},n.tooltip.positioner=function(e,t,n){var i;i=this.chart.containerWidth<n.plotX+e?n.plotX-e:n.plotX;var r=n.series&&n.series.yAxis?n.series.yAxis.top:0;return{x:i,y:n.plotY+r}},e.tooltipDateTimeFormat&&(n.tooltip.dateTimeLabelFormats=e.tooltipDateTimeFormat),e.chartUI.tooltipVersion===s.Advanced||e.chartUI.tooltipVersion===s.CustomLabel||e.chartUI.showStaticInfo||!e.legend&&!e.legendCreator||(n.legend={enabled:!0,floating:!0,align:"right",verticalAlign:"top",symbolWidth:8}),n.rangeSelector={enabled:!1},e.zoom?n.navigator={enabled:!0,margin:6,height:32,adaptToUpdatedData:!1,series:{id:I.kNavigatorSeriesId,dataGrouping:{enabled:!1}}}:n.navigator={enabled:!1},n.scrollbar={enabled:!1},n}(this.options,this.chartCache.instrumentArray.length);n.series=[],n.chart.renderTo=e,this.options.zoom&&(n.navigator.series.data=[],n.navigator.xAxis={events:{afterSetExtremes:function(e){return t.afterSetExtremesCallback(e)}}});var i=this;switch(this.options.chartUI.tooltipVersion){case s.Advanced:this.hasCustomLabels=!0,n.tooltip.style={display:"none !important"},n.tooltip.positioner=function(e,t,n){return n.plotX,n.plotY,{x:-1e3,y:-1e3}},this.addEventListener(this.element,"mouseleave",function(e){t.labelManager.clearSeriesData()});break;case s.CustomLabel:default:this.hasCustomLabels=!1}n.tooltip.pointFormatter=function(){var e=this,t=e.series.options.id.split(":")[0],n=parseInt(e.series.options.id.split(":")[1]);if(!(i.hasCustomLabels&&0<i.chartCache.instrumentArray.length))return 1<i.chartCache.visibleInstruments?'<span class="cell-chart-tooltip"><span class="cell-chart-tooltip__series-name">'+e.series.name+':</span> <span class="cell-chart-tooltip__value">'+InfrontUtil.formatPercent(e.y,2)+"</span></span><br />":'<span class="cell-chart-tooltip"><span class="cell-chart-tooltip__series-name">'+e.series.name+':</span> <span class="cell-chart-tooltip__value">'+InfrontUtil.formatNumber(e.y,i.decimalCount||2)+"</span></span><br />";clearTimeout(i.tooltipClearTimeout);var r=i.chartCache.instrumentArray[0].instrumentId;t==I.kVolumeSeriesId&&0<i.chartCache.instrumentArray.length?"ohlc"==i.options.chartTypeID||"candlestick"==i.options.chartTypeID?i.labelManager.addVolumeDataToLabel(r,e,!0):i.labelManager.addVolumeDataToLabel(r,e,!1):"ohlc"==i.options.chartTypeID||"candlestick"==i.options.chartTypeID?i.labelManager.addHoverDataToLabel(t,e,!0,n):i.labelManager.addHoverDataToLabel(t,e,!1,n)},n.yAxis[0].labels.formatter=function(){return 1<i.chartCache.instrumentArray.length?InfrontUtil.formatNumber(this.value,2)+"%":InfrontUtil.formatNumber(this.value,i.decimalCount||2)},Highcharts.wrap(Highcharts.Axis.prototype,"setExtremes",function(e,t,n,r,a){if(this.chart==i.chart){var s=i.customExtremes(this,t,n),o=this.realStartDate?this.realStartDate.getTime():-1;s[0]=Math.max(o,s[0]),e.call(this,s[0],s[1]==s[0]?s[1]+1:s[1],r,a),i.labelManager.updateAllLabels(i.currentZoomDataOffset)}else e.call(this,t,n,r,a)}),Highcharts.wrap(Highcharts.Pointer.prototype,"getHoverData",function(e,t,n,i,r,a,s){var o=e.call(this,t,n,i,r,a,s);return o&&o.hoverPoints&&o.hoverPoints.length&&o.hoverPoints.length<i.length&&(o.hoverPoints=[],i.forEach(function(e){var t=e.points.find(function(e){return e.x===o.hoverPoint.x&&!e.isNull});if(!t)for(var n=0;n<e.points.length&&e.points[n].x<o.hoverPoint.x;n++)t=e.points[n];InfrontUtil.isObject(t)&&(e.chart.isBoosting&&(t=e.getPoint(t)),o.hoverPoints.push(t))}),o.hoverPoints.sort(function(e,t){return e.x>t.x})),o}),this.chart=new Highcharts.StockChart(n),this.chart.parentWidget=this},r.prototype.addIndicatorsFromStorage=function(){var e=this,t=this.getStoredValue(I.kSeperateAxisSaveKey),n=JSON.parse(t);n&&0<n.length&&n.forEach(function(t){var n=t.split("|"),i=1<n.length?e.getIndicatorAxis(parseInt(n[1]),t):null;i&&e.updateYAxis(i,!1,!0)});var i=this.getStoredValue(I.kIndicatorSaveKey);i&&(this.indicatorManager.loadFromStorage(i),this.updateIndicatorDropdown())},r.prototype.updateIndicatorDropdown=function(){var e=this;this.indicatorTypes.foreach(function(t){var n=null!=e.getActiveIndicator(t);t.selected.set(n)})},r.prototype.getActiveIndicator=function(e){var t;return this.indicatorManager.indicators.forEach(function(n){("object"==typeof e.id&&n.indicatorType==e.id.type&&n.calcOptions.equals(e.id.calcOptions)||n.indicatorType==e.id&&n.calcOptions.equals(n.getDefaultCalcOptions()))&&(t=n)}),t},r.prototype.calculateAndLockNavigator=function(){var e=this,t=0,n=0;this.chartCache.instrumentArray.forEach(function(i){var r=i.resolutions[e.displayedCacheIndex];if(0<r.data.length){var a=r.data[r.data.length-1];n=a.timestamp;var s=e.calculateMin(n,r);t=Math.max(t,s)}});var i=this.realStartDate?this.realStartDate.getTime():-1;return{min:t=Math.max(i,t),max:n}},r.prototype.getDataTimestampExtremes=function(){var e=this.realStartDate?this.realStartDate.getTime():-1,t=Date.now();if(this.realEndDate)t=this.realEndDate.getTime();else if(this.options.timeOffsetFunction){var n=(new Date).toISOString();t=new Date(this.options.timeOffsetFunction(n)).getTime()}return{min:Math.max(e,this.minTimeStamp),max:Math.min(t,this.maxTimeStamp)}},r.prototype.calculateAndGetDataTimestampExtremes=function(){if(0<this.chartCache.instrumentArray.length){var e=this.chartCache.instrumentArray[0].resolutions[this.displayedCacheIndex].data;e&&0<e.length&&(this.minTimeStamp=e[0].timestamp,this.maxTimeStamp=e[e.length-1].timestamp)}var t=this.realStartDate?this.realStartDate.getTime():-1,n=Date.now();if(this.realEndDate)n=this.realEndDate.getTime();else if(this.options.timeOffsetFunction){var i=(new Date).toISOString();n=new Date(this.options.timeOffsetFunction(i)).getTime()}return{min:Math.max(t,this.minTimeStamp),max:Math.min(n,this.maxTimeStamp)}},r.prototype.updateResolution=function(e){void 0===e&&(e=void 0)},r.prototype.customExtremes=function(e,t,n){var i=this;if(0==this.chartCache.instrumentArray.length)return{min:0,max:0};if(this.options.zoom){var r,a=this.chart.get(I.kNavigatorSeriesId),s=this.minTimeStamp,o=this.maxTimeStamp;if(this.lockNavigator)this.chartCache.instrumentArray.forEach(function(a){var l=a.resolutions[i.displayedCacheIndex];if(D(l.data,t,n).length>i.maxNumberOfPointsAllowed)if(r=!0,t!=e.getExtremes().min&&n==e.getExtremes().max){var c=i.calculateMax(t,l);s=t,o=Math.min(o,c)}else{var d=i.calculateMin(n,l);o=n,s=Math.max(s,d)}});else if(!this.resolutionUserLocked){var l=-1;this.chartCache.instrumentArray.forEach(function(e){for(var r=0;r<e.resolutions.length;r++){var a=D(e.resolutions[r].data,t,n);if(a.length<i.element.offsetWidth/i.pointPixelInterval)return l=l<r?r:l,void(e.resolutions[r].pointsShownInChart=a.length)}l<0&&(l=e.resolutions.length-1)}),l!==this.displayedCacheIndex&&(this.setDisplayedCacheIndex(l),this.updateChart())}var c=void 0;r?c=D(this.chartCache.instrumentArray[0].resolutions[this.displayedCacheIndex].data,s,o):0<(c=D(this.chartCache.instrumentArray[0].resolutions[this.displayedCacheIndex].data,t,n)).length&&(s=c[0].timestamp,o=a.xAxis&&n==a.xAxis.getExtremes().dataMax?n:c[c.length-1].timestamp);var d=this.chartCache.instrumentArray[0].resolutions[this.displayedCacheIndex].data.indexOf(c[c.length-1]);return this.currentZoomDataOffset=d-this.chartCache.instrumentArray[0].resolutions[this.displayedCacheIndex].data.length,u=this.realStartDate?this.realStartDate.getTime():-1,s=Math.max(u,s),this.afterSetExtremesCallback=function(e){if((a=i.chart.get(I.kNavigatorSeriesId))&&a.xAxis&&i.chart.navigator){var t=-1==i.currentZoomDataOffset?a.xAxis.left+a.xAxis.width:a.xAxis.translate(o);s==i.minTimeStamp?i.chart.navigator.render(s,o,a.xAxis.left,t):i.chart.navigator.render(s,o,a.xAxis.translate(s),t)}},r&&this.afterSetExtremesCallback(),[s,o]}this.chart.xAxis[0].getExtremes().min,this.chart&&this.lockNavigator&&this.chartCache.instrumentArray.forEach(function(e){var t=e.resolutions[i.displayedCacheIndex];i.calculateMin(n,t)});var u=this.realStartDate?this.realStartDate.getTime():-1;return[t=Math.max(u,t),n]},r.prototype.calculateMin=function(e,t){return t.resolution==v.TICKS?t.findFittingZoomFromTimeStamp(e,!1,this.maxNumberOfPointsAllowed):e-t.stepSizeMilliseconds*(this.maxNumberOfPointsAllowed-1)},r.prototype.calculateMax=function(e,t){return t.resolution==v.TICKS?t.findFittingZoomFromTimeStamp(e,!0,this.maxNumberOfPointsAllowed):e+t.stepSizeMilliseconds*(this.maxNumberOfPointsAllowed-1)},r.prototype.showSeriesEdit=function(e,t,n,i){var r=this;if(this.showAdvancedParameters){var a="";switch(this.options.chartTypeID){case"ohlc":a=this.languageHandler.get("chart","bar");break;case"line":a=this.languageHandler.get("chart","line");break;case"candlestick":a=this.languageHandler.get("chart","candlestick");break;default:a=this.languageHandler.get("chart","area")}if(this.editModal.addHeader(t.instrument.ticker+" "+a.charAt(0).toUpperCase()+a.slice(1)+" Chart"),"ohlc"!=n.options.type&&"candlestick"!=n.options.type){var s=document.createElement("div");s.className="cell-row",e.appendChild(s);var o=document.createElement("div");o.className="cell-chart__edit-box__field-select-label",o.innerHTML=this.languageHandler.get("chart","select_field"),s.appendChild(o);var l=[y.last,y.high,y.low,y.open,y._compare],c=document.createElement("select");c.className="cell-row cell-input cell-input--dropdown";for(var d=0,u=l;d<u.length;d++){var h=u[d],p=document.createElement("option");p.text=y.getFieldTypeDisplayName(h,this.languageHandler),p.value=h,c.add(p)}c.selectedIndex=l.indexOf(t.getMainFieldAsString()),this.addEventListener(c,"change",function(){t.setMainField(c.value),n.update(r.createValueSeries(t.instrument,t.resolutions[r.displayedCacheIndex].data,c.value),!1),c.value==y.last?r.clearStoredValue(t.instrumentId+I.kMainFieldStoreKey):r.store(t.instrumentId+I.kMainFieldStoreKey,c.value),r.redrawChartAsync().then(function(){r.labelManager.updateSpecificLabelCompare(t.instrumentId,c.value==y._compare),r.labelManager.updateSpecificLabelField(t.instrumentId,c.value),r.labelManager.updateAllLabels()})}),s.appendChild(c)}var m=document.createElement("button");m.onclick=function(){r.removeInstrument(t.instrument),e.remove()},m.className="cell-button  cell-button--cancel",m.innerHTML=this.languageHandler.get("alert","delete"),e.appendChild(m);var g=document.createElement("button");g.className="cell-button  cell-button--confirm",g.innerHTML="Ok",g.onclick=function(){e.remove()},e.appendChild(g)}else this.removeInstrument(t.instrument)},r.prototype.windowClickedKeyboard=function(t){t.keyCode==e.TextInputBinding.kKeycodeEscape&&this.windowClicked()},r.prototype.windowClicked=function(){this.showIndicatorMenu.set(!1),this.showChartTypeMenu.set(!1),this.showPeriodMenu.set(!1),this.showResolutionsMenu.set(!1)},r.prototype.updateChart=function(e){var t=this;void 0===e&&(e=!1),this.updateInstrumentSeries(e),this.setWatermark(),this.updateNavigatorDataSeries(),this.updateChartTypeMenu(),this.updatePeriodMenu(),this.updateResolutionsMenu(),e||this.redrawChartAsync().then(function(){t.labelManager.updateAllLabels()});for(var n=[],i=0;i<this.chartCache.instrumentArray.length;i++){var r=this.chartCache.instrumentArray[i];n[i]=r.instrument}var a=InfrontUtil.isArray(this.options.instruments)?this.options.instruments:this.options.instruments?[this.options.instruments]:[];if(InfrontUtil.arraysAreEqual(n,a))this.clearStoredValue(I.kInstrumentsStoreKey);else{var s=JSON.stringify(n);this.getStoredValue(I.kInstrumentsStoreKey)!=s&&this.store(I.kInstrumentsStoreKey,s)}var o=this.chartCache.visibleInstruments>=this.options.maxCompares+1;this.searchWidget.setEnabled(!o&&!this.chartNoData)},r.prototype.addWaterMark=function(e){if(this.chart){var t=140;this.watermark=this.chart.renderer.label(e,0,0,null,null,null,!1,!0,"chart-watermark"),this.watermark.attr({zIndex:2}).add().css({fontSize:t+"px !important"});var n,i=this.watermark.getBBox().width,r=t,a=100-(this.chart.chartWidth-i)/this.chart.chartWidth*100;70<a&&(t=t/a*70,i=this.watermark.getBBox().width/a*70,this.watermark.css({fontSize:t+"px !important"}),n=this.watermark.getBBox().height/a*70);var s=n||this.watermark.getBBox().height,o=100-(this.element.offsetHeight-s)/this.element.offsetHeight*100;70<o&&(t=r/o*30,s=this.watermark.getBBox().height/o*30,i=this.watermark.getBBox().width/o*30,this.watermark.css({fontSize:t+"px !important"}));var l=this.chart.plotWidth/2-i/2,c=this.chart.plotHeight/2-s/2+8;this.watermark.attr({x:l,y:c})}},r.prototype.setWatermark=function(t){var n=this;if(void 0===t&&(t=!1),!this.watermark||t||!this.chartCache.instrumentArray[0]||this.chartCache.instrumentArray[0].instrument.ticker!==this.watermark.ticker){if(this.watermark&&(this.watermark.destroy(),this.watermark=void 0),this.chartNoData)return this.watermarkLabel=this.languageHandler.get("chart","noChartDataText"),void this.addWaterMark(this.watermarkLabel);if(this.options.showWatermark&&this.chartCache.instrumentArray.length){var i=this.chartCache.instrumentArray[0].instrument,r=new e.DataOptions,s=!1;this.getFeedMetadata(this.chartCache.instrumentArray[0].instrument.feed,function(e){n.options.watermarkType===a.full_name||e.additional_info.PreferDescriptionOverTicker?(r.onError=InfrontUtil.errorLogCallback,r.onData=function(e){s||(n.watermarkLabel=e[0].instrument.full_name?e[0].instrument.full_name:"",n.addWaterMark(n.watermarkLabel),n.watermark.ticker=i?i.ticker:"",s=!0)},n.infront.instrumentInfo(i.feed,i.ticker,r)):(n.watermarkLabel=i?i.ticker:"",n.addWaterMark(n.watermarkLabel),n.watermark.ticker=i?i.ticker:"")})}}},r.prototype.updateInstrumentSeries=function(n){var i=this;void 0===n&&(n=!1);var r,a=!1,s=this.chart.get(I.kXaxisId);s.options.breaks&&s.update({breaks:void 0});for(var o=function(n){var o=l.chartCache.instrumentArray[n],c=o.resolutions&&o.resolutions[l.displayedCacheIndex]?o.resolutions[l.displayedCacheIndex].data:[];if(!o.hidden){o.setCompare(l.isCompareChart);var d=l.hcSeries[o.instrumentId],u=l.createValueSeries(o.instrument,c,o.getMainFieldAsString());if(l.calculateAndLockNavigator&&u.data){var h=0;u.data&&(h=l.calculateMin(u.data[u.data.length-1][0],o.resolutions[l.displayedCacheIndex])),r=Math.max(h,r)}if(d)d.update(u,!1),l.labelManager.updateSpecificLabels(d.options.id),l.labelManager.overrideStaticChangeTag?(g=e.BindingFactory.createInlineBinding(function(e){i.labelManager.setSpecificStaticChange(A(o.instrument),e)}),f=l.cache.customSymbolBind(o.instrument,l.labelManager.overrideStaticChangeTag,g),l.unbinds.push(f),l.subscribes.addInstrument(o.instrument),l.subscribes.addField("LAST")):l.subscribes.updateInstruments();else{u.className="series-color-4",d=l.chart.addSeries(u,!1),l.hcSeries[o.instrumentId]=d;var p=null;if(l.options.targetCurrency){var m=l.infront.getCurrencyConverter().getCrossSymbols(o.instrument,l.options.targetCurrency);m&&0<m.length&&(p=l.options.targetCurrency)}if(l.labelManager.addInstrumentLabels(d,A(o.instrument),p,function(e){i.showSeriesEdit(e,o,d,0==n)},o.getMainFieldAsString()==y._compare,!l.options.chartUI.searchBox),l.labelManager.overrideStaticChangeTag){var g=e.BindingFactory.createInlineBinding(function(e){i.labelManager.setSpecificStaticChange(A(o.instrument),e)}),f=l.cache.customSymbolBind(o.instrument,l.labelManager.overrideStaticChangeTag,g);l.unbinds.push(f),l.subscribes.addInstrument(o.instrument),l.subscribes.addField("LAST")}else l.subscribes.updateInstruments()}if(t[l.selectedPeriodId.get()]&&l.options.hideBreaks&&!a){var v=l.calculateBreaks(u.data);0<v.length&&(s.update({breaks:v}),a=!0,l.breakInstrumentId=A(o.instrument),l.currentBreaks=v)}c.length&&o.resolutions.forEach(function(e){e.updateLatestLast()})}},l=this,c=0;c<this.chartCache.instrumentArray.length;c++)o(c);this.updateIndicatorData()},r.prototype.updateNavigatorDataSeries=function(){if(0<this.chartCache.instrumentArray.length){var e=this.chart.get(I.kNavigatorSeriesId);if(e){this.navInstrumentId=A(this.chartCache.instrumentArray[0].instrument);var t=this.createNavigatorSeries();e.setData(t,!1),this.realStartDate&&e.xAxis.update({min:this.realStartDate.getTime()}),InfrontUtil.isArray(this.currentBreaks)&&e.xAxis.update({breaks:this.currentBreaks})}}},r.prototype.calculateBreaks=function(e){for(var t=[],n=null,i=-1,r=0;r<e.length;r++){var a=e[r][0],s=new Date(a);null!=n&&s.getDate()!=n.getDate()&&t.push({from:i+1,to:a-1,breakSize:this.options.breakSize}),n=s,i=a}return t},r.prototype.updateChartData=function(e){if(void 0===e&&(e=!1),this.updateInstrumentSeries(),this.updateNavigatorDataSeries(),this.lockNavigator){var t=this.calculateAndLockNavigator();this.chart.xAxis[0].setExtremes(t.min,t.max,!0,!1),this.updateResolutionsMenu()}else e?(t=this.calculateAndGetDataTimestampExtremes(),this.chart.xAxis[0].setExtremes(t.min,t.max,!0,!1),this.updateResolutionsMenu()):this.redrawChartAsync()},r.prototype.updateMenuSettings=function(e){void 0!==e.advancedParameters&&(this.options.chartUI.advancedParameters=e.advancedParameters),void 0!==e.chartTypeMenu&&(this.options.chartUI.chartTypeMenu=e.chartTypeMenu),void 0!==e.customButtons&&(this.options.chartUI.customButtons=e.customButtons),void 0!==e.expandButton&&(this.options.chartUI.expandButton=e.expandButton),void 0!==e.indicatorMenu&&(this.options.chartUI.indicatorMenu=e.indicatorMenu),void 0!==e.periodMenu&&(this.options.chartUI.periodMenu=e.periodMenu),void 0!==e.resolutionMenu&&(this.options.chartUI.resolutionMenu=e.resolutionMenu),void 0!==e.searchBox&&(this.options.chartUI.searchBox=e.searchBox),void 0!==e.tooltipVersion&&(this.options.chartUI.tooltipVersion=e.tooltipVersion),this.hasPeriodMenu.set(this.options.chartUI.periodMenu),this.hasResolutionMenu.set(this.options.chartUI.resolutionMenu),this.hasIndicatorMenu.set(this.options.chartUI.indicatorMenu),this.hasChartTypeMenu.set(this.options.chartUI.chartTypeMenu),this.hasSearchBox.set(this.options.chartUI.searchBox),this.customMenuButtons.replaceWith(this.options.chartUI.customButtons)},r.prototype.toggleChartTypeMenu=function(){this.showChartTypeMenu.set(!this.showChartTypeMenu.get()),this.showIndicatorMenu.set(!1),this.showPeriodMenu.set(!1),this.showResolutionsMenu.set(!1)},r.prototype.toggleIndicatorMenu=function(){this.showIndicatorMenu.set(!this.showIndicatorMenu.get()),this.showChartTypeMenu.set(!1),this.showPeriodMenu.set(!1),this.showResolutionsMenu.set(!1)},r.prototype.togglePeriodMenu=function(){this.showPeriodMenu.set(!this.showPeriodMenu.get()),this.showIndicatorMenu.set(!1),this.showChartTypeMenu.set(!1),this.showResolutionsMenu.set(!1)},r.prototype.toggleResolutionMenu=function(){this.showResolutionsMenu.set(!this.showResolutionsMenu.get()),this.showIndicatorMenu.set(!1),this.showPeriodMenu.set(!1),this.showPeriodMenu.set(!1)},r.prototype.updatePeriodMenu=function(){if(0<this.chartCache.instrumentArray.length){var e=this.getSyncFeedMetadata(this.chartCache.instrumentArray[0].instrument.feed);this.setMetadataParameters(e)}},r.prototype.updateChartTypeMenu=function(){var e=this;this.chartTypes.data.forEach(function(t){1<e.chartCache.visibleInstruments&&"line"!=t.id?t.available.set(!1):t.available.set(!0)})},r.prototype.updateResolutionsMenu=function(){0<this.chartCache.instrumentArray.length&&this.chartCache.instrumentArray[0].resolutions?(this.resolutions.replaceWith(this.chartCache.instrumentArray[0].resolutions),this.setOtherResolutionsAvailable()):this.resolutions.replaceWith([])},r.prototype.resizeWidget=function(){this.chart&&(this.options.chartUI.multiLineMenu||this.hasPeriodMenu.get()||this.hasIndicatorMenu.get()||this.hasChartTypeMenu.get()||this.hasSearchBox.get()||this.hasExpandButton.get()?(this.showToolbar.set(!0),this.toolbarContainers.forEach(function(e){"absolute"!=window.getComputedStyle(e).position&&e.offsetHeight})):this.showToolbar.set(!1),this.chart.setSize(this.element.offsetWidth,this.element.offsetHeight,!1),this.chart.navigator&&this.afterSetExtremesCallback(),this.labelManager.updateAllLabels()),this.setWatermark(!0)},r.prototype.customAddInstrument=function(e){this.addInstrument(e)},r.prototype.isResizeable=function(){return!0},r.prototype.toggleExpandRestoreChart=function(){var e;1==this.chartIsMaximized.get()?(this.expandButtonContainer.className="cell-chart-resize-button cell-chart-resize-button--shrink",this.element.parentElement.classList.add("cell-chart-maximized_background"),this.element.classList.add("cell-chart-maximized"),this.hasPeriodMenu.set(!0),this.hasIndicatorMenu.set(!0),this.hasChartTypeMenu.set(!0),this.hasResolutionMenu.set(!0),this.hasSearchBox.set(!0),this.hasExpandButton.set(!0),this.maxNumberOfPointsAllowed=Math.floor(screen.width/this.pointPixelInterval)):(this.expandButtonContainer.className="cell-chart-resize-button cell-chart-resize-button--enlarge",this.element.parentElement.classList.remove("cell-chart-maximized_background"),this.element.classList.remove("cell-chart-maximized"),this.updateMenuSettings(this.options.chartUI),this.maxNumberOfPointsAllowed=Math.floor(this.element.offsetWidth/this.pointPixelInterval)),this.options.hasCustomSearchButton&&(this.hasSearchBox.set(!1),this.options.chartUI.searchBox=!1),e=this.lockNavigator?this.calculateAndLockNavigator():this.getDataTimestampExtremes(),0<this.chartCache.instrumentArray.length&&this.chart.xAxis[0].setExtremes(e.min,e.max,!1,!1),this.resizeWidget(),this.labelManager.updateAllLabels()},r.prototype.getPeriodFromId=function(e){var t=null;return this.periods.data.forEach(function(n){n.id==e&&(t=n)}),t},r.prototype.periodSelected=function(e,n){if(void 0===n&&(n=!1),this.selectedPeriodId.get()!=e){IDS.DEBUG_WIDGET_COMPLEXCHARTWIDGET&&IDS.log("ComplexChartWidget: New period set from "+t[this.selectedPeriodId.get()]+" to "+t[e]);var r=this.getPeriodFromId(e);if(!r&&!n||r&&(!r.available||r.available.get())||0==this.options.instruments.length){n&&(r.label==this.defaults.defaultPeriod?this.clearStoredValue(I.kPeriodSaveKey):this.store(I.kPeriodSaveKey,e)),this.selectedPeriodId.set(e),r&&this.selectedPeriodName.set(r.label),this.removeBindings();var a=void 0;switch(e){case t.TICK:case t.SECOND:this.lockNavigator=!0,this.intraday=!0,this.currentIntradayPeriod=e;break;case t.PERIOD_24H:case t.ONE_DAY:a=IDS.RealtimeTags.ChangePct,this.lockNavigator=!1,this.intraday=!0,this.currentIntradayPeriod=e;break;case t.TWO_DAYS:case t.THREE_DAYS:case t.FIVE_DAYS:case t.TEN_DAYS:case t.THIRTY_DAYS:this.lockNavigator=!1,this.intraday=!0,this.currentIntradayPeriod=e;break;case i.ONE_WEEK:a="ONE_W_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addDays(this.currentEndDate,-7);break;case i.ONE_MONTH:a="ONE_M_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addMonths(this.currentEndDate,-1);break;case i.THREE_MONTHS:a="THREE_M_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addMonths(this.currentEndDate,-3);break;case i.SIX_MONTHS:a="SIX_M_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addMonths(this.currentEndDate,-6);break;case i.ONE_YEAR:a="ONE_Y_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addMonths(this.currentEndDate,-12);break;case i.THREE_YEARS:a="THREE_Y_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addMonths(this.currentEndDate,-36);break;case i.FIVE_YEARS:a="FIVE_Y_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addMonths(this.currentEndDate,-60);break;case i.TEN_YEARS:this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=InfrontUtil.addMonths(this.currentEndDate,-120);break;case i.YTD:a="YTD_PCT_CHANGE",this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=new Date,this.currentStartDate.setDate(1),this.currentStartDate.setMonth(0);break;case i.ALL:this.intraday=!1,this.currentStartDate=void 0,this.currentEndDate=new Date;break;case i.CUSTOM:break;default:this.intraday=!1,this.currentEndDate=new Date,this.currentStartDate=new Date}this.intraday||(this.lockNavigator=!1,this.realStartDate=this.currentStartDate,this.currentStartDate&&(this.currentStartDate=InfrontUtil.addDays(this.realStartDate,-Math.ceil(7*this.indicatorPeriod/5)-(this.indicatorPeriod?10:0)))),this.periods.data.forEach(function(t){t.id==e?t.selected.set(!0):t.selected.set(!1)}),this.minTimeStamp=void 0,this.maxTimeStamp=void 0,this.labelManager.overrideStaticChangeTag=a,this.resolutionUserLocked=!1,this.getChartData(!0),this.setWatermark()}}},r.prototype.setOtherResolutionsAvailable=function(){var e=this;this.resolutions.foreach(function(t){t.available.set(!e.lockNavigator)})},r.prototype.resolutionSelected=function(e){if(this.isAuto.get())this.chartCache.instrumentArray[0].resolutions.forEach(function(e){e.selected.set(!1)}),this.setResolution();else for(var t=0;t<this.chartCache.instrumentArray[0].resolutions.length;t++)this.chartCache.instrumentArray[0].resolutions[t]==e?(this.chartCache.instrumentArray[0].resolutions[t].selected.set(!0),this.setDisplayedCacheIndex(t,!0)):this.chartCache.instrumentArray[0].resolutions[t].selected.set(!1);this.updateChart()},r.prototype.setChartType=function(e,t){void 0===t&&(t=!1),1<this.chartCache.visibleInstruments?(this.chartTypes.data.forEach(function(e){e.id==d.line?e.selected.set(!0):e.selected.set(!1)}),this.options.chartTypeID=d.line,this.pointPixelInterval=I.kMinTickPixelInterval):(this.chartTypes.data.forEach(function(t){t.id==e?t.selected.set(!0):t.selected.set(!1)}),(this.options.chartTypeID=e)==d.ohlc||e==d.candlestick?(this.pointPixelInterval=3*I.kMinTickPixelInterval,0<this.chartCache.instrumentArray.length&&this.chartCache.instrumentArray[0].setCompare(!1)):this.pointPixelInterval=I.kMinTickPixelInterval,t||(e==this.options.chartTypeID?this.clearStoredValue(I.kTypeStoreKey):this.store(I.kTypeStoreKey,e))),this.setSelectedChartTypeName(this.options.chartTypeID),t||this.updateChart()},r.prototype.setSelectedChartTypeName=function(e){switch(e){case d.line:this.selectedChartTypeName.set(this.languageHandler.get("chart","line"));break;case d.ohlc:this.selectedChartTypeName.set(this.languageHandler.get("chart","bar"));break;case d.candlestick:this.selectedChartTypeName.set(this.languageHandler.get("chart","candlestick"));break;case d.area:this.selectedChartTypeName.set(this.languageHandler.get("chart","area"))}},r.prototype.createValueSeries=function(t,n,i){var r=this;void 0===i&&(i="last");var a={};a.name=t.ticker;var s,o=6<this.chartCache.indexOf(t)?this.chartCache.indexOf(t)-7:this.chartCache.indexOf(t);if(this.options.chartColors&&0<this.options.chartColors.length&&o<this.options.chartColors.length&&(a.color=this.options.chartColors[o]),a.className="series-color--"+o,a.id=A(t),a.type=this.options.chartTypeID,a.yAxis=I.kValueYAxisId,a.gapSize=this.options.gapSize,a.step=this.options.step,a.zIndex=100+this.zIndexCounter++,a.isInternal=!1,this.options.legend==I.kFullName){var l=this.infront.cache.get(a.id,["FULL_NAME"]),c=function(e){return InfrontUtil.isFunction(r.options.legendCreator)?r.options.legendCreator(e):e.full_name};if(l)t.full_name=l,a.name=c(t);else{var d=new e.DataOptions;d.onError=InfrontUtil.errorLogCallback,d.onData=function(t){if(t[0][e.MWSConstants.instrument]){var n=r.hcSeries[a.id];n&&n.update({name:c(t[0][e.MWSConstants.instrument])},!0)}},this.infront.instrumentInfo(t.feed,t.ticker,d)}}else if(InfrontUtil.isFunction(this.options.legendCreator)){var u=this.options.legendCreator(t);u&&(a.name=u)}return"ohlc"!=this.options.chartTypeID&&"candlestick"!=this.options.chartTypeID||(s=!0),n&&0<n.length&&(a.data=function(e,t,n){void 0===n&&(n=!1);var i=[];if(null!=e&&0<e.length)for(var r=0;r<e.length;r++){var a=e[r];n?i.push([a.timestamp,a.open,a.high,a.low,a.last]):i.push([a.timestamp,a[t]])}return i}(n,i,s)),a},r.prototype.createNavigatorSeries=function(){if(!this.chartCache.instrumentArray[0].resolutions[this.navCacheIndex])return[];for(var e=this.chartCache.instrumentArray[0].resolutions[this.navCacheIndex].data,t=[],n=0;n<e.length-1;n++)t.push([e[n].timestamp,e[n].last]);var i=this.chartCache.instrumentArray[0].resolutions[0].data[this.chartCache.instrumentArray[0].resolutions[0].data.length-1];return i&&t.push([i.timestamp,i.last]),t},r.prototype.createComplexVolumeAxis=function(){var e=(100-this.vIndicatorsCombinedHeight).toString()+"%",t=(parseInt(e)/100*I.kVolumeAxisHeight).toString()+"%",n=(100-parseInt(t)-this.vIndicatorsCombinedHeight).toString()+"%",i={id:I.kVolumeYAxisId,className:"cell-chart-default__volume-axis",top:n,height:t,approximation:"sum",gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,labels:{enabled:!1},title:{text:null}};return this.chart.addAxis(i,!1,!1),i},r.prototype.updateYAxis=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=[],r=this.chart.get(I.kValueYAxisId),a=(100-this.vIndicatorsCombinedHeight).toString()+"%";r.update({height:a},!1);for(var s=0,o=this.chart.yAxis.length-1;0<o;o--){var l=this.chart.yAxis[o];if(l&&l.options.id==I.kVolumeYAxisId){var c=(parseInt(a)/100*I.kVolumeAxisHeight).toString()+"%",d=(100-parseInt(c)-this.vIndicatorsCombinedHeight).toString()+"%";l.update({top:d,height:c},!1)}else if(l&&"navigator-y-axis"!=l.options.id&&(!e||l.options.id!=e.id||!t)){s++,i.push(l.options.id);var u={top:(100-(I.kSeparateAxisHeight+I.kPaneMarginHeight)*s+I.kPaneMarginHeight).toString()+"%",className:(this.vSeparateAxesCount-s)%2!=0?"cell-chart-default__separate-axis-even":"cell-chart-default__separate-axis-odd",plotBands:[{from:-100,to:1e7,className:(this.vSeparateAxesCount-s)%2!=0?"cell-chart-default__separate-pane-even":"cell-chart-default__separate-pane-odd"}]};l.update(u,!1)}}n||this.store(I.kSeperateAxisSaveKey,JSON.stringify(i))},r.prototype.addIndicator=function(t){var n,i,r=this,a=void 0;if("object"==typeof t?(n=t.type,a=t.calcOptions,e.Instrument.isInstrument(a.referenceInstrument)&&this.addInstrument(a.referenceInstrument,!1,!0)):n=t,0<this.chartCache.instrumentArray.length){var s=this.getIndicatorAxis(n);if(s)if(!(i=this.indicatorManager.addIndicator(n,s.id,a)).requiresReferenceInstrument||i.calcOptions.referenceInstrument||this.showAdvancedParameters){if(this.updateNavigatorDataSeries(),this.updateYAxis(s),this.redrawChartAsync().then(function(){r.labelManager.updateAllLabels()}),this.showAdvancedParameters)if(i.labels)i.labels.mainLabel.showPeriodEdit();else{var o=new T(this.element.parentElement);this.indicatorManager.showPeriodEdit(o,i)}else this.indicatorManager.periodChangedCallBack(i.calcOptions.longestPeriod);this.store(I.kIndicatorSaveKey,this.indicatorManager.getStorageString())}else this.indicatorManager.removeIndicator(i)}},r.prototype.removeIndicatorCallback=function(e,t){if(e!=I.kValueYAxisId){var n=this.chart.get(e);t&&e!=I.kVolumeYAxisId&&(this.vSeparateAxesCount--,this.vIndicatorsCombinedHeight=this.vIndicatorsCombinedHeight-parseInt(n.options.height)-I.kPaneMarginHeight),this.updateYAxis(n.options,!0),n.remove(!0)}this.updateNavigatorDataSeries(),this.labelManager.updateAllLabels();for(var i=this.indicatorPeriod=0,r=this.indicatorManager.indicators;i<r.length;i++){var a=r[i];a&&(this.indicatorPeriod=Math.max(this.indicatorPeriod,a.calcOptions.longestPeriod))}this.store(I.kIndicatorSaveKey,this.indicatorManager.getStorageString()),this.updateIndicatorDropdown()},r.prototype.getIndicatorAxis=function(e,t){var n=null;if(!t||null==this.chart.get(t))switch(e){case m.SIMPLE_MOVING_AVG:case m.EXPONENTIAL_MOVING_AVG:case m.WEIGHTED_MOVING_AVG:case m.VOLUME_WEIGHTED_AVERAGE_PRICE:case m.BOLLINGER_BANDS:n=this.chart.yAxis[0].options;break;case m.RELATIVE_STRENGTH_INDEX:case m.RELATIVE_VOLATILITY_INDEX:case m.STOCHASTIC:(n=this.createIndicatorAxis(e,t)).max=100,n.min=0;break;case m.MACD:case m.AVERAGE_TRUE_RANGE:(n=this.createIndicatorAxis(e,t)).max=1,n.min=-1;break;case m.VOLUME_UNDERLAY:case m.HISTORICAL_VOLATILITY:case m.HIGH_LOW:case m.STANDARD_DEVIATION:n=this.createIndicatorAxis(e,t);break;case m.BETA:(n=this.createIndicatorAxis(e,t)).min=-1,n.max=200;break;case m.VOLUME:n=this.createComplexVolumeAxis()}return n},r.prototype.createIndicatorAxis=function(e,t){this.vIndicatorsCombinedHeight=this.vIndicatorsCombinedHeight+I.kSeparateAxisHeight+I.kPaneMarginHeight;var n=t&&InfrontUtil.isNumeric(t.split("|")[0])?parseInt(t.split("|")[0]):this.nextUniqueAxisIdNumber;this.vSeparateAxesCount++;var i={id:n+"|"+e,className:this.vSeparateAxesCount%2==0?"cell-chart-default__separate-axis-even":"cell-chart-default__separate-axis-odd",lineWidth:0,startOnTick:!1,endOnTick:!1,plotBands:[{from:-100,to:1e8,className:this.vSeparateAxesCount%2==0?"cell-chart-default__separate-pane-even":"cell-chart-default__separate-pane-odd"}],title:{text:null},labels:{enabled:!1},height:I.kSeparateAxisHeight.toString()+"%",top:(100-I.kSeparateAxisHeight).toString()+"%"};return this.chart.addAxis(i,!1,!1),this.nextUniqueAxisIdNumber=n>this.nextUniqueAxisIdNumber?n+1:this.nextUniqueAxisIdNumber+1,i},r}(e.WidgetBase);function w(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function A(e,t){return void 0===t&&(t=""),t+e.feed+"|"+e.ticker}function D(e,t,n){var i,r,a=e.length,s=0,o=a;for(i=0;i<a;i++)if(e[i].timestamp>=t){s=Math.max(0,i);break}for(r=i;r<a;r++)if(e[r].timestamp>n){o=r+1;break}return e.slice(s,o)}e.ComplexChartWidget=E,e.DefaultChartOptions={},e.DefaultChartWidgetOptions={}}(Infront||(Infront={})),function(e){var t,n,i=function(e){for(var t=0;null!=(e=e.previousElementSibling);)++t;return t},r=function(){this.items=[]};e.ColumnCategory=r,(n=t=e.ColumnItemPosition||(e.ColumnItemPosition={}))[n.AvailableList=0]="AvailableList",n[n.DisplayedList=1]="DisplayedList";var a,s,o=function(){this.categories=[]};e.ColumnItem=o,(s=a||(a={}))[s.Add=0]="Add",s[s.Remove=1]="Remove",s[s.Move=2]="Move",s[s.Reset=3]="Reset";var l=function(e,t,n,i,r){void 0===t&&(t=""),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=null),this.operator=e,this.fieldName=t,this.spec=r,this.fromIndex=n,this.toIndex=i},c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showTitle=!1,t.useOriginal=!0,t.allowDirectUpdate=!0,t.allowDragAndDrop=!0,t}return __extends(t,e),t}(e.WidgetOptions);e.ColumnChooserWidgetOptions=c;var d=function(n){function s(t,i,r){var a=n.call(this,t,i,s.kLanguageKey,r)||this;return a.categories=[],a.availableItems=[],a.displayedItems=[],a.selectedItemsToAdd=[],a.selectedItemsToRemove=[],a.firstFilteredItem=-1,a.modifiers=[],a.allowDirectUpdate=r.allowDirectUpdate,a.btnAddDisabled=new e.Observable(!0),a.btnRemoveDisabled=new e.Observable(!0),a.filterBinding=new e.TextInputBinding,a.filterBinding.observe(function(e){return a.applyFilter(e)}),a.filterBinding.observeSpecialKeys([e.TextInputBinding.kKeycodeEnter,e.TextInputBinding.kKeycodeEscape],function(e){return a.handleFilterSpecialKeys(e)}),a}return __extends(s,n),s.prototype.returnDefaultWidgetOptions=function(){return new c},s.prototype.newInit=function(){n.prototype.newInit.call(this)},s.prototype.newBuildUI=function(){var t=this;this.widgetTitle=null,this.options.showTitle&&(this.widgetTitle=this.options.overrideTitle?this.options.overrideTitle:this.languageHandler.get(s.kLanguageKey,"widgetTitle"));var n=e.WidgetDOMFactory.create_WColumnChooser_DOM(this.element,this.widgetTitle,this.filterBinding,this.btnAddDisabled,this.btnRemoveDisabled,this.options.allowDirectUpdate||!1,function(e){return t.addSelectedToDisplay()},function(e){return t.removeSelectedFromDisplay()},function(e){return t.resetDisplayList()},function(e){return t.removeAllFromDisplay()},function(e){return t.closeClicked()},function(e){return t.okClicked()},function(e){return t.cancelClicked()},this.infrontUI.languageHandler);if(n.filterInput.focus(),this.aListElement=n.aListElement,this.bListElement=n.bListElement,this.fillDisplayedList(),this.fillAvailableList(),this.options.allowDragAndDrop&&this.setupDragAndDrop(),e.PerfectScrollbar){var i=new e.PerfectScrollbar(this.aListElement,{suppressScrollX:!0});this.addEventListener(this.aListElement,"mouseover",function(e){return i.update()});var r=new e.PerfectScrollbar(this.bListElement,{suppressScrollX:!0});this.addEventListener(this.bListElement,"mouseover",function(e){return r.update()})}},s.prototype.newDestroyUI=function(){n.prototype.newDestroyUI.call(this)},s.getRealID=function(e){var t=-1;if(e)if(e instanceof o)t=i(e.element);else{var n=null;e.classList.contains("cell-w-column-chooser__item")?n=e:e.parentElement&&e.parentElement.classList.contains("cell-w-column-chooser__item")&&(n=e.parentElement),n&&(t=n.hasAttribute("data-id")?Number(n.getAttribute("data-id")):i(n))}return t},s.prototype.addSelectedToDisplay=function(){for(var e=this.selectedItemsToAdd.length,t=0;0<this.selectedItemsToAdd.length;){var n=this.selectedItemsToAdd[0];if(n.visible.get()){var i=this.addItemToDisplayedList(n.spec,n.id,!1);i.originalItem=n,i.locked.set(n.locked.get()),n.visible.set(!1),this.toggleItem(n,!1)}if(e<++t)break}this.allowDirectUpdate&&this.options.listWidget.saveColumns(),this.selectedItemsToAdd=[],this.options.onAdd&&this.options.onAdd()},s.prototype.removeSelectedFromDisplay=function(){for(var e=this.selectedItemsToRemove.length,t=0;0<this.selectedItemsToRemove.length;){var n=this.selectedItemsToRemove[0];if(this.removeItemFromDisplayedList(n),this.toggleItem(n,!1),e<++t)break}this.selectedItemsToRemove=[]},s.prototype.removeAllFromDisplay=function(){for(var e=this.displayedItems.length,t=0,n=0;0<this.displayedItems.length;){var i=this.displayedItems[n];if(i&&(this.removeItemFromDisplayedList(i)||n++,this.toggleItem(i,!1)),e<++t)break}this.selectedItemsToRemove=[]},s.prototype.reloadDisplayedList=function(){if(this.options.listWidget){this.selectedItemsToAdd=[],e.WidgetDOMFactory.unbindAll(this.bListElement),InfrontUtil.removeAllChildNodes(this.bListElement),this.displayedItems=[],this.allowDirectUpdate?this.fillDisplayedList():(this.fillDisplayedList(!0),this.modifiers=[]);for(var t=0,n=this.availableItems;t<n.length;t++){var i=n[t],r=this.isItemDisplayed(i);i.locked.get(),i.visible.set(!r)}}},s.prototype.resetDisplayList=function(){if(this.options.listWidget){e.WidgetDOMFactory.unbindAll(this.bListElement),InfrontUtil.removeAllChildNodes(this.bListElement),this.displayedItems=[],this.allowDirectUpdate?(this.options.listWidget.resetColumns(),this.fillDisplayedList()):(this.fillDisplayedList(!0),this.modifiers=[],this.modifiers.push(new l(a.Reset)));for(var t=0,n=this.availableItems;t<n.length;t++){var i=n[t],r=this.isItemDisplayed(i);i.locked.get(),i.visible.set(!r)}}},s.prototype.okClicked=function(){this.options.listWidget.beginUpdate();for(var e=0,t=this.modifiers;e<t.length;e++){var n=t[e];switch(n.operator){case a.Add:this.options.listWidget.addColumnFromAvailableList(n.fromIndex);break;case a.Remove:this.options.listWidget.removeColumn(n.fieldName);break;case a.Move:this.options.listWidget.moveColumn(n.fromIndex,n.toIndex);break;case a.Reset:this.options.listWidget.resetColumns()}}this.modifiers=[],this.options.listWidget.endUpdate(),this.options.onClose&&this.options.onClose(1)},s.prototype.cancelClicked=function(){this.options.onClose&&this.options.onClose(0)},s.prototype.closeClicked=function(){this.options.onClose&&this.options.onClose(0)},s.prototype.categoryClicked=function(e){this.categories[e],this.expandCategory(e)},s.prototype.categoryDblClicked=function(e){for(var t=this.categories[e],n=0,i=0,r=t.items;i<r.length;i++)(l=r[i]).selected.get()&&n++;for(var a=(n>=t.items.length/2||0==n)&&n!=t.items.length,s=0,o=t.items;s<o.length;s++){var l;(l=o[s]).visible.get()&&this.toggleItem(l,a)}this.expandCategory(e)},s.prototype.itemToAddClicked=function(e){if(e){var t=s.getRealID(e.target||e.srcElement);(0<=t||0<=(t=s.getRealID(e.target.parentNode||e.target.parentNode.srcElement)))&&this.toggleItem(this.availableItems[t])}},s.prototype.itemToAddDblClicked=function(e){if(e){var t=s.getRealID(e.target||e.srcElement);if(0<=t){var n=this.availableItems[t],i=this.addItemToDisplayedList(n.spec,n.id);i.originalItem=n,i.locked.set(n.locked.get()),n.visible.set(!1),this.toggleItem(n,!1),this.options.onAdd&&this.options.onAdd()}}},s.prototype.itemToRemoveClicked=function(e){if(e){var t=s.getRealID(e.target||e.srcElement);0<=t?(this.displayedItems[t].id=t,this.toggleItem(this.displayedItems[t])):0<=(t=s.getRealID(e.target.parentNode||e.target.parentNode.srcElement))&&this.toggleItem(this.availableItems[t])}},s.prototype.itemToRemoveDblClicked=function(e){if(e){var t=s.getRealID(e.target||e.srcElement);if(0<=t){var n=this.displayedItems[t];n.id=t,this.removeItemFromDisplayedList(n),this.toggleItem(n,!1)}}},s.prototype.createCategory=function(t){var n=this,i=this.findCategory(t);if(i)return i;(i=new r).id=this.categories.length,i.title=t,i.expand=new e.Observable(!1),i.onClick=function(e){return n.categoryClicked(e)},i.onDblClick=function(e){return n.categoryDblClicked(e)};var a=e.WidgetDOMFactory.create_WColumnChooserCategory_DOM(i.title,i.id,i.expand,i.onClick,i.onDblClick);return i.element=a.categoryElement,i.content=a.contentElement,i.element.setAttribute("tabindex","0"),this.aListElement.appendChild(i.element),this.categories.push(i),i},s.prototype.isItemDisplayed=function(e){for(var t=!1,n=0,i=this.displayedItems;n<i.length;n++){var r=i[n];e.title==r.title&&(r.originalItem=e,r.locked.set(e.locked.get()||r.spec.locked),t=!0)}return t},s.prototype.addItemToAvailableList=function(n){var i,r=this,a=new o,l=n.locked||!1;a.position=t.AvailableList,a.id=this.availableItems.length,a.spec=n;var c,d=e.FieldsHelper.getFieldInfoFromSpec(a.spec,this.languageHandler);if(a.title=d.heading,a.fieldName=d.fieldName,a.title||(a.title="["+a.fieldName+"]"),a.selected=new e.Observable(!1),a.locked=new e.Observable(l),i=this.isItemDisplayed(a),a.visible=new e.Observable(!i),a.filtered=new e.Observable(!1),a.draggable=new e.Observable(!1),a.onClick=function(e){return r.itemToAddClicked(e)},a.onDblClick=function(e){return r.itemToAddDblClicked(e)},d.headingHover&&(a.headingHover=d.headingHover),n&&n.categories&&0<n.categories.length)for(var u=0;u<n.categories.length;u++)(c=this.createCategory(n.categories[u])).items.push(a),a.categories.push(c),a.element=e.WidgetDOMFactory.create_WColumnChooserItem_DOM(a.headingHover,a.title,a.id,a.selected,a.visible,a.filtered,a.draggable,a.locked,a.onClick,a.onDblClick),c.content.appendChild(a.element),a.element.setAttribute("data-id",""+a.id),a.element.setAttribute("data-frozen",""+n.frozen),a.element.setAttribute("tabindex","0"),a.frozen=n.frozen;else(c=this.createCategory(this.languageHandler.get(s.kLanguageKey,"defaultCategory"))).items.push(a),a.categories=[c],a.element=e.WidgetDOMFactory.create_WColumnChooserItem_DOM(a.headingHover,a.title,a.id,a.selected,a.visible,a.filtered,a.draggable,a.locked,a.onClick,a.onDblClick),c.content.appendChild(a.element),a.element.setAttribute("data-id",""+a.id),a.element.setAttribute("data-frozen",""+n.frozen),a.element.setAttribute("tabindex","0"),a.frozen=n.frozen;return this.availableItems.push(a),a},s.prototype.fillAvailableList=function(){if(this.options&&this.options.listWidget){var e=this.options.listWidget.getAvailableColumns();if(e&&0<e.length){this.availableItems=[];for(var t=0;t<e.length;t++)this.addItemToAvailableList(e[t])}0<this.categories.length&&this.expandCategory(0)}},s.prototype.addItemToDisplayedList=function(n,i,r){var s=this;void 0===r&&(r=!0);var c=new o;if(c.position=t.DisplayedList,c.id=this.displayedItems.length,c.selected=new e.Observable(!1),c.visible=new e.Observable(!0),c.filtered=new e.Observable(!1),c.draggable=new e.Observable(1==this.options.allowDragAndDrop),c.locked=new e.Observable(!0),c.onClick=function(e){return s.itemToRemoveClicked(e)},c.onDblClick=function(e){return s.itemToRemoveDblClicked(e)},n instanceof e.Field)c.spec=n,c.title=n.heading,c.fieldName=n.name,(d=e.FieldsHelper.getFieldInfoFromSpec(c.spec,this.languageHandler)).headingHover&&(c.headingHover=d.headingHover);else{c.spec=n;var d=e.FieldsHelper.getFieldInfoFromSpec(c.spec,this.languageHandler);c.title=d.heading,c.fieldName=d.fieldName,this.options.listWidget&&(this.allowDirectUpdate?(this.options.listWidget.addColumnFromAvailableList(i),r&&this.options.listWidget.saveColumns()):this.modifiers.push(new l(a.Add,c.fieldName,i,0,c.spec))),d.headingHover&&(c.headingHover=d.headingHover)}if(c.title||(c.title="["+c.fieldName+"]"),c.element=e.WidgetDOMFactory.create_WColumnChooserItem_DOM(c.headingHover,c.title,c.id,c.selected,c.visible,c.filtered,c.draggable,c.locked,c.onClick,c.onDblClick),c.element.setAttribute("data-frozen",""+n.frozen),c.element.setAttribute("tabindex","0"),c.frozen=n.frozen,c.frozen&&c.draggable.set(!1),0==this.displayedItems.length)this.displayedItems.push(c),this.bListElement.appendChild(c.element);else if("left"==c.frozen)this.displayedItems.unshift(c),this.bListElement.insertBefore(c.element,this.bListElement.firstElementChild);else if("right"!=c.frozen&&"right"==this.displayedItems[this.displayedItems.length-1].frozen){for(var u=this.displayedItems.length-1;0<=u&&"right"==this.displayedItems[u].frozen;)u--;u++,this.bListElement.insertBefore(c.element,this.displayedItems[u].element),this.displayedItems.push(c),this.displayedItems.splice(u,0,this.displayedItems.splice(this.displayedItems.length-1,1)[0])}else this.displayedItems.push(c),this.bListElement.appendChild(c.element);return c.element.onmousedown=function(e){return s.draggingItem=c},c.element.ontouchstart=function(e){return s.draggingItem=c},c.element.onkeyup=function(e){return s.draggingItem=c},c},s.prototype.removeItemFromDisplayedList=function(t){if(t.locked.get())return!1;var n=s.getRealID(t);return!!(t.originalItem&&this.options.listWidget&&0<=n)&&(t.originalItem.visible.set(!0),this.applyFilter(""),this.allowDirectUpdate?this.options.listWidget.removeColumn(t.fieldName):this.modifiers.push(new l(a.Remove,t.fieldName)),e.WidgetDOMFactory.unbindAll(t.element),this.bListElement.removeChild(t.element),this.displayedItems.splice(n,1),!0)},s.prototype.fillDisplayedList=function(e){if(void 0===e&&(e=!1),this.options.listWidget){var t;t=e?this.options.listWidget.getDefaultColumns():this.options.listWidget.getAllFields();for(var n=0;n<t.length;n++)t[n].hidden||this.addItemToDisplayedList(t[n],n,!1);this.allowDirectUpdate&&this.options.listWidget.saveColumns()}},s.prototype.updateSelectionList=function(e,t,n){if(t)n.push(e);else for(var i=0;i<n.length;i++)if(n[i]==e){n.splice(i,1);break}},s.prototype.toggleItem=function(e,n){if(e.locked.get()&&e.position==t.DisplayedList)e.element.lastElementChild.classList.remove("cell-shake"),e.element.offsetWidth,e.element.lastElementChild.classList.add("cell-shake");else{if(null==n){var i=!e.selected.get();e.selected.set(i),e.position==t.AvailableList?this.updateSelectionList(e,i,this.selectedItemsToAdd):this.updateSelectionList(e,i,this.selectedItemsToRemove)}else e.selected.get()!=n&&(e.selected.set(n),e.position==t.AvailableList?this.updateSelectionList(e,n,this.selectedItemsToAdd):this.updateSelectionList(e,n,this.selectedItemsToRemove));this.btnAddDisabled.set(0==this.selectedItemsToAdd.length),this.btnRemoveDisabled.set(0==this.selectedItemsToRemove.length)}},s.prototype.expandCategory=function(e){for(var t=0;t<this.categories.length;t++)this.categories[t].expand.set(e==t)},s.prototype.expandAllCategories=function(e){void 0===e&&(e=!0);for(var t=0;t<this.categories.length;t++)this.categories[t].expand.set(e)},s.prototype.findCategory=function(e){for(var t=0,n=this.categories;t<n.length;t++){var i=n[t];if(i&&i.title==e)return i}return null},s.prototype.applyFilter=function(e){var t=e.toLowerCase(),n=""==e.trim();this.firstFilteredItem=-1;for(var i=0;i<this.availableItems.length;i++){var r=this.availableItems[i];r.visible.get()&&(n?(""!=this.filterBinding.get()&&this.filterBinding.set(""),r.filtered.set(!1)):(r.filtered.set(!(0<=r.title.toLowerCase().indexOf(t)||0<=r.fieldName.toLowerCase().indexOf(t))),this.firstFilteredItem<0&&!r.filtered.get()&&(this.firstFilteredItem=i),this.filterBinding.get()!=e&&this.filterBinding.set(e)))}if(0<this.categories.length)if(n){var a=0<this.selectedItemsToAdd.length&&0<this.selectedItemsToAdd[0].categories.length?this.selectedItemsToAdd[0].categories[0].id:0;this.expandCategory(a)}else this.expandAllCategories()},s.prototype.handleFilterSpecialKeys=function(t){switch(t){case e.TextInputBinding.kKeycodeEscape:this.filterBinding.set("");break;case e.TextInputBinding.kKeycodeEnter:0<=this.firstFilteredItem&&this.toggleItem(this.availableItems[this.firstFilteredItem])}},s.prototype.setupDragAndDrop=function(){var e,t,n=this;(t=e||(e={}))[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Middle=3]="Middle";var r=this.bListElement,o=!1,c=0,d=0,u=null,h=null,p=this.options.listWidget,m=e.None,g=function(e){if(e instanceof MouseEvent){if(e.pageY)return e.pageY;if(e.clientY)return e.clientY+(r.scrollTop?r.scrollTop:document.body.scrollTop)}else if(e instanceof TouchEvent&&0<e.touches.length){if(e.touches[0].pageY)return e.touches[0].pageY;if(e.touches[0].clientY)return e.touches[0].clientY+(r.scrollTop?r.scrollTop:document.body.scrollTop)}return null},f=function(t){var n=e.None,i=t.getAttribute("data-frozen");return"left"==i?n=e.Left:"right"==i?n=e.Right:"middle"==i&&(n=e.Middle),n},v=function(t){0<t&&n.draggingItem.element.nextElementSibling&&(f(n.draggingItem.element.nextElementSibling)==e.None?(n.draggingItem.element.nextElementSibling.classList.add("cell-w-column-chooser__item-drag--prev-item"),n.draggingItem.element.classList.remove("cell-table__cell--drag-disabled")):n.draggingItem.element.classList.add("cell-table__cell--drag-disabled")),t<0&&n.draggingItem.element.previousElementSibling&&(f(n.draggingItem.element.previousElementSibling)==e.None?(n.draggingItem.element.previousElementSibling.classList.add("cell-w-column-chooser__item-drag--next-item"),n.draggingItem.element.classList.remove("cell-table__cell--drag-disabled")):n.draggingItem.element.classList.add("cell-table__cell--drag-disabled"))},y=function(){n.draggingItem.element.nextElementSibling&&n.draggingItem.element.nextElementSibling.classList.remove("cell-w-column-chooser__item-drag--prev-item"),n.draggingItem.element.previousElementSibling&&n.draggingItem.element.previousElementSibling.classList.remove("cell-w-column-chooser__item-drag--next-item"),n.draggingItem.element.classList.remove("cell-table__cell--drag-disabled")},b=function(t){var o=i(n.draggingItem.element)+t;o>=n.displayedItems.length&&(o=n.displayedItems.length-1),o<0&&(o=0);var c=n.displayedItems[o];if(n.draggingItem==c||f(c.element)!=e.None)return!1;var d=s.getRealID(n.draggingItem),u=o;return y(),r.insertBefore(n.draggingItem.element,t<0?c.element:c.element.nextSibling),v(t),n.draggingItem.id=u,c.id=d,n.allowDirectUpdate?p.moveColumn(d,u):n.modifiers.push(new l(a.Move,n.draggingItem.fieldName,d,u)),n.displayedItems.splice(u,0,n.displayedItems.splice(d,1)[0]),!0},T=function(t){if(t=t||window.event,!o)return!0;var i=parseInt(n.draggingItem.element.style.height)||26;i+=5;var r,a=g(t),s=0<=(r=(a-c)/i)?Math.floor(r):Math.ceil(r);if(0!=s&&m==e.None)b(s)&&(c=a),d=a,n.draggingItem.element.style.top="0px";else if(a!=d)if(m==e.None){var l=parseInt(n.draggingItem.element.style.top)||0;n.draggingItem.element.style.top=l+(a-d)+"px",y(),Math.abs(a-c)>i/2&&v(a-c),d=a}else n.draggingItem.element.classList.add("cell-table__cell--drag-disabled");return!1},S=function(t){return t=t||window.event,!n.draggingItem||!t.target.classList.contains("cell-w-column-chooser__item-drag")||(o=!0,c=g(t),d=c,(m=f(n.draggingItem.element))==e.None?(n.draggingItem.element.style.zIndex="1",n.draggingItem.element.classList.add("cell-w-column-chooser__item-drag--current-item")):n.draggingItem.element.classList.add("cell-table__cell--drag-disabled"),n.allowDirectUpdate&&n.options.listWidget.beginUpdate(),r.onmousemove&&(u=r.onmousemove),r.onmousemove=T,r.ontouchmove&&(h=r.ontouchmove),r.ontouchmove=T,!1)},C=function(){return!n.draggingItem||!o||(f(n.draggingItem.element)==e.None?(n.draggingItem.element.style.top="0px",n.draggingItem.element.style.zIndex="0",n.draggingItem.element.classList.remove("cell-w-column-chooser__item-drag--current-item")):n.draggingItem.element.classList.remove("cell-table__cell--drag-disabled"),y(),n.draggingItem=null,u&&(r.onmousemove=u,u=null),h&&(r.ontouchmove=h,h=null),n.allowDirectUpdate&&n.options.listWidget.endUpdate(),d=c=0,o=!1)};r.onkeyup=function(e){n.draggingItem&&(e.shiftKey&&38===e.which?(b(-1),n.draggingItem.element.focus()):e.shiftKey&&40===e.which&&(b(1),n.draggingItem.element.focus()))},r.onmousedown=S,r.onmouseup=C,r.onmouseleave=C,r.ontouchstart=S,r.ontouchend=C,r.ontouchend=C},s.kLanguageKey="columnChooser",s}(e.WidgetBase);e.ColumnChooserWidget=d}(Infront||(Infront={})),function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.sortOrder=e.SortOrder.Desc,n.defaultSortedColumn="_FEED_DESCRIPTION",n.columns=[{name:"_FEED_DESCRIPTION",heading:"Feed",type:e.FieldType.Custom,content:function(e,t,n){return e.feedDescription}},{name:"_CONNECTION_STATE_DESCRIPTION",heading:"Status",type:e.FieldType.Custom,content:function(e,t,n){return e.connectionStateDescription}},{name:"_SERVER_DESCRIPTION",heading:"Category",type:e.FieldType.Custom,content:function(e,t,n){return e.serverDescription}},{name:"_HOST",heading:"IP Address",type:e.FieldType.Custom,content:function(e,t,n){return e.host}},{name:"_PID",heading:"PID",allowZero:!0,dataType:e.DataType.Numeric,type:e.FieldType.Custom,content:function(e,t,n){if(void 0!==e.pid)return e.pid.toString()}},{name:"_SID",heading:"SID",allowZero:!0,dataType:e.DataType.Numeric,type:e.FieldType.Custom,content:function(e,t,n){if(void 0!==e.sid)return e.sid.toString()}}],n}return __extends(n,t),n}(e.CommonListOptions);e.CommunicationStatusWidgetOptions=t;var n=function(n){function i(e,t,i){var r=n.call(this,e,t,"communicationStatus",i)||this;return r.cols=[],r.counter=0,r.columnManager.sortingEnabled=r.options.sortable,r}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){n.prototype.newInit.call(this)},i.prototype.newBuildUI=function(){var t=e.WidgetDOMFactory.create_WCommunicationStatus_DOM(this.element,this.cols,this.items),i=this.createRootUI(),r=new e.ArrayBinding(t.tbody,this,this.columnManager),a=this.createHeaderRow();i.headerContainer.appendChild(a),i.bodyContainer.appendChild(t.tbody);var s=document.createElement("div");if(this.options.tableHeight&&(s.style.height=this.options.tableHeight+"px"),InfrontUtil.addClassName(s,"cell-table-wrapper"),s.appendChild(i.root),this.element.appendChild(s),this.options.enableFixedHeader&&(80<this.options.tableHeight||80<this.element.offsetHeight)&&(s.style.height=this.element.parentElement.offsetHeight-a.offsetHeight+"px",InfrontUtil.addClassName(s,"cell-table-fixed"),e.PerfectScrollbar)){var o=new e.PerfectScrollbar(s,{suppressScrollX:!0});this.addEventListener(s,"mouseover",function(e){return o.update()})}r=new e.ArrayBinding(i.bodyContainer,this,this.columnManager),this.items.observe(r),this.columnManager.updateDefaultContent(),this.progressIndicator=new e.ProgressIndicator(this.element),n.prototype.newBuildUI.call(this)},i.prototype.setOptions=function(t){this.options=t,this.defaultCompareFunc=this.options.sortOrder==e.SortOrder.Desc?e.CompareFunctions.compareStringsDesc:e.CompareFunctions.compareStringsAsc,this.currentCompareFunc=this.defaultCompareFunc},i.prototype.newSubscribe=function(){this.columnManager.subscribe(),n.prototype.newSubscribe.call(this)},i.prototype.htmlElementTreeAdded=function(e,t,n){this.columnManager.htmlElementTreeAdded(e,t,n)},i.prototype.htmlElementTreeRemoved=function(t,n,i){e.WidgetDOMFactory.unbindAll(t)},i.prototype.htmlElementTreeMoved=function(e,t,n,i){},i.prototype.linkEvent=function(e){},i.prototype.sortColumnChanged=function(t,n,r){if(t){var a=i.formatToCamelCase(t.name.substr(1));switch(n){case e.SortOrder.Asc:this.currentCompareFunc=function(t,n){return e.CompareFunctions.compareStringsAsc(t[a],n[a])};break;case e.SortOrder.Desc:this.currentCompareFunc=function(t,n){return e.CompareFunctions.compareStringsDesc(t[a],n[a])};break;case e.SortOrder.None:this.currentCompareFunc=function(t,n){return e.CompareFunctions.compareStringsDesc(t.feedDescription,n.feedDescription)}}this.items.setCompareFunction(this.currentCompareFunc)}},i.formatToCamelCase=function(e){for(var t=e.toLowerCase().split("_"),n="",i=0;i<t.length;i++)n+=0===i?t[i]:t[i].charAt(0).toUpperCase()+t[i].slice(1);return n},i.prototype.setListItems=function(){var t=this;this.items=new e.SortedObservableArray(function(e,t){return null},!1);var n=new e.DataOptions;n.onData=function(e){e.forEach(function(e,n){var i=t.items.findObjectItemIndex(e,"host");-1<i?(t.items.removeItemAt(i),t.items.insert(e,i)):t.items.push(e),e.connectionState===IDS.ConnectionState.Closed&&setTimeout(function(){t.items.removeItemAt(t.items.findObjectItemIndex(e,"host"))},1e3)})},this.infrontUI.getModel().getConnectionStatus(n,!0)},i.prototype.createRow=function(e,t){var n,i=this.createElementRowFromCache(e,e,0),r=i.getElementsByTagName("td");switch(e.connectionState){case IDS.ConnectionState.None:case IDS.ConnectionState.Connecting:case IDS.ConnectionState.WaitFirstPacket:n="cell-status-warning";break;case IDS.ConnectionState.Running:n="cell-status-positive";break;case IDS.ConnectionState.Closing:n="cell-status-warning";break;case IDS.ConnectionState.Suspended:n="cell-status-negative"}for(var a=0;a<r.length;a++)r[a].className+=" "+n,i.children[a]=r[a];return i},i.prototype.setColumnManager=function(){var t=this;this.columnManager=new e.ColumnManager(this.options,this.infront,this.infrontUI,null,this.subscribes),this.columnManager.setLinkTriggerCallback(function(e,n,i){return t.linkEvent(i.instrument)}),this.columnManager.currentSortOrder=this.options.sortOrder},i.prototype.rowClicked=function(t){if(this.options.onRowClicked){var n=e.CacheKeyFactory.createInstrumentKey(t);this.options.onRowClicked(this.cache.getInstrument(n))}},i}(e.CommonListWidgetBase);e.CommunicationStatusWidget=n}(Infront||(Infront={})),function(e){var t,n;(n=t=e.CompactModifyState||(e.CompactModifyState={}))[n.INPUT=0]="INPUT",n[n.CONFIRM=1]="CONFIRM",n[n.EXECUTE=2]="EXECUTE";var i=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.confirmation=e.OrderEntryConfirmation.SIMPLE,n}return __extends(n,t),n}(e.TradingWidgetOptions);e.CompactModifyOrderWidgetOptions=i;var r=function(n){function r(i,r,a){var s=n.call(this,i,r,"compactModifyOrder",a)||this;return s.volumeInput=new e.TextInputBinding,s.priceInput=new e.TextInputBinding,s.orderState=new e.Observable,s.orderState.set(e.OrderState.PENDING),s.orderStateText=new e.Observable,s.orderStateText.set(s.infrontUI.languageHandler.get("orderEntry","orderPending")),s.showError=new e.Observable,s.errorMessage=new e.Observable,s.errorMessage.set(-1),s.errorMessage.observe(e.BindingFactory.createInlineBinding(function(e){s.showError.set(InfrontUtil.isString(e)&&0<e.length)})),s.state=new e.Observable,s.state.set(t.INPUT),s.decimals=e.UI.kDefaultDecimals,s.infrontUI.AddTradingManagerObserver(s),s}return __extends(r,n),r.prototype.returnDefaultWidgetOptions=function(){return new i},r.prototype.changeState=function(e){if(this.state.get()!=e){switch(e){case t.INPUT:this.modifyOptions=null;break;case t.CONFIRM:case t.EXECUTE:}this.state.set(e)}},r.prototype.newBuildUI=function(){var t=this;if(this.currentPortfolio){var n=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.name,this.options.order),i=e.WidgetDOMFactory.create_WCompactModifyOrder_DOM(this.element,this.widgetTitle,this.state,this.options.order,this.options.confirmation,function(){return t.modifyClick()},function(){return t.confirmClick()},function(){return t.cancelClick()},this.infrontUI.languageHandler);this.confirmBody=i.confirmBody,this.executeContainer=i.executeContainer,this.cache.asyncGet(function(r){var a=t.cache.get(n,[e.MWSConstants.instrument,e.MWSConstants.feed]);t.infront.getFeedHandler().getFeed(a,function(r){t.decimals=r.decimals||e.UI.kDefaultDecimals;var s=t.cache.get(n,[e.MWSConstants.instrument,e.MWSConstants.ticker]),o=t.cache.get(n,e.MWSConstants.buy_or_sell),l=t.cache.get(n,e.MWSConstants.order_type),c=t.cache.get(n,e.MWSConstants.valid_until);t.instrument=new e.Instrument(a,s);var d=document.createDocumentFragment();d.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([o,s]));var u=document.createElement("tr"),h=document.createElement("td");u.appendChild(h),h.innerHTML=t.infrontUI.languageHandler.get(e.OrderEntryWidget.kLanguageKey,"validity");var p=document.createElement("td");u.appendChild(p),p.className="cell-no-padding",t.validity=new e.DateSelector(p,t.infrontUI.languageHandler),t.validity.setDate(new Date(c)),d.appendChild(u),t.volumeInput.set(t.cache.get(n,e.MWSConstants.volume).toString());var m=e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.OrderEntryWidget.kLanguageKey,"volume"),t.volumeInput);if(d.appendChild(m),l==e.OrderType.STRATEGY){var g=t.cache.get(n,e.MWSConstants.algo_id);if(g==e.AdvancedOEOptionsWidget.kStopLossAlgoId)t.triggerPriceInput=new e.TextInputBinding,t.triggerPriceInput.set(t.cache.get(n,[e.MWSConstants.algo_params,e.AdvancedOEOptionsWidget.kTriggerPriceId.toLowerCase()])),d.appendChild(e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"triggerPrice"),t.triggerPriceInput)),t.limitPriceInput=new e.TextInputBinding,t.limitPriceInput.set(t.cache.get(n,[e.MWSConstants.algo_params,e.AdvancedOEOptionsWidget.kLimitPriceId.toLowerCase()])),d.appendChild(e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"limitPrice"),t.limitPriceInput));else if(g==e.AdvancedOEOptionsWidget.kTrailingStopLossPctAlgoId)t.trailLimitInput=new e.TextInputBinding,t.trailLimitInput.set(t.cache.get(n,[e.MWSConstants.algo_params,e.AdvancedOEOptionsWidget.kTrailLimitId.toLowerCase()])),d.appendChild(e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"trailLimit")+"(%)",t.trailLimitInput)),t.deviationInput=new e.TextInputBinding,t.deviationInput.set(t.cache.get(n,[e.MWSConstants.algo_params,e.AdvancedOEOptionsWidget.kDeviationPctId.toLowerCase()])),d.appendChild(e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"deviation")+"(%)",t.deviationInput));else if(g==e.AdvancedOEOptionsWidget.kTrailingStopLossTicksAlgoId){var f="("+t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"ticks")+")";t.trailLimitInput=new e.TextInputBinding,t.trailLimitInput.set(t.cache.get(n,[e.MWSConstants.algo_params,e.AdvancedOEOptionsWidget.kTrailLimitId.toLowerCase()])),d.appendChild(e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"trailLimit")+f,t.trailLimitInput)),t.deviationInput=new e.TextInputBinding,t.deviationInput.set(t.cache.get(n,[e.MWSConstants.algo_params,e.AdvancedOEOptionsWidget.kDeviationTicksId.toLowerCase()])),d.appendChild(e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"deviation")+f,t.deviationInput))}}else{t.priceInput.set(t.cache.get(n,e.MWSConstants.price).toString());var v=e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.OrderEntryWidget.kLanguageKey,"price"),t.priceInput);d.appendChild(v),t.cache.has(n,e.MWSConstants.open_volume)&&(t.openVolumeInput=new e.TextInputBinding,t.openVolumeInput.set(t.cache.get(n,e.MWSConstants.open_volume)),d.appendChild(e.WidgetDOMFactory.create_WCompactModifyTextinputRow_DOM(t.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"openVolume"),t.openVolumeInput)))}i.parameterBody.appendChild(d)})},n,[e.TradingManager.kInitializedField])}},r.prototype.newDestroyUI=function(){n.prototype.newDestroyUI.call(this)},r.prototype.modifyClick=function(){var n=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.name,this.options.order),i=this.infront.getCache();this.modifyOptions=new e.ModifyOrderOptions,e.WidgetDOMFactory.unbindAll(this.confirmBody),InfrontUtil.removeAllChildNodes(this.confirmBody),this.modifyOptions.instrument=this.instrument;var r=document.createDocumentFragment(),a=i.get(n,[e.MWSConstants.instrument,e.MWSConstants.ticker]),s=i.get(n,e.MWSConstants.buy_or_sell);r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([s,a])),this.modifyOptions.validUntil=this.validity.getDate(),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM(["Validity",InfrontUtil.formatDate(this.modifyOptions.validUntil)])),this.modifyOptions.volume=parseInt(this.volumeInput.get()),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM(["Volume",InfrontUtil.formatNumber(this.modifyOptions.volume,0)]));var o=this.infrontUI.getDataAccess().getOrder(this.options.order,this.currentPortfolio.name);if(o.hasOwnProperty(e.MWSConstants.custom_tags)){this.modifyOptions.customTags=[];var l=o[e.MWSConstants.custom_tags];for(var c in l)if(l.hasOwnProperty(c)){var d=l[c];this.modifyOptions.customTags.push({id:c,value:d})}}if(i.get(n,e.MWSConstants.order_type)==e.OrderType.STRATEGY){var u=i.get(n,e.MWSConstants.algo_id),h=[],p=InfrontUtil.getTradingAlgoParamDateString(this.validity.getDate());if(h.push({id:e.AdvancedOEOptionsWidget.kTriggerValidityId,value:p}),u==e.AdvancedOEOptionsWidget.kStopLossAlgoId){h.push({id:e.AdvancedOEOptionsWidget.kTriggerConditionId,value:i.get(n,[e.MWSConstants.algo_params,e.AdvancedOEOptionsWidget.kTriggerConditionId.toLowerCase()])});var m=InfrontUtil.parseFloatValue(this.triggerPriceInput.get());h.push({id:e.AdvancedOEOptionsWidget.kTriggerPriceId,value:m.toString()}),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([this.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"triggerPrice"),InfrontUtil.formatNumber(m,this.decimals)]));var g=InfrontUtil.parseFloatValue(this.limitPriceInput.get());h.push({id:e.AdvancedOEOptionsWidget.kLimitPriceId,value:g.toString()}),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([this.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"limitPrice"),InfrontUtil.formatNumber(g,this.decimals)]))}else if(u==e.AdvancedOEOptionsWidget.kTrailingStopLossPctAlgoId||u==e.AdvancedOEOptionsWidget.kTrailingStopLossTicksAlgoId){var f=u==e.AdvancedOEOptionsWidget.kTrailingStopLossPctAlgoId,v=f?"(%)":"("+this.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"ticks")+")",y=InfrontUtil.parseFloatValue(this.trailLimitInput.get());h.push({id:e.AdvancedOEOptionsWidget.kTrailLimitId,value:y.toString()}),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([this.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"trailLimit")+v,y.toString()]));var b=InfrontUtil.parseFloatValue(this.deviationInput.get());h.push({id:f?e.AdvancedOEOptionsWidget.kDeviationPctId:e.AdvancedOEOptionsWidget.kDeviationTicksId,value:b.toString()}),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([this.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"deviation")+v,b.toString()]))}this.modifyOptions.algoParams=h}else this.modifyOptions.price=InfrontUtil.parseFloatValue(this.priceInput.get()),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([this.infrontUI.languageHandler.get(e.OrderEntryWidget.kLanguageKey,"price"),InfrontUtil.formatNumber(this.modifyOptions.price,this.decimals)])),this.openVolumeInput&&0<parseInt(this.openVolumeInput.get())&&(this.modifyOptions.openVolume=parseInt(this.openVolumeInput.get()),r.appendChild(e.WidgetDOMFactory.create_WGenericTableRow_DOM([this.infrontUI.languageHandler.get(e.AdvancedOEOptionsWidget.kLanguageKey,"openVolume"),InfrontUtil.formatNumber(this.modifyOptions.openVolume,0)])));this.confirmBody.appendChild(r),this.options.confirmation==e.OrderEntryConfirmation.NONE?this.confirmClick():(this.options.confirmation==e.OrderEntryConfirmation.EXTERNAL&&this.options.confirmationCallback&&this.options.confirmationCallback(this.modifyOptions),this.changeState(t.CONFIRM))},r.prototype.showExecuteScreen=function(){e.WidgetDOMFactory.unbindAll(this.executeContainer),InfrontUtil.removeAllChildNodes(this.executeContainer),e.WidgetDOMFactory.create_WCompactModifyExecuteScreen_DOM(this.executeContainer,this.showError,this.orderState,this.orderStateText,this.errorMessage,this.infront.getCache(),e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.name,this.options.order),this.infrontUI.languageHandler),this.changeState(t.EXECUTE)},r.prototype.confirmOrder=function(){this.options.confirmation==e.OrderEntryConfirmation.EXTERNAL&&this.state.get()==t.CONFIRM&&this.confirmClick()},r.prototype.confirmClick=function(){var t=this;this.orderState.set(e.OrderState.PENDING),this.modifyOptions.onData=function(n){t.showExecuteScreen();var i=e.CacheKeyFactory.createOrderIdKey(t.currentPortfolio.name,t.options.order);t.unbinds.push(t.infront.getCache().customBind(i,e.BindingCache.kCacheTimestampField,e.BindingFactory.createInlineBinding(function(n){var a=t.infront.getCache().get(i,e.MWSConstants.order_status),s=t.infront.getCache().get(i,e.MWSConstants.fail_code);a==e.OrderStatus.PENDING_MODIFY_ORDER?t.orderState.set(e.OrderState.PENDING):InfrontUtil.isString(s)&&s?(t.orderState.set(e.OrderState.FAILED),t.orderStateText.set(t.infrontUI.languageHandler.get(r.kLanguageKey,"fail"))):(t.orderState.set(e.OrderState.SUCCESS),t.orderStateText.set(t.infrontUI.languageHandler.get(r.kLanguageKey,"success")))})))},this.modifyOptions.onError=function(n,i){t.orderState.set(e.OrderState.FAILED),t.orderStateText.set(t.infrontUI.languageHandler.get(r.kLanguageKey,"fail")),t.errorMessage.set(i),t.showExecuteScreen()},this.infront.trModifyOrder(this.currentPortfolio.name,this.options.order,this.modifyOptions)},r.prototype.cancelClick=function(){this.state.get()==t.CONFIRM?this.changeState(t.INPUT):this.options.onCancelClick&&this.options.onCancelClick()},r.prototype.currentPortfolioChanged=function(t){var n=this;if(null==t)this.destroy();else if(!this.currentPortfolio||this.currentPortfolio.name!=t.name){this.currentPortfolio=t;var i=e.CacheKeyFactory.createOrderIdKey(t.name,this.options.order);this.errorMessageUnbind&&this.errorMessageUnbind(),this.errorMessageUnbind=this.infront.getCache().customBind(i,e.MWSConstants.error_message,e.BindingFactory.createInlineBinding(function(e){n.errorMessage.set(e)})),this.orderStatusUnbind&&this.orderStatusUnbind(),this.isInitialised&&(this.newDestroyUI(),this.newBuildUI())}},r.kLanguageKey="compactModifyOrder",r}(e.TradingWidgetBase);e.CompactModifyOrderWidget=r}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.CompanyDescriptionWidgetOptions=t;var n=function(n){function i(e,t,r){return n.call(this,e,t,i.kLanguageKey,r)||this}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){var e=this;this.infront.fundamentalDataPromise(this.options.instrument.feed,this.options.instrument.ticker,[2371]).then(function(t){e.description=t.descr,n.prototype.newInit.call(e)}).catch(function(t){e.description=void 0,n.prototype.newInit.call(e)})},i.prototype.newBuildUI=function(){e.WidgetDOMFactory.create_WCompanyDescription_DOM(this.element,this.widgetTitle,this.description),n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){n.prototype.newDestroyUI.call(this)},i.kLanguageKey="companyDescription",i}(e.SingleInstrumentWidgetBase);e.CompanyDescriptionWidget=n}(Infront||(Infront={})),function(e){var t,n;(n=t=e.CompanyFundamentalsRows||(e.CompanyFundamentalsRows={})).EV_Sales="EV/SALES",n.PE_ratio="P/E_RATIO",n.ROE="ROE",n.Dividend_yield="DIVIDEND_YIELD",n.Change_y="CHANGE_Y",n.Credit_losses="CREDIT_LOSSES",n.PE="P/E",n.Revenue="REVENUE",n.Net_commission_income="NET_COMMISSION_INCOME",n.Net_interest_income="NET_INTEREST_INCOME",n.Profit_after_tax="PROFIT_AFTER_TAX",n.Profit_before_tax="PROFIT_BEFORE_TAX",n.Total_income="TOTAL_INCOME",n.Total_costs="TOTAL_COSTS",n.Total_assets="TOTAL_ASSETS",n.Dividend_per_share="DIVIDEND_PER_SHARE",n.EPS="EPS",n.EPS_adjusted="EPS_ADJUSTED",n.Stocks="STOCKS",n.EBITDA="EBITDA",n.EBITA="EBITA",n.EBIT="EBIT";e.CompanyFundamentalsData=function(){};var i=function(e){this.data=e};e.CompanyFundamentalsItem=i;var r=function(){this.actualsYears=[],this.estimateYears=[],this.normalizedData={}};e.CompanyFundamentalsCollection=r;var a=function(){function e(){}return e.convertKeys=function(e){var t={};for(var n in e)t[this.getFundamentalsKeyFromSwedish(n)]=e[n];return t},e.getFundamentalsKeyFromSwedish=function(e){switch(e.toUpperCase()){case"EV/SALES":return t.EV_Sales;case"P/E TAL, JUSTERAT":return t.PE;case"AVKASTNING, EGET KAPITAL":return t.ROE;case"DIREKTAVKASTNING":return t.Dividend_yield;case"FORANDRING AR/AR":return t.Change_y;case"KREDITFORLUSTER":return t.Credit_losses;case"KURS / EGET KAPITAL":return t.PE;case"OMS\xc4TTNING":return t.Revenue;case"PROVISIONSNETTO":return t.Net_commission_income;case"RANTENETTO":return t.Net_interest_income;case"RESULTAT F\xd6RE SKATT":return t.Profit_before_tax;case"TOTALA INTAKTER":return t.Total_income;case"TOTALA KOSTNADER":return t.Total_costs;case"TOTALA TILLGANGAR":return t.Total_assets;case"UTDELNING PER AKTIE":return t.Dividend_per_share;case"VINST PER AKTIE":return t.EPS;case"VINST PER AKTIE JUSTERAD":return t.EPS_adjusted;case"ANTAL AKTIER":return t.Stocks;case"BRUTTORESULTAT":return t.Profit_before_tax;case"NETTORESULTAT":return t.Profit_after_tax;case"VINST F\xd6RE SKATT":return t.EBIT;case"R\xd6RELSERESULTAT":return t.EBITA;case"EBITDA":return t.EBITDA}},e}();e.CompanyFundamentalsFactory=a;var s=function(e){this.year=this.label=e},o=function(e){function t(t,n){var i=e.call(this,t)||this;return i.hasEstimates=!0,i.label=t+n,i}return __extends(t,e),t}(e.CompanyFundamentalsColumn=s);e.CompanyFundimentalsEstimatesColum=o;var l=function(n){function i(){var i=null!==n&&n.apply(this,arguments)||this;return i.rows=[t.EV_Sales,t.PE_ratio,t.ROE,t.Dividend_yield,t.Change_y,t.Credit_losses,t.PE,t.Revenue,t.Net_commission_income,t.Net_interest_income,t.Profit_before_tax,t.Profit_after_tax,t.Total_income,t.Total_costs,t.Total_assets,t.Stocks,t.Dividend_per_share,t.EPS,t.EPS_adjusted,t.EBIT,t.EBITA,t.EBITDA],i.actualLimit=void 0,i.estimateLimit=void 0,i.hideEstimates=!1,i.estimatesSubfix="p",i.layout=e.ListLayout.TABLE,i}return __extends(i,n),i}(e.SingleInstrumentWidgetOptions);e.CompanyFundamentalsWidgetOptions=l;var c=function(t){function n(e,i,r){var a=t.call(this,e,i,n.kLanguageKey,r)||this;return a.rowHandlers={},a.languageHandler=i.languageHandler,a}return __extends(n,t),n.prototype.returnDefaultWidgetOptions=function(){return new l},n.prototype.newInit=function(){var e=this;this.columns=[],this.rows=[],this.infront.fundamentalDataPromise(this.options.instrument.feed,this.options.instrument.ticker,[2371],"swe").then(function(n){e.currency=n.currency,e.data=a.convertKeys(n.fundamentals),e.data=e.data?e.data:{},e.rows=e.convertRows(),e.processData(),e.filterFundamentals(),e.setHasContent(JSON.stringify(e.data)!==JSON.stringify({}),e.data),e.hasContent=e.getHasContent(),t.prototype.newInit.call(e)}).catch(function(n){e.fundamentalsDataCollection=new r,e.setHasContent(!1),e.hasContent.set(!1),t.prototype.newInit.call(e)})},n.prototype.newBuildUI=function(){null!=this.fundamentalsDataCollection&&null!=this.fundamentalsDataCollection.normalizedData?this.hasContent.set("{}"!==JSON.stringify(this.fundamentalsDataCollection.normalizedData)&&null!=this.fundamentalsDataCollection.normalizedData):this.hasContent.set(!1);var n=e.WidgetDOMFactory.create_WCompanyFundamentals_DOM(this.element,this.widgetTitle,this.currency,this.columns,this.options.layout,this.hasContent,this.languageHandler);if(this.hasContent.get()&&(this.options.layout==e.ListLayout.CARD?this.createCardRow(n):this.createTableRow(n)),e.PerfectScrollbar){var i=new e.PerfectScrollbar(n.parentElement,{suppressScrollX:!0});this.addEventListener(n.parentElement,"mouseover",function(e){return i.update()})}t.prototype.newBuildUI.call(this)},n.prototype.createTableRow=function(t){var n=this.options.layout==e.ListLayout.TABLE?"cell-table__item":"cell-flex-row cell-w-company-fundamentals__list-item";for(var i in this.fundamentalsDataCollection.normalizedData)for(var r=this.fundamentalsDataCollection.normalizedData[i],a=0,s=this.rows;a<s.length;a++){var o=s[a];if(o.cellName==i){var l=document.createElement(this.options.layout==e.ListLayout.TABLE?"tr":"section");l.className=n;var c=document.createElement(this.options.layout==e.ListLayout.TABLE?"td":"div");c.className="cell-table__text",c.innerHTML="<span class='"+(this.options.layout==e.ListLayout.TABLE?"":"cell-w-company-fundamentals__list-item-field")+"'>"+(o.heading?o.heading:r.label)+"</span>",this.options.layout!=e.ListLayout.FLEX&&this.options.layout!=e.ListLayout.DIV||InfrontUtil.addClassName(c,"cell-flex-column cell-w-company-fundamentals__list-cell"),l.appendChild(c);for(var d=0,u=this.columns;d<u.length;d++){var h=u[d],p=document.createElement(this.options.layout==e.ListLayout.TABLE?"td":"div");if(p.className="cell-table__num",this.options.layout!=e.ListLayout.FLEX&&this.options.layout!=e.ListLayout.DIV||InfrontUtil.addClassName(p,"cell-flex-column cell-w-company-fundamentals__list-cell"),r.data[h.year]){var m,g=r.data[h.year].value;m=this.rowHandlers[o.dataBind]?this.rowHandlers[o.dataBind].translate(r,g):1e4<g?InfrontUtil.formatAndShortenInteger(g):InfrontUtil.formatNumber(g,2);var f="<span class='cell-w-company-fundamentals__list-item-label'>"+h.year+"</span>",v="<span class='cell-w-company-fundamentals__list-item-field'>"+m+"</span>";p.innerHTML=f+v}else p.innerHTML="-";l.appendChild(p)}t.appendChild(l)}}},n.prototype.createCardRow=function(e){for(var t=0,n=this.columns;t<n.length;t++){var i=n[t],r=document.createElement("section"),a=document.createElement("div"),s=document.createElement("h4");for(var o in r.className="cell-flex-row cell-flex-unstack cell-w-company-fundamentals__list-item--card",a.className="cell-flex-column ",s.className="cell-h4",s.innerHTML=i.year,r.appendChild(a),a.appendChild(s),this.fundamentalsDataCollection.normalizedData){for(var l=this.fundamentalsDataCollection.normalizedData[o],c=0,d=this.rows;c<d.length;c++){var u=d[c];if(u.cellName==o){var h=document.createElement("div");h.className="cell-flex-column ";var p=document.createElement("span");p.innerHTML=u.heading?u.heading:l.label,p.className="cell-w-company-fundamentals__list-item--card-label",h.appendChild(p);var m=document.createElement("span");if(m.className="cell-w-company-fundamentals__list-item--card-field",h.appendChild(m),l.data[i.year]){var g,f=l.data[i.year].value;g=this.rowHandlers[u.dataBind]?this.rowHandlers[u.dataBind].translate(l,f):1e4<f?InfrontUtil.formatAndShortenInteger(f):InfrontUtil.formatNumber(f,2),m.innerHTML=g}else m.innerHTML="-";r.appendChild(h)}}e.appendChild(r)}}},n.prototype.newDestroyUI=function(){t.prototype.newDestroyUI.call(this)},n.prototype.processData=function(){this.fundamentalsDataCollection=new r;for(var e=0,t=this.rows;e<t.length;e++){var n=t[e].cellName;if(this.data[n])for(var a=this.fundamentalsDataCollection.normalizedData[n]={label:this.data[n][0].currency&&this.data[n][0].currency!=this.currency?this.data[n][0].item+" ("+this.data[n][0].currency+")":this.data[n][0].item,data:{}},s=void 0,o=void 0,l=0,c=this.data[n];l<c.length;l++){var d=c[l],u=a.data[d.period]=new i(d);s=this.fundamentalsDataCollection.actualsYears.indexOf(d.period),o=this.fundamentalsDataCollection.estimateYears.indexOf(d.period),d.isEstimate?(u.value=d.estimateMean,o<0&&this.fundamentalsDataCollection.estimateYears.push(d.period),-1<s&&this.fundamentalsDataCollection.actualsYears.splice(s)):(u.value=d.actual,s<0&&o<0&&this.fundamentalsDataCollection.actualsYears.push(d.period))}}},n.prototype.convertRows=function(){this.rowHandlers={};for(var e=[],t=0,n=0;n<this.options.rows.length;n++){t++;var i=this.options.rows[n],r={};InfrontUtil.isString(i)?(r.cellName=i,r.heading=i,r.className="cell-table__num"):i&&(r.cellName=i.name,r.heading=i.heading,r.className=i.className?i.className+" ":"cell-table__num",i.translate&&(r.dataBind="customfield"+t,r.customfieldId="customfield"+t,this.rowHandlers[r.dataBind]={translate:i.translate,id:t})),e.push(r)}return e},n.prototype.filterFundamentals=function(){if(null!=this.options.actualLimit){var e=this.fundamentalsDataCollection.actualsYears.length;InfrontUtil.isPositive(this.options.actualLimit)?this.fundamentalsDataCollection.actualsYears=this.fundamentalsDataCollection.actualsYears.slice(e-this.options.actualLimit):this.fundamentalsDataCollection.actualsYears=this.fundamentalsDataCollection.actualsYears.slice(0,-this.options.actualLimit)}for(var t=0,n=this.fundamentalsDataCollection.actualsYears;t<n.length;t++){var i=n[t];this.columns.push(new s(i))}if(!this.options.hideEstimates){var r=this.fundamentalsDataCollection.estimateYears.length;InfrontUtil.isPositive(this.options.estimateLimit)?this.fundamentalsDataCollection.estimateYears=this.fundamentalsDataCollection.estimateYears.slice(0,this.options.estimateLimit):this.fundamentalsDataCollection.estimateYears=this.fundamentalsDataCollection.estimateYears.slice(r+this.options.estimateLimit);for(var a=0,l=this.fundamentalsDataCollection.estimateYears;a<l.length;a++)i=l[a],this.columns.push(new o(i,this.options.estimatesSubfix))}this.columns.sort(function(e,t){return parseInt(e.label)-parseInt(t.label)})},n.kLanguageKey="companyFundamentals",n}(e.SingleInstrumentWidgetBase);e.CompanyFundamentalsWidget=c}(Infront||(Infront={})),function(e){var t=function(){function e(){this.cache={},this.expando=e.kInfrontDataDefaultPrefix+e.uid++,this.counter=0}return e.prototype.put=function(e,t,n){this.getCacheObject(e,!0)[t]=n},e.prototype.get=function(e,t){var n=null,i=this.getCacheObject(e);return null!=i&&i.hasOwnProperty(t)&&(n=i[t]),n},e.prototype.hasKey=function(e,t){var n=!1,i=this.getCacheObject(e);return null!=i&&i.hasOwnProperty(t)&&(n=!0),n},e.prototype.delete=function(e,t){var n=this.getCacheObject(e);null!=n&&(delete n[t],InfrontUtil.isEmptyObject(n)&&this.clear(e))},e.prototype.clear=function(e){e.hasOwnProperty(this.expando)&&(delete this.cache[e[this.expando]],delete e[this.expando])},e.prototype.getCacheObject=function(e,t){void 0===t&&(t=!1);var n=null;if(e.hasOwnProperty(this.expando)&&this.cache.hasOwnProperty(e[this.expando])&&(n=this.cache[e[this.expando]]),null==n&&t){var i=this.nextKey();n={},this.cache[i]=n,e[this.expando]=i}return n},e.prototype.nextKey=function(){return e.kInfrontDataKeyPrefix+this.counter++},e.kInfrontDataDefaultPrefix="infront-data",e.kInfrontDataKeyPrefix="data ",e.uid=1,e}();e.Data=t}(Infront||(Infront={})),function(e){var t=function(e){function t(n){var i=e.call(this)||this;return i.payload=n,i.name=t.kEventName,i}return __extends(t,e),t.kEventName="onAlertNotificationClick",t}(e.InfrontEvent);e.AlertNotificationClickedEvent=t;var n=function(e){function t(n){var i=e.call(this)||this;return i.payload=n,i.name=t.kEventName,i}return __extends(t,e),t.kEventName="onAlertNotificationShown",t}(e.InfrontEvent);e.AlertNotificationShownEvent=n}(Infront||(Infront={})),function(e){var t,n,i,r,a,s,o,l,c,d,u;(n=t=e.BlinkType||(e.BlinkType={}))[n.Neutral=0]="Neutral",n[n.UpDown=1]="UpDown",n[n.UpDownSame=2]="UpDownSame",n[n.UpDownFlash=3]="UpDownFlash",n[n.Percent=4]="Percent",n[n.None=5]="None",(r=i=e.BlinkDuration||(e.BlinkDuration={}))[r.Default=1e3]="Default",r[r.Short=500]="Short",r[r.Long=2e3]="Long",r[r.Sustained=0]="Sustained",(a=e.ColumnSortDirection||(e.ColumnSortDirection={}))[a.NONE=0]="NONE",a[a.ASC=1]="ASC",a[a.DESC=2]="DESC",(o=s=e.DataType||(e.DataType={}))[o.Boolean=0]="Boolean",o[o.Numeric=1]="Numeric",o[o.Integer=2]="Integer",o[o.Volume=3]="Volume",o[o.ID=4]="ID",o[o.Percent=5]="Percent",o[o.Text=6]="Text",o[o.Enum=7]="Enum",o[o.DateTime=8]="DateTime",o[o.DateOnly=9]="DateOnly",o[o.Time=10]="Time",o[o.DOM=11]="DOM",o[o.IndicatorArrow=12]="IndicatorArrow",o[o.IdsDate=13]="IdsDate",(c=l=e.FieldSource||(e.FieldSource={}))[c.Unknown=0]="Unknown",c[c.Instrument=1]="Instrument",c[c.Snapshot=2]="Snapshot",c[c.Historical=3]="Historical",c[c.Brokerstats=4]="Brokerstats",c[c.IntradayTrades=5]="IntradayTrades",c[c.Position=6]="Position",c[c.Order=7]="Order",c[c.OrderAlgo=8]="OrderAlgo",c[c.Trade=9]="Trade",c[c.Fund=10]="Fund",c[c.Portfolio=11]="Portfolio",c[c.Market=12]="Market",c[c.CalculatedHistory=13]="CalculatedHistory",(u=d=e.FieldType||(e.FieldType={}))[u.Normal=0]="Normal",u[u.Computed=1]="Computed",u[u.Custom=2]="Custom",u[u.Converted=3]="Converted";var h=function(){function e(){}return e.getFieldInfoFromSpec=function(t,n){var i,r={heading:"",fieldName:"",headingHover:""};if(t instanceof p)return i=t,r.fieldName=i.name,r.heading=i.heading,r.headingHover=i.headingHover,r;var a="";InfrontUtil.isString(t)?a=t:InfrontUtil.isObject(t)&&t.hasOwnProperty("name")&&(a=t.name),a=a.toUpperCase();var s=[l.Unknown];return!(i=e.fieldFromNameAndType(a,s,d.Normal))&&0<s.length&&s[0]==l.Unknown&&(i=new z(a,a)),i&&(i.applySpecAndDefaults(t,n),r.fieldName=i.name,r.heading=i.heading,r.headingHover=i.headingHover),r},e.createFieldFromSpec=function(t,n,i){var r;if(void 0===i&&(i=[l.Unknown]),t instanceof p)r=t;else{var a="";InfrontUtil.isString(t)?a=t:InfrontUtil.isObject(t)&&t.hasOwnProperty("name")&&(a=t.name),a=a.toUpperCase();var s=InfrontUtil.isObject(t)&&t.hasOwnProperty("type")?t.type:"",o=d.Normal;""!=s&&(s==e.kCustomType||s==d.Custom?o=d.Custom:s==e.kConvertedType||s==d.Converted?o=d.Converted:s!=e.kComputedType&&s!=d.Computed||(o=d.Computed)),!(r=e.fieldFromNameAndType(a,i,o))&&0<i.length&&i[0]==l.Unknown&&(r=new z(a,a))}return r?(r.applySpecAndDefaults(t,n),r):null},e.createFieldsFromNames=function(t,n){void 0===n&&(n=[l.Unknown]);var i=[];for(var r in t){for(var a=null,s=0;s<n.length&&!a;s++)a=e.fieldFromSource(r,n[s]);a&&i.push(a)}return i},e.isValidSpec=function(t){return InfrontUtil.isString(t)||InfrontUtil.isObject(t)&&(t.hasOwnProperty("name")||t.hasOwnProperty("type")&&t.type===e.kCustomType)},e.isValidFooter=function(t){return InfrontUtil.isString(t)||InfrontUtil.isObject(t)&&t.hasOwnProperty("type")&&t.type===e.kComputedType},e.getSubscriptionFieldsArray=function(e){var t=[];if(e)for(var n=0,i=e;n<i.length;n++)for(var r=0,a=i[n].getSubscriptionFieldNames();r<a.length;r++){var s=a[r];-1==t.indexOf(s)&&t.push(s)}return t},e.fieldFromName=function(e){return"-"===e.charAt(0)&&(e=e.substr(1)),T.hasOwnProperty(e)?T[e]():G.hasOwnProperty(e)?G[e]():_.hasOwnProperty(e)?_[e]():A.hasOwnProperty(e)?A[e]():C.hasOwnProperty(e)?C[e]():f.hasOwnProperty(e)?f[e]():O.hasOwnProperty(e)?O[e]():L.hasOwnProperty(e)?L[e]():F.hasOwnProperty(e)?F[e]():U.hasOwnProperty(e)?U[e]():H.hasOwnProperty(e)?H[e]():R.hasOwnProperty(e)&&InfrontUtil.isFunction(R[e])?R[e]():q.hasOwnProperty(e)?q[e]():y.hasOwnProperty(e)?y[e]():null},e.fieldFromSource=function(t,n){switch(n){case l.Unknown:return e.fieldFromName(t);case l.Instrument:return f.getField(t);case l.Snapshot:return T.getField(t);case l.Historical:return C.getField(t);case l.Brokerstats:return _.getField(t);case l.IntradayTrades:return A.getField(t);case l.Position:return O.getField(t);case l.Order:return L.getField(t);case l.OrderAlgo:return F.getField(t);case l.Trade:return U.getField(t);case l.Fund:return H.getField(t);case l.Portfolio:return R.getField(t);case l.Market:return E.getField(t);default:return null}},e.fieldFromNameAndType=function(t,n,i){"-"===t.charAt(0)&&(t=t.substr(1));for(var r=null,a=0;a<n.length&&!r;a++)switch(i){case d.Normal:r=e.fieldFromSource(t,n[a]);break;case d.Computed:r=G.getField(t)||new V(t,s.Numeric,n[a]);break;case d.Custom:r=new z(t,t);break;case d.Converted:r=new Y(t,t)}return r},e.kCustomType="custom",e.kComputedType="computed",e.kConvertedType="converted",e}();e.FieldsHelper=h;var p=function(){function n(t,n,r,a,o){void 0===r&&(r=s.Text),void 0===a&&(a=!1),void 0===o&&(o=!1),this.name="",this.type=d.Normal,this.sortable=!0,this.sortUsingOriginalValue=!1,this.subscribeFieldName="",this.dataType=s.Text,this.blinkDuration=i.Default,this.visible=new e.OverridableObservable,this.name=t,this.tag=n,this.lowerCaseName=t.toLowerCase(),this.fieldClassName=this.lowerCaseName.replace(/_/g,"-"),this.dataType=r,this.shorten=a,this.visible.set(!0),this.supportsBackgroundFlash=e.ui.options.enableHighlightUpDownChanges&&o}return n.prototype.getFieldSpec=function(){return[this.lowerCaseName]},n.prototype.getFieldTag=function(){return this.tag},n.prototype.getSubscriptionFieldNames=function(){for(var e=[],t=0,n=this.getDependendFields();t<n.length;t++){var i=n[t];i.subscribeFieldName&&-1==e.indexOf(i.subscribeFieldName)&&e.push(i.subscribeFieldName)}return e},n.prototype.getDependendFields=function(){var e=[];if(e.push(this),this.type==d.Computed&&this.computeFields)for(var t=0;t<this.computeFields.length;t++)e=e.concat(this.computeFields[t].getDependendFields());else this.type==d.Converted&&(e=e.concat(this.sourceField.getDependendFields()));return this.hover&&this.hover.name!=this.name&&(e=e.concat(this.hover.getDependendFields())),e},n.prototype.getFieldClassName=function(){return this.fieldClassName},n.prototype.isValid=function(){return this.type==d.Normal||"string"==typeof this.name},n.prototype.applySpecAndDefaults=function(e,t){InfrontUtil.isObject(e)&&this.applySpec(e),this.applyDefaults(e,t)},n.prototype.applyDefaults=function(r,a){switch(a&&(this.languageHandler=a),this.dataType){case e.DataType.Integer:case e.DataType.Numeric:case e.DataType.Percent:this.genericClass=e.CssConstants.kCellNumeric,this.blinkType=this.supportsBackgroundFlash?t.UpDownFlash:t.UpDown;break;case e.DataType.DateOnly:case e.DataType.DateTime:case e.DataType.Volume:case e.DataType.IdsDate:this.genericClass=e.CssConstants.kCellNumeric,this.blinkType=t.Neutral;break;case e.DataType.ID:case e.DataType.Time:this.genericClass=e.CssConstants.kCellNumeric,this.blinkType=t.None;break;case e.DataType.Boolean:case e.DataType.DOM:case e.DataType.Enum:case e.DataType.Text:this.genericClass=e.CssConstants.kCellText,this.blinkType=t.None;break;case e.DataType.IndicatorArrow:this.genericClass=e.CssConstants.kCellArrow,this.blinkDuration=i.Sustained,this.blinkType=t.UpDownSame}this.specificClass=this.genericClass+"--"+this.getFieldClassName(),this.dataType!=s.Enum||this.translate||(this.translate=function(e,t){return InfrontUtil.formatEnumString(t)}),this.languageHandler&&void 0===this.heading&&(this.heading=this.languageHandler.get(n.kFieldsLanguageKey,this.name)),InfrontUtil.isObject(r)&&!0===r.alwaysVisible?this.forceVisible():!0===this.hidden&&this.forceHidden(),"VOLUME_ADV_PCT"===this.name&&(this.blinkType=t.Percent)},n.prototype.applySpec=function(t){InfrontUtil.isObject(t)&&(this.specToProp(t,"hover",h.isValidSpec,!0),this.specToProp(t,"heading",InfrontUtil.isStringOrNull),this.specToProp(t,"headingHover",InfrontUtil.isString),this.specToProp(t,"className",InfrontUtil.isString),this.specToProp(t,"translate",InfrontUtil.isFunction),this.specToProp(t,"sortable",InfrontUtil.isBoolean),this.specToProp(t,"shorten",InfrontUtil.isBoolean),this.specToProp(t,"decimals",InfrontUtil.isNumber),this.specToProp(t,"hidden",InfrontUtil.isBoolean),this.specToProp(t,"footer",h.isValidFooter),this.specToProp(t,"showExtra",InfrontUtil.isBoolean),this.specToProp(t,"onClick",InfrontUtil.isFunction),this.specToProp(t,"flag",InfrontUtil.isBoolean),this.specToProp(t,"footerStrategy",InfrontUtil.isNumber),this.specToProp(t,"weight",InfrontUtil.isString),this.specToProp(t,"url",InfrontUtil.isString),this.specToProp(t,"dataType",InfrontUtil.isNumber),this.specToProp(t,"highlightChange",InfrontUtil.isBoolean),this.specToProp(t,"blinkDuration",InfrontUtil.isNumber),this.specToProp(t,"toggleExpanded",InfrontUtil.isBoolean),this.specToProp(t,"visible",e.Observable.isObservable))},n.prototype.isValidSpecProp=function(e,t,n){return e.hasOwnProperty(t)&&n(e[t])},n.prototype.specToProp=function(e,t,n,i){if(void 0===i&&(i=!1),this.isValidSpecProp(e,t,n))if(i){var r=h.createFieldFromSpec(e[t],this.languageHandler,[this.source,l.Unknown]);r&&(r.forceHidden(),this[t]=r)}else this[t]=e[t];else e.hasOwnProperty(t)&&e[t]&&InfrontUtil.errorLog("Warning: Invalid prop "+t+" when creating field "+this.name,e)},n.prototype.forceVisible=function(){this.visible.override(!0)},n.prototype.forceHidden=function(){this.visible.override(!1)},n.prototype.isSortable=function(){return this.sortable},n.prototype.equals=function(e){return null!=e&&e.name==this.name&&e.heading==this.heading},n.prototype.getValueFromObject=function(t){var n=null,i=this.name.toLowerCase(),r=null;return(r=this.source==l.Instrument?t[e.MWSConstants.instrument]:this.source==l.Historical?t[e.MWSConstants.hist_performance]:t).hasOwnProperty(i)&&(n=r[i]),n},n.prototype.objectHasValue=function(e){for(var t=this.getFieldSpec(),n=!0,i=e,r=0;r<t.length;r++){if(!i.hasOwnProperty(t[r])){n=!1;break}i=i[t[r]]}return n},n.prototype.createValueBinding=function(t,n,i,r,a){var o=this;return this.translate?e.BindingFactory.createTranslateBinding(n,function(e){return o.translate(t,e)},i):this.dataType==s.DateTime?e.BindingFactory.createTimestampBinding(n,!0,i):this.dataType==s.Volume&&this.shorten?e.BindingFactory.createShortenNumberBinding(n,i,a):this.dataType==s.Volume?e.BindingFactory.createVolumeNumberBinding(n,i,a):this.dataType==s.DateOnly?e.BindingFactory.createDateBinding(n,i):this.dataType==s.Percent?e.BindingFactory.createPercentBinding(n,null!=this.decimals?this.decimals:2,i,a):this.dataType==s.Integer&&this.shorten?e.BindingFactory.createShortenNumberBinding(n,i,a):this.dataType==s.Integer?e.BindingFactory.createNumberFormatValueBinding(n,i,0,a):this.dataType==s.ID?e.BindingFactory.createIDBinding(n,i):this.dataType==s.DOM?e.BindingFactory.createDOMElementBinding(n):this.dataType==s.IdsDate?e.BindingFactory.createIdsDateBinding(n,i):this.dataType==s.Boolean?e.BindingFactory.createTranslateBinding(n,function(t){return t?e.ColumnManager.Yes:e.ColumnManager.No},i):this.dataType==s.Text?e.BindingFactory.createValueBinding(n,i):e.BindingFactory.createNumberFormatValueBinding(n,i,r,a)},n.prototype.getCompareFunction=function(t){var n=null;switch(this.dataType){case s.Integer:case s.Numeric:case s.Percent:case s.ID:case s.Volume:n=t==e.SortOrder.Desc?e.CompareFunctions.compareNumberDesc:e.CompareFunctions.compareNumberAsc;break;case s.DateOnly:case s.DateTime:n=t==e.SortOrder.Desc?e.CompareFunctions.compareDateStringsDesc:e.CompareFunctions.compareDateStringsAsc;break;case s.Time:n=t==e.SortOrder.Desc?e.CompareFunctions.compareTimeStringsDesc:e.CompareFunctions.compareTimeStringsAsc;break;case s.Enum:case s.Text:n=t==e.SortOrder.Desc?e.CompareFunctions.compareStringsDesc:e.CompareFunctions.compareStringsAsc}return n},n.kFieldsLanguageKey="columns",n}();e.Field=p;var m=function(){function e(){}return e.getField=function(e){return this.hasOwnProperty(e)?this[e]():null},e}();e.FieldsListBase=m;var g=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.subscribeFieldName=InfrontConstants.Fields.LAST,e.source=l.Instrument,e}return __extends(n,t),n.prototype.getFieldSpec=function(){return[e.MWSConstants.instrument,this.lowerCaseName]},n}(p);e.InstrumentField=g;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.TICKER=function(){return new g("TICKER",IDS.RealtimeTags.Symbol)},t.FULL_NAME=function(){return new g("FULL_NAME",IDS.RealtimeTags.FullName)},t.ISIN=function(){return new g("ISIN",IDS.RealtimeTags.ISIN)},t.CURRENCY=function(){return new g("CURRENCY",IDS.RealtimeTags.Currency)},t.MARKET=function(){return new g("MARKET",IDS.RealtimeTags.Market)},t.INSTRUMENT_TYPE=function(){return new g("INSTRUMENT_TYPE",IDS.MwsRealtimeTags.SymbolType,s.Enum)},t.INSTRUMENT_SUBTYPE=function(){return new g("INSTRUMENT_SUBTYPE",IDS.MwsRealtimeTags.SymbolSubType,s.Enum)},t.STRIKE_PRICE=function(){return new g("STRIKE_PRICE",IDS.RealtimeTags.Strike,s.Numeric)},t.STRIKE=function(){return new g("STRIKE",IDS.RealtimeTags.Strike,s.Numeric)},t.EXPIRY_DATE=function(){return new g("EXPIRY_DATE",IDS.RealtimeTags.Expiry,s.IdsDate)},t.EXPIRY=function(){return new g("EXPIRY",IDS.RealtimeTags.Expiry,s.IdsDate)},t.OPEN_INTEREST=function(){return new g("OPEN_INTEREST",IDS.RealtimeTags.OpenInterest,s.Volume)},t.MIN_ICEBERG_SIZE=function(){return new g("MIN_ICEBERG_SIZE",IDS.RealtimeTags.MinimumIcebergSize,s.Integer)},t.COMPANY_URL=function(){var e=new g("COMPANY_URL",IDS.RealtimeTags.CompanyURL);return e.translate=function(e,t){var n=0==t.indexOf("http://")?t.substring(7):0==t.indexOf("https://")?t.substring(8):t;return'<a href="'+t+'" target="_blank">'+n+"</a>"},e},t.ISSUER=function(){return new g("ISSUER",IDS.RealtimeTags.Issuer)},t.ISSUER_FULL_NAME=function(){return new g("ISSUER_FULL_NAME",IDS.RealtimeTags.IssuerFullName)},t.SORT_NU=function(){return new g("SORT_NU",IDS.RealtimeTags.SortNu,s.Integer)},t.EUSIPA_CODE=function(){return new g("EUSIPA_CODE",IDS.RealtimeTags.EusipaCode,s.Text)},t.IS_TRADEABLE=function(){return new g("IS_TRADEABLE",IDS.RealtimeTags.IsTradable)},t.CONTRIBUTED_ID=function(){return new g("CONTRIBUTED_ID",IDS.RealtimeContributedFundTags.Id,s.Integer)},t.CONTRIBUTED_FUND_MANAGER=function(){return new g("CONTRIBUTED_FUND_MANAGER",IDS.RealtimeContributedFundTags.FundManager,s.Text)},t.CONTRIBUTED_SUSTAINABILITY=function(){return new g("CONTRIBUTED_SUSTAINABILITY",IDS.RealtimeContributedFundTags.Sustainability,s.Text)},t.CONTRIBUTED_BUY_BUTTON=function(){return new g("CONTRIBUTED_BUY_BUTTON",IDS.RealtimeContributedFundTags.BuyButton,s.Boolean)},t.CONTRIBUTED_FEE=function(){return new g("CONTRIBUTED_FEE",IDS.RealtimeContributedFundTags.Fee,s.Text)},t.CONTRIBUTED_RISK=function(){return new g("CONTRIBUTED_RISK",IDS.RealtimeContributedFundTags.Risk,s.Text)},t.CONTRIBUTED_RECOMMENDATION=function(){return new g("CONTRIBUTED_RECOMMENDATION",IDS.RealtimeContributedFundTags.Recommendation,s.Text)},t.CONTRIBUTED_MAIN_SUPPLY=function(){return new g("CONTRIBUTED_MAIN_SUPPLY",IDS.RealtimeContributedFundTags.MainSupply,s.Text)},t.CONTRIBUTED_FUND_TEXT=function(){return new g("CONTRIBUTED_FUND_TEXT",IDS.RealtimeContributedFundTags.FundText,s.Text)},t.CONTRIBUTED_STANDARD_TEXTS=function(){return new g("CONTRIBUTED_STANDARD_TEXTS",IDS.RealtimeContributedFundTags.StandardTexts,s.Text)},t.CONTRIBUTED_CURRENCY=function(){return new g("CONTRIBUTED_CURRENCY",IDS.RealtimeContributedFundTags.Currency,s.Text)},t.CONTRIBUTED_RECOMMENDATION_TEXTS=function(){return new g("CONTRIBUTED_RECOMMENDATION_TEXTS",IDS.RealtimeContributedFundTags.RecommendationTexts,s.Text)},t.CONTRIBUTED_PRODUCTS=function(){return new g("CONTRIBUTED_PRODUCTS",IDS.RealtimeContributedFundTags.Products,s.Text)},t.CONTRIBUTED_LINKS=function(){return new g("CONTRIBUTED_LINKS",IDS.RealtimeContributedFundTags.Links,s.Text)},t.CONTRIBUTED_METADATA_00=function(){return new g("CONTRIBUTED_METADATA_00",IDS.RealtimeContributedFundTags.MetaData_00,s.Text)},t.CONTRIBUTED_METADATA_01=function(){return new g("CONTRIBUTED_METADATA_01",IDS.RealtimeContributedFundTags.MetaData_01,s.Text)},t.CONTRIBUTED_METADATA_02=function(){return new g("CONTRIBUTED_METADATA_02",IDS.RealtimeContributedFundTags.MetaData_02,s.Text)},t.CONTRIBUTED_METADATA_03=function(){return new g("CONTRIBUTED_METADATA_03",IDS.RealtimeContributedFundTags.MetaData_03,s.Text)},t.CONTRIBUTED_METADATA_04=function(){return new g("CONTRIBUTED_METADATA_04",IDS.RealtimeContributedFundTags.MetaData_04,s.Text)},t.CONTRIBUTED_METADATA_05=function(){return new g("CONTRIBUTED_METADATA_05",IDS.RealtimeContributedFundTags.MetaData_05,s.Text)},t.CONTRIBUTED_METADATA_06=function(){return new g("CONTRIBUTED_METADATA_06",IDS.RealtimeContributedFundTags.MetaData_06,s.Text)},t.CONTRIBUTED_METADATA_07=function(){return new g("CONTRIBUTED_METADATA_07",IDS.RealtimeContributedFundTags.MetaData_07,s.Text)},t.CONTRIBUTED_METADATA_08=function(){return new g("CONTRIBUTED_METADATA_08",IDS.RealtimeContributedFundTags.MetaData_08,s.Text)},t.CONTRIBUTED_METADATA_09=function(){return new g("CONTRIBUTED_METADATA_09",IDS.RealtimeContributedFundTags.MetaData_09,s.Text)},t.CONTRIBUTED_METADATA_10=function(){return new g("CONTRIBUTED_METADATA_10",IDS.RealtimeContributedFundTags.MetaData_10,s.Text)},t.CONTRIBUTED_METADATA_11=function(){return new g("CONTRIBUTED_METADATA_11",IDS.RealtimeContributedFundTags.MetaData_11,s.Text)},t.CONTRIBUTED_METADATA_12=function(){return new g("CONTRIBUTED_METADATA_12",IDS.RealtimeContributedFundTags.MetaData_12,s.Text)},t.CONTRIBUTED_METADATA_13=function(){return new g("CONTRIBUTED_METADATA_13",IDS.RealtimeContributedFundTags.MetaData_13,s.Text)},t.CONTRIBUTED_METADATA_14=function(){return new g("CONTRIBUTED_METADATA_14",IDS.RealtimeContributedFundTags.MetaData_14,s.Text)},t.CONTRIBUTED_METADATA_15=function(){return new g("CONTRIBUTED_METADATA_15",IDS.RealtimeContributedFundTags.MetaData_15,s.Text)},t.CONTRIBUTED_METADATA_16=function(){return new g("CONTRIBUTED_METADATA_16",IDS.RealtimeContributedFundTags.MetaData_16,s.Text)},t.CONTRIBUTED_METADATA_17=function(){return new g("CONTRIBUTED_METADATA_17",IDS.RealtimeContributedFundTags.MetaData_17,s.Text)},t.CONTRIBUTED_METADATA_18=function(){return new g("CONTRIBUTED_METADATA_18",IDS.RealtimeContributedFundTags.MetaData_18,s.Text)},t.CONTRIBUTED_METADATA_19=function(){return new g("CONTRIBUTED_METADATA_19",IDS.RealtimeContributedFundTags.MetaData_19,s.Text)},t.CONTRIBUTED_METADATA_20=function(){return new g("CONTRIBUTED_METADATA_20",IDS.RealtimeContributedFundTags.MetaData_20,s.Text)},t.CONTRIBUTED_METADATA_21=function(){return new g("CONTRIBUTED_METADATA_21",IDS.RealtimeContributedFundTags.MetaData_21,s.Text)},t.CONTRIBUTED_METADATA_22=function(){return new g("CONTRIBUTED_METADATA_22",IDS.RealtimeContributedFundTags.MetaData_22,s.Text)},t.CONTRIBUTED_METADATA_23=function(){return new g("CONTRIBUTED_METADATA_23",IDS.RealtimeContributedFundTags.MetaData_23,s.Text)},t.CONTRIBUTED_METADATA_24=function(){return new g("CONTRIBUTED_METADATA_24",IDS.RealtimeContributedFundTags.MetaData_24,s.Text)},t.CONTRIBUTED_METADATA_25=function(){return new g("CONTRIBUTED_METADATA_25",IDS.RealtimeContributedFundTags.MetaData_25,s.Text)},t.CONTRIBUTED_METADATA_26=function(){return new g("CONTRIBUTED_METADATA_26",IDS.RealtimeContributedFundTags.MetaData_26,s.Text)},t.CONTRIBUTED_METADATA_27=function(){return new g("CONTRIBUTED_METADATA_27",IDS.RealtimeContributedFundTags.MetaData_27,s.Text)},t.CONTRIBUTED_METADATA_28=function(){return new g("CONTRIBUTED_METADATA_28",IDS.RealtimeContributedFundTags.MetaData_28,s.Text)},t.CONTRIBUTED_METADATA_29=function(){return new g("CONTRIBUTED_METADATA_29",IDS.RealtimeContributedFundTags.MetaData_29,s.Text)},t.CONTRIBUTED_METADATA_30=function(){return new g("CONTRIBUTED_METADATA_30",IDS.RealtimeContributedFundTags.MetaData_30,s.Text)},t.CONTRIBUTED_METADATA_31=function(){return new g("CONTRIBUTED_METADATA_31",IDS.RealtimeContributedFundTags.MetaData_31,s.Text)},t.ONE_D_PERF=function(){return new g("ONE_D_PERF",IDS.RealtimeTags.PERF_1D,s.Percent)},t.ONE_W_PERF=function(){return new g("ONE_W_PERF",IDS.RealtimeTags.PERF_1W,s.Percent)},t.ONE_M_PERF=function(){return new g("ONE_M_PERF",IDS.RealtimeTags.PERF_1M,s.Percent)},t.THREE_M_PERF=function(){return new g("THREE_M_PERF",IDS.RealtimeTags.PERF_3M,s.Percent)},t.SIX_M_PERF=function(){return new g("SIX_M_PERF",IDS.RealtimeTags.PERF_6M,s.Percent)},t.ONE_Y_PERF=function(){return new g("ONE_Y_PERF",IDS.RealtimeTags.PERF_1Y,s.Percent)},t.TWO_Y_PERF=function(){return new g("TWO_Y_PERF",IDS.RealtimeTags.PERF_2Y,s.Percent)},t.THREE_Y_PERF=function(){return new g("THREE_Y_PERF",IDS.RealtimeTags.PERF_3Y,s.Percent)},t.FIVE_Y_PERF=function(){return new g("FIVE_Y_PERF",IDS.RealtimeTags.PERF_5Y,s.Percent)},t.TEN_Y_PERF=function(){return new g("TEN_Y_PERF",IDS.RealtimeTags.PERF_10Y,s.Percent)},t.YTD_PERF=function(){return new g("YTD_PERF",IDS.RealtimeTags.PERF_SOY,s.Percent)},t.DATE=function(){return new g("DATE",IDS.RealtimeDateTime.Date,s.DateOnly)},t}(m);e.InstrumentFields=f;var v=function(e){function t(t,n,i,r,a){void 0===i&&(i=s.Text),void 0===r&&(r=!1),void 0===a&&(a=!1);var o=e.call(this,t,n,i,r,a)||this;return o.source=l.CalculatedHistory,o.subscribeFieldName=t,o}return __extends(t,e),t}(p);e.CalculatedHistoryField=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ATR30_HISTORICAL=function(){return new v("ATR30_HISTORICAL",IDS.RealtimeCalculatedHistoryTags.AvgTrueRange,s.Numeric)},t.ADV=function(){return new v("ADV",IDS.RealtimeCalculatedHistoryTags.AverageDailyVolume,s.Integer,!0)},t.ATR30=function(){var e,n=new V("ATR30",s.Numeric);return n.computeFields=[T.HIGH(),T.LOW(),T.PREVIOUS_CLOSE(),t.ATR30_HISTORICAL()],n.compute=function(t,n){return e=Math.max(n[0]-n[1],Math.abs(n[0]-n[2])),e=Math.max(e,Math.abs(n[1])-n[2]),(29*n[3]+e)/30},n},t}(m);e.CalculatedHistoryFields=y;var b=function(e){function t(t,n,i,r,a){void 0===i&&(i=s.Text),void 0===r&&(r=!1),void 0===a&&(a=!1);var o=e.call(this,t,n,i,r,a)||this;return o.source=l.Snapshot,o.subscribeFieldName=t,o}return __extends(t,e),t}(p);e.SnapshotField=b;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ACC_VOLUME=function(){return new b("ACC_VOLUME",IDS.RealtimeTags.AcVolume,s.Volume,!0)},t.TURNOVER=function(){return new b("TURNOVER",IDS.RealtimeTags.Turnover,s.Volume,!0)},t.ONEXCH_VOLUME=function(){return new b("ONEXCH_VOLUME",IDS.RealtimeTags.OnExchVolume,s.Volume,!0)},t.ONEXCH_TURNOVER=function(){return new b("ONEXCH_TURNOVER",IDS.RealtimeTags.OnExchTurnover,s.Volume,!0)},t.BID=function(){return new b("BID",IDS.RealtimeTags.Bid,s.Numeric,!1,!0)},t.ASK=function(){return new b("ASK",IDS.RealtimeTags.Ask,s.Numeric,!1,!0)},t.BID_SIZE=function(){return new b("BID_SIZE",IDS.RealtimeTags.BidSize,s.Integer,!0)},t.ASK_SIZE=function(){return new b("ASK_SIZE",IDS.RealtimeTags.AskSize,s.Integer,!0)},t.NUM_BIDS=function(){return new b("NUM_BIDS",IDS.RealtimeTags.NuBids,s.Integer)},t.NUM_ASKS=function(){return new b("NUM_ASKS",IDS.RealtimeTags.NuAsks,s.Integer)},t.ORDERBOOK=function(){return new b("ORDERBOOK",null)},t.INDIC_PRICE=function(){return new b("INDIC_PRICE",null,s.Numeric)},t.INDIC_VOLUME=function(){return new b("INDIC_VOLUME",null,s.Integer,!0)},t.TRADING_STATUS=function(){return new b("TRADING_STATUS",IDS.RealtimeTags.SymbolStatusText)},t.VWAP=function(){return new b("VWAP","VWAP")},t.AVG_VOLUME=function(){return new b("AVG_VOLUME","AVG_VOLUME")},t.AVG_VALUE=function(){return new b("AVG_VALUE","AVG_VALUE")},t.OPEN=function(){return new b("OPEN",IDS.RealtimeTags.Open,s.Numeric)},t.HIGH=function(){return new b("HIGH",IDS.RealtimeTags.High,s.Numeric)},t.LOW=function(){return new b("LOW",IDS.RealtimeTags.Low,s.Numeric)},t.LAST=function(){return new b("LAST",IDS.RealtimeTags.Last,s.Numeric,!1,!0)},t.NET_ASSET_VALUE=function(){return new b("NET_ASSET_VALUE",IDS.RealtimeTags.NetAssetValue,s.Numeric)},t.LAST_VALID=function(){return new b("LAST_VALID",IDS.MwsRealtimeTags.LastTradedAt,s.Numeric)},t.PREVIOUS_CLOSE=function(){return new b("PREVIOUS_CLOSE",IDS.RealtimeTags.YestClose,s.Numeric)},t.TIME=function(){return new b("TIME",IDS.RealtimeDateTime.TradeTime,s.DateTime)},t.LAST_VALID_DATE=function(){return new b("LAST_VALID_DATE",IDS.MwsRealtimeTags.LastTradeDate,s.DateOnly)},t.CHANGE=function(){var e=new b("CHANGE",IDS.RealtimeTags.Change,s.Numeric);return e.highlightChange=!0,e},t.PCT_CHANGE=function(){var e=new b("PCT_CHANGE",IDS.RealtimeTags.ChangePct,s.Percent);return e.highlightChange=!0,e},t.NUM_SHARES=function(){return new b("NUM_SHARES",IDS.RealtimeTags.NuShares,s.Integer,!0)},t.CONTRACT_SIZE=function(){return new b("CONTRACT_SIZE",IDS.RealtimeTags.ContractSize,s.Volume)},t.MULTIPLIER=function(){return new b("MULTIPLIER",IDS.RealtimeTags.Multiplier,s.Numeric)},t.MARGIN_RATE=function(){var e=new b("MARGIN_RATE","MARGIN_RATE",s.Numeric);return e.translate=function(e,t){return InfrontUtil.formatPercent(100*t)},e},t.IS_SHORTABLE=function(){return new b("IS_SHORTABLE","IS_SHORTABLE",s.Boolean)},t.SEGMENT=function(){return new b("SEGMENT",IDS.RealtimeTags.PrimarySegment)},t.SECONDARY_SEGMENT=function(){return new b("SECONDARY_SEGMENT",IDS.RealtimeTags.SecondarySegment)},t.SEGMENT_DESCRIPTION=function(){return new b("SEGMENT_DESCRIPTION",IDS.RealtimeTags.PrimarySegmentDescription)},t.SECTOR=function(){return new b("SECTOR",IDS.RealtimeTags.Sector)},t.COUNTRY=function(){return new b("COUNTRY",IDS.RealtimeTags.Country)},t.FEED=function(){return new b("FEED",IDS.RealtimeTags.Feed)},t.SERVICE=function(){return new b("SERVICE",IDS.RealtimeTags.Type)},t.PHYSICAL_UNIT=function(){return new b("PHYSICAL_UNIT",IDS.RealtimeTags.PhysicalUnit)},t.INDIC_TRADE=function(){return new b("INDIC_TRADE",IDS.RealtimeTags.IndicTrade)},t.INDIC_INCVOL=function(){return new b("INDIC_INCVOL",IDS.RealtimeTags.IndicIncVol)},t.INDIC_HIGH=function(){return new b("INDIC_HIGH",IDS.RealtimeTags.IndicHigh)},t.INDIC_LOW=function(){return new b("INDIC_LOW",IDS.RealtimeTags.IndicLow)},t.NMS=function(){return new b("NMS",IDS.RealtimeTags.Nms)},t.INDIC_OPEN=function(){return new b("INDIC_OPEN",IDS.RealtimeTags.IndicOpen)},t.INDIC_OPEN_VOL=function(){return new b("INDIC_OPEN_VOL",IDS.RealtimeTags.IndicOpenVol)},t.ESMA_ADV=function(){return new b("ESMA_ADV",IDS.RealtimeTags.AverageDailyVolume)},t.INFRONT_SECTOR=function(){return new b("INFRONT_SECTOR",IDS.RealtimeTags.InfinancialsSector,s.Text)},t.MATURITY_DATE=function(){return new b("MATURITY_DATE",IDS.RealtimeDateTime.MaturityDate,s.DateOnly)},t.ISSUE_DATE=function(){return new b("ISSUE_DATE",IDS.RealtimeDateTime.IssueDate,s.DateOnly)},t.START_OF_INDEX_PERIOD=function(){return new b("START_OF_INDEX_PERIOD",IDS.RealtimeDateTime.StartOfIndexPeriod,s.DateOnly)},t.END_OF_INDEX_PERIOD=function(){return new b("END_OF_INDEX_PERIOD",IDS.RealtimeDateTime.EndOfIndexPeriod,s.DateOnly)},t.PARTICIPATION_LEVEL=function(){return new b("PARTICIPATION_LEVEL",IDS.RealtimeTags.ParticipationLevel,s.Percent)},t.BREAK_EVEN=function(){return new b("BREAK_EVEN",IDS.RealtimeTags.BreakEven,s.Volume)},t.ASIAN_AVERAGE=function(){return new b("ASIAN_AVERAGE",IDS.RealtimeTags.AsianAverage,s.Volume)},t.DELTA=function(){return new b("DELTA",IDS.RealtimeTags.Delta,s.Numeric)},t.ELAST=function(){return new b("ELAST",IDS.RealtimeTags.Elast,s.Numeric)},t.NAV=function(){return new b("NAV",IDS.RealtimeTags.NetAssetValue,s.Numeric)},t.BOND_FACE_VALUE=function(){return new b("BOND_FACE_VALUE",IDS.RealtimeTags.BondFaceValue,s.Integer)},t.BOND_MINIMUMDENOMINATION=function(){return new b("BOND_MINIMUMDENOMINATION",IDS.RealtimeTags.BondMinDenomination,s.Integer)},t.UNDER_TICKER=function(){return new b("UNDER_TICKER",IDS.RealtimeTags.UnderlyingTicker)},t.UNDER_FEED=function(){return new b("UNDER_FEED",IDS.RealtimeTags.UnderlyingFeed)},t.MARKET=function(){return new b("MARKET",IDS.RealtimeTags.Market)},t.LEVERAGE=function(){return new b("LEVERAGE",IDS.RealtimeTags.Leverage,s.Numeric)},t.THEORETICAL=function(){return new b("THEORETICAL",IDS.RealtimeTags.Theoretical,s.Numeric)},t.NEXT_COUPON_DATE=function(){return new b("NEXT_COUPON_DATE",IDS.RealtimeDateTime.NextCouponDate,s.DateOnly)},t.COUPON_RATE=function(){return new b("COUPON_RATE",IDS.RealtimeTags.CouponRate,s.Percent)},t.COUPONS_PER_YEAR=function(){return new b("COUPONS_PER_YEAR",IDS.RealtimeTags.CouponsPerYear,s.Numeric)},t.BID_YIELD=function(){return new b("BID_YIELD",IDS.RealtimeTags.BidYield,s.Numeric)},t.ASK_YIELD=function(){return new b("ASK_YIELD",IDS.RealtimeTags.AskYield,s.Numeric)},t.RECOMMENDATION_TYPE=function(){return new b("RECOMMENDATION_TYPE",IDS.RealtimeTags.RecommendationType,s.Numeric)},t.ESMA_TYPE=function(){var e=new b("ESMA_TYPE",IDS.RealtimeTags.ESMAType);return e.translate=function(e,t){switch(t){case IDS.ESMATypes.Liquid:return"Liquid";case IDS.ESMATypes.NoneLiquid:return"Non Liquid";case IDS.ESMATypes.Undefined:default:return"Undefined"}},e},t}(m);e.SnapshotFields=T;var S=function(t){function n(e,n,i,r){void 0===i&&(i=s.Text),void 0===r&&(r=!1);var a=t.call(this,e,n,i)||this;return a.subscribeFieldName=InfrontConstants.FieldGroups.HIST_PERFORMANCE,a.source=l.Historical,a.highlightChange=r,a}return __extends(n,t),n.prototype.getFieldSpec=function(){return[e.MWSConstants.hist_performance,this.lowerCaseName]},n}(p);e.HistoricalField=S;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.YTD_CLOSE=function(){return new S("YTD_CLOSE",IDS.PerformanceTags.LAST_SOY,s.Numeric)},t.ONE_W_CLOSE=function(){return new S("ONE_W_CLOSE",IDS.PerformanceTags.LAST_1W,s.Numeric)},t.ONE_M_CLOSE=function(){return new S("ONE_M_CLOSE",IDS.PerformanceTags.LAST_1M,s.Numeric)},t.THREE_M_CLOSE=function(){return new S("THREE_M_CLOSE",IDS.PerformanceTags.LAST_3M,s.Numeric)},t.SIX_M_CLOSE=function(){return new S("SIX_M_CLOSE",IDS.PerformanceTags.LAST_6M,s.Numeric)},t.ONE_Y_CLOSE=function(){return new S("ONE_Y_CLOSE",IDS.PerformanceTags.LAST_1Y,s.Numeric)},t.TWO_Y_CLOSE=function(){return new S("TWO_Y_CLOSE",IDS.PerformanceTags.LAST_2Y,s.Numeric)},t.THREE_Y_CLOSE=function(){return new S("THREE_Y_CLOSE",IDS.PerformanceTags.LAST_3Y,s.Numeric)},t.FIVE_Y_CLOSE=function(){return new S("FIVE_Y_CLOSE",IDS.PerformanceTags.LAST_5Y,s.Numeric)},t.YTD_CHANGE=function(){return new S("YTD_CHANGE","YTD_CHANGE",s.Numeric,!0)},t.ONE_W_CHANGE=function(){return new S("ONE_W_CHANGE","ONE_W_CHANGE",s.Numeric,!0)},t.ONE_M_CHANGE=function(){return new S("ONE_M_CHANGE","ONE_M_CHANGE",s.Numeric,!0)},t.THREE_M_CHANGE=function(){return new S("THREE_M_CHANGE","THREE_M_CHANGE",s.Numeric,!0)},t.SIX_M_CHANGE=function(){return new S("SIX_M_CHANGE","SIX_M_CHANGE",s.Numeric,!0)},t.ONE_Y_CHANGE=function(){return new S("ONE_Y_CHANGE","ONE_Y_CHANGE",s.Numeric,!0)},t.TWO_Y_CHANGE=function(){return new S("TWO_Y_CHANGE","TWO_Y_CHANGE",s.Numeric,!0)},t.THREE_Y_CHANGE=function(){return new S("THREE_Y_CHANGE","THREE_Y_CHANGE",s.Numeric,!0)},t.FIVE_Y_CHANGE=function(){return new S("FIVE_Y_CHANGE","FIVE_Y_CHANGE",s.Numeric,!0)},t.YTD_PCT_CHANGE=function(){return new S("YTD_PCT_CHANGE","YTD_PCT_CHANGE",s.Percent,!0)},t.ONE_W_PCT_CHANGE=function(){return new S("ONE_W_PCT_CHANGE","ONE_W_PCT_CHANGE",s.Percent,!0)},t.ONE_M_PCT_CHANGE=function(){return new S("ONE_M_PCT_CHANGE","ONE_M_PCT_CHANGE",s.Percent,!0)},t.THREE_M_PCT_CHANGE=function(){return new S("THREE_M_PCT_CHANGE","THREE_M_PCT_CHANGE",s.Percent,!0)},t.SIX_M_PCT_CHANGE=function(){return new S("SIX_M_PCT_CHANGE","SIX_M_PCT_CHANGE",s.Percent,!0)},t.ONE_Y_PCT_CHANGE=function(){return new S("ONE_Y_PCT_CHANGE","ONE_Y_PCT_CHANGE",s.Percent,!0)},t.TWO_Y_PCT_CHANGE=function(){return new S("TWO_Y_PCT_CHANGE","TWO_Y_PCT_CHANGE",s.Percent,!0)},t.THREE_Y_PCT_CHANGE=function(){return new S("THREE_Y_PCT_CHANGE","THREE_Y_PCT_CHANGE",s.Percent,!0)},t.FIVE_Y_PCT_CHANGE=function(){return new S("FIVE_Y_PCT_CHANGE","FIVE_Y_PCT_CHANGE",s.Percent,!0)},t.ONE_Y_TOTAL_RETURN=function(){return new S("ONE_Y_TOTAL_RETURN","ONE_Y_TOTAL_RETURN",s.Numeric,!0)},t.ONE_Y_TOTAL_RETURN_PCT=function(){return new S("ONE_Y_TOTAL_RETURN_PCT","ONE_Y_TOTAL_RETURN_PCT",s.Percent,!0)},t.YTD_TOTAL_RETURN=function(){return new S("YTD_TOTAL_RETURN","YTD_TOTAL_RETURN",s.Numeric,!0)},t.YTD_TOTAL_RETURN_PCT=function(){return new S("YTD_TOTAL_RETURN_PCT","YTD_TOTAL_RETURN_PCT",s.Percent,!0)},t.YTD_HIGH=function(){return new S("YTD_HIGH",IDS.PerformanceTags.HIGH_SOY,s.Numeric)},t.ONE_W_HIGH=function(){return new S("ONE_W_HIGH",IDS.PerformanceTags.HIGH_1W,s.Numeric)},t.ONE_M_HIGH=function(){return new S("ONE_M_HIGH",IDS.PerformanceTags.HIGH_1M,s.Numeric)},t.THREE_M_HIGH=function(){return new S("THREE_M_HIGH",IDS.PerformanceTags.HIGH_3M,s.Numeric)},t.SIX_M_HIGH=function(){return new S("SIX_M_HIGH",IDS.PerformanceTags.HIGH_6M,s.Numeric)},t.ONE_Y_HIGH=function(){return new S("ONE_Y_HIGH",IDS.PerformanceTags.HIGH_1Y,s.Numeric)},t.TWO_Y_HIGH=function(){return new S("TWO_Y_HIGH",IDS.PerformanceTags.HIGH_2Y,s.Numeric)},t.THREE_Y_HIGH=function(){return new S("THREE_Y_HIGH",IDS.PerformanceTags.HIGH_3Y,s.Numeric)},t.FIVE_Y_HIGH=function(){return new S("FIVE_Y_HIGH",IDS.PerformanceTags.HIGH_5Y,s.Numeric)},t.YTD_LOW=function(){return new S("YTD_LOW",IDS.PerformanceTags.LOW_SOY,s.Numeric)},t.ONE_W_LOW=function(){return new S("ONE_W_LOW",IDS.PerformanceTags.LOW_1W,s.Numeric)},t.ONE_M_LOW=function(){return new S("ONE_M_LOW",IDS.PerformanceTags.LOW_1M,s.Numeric)},t.THREE_M_LOW=function(){return new S("THREE_M_LOW",IDS.PerformanceTags.LOW_3M,s.Numeric)},t.SIX_M_LOW=function(){return new S("SIX_M_LOW",IDS.PerformanceTags.LOW_6M,s.Numeric)},t.ONE_Y_LOW=function(){return new S("ONE_Y_LOW",IDS.PerformanceTags.LOW_1Y,s.Numeric)},t.TWO_Y_LOW=function(){return new S("TWO_Y_LOW",IDS.PerformanceTags.LOW_2Y,s.Numeric)},t.THREE_Y_LOW=function(){return new S("THREE_Y_LOW",IDS.PerformanceTags.LOW_3Y,s.Numeric)},t.FIVE_Y_LOW=function(){return new S("FIVE_Y_LOW",IDS.PerformanceTags.LOW_5Y,s.Numeric)},t.LAST_TRADE=function(){return new S("LAST_TRADE",IDS.PerformanceTags.LAST_TRADE,s.DateTime)},t.LAST_TRADE_DATE=function(){return new S("LAST_TRADE_DATE",IDS.RealtimeDateTime.LAST_TRADE_DATE,s.DateOnly)},t.ONE_D_PERF_SEK=function(){return new S("ONE_D_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_1D,s.Percent)},t.ONE_W_PERF_SEK=function(){return new S("ONE_W_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_1W,s.Percent)},t.ONE_M_PERF_SEK=function(){return new S("ONE_M_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_1M,s.Percent)},t.THREE_M_PERF_SEK=function(){return new S("THREE_M_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_3M,s.Percent)},t.SIX_M_PERF_SEK=function(){return new S("SIX_M_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_6M,s.Percent)},t.ONE_Y_PERF_SEK=function(){return new S("ONE_Y_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_1Y,s.Percent)},t.TWO_Y_PERF_SEK=function(){return new S("TWO_Y_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_2Y,s.Percent)},t.THREE_Y_PERF_SEK=function(){return new S("THREE_Y_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_3Y,s.Percent)},t.FIVE_Y_PERF_SEK=function(){return new S("FIVE_Y_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_5Y,s.Percent)},t.TEN_Y_PERF_SEK=function(){return new S("TEN_Y_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_10Y,s.Percent)},t.YTD_PERF_SEK=function(){return new S("YTD_PERF_SEK",IDS.MorningstarSEKPerformanceTags.SEK_PERF_SOY,s.Percent)},t.ONE_W_LAST_DIV=function(){return new S("ONE_W_LAST_DIV",IDS.PerformanceTags.LAST_1W_DIV,s.Numeric)},t.ONE_M_LAST_DIV=function(){return new S("ONE_M_LAST_DIV",IDS.PerformanceTags.LAST_1M_DIV,s.Numeric)},t.THREE_M_LAST_DIV=function(){return new S("THREE_M_LAST_DIV",IDS.PerformanceTags.LAST_3M_DIV,s.Numeric)},t.SIX_M_LAST_DIV=function(){return new S("SIX_M_LAST_DIV",IDS.PerformanceTags.LAST_6M_DIV,s.Numeric)},t.ONE_Y_LAST_DIV=function(){return new S("ONE_Y_LAST_DIV",IDS.PerformanceTags.LAST_1Y_DIV,s.Numeric)},t.YTD_LAST_DIV=function(){return new S("YTD_LAST_DIV",IDS.PerformanceTags.LAST_SOY_DIV,s.Numeric)},t.VOL_1M=function(){return new S("VOL_1M",IDS.PerformanceTags.VOL_1M,s.Numeric)},t.DAYCOUNT_1M=function(){return new S("DAYCOUNT_1M",IDS.PerformanceTags.DAYCOUNT_1M,s.Numeric)},t}(m);e.HistoricalFields=C;var I=function(e){function t(t,n,i){void 0===n&&(n=s.Text),void 0===i&&(i=!1);var r=e.call(this,t,t,n,i)||this;return r.source=l.Brokerstats,r}return __extends(t,e),t}(p);e.BrokerstatsField=I;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.NAME=function(){return new I("NAME")},t.FULLNAME=function(){return new I("FULLNAME")},t.TIME=function(){return new I("TIME",s.Time)},t.BUYS=function(){return new I("BUYS",s.Integer,!0)},t.SELLS=function(){return new I("SELLS",s.Integer,!0)},t.INT_TRADES=function(){return new I("INT_TRADES",s.Integer,!0)},t.BUY_VOLUME=function(){return new I("BUY_VOLUME",s.Volume,!0)},t.SELL_VOLUME=function(){return new I("SELL_VOLUME",s.Volume,!0)},t.INT_VOLUME=function(){return new I("INT_VOLUME",s.Volume,!0)},t.TOTAL_VOLUME=function(){return new I("TOTAL_VOLUME",s.Volume,!0)},t.BUY_VALUE=function(){return new I("BUY_VALUE",s.Integer,!0)},t.SELL_VALUE=function(){return new I("SELL_VALUE",s.Integer,!0)},t.INT_VALUE=function(){return new I("INT_VALUE",s.Integer,!0)},t.AVG_BUY=function(){return new I("AVG_BUY",s.Numeric)},t.AVG_SELL=function(){return new I("AVG_SELL",s.Numeric)},t.NET_BUY_VALUE=function(){return new I("NET_BUY_VALUE",s.Integer,!0)},t.HIT_VALUE=function(){return new I("HIT_VALUE",s.Integer,!0)},t.HIT_VALUE_PCT=function(){return new I("HIT_VALUE_PCT",s.Percent)},t.TAKE_VALUE=function(){return new I("TAKE_VALUE",s.Integer,!0)},t.TAKE_VALUE_PCT=function(){return new I("TAKE_VALUE_PCT",s.Percent)},t.TOTAL_VALUE=function(){return new I("TOTAL_VALUE",s.Integer,!0)},t.TOTAL_VALUE_PCT=function(){return new I("TOTAL_VALUE_PCT",s.Percent)},t.TRADES=function(){return new I("TRADES",s.Integer)},t.SYM_TURN=function(){return new I("SYM_TURN",s.Integer,!0)},t.SYM_TURN_PCT=function(){return new I("SYM_TURN_PCT",s.Percent)},t}(m);e.BrokerstatsFields=_;var M=function(e){function t(t,n,i){void 0===n&&(n=s.Text),void 0===i&&(i=!1);var r=e.call(this,t,t,n,i)||this;return r.source=l.Market,r}return __extends(t,e),t}(p);e.MarketListField=M;var E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.FLAG=function(){return new M("FLAG")},t.FEED=function(){return new M("FEED")},t.SERVICE=function(){return new M("SERVICE")},t}(m);e.MarketListFields=E;var w=function(t){function n(n,i,r){void 0===i&&(i=s.Text),void 0===r&&(r=!1);var a=t.call(this,n,n,i,r)||this;return a.subscribeFieldName=e.QuoteFields.TRADES,a.source=l.IntradayTrades,a}return __extends(n,t),n}(p);e.IntradayTradesField=w;var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.OPEN=function(){return new w("OPEN",s.Numeric)},t.LAST=function(){return new w("LAST",s.Numeric)},t.HIGH=function(){return new w("HIGH",s.Numeric)},t.LOW=function(){return new w("LOW",s.Numeric)},t.BID=function(){return new w("BID",s.Numeric)},t.ASK=function(){return new w("ASK",s.Numeric)},t.VOLUME=function(){return new w("VOLUME",s.Integer)},t.TURNOVER=function(){return new w("TURNOVER",s.Integer,!0)},t.BUYER=function(){return new w("BUYER")},t.SELLER=function(){return new w("SELLER")},t.BUYER_FULL=function(){return new w("BUYER_FULL")},t.SELLER_FULL=function(){return new w("SELLER_FULL")},t.MARKET=function(){return new w("MARKET")},t.TYPE=function(){return new w("TYPE")},t.SEQ_ID=function(){return new w("SEQ_ID",s.ID)},t.TIME=function(){return new w("TIME",s.DateTime)},t}(m);e.IntradayTradesFields=A;var D=function(e){function t(t,n,i){void 0===n&&(n=s.Text),void 0===i&&(i=!1);var r=e.call(this,t,t,n,i)||this;return r.source=l.Position,r}return __extends(t,e),t}(p);e.PositionField=D;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ERROR_CODE=function(){return new D("ERROR_CODE",s.ID)},t.ERROR_MESSAGE=function(){return new D("ERROR_MESSAGE")},t.PORTFOLIO=function(){return new D("PORTFOLIO")},t.INVESTED=function(){return new D("INVESTED",s.Numeric)},t.VOLUME=function(){return new D("VOLUME",s.Volume)},t.AMOUNT=function(){return new D("AMOUNT",s.Numeric)},t.MULTIPLIER=function(){return new D("MULTIPLIER",s.Numeric)},t.COLLATERAL=function(){return new D("COLLATERAL",s.Integer)},t.LOAN_TO_VALUE_RATIO=function(){return new D("LOAN_TO_VALUE_RATIO",s.Numeric)},t.PROFIT=function(){return new D("PROFIT",s.Numeric)},t.BASE_CURRENCY=function(){return new D("BASE_CURRENCY")},t.BASE_INVESTED=function(){return new D("BASE_INVESTED",s.Numeric)},t.YTD_BASE_INVESTED=function(){return new D("YTD_BASE_INVESTED",s.Numeric)},t.BASE_VALUE=function(){return new D("BASE_VALUE",s.Numeric)},t.AVG_PRICE=function(){return new D("AVG_PRICE",s.Numeric)},t.S_AVG_PRICE=function(){return new D("S_AVG_PRICE",s.Numeric)},t.MARKET_PRICE=function(){return new D("MARKET_PRICE",s.Numeric)},t.MARKET_VALUE=function(){return new D("MARKET_VALUE",s.Integer)},t.BASE_MARKET_VALUE=function(){return new D("BASE_MARKET_VALUE",s.Integer)},t.PL_TODAY=function(){return new D("PL_TODAY",s.Numeric)},t.BASE_PL_TODAY=function(){return new D("BASE_PL_TODAY",s.Numeric)},t.PL_TODAY_PCT=function(){return new D("PL_TODAY_PCT",s.Percent)},t.RESULT=function(){return new D("RESULT",s.Integer)},t.RESULT_PCT=function(){return new D("RESULT_PCT",s.Percent)},t.BASE_RESULT=function(){return new D("BASE_RESULT",s.Numeric)},t.BASE_RESULT_PCT=function(){return new D("BASE_RESULT_PCT",s.Percent)},t.BASE_CURRENCY_RESULT=function(){return new D("BASE_CURRENCY_RESULT",s.Numeric)},t.S_POS_CURRENCY=function(){return new D("S_POS_CURRENCY")},t.TOTAL_BASE_PL_TODAY_PCT=function(){return new D("PL_TODAY_PCT",s.Percent)},t.OWN_CAPITAL_CHANGE_PERCENT=function(){return new D("PL_TODAY_PCT",s.Percent)},t.BASE_COLLATERAL=function(){return new D("BASE_COLLATERAL",s.Numeric)},t}(m);e.PositionFields=O;var k=function(e){function t(t,n,i){void 0===n&&(n=s.Text),void 0===i&&(i=!1);var r=e.call(this,t,t,n,i)||this;return r.source=l.Portfolio,r}return __extends(t,e),t}(p);e.PortfolioField=k;var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.VALUE=function(){return new k("VALUE",s.Integer)},t.TRADING_POWER=function(){return new k("TRADING_POWER",s.Integer)},t.BASE_TRADING_POWER=function(){return new k("BASE_TRADING_POWER",s.Integer)},t}(m);e.PortfolioFields=R;var N=function(e){function t(t,n,i){void 0===n&&(n=s.Text),void 0===i&&(i=!1);var r=e.call(this,t,t,n,i)||this;return r.source=l.Order,r}return __extends(t,e),t}(p),L=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.ORDER_ID=function(){var t=new N("ORDER_ID",s.ID);return t.genericClass=e.CssConstants.kCellText,t},n.ALGO_ID=function(){return new N("ALGO_ID")},n.FAIL_CODE=function(){return new N("FAIL_CODE",s.ID)},n.ERROR_MESSAGE=function(){return new N("ERROR_MESSAGE")},n.PORTFOLIO=function(){return new N("PORTFOLIO")},n.CUSTOMER_ID=function(){return new N("CUSTOMER_ID")},n.BUY_OR_SELL=function(){return new N("BUY_OR_SELL",s.Enum)},n.PRICE=function(){return new N("PRICE",s.Numeric)},n.AVG_PRICE=function(){return new N("AVG_PRICE",s.Numeric)},n.VOLUME=function(){return new N("VOLUME",s.Integer)},n.OPEN_VOLUME=function(){return new N("OPEN_VOLUME",s.Integer)},n.ORDER_TYPE=function(){return new N("ORDER_TYPE",s.Enum)},n.CREATED=function(){return new N("CREATED",s.DateTime)},n.CHANGED=function(){return new N("CHANGED",s.DateTime)},n.VALID_UNTIL=function(){return new N("VALID_UNTIL",s.DateOnly)},n.ORDER_STATUS=function(){return new N("ORDER_STATUS",s.Enum)},n.VOLUME_FILLED=function(){return new N("VOLUME_FILLED",s.Integer)},n.COMMENT=function(){return new N("COMMENT")},n.ACCUMULATED_TRADED=function(){return new N("ACCUMULATED_TRADED",s.Integer)},n.TRANSACTION_ID=function(){return new N("TRANSACTION_ID")},n.EXCHANGE_ORDER_ID=function(){return new N("EXCHANGE_ORDER_ID")},n.READ_ONLY=function(){return new N("READ_ONLY")},n.CUSTOM_DATE_FIELDS=function(){return new N("custom_tags_fields/2")},n.TRIGGER_PRICE=function(){return new N("custom_tags/0")},n.CLIENT_SPOT=function(){return new N("custom_tags/16")},n.LOAN_TRANS_ACC=function(){return new N("custom_tags/17")},n.FORWARD_DATE=function(){return new N("custom_tags/14")},n.DISC_PREMIUM=function(){return new N("custom_tags/12")},n.FREETXT=function(){return new N("custom_tags/18")},n.INT_DEPOT_NUM=function(){return new N("custom_tags/18")},n.FORWARD_PRICE=function(){return new N("custom_tags/13")},n}(m);e.OrderFields=L;var P=function(t){function n(e,n,i){void 0===n&&(n=s.Text),void 0===i&&(i=!1);var r=t.call(this,e,e,n,i)||this;return r.source=l.OrderAlgo,r}return __extends(n,t),n.prototype.getFieldSpec=function(){return[e.MWSConstants.algo_params,this.lowerCaseName]},n}(p);e.OrderAlgoField=P;var F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.TRIGGERCOND=function(){return new P("TRIGGERCOND")},t.TRIGGERPX=function(){return new P("TRIGGERPX")},t.ORDERLIMITPX=function(){return new P("ORDERLIMITPX")},t.TRIGGERVALID=function(){return new P("TRIGGERVALID")},t.TRAILLIMIT=function(){return new P("TRAILLIMIT")},t.PCTFROMLAST=function(){return new P("PCTFROMLAST")},t.TICKSFROMLAST=function(){return new P("TICKSFROMLAST")},t.BESTPX=function(){return new P("-BESTPX")},t.ENTRYPX=function(){return new P("-ENTRYPX")},t.FORETGTPX=function(){return new P("-FORETGTPX")},t.TRIGGERATPX=function(){return new P("-TRIGGERATPX")},t}(m);e.OrderAlgoFields=F;var x=function(e){function t(t,n,i){void 0===n&&(n=s.Text),void 0===i&&(i=!1);var r=e.call(this,t,t,n,i)||this;return r.source=l.Trade,r}return __extends(t,e),t}(p);e.TradeField=x;var U=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.TRADE_ID=function(){var t=new x("TRADE_ID",s.ID);return t.genericClass=e.CssConstants.kCellText,t},n.ERROR_CODE=function(){return new x("ERROR_CODE")},n.ERROR_MESSAGE=function(){return new x("ERROR_MESSAGE")},n.ORDER_ID=function(){var t=new x("ORDER_ID",s.ID);return t.genericClass=e.CssConstants.kCellText,t},n.PORTFOLIO=function(){return new x("PORTFOLIO")},n.CUSTOMER_ID=function(){return new x("CUSTOMER_ID")},n.BUY_OR_SELL=function(){return new x("BUY_OR_SELL",s.Enum)},n.PRICE=function(){return new x("PRICE",s.Numeric)},n.VOLUME=function(){return new x("VOLUME",s.Integer)},n.TRADE_TIME=function(){return new x("TRADE_TIME",s.DateTime)},n.FEE=function(){return new x("FEE",s.Numeric)},n.FOREX_RATE=function(){return new x("FOREX_RATE",s.Numeric)},n.INVESTED=function(){return new x("INVESTED",s.Integer,!0)},n.EXCHANGE_ORDER_ID=function(){return new x("EXCHANGE_ORDER_ID")},n.EXCHANGE_TRADE_ID=function(){return new x("EXCHANGE_TRADE_ID")},n.EXCHANGE_TRADE_ID2=function(){return new x("EXCHANGE_TRADE_ID2")},n.DELETED_TRADE=function(){return new x("DELETED_TRADE")},n.VERIFIED_TRADE=function(){return new x("VERIFIED_TRADE")},n.EXEC_MARKET=function(){return new x("EXEC_MARKET")},n}(m);e.TradeFields=U;var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.source=l.Fund,t.subscribeFieldName=InfrontConstants.FieldGroups.REF_DATA_DETAILS,t}return __extends(t,e),t}(p);e.FundRefField=B;var W=function(e){function t(t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=s.Text),void 0===r&&(r=!1);var a=e.call(this,t,n||t,i,r)||this;return a.source=l.Fund,a.subscribeFieldName=InfrontConstants.FieldGroups.FUND_DETAILS,a.cacheBinding=InfrontConstants.FundDetailsMap[t],a}return __extends(t,e),t.prototype.getFieldSpec=function(){return this.cacheBinding.slice()},t}(p);e.FundDetailsField=W;var H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.FUND_TYPE=function(){return new B("FUND_TYPE",IDS.RealtimeTags.FundType)},t.FUND_TOTAL_EXPENSE=function(){return new B("FUND_TOTAL_EXPENSE",IDS.RealtimeTags.FundTotalExpense,s.Percent)},t.FUND_TOTAL_ASSETS=function(){return new B("FUND_TOTAL_ASSETS",IDS.RealtimeTags.FundTotalAssets,s.Integer,!0)},t.FUND_SHARPE_RATIO=function(){return new B("FUND_SHARPE_RATIO",IDS.RealtimeFundTags.SharpeRatio,s.Numeric)},t.FUND_STD_DEV_1Y=function(){return new B("FUND_STD_DEV_1Y",IDS.RealtimeTags.FundStdDev1Year,s.Numeric)},t.FUND_PROSPECTIVE_DIVIDEND_YIELD=function(){return new B("FUND_PROSPECTIVE_DIVIDEND_YIELD",IDS.RealtimeTags.Dividend,s.Numeric)},t.FUND_PROSPECTIVE_BOOK_VALUE_YIELD=function(){return new B("FUND_PROSPECTIVE_BOOK_VALUE_YIELD",IDS.RealtimeTags.FundProspectiveBookValueYield,s.Numeric)},t.RISK_LEVEL=function(){return new B("RISK_LEVEL",IDS.RealtimeTags.FundRiskMeasure,s.Integer)},t.STAR_RATING=function(){return new B("STAR_RATING",IDS.RealtimeTags.MorningstarRating,s.Integer)},t.STAR_RATING_3Y=function(){return new B("STAR_RATING_3Y",IDS.RealtimeTags.MorningstarRating3Y,s.Integer)},t.FUND_ONGOING_CHARGE=function(){return new B("FUND_ONGOING_CHARGE",IDS.RealtimeTags.FundOngoingCharge,s.Percent)},t.FUND_ANNUAL_REPORT_DATE=function(){return new B("FUND_ANNUAL_REPORT_DATE",IDS.RealtimeTags.FundAnnualReportDate,s.IdsDate)},t.FUND_SUSTAINABILITY_RATING=function(){return new B("FUND_SUSTAINABILITY_RATING",IDS.RealtimeFundTags.SustainabilityRating,s.Integer)},t.FUND_SUSTAINABILITY_RATING_DATE=function(){return new B("FUND_SUSTAINABILITY_RATING_DATE",IDS.RealtimeFundTags.SustainabilityRatingDate,s.IdsDate)},t.FUND_MANAGEMENT_FEE=function(){return new B("FUND_MANAGEMENT_FEE",IDS.RealtimeTags.FundManagementFee)},t.FUND_ACTUAL_MANAGEMENT_FEE=function(){return new B("FUND_ACTUAL_MANAGEMENT_FEE",IDS.RealtimeTags.FundActualManagementFee)},t.ANALYST_RATING=function(){return new W("ANALYST_RATING",IDS.RealtimeFundTags.AnalystRating)},t.FUND_NAME_SWEDISH=function(){return new B("FUND_NAME_SWEDISH",IDS.RealtimeTags.FundNameSwedish)},t.FUND_REFERENCE_FEED=function(){return new B("FUND_REFERENCE_FEED",IDS.RealtimeFundTags.ReferenceFeed,s.Integer)},t.FUND_REFERENCE_SYMBOL=function(){return new B("FUND_REFERENCE_SYMBOL",IDS.RealtimeFundTags.ReferenceSymbol)},t.FUND_STYLEBOX=function(){return new W("FUND_STYLEBOX")},t.MIN_INIT_INVESTMENT=function(){return new W("MIN_INIT_INVESTMENT",null,s.Integer)},t.START_DATE=function(){return new W("START_DATE",null,s.DateOnly)},t.INVESTMENT_MANDATE=function(){return new W("INVESTMENT_MANDATE")},t.PROSPECTIVE_BOOK_VALUE_YIELD=function(){return new W("PROSPECTIVE_BOOK_VALUE_YIELD",null,s.Numeric)},t.PROSPECTIVE_EARNINGS_YIELD=function(){return new W("PROSPECTIVE_EARNINGS_YIELD",null,s.Numeric)},t.HOMEPAGE=function(){return new W("HOMEPAGE",null,s.Text)},t.FUND_MANAGER=function(){var e=new W("FUND_MANAGER",null,s.Text);return e.translate=t.fundManagerTranslate,e},t.FOR_SALE_IN=function(){var e=new W("FOR_SALE_IN");return e.translate=t.forSaleInTranslate,e},t.FOR_SALE_IN_SHORT=function(){var e=new W("FOR_SALE_IN_SHORT");return e.translate=t.forSaleInShortTranslate,e},t.FOR_SALE_IN_COUNT=function(){var e=new W("FOR_SALE_IN_COUNT");return e.translate=t.forSaleInCountTranslate,e},t.TRACKING_ERROR=function(){return new W("TRACKING_ERROR",null,s.Numeric)},t.ACTIVE_SHARE=function(){return new W("ACTIVE_SHARE",null,s.Numeric)},t.fundManagerTranslate=function(e,t){for(var n="",i=0;i<t.length;i++)n+=t[i],i!=t.length-1&&(n+=", ");return n},t.forSaleInTranslate=function(e,t){for(var n="",i=0;i<t.length;i++)n+=t[i].name,i!=t.length-1&&(n+=", ");return n},t.forSaleInShortTranslate=function(e,t){for(var n="",i=0;i<t.length;i++)n+=t[i].code;return n},t.forSaleInCountTranslate=function(e,t){return t.length.toString()},t}(m);e.FundFields=H;var V=function(t){function n(e,n,i,r,a){void 0===n&&(n=s.Numeric),void 0===i&&(i=l.Unknown),void 0===r&&(r=!1),void 0===a&&(a=!1);var o=t.call(this,e,e,n,r,a)||this;return o.type=d.Computed,o.computeFields=[],o.source=i,o}return __extends(n,t),n.prototype.hideComputedFields=function(){if(this.computeFields)for(var e=0,t=this.computeFields;e<t.length;e++){var i=t[e];n.isComputedField(i)&&(i.hideComputedFields(),InfrontUtil.errorLog("Warning: Nested computed field not yet supported",this)),i.forceHidden()}},n.prototype.createComputedFieldInCache=function(t,i,r,a){for(var s=this,o=a?a(r,this):r,l=[],c=0;c<this.computeFields.length;c++){var d=this.computeFields[c];if(null!=d){var u=new e.FieldReference(a?a(r,d):r,d.getFieldSpec());l.push(u),n.isComputedField(d)&&d.createComputedFieldInCache(t,i,r,a)}}t.createComputedField(o,this.lowerCaseName,l,function(e){return s.compute(i,e,t.getInstrument(r))})},n.isComputedField=function(e){return e.type==d.Computed},n.prototype.applySpec=function(e){if(t.prototype.applySpec.call(this,e),this.isValidSpecProp(e,"computeFields",InfrontUtil.isArray))for(var n=0,i=e.computeFields;n<i.length;n++){var r=i[n];if(h.isValidSpec(r)){var a=h.createFieldFromSpec(r,null,[this.source,l.Unknown]);e.hasOwnProperty("dataType")||a.dataType==this.dataType||(this.dataType=a.dataType),this.computeFields.push(a)}}else this.computeFields.length;this.isValidSpecProp(e,"compute",InfrontUtil.isFunction)?this.compute=e.compute:this.compute||InfrontUtil.errorLog("Warning: Creating computed-field without valid compute function.",e)},n.prototype.applyDefaults=function(e,n){t.prototype.applyDefaults.call(this,e,n),this.hideComputedFields()},n}(p);e.ComputedField=V;var G=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return __extends(i,n),i.orderSupportsPrice=function(e){var t=!0;return e&&(t=this.orderTypesWithoutPrice.indexOf(e)<0),t},i.OFF_HIGH=function(){var e=new V("OFF_HIGH",s.Percent);return e.computeFields=[T.HIGH(),T.LAST()],e.compute=i.calcPct,e},i.OFF_LOW=function(){var e=new V("OFF_LOW",s.Percent);return e.computeFields=[T.LOW(),T.LAST()],e.compute=i.calcPct,e},i.GAP_PCT=function(){var e=new V("GAP_PCT",s.Percent);return e.computeFields=[T.PREVIOUS_CLOSE(),T.OPEN()],e.compute=i.calcPct,e},i.OPEN_LAST_CHANGE_PCT=function(){var e=new V("OPEN_LAST_CHANGE_PCT",s.Percent);return e.computeFields=[T.LAST(),T.OPEN()],e.compute=i.calcPct,e},i.NET_VOLUME=function(){var e=new V("NET_VOLUME",s.Integer);return e.shorten=!0,e.computeFields=[_.BUY_VOLUME(),_.SELL_VOLUME()],e.compute=function(e,t){return t[0]-t[1]},e},i.VOLUME_ADV_PCT=function(){var e=new V("VOLUME_ADV_PCT",s.Percent);return e.blinkType=t.Percent,e.computeFields=[T.ONEXCH_VOLUME(),y.ADV(),T.ACC_VOLUME()],e.compute=function(e,t){if(null!==t[0]&&null!==t[1]){var n=t[2];return t[0]&&(n=t[0]),100*n/t[1]}},e},i.S_DATETIME=function(){var e=new V("S_DATETIME",s.DateTime);return e.computeFields=[T.TIME(),C.LAST_TRADE_DATE()],e.compute=function(e,t){if(t[0]||t[1]){if(!t[0])return t[1];var n=new Date(t[0]?t[0]:t[1]);if(n&&!isNaN(n.getDate()))return n.getSeconds()+60*n.getMinutes()+3600*n.getHours()+60*n.getTimezoneOffset()!=0?n:t[1]}return null},e},i.PCT_SPREAD=function(){var e=new V("PCT_SPREAD",s.Percent);return e.computeFields=[T.BID(),T.ASK()],e.compute=function(e,t){if(null===t[0]||null===t[1])return null;var n=t[0]-t[1];return Math.abs(100*n/t[1])},e},i.S_MARKET_PRICE=function(){var e=new V("S_MARKET_PRICE",s.Numeric);return e.computeFields=[T.LAST(),T.BID(),T.ASK(),T.PREVIOUS_CLOSE()],e.shorten=!0,e.compute=function(e,t){var n;if(0==(n=t[0]||0)){var i=t[1],r=t[2];n=i&&r?(i+r)/2:t[3]||0}return 0==n&&(n=null),n},e},i.S_ORDER_VALUE=function(){var e=new V("S_ORDER_VALUE",s.Numeric);return e.computeFields=[L.VOLUME(),L.VOLUME_FILLED(),L.PRICE(),T.CONTRACT_SIZE(),T.MULTIPLIER(),L.ORDER_TYPE(),i.S_MARKET_PRICE()],e.shorten=!0,e.compute=function(e,t){if(isNaN(t[0])||isNaN(t[1]))return null;var n=t[5],r=t[4]||t[3]||1,a=t[2]||0;a||i.orderSupportsPrice(n)||(a=t[6]||0);var s=a*(t[0]-t[1])*r;return s||(s=null),s},e},i.S_TRADED_VALUE=function(){var e=new V("S_TRADED_VALUE",s.Integer);return e.computeFields=[L.AVG_PRICE(),L.VOLUME_FILLED()],e.shorten=!0,e.compute=function(e,t){return isNaN(t[0])||isNaN(t[1])?null:t[0]*t[1]},e},i.ComputeShareCapital=function(e,t,n){if(null===e||null===t)return null;var i=1;return-1!=this.centCurrencies.indexOf(n)&&(i=.01),e*t*i},i.Y_SHARE_CAPITAL=function(){var e=this,t=new V("Y_SHARE_CAPITAL",s.Integer);return t.computeFields=[T.PREVIOUS_CLOSE(),T.NUM_SHARES(),f.CURRENCY()],t.shorten=!0,t.compute=function(t,n){return e.ComputeShareCapital(n[0],n[1],n[2])},t},i.SHARE_CAPITAL=function(){var e=this,t=new V("SHARE_CAPITAL",s.Integer);return t.computeFields=[T.LAST(),T.NUM_SHARES(),f.CURRENCY(),T.PREVIOUS_CLOSE(),T.LAST_VALID()],t.shorten=!0,t.compute=function(t,n){var i=n[0];return i||(i=n[3])||(i=n[4]),e.ComputeShareCapital(i,n[1],n[2])},t},i.S_MIXED_DEVIATION=function(){var e=new V("S_MIXED_DEVIATION",s.Numeric,l.OrderAlgo);return e.computeFields=[L.ALGO_ID(),F.PCTFROMLAST(),F.TICKSFROMLAST()],e.compute=function(e,t){return"InfrontCondor_TrailTick"==t[0]?InfrontUtil.formatNumber(t[2],2):"InfrontCondor_TrailPct"==t[0]?InfrontUtil.formatPercent(t[1]):""},e},i.S_POS_LAST=function(){var e=new V("S_POS_LAST",s.Numeric);return e.computeFields=[O.MARKET_PRICE(),T.LAST_VALID()],e.compute=function(e,t){return InfrontUtil.isNumber(t[1])?t[1]:t[0]},e},i.S_COLLATERAL=function(){var e=new V("S_COLLATERAL",s.Integer);return e.computeFields=[O.COLLATERAL(),new D("LOAN_TO_VALUE_RATIO"),new D("MARKET_VALUE")],e.compute=function(e,t){return"number"==typeof t[1]&&"number"==typeof t[2]?t[1]*t[2]:"number"==typeof t[0]?t[0]:null},e},i.S_VALID_UNTIL=function(){var e=new V("S_VALID_UNTIL",s.Text);return e.computeFields=[L.VALID_UNTIL(),L.CUSTOM_DATE_FIELDS()],e.compute=function(e,t,n){if(t[1]&&-1<["GTC","GTX","AtOpen","AtClose"].indexOf(t[1]))return t[1];if(!t[0])return null;try{return InfrontUtil.formatDate(new Date(t[0]))}catch(e){return t[0]}},e},i.S_TRIGGER_PRICE=function(){var e=new V("S_TRIGGER_PRICE",s.Numeric);return e.computeFields=[L.TRIGGER_PRICE(),F.TRIGGERPX(),F.TRIGGERATPX()],e.compute=function(e,t){for(var n=0;n<t.length;n++)if(t[n]){var i=(""+t[n]).split("=");return 2==i.length&&"xs:99"==i[0].toLowerCase()?InfrontUtil.isNumeric(i[1])?Number(i[1]):i[1]||null:InfrontUtil.isNumeric(t[n])?Number(t[n]):t[n]}return null},e},i.RANGE=function(){var e=new V("RANGE",s.Numeric);return e.computeFields=[A.HIGH(),A.LOW()],e.compute=function(e,t){return isNaN(t[0])||isNaN(t[1])?null:t[0]-t[1]},e},i.B_CLIENT_SPOT=function(){var e=new V("B_CLIENT_SPOT",s.Numeric);return e.computeFields=[L.CLIENT_SPOT()],e.compute=function(e,t){for(var n=0;n<t.length;n++)if(t[n]){var i=(""+t[n]).split("=");return 2==i.length&&"xs:99"==i[0].toLowerCase()?i[1]||"":t[n]}return null},e},i.S_FORWARD_PRICE=function(){var e=new V("S_FORWARD_PRICE",s.Numeric);return e.computeFields=[L.FORWARD_PRICE()],e.compute=function(e,t){for(var n=0;n<t.length;n++)if(t[n]){var i=(""+t[n]).split("=");return 2==i.length&&"xs:5008"==i[0].toLowerCase()?i[1]||"":t[n]}return null},e},i.B_LOAN_TRANS_ACC=function(){var e=new V("B_LOAN_TRANS_ACC",s.Text);return e.computeFields=[L.LOAN_TRANS_ACC()],e.compute=function(e,t){for(var n=0;n<t.length;n++)if(t[n]){var i=(""+t[n]).split("=");return 2==i.length&&"xs:99"==i[0].toLowerCase()?i[1]||"":t[n]}return null},e},i.B_FORWARD_DATE=function(){var e=new V("B_FORWARD_DATE",s.Text);return e.computeFields=[L.FORWARD_DATE()],e.compute=function(e,t){for(var n=0;n<t.length;n++)if(t[n]){var i=(""+t[n]).split("=");return 2==i.length&&"xs:64"===i[0].toLowerCase()?i[1]||"":t[n]}return null},e},i.B_DISC_PREMIUM=function(){var e=new V("B_DISC_PREMIUM",s.Numeric);return e.computeFields=[L.DISC_PREMIUM(),F.TRIGGERPX(),F.TRIGGERATPX()],e.compute=function(e,t){for(var n=0;n<t.length;n++)if(t[n]){var i=(""+t[n]).split("=");return 2==i.length&&"xs:5007"===i[0].toLowerCase()?i[1]||"":t[n]}return null},e},i.calcPct=function(e,t){return 0!=t[0]?(t[0]-t[1])/t[0]*100:null},i.orderTypesWithoutPrice=e.OrderType.QUOTE_ORDER+e.OrderType.MARKET+e.OrderType.AT_MARKET+e.OrderType.BEST_POSSIBLE+e.OrderType.AT_MARKET_AND_KILL+e.OrderType.MARKET_TO_LIMIT+e.OrderType.STOP_LOSS+e.OrderType.BEST_TO_LIMIT+e.OrderType.STRATEGY+e.OrderType.MARKET_FOK+e.OrderType.MARKET_FAK,i.centCurrencies=["GBX","USX","ZAC"],i}(m);e.ComputedFields=G;var z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=d.Custom,t}return __extends(t,e),t.prototype.applySpec=function(t){e.prototype.applySpec.call(this,t),this.isValidSpecProp(t,"content",InfrontUtil.isFunction)||this.isValidSpecProp(t,"content",InfrontUtil.isString)?this.content=t.content:InfrontUtil.errorLog("Warning: Creating custom-field without valid content.",t)},t}(p);e.CustomField=z;var q=function(){function t(){}return t.createArrowSpec=function(t){var n="ARROW_"+IDS.tagToStr(IDS.TagSet.Realtime,t).toUpperCase(),i=new z(n,t,s.IndicatorArrow);return i.className=e.CssConstants.kUpdateNone,i.content='<span class="cell-table__arrow-indicator"></span>',i},t.ARROW_BID=function(){return this.createArrowSpec(IDS.RealtimeTags.Bid)},t.ARROW_ASK=function(){return this.createArrowSpec(IDS.RealtimeTags.Ask)},t.ARROW_LAST=function(){return this.createArrowSpec(IDS.RealtimeTags.Last)},t}();e.CustomFields=q;var Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=d.Converted,t}return __extends(t,e),t.prototype.applySpec=function(t){e.prototype.applySpec.call(this,t),this.specToProp(t,"sourceField",h.isValidSpec,!0),this.specToProp(t,"currency",InfrontUtil.isString),this.sourceField||InfrontUtil.errorLog("Warning: Creating converted-field without valid source.",t),this.currency||InfrontUtil.errorLog("Warning: Creating converted-field without valid currency.",t)},t}(p);e.ConvertedField=Y}(Infront||(Infront={})),function(e){var t,n,i=e.MWSConstants;(n=t=e.FinancialCalendarLayout||(e.FinancialCalendarLayout={}))[n.COMPACT=0]="COMPACT",n[n.EXPANDED=1]="EXPANDED";var r=function(n){function i(){var i=null!==n&&n.apply(this,arguments)||this;return i.enableRegionSelector=!1,i.startDate=new Date,i.endDate=InfrontUtil.addMonths(i.startDate,1),i.startEmpty=!1,i.layout=t.COMPACT,i.pageItems=null,i.paging=null,i.showCategory=!1,i.showTicker=!0,i.showTickerInHeader=!1,i.defaultSortOrder=e.SortOrder.Asc,i}return __extends(i,n),i}(e.WidgetOptions);e.FinancialCalendarWidgetOptions=r;var a=function(n){function a(i,r,a){var s=n.call(this,i,r,"financialCalendar",a)||this;return s.selectedRegions=[],s.calendarRequestIdCount=0,s.ticker=new e.Observable,s.options.pageItems=null!=a.pageItems?a.pageItems:a.layout==t.EXPANDED?10:5,s.options.paging=null!=a.paging?a.paging:a.layout==t.EXPANDED,s.visibleItems=new e.ObservableArray,s.regions=new e.ObservableArray,s.showCountryMenu=new e.Observable,s.showCountryMenu.set(!1),s.options.countryCodes&&(InfrontUtil.isArray(s.options.countryCodes)||InfrontUtil.errorLog("FinancialCalendar - opts.countryCodes must be an array or null"),s.options.countryCodes=s.options.countryCodes.map(function(e){return InfrontUtil.isString(e)?e.toUpperCase():""})),s}return __extends(a,n),a.prototype.returnDefaultWidgetOptions=function(){return new r},a.prototype.newInit=function(){var t=this;this.options.instrument&&this.options.showTickerInHeader&&this.ticker.set(this.options.instrument.ticker),this.infront.marketListsPromise().then(function(i){for(var r={},a=0,s=i;a<s.length;a++){var o=s[a];if(!r[o.country]){r[o.country]=!0;var l={};l.short_name=e.Countries.getAlpha2(o.country),l.full_name=e.Countries.getCountryName(o.country),l.code=o.country,t.regions.push(l),t.options.countryCodes&&0<=t.options.countryCodes.indexOf(l.short_name)&&t.selectedRegions.push(l)}}t.regions.sort(function(e,t){return e.full_name<t.full_name?-1:e.full_name>t.full_name?1:0}),n.prototype.newInit.call(t)}).catch(function(e){n.prototype.newInit.call(t)})},a.prototype.newBuildUI=function(){var i=this;this.addEventListener(document.body,"click",function(){return i.windowClick()});var r=e.WidgetDOMFactory.create_WFinancialCalendar_DOM(this.element,this.widgetTitle,this.ticker,this.options.navButton,this.navButtonClick,this.visibleItems,this.options.layout==t.EXPANDED,!this.options.hasOwnProperty("instrument")&&this.options.showTicker,this.options.enableRegionSelector,this.options.showCategory,this.options.showSearchWidget,function(e){return i.onSearchButtonClick(e)},this.infrontUI.languageHandler);if(this.options.showSearchWidget&&(this.searchWidget=new e.SearchBox(r.searchContainer,this.infront,this.addInstrumentSearchOpts("newsList")),this.searchContainer=r.searchContainer),this.options.paging){var a=new e.PagerOptions;a.onPageChange=function(e,t){return i.pageChange(e,t)},a.pages=0,this.pager=new e.Pager(r.pagerContainer,this.infrontUI.languageHandler,a)}if(this.progressIndicator=new e.ProgressIndicator(r.activityIndicator),this.options.startEmpty||this.loadData(),this.options.enableRegionSelector){var s=new e.DropDownOptions;s.closeOnClick=!0,s.list=this.regions.data,s.itemLabelPropertyKeys=["full_name"],s.title=this.languageHandler.get(this.languageKey,"regions"),s.onSelectedItemsChanged=function(e){i.countryClicked(e[0])},s.preSelectedItems=this.selectedRegions,this.regionsDropdown=new e.DropDown(r.countryDropDownElement,s,this.infrontUI.languageHandler)}n.prototype.newBuildUI.call(this)},a.prototype.newDestroyUI=function(){this.calendarRequestIdCount++,this.pager&&(this.pager.destroy(),this.pager=null),this.regionsDropdown&&this.regionsDropdown.destroy(),n.prototype.newDestroyUI.call(this)},a.prototype.loadData=function(){var t=this;this.items=[],this.visibleItems.clear(),this.progressIndicator&&this.progressIndicator.start();var n=new e.CalendarOptions;this.options.instrument&&(n.instrument=this.options.instrument),this.options.feeds&&(n.feeds=this.options.feeds),this.selectedRegions&&(n.countries=this.selectedRegions.map(function(e){return e.short_name})),n.startDate=this.options.startDate,n.endDate=this.options.endDate,n.onError=function(e,n){t.progressIndicator&&t.progressIndicator.stop(),IDS.log("FinancialCalendarWidget: ",n)},this.calendarRequestIdCount++;var r=this.calendarRequestIdCount;n.onData=function(n){if(r==t.calendarRequestIdCount){var a;switch(t.progressIndicator&&t.progressIndicator.stop(),t.options.defaultSortOrder){case e.SortOrder.Desc:a=function(e,t){return t-e};break;default:a=function(e,t){return e-t}}if(t.items=n,t.items.sort(function(e,t){var n=e.hasOwnProperty(i.date)?Date.parse(e[i.date]):Number.MAX_VALUE,r=t.hasOwnProperty(i.date)?Date.parse(t[i.date]):Number.MAX_VALUE;return a(n,r)}),t.options.showCategory&&t.items.forEach(function(e,n,i){e.categoryType=t.languageHandler.get(t.languageKey,e.categoryType),i[n]=e}),t.visibleItems.clear(),t.items.length>t.options.pageItems){if(t.visibleItems.replaceWith(t.items.slice(0,t.options.pageItems)),t.options.paging){var s=Math.ceil(t.items.length/t.options.pageItems);t.pager.setPages(s),t.pager.setCurrentPage(0)}}else t.visibleItems.replaceWith(t.items),t.options.paging&&t.pager.setPages(0)}},this.infront.calendar(n)},a.prototype.windowClick=function(){1==this.showCountryMenu.get()&&this.showCountryMenu.set(!this.showCountryMenu.get())},a.prototype.countryDropdownLabelClicked=function(){this.showCountryMenu.set(!this.showCountryMenu.get())},a.prototype.countryClicked=function(e){this.countryChanged(e)},a.prototype.countryChanged=function(e){this.selectedRegions=[e],this.loadData()},a.prototype.pageChange=function(e,t){var n=e*this.options.pageItems;this.visibleItems.replaceWith(this.items.slice(n,n+this.options.pageItems))},a.prototype.modify=function(e){InfrontUtil.mergeRecursive(this.options,e),this.newDestroyUI(),this.newInit()},a.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument]},a.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.infrontInstrument&&(this.options.instrument=e.value,this.newDestroyUI(),this.newInit())},a}(e.WidgetBase);e.FinancialCalendarWidget=a}(Infront||(Infront={})),function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.registerUnbind=function(e,n){this.put(e,t.kUnbindKey,n)},t.prototype.registerUnbinds=function(e,n){this.put(e,t.kUnbindKey,function(){for(var e=0;e<n.length;e++)n[e]&&n[e]()})},t.prototype.unbind=function(e,n){void 0===n&&(n=!1);var i=this.get(e,t.kUnbindKey);if(i&&(i(),this.delete(e,t.kUnbindKey)),n&&e.children)for(var r=0;r<e.children.length;r++)this.unbind(e.children.item(r),!0)},t.kUnbindKey="infront-unbind",t}(e.Data);e.UnbindingManager=t}(Infront||(Infront={})),function(e){var t=function(){function t(){}return t.create_WFocus_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-w-focus";var g=new e.ClassBinding(m,"cell-w-focus--not-traded-today",function(e){return 0==e});a.observe(g,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(m,"cell-clear"),t.unbindingManager.registerUnbind(m,function(){a.unbind(g)});var f=document.createElement("div");m.appendChild(f),f.className="cell-flex-row cell-flex-collapse";var v=document.createElement("div");if(f.appendChild(v),v.className="cell-flex-column",0==s){var y=document.createElement("span");v.appendChild(y),y.className="cell-h4";var b=e.BindingFactory.createValueBinding(y,"innerHTML"),T=u.customBind(h,["instrument","ticker"],b);t.unbindingManager.registerUnbind(y,T)}if(1==s){y=document.createElement("abbr"),v.appendChild(y),y.className="cell-cursor-pointer cell-h4",InfrontUtil.addEventListener(y,"click",function(e){o(e)}),InfrontUtil.addEventListener(y,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(e)});var S=e.BindingFactory.createValueBinding(y,"innerHTML"),C=u.customBind(h,["instrument","ticker"],S);t.unbindingManager.registerUnbind(y,C)}if(!0===c){var I=document.createElement("div");f.appendChild(I),I.className="cell-flex-column cell-flex-shrink";var _=document.createElement("button");I.appendChild(_),_.className="cell-heading__search-icon",_.type="button",InfrontUtil.addEventListener(_,"click",function(e){d(e)});var M=document.createElement("div");I.appendChild(M),M.className="cell-heading__search-field";var E=document.createElement("button");M.appendChild(E),E.className="cell-heading__search-close",E.type="button",InfrontUtil.addEventListener(E,"click",function(e){d(e)})}var w=document.createElement("div");m.appendChild(w),w.className="cell-w-focus__toprow  cell-border-type-1";var A=document.createElement("div");w.appendChild(A),A.className="cell-w-focus__row   cell-w-focus__row--highvalue",A.setAttribute("aria-hidden","true");var D=e.BindingFactory.createNumberFormatValueBinding(A,"innerHTML",r,!1),O=u.customBind(h,"high",D);t.unbindingManager.registerUnbind(A,O);var k=document.createElement("div");m.appendChild(k),k.className="cell-w-focus__leftcol";var R=document.createElement("div");k.appendChild(R),R.className="cell-w-focus__row  cell-widget-big-text  cell-text-right  cell-w-focus__main-num";var N=e.BindingFactory.createNumberFormatValueBinding(R,"innerHTML",r,!1),L=u.customBind(h,"last_valid",N);if(R.setAttribute("role","region"),t.unbindingManager.registerUnbind(R,L),1==l){var P=document.createElement("span");k.appendChild(P),P.className="cell-delayed-indicator",P.appendChild(document.createTextNode("D"))}var F=document.createElement("div");k.appendChild(F),F.className="cell-flex-row cell-flex-collapse cell-w-focus__row--change";var x=new e.ClassBinding(F,"cell-status-positive",function(e){return 0<e}),U=u.customBind(h,"pct_change",x),B=new e.ClassBinding(F,"cell-status-negative",function(e){return e<0}),W=u.customBind(h,"pct_change",B),H=new e.ClassBinding(F,"cell-status-neutral",function(e){return 0==e}),V=u.customBind(h,"pct_change",H);t.unbindingManager.registerUnbind(F,function(){U(),W(),V()});var G=document.createElement("div");F.appendChild(G),G.className="cell-flex-column";var z=document.createElement("div");G.appendChild(z),z.className="cell-w-focus__row--change__indicator cell-arrow";var q=new e.ClassBinding(z,"cell-arrow--up",function(e){return 0<e}),Y=u.customBind(h,"pct_change",q),K=new e.ClassBinding(z,"cell-arrow--down",function(e){return e<0}),X=u.customBind(h,"pct_change",K);t.unbindingManager.registerUnbind(z,function(){Y(),X()});var j=document.createElement("div");F.appendChild(j),j.className="cell-flex-column cell-flex-shrink cell-w-focus__row--change__value",j.setAttribute("role","region");var Z=e.BindingFactory.createNumberFormatValueBinding(j,"innerHTML",r,!1),J=u.customBind(h,"change",Z);t.unbindingManager.registerUnbind(j,J);var Q=document.createElement("div");F.appendChild(Q),Q.className="cell-flex-column cell-flex-shrink cell-w-focus__row--change__pct",Q.setAttribute("role","region");var $=e.BindingFactory.createPercentBinding(Q,2,"innerHTML",!1),ee=u.customBind(h,"pct_change",$);t.unbindingManager.registerUnbind(Q,ee);var te=document.createElement("div");k.appendChild(te),te.className="cell-flex-row cell-w-focus__row--ticks";var ne=new e.ClassBinding(te,"testClass",function(e){return 0<e}),ie=u.customBind(h,"change",ne),re=new e.ArrayBinding(te,new e.InlineRowFactory(function(e,t){var n=document.createElement("span");return n.className="cell-w-focus__row--ticks__ticks","up"===e&&InfrontUtil.addClassName(n,"cell-w-focus__row--ticks__ticks--up"),"down"===e&&InfrontUtil.addClassName(n,"cell-w-focus__row--ticks__ticks--down"),n}),null);i.observe(re),t.unbindingManager.registerUnbind(te,function(){ie(),i.unbind(re)});var ae=document.createElement("div");m.appendChild(ae),ae.className="cell-w-focus__rightcol";var se=document.createElement("div");ae.appendChild(se),se.className="cell-shared-indicator";var oe=document.createElement("div");se.appendChild(oe),oe.className="cell-shared-indicator__current";var le=e.BindingFactory.createHTMLAttributeBinding(oe,"style",function(e){return"top: "+e+"%"}),ce=u.customBind(h,"computedArrowPosition",le);t.unbindingManager.registerUnbind(oe,ce);var de=document.createElement("div");se.appendChild(de),de.className="cell-shared-indicator__up";var ue=e.BindingFactory.createHTMLAttributeBinding(de,"style",function(e){return"height: "+e+"%"}),he=u.customBind(h,"computedHighBar",ue);t.unbindingManager.registerUnbind(de,he);var pe=document.createElement("div");se.appendChild(pe),pe.className="cell-shared-indicator__down";var me=e.BindingFactory.createHTMLAttributeBinding(pe,"style",function(e){return"height: "+e+"%"}),ge=u.customBind(h,"computedLowBar",me),fe=new e.ClassBinding(pe,"cell-no-border",function(e){return 100==e}),ve=u.customBind(h,"computedLowBar",fe);t.unbindingManager.registerUnbind(pe,function(){ge(),ve()});var ye=document.createElement("div");m.appendChild(ye),ye.className="cell-w-focus__botrow  cell-border-type-1";var be=document.createElement("div");ye.appendChild(be),be.className="cell-w-focus__lowvalue",be.setAttribute("aria-hidden","true");var Te=e.BindingFactory.createNumberFormatValueBinding(be,"innerHTML",r,!1),Se=u.customBind(h,"low",Te);return t.unbindingManager.registerUnbind(be,Se),{wFocus:f,searchContainer:M}},t.create_WFocusMini_DOM=function(n,i,r,a,s,o,l,c,d){var u=document.createElement("div");n.appendChild(u),u.className="cell-w-focus-mini";var h=new e.ClassBinding(u,"cell-w-focus-mini--not-traded-today",function(e){return 0==e});if(r.observe(h,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(u,"cell-clear"),t.unbindingManager.registerUnbind(u,function(){r.unbind(h)}),!0===s){var p=document.createElement("div");u.appendChild(p),p.className="cell-flex-row cell-flex-collapse cell-flex-align-right cell-w-focus-mini__header";var m=document.createElement("div");p.appendChild(m),m.className="cell-flex-column cell-flex-shrink cell-w-focus-mini__search";var g=document.createElement("button");m.appendChild(g),g.className="cell-heading__search-icon",g.type="button",InfrontUtil.addEventListener(g,"click",function(e){o(e)});var f=document.createElement("div");m.appendChild(f),f.className="cell-heading__search-field";var v=document.createElement("button");f.appendChild(v),v.className="cell-heading__search-close",v.type="button",InfrontUtil.addEventListener(v,"click",function(e){o(e)})}var y=document.createElement("div");u.appendChild(y),y.className="cell-flex-row cell-flex-collapse cell-flex-align-center cell-w-focus-mini__payload",y.setAttribute("aria-live","polite");var b=document.createElement("div");y.appendChild(b),b.className="cell-flex-column cell-flex-shrink";var T=document.createElement("span");b.appendChild(T),T.className="cell-w-focus__row  cell-w-focus-mini__main-num  cell-text-right",T.setAttribute("aria-label",""+d.get("accessibility","currentVal"));var S=e.BindingFactory.createNumberFormatValueBinding(T,"innerHTML",i,!1),C=l.customBind(c,"last_valid",S),I=new e.ClassBinding(T,"cell-w-focus__row--change__indicator--up",function(e){return 0<e}),_=l.customBind(c,"pct_change",I),M=new e.ClassBinding(T,"cell-w-focus__row--change__indicator--down",function(e){return e<0}),E=l.customBind(c,"pct_change",M);if(t.unbindingManager.registerUnbind(T,function(){C(),_(),E()}),1==a){var w=document.createElement("span");b.appendChild(w),w.className="cell-delayed-indicator",w.appendChild(document.createTextNode("D"))}var A=document.createElement("div");y.appendChild(A),A.className="cell-flex-column cell-flex-shrink";var D=document.createElement("div");A.appendChild(D),D.className="cell-shared-indicator  cell-w-focus-mini__indicator";var O=document.createElement("div");D.appendChild(O),O.className="cell-shared-indicator__current  cell-w-focus-mini__indicator__current";var k=e.BindingFactory.createHTMLAttributeBinding(O,"style",function(e){return"top: "+e+"%"}),R=l.customBind(c,"computedArrowPosition",k);t.unbindingManager.registerUnbind(O,R);var N=document.createElement("div");D.appendChild(N),N.className="cell-shared-indicator__up";var L=e.BindingFactory.createHTMLAttributeBinding(N,"style",function(e){return"height: "+e+"%"}),P=l.customBind(c,"computedHighBar",L);t.unbindingManager.registerUnbind(N,P);var F=document.createElement("div");D.appendChild(F),F.className="cell-shared-indicator__down";var x=e.BindingFactory.createHTMLAttributeBinding(F,"style",function(e){return"height: "+e+"%"}),U=l.customBind(c,"computedLowBar",x),B=new e.ClassBinding(F,"cell-no-border",function(e){return 100==e}),W=l.customBind(c,"computedLowBar",B);t.unbindingManager.registerUnbind(F,function(){U(),W()});var H=document.createElement("div");A.appendChild(H),H.className="cell-w-focus-mini__values";var V=new e.ClassBinding(H,"cell-status-positive",function(e){return 0<e}),G=l.customBind(c,"pct_change",V),z=new e.ClassBinding(H,"cell-status-negative",function(e){return e<0}),q=l.customBind(c,"pct_change",z),Y=new e.ClassBinding(H,"cell-status-neutral",function(e){return 0==e}),K=l.customBind(c,"pct_change",Y);t.unbindingManager.registerUnbind(H,function(){G(),q(),K()});var X=document.createElement("div");H.appendChild(X),X.className="cell-w-focus-mini__values__value",X.setAttribute("aria-label",""+d.get("accessibility","dailyChange"));var j=e.BindingFactory.createNumberFormatValueBinding(X,"innerHTML",i,!1),Z=l.customBind(c,"change",j);t.unbindingManager.registerUnbind(X,Z);var J=document.createElement("div");H.appendChild(J),J.className="cell-w-focus-mini__values__pct",J.setAttribute("aria-label",""+d.get("accessibility","dailyPercentage"));var Q=e.BindingFactory.createPercentBinding(J,2,"innerHTML",!1),$=l.customBind(c,"pct_change",Q);return t.unbindingManager.registerUnbind(J,$),{wFocus:p,searchContainer:f}},t.create_WComplexChart_DOM=function(n,i){var r=document.createElement("div");n.appendChild(r),r.className="cell-chart-wrapper";var a=document.createElement("div");r.appendChild(a),a.className="cell-flex-row cell-flex-collapse cell-chart__toolbar";var s=e.BindingFactory.createHTMLAttributeBinding(a,"style",function(e){return"display:"+(e?"flex":"none")});i.observe(s),t.unbindingManager.registerUnbind(a,function(){i.unbind(s)});var o=document.createElement("div");r.appendChild(o),o.className="cell-flex-row cell-flex-collapse cell-chart__toolbar";var l=document.createElement("div");r.appendChild(l),l.className="cell-row cell-no-margin-bottom cell-chart-highchartswrapper";var c=document.createElement("div");return r.appendChild(c),c.className="cell-flex-row cell-flex-collapse cell-chart__toolbar",{chartContainer:l,topbarWrapper:a,subToolbarWrapper:o,bottomToolbarWrapper:c}},t.create_CChartMenu_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m){var g=document.createElement("div");n.appendChild(g),g.className="cell-flex-column cell-flex-shrink";var f=document.createElement("div");g.appendChild(f);var v=e.BindingFactory.createHTMLAttributeBinding(f,"style",function(e){return"display:"+(e?"block":"none")});r.observe(v),t.unbindingManager.registerUnbind(f,function(){r.unbind(v)});var y=document.createElement("div");n.appendChild(y),y.className="cell-flex-column";var b=document.createElement("div");y.appendChild(b),b.className="cell-heading-dropdown cell-heading-dropdown--multi-selection",b.setAttribute("style","display:"+(i?"block":"none"));var T=document.createElement("div");b.appendChild(T),T.className="cell-heading-dropdown__label",InfrontUtil.addEventListener(T,"click",function(e){u(e)}),T.setAttribute("role","button"),InfrontUtil.addEventListener(T,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u(e)}),T.innerHTML=m.get("chart","searchPlaceholder");var S=document.createElement("div");n.appendChild(S),S.className="cell-flex-column cell-flex-shrink";var C=document.createElement("div");S.appendChild(C),C.className="cell cell-chart-export-button",InfrontUtil.addEventListener(C,"click",function(e){p(e)}),C.setAttribute("role","button"),InfrontUtil.addEventListener(C,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||p(e)}),C.setAttribute("tabindex","0");var I=e.BindingFactory.createHTMLAttributeBinding(C,"style",function(e){return"display:"+(e?"block":"none")});s.observe(I),t.unbindingManager.registerUnbind(C,function(){s.unbind(I)});var _=document.createElement("div");n.appendChild(_),_.className="cell-flex-column cell-flex-shrink";var M=document.createElement("div");n.appendChild(M),M.className="cell-flex-column cell-flex-shrink";var E=document.createElement("div");n.appendChild(E),E.className="cell-flex-column cell-flex-shrink";var w=document.createElement("div");E.appendChild(w),w.className="cell cell-chart-resize-button",InfrontUtil.addEventListener(w,"click",function(e){c(e)}),w.setAttribute("role","button"),InfrontUtil.addEventListener(w,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||c(e)}),w.setAttribute("tabindex","0");var A=e.BindingFactory.createHTMLAttributeBinding(w,"style",function(e){return"display:"+(e?"block":"none")});return a.observe(A),t.unbindingManager.registerUnbind(w,function(){a.unbind(A)}),{searchContainer:f,expandButtonContainer:w,dropDownContainer:_,customSearchContainer:T}},t.create_CChartSubMenu_DOM=function(e,t,n,i){var r=document.createElement("div");e.appendChild(r),r.className="cell-chart-sub-menu_left";var a=document.createElement("div");if(e.appendChild(a),a.className="cell-chart-sub-menu_right",1==t){var s=document.createElement("div");a.appendChild(s),s.className="cell-flex-column cell-flex-shrink";var o=document.createElement("div");s.appendChild(o),o.className="cell cell-chart-reset-button",InfrontUtil.addEventListener(o,"click",function(e){n(e)}),o.setAttribute("role","button"),InfrontUtil.addEventListener(o,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||n(e)}),o.setAttribute("tabindex","0");var l=document.createElement("span");o.appendChild(l),l.className="cell cell-chart-reset-button__icon";var c=document.createElement("span");o.appendChild(c),c.className="cell cell-chart-reset-button__text",c.innerHTML=i.get("chart","resetButtonText")}return r},t.create_CChartBottomMenu_DOM=function(e,t,n,i){var r=document.createElement("div");if(e.appendChild(r),1==t){var a=document.createElement("div");r.appendChild(a),a.className="cell cell-chart-export-button",InfrontUtil.addEventListener(a,"click",function(e){n(e)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||n(e)}),a.setAttribute("tabindex","0");var s=document.createElement("span");a.appendChild(s),s.className="cell cell-chart-export-button__icon";var o=document.createElement("span");a.appendChild(o),o.className="cell cell-chart-export-button__text",o.innerHTML=i.get("chart","saveButtonText")}var l=document.createElement("div");e.appendChild(l),l.className="cell-chart-logo"},t.create_CChartDropDown_DOM=function(n,i,r,a,s,o,l,c,d,u){var h=document.createElement("div");n.appendChild(h),h.className="cell-heading-dropdown cell-heading-dropdown--multi-selection",h.setAttribute("style","display:none"),InfrontUtil.addEventListener(h,"click",function(e){e.stopPropagation(),o(e)}),h.setAttribute("role","button"),InfrontUtil.addEventListener(h,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(e)}),h.setAttribute("tabindex","0"),InfrontUtil.addClassName(h,c?"cell-heading-dropdown--"+c:"");var p=e.BindingFactory.createHTMLAttributeBinding(h,"style",function(e){return"display:"+(e?"block":"none")});i.observe(p);var m=new e.ClassBinding(h,"cell-custom-dropdown-selector-wrapper--active",function(e){return 1==e});r.observe(m,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(h,function(){i.unbind(p),r.unbind(m)});var g=document.createElement("div");h.appendChild(g),g.className="cell-noselect  cell-pull-left  cell-heading-dropdown__label";var f=e.BindingFactory.createValueBinding(g,"innerHTML");s.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){s.unbind(f)});var v=document.createElement("div");h.appendChild(v),v.className="cell-noselect  cell-pull-left  cell-heading-dropdown__arrow  cell-arrow  cell-arrow--down";var y=document.createElement("div");h.appendChild(y),y.className="cell-pos-relative";var b=document.createElement("div");y.appendChild(b),b.className="cell-custom-dropdown-selector-wrapper  cell-custom-dropdown-selector-wrapper--adjusted",b.setAttribute("style","display:none"),b.setAttribute("tabindex","0"),InfrontUtil.addClassName(b,c?"cell-custom-dropdown-selector-wrapper--"+c:"");var T=e.BindingFactory.createHTMLAttributeBinding(b,"style",function(e){return"display:"+(e?"":"none")});if(r.observe(T),t.unbindingManager.registerUnbind(b,function(){r.unbind(T)}),d){var S=document.createElement("div");b.appendChild(S),S.className="cell-custom-dropdown-selector__item";var C=new e.ClassBinding(S,"cell-custom-dropdown-selector__item--selected",function(e){return 1==e});u.observe(C,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(S,function(){u.unbind(C)});var I=document.createElement("div");S.appendChild(I),I.className="cell-custom-dropdown-selector__item__label",InfrontUtil.addEventListener(I,"click",function(e){l(d)}),I.setAttribute("role","button"),InfrontUtil.addEventListener(I,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(d)});var _=e.BindingFactory.createValueBinding(I,"innerHTML");d.observe(_,e.InitialUpdate.Synchronous);var M=new e.ClassBinding(I,"cell-custom-dropdown-selector__item__label--selected",function(e){return 1==e});u.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(I,function(){d.unbind(_),u.unbind(M)})}var E=document.createElement("div");b.appendChild(E),E.className="cell-custom-dropdown-selector";var w=new e.ArrayBinding(E,new e.InlineRowFactory(function(n,i){var r=document.createElement("div");r.className="cell-custom-dropdown-selector__item";var a=e.BindingFactory.createHTMLAttributeBinding(r,"aria-hidden",function(e){return(1==e).toString()});u.observe(a,e.InitialUpdate.Synchronous);var s=new e.ClassBinding(r,"cell-custom-dropdown-selector__item--selected",function(e){return 1==e});n.selected.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){u.unbind(a),n.selected.unbind(s)});var o=document.createElement("div");r.appendChild(o),o.className="cell-custom-dropdown-selector__item__label",InfrontUtil.addEventListener(o,"click",function(e){l(n)}),o.setAttribute("role","button"),InfrontUtil.addEventListener(o,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(n)}),o.setAttribute("tabindex","0"),o.innerHTML=n.label;var c=new e.ClassBinding(o,"cell-custom-dropdown-selector__item__label--unavailable",function(e){return 0==e});n.available.observe(c,e.InitialUpdate.Synchronous);var d=new e.ClassBinding(o,"cell-custom-dropdown-selector__item__label--selected",function(e){return 1==e});return n.selected.observe(d,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){n.available.unbind(c),n.selected.unbind(d)}),r}),null);return a.observe(w),t.unbindingManager.registerUnbind(E,function(){a.unbind(w)}),{dropdownContainer:h,dropdownElement:b}},t.create_WValuePair_DOM=function(e,t,n){var i=document.createElement("div");e.appendChild(i),i.className="cell-w-value-pair  cell-clear";var r=document.createElement("div");i.appendChild(r),r.className="cell-w-value-pair__leftcol";var a=document.createElement("div");r.appendChild(a),a.className="cell-w-value-pair__label",a.innerHTML=t;var s=document.createElement("div");r.appendChild(s),s.className="cell-w-value-pair__value";var o=document.createElement("div");i.appendChild(o),o.className="cell-w-value-pair__rightcol";var l=document.createElement("div");o.appendChild(l),l.className="cell-w-value-pair__label",l.innerHTML=n;var c=document.createElement("div");return o.appendChild(c),c.className="cell-w-value-pair__value",{leftWidget:s,rightWidget:c}},t.create_WSimpleChartOverview_DOM=function(n,i,r,a,s,o){var l=document.createElement("div");n.appendChild(l),l.className="cell-w-simple-chart-overview  wt-no-bg-blink";var c=document.createElement("div");l.appendChild(c),c.className="cell-w-simple-chart-overview__chart";var d=document.createElement("div");l.appendChild(d),d.className="cell-w-simple-chart-overview__content";var u=document.createElement("div");d.appendChild(u),u.className="cell-w-simple-chart-overview__name";var h=e.BindingFactory.createValueBinding(u,"innerHTML"),p=s.customBind(o,["instrument","ticker"],h);t.unbindingManager.registerUnbind(u,p);var m=document.createElement("div");d.appendChild(m),m.className="cell-w-simple-chart-overview__period",m.innerHTML=a;var g=document.createElement("div");d.appendChild(g),g.className="cell-w-simple-chart-overview__last",g.setAttribute("role","region");var f=e.BindingFactory.createNumberFormatValueBinding(g,"innerHTML",r,!1),v=s.customBind(o,"last_valid",f);t.unbindingManager.registerUnbind(g,v);var y=document.createElement("div");d.appendChild(y),y.className="cell-w-simple-chart-overview__pct",y.setAttribute("role","region");var b=e.BindingFactory.createPercentBinding(y,2,"innerHTML",!1),T=s.customBind(o,"pct_change",b),S=new e.ClassBinding(y,"cell-status-positive",function(e){return 0<e}),C=s.customBind(o,"pct_change",S),I=new e.ClassBinding(y,"cell-status-neutral",function(e){return 0==e}),_=s.customBind(o,"pct_change",I),M=new e.ClassBinding(y,"cell-status-negative",function(e){return e<0}),E=s.customBind(o,"pct_change",M);return t.unbindingManager.registerUnbind(y,function(){T(),C(),_(),E()}),c},t.create_WIndexOverview_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y){var b=document.createElement("div");n.appendChild(b),b.className="cell-w-index-overview cell-clear";var T=document.createElement("div");if(b.appendChild(T),T.className="cell-flex-row cell-flex-collapse w-index-overview__row--top",1==m){var S=document.createElement("div");T.appendChild(S),S.className="cell-flex-column cell-cursor-pointer cell-strong",InfrontUtil.addEventListener(S,"click",function(e){g(e)}),S.setAttribute("role","button"),InfrontUtil.addEventListener(S,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||g(e)});var C=e.BindingFactory.createValueBinding(S,"innerHTML"),I=f.customBind(v,["instrument","full_name"],C);t.unbindingManager.registerUnbind(S,I)}if(0==m){S=document.createElement("div"),T.appendChild(S),S.className="cell-flex-column cell-strong";var _=e.BindingFactory.createValueBinding(S,"innerHTML"),M=f.customBind(v,["instrument","full_name"],_);t.unbindingManager.registerUnbind(S,M)}var E=document.createElement("div");T.appendChild(E),E.className="cell-flex-column cell-flex-shrink";var w=e.BindingFactory.createTimestampBinding(E),A=f.customBind(v,"time",w);t.unbindingManager.registerUnbind(E,A);var D=document.createElement("div");if(b.appendChild(D),D.className="cell-flex-row cell-flex-collapse cell-widget-med-text",1==m){var O=document.createElement("div");D.appendChild(O),O.className="cell-flex-column cell-cursor-pointer",InfrontUtil.addEventListener(O,"click",function(e){g(e)}),O.setAttribute("role","button"),InfrontUtil.addEventListener(O,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||g(e)});var k=e.BindingFactory.createValueBinding(O,"innerHTML"),R=f.customBind(v,["instrument","ticker"],k);t.unbindingManager.registerUnbind(O,R)}if(0==m){O=document.createElement("div"),D.appendChild(O),O.className="cell-flex-column";var N=e.BindingFactory.createValueBinding(O,"innerHTML"),L=f.customBind(v,["instrument","ticker"],N);t.unbindingManager.registerUnbind(O,L)}if(0==s){var P=document.createElement("div");D.appendChild(P),P.className="cell-flex-column cell-flex-shrink";var F=document.createElement("span");P.appendChild(F);var x=document.createElement("span");P.appendChild(x);var U=e.BindingFactory.createNumberFormatValueBinding(x,"innerHTML",i,!1),B=f.customBind(v,"last",U);t.unbindingManager.registerUnbind(x,B)}if(0<s){P=document.createElement("div"),D.appendChild(P),P.className="cell-flex-column cell-flex-shrink";var W=new e.ClassBinding(P,"cell-status-positive",function(e){return 0<e}),H=f.customBind(v,"pct_change",W),V=new e.ClassBinding(P,"cell-status-neutral",function(e){return 0==e}),G=f.customBind(v,"pct_change",V),z=new e.ClassBinding(P,"cell-status-negative",function(e){return e<0}),q=f.customBind(v,"pct_change",z);t.unbindingManager.registerUnbind(P,function(){H(),G(),q()});var Y=document.createElement("span");P.appendChild(Y);var K=new e.ClassBinding(Y,"cell-status-indicator-up",function(e){return 0<e}),X=f.customBind(v,"pct_change",K),j=new e.ClassBinding(Y,"cell-status-indicator-down",function(e){return e<0}),Z=f.customBind(v,"pct_change",j);switch(0<s&&InfrontUtil.addClassName(Y,"cell-display-none"),t.unbindingManager.registerUnbind(Y,function(){X(),Z()}),x=document.createElement("span"),P.appendChild(x),s){case 0:var J=e.BindingFactory.createNumberFormatValueBinding(x,"innerHTML",i,!1),Q=f.customBind(v,"last",J);t.unbindingManager.registerUnbind(x,Q);break;case 1:var $=e.BindingFactory.createPercentBinding(x,2,"innerHTML",!1),ee=f.customBind(v,"pct_change",$);t.unbindingManager.registerUnbind(x,ee)}}var te=document.createElement("div");b.appendChild(te),te.className="cell-flex-row cell-flex-collapse";var ne=document.createElement("div");if(te.appendChild(ne),ne.className="cell-flex-column",0==s){var ie=document.createElement("div");te.appendChild(ie),ie.className="cell-flex-column cell-flex-shrink cell-strong";var re=document.createElement("span");ie.appendChild(re),re.setAttribute("role","region");var ae=e.BindingFactory.createPercentBinding(re,2,"innerHTML",!1),se=f.customBind(v,"pct_change",ae),oe=new e.ClassBinding(re,"cell-status-positive",function(e){return 0<e}),le=f.customBind(v,"pct_change",oe),ce=new e.ClassBinding(re,"cell-status-neutral",function(e){return 0==e}),de=f.customBind(v,"pct_change",ce),ue=new e.ClassBinding(re,"cell-status-negative",function(e){return e<0}),he=f.customBind(v,"pct_change",ue);t.unbindingManager.registerUnbind(re,function(){se(),le(),de(),he()});var pe=document.createElement("span");ie.appendChild(pe),pe.className="changevalue",pe.setAttribute("role","region");var me=e.BindingFactory.createNumberFormatValueBinding(pe,"innerHTML",i,!1),ge=f.customBind(v,"change",me),fe=new e.ClassBinding(pe,"cell-status-negative",function(e){return e<0}),ve=f.customBind(v,"change",fe),ye=new e.ClassBinding(pe,"cell-status-neutral",function(e){return 0==e}),be=f.customBind(v,"change",ye),Te=new e.ClassBinding(pe,"cell-status-positive",function(e){return 0<e}),Se=f.customBind(v,"change",Te);t.unbindingManager.registerUnbind(pe,function(){ge(),ve(),be(),Se()})}if(0<s){ie=document.createElement("div"),te.appendChild(ie),ie.className="cell-flex-column cell-flex-shrink cell-strong",re=document.createElement("span"),ie.appendChild(re);var Ce=e.BindingFactory.createNumberFormatValueBinding(re,"innerHTML",i,!1),Ie=f.customBind(v,"last_valid",Ce);t.unbindingManager.registerUnbind(re,Ie),pe=document.createElement("span"),ie.appendChild(pe),pe.className="changevalue";var _e=e.BindingFactory.createNumberFormatValueBinding(pe,"innerHTML",i,!1),Me=f.customBind(v,"change",_e),Ee=new e.ClassBinding(pe,"cell-status-negative",function(e){return e<0}),we=f.customBind(v,"change",Ee),Ae=new e.ClassBinding(pe,"cell-status-neutral",function(e){return 0==e}),De=f.customBind(v,"change",Ae),Oe=new e.ClassBinding(pe,"cell-status-positive",function(e){return 0<e}),ke=f.customBind(v,"change",Oe);t.unbindingManager.registerUnbind(pe,function(){Me(),we(),De(),ke()})}var Re=document.createElement("div");b.appendChild(Re),Re.className="cell-w-index-overview__contentrow  cell-w-index-overview__contentrow--spaced";var Ne=document.createElement("table");Re.appendChild(Ne),Ne.className="cell-table-basic  cell-tbl-change-labels";var Le=document.createElement("tr");Ne.appendChild(Le);var Pe=document.createElement("td");Le.appendChild(Pe),Pe.className="cell-border-transparent";var Fe=document.createElement("span");Pe.appendChild(Fe),Fe.innerHTML=y.get("indexOverview","down"),Pe.appendChild(document.createTextNode(" "));var xe=document.createElement("span");Pe.appendChild(xe);var Ue=e.BindingFactory.createNumberFormatValueBinding(xe,"innerHTML",0,!1);c.observe(Ue),t.unbindingManager.registerUnbind(xe,function(){c.unbind(Ue)}),Pe.appendChild(document.createTextNode(" ("));var Be=document.createElement("span");Pe.appendChild(Be);var We=e.BindingFactory.createPercentBinding(Be,0,"innerHTML",!1);h.observe(We,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Be,function(){h.unbind(We)}),Pe.appendChild(document.createTextNode(")"));var He=document.createElement("td");Le.appendChild(He),He.className="cell-border-transparent";var Ve=document.createElement("span");He.appendChild(Ve),Ve.innerHTML=y.get("indexOverview","unchanged"),He.appendChild(document.createTextNode(" "));var Ge=document.createElement("span");He.appendChild(Ge);var ze=e.BindingFactory.createNumberFormatValueBinding(Ge,"innerHTML",0,!1);l.observe(ze),t.unbindingManager.registerUnbind(Ge,function(){l.unbind(ze)}),He.appendChild(document.createTextNode(" ("));var qe=document.createElement("span");He.appendChild(qe);var Ye=e.BindingFactory.createPercentBinding(qe,0,"innerHTML",!1);u.observe(Ye,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(qe,function(){u.unbind(Ye)}),He.appendChild(document.createTextNode(")"));var Ke=document.createElement("td");Le.appendChild(Ke),Ke.className="cell-border-transparent";var Xe=document.createElement("span");Ke.appendChild(Xe),Xe.innerHTML=y.get("indexOverview","up"),Ke.appendChild(document.createTextNode(" "));var je=document.createElement("span");Ke.appendChild(je);var Ze=e.BindingFactory.createNumberFormatValueBinding(je,"innerHTML",0,!1);o.observe(Ze),t.unbindingManager.registerUnbind(je,function(){o.unbind(Ze)}),Ke.appendChild(document.createTextNode(" ("));var Je=document.createElement("span");Ke.appendChild(Je);var Qe=e.BindingFactory.createPercentBinding(Je,0,"innerHTML",!1);d.observe(Qe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Je,function(){d.unbind(Qe)}),Ke.appendChild(document.createTextNode(")"));var $e=document.createElement("table");Re.appendChild($e),$e.className="cell-table-basic  cell-tbl-change-bars";var et=document.createElement("tr");$e.appendChild(et);var tt=document.createElement("td");et.appendChild(tt),tt.className="cell-tbl-change-bars--td  cell-tbl-change-bars--down";var nt=e.BindingFactory.createHTMLAttributeBinding(tt,"style",function(e){return"width: "+e+"%"});h.observe(nt),t.unbindingManager.registerUnbind(tt,function(){h.unbind(nt)});var it=document.createElement("td");et.appendChild(it),it.className="cell-tbl-change-bars--td  cell-tbl-change-bars--no-change";var rt=e.BindingFactory.createHTMLAttributeBinding(it,"style",function(e){return"width: "+e+"%"});u.observe(rt),t.unbindingManager.registerUnbind(it,function(){u.unbind(rt)});var at=document.createElement("td");et.appendChild(at),at.className="cell-tbl-change-bars--td  cell-tbl-change-bars--up";var st=e.BindingFactory.createHTMLAttributeBinding(at,"style",function(e){return"width: "+e+"%"});d.observe(st),t.unbindingManager.registerUnbind(at,function(){d.unbind(st)});var ot=document.createElement("div");b.appendChild(ot),ot.className="cell-w-index-overview__contentrow";var lt=document.createElement("table");ot.appendChild(lt),lt.className="cell-table  cell-tbl-historic";var ct=document.createElement("tr");lt.appendChild(ct);var dt=document.createElement("td");ct.appendChild(dt);for(var ut,ht,pt=0;pt<r.length;pt++)ct.appendChild((ut=r[pt],ht=void 0,(ht=document.createElement("td")).className="cell-strong  cell-text-center",ht.innerHTML=ut,ht));var mt=document.createElement("tr");lt.appendChild(mt);var gt=document.createElement("td");mt.appendChild(gt),gt.innerHTML=y.get("indexOverview","performance");var ft=function(n,i){var r=document.createElement("td");r.className="cell-text-center";var a=e.BindingFactory.createPercentBinding(r,2,"innerHTML",!1),s=f.customBind(v,["hist_performance",n],a),o=new e.ClassBinding(r,"cell-status-positive",function(e){return 0<e&&1==p}),l=f.customBind(v,["hist_performance",n],o),c=new e.ClassBinding(r,"cell-status-neutral",function(e){return 0==e&&1==p}),d=f.customBind(v,["hist_performance",n],c),u=new e.ClassBinding(r,"cell-status-negative",function(e){return e<0&&1==p}),h=f.customBind(v,["hist_performance",n],u);return t.unbindingManager.registerUnbind(r,function(){s(),l(),d(),h()}),r};for(pt=0;pt<a.length;pt++)mt.appendChild(ft(a[pt]))},t.create_WIndexOverviewMini_DOM=function(n,i,r,a,s){var o=document.createElement("div");if(n.appendChild(o),o.className="cell-w-index-overview  cell-w-index-overview--mini  cell-clear",r){var l=document.createElement("div");o.appendChild(l),l.className="cell-w-index-overview--mini__name";var c=e.BindingFactory.createValueBinding(l,"innerHTML"),d=a.customBind(s,["instrument","full_name"],c);t.unbindingManager.registerUnbind(l,d)}var u=document.createElement("div");o.appendChild(u),u.className="cell-row";var h=document.createElement("div");u.appendChild(h),h.className="cell-w-index-overview--mini__pct-change  cell-text-center";var p=e.BindingFactory.createPercentBinding(h,2,"innerHTML",!1),m=a.customBind(s,"pct_change",p),g=new e.ClassBinding(h,"cell-status-positive",function(e){return 0<e}),f=a.customBind(s,"pct_change",g),v=new e.ClassBinding(h,"cell-status-neutral",function(e){return 0==e}),y=a.customBind(s,"pct_change",v),b=new e.ClassBinding(h,"cell-status-negative",function(e){return e<0}),T=a.customBind(s,"pct_change",b);t.unbindingManager.registerUnbind(h,function(){m(),f(),y(),T()});var S=document.createElement("div");o.appendChild(S),S.className="cell-row  cell-no-margin-bottom";var C=document.createElement("div");S.appendChild(C),C.className="cell  cell--w6";var I=document.createElement("div");C.appendChild(I),I.className="cell-w-index-overview--mini__abs-change";var _=e.BindingFactory.createNumberFormatValueBinding(I,"innerHTML",i,!1),M=a.customBind(s,"change",_),E=new e.ClassBinding(I,"cell-status-positive",function(e){return 0<e}),w=a.customBind(s,"pct_change",E),A=new e.ClassBinding(I,"cell-status-neutral",function(e){return 0==e}),D=a.customBind(s,"pct_change",A),O=new e.ClassBinding(I,"cell-status-negative",function(e){return e<0}),k=a.customBind(s,"pct_change",O);t.unbindingManager.registerUnbind(I,function(){M(),w(),D(),k()});var R=document.createElement("div");S.appendChild(R),R.className="cell  cell--w6";var N=document.createElement("div");R.appendChild(N),N.className="cell-w-index-overview--mini__last  cell-text-right";var L=e.BindingFactory.createNumberFormatValueBinding(N,"innerHTML",i,!1),P=a.customBind(s,"last_valid",L);t.unbindingManager.registerUnbind(N,P)},t.create_WIndexOverviewSimple_DOM=function(n,i,r,a,s,o,l,c,d,u,h){var p=document.createElement("div");n.appendChild(p),p.className="cell-w-index-overview  cell-clear";var m=document.createElement("div");p.appendChild(m),m.className="cell-w-index-overview__contentrow  cell-w-index-overview__contentrow--spaced";var g=document.createElement("table");m.appendChild(g),g.className="cell-table-basic  cell-tbl-change-labels";var f=document.createElement("tr");g.appendChild(f);var v=document.createElement("td");f.appendChild(v),v.className="cell-border-transparent";var y=document.createElement("span");v.appendChild(y),y.innerHTML=h.get("indexOverview","down"),v.appendChild(document.createTextNode(" "));var b=document.createElement("span");v.appendChild(b);var T=e.BindingFactory.createNumberFormatValueBinding(b,"innerHTML",0,!1);s.observe(T),t.unbindingManager.registerUnbind(b,function(){s.unbind(T)}),v.appendChild(document.createTextNode(" ("));var S=document.createElement("span");v.appendChild(S);var C=e.BindingFactory.createPercentBinding(S,0,"innerHTML",!1);c.observe(C,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(S,function(){c.unbind(C)}),v.appendChild(document.createTextNode(")"));var I=document.createElement("td");f.appendChild(I),I.className="cell-border-transparent";var _=document.createElement("span");I.appendChild(_),_.innerHTML=h.get("indexOverview","unchanged"),I.appendChild(document.createTextNode(" "));var M=document.createElement("span");I.appendChild(M);var E=e.BindingFactory.createNumberFormatValueBinding(M,"innerHTML",0,!1);a.observe(E),t.unbindingManager.registerUnbind(M,function(){a.unbind(E)}),I.appendChild(document.createTextNode(" ("));var w=document.createElement("span");I.appendChild(w);var A=e.BindingFactory.createPercentBinding(w,0,"innerHTML",!1);l.observe(A,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(w,function(){l.unbind(A)}),I.appendChild(document.createTextNode(")"));var D=document.createElement("td");f.appendChild(D),D.className="cell-border-transparent";var O=document.createElement("span");D.appendChild(O),O.innerHTML=h.get("indexOverview","up"),D.appendChild(document.createTextNode(" "));var k=document.createElement("span");D.appendChild(k);var R=e.BindingFactory.createNumberFormatValueBinding(k,"innerHTML",0,!1);r.observe(R),t.unbindingManager.registerUnbind(k,function(){r.unbind(R)}),D.appendChild(document.createTextNode(" ("));var N=document.createElement("span");D.appendChild(N);var L=e.BindingFactory.createPercentBinding(N,0,"innerHTML",!1);o.observe(L,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(N,function(){o.unbind(L)}),D.appendChild(document.createTextNode(")"));var P=document.createElement("table");m.appendChild(P),P.className="cell-table-basic  cell-tbl-change-bars";var F=document.createElement("tr");P.appendChild(F);var x=document.createElement("td");F.appendChild(x),x.className="cell-tbl-change-bars--td  cell-tbl-change-bars--down";var U=e.BindingFactory.createHTMLAttributeBinding(x,"style",function(e){return"width: "+e+"%"});c.observe(U),t.unbindingManager.registerUnbind(x,function(){c.unbind(U)});var B=document.createElement("td");F.appendChild(B),B.className="cell-tbl-change-bars--td  cell-tbl-change-bars--no-change";var W=e.BindingFactory.createHTMLAttributeBinding(B,"style",function(e){return"width: "+e+"%"});l.observe(W),t.unbindingManager.registerUnbind(B,function(){l.unbind(W)});var H=document.createElement("td");F.appendChild(H),H.className="cell-tbl-change-bars--td  cell-tbl-change-bars--up";var V=e.BindingFactory.createHTMLAttributeBinding(H,"style",function(e){return"width: "+e+"%"});o.observe(V),t.unbindingManager.registerUnbind(H,function(){o.unbind(V)})},t.create_WHistoricalOverview_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f){if(null!=i){var v=document.createElement("h2");n.appendChild(v),v.className="cell-h4",v.innerHTML=i}var y=document.createElement("table");n.appendChild(y),y.className="cell-table  cell-table--historical-overview";var b=document.createElement("tr");y.appendChild(b),b.className="cell-table--historical-overview__header-row";for(var T=function(n,i){b.setAttribute("role","tablist");var r=document.createElement("th");r.className="cell-w-historical-overview__period  cell-strong",InfrontUtil.addEventListener(r,"click",function(e){e.stopPropagation(),h(n)}),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(n)}),r.setAttribute("tabindex","0"),r.innerHTML=n.heading;var a=new e.ClassBinding(r,"cell-w-historical-overview__period--selected",function(e){return e==n.heading});p.observe(a,e.InitialUpdate.Synchronous),r.setAttribute("role","tab");var s=e.BindingFactory.createHTMLAttributeBinding(r,"aria-selected",function(e){return(e==n.heading).toString()});return p.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){p.unbind(a),p.unbind(s)}),r},S=0;S<r.length;S++)b.appendChild(T(r[S]));var C=document.createElement("tr");y.appendChild(C),C.className="cell-table--historical-overview__data-row";var I=function(n,i){var r=document.createElement("td");r.className="cell-w-historical-overview__value",InfrontUtil.addEventListener(r,"click",function(e){e.stopPropagation(),h(n)}),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(n)});var a=e.BindingFactory.createPercentBinding(r,2,"innerHTML",!1),s=m.customBind(g,["hist_performance",n.field],a),o=new e.ClassBinding(r,"cell-status-positive",function(e){return 0<e}),l=m.customBind(g,["hist_performance",n.field],o),c=new e.ClassBinding(r,"cell-status-negative",function(e){return e<0}),d=m.customBind(g,["hist_performance",n.field],c),u=new e.ClassBinding(r,"cell-w-historical-overview__value--selected",function(e){return e==n.heading});return p.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){s(),l(),d(),p.unbind(u)}),r};for(S=0;S<r.length;S++)C.appendChild(I(r[S]));var _=document.createElement("div");n.appendChild(_),_.className="cell-w-historical-overview";var M=document.createElement("div");_.appendChild(M),M.className="cell-w-historical-overview__labels";var E=document.createElement("div");M.appendChild(E),E.className="cell-w-historical-overview__labels--low",E.setAttribute("aria-live","polite");var w=document.createElement("span");E.appendChild(w);var A=e.BindingFactory.createValueBinding(w,"innerHTML");c.observe(A,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(w,function(){c.unbind(A)}),E.appendChild(document.createTextNode(": "));var D=document.createElement("span");E.appendChild(D);var O=e.BindingFactory.createNumberFormatValueBinding(D,"innerHTML",u,!1);o.observe(O),t.unbindingManager.registerUnbind(D,function(){o.unbind(O)});var k=document.createElement("div");M.appendChild(k),k.className="cell-w-historical-overview__labels--high",k.setAttribute("aria-live","polite");var R=document.createElement("span");k.appendChild(R);var N=e.BindingFactory.createValueBinding(R,"innerHTML");d.observe(N,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(R,function(){d.unbind(N)}),k.appendChild(document.createTextNode(": "));var L=document.createElement("span");k.appendChild(L);var P=e.BindingFactory.createNumberFormatValueBinding(L,"innerHTML",u,!1);l.observe(P),t.unbindingManager.registerUnbind(L,function(){l.unbind(P)});var F=document.createElement("div");_.appendChild(F),F.className="cell-w-historical-overview-bar";var x=document.createElement("div");F.appendChild(x),x.className="cell-w-historical-overview-bar--last";var U=e.BindingFactory.createHTMLAttributeBinding(x,"style",function(e){return"left: "+e+"%"});s.observe(U),t.unbindingManager.registerUnbind(x,function(){s.unbind(U)});var B=document.createElement("div");F.appendChild(B),B.className="cell-w-historical-overview-bar--low";var W=e.BindingFactory.createHTMLAttributeBinding(B,"style",function(e){return"width: "+e+"%"});a.observe(W),t.unbindingManager.registerUnbind(B,function(){a.unbind(W)});var H=document.createElement("div");F.appendChild(H),H.className="cell-w-historical-overview-bar--high";var V=e.BindingFactory.createHTMLAttributeBinding(H,"style",function(e){return"width: "+(100-e)+"%"});a.observe(V),t.unbindingManager.registerUnbind(H,function(){a.unbind(V)})},t.create_WNewsListFlex_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S,C,I,_,M,E,w,A,D,O,k,R){var N=document.createElement("div");n.appendChild(N),N.className="cell-w-newslist cell-clear";var L=document.createElement("div");N.appendChild(L),L.className="cell-flex-row cell-flex-collapse";var P=document.createElement("div");if(L.appendChild(P),P.className="cell-flex-column",null!=i&&P.appendChild(t.macro_MHeader(i,!1,a,s,k,R)),!0===D){var F=document.createElement("div");L.appendChild(F),F.className="cell-flex-column cell-flex-shrink";var x=document.createElement("button");F.appendChild(x),x.className="cell-heading__search-icon",x.type="button",InfrontUtil.addEventListener(x,"click",function(e){O(e)});var U=document.createElement("div");F.appendChild(U),U.className="cell-heading__search-field";var B=document.createElement("button");U.appendChild(B),B.className="cell-heading__search-close",B.type="button",InfrontUtil.addEventListener(B,"click",function(e){O(e)})}var W=document.createElement("div");N.appendChild(W),W.className="cell-form-elements";var H=document.createElement("div");if(W.appendChild(H),H.className="cell-pull-right",y){var V=document.createElement("div");W.appendChild(V),V.className="cell-pull-right";var G=document.createElement("div");V.appendChild(G),G.className="cell-noselect  cell-heading-dropdown  cell-heading-dropdown--multi-selection  cell-pull-left",InfrontUtil.addEventListener(G,"click",function(e){e.stopPropagation(),M(e)}),G.setAttribute("role","button"),InfrontUtil.addEventListener(G,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||M(e)}),G.setAttribute("tabindex","0"),G.setAttribute("aria-haspopup","true"),G.innerHTML=R.get("newsList","customFilters");var z=document.createElement("div");V.appendChild(z),z.className="cell-pos-relative";var q=document.createElement("div");z.appendChild(q),q.className="cell-custom-dropdown-selector-wrapper",q.setAttribute("tabindex","0");var Y=e.BindingFactory.createHTMLAttributeBinding(q,"style",function(e){return"display:"+(e?"block":"none")});v.observe(Y),t.unbindingManager.registerUnbind(q,function(){v.unbind(Y)});var K=document.createElement("div");q.appendChild(K),K.className="cell-custom-dropdown-selector";var X=new e.ArrayBinding(K,new e.InlineRowFactory(function(n,i){var r=document.createElement("div");if(r.className="cell-custom-dropdown-selector__item",""!=n.name){var a=document.createElement("div");r.appendChild(a),a.className="cell-custom-dropdown-selector__item__label",a.type="text",InfrontUtil.addEventListener(a,"click",function(e){e.stopPropagation(),E(n)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||E(n)}),a.innerHTML=n.name;var s=e.BindingFactory.createHTMLAttributeBinding(a,"style",function(e){return"display:block"});v.observe(s),1==n.selected&&InfrontUtil.addClassName(a,"cell-custom-dropdown-selector__item--selected"),t.unbindingManager.registerUnbind(a,function(){v.unbind(s)});var o=document.createElement("button");r.appendChild(o),o.className="cell-mininav__dd__func--delete",InfrontUtil.addEventListener(o,"click",function(e){e.stopPropagation(),w(n)})}if(""==n.name){a=document.createElement("div"),r.appendChild(a),a.className="cell-clear  cell-mininav__dd__label",a.type="text",a.innerHTML=R.get("newsList","noSavedFilters");var l=e.BindingFactory.createHTMLAttributeBinding(a,"style",function(e){return"display:block"});v.observe(l),1==n.selected&&InfrontUtil.addClassName(a,"cell-custom-dropdown-selector__item--selected"),t.unbindingManager.registerUnbind(a,function(){v.unbind(l)})}return r}),null);b.observe(X),t.unbindingManager.registerUnbind(K,function(){b.unbind(X)});var j=document.createElement("div");q.appendChild(j),j.className="cell-clear  cell-mininav__dd__label";var Z=document.createElement("input");j.appendChild(Z),Z.className="cell-input  cell-input--190px",Z.type="text",InfrontUtil.addEventListener(Z,"click",function(e){e.stopPropagation()}),InfrontUtil.addEventListener(Z,"keyup",function(e){e.which||e.keyCode}),T.bind(Z),t.unbindingManager.registerUnbind(Z,function(){return T.unbind()})}if(0<c.length){var J=document.createElement("ul");W.appendChild(J),J.className="cell-ul cell-pull-right cell-5-margin-left";for(var Q=function(n,i){var r=document.createElement("li");r.className="cell-mininav__btn",InfrontUtil.addEventListener(r,"click",function(e){u(n)}),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u(n)}),r.innerHTML=n.name;var a=new e.ClassBinding(r,"cell-mininav__btn--selected",function(e){return e==n._customId});return d.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){d.unbind(a)}),r},$=0;$<c.length;$++)J.appendChild(Q(c[$]))}if(o){var ee=document.createElement("div");W.appendChild(ee),ee.className="cell-pull-right";var te=document.createElement("input");ee.appendChild(te),te.className="cell-input  cell-input--right  cell-input--120px",te.type="text",l.bind(te),t.unbindingManager.registerUnbind(te,function(){return l.unbind()})}var ne=document.createElement("div");N.appendChild(ne),ne.className="cell-table-wrapper";var ie,re,ae=document.createElement("div");if(ne.appendChild(ae),ae.className="cell-flex-list-wrapper",A){var se=document.createElement("div");ae.appendChild(se),se.className="cell-flex-list  cell-flex-list--header";var oe=document.createElement("div");for(se.appendChild(oe),oe.className="cell-flex-list__row cell-flex-list__row--header",$=0;$<r.length;$++)oe.appendChild((ie=r[$],re=void 0,(re=document.createElement("div")).className=" cell-table__txt cell-flex-list__row__field cell-flex-list__row__field--header cell-flex-list__row__field--full-name--header cell-cursor-pointer",re.innerHTML=ie.heading,InfrontUtil.addClassName(re,ie.className),re))}var le=document.createElement("div");ae.appendChild(le),le.className="cell-flex-list  cell-flex-list--body";var ce=new e.ArrayBinding(le,new e.InlineRowFactory(function(t,n){var i=document.createElement("div");i.className="cell-flex-list__row-wrapper",i.setAttribute("role","row");var a=document.createElement("div");i.appendChild(a),a.className="cell-flex-news-list__row",InfrontUtil.addEventListener(a,"click",function(e){_(t)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var n=e.which||e.keyCode;13!==n&&32!==n||_(t)});var s=document.createElement("div");a.appendChild(s),s.className="cell-flex-news-list__first-row";for(var o=function(n,i){var r=document.createElement("div");if(1==t._isflash&&InfrontUtil.addClassName(r,"cell-table--news-list__flash-news"),"timeCell"==n.cellName){var a=document.createElement("div");r.appendChild(a),a.setAttribute("role","link"),InfrontUtil.addClassName(a,n.className),1==t._isflash&&InfrontUtil.addClassName(a,"cell-table--news-list__flash-news"),t[e.MWSConstants.type]==e.NewsType.Url&&InfrontUtil.addClassName(a,"cell-table--news-list__url-news");var s=document.createElement("div");a.appendChild(s),s.className="cell-flex-list__row__label  cell-flex-news-list__row__label--time";var o=document.createElement("span");a.appendChild(o),o.innerHTML=InfrontUtil.formatStandardTimestamp(t._timestamp)}if("shortCell"==n.cellName){var l=document.createElement("div");r.appendChild(l),l.className="cell-flex-list__row__field-wrapper  cell-flex-news-list__row__field-wrapper--short-source";var c=document.createElement("div");l.appendChild(c),c.className="cell-flex-list__row__label  cell-flex-list__row__label--short-source";var d=document.createElement("span");l.appendChild(d),d.innerHTML=t._shortSource,d.title=t._source}return r},l=0;l<r.length;l++)s.appendChild(o(r[l]));var c=document.createElement("div");a.appendChild(c),c.className="cell-flex-news-list__second-row";var d=function(n,i){var r=document.createElement("div");if(r.setAttribute("role","link"),InfrontUtil.addClassName(r,n.className),1==t._isflash&&InfrontUtil.addClassName(r,"cell-table--news-list__flash-news"),t[e.MWSConstants.type]==e.NewsType.Url&&InfrontUtil.addClassName(r,"cell-table--news-list__url-news"),"sourceCell"==n.cellName){var a=document.createElement("div");r.appendChild(a),a.className="cell-flex-list__row__field-wrapper cell-flex-news-list__row__field-wrapper--full-source";var s=document.createElement("div");a.appendChild(s),s.className="cell-flex-list__row__label cell-flex-list__row__label--full-source";var o=document.createElement("div");a.appendChild(o),o.className=" cell-table__txt cell-flex-list__row__field cell-flex-list__row__field--full-source",o.innerHTML=t._source}if("headingCell"==n.cellName){var l=document.createElement("div");r.appendChild(l),l.className="cell-flex-news-list__row__field-wrapper  cell-flex-news-list__row__field-wrapper--heading";var c=document.createElement("div");l.appendChild(c),c.className="cell-flex-list__row__label cell-flex-list__row__label--heading";var d=document.createElement("span");l.appendChild(d),d.innerHTML=t.headline}if("categoryCell"==n.cellName&&t.hasOwnProperty("category")){var u=document.createElement("span");r.appendChild(u),u.innerHTML=t.category}if("productCodeCell"==n.cellName&&t.hasOwnProperty("product_code")){var h=document.createElement("span");r.appendChild(h),h.innerHTML=t.product_code}return r};for(l=0;l<r.length;l++)c.appendChild(d(r[l]));return i}),null);if(h.observe(ce),t.unbindingManager.registerUnbind(le,function(){h.unbind(ce)}),p){var de=document.createElement("div");N.appendChild(de),de.className="cell-widget-footer cell-news-pager-control cell-clear";var ue=document.createElement("div");de.appendChild(ue),ue.className="cell-flex-row cell-flex-align-center";var he=document.createElement("div");ue.appendChild(he),he.className="cell-flex-column cell-flex-shrink";var pe=document.createElement("ul");he.appendChild(pe),pe.className="cell-list-inline";var me=document.createElement("li");pe.appendChild(me);var ge=document.createElement("button");me.appendChild(ge),ge.className="cell-button cell-button--first",ge.type="button",InfrontUtil.addEventListener(ge,"click",function(e){S(e)}),ge.innerHTML=R.get("newsList","first");var fe=new e.ClassBinding(ge,"cell-button--disabled",function(e){return 0==e});f.observe(fe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ge,function(){f.unbind(fe)});var ve=document.createElement("li");pe.appendChild(ve);var ye=document.createElement("button");ve.appendChild(ye),ye.className="cell-button cell-button--prev",ye.type="button",InfrontUtil.addEventListener(ye,"click",function(e){C(e)}),ye.innerHTML=R.get("newsList","prev");var be=new e.ClassBinding(ye,"cell-button--disabled",function(e){return 0==e});f.observe(be,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ye,function(){f.unbind(be)});var Te=document.createElement("li");pe.appendChild(Te);var Se=document.createElement("button");Te.appendChild(Se),Se.className="cell-button cell-button--next",Se.type="button",InfrontUtil.addEventListener(Se,"click",function(e){I(e)}),Se.innerHTML=R.get("newsList","next");var Ce=new e.ClassBinding(Se,"cell-button--disabled",function(e){return 0==e});g.observe(Ce,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Se,function(){g.unbind(Ce)})}return{root:N,dropDownElement:W,sourcesDropDownElement:H,searchContainer:U}},t.create_WNewsList_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S,C,I,_,M,E,w,A,D,O,k){var R=document.createElement("div");n.appendChild(R),R.className="cell-w-newslist cell-clear";var N=document.createElement("div");R.appendChild(N),N.className="cell-flex-row cell-flex-collapse";var L=document.createElement("div");if(N.appendChild(L),L.className="cell-flex-column",L.appendChild(t.macro_MHeader(i,!1,a,s,O,k)),o){var P=document.createElement("div");N.appendChild(P),P.className="cell-flex-column cell-flex-shrink";var F=document.createElement("input");P.appendChild(F),F.className="cell-input  cell-input--right  cell-input--120px",F.type="text",l.bind(F),F.setAttribute("aria-label",""+k.get("accessibility","searchFilter")),t.unbindingManager.registerUnbind(F,function(){return l.unbind()})}var x=document.createElement("div");if(N.appendChild(x),x.className="cell-flex-column cell-flex-shrink",y){var U=document.createElement("div");x.appendChild(U);var B=document.createElement("div");U.appendChild(B),B.className="cell-mininav__btn",B.type="button",InfrontUtil.addEventListener(B,"click",function(e){e.stopPropagation(),M(e)}),B.setAttribute("role","button"),InfrontUtil.addEventListener(B,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||M(e)}),B.setAttribute("tabindex","0"),B.setAttribute("aria-haspopup","true"),B.innerHTML=k.get("newsList","customFilters");var W=document.createElement("div");U.appendChild(W),W.className="cell-pos-relative";var H=document.createElement("div");W.appendChild(H),H.className="cell-custom-dropdown-selector-wrapper";var V=e.BindingFactory.createHTMLAttributeBinding(H,"style",function(e){return"display:"+(e?"block":"none")});v.observe(V),t.unbindingManager.registerUnbind(H,function(){v.unbind(V)});var G=document.createElement("div");H.appendChild(G),G.className="cell-custom-dropdown-selector";var z=new e.ArrayBinding(G,new e.InlineRowFactory(function(n,i){var r=document.createElement("div");if(r.className="cell-custom-dropdown-selector__item",""!=n.name){var a=document.createElement("div");r.appendChild(a),a.className="cell-custom-dropdown-selector__item__label-no-radio",a.type="text",InfrontUtil.addEventListener(a,"click",function(e){e.stopPropagation(),E(n)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||E(n)}),a.innerHTML=n.name;var s=e.BindingFactory.createHTMLAttributeBinding(a,"style",function(e){return"display:block"});v.observe(s),1==n.selected&&InfrontUtil.addClassName(a,"cell-custom-dropdown-selector__item--selected"),t.unbindingManager.registerUnbind(a,function(){v.unbind(s)});var o=document.createElement("div");r.appendChild(o),o.className="cell-mininav__dd__func--delete",InfrontUtil.addEventListener(o,"click",function(e){e.stopPropagation(),w(n)}),o.setAttribute("role","button"),InfrontUtil.addEventListener(o,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||w(n)}),o.setAttribute("tabindex","0"),o.setAttribute("aria-label",""+k.get("accessibility","delete"))}if(""==n.name){a=document.createElement("div"),r.appendChild(a),a.className="cell-clear  cell-mininav__dd__label",a.type="text",a.innerHTML=k.get("newsList","noSavedFilters");var l=e.BindingFactory.createHTMLAttributeBinding(a,"style",function(e){return"display:block"});v.observe(l),1==n.selected&&InfrontUtil.addClassName(a,"cell-custom-dropdown-selector__item--selected"),t.unbindingManager.registerUnbind(a,function(){v.unbind(l)})}return r}),null);b.observe(z),t.unbindingManager.registerUnbind(G,function(){b.unbind(z)});var q=document.createElement("div");H.appendChild(q),q.className="cell-clear  cell-mininav__dd__label";var Y=document.createElement("input");q.appendChild(Y),Y.className="cell-input  cell-input--190px",Y.type="text",InfrontUtil.addEventListener(Y,"click",function(e){e.stopPropagation()}),InfrontUtil.addEventListener(Y,"keyup",function(e){e.which||e.keyCode}),T.bind(Y),t.unbindingManager.registerUnbind(Y,function(){return T.unbind()})}if(0<c.length){var K=document.createElement("div");N.appendChild(K),K.className="cell-flex-column cell-flex-shrink";var X=document.createElement("ul");K.appendChild(X),X.className="cell-list-inline cell-list--collapse";for(var j=function(n,i){var r=document.createElement("li"),a=document.createElement("div");r.appendChild(a),a.className="cell-mininav__btn",a.type="button",InfrontUtil.addEventListener(a,"click",function(e){u(n)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u(n)}),a.innerHTML=n.name;var s=new e.ClassBinding(a,"cell-mininav__btn--selected",function(e){return e==n._customId});return d.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(a,function(){d.unbind(s)}),r},Z=0;Z<c.length;Z++)X.appendChild(j(c[Z]))}var J=document.createElement("div");if(N.appendChild(J),J.className="cell-flex-column cell-flex-shrink",!0===A){var Q=document.createElement("div");N.appendChild(Q),Q.className="cell-flex-column cell-flex-shrink";var $=document.createElement("button");Q.appendChild($),$.className="cell-heading__search-icon",$.type="button",InfrontUtil.addEventListener($,"click",function(e){D(e)});var ee=document.createElement("div");Q.appendChild(ee),ee.className="cell-heading__search-field";var te=document.createElement("button");ee.appendChild(te),te.className="cell-heading__search-close",te.type="button",InfrontUtil.addEventListener(te,"click",function(e){D(e)})}var ne=document.createElement("table");R.appendChild(ne),ne.className="cell-table  cell-table--news-list";var ie=document.createElement("thead");ne.appendChild(ie);var re,ae,se=document.createElement("tr");for(ie.appendChild(se),Z=0;Z<r.length;Z++)se.appendChild((re=r[Z],ae=void 0,(ae=document.createElement("th")).className="cell-table__txt cell-table__txt--news-heading__default-pointer",ae.innerHTML=re.heading,InfrontUtil.addClassName(ae,re.className),ae));var oe=document.createElement("tbody");ne.appendChild(oe);var le=new e.ArrayBinding(oe,new e.InlineRowFactory(function(t,n){for(var i=document.createElement("tr"),a=function(n,i){var r=document.createElement("td");if(r.setAttribute("role","link"),InfrontUtil.addClassName(r,n.className),1==t._isflash&&InfrontUtil.addClassName(r,"cell-table--news-list__flash-news"),t[e.MWSConstants.type]==e.NewsType.Url&&InfrontUtil.addClassName(r,"cell-table--news-list__url-news"),"sourceCell"==n.cellName){var a=document.createElement("span");r.appendChild(a),a.innerHTML=t._source}if("shortCell"==n.cellName){var s=document.createElement("span");r.appendChild(s),s.innerHTML=t._shortSource,s.title=t._source}if("timeCell"==n.cellName){var o=document.createElement("span");r.appendChild(o),o.innerHTML=InfrontUtil.formatStandardTimestamp(t._timestamp)}if("headingCell"==n.cellName){var l=document.createElement("span");r.appendChild(l),l.className="cell-name",InfrontUtil.addEventListener(l,"click",function(e){_(t)}),InfrontUtil.addEventListener(l,"keyup",function(e){var n=e.which||e.keyCode;13!==n&&32!==n||_(t)}),l.setAttribute("tabindex","0"),l.innerHTML=t.headline}if("categoryCell"==n.cellName&&t.hasOwnProperty("category")){var c=document.createElement("span");r.appendChild(c),c.innerHTML=t.category}if("productCodeCell"==n.cellName&&t.hasOwnProperty("product_code")){var d=document.createElement("span");r.appendChild(d),d.innerHTML=t.product_code}if("customCell"==n.cellName){var u=document.createElement("span");r.appendChild(u),u.innerHTML=t[n.customfieldId]}return r},s=0;s<r.length;s++)i.appendChild(a(r[s]));return i}),null);if(h.observe(le),t.unbindingManager.registerUnbind(oe,function(){h.unbind(le)}),p){var ce=document.createElement("div");R.appendChild(ce),ce.className="cell-widget-footer cell-news-pager-control";var de=document.createElement("div");ce.appendChild(de),de.className="cell-flex-row cell-flex-align-center";var ue=document.createElement("div");de.appendChild(ue),ue.className="cell-flex-column cell-flex-shrink";var he=document.createElement("ul");ue.appendChild(he),he.className="cell-list-inline";var pe=document.createElement("li");he.appendChild(pe);var me=document.createElement("button");pe.appendChild(me),me.className="cell-button cell-button--first",me.type="button",InfrontUtil.addEventListener(me,"click",function(e){S(e)}),me.innerHTML=k.get("newsList","first");var ge=new e.ClassBinding(me,"cell-button--disabled",function(e){return 0==e});f.observe(ge,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(me,function(){f.unbind(ge)});var fe=document.createElement("li");he.appendChild(fe);var ve=document.createElement("button");fe.appendChild(ve),ve.className="cell-button cell-button--prev",ve.type="button",InfrontUtil.addEventListener(ve,"click",function(e){C(e)}),ve.innerHTML=k.get("newsList","prev");var ye=new e.ClassBinding(ve,"cell-button--disabled",function(e){return 0==e});f.observe(ye,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ve,function(){f.unbind(ye)});var be=document.createElement("li");he.appendChild(be);var Te=document.createElement("button");be.appendChild(Te),Te.className="cell-button cell-button--next",Te.type="button",InfrontUtil.addEventListener(Te,"click",function(e){I(e)}),Te.innerHTML=k.get("newsList","next");var Se=new e.ClassBinding(Te,"cell-button--disabled",function(e){return 0==e});g.observe(Se,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Te,function(){g.unbind(Se)})}return{root:R,dropDownElement:x,sourcesDropDownElement:J,searchContainer:ee}},t.create_WNewsShowFlashOnly_DOM=function(n,i,r){var a=document.createElement("div");a.className="cell-custom-dropdown-selector__item",a.setAttribute("aria-haspopup","false");var s=document.createElement("div");a.appendChild(s),s.className="cell-custom-dropdown-selector__item__label  cell-custom-dropdown-selector__item__label--multiselect  cell-flash-news-only",InfrontUtil.addEventListener(s,"click",function(e){e.stopPropagation(),i()}),s.setAttribute("role","button"),InfrontUtil.addEventListener(s,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||i()}),s.setAttribute("role","checkbox"),s.innerHTML=r.get("newsList","showFlashNewsOnly");var o=new e.ClassBinding(s,"cell-custom-dropdown-selector__item__label--multiselect--selected",function(e){return 1==e});n.observe(o,e.InitialUpdate.Synchronous);var l=e.BindingFactory.createHTMLAttributeBinding(s,"aria-checked",function(e){return e});return n.observe(l,e.InitialUpdate.Synchronous),s.setAttribute("tabindex","0"),t.unbindingManager.registerUnbind(s,function(){n.unbind(o),n.unbind(l)}),a},t.create_WNewsReader_DOM=function(n,i,r,a){var s=document.createElement("div");n.appendChild(s),s.className="cell-news-lightbox";var o=document.createElement("div");s.appendChild(o),o.className="cell-news-reader_toprow";var l=document.createElement("span");o.appendChild(l),l.className="cell-news-reader_toprow__source cell-5-margin-right";var c=e.BindingFactory.createValueBinding(l,"innerHTML");r.observe(c,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(l,function(){r.unbind(c)});var d=document.createElement("span");o.appendChild(d),d.className="cell-news-reader_toprow__date";var u=e.BindingFactory.createTimestampBinding(d);a.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){a.unbind(u)});var h=document.createElement("div");s.appendChild(h),h.className="cell-news-reader_header";var p=e.BindingFactory.createValueBinding(h,"innerHTML");i.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(h,function(){i.unbind(p)});var m=document.createElement("div");s.appendChild(m),m.className="news-reader-iframer";var g=document.createElement("iframe");return m.appendChild(g),g.className="cell-overlay-newsreader  cell-maxed",g.title="Newsreader",g},t.create_WAlert_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v){var y=document.createElement("article");n.appendChild(y);var b=document.createElement("div");y.appendChild(b),b.className="cell-w-alert  cell-clear";var T=document.createElement("div");b.appendChild(T),T.className="cell-row";var S=document.createElement("div");if(T.appendChild(S),!i){var C=document.createElement("div");S.appendChild(C),C.className="cell-alert-searchbox  cell-width--190px",C.setAttribute("role","search"),C.setAttribute("aria-label",""+v.get("accessibility","searchAndAdd"));var I=document.createElement("div");S.appendChild(I),I.className="cell-alert-focusMini  cell-width--190px"}var _=document.createElement("div");b.appendChild(_),_.className="cell-row";var M=document.createElement("label");_.appendChild(M),M.className="cell-alert-row-label",M.setAttribute("style","display:block;"),M.setAttribute("id","alertMeIfLabel"),M.innerHTML=v.get("alert","alertMe");var E=document.createElement("select");_.appendChild(E),E.className="cell-input  cell-input--145px  cell-input--dropdown",E.setAttribute("style","clear:left"),E.setAttribute("aria-labelledby","alertMeIfLabel"),o.bind(E);for(var w,A,D=0;D<l.length;D++)E.appendChild((w=l[D],A=void 0,(A=document.createElement("option")).innerHTML=w,A));t.unbindingManager.registerUnbind(E,function(){return o.unbind()});var O=document.createElement("label");_.appendChild(O);var k=document.createElement("input");_.appendChild(k),k.className="cell-input  cell-input--40px",k.type="text",k.setAttribute("autocomplete","off"),d.bind(k),t.unbindingManager.registerUnbind(k,function(){return d.unbind()});var R=document.createElement("div");b.appendChild(R),R.className="cell-row";var N=document.createElement("label");R.appendChild(N),N.className="cell-alert-row-label",N.setAttribute("style","display:block;"),N.setAttribute("id","recurrenceLabel"),N.innerHTML=v.get("alert","recurrence");var L,P,F=document.createElement("select");for(R.appendChild(F),F.className="cell-input  cell-input--190px  cell-input--dropdown",F.setAttribute("aria-labelledby","recurrenceLabel"),a.bind(F),D=0;D<s.length;D++)F.appendChild((L=s[D],P=void 0,(P=document.createElement("option")).innerHTML=L,P));t.unbindingManager.registerUnbind(F,function(){return a.unbind()});var x=document.createElement("div");b.appendChild(x),x.className="cell-row";var U=document.createElement("label");x.appendChild(U),U.className="cell-alert-row-label",U.setAttribute("style","display:block;"),U.setAttribute("id","commentLabel"),U.innerHTML=v.get("alert","comment");var B=document.createElement("input");x.appendChild(B),B.className="cell-input  cell-input--190px",B.type="text",B.setAttribute("aria-labelledby","commentLabel"),B.setAttribute("autocomplete","off"),c.bind(B),t.unbindingManager.registerUnbind(B,function(){return c.unbind()});var W=document.createElement("div");b.appendChild(W),W.className="cell-row",W.setAttribute("style","display:none");var H=e.BindingFactory.createHTMLAttributeBinding(W,"style",function(e){return"display:"+(e?"block":"none")});p.observe(H),t.unbindingManager.registerUnbind(W,function(){p.unbind(H)});var V=document.createElement("div");W.appendChild(V),V.className="cell-alert-row-label  cell-alert-row-label--horizontal",V.innerHTML=v.get("alert","enable");var G=document.createElement("div");W.appendChild(G),G.className="cell-alert-row-switch";var z=document.createElement("div");b.appendChild(z),z.className="cell-row";var q=function(e){return!(""!=e)};q(h.get())&&InfrontUtil.addClassName(z,"cell-display-none");var Y=new e.ClassBinding(z,"cell-display-none",q);h.observe(Y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(z,function(){h.unbind(Y)});var K=document.createElement("div");z.appendChild(K);var X=e.BindingFactory.createValueBinding(K,"innerHTML");h.observe(X,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(K,function(){h.unbind(X)});var j=document.createElement("div");b.appendChild(j),j.className="cell-row  cell-no-margin-bottom",j.setAttribute("style","display:block");var Z=e.BindingFactory.createHTMLAttributeBinding(j,"style",function(e){return"display:"+(e?"none":"block")});p.observe(Z),t.unbindingManager.registerUnbind(j,function(){p.unbind(Z)});var J=document.createElement("button");j.appendChild(J),J.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(J,"click",function(e){m(e)}),J.innerHTML=v.get("alert","addAlert");var Q=document.createElement("div");b.appendChild(Q),Q.className="cell-row  cell-no-margin-bottom",Q.setAttribute("style","display:none");var $=e.BindingFactory.createHTMLAttributeBinding(Q,"style",function(e){return"display:"+(e?"block":"none")});p.observe($),t.unbindingManager.registerUnbind(Q,function(){p.unbind($)});var ee=document.createElement("button");return Q.appendChild(ee),ee.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(ee,"click",function(e){g(e)}),ee.innerHTML=v.get("alert","modifyAlert"),{searchContainer:C,focusContainer:I,switchContainer:G,selectedAlertLabel:O,selectedAlert:k}},t.create_WAlertList_DOM=function(n,i,r,a,s,o,l,c){var d=document.createElement("article");n.appendChild(d),d.className="cell-w-alert-list  cell-clear";var u=document.createElement("table");d.appendChild(u),u.className="cell-table  cell-table--alert-list",u.setAttribute("aria-label",""+c.get("accessibility","closeMenu"));var h=document.createElement("thead");u.appendChild(h);var p=document.createElement("tr");h.appendChild(p);for(var m,g,f=0;f<r.length;f++)p.appendChild((m=r[f],g=void 0,(g=document.createElement("th")).className="cell-table__txt",g.innerHTML=m.heading,InfrontUtil.addClassName(g,m.className),g));var v=document.createElement("th");p.appendChild(v),v.className="cell-table__txt",v.innerHTML=s.heading,InfrontUtil.addClassName(v,s.className);var y=document.createElement("tbody");u.appendChild(y);var b=new e.ArrayBinding(y,new e.InlineRowFactory(function(e,t){var n=document.createElement("tr");1!=e.enabled&&InfrontUtil.addClassName(n,"cell-w-alert-list__disabledrow");for(var i=function(t,n){var i=document.createElement("td");if(InfrontUtil.addClassName(i,t.className),"TYPE"==t.name){if("INSTRUMENT_ALERT"==e.type){var r=document.createElement("span");i.appendChild(r),r.innerHTML=c.get("alert","typeInstrument")}if("NEWS_ALERT"==e.type){var a=document.createElement("span");i.appendChild(a),a.innerHTML=c.get("alert","typeNews")}}if("SOURCE"==t.name){var s=document.createElement("span");i.appendChild(s),s.innerHTML=e.rule.left.md_value.instrument.ticker}if("CONDITION"==t.name){var o=document.createElement("span");i.appendChild(o),o.innerHTML=e.description}if("RECURRENCE"==t.name){if("DISABLE"==e.trigger_type){var l=document.createElement("span");i.appendChild(l),l.innerHTML=c.get("alert","once")}if("RENEW_DAILY"==e.trigger_type){var d=document.createElement("span");i.appendChild(d),d.innerHTML=c.get("alert","renewDaily")}}if("COMMENT"==t.name){var u=document.createElement("span");i.appendChild(u),u.innerHTML=e.comment}return i},a=0;a<r.length;a++)n.appendChild(i(r[a]));if(1==e.enabled){var s=document.createElement("td");n.appendChild(s),s.className="cell-table__txt",s.innerHTML=c.get("alert","yes")}if(0==e.enabled){var d=document.createElement("td");n.appendChild(d),d.className="cell-table__txt",d.innerHTML=c.get("alert","no")}var u=document.createElement("td");n.appendChild(u),u.className="cell-tablecell--interaction--full-button cell-table__txt cell-tablecell--interaction",InfrontUtil.addEventListener(u,"click",function(t){l(e)}),InfrontUtil.addEventListener(u,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||l(e)}),u.setAttribute("tabindex","0");var h=document.createElement("span");u.appendChild(h),h.className="cell-table__editbutton",h.setAttribute("title",""+c.get("accessibility","editRow"));var p=document.createElement("td");n.appendChild(p),p.className="cell-tablecell--interaction--full-button cell-table__txt cell-tablecell--interaction",InfrontUtil.addEventListener(p,"click",function(t){o(e)}),InfrontUtil.addEventListener(p,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e)}),p.setAttribute("tabindex","0");var m=document.createElement("span");return p.appendChild(m),m.className="cell-table__deletebutton",m.setAttribute("title",""+c.get("accessibility","deleteRow")),n}),null);return a.observe(b),t.unbindingManager.registerUnbind(y,function(){a.unbind(b)}),{root:d,tableContents:y,tableHeadings:h,tableParent:u}},t.create_WAlertListMini_DOM=function(n,i,r,a){var s=document.createElement("article");n.appendChild(s),s.className="cell-alert-list-mini";var o=new e.ClassBinding(s,"cell-alert-list-mini--hidden",function(e){return 0==e});r.observe(o,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){r.unbind(o)});var l=document.createElement("article");n.appendChild(l),l.className="cell-alert-list-mini-row--no-alerts";var c=new e.ClassBinding(l,"cell-alert-list-mini-row--no-alerts--active",function(e){return 0==e});return r.observe(c,e.InitialUpdate.Synchronous),l.innerHTML=a.get("alert","noAlertsSet"),t.unbindingManager.registerUnbind(l,function(){r.unbind(c)}),s},t.create_WAlertListMiniRow_DOM=function(n,i,r,a,s,o,l,c){var d=document.createElement("article");d.className="cell-alert-list-mini__alert-container";var u=new e.ClassBinding(d,"cell-alert-list-mini__alert-container--expanded",function(e){return e==n});r.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){r.unbind(u)});var h=document.createElement("div");d.appendChild(h),h.className="cell-alert-list-mini-row  cell-clear";var p=document.createElement("div");h.appendChild(p),p.className="cell-alert-list-mini-row__item--flag cell-pull-left";var m=document.createElement("div");h.appendChild(m),m.innerHTML=n.rule.left.md_value.instrument.ticker,InfrontUtil.addClassName(m,i[0].className);var g=document.createElement("div");h.appendChild(g),g.className="cell-pull-right",InfrontUtil.addEventListener(g,"click",function(e){e.stopPropagation()}),g.setAttribute("role","button"),InfrontUtil.addEventListener(g,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||e.stopPropagation()});var f=document.createElement("div");if(g.appendChild(f),f.className="cell-alert-row-switch","DISABLE"==n.trigger_type){var v=document.createElement("div");g.appendChild(v),v.innerHTML=c.get("alert","once"),InfrontUtil.addClassName(v,i[2].className),v.setAttribute("id","renewOnce")}if("RENEW_DAILY"==n.trigger_type){var y=document.createElement("div");g.appendChild(y),y.innerHTML=c.get("alert","renewDaily"),InfrontUtil.addClassName(y,i[2].className),y.setAttribute("id","renewDaily")}var b=document.createElement("div");d.appendChild(b),b.className="cell-alert-list-mini-row  cell-clear";var T=document.createElement("div");b.appendChild(T),T.innerHTML=n.description,InfrontUtil.addClassName(T,i[1].className);var S=document.createElement("div");d.appendChild(S),S.className="cell-alert-list-mini__options-container",S.setAttribute("tabindex","-1");var C=e.BindingFactory.createHTMLAttributeBinding(S,"aria-hidden",function(e){return(e==n).toString()});r.observe(C,e.InitialUpdate.Synchronous);var I=new e.ClassBinding(S,"alert-mini-dropdown--expanded",function(e){return e==n});r.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(S,function(){r.unbind(C),r.unbind(I)});var _=document.createElement("div");S.appendChild(_),_.className="cell-alert-list-mini-row  cell-alert-list-mini-row--options-top  cell-clear";var M=document.createElement("div");_.appendChild(M),M.innerHTML=n.comment,InfrontUtil.addClassName(M,i[3].className);var E=document.createElement("div");S.appendChild(E),E.className="cell-alert-list-mini-row  cell-clear";var w=document.createElement("div");E.appendChild(w),w.className="cell-alert-list-mini--func invisible",InfrontUtil.addEventListener(w,"click",function(e){s(n)}),w.setAttribute("role","button"),InfrontUtil.addEventListener(w,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s(n)}),w.setAttribute("role","button"),w.innerHTML=c.get("alert","modifyAlert");var A=e.BindingFactory.createHTMLAttributeBinding(w,"style",function(e){return"display:"+(null==e?"none":"block")});r.observe(A),t.unbindingManager.registerUnbind(w,function(){r.unbind(A)});var D=document.createElement("div");E.appendChild(D),D.className="cell-alert-list-mini--func invisible",InfrontUtil.addEventListener(D,"click",function(e){a(n)}),D.setAttribute("role","button"),InfrontUtil.addEventListener(D,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a(n)}),D.setAttribute("role","button"),D.innerHTML=c.get("alert","delete");var O=e.BindingFactory.createHTMLAttributeBinding(D,"style",function(e){return"display:"+(null==e?"none":"block")});r.observe(O),t.unbindingManager.registerUnbind(D,function(){r.unbind(O)});var k=document.createElement("div");d.appendChild(k),k.className="cell-alert-list-mini-togglebutton",InfrontUtil.addEventListener(k,"click",function(e){o(n)}),k.setAttribute("role","button"),InfrontUtil.addEventListener(k,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(n)}),k.setAttribute("title",""+c.get("accessibility","expandOptions"));var R=e.BindingFactory.createHTMLAttributeBinding(k,"aria-expanded",function(e){return(e==n).toString()});r.observe(R,e.InitialUpdate.Synchronous),k.setAttribute("role","button"),k.setAttribute("tabindex","0");var N=new e.ClassBinding(k,"cell-alert-list-mini-togglebutton--active",function(e){return e==n});return r.observe(N,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(k,function(){r.unbind(R),r.unbind(N)}),{row:d,switchContainer:f,flagContainer:p,editButton:w,deleteButton:D,toggleButton:k}},t.create_WMyLists_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S,C,I){if(c){var _=document.createElement("div");n.appendChild(_);var M=document.createElement("div");_.appendChild(M),M.className="cell-noselect  cell-heading-dropdown cell-h4 cell-pull-left",InfrontUtil.addEventListener(M,"click",function(e){e.stopPropagation(),p(e)}),M.setAttribute("role","button"),InfrontUtil.addEventListener(M,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||p(e)}),M.setAttribute("tabindex","0"),M.setAttribute("role","list");var E=document.createElement("div");M.appendChild(E),E.className="cell-noselect  cell-pull-left  cell-heading-dropdown__label";var w=e.BindingFactory.createValueBinding(E,"innerHTML");a.observe(w,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(E,function(){a.unbind(w)});var A=document.createElement("div");M.appendChild(A),A.className="cell-noselect  cell-heading-dropdown__arrow  cell-arrow  cell-arrow--down  cell-pull-right  cell-flex-item";var D=document.createElement("span");M.appendChild(D),D.className="cell-noselect  cell-heading-dropdown__label  cell-w-watchlist__read-only-label",D.innerHTML=I.get("myList","isReadOnly");var O=new e.ClassBinding(D,"cell-display-none",function(e){return 0==e});C.observe(O,e.InitialUpdate.Synchronous);var k=new e.ClassBinding(D,"cell-w-watchlist__read-only-label--fade-in",function(e){return 1==e});C.observe(k,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(D,function(){C.unbind(O),C.unbind(k)});var R=document.createElement("div");_.appendChild(R),R.className="cell-pos-relative";var N=document.createElement("div");R.appendChild(N),N.className="cell-pull-left cell-custom-dropdown-selector-wrapper cell-pos-relative";var L=function(e){return!(1==e)};L(s.get())&&InfrontUtil.addClassName(N,"cell-display-none");var P=new e.ClassBinding(N,"cell-display-none",L);s.observe(P,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(N,function(){s.unbind(P)});var F=document.createElement("div");N.appendChild(F),F.className="cell-custom-dropdown-selector";var x=document.createElement("div");F.appendChild(x),x.className="cell-custom-dropdown-selector__item";var U=document.createElement("div");x.appendChild(U),U.className="cell-custom-dropdown-selector__item__header",U.innerHTML=I.get("myList","selectorTitle");var B=document.createElement("div");x.appendChild(B),B.className="cell-custom-dropdown-selector__item__header  cell-flex-justify--flex-end",InfrontUtil.addEventListener(B,"click",function(e){e.stopPropagation(),g()}),B.setAttribute("role","button"),InfrontUtil.addEventListener(B,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||g()}),B.setAttribute("tabindex","0");var W=document.createElement("div");B.appendChild(W),W.className="cell-custom-dropdown-selector__item__header__icon  cell-custom-dropdown-selector__item__header__icon--add-button";var H=document.createElement("span");B.appendChild(H),H.className="cell-custom-dropdown-selector__item__header__text",H.innerHTML=I.get("myList","addListPlaceholder");var V=document.createElement("div");F.appendChild(V),V.className="cell-custom-dropdown-selector-scroller";var G=new e.ArrayBinding(V,new e.InlineRowFactory(function(e,t){var n=document.createElement("div");n.className="cell-custom-dropdown-selector__item",InfrontUtil.addEventListener(n,"click",function(t){t.stopPropagation(),m(e)}),n.setAttribute("role","button"),InfrontUtil.addEventListener(n,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||m(e)});var i=document.createElement("div");n.appendChild(i),i.className="cell-mininav__dd__label",InfrontUtil.addEventListener(i,"click",function(t){t.stopPropagation(),m(e)}),i.setAttribute("role","button"),InfrontUtil.addEventListener(i,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||m(e)}),i.setAttribute("tabindex","0"),i.innerHTML=e;var r=document.createElement("div");n.appendChild(r),r.className="cell-mininav__dd__func--edit",InfrontUtil.addEventListener(r,"click",function(t){t.stopPropagation(),f(e)}),r.setAttribute("role","button"),InfrontUtil.addEventListener(r,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||f(e)}),r.setAttribute("tabindex","0");var a=document.createElement("div");return n.appendChild(a),a.className="cell-mininav__dd__func--delete",InfrontUtil.addEventListener(a,"click",function(t){t.stopPropagation(),v(e)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||v(e)}),a.setAttribute("tabindex","0"),n}),null);i.observe(G),t.unbindingManager.registerUnbind(V,function(){i.unbind(G)})}var z=document.createElement("div");n.appendChild(z),z.className="cell-pull-right";var q=new e.ClassBinding(z,"cell-display-none",function(e){return 1==e});C.observe(q,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(z,function(){C.unbind(q)});var Y=document.createElement("div");n.appendChild(Y),Y.className="cell-super-absolute",Y.setAttribute("style","position:fixed");var K=document.createElement("div");Y.appendChild(K),K.className="cell-custom-dropdown-selector-wrapper cell-custom-popup cell-pos-relative cell-modal";var X=new e.ClassBinding(K,"cell-display-none",function(e){return 0==e});l.observe(X,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(K,function(){l.unbind(X)});var j=document.createElement("div");K.appendChild(j),j.className="cell-modal__payload";var Z=document.createElement("div");j.appendChild(Z),Z.className="cell-h4",Z.innerHTML=I.get("myList","isReadOnly"),1!=C&&InfrontUtil.addClassName(Z,"cell-display-none");var J=document.createElement("div");j.appendChild(J),J.className="cell-h4",J.innerHTML=I.get("myList","addListPlaceholder");var Q=function(e){return!(0==e)};Q(h.get())&&InfrontUtil.addClassName(J,"cell-display-none");var $=new e.ClassBinding(J,"cell-display-none",Q);h.observe($,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(J,function(){h.unbind($)});var ee=document.createElement("div");j.appendChild(ee),ee.className="cell-h4",ee.innerHTML=I.get("myList","editList");var te=function(e){return!(1==e)};te(h.get())&&InfrontUtil.addClassName(ee,"cell-display-none");var ne=new e.ClassBinding(ee,"cell-display-none",te);h.observe(ne,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ee,function(){h.unbind(ne)});var ie=document.createElement("input");j.appendChild(ie),ie.className="cell-input  cell-input--190px",ie.type="text",InfrontUtil.addEventListener(ie,"click",function(e){e.stopPropagation()}),InfrontUtil.addEventListener(ie,"keyup",function(e){e.which||e.keyCode}),S.bind(ie),t.unbindingManager.registerUnbind(ie,function(){return S.unbind()});var re=document.createElement("div");j.appendChild(re),re.className="cell-width--190px cell-10-margin-top  cell-flex  cell-flex--center-align  cell-flex-justify--space-evenly  cell-pull-right";var ae=document.createElement("a");re.appendChild(ae),ae.className="cell-flex-item  cell-text-uppercase  cell-text-center",ae.setAttribute("tabindex","0"),ae.innerHTML=I.get("global","cancel");var se=document.createElement("button");re.appendChild(se),se.className="cell-button  cell-button--positive",InfrontUtil.addEventListener(se,"click",function(e){T(1)}),se.innerHTML=I.get("orderEntry","confirm");var oe=e.BindingFactory.createValueBinding(se,"disabled");u.observe(oe);var le=new e.ClassBinding(se,"cell-button--disabled",function(e){return 1==e});u.observe(le,e.InitialUpdate.Synchronous);var ce=function(e){return!(1==e)};ce(h.get())&&InfrontUtil.addClassName(se,"cell-display-none");var de=new e.ClassBinding(se,"cell-display-none",ce);h.observe(de,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(se,function(){u.unbind(oe),u.unbind(le),h.unbind(de)});var ue=document.createElement("button");re.appendChild(ue),ue.className="cell-button  cell-button--positive",InfrontUtil.addEventListener(ue,"click",function(e){T(0)}),ue.innerHTML=I.get("global","ok");var he=e.BindingFactory.createValueBinding(ue,"disabled");u.observe(he);var pe=new e.ClassBinding(ue,"cell-button--disabled",function(e){return 1==e});u.observe(pe,e.InitialUpdate.Synchronous);var me=function(e){return!(0==e)};me(h.get())&&InfrontUtil.addClassName(ue,"cell-display-none");var ge=new e.ClassBinding(ue,"cell-display-none",me);h.observe(ge,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ue,function(){u.unbind(he),u.unbind(pe),h.unbind(ge)});var fe=document.createElement("div");Y.appendChild(fe),fe.className="cell-custom-dropdown-selector-wrapper cell-custom-popup cell-pos-relative cell-modal";var ve=new e.ClassBinding(fe,"cell-display-none",function(e){return 0==e});o.observe(ve,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(fe,function(){o.unbind(ve)});var ye=document.createElement("div");fe.appendChild(ye),ye.className="cell-modal__payload";var be=document.createElement("div");ye.appendChild(be),be.className="cell-h4",be.innerHTML=I.get("myList","confirmDelete");var Te=document.createElement("div");ye.appendChild(Te),Te.className="cell-width--190px cell-10-margin-top  cell-flex  cell-flex--center-align  cell-flex-justify--space-evenly  cell-pull-right";var Se=document.createElement("a");Te.appendChild(Se),Se.className="cell-flex-item  cell-text-uppercase  cell-text-center",InfrontUtil.addEventListener(Se,"click",function(e){e.stopPropagation(),b(e)}),InfrontUtil.addEventListener(Se,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||b(e)}),Se.setAttribute("tabindex","0"),Se.innerHTML=I.get("global","cancel");var Ce=document.createElement("button");Te.appendChild(Ce),Ce.className="cell-button  cell-button--negative",InfrontUtil.addEventListener(Ce,"click",function(e){e.stopPropagation(),y()}),Ce.innerHTML=I.get("mylist","delete");var Ie=document.createElement("div");n.appendChild(Ie);var _e=document.createElement("div");n.appendChild(_e),_e.className="cell-list--empty";var Me=new e.ClassBinding(_e,"cell-display-none",function(e){return 0==e});r.observe(Me,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_e,function(){r.unbind(Me)});var Ee=document.createElement("p");_e.appendChild(Ee),Ee.className="cell-list--empty__message",Ee.innerHTML=I.get("myList","emptyList");var we=document.createElement("div");return n.appendChild(we),we.className="",{listContainer:Ie,searchContainer:z,dropdownWrapper:R,dropdownContainer:N,dropDownLabel:M,addListContainer:K,addListButton:B,confirmContainer:fe,dropdownElements:V,notificationsContainer:we,dropdown:_,popupWrapper:Y,deleteBtn:Ce,addListContainerInput:ie}},t.create_WChainViewer_DOM=function(n,i,r,a,s,o,l,c){var d=document.createElement("div");n.appendChild(d),d.className="cell-h4  cell-pull-left";var u=e.BindingFactory.createValueBinding(d,"innerHTML");r.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){r.unbind(u)});var h=document.createElement("div");n.appendChild(h),h.className="cell-form-elements",h.setAttribute("role","list");var p=document.createElement("div");if(h.appendChild(p),o){var m=document.createElement("div");n.appendChild(m),m.className="cell-form-elements";var g=document.createElement("div");m.appendChild(g)}var f=document.createElement("div");return n.appendChild(f),{container:f,searchContainer:g,dropDownContainer:p}},t.create_WHistory_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y){if(null!=i){var b=document.createElement("div");n.appendChild(b),b.className="cell-h4";var T=document.createElement("span");b.appendChild(T),T.innerHTML=i}var S,C,I=document.createElement("div");if(n.appendChild(I),I.className="cell-form-elements",1<h.length){var _=document.createElement("select");I.appendChild(_),_.className="cell-input  cell-input--80px",_.setAttribute("aria-controls","updateHeader"),_.setAttribute("aria-label",""+y.get("accessibility","yearFilter")),p.bind(_);for(var M=0;M<h.length;M++)_.appendChild((S=h[M],C=void 0,(C=document.createElement("option")).innerHTML=S,C));t.unbindingManager.registerUnbind(_,function(){return p.unbind()})}var E=document.createElement("ul");I.appendChild(E),E.className="cell-ul cell-mininav cell-5-margin-left";var w=function(n,i){var r=document.createElement("li");r.className="cell-mininav__btn",InfrontUtil.addEventListener(r,"click",function(e){v(i)}),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||v(i)}),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),r.innerHTML=n;var a=new e.ClassBinding(r,"cell-mininav__btn--selected",function(e){return e==i});return f.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){f.unbind(a)}),r};for(M=0;M<g.length;M++)E.appendChild(w(g[M],M));var A=document.createElement("table");n.appendChild(A),A.className="cell-table";var D=new e.ClassBinding(A,"cell-display-none",function(e){return 0!=e});f.observe(D,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(A,function(){f.unbind(D)});var O=document.createElement("thead");A.appendChild(O);var k=document.createElement("tr");O.appendChild(k),k.setAttribute("id","updateHeader"),k.setAttribute("aria-live","polite");var R=function(n,i){var r=document.createElement("th");r.className="cell-cursor-pointer bar",InfrontUtil.addEventListener(r,"click",function(e){u(i+1)}),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u(i+1)}),r.setAttribute("aria-label",""+y.get("accessibility","notSorted")),r.setAttribute("aria-live","polite"),r.setAttribute("tabindex","0"),InfrontUtil.addClassName(r,n.class);var a=document.createElement("span");r.appendChild(a),a.innerHTML=y.get("history",n.name);var s=document.createElement("span");r.appendChild(s),s.className="cell-table__col-sortable";var o=new e.ClassBinding(s,"cell-table__col-sortable--descending",function(e){return e==i+1});d.observe(o,e.InitialUpdate.Synchronous);var l=new e.ClassBinding(s,"cell-table__col-sortable--ascending",function(e){return e==-1*(i+1)});return d.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){d.unbind(o),d.unbind(l)}),r};for(M=0;M<c.length;M++)k.appendChild(R(c[M],M));var N=document.createElement("tbody");A.appendChild(N);var L=new e.ArrayBinding(N,new e.InlineRowFactory(function(t,n){var i=document.createElement("tr");if(t._type==e.HistoryWidget.kTradeItem){var r=document.createElement("td");i.appendChild(r),r.className="cell-table__txt";var a;a="string"==typeof t._date?new Date(t._date):t._date,r.innerHTML=InfrontUtil.getPlainDatestring(a);var s=document.createElement("td");i.appendChild(s),s.className="cell-table__num",s.innerHTML=InfrontUtil.formatNumber(t.open,m);var o=document.createElement("td");i.appendChild(o),o.className="cell-table__num",o.innerHTML=InfrontUtil.formatNumber(t.high,m);var l=document.createElement("td");i.appendChild(l),l.className="cell-table__num",l.innerHTML=InfrontUtil.formatNumber(t.low,m);var c=document.createElement("td");i.appendChild(c),c.className="cell-table__num",c.innerHTML=InfrontUtil.formatNumber(t.last,m);var d=document.createElement("td");i.appendChild(d),d.className="cell-table__num",d.innerHTML=InfrontUtil.formatNumber(t.num_trades,0);var u=document.createElement("td");i.appendChild(u),u.className="cell-table__num",u.innerHTML=InfrontUtil.formatAndShorten(t.volume,0);var h=document.createElement("td");i.appendChild(h),h.className="cell-table__num",h.innerHTML=InfrontUtil.formatAndShorten(t.turnover,0)}if(t._type==e.HistoryWidget.kSplitItem){var p=document.createElement("td");i.appendChild(p),p.className=" cell-table__txt cell-table__txt--date cell-w-history__row-info-box";var g;g="string"==typeof t._date?new Date(t._date):t._date,p.innerHTML=InfrontUtil.getPlainDatestring(g);var f=document.createElement("td");i.appendChild(f),f.className="cell-w-history__row-info-box cell-text-center",f.colSpan=7;var v=document.createElement("span");f.appendChild(v),v.innerHTML=y.get("history","split"),f.appendChild(document.createTextNode(": "));var b=document.createElement("span");f.appendChild(b),b.innerHTML=t.factor}if(t._type==e.HistoryWidget.kDividendItem){var T=document.createElement("td");i.appendChild(T),T.className=" cell-table__txt cell-table__txt--date cell-w-history__row-info-box";var S;S="string"==typeof t._date?new Date(t._date):t._date,T.innerHTML=InfrontUtil.getPlainDatestring(S);var C=document.createElement("td");i.appendChild(C),C.className="cell-w-history__row-info-box cell-text-center",C.colSpan=7;var I=document.createElement("span");C.appendChild(I),I.innerHTML=y.get("history","dividend"),C.appendChild(document.createTextNode(": "));var _=document.createElement("span");C.appendChild(_),_.innerHTML=InfrontUtil.formatNumber(t.amount,m)}return i}),null);a.observe(L),t.unbindingManager.registerUnbind(N,function(){a.unbind(L)});var P=document.createElement("table");n.appendChild(P),P.className="cell-table";var F=new e.ClassBinding(P,"cell-display-none",function(e){return 1!=e});f.observe(F,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(P,function(){f.unbind(F)});var x=document.createElement("thead");P.appendChild(x);var U=document.createElement("tr");x.appendChild(U);var B=document.createElement("th");U.appendChild(B),B.className="cell-table__txt",B.innerHTML=y.get("history","exDate");var W=document.createElement("th");U.appendChild(W),W.className="cell-table__num",W.innerHTML=y.get("history","dividend");var H=document.createElement("tbody");P.appendChild(H);var V=new e.ArrayBinding(H,new e.InlineRowFactory(function(e,t){var n=document.createElement("tr"),i=document.createElement("td");n.appendChild(i),i.className="cell-table__txt";var r;r="string"==typeof e._date?new Date(e._date):e._date,i.innerHTML=InfrontUtil.getPlainDatestring(r);var a=document.createElement("td");return n.appendChild(a),a.className="cell-table__num",a.innerHTML=InfrontUtil.formatNumber(e.amount,m),n}),null);s.observe(V),t.unbindingManager.registerUnbind(H,function(){s.unbind(V)});var G=document.createElement("table");n.appendChild(G),G.className="cell-table";var z=new e.ClassBinding(G,"cell-display-none",function(e){return 2!=e});f.observe(z,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(G,function(){f.unbind(z)});var q=document.createElement("thead");G.appendChild(q);var Y=document.createElement("tr");q.appendChild(Y);var K=document.createElement("th");Y.appendChild(K),K.className="cell-table__txt",K.innerHTML=y.get("history","date");var X=document.createElement("th");Y.appendChild(X),X.className="cell-table__num",X.innerHTML=y.get("history","split");var j=document.createElement("tbody");G.appendChild(j);var Z=new e.ArrayBinding(j,new e.InlineRowFactory(function(e,t){var n=document.createElement("tr"),i=document.createElement("td");n.appendChild(i),i.className="cell-table__txt";var r;if(r="string"==typeof e._date?new Date(e._date):e._date,i.innerHTML=InfrontUtil.getPlainDatestring(r),l){var a=document.createElement("td");n.appendChild(a),a.className="cell-table__num",a.innerHTML=e.factor}if(!l){var s=document.createElement("td");n.appendChild(s),s.className="cell-table__num",s.innerHTML=InfrontUtil.formatNumber(e.factor,m)}return n}),null);return o.observe(Z),t.unbindingManager.registerUnbind(j,function(){o.unbind(Z)}),k},t.create_WFinancialCalendar_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m){var g=document.createElement("div");n.appendChild(g),g.className="cell-flex-row cell-flex-collapse cell-flex-align-middle";var f=document.createElement("div");g.appendChild(f),f.className="cell-flex-column",f.appendChild(t.macro_MHeader(i,!1,a,s,r,m));var v=document.createElement("div");f.appendChild(v);var y=document.createElement("div");g.appendChild(y),y.className="cell-flex-column cell-flex-shrink";var b=document.createElement("div");if(y.appendChild(b),d){var T=document.createElement("div");b.appendChild(T),T.className="cell-pull-right"}if(!0===h){var S=document.createElement("div");g.appendChild(S),S.className="cell-flex-column cell-flex-shrink cell-heading__search";var C=document.createElement("button");S.appendChild(C),C.className="cell-heading__search-icon",C.type="button",InfrontUtil.addEventListener(C,"click",function(e){p(e)});var I=document.createElement("div");S.appendChild(I),I.className="cell-heading__search-field";var _=document.createElement("button");I.appendChild(_),_.className="cell-heading__search-close",_.type="button",InfrontUtil.addEventListener(_,"click",function(e){p(e)})}var M=document.createElement("table");if(n.appendChild(M),M.className="cell-table cell-table--financial-calendar",1==l){var E=document.createElement("thead");M.appendChild(E);var w=document.createElement("tr");if(E.appendChild(w),c){var A=document.createElement("th");w.appendChild(A),A.className="cell-table__txt",A.innerHTML=m.get("financialCalendar","ticker")}if(u){var D=document.createElement("th");w.appendChild(D),D.className="cell-table__txt",D.innerHTML=m.get("financialCalendar","category")}var O=document.createElement("th");w.appendChild(O),O.className="cell-table__txt",O.innerHTML=m.get("financialCalendar","description");var k=document.createElement("th");w.appendChild(k),k.className="cell-table__num",k.innerHTML=m.get("financialCalendar","date")}var R=document.createElement("tbody");M.appendChild(R);var N=new e.ArrayBinding(R,new e.InlineRowFactory(function(e,t){var n=document.createElement("tr");if(1==l){if(c){var i=document.createElement("td");if(n.appendChild(i),e.hasOwnProperty("instrument")){var r=document.createElement("span");i.appendChild(r),r.innerHTML=e.instrument.ticker}}if(u){var a=document.createElement("td");if(n.appendChild(a),e.categoryType){var s=document.createElement("span");a.appendChild(s),s.innerHTML=e.categoryType}}var o=document.createElement("td");n.appendChild(o),o.innerHTML=e.description;var d=document.createElement("td");n.appendChild(d),d.className="cell-table__num";var h;h="string"==typeof e.date?new Date(e.date):e.date,d.innerHTML=InfrontUtil.getPlainDatestring(h)}if(0==l){var p=document.createElement("td");n.appendChild(p);var m=document.createElement("div");if(p.appendChild(m),m.className="cell-strong  cell-clear",e.hasOwnProperty("instrument")){var g=document.createElement("span");m.appendChild(g),g.innerHTML=e.instrument.ticker}if(!e.hasOwnProperty("instrument")){var f=document.createElement("span");m.appendChild(f),f.appendChild(document.createTextNode("-"))}var v=document.createElement("span");m.appendChild(v),v.className="cell-pull-right";var y;y="string"==typeof e.date?new Date(e.date):e.date,v.innerHTML=InfrontUtil.getPlainDatestring(y);var b=document.createElement("div");p.appendChild(b),b.className="cell-table--financial-calendar__description",b.innerHTML=e.description}return n}),null);o.observe(N),t.unbindingManager.registerUnbind(R,function(){o.unbind(N)});var L=document.createElement("div");return n.appendChild(L),{pagerContainer:L,activityIndicator:v,countryDropDownElement:T,searchContainer:I}},t.create_WOrderbook_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S,C,I,_){var M=document.createElement("div");n.appendChild(M),M.className="cell-w-order-book";var E=document.createElement("div");M.appendChild(E),E.className="cell-flex-row cell-flex-collapse";var w=document.createElement("div");E.appendChild(w),w.className="cell-flex-column";var A=document.createElement("div");if(w.appendChild(A),A.className="cell-flex-row cell-flex-collapse cell-h4",null!=l&&0==c){var D=document.createElement("div");A.appendChild(D),D.className="cell-flex-column cell-flex-shrink";var O=document.createElement("span");if(D.appendChild(O),O.innerHTML=l,h){var k=document.createElement("div");A.appendChild(k),k.className="cell-flex-column cell-flex-shrink";var R=document.createElement("span");k.appendChild(R),R.className="cell-5-margin-left";var N=e.BindingFactory.createValueBinding(R,"innerHTML");i.observe(N,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(R,function(){i.unbind(N)})}}if(null!=l&&1==c){var L=document.createElement("div");A.appendChild(L),L.className="cell-flex-column cell-flex-shrink";var P=document.createElement("span");if(L.appendChild(P),P.className="cell-cursor-pointer",InfrontUtil.addEventListener(P,"click",function(e){S(e)}),InfrontUtil.addEventListener(P,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||S(e)}),P.innerHTML=l,h){var F=document.createElement("div");A.appendChild(F),F.className="cell-flex-column cell-flex-shrink cell-5-margin-left";var x=document.createElement("span");F.appendChild(x),x.className="cell-cursor-pointer";var U=e.BindingFactory.createValueBinding(x,"innerHTML");i.observe(U,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(x,function(){i.unbind(U)})}}if(!0===u){var B=document.createElement("div");A.appendChild(B),B.className="cell-flex-column cell-flex-shrink cell-5-margin-left"}if(!0===d){var W=document.createElement("div");A.appendChild(W),W.className="cell-flex-column cell-flex-shrink cell-5-margin-left"}if(!0===C){var H=document.createElement("div");E.appendChild(H),H.className="cell-flex-column cell-flex-shrink cell-heading__search";var V=document.createElement("button");H.appendChild(V),V.className="cell-heading__search-icon",V.type="button",InfrontUtil.addEventListener(V,"click",function(e){I(e)});var G=document.createElement("div");H.appendChild(G),G.className="cell-heading__search-field";var z=document.createElement("button");G.appendChild(z),z.className="cell-heading__search-close",z.type="button",InfrontUtil.addEventListener(z,"click",function(e){I(e)})}var q=document.createElement("div");M.appendChild(q),q.className="cell-flex-row cell-flex-collapse cell-w-order-book__payload";var Y=document.createElement("div");q.appendChild(Y),Y.className="cell-flex-column";var K=document.createElement("table");Y.appendChild(K),K.className="cell-table cell-w-order-book__table";var X=document.createElement("thead");if(K.appendChild(X),s==e.OrderbookRowLayout.COMPACT){var j=document.createElement("tr");if(X.appendChild(j),j.className="cell-w-order-book__compact",o){var Z=document.createElement("th");j.appendChild(Z),Z.className="cell-w-order-book__table-header-bid-orders",Z.innerHTML=_.get("orderBook","orders")}var J=document.createElement("th");j.appendChild(J),J.className="cell-w-order-book__table-header-bid-volume",J.innerHTML=_.get("orderBook","bidsize");var Q=document.createElement("th");j.appendChild(Q),Q.className="cell-w-order-book__table-header-bid-price",Q.innerHTML=_.get("orderBook","bid")}if(s==e.OrderbookRowLayout.WIDE){var $=document.createElement("tr");if(X.appendChild($),$.className="cell-w-order-book__wide",o){var ee=document.createElement("th");$.appendChild(ee),ee.className="cell-w-order-book__table-header-bid-orders",ee.innerHTML=_.get("orderBook","orders")}var te=document.createElement("th");$.appendChild(te),te.className="cell-w-order-book__table-header-bid-volume",te.innerHTML=_.get("orderBook","bidsize");var ne=document.createElement("th");$.appendChild(ne),ne.className="cell-w-order-book__table-header-bid-price",ne.innerHTML=_.get("orderBook","bid");var ie=document.createElement("th");$.appendChild(ie),ie.className="cell-w-order-book__table-header-size-bar"}var re=document.createElement("tbody");K.appendChild(re);var ae=document.createElement("div");q.appendChild(ae),ae.className="cell-flex-column";var se=document.createElement("table");ae.appendChild(se),se.className="cell-table cell-w-order-book__table";var oe=document.createElement("thead");if(se.appendChild(oe),s==e.OrderbookRowLayout.COMPACT){var le=document.createElement("tr");oe.appendChild(le),le.className="cell-w-order-book__compact";var ce=document.createElement("th");le.appendChild(ce),ce.className="cell-w-order-book__table-header-ask-price",ce.innerHTML=_.get("orderBook","ask");var de=document.createElement("th");if(le.appendChild(de),de.className="cell-w-order-book__table-header-ask-volume",de.innerHTML=_.get("orderBook","asksize"),o){var ue=document.createElement("th");le.appendChild(ue),ue.className="cell-w-order-book__table-header-ask-orders",ue.innerHTML=_.get("orderBook","orders")}}if(s==e.OrderbookRowLayout.WIDE){var he=document.createElement("tr");oe.appendChild(he),he.className="cell-w-order-book__wide";var pe=document.createElement("th");he.appendChild(pe),pe.className="cell-w-order-book__table-header-size-bar";var me=document.createElement("th");he.appendChild(me),me.className="cell-w-order-book__table-header-ask-price",me.innerHTML=_.get("orderBook","ask");var ge=document.createElement("th");if(he.appendChild(ge),ge.className="cell-w-order-book__table-header-ask-volume",ge.innerHTML=_.get("orderBook","asksize"),o){var fe=document.createElement("th");he.appendChild(fe),fe.className="cell-w-order-book__table-header-ask-orders",fe.innerHTML=_.get("orderBook","orders")}}var ve=document.createElement("tbody");if(se.appendChild(ve),!0===p){var ye=document.createElement("div");M.appendChild(ye),ye.className="cell-flex-row cell-flex-collapse cell-w-order-book__footer";var be=document.createElement("div");ye.appendChild(be),be.className="cell-flex-column cell-flex-small-4";var Te=document.createElement("div");be.appendChild(Te),Te.className="cell-flex-row cell-flex-collapse";var Se=document.createElement("div");Te.appendChild(Se),Se.className="cell-flex-column cell-flex-shrink";var Ce=document.createElement("span");Se.appendChild(Ce),Ce.className="cell-label-colon cell-w-order-book__footer-label cell-5-margin-right",Ce.innerHTML=_.get("orderBook","bidaskratio");var Ie=document.createElement("div");Te.appendChild(Ie),Ie.className="cell-flex-column";var _e=document.createElement("div");Ie.appendChild(_e),_e.className="cell-flex-row cell-flex-collapse";var Me=document.createElement("div");_e.appendChild(Me),Me.className="cell-flex-column";var Ee=e.BindingFactory.createHTMLAttributeBinding(Me,"style",function(e){return"flex: 0 0 "+e+"%"});f.observe(Ee),t.unbindingManager.registerUnbind(Me,function(){f.unbind(Ee)});var we=document.createElement("div");Me.appendChild(we),we.className="cell-w-order-book__bid-bar-size";var Ae=document.createElement("span");we.appendChild(Ae),Ae.className="cell-w-order-book__footer-label";var De=e.BindingFactory.createPercentBinding(Ae,0,"innerHTML",!1);f.observe(De,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ae,function(){f.unbind(De)});var Oe=document.createElement("div");_e.appendChild(Oe),Oe.className="cell-flex-column";var ke=e.BindingFactory.createHTMLAttributeBinding(Oe,"style",function(e){return"flex: 0 0 "+e+"%"});y.observe(ke),t.unbindingManager.registerUnbind(Oe,function(){y.unbind(ke)});var Re=document.createElement("div");Oe.appendChild(Re),Re.className="cell-w-order-book__ask-bar-size";var Ne=document.createElement("span");Re.appendChild(Ne),Ne.className="cell-w-order-book__footer-label";var Le=e.BindingFactory.createPercentBinding(Ne,0,"innerHTML",!1);y.observe(Le,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ne,function(){y.unbind(Le)});var Pe=document.createElement("div");ye.appendChild(Pe),Pe.className="cell-flex-column cell-w-order-book__footer-spread";var Fe=document.createElement("span");Pe.appendChild(Fe),Fe.className="cell-label-colon cell-w-order-book__footer-label",Fe.innerHTML=_.get("orderBook","spread");var xe=document.createElement("span");Pe.appendChild(xe),xe.className="cell-w-order-book__footer-label cell-5-margin-left";var Ue=e.BindingFactory.createPercentBinding(xe,2,"innerHTML",!1);b.observe(Ue,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(xe,function(){b.unbind(Ue)})}return{bidTBody:re,askTBody:ve,searchContainer:G,percentChangeNode:W,absoluteChangeNode:B}},t.create_WOrderbookBidRow_DOM=function(n,i,r,a,s,o,l,c,d){if(c==e.OrderbookRowLayout.WIDE){(C=document.createElement("tr")).className="cell-w-order-book__wide cell-display-none";var u=new e.ClassBinding(C,"cell-display-none",function(e){return null==e});if(n.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){n.unbind(u)}),d){var h=document.createElement("td");C.appendChild(h),h.className="cell-w-order-book--bid-orders";var p=e.BindingFactory.createNumberFormatValueBinding(h,"innerHTML",0,!1);r.observe(p);var m=new e.CssUpdateBinding(h,1e3);r.observe(m,e.InitialUpdate.None),t.unbindingManager.registerUnbind(h,function(){r.unbind(p),r.unbind(m)})}var g=document.createElement("td");C.appendChild(g),g.className="cell-w-order-book--bid-volume";var f=e.BindingFactory.createNumberFormatValueBinding(g,"innerHTML",0,!1);i.observe(f);var v=new e.CssUpdateBinding(g,1e3,1);i.observe(v,e.InitialUpdate.None),t.unbindingManager.registerUnbind(g,function(){i.unbind(f),i.unbind(v)});var y=document.createElement("td");C.appendChild(y),y.className="cell-w-order-book--bid-price cell-tablecell--interaction",InfrontUtil.addEventListener(y,"click",function(e){l(e)}),InfrontUtil.addEventListener(y,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)});var b=e.BindingFactory.createValueBinding(y,"innerHTML");n.observe(b,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(y,function(){n.unbind(b)});var T=document.createElement("td");C.appendChild(T),T.className="cell-w-order-book--bid-bar-size";var S=e.BindingFactory.createHTMLAttributeBinding(T,"style",function(e){return"width:25%;background-size:"+e+"% "+s});a.observe(S),t.unbindingManager.registerUnbind(T,function(){a.unbind(S)})}if(c==e.OrderbookRowLayout.COMPACT){var C;(C=document.createElement("tr")).className="cell-w-order-book__compact cell-display-none";var I=new e.ClassBinding(C,"cell-display-none",function(e){return null==e});if(n.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){n.unbind(I)}),d){var _=document.createElement("td");C.appendChild(_),_.className="cell-w-order-book--bid-orders";var M=e.BindingFactory.createNumberFormatValueBinding(_,"innerHTML",0,!1);r.observe(M);var E=new e.CssUpdateBinding(_,1e3);r.observe(E,e.InitialUpdate.None),t.unbindingManager.registerUnbind(_,function(){r.unbind(M),r.unbind(E)})}var w=document.createElement("td");C.appendChild(w),w.className="cell-w-order-book--bid-bar-size  cell-w-order-book--bid-volume";var A=e.BindingFactory.createHTMLAttributeBinding(w,"style",function(e){return"width:25%;background-size:"+e+"% "+s});a.observe(A);var D=new e.CssUpdateBinding(w,1e3);i.observe(D,e.InitialUpdate.None),t.unbindingManager.registerUnbind(w,function(){a.unbind(A),i.unbind(D)});var O=document.createElement("span");w.appendChild(O);var k=e.BindingFactory.createNumberFormatValueBinding(O,"innerHTML",0,!1);i.observe(k),t.unbindingManager.registerUnbind(O,function(){i.unbind(k)});var R=document.createElement("td");C.appendChild(R),R.className="cell-w-order-book--bid-price  cell-tablecell--interaction",InfrontUtil.addEventListener(R,"click",function(e){l(e)}),InfrontUtil.addEventListener(R,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)});var N=e.BindingFactory.createValueBinding(R,"innerHTML");n.observe(N,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(R,function(){n.unbind(N)})}return C},t.create_WOrderbookAskRow_DOM=function(n,i,r,a,s,o,l,c,d){if(c==e.OrderbookRowLayout.WIDE){(C=document.createElement("tr")).className="cell-w-order-book__wide cell-display-none";var u=new e.ClassBinding(C,"cell-display-none",function(e){return null==e});n.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){n.unbind(u)});var h=document.createElement("td");C.appendChild(h),h.className="cell-w-order-book--ask-bar-size";var p=e.BindingFactory.createHTMLAttributeBinding(h,"style",function(e){return"width:25%;background-size:"+e+"% "+s});a.observe(p),t.unbindingManager.registerUnbind(h,function(){a.unbind(p)});var m=document.createElement("td");C.appendChild(m),m.className="cell-w-order-book--ask-price cell-tablecell--interaction",InfrontUtil.addEventListener(m,"click",function(e){l(e)}),InfrontUtil.addEventListener(m,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)});var g=e.BindingFactory.createValueBinding(m,"innerHTML");n.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){n.unbind(g)});var f=document.createElement("td");C.appendChild(f),f.className="cell-w-order-book--ask-volume";var v=e.BindingFactory.createNumberFormatValueBinding(f,"innerHTML",0,!1);i.observe(v);var y=new e.CssUpdateBinding(f,1e3,1);if(i.observe(y,e.InitialUpdate.None),t.unbindingManager.registerUnbind(f,function(){i.unbind(v),i.unbind(y)}),d){var b=document.createElement("td");C.appendChild(b),b.className="cell-w-order-book--ask-orders";var T=e.BindingFactory.createNumberFormatValueBinding(b,"innerHTML",0,!1);r.observe(T);var S=new e.CssUpdateBinding(b,1e3);r.observe(S,e.InitialUpdate.None),t.unbindingManager.registerUnbind(b,function(){r.unbind(T),r.unbind(S)})}}if(c==e.OrderbookRowLayout.COMPACT){var C;(C=document.createElement("tr")).className="cell-w-order-book__compact cell-display-none";var I=new e.ClassBinding(C,"cell-display-none",function(e){return null==e});n.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){n.unbind(I)});var _=document.createElement("td");C.appendChild(_),_.className="cell-w-order-book--ask-price cell-tablecell--interaction",InfrontUtil.addEventListener(_,"click",function(e){l(e)}),InfrontUtil.addEventListener(_,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)});var M=e.BindingFactory.createValueBinding(_,"innerHTML");n.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){n.unbind(M)});var E=document.createElement("td");C.appendChild(E),E.className="cell-w-order-book--ask-bar-size cell-w-order-book--ask-volume";var w=e.BindingFactory.createHTMLAttributeBinding(E,"style",function(e){return"width:25%;background-size:"+e+"% "+s});a.observe(w);var A=new e.CssUpdateBinding(E,1e3,1);i.observe(A,e.InitialUpdate.None),t.unbindingManager.registerUnbind(E,function(){a.unbind(w),i.unbind(A)});var D=document.createElement("span");E.appendChild(D);var O=e.BindingFactory.createNumberFormatValueBinding(D,"innerHTML",0,!1);if(i.observe(O),t.unbindingManager.registerUnbind(D,function(){i.unbind(O)}),d){var k=document.createElement("td");C.appendChild(k),k.className="cell-w-order-book--ask-orders";var R=e.BindingFactory.createNumberFormatValueBinding(k,"innerHTML",0,!1);r.observe(R);var N=new e.CssUpdateBinding(k,1e3);r.observe(N,e.InitialUpdate.None),t.unbindingManager.registerUnbind(k,function(){r.unbind(R),r.unbind(N)})}}return C},t.create_WRanking_DOM=function(e,n,i,r,a,s,o,l,c){if(e.appendChild(t.macro_MHeader(n,i,r,a,void 0,c)),s){var d=document.createElement("div");e.appendChild(d),d.className="cell-form-elements";var u=document.createElement("select");d.appendChild(u),u.className="cell-input  cell-input--190px",l.bind(u);for(var h=0;h<o.length;h++)u.appendChild((p=o[h],m=void 0,(m=document.createElement("option")).innerHTML=p,m));t.unbindingManager.registerUnbind(u,function(){return l.unbind()})}var p,m,g=document.createElement("table");e.appendChild(g),g.className="cell-table";var f=document.createElement("thead");g.appendChild(f);var v=document.createElement("tbody");return g.appendChild(v),{thead:f,tbody:v}},t.create_WHeatmap_DOM=function(e,t,n){var i=document.createElement("div");e.appendChild(i);var r=document.createElement("div");e.appendChild(r),r.className="cell-flex-wrapper  cell-heatmap";var a=document.createElement("div");return r.appendChild(a),a.className="cell-flex-row  cell-heatmap__container",{heatmapWrapper:a,dropdown:i}},t.create_WBrokerStats_DOM=function(n,i,r,a,s,o,l,c,d,u,h){var p=document.createElement("div");n.appendChild(p),p.className="cell-flex-row cell-flex-collapse";var m,g,f=document.createElement("div");if(p.appendChild(f),f.className="cell-flex-column cell-h4",""!=r.get()){var v=document.createElement("span");f.appendChild(v);var y=e.BindingFactory.createValueBinding(v,"innerHTML");r.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){r.unbind(y)})}if(a){var b=document.createElement("div");p.appendChild(b),b.className="cell-flex-column cell-flex-shrink cell-heading__dropdown";var T=document.createElement("label");b.appendChild(T);var S=document.createElement("select");b.appendChild(S),S.className="cell-input cell-input--190px",S.setAttribute("id","period-select"),o.bind(S);for(var C=0;C<s.length;C++)S.appendChild((m=s[C],g=void 0,(g=document.createElement("option")).innerHTML=m,g));t.unbindingManager.registerUnbind(S,function(){return o.unbind()})}if(!0===d){var I=document.createElement("div");p.appendChild(I),I.className="cell-flex-column cell-flex-shrink cell-heading__search";var _=document.createElement("button");I.appendChild(_),_.className="cell-heading__search-icon",_.type="button",InfrontUtil.addEventListener(_,"click",function(e){u(e)});var M=document.createElement("div");I.appendChild(M),M.className="cell-heading__search-field";var E=document.createElement("button");M.appendChild(E),E.className="cell-heading__search-close",E.type="button",InfrontUtil.addEventListener(E,"click",function(e){u(e)})}if(l==e.ListLayout.TABLE){var w=document.createElement("table");n.appendChild(w),w.className="cell-table  cell-10-margin-top";var A=document.createElement("thead");w.appendChild(A);var D=document.createElement("tbody");w.appendChild(D)}if(l==e.ListLayout.DIV&&(w=document.createElement("div"),n.appendChild(w),w.className="cell-flex-list-wrapper  cell-10-margin-top",A=document.createElement("div"),w.appendChild(A),A.className="cell-flex-list  cell-flex-list--header",D=document.createElement("div"),w.appendChild(D),D.className="cell-flex-list  cell-flex-list--body"),0==c){var O=document.createElement("p");n.appendChild(O),O.innerHTML=h.get("brokerstats","unavailable")}return{thead:A,tbody:D,searchContainer:M,periodSelect:S,labelPeriodSelect:T}},t.create_WIntradayTrades_DOM=function(n,i,r,a,s){if(n.appendChild(t.macro_MHeader(i,!1,r,a,void 0,null)),s==e.ListLayout.TABLE){var o=document.createElement("table");n.appendChild(o),o.className="cell-table";var l=document.createElement("thead");o.appendChild(l);var c=document.createElement("tbody");o.appendChild(c)}if(s==e.ListLayout.DIV){var d=document.createElement("div");n.appendChild(d),d.className="cell-flex-list-wrapper",d.setAttribute("style","margin-top: 20px;"),l=document.createElement("div"),d.appendChild(l),l.className="cell-flex-list  cell-flex-list--header",c=document.createElement("div"),d.appendChild(c),c.className="cell-flex-list  cell-flex-list--body"}var u=document.createElement("div");return n.appendChild(u),{thead:l,tbody:c,pagerContainer:u}},t.create_WIntradayTradesMini_DOM=function(n,i,r,a,s,o,l,c,d,u,h){var p=document.createElement("div");n.appendChild(p),p.className="cell-w-latest-trades";var m=document.createElement("div");p.appendChild(m),m.className="cell-flex-row cell-flex-collapse";var g=document.createElement("div");if(m.appendChild(g),g.className="cell-flex-column",null!=r&&0==l){var f=document.createElement("div");g.appendChild(f),f.className="cell-h4";var v=document.createElement("span");if(f.appendChild(v),v.innerHTML=r,a){var y=document.createElement("span");f.appendChild(y),y.className="cell-5-margin-left";var b=e.BindingFactory.createValueBinding(y,"innerHTML");i.observe(b,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(y,function(){i.unbind(b)})}}if(null!=r&&1==l){var T=document.createElement("div");g.appendChild(T),T.className="cell-cursor-pointer  cell-h4";var S=document.createElement("span");if(T.appendChild(S),InfrontUtil.addEventListener(S,"click",function(e){d(e)}),InfrontUtil.addEventListener(S,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)}),S.innerHTML=r,a){var C=document.createElement("span");T.appendChild(C),C.className="cell-5-margin-left";var I=e.BindingFactory.createValueBinding(C,"innerHTML");i.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){i.unbind(I)})}}if(!0===c){var _=document.createElement("div");m.appendChild(_),_.className="cell-flex-column cell-flex-shrink";var M=document.createElement("button");_.appendChild(M),M.className="cell-heading__search-icon",M.type="button",InfrontUtil.addEventListener(M,"click",function(e){u(e)});var E=document.createElement("div");_.appendChild(E),E.className="cell-heading__search-field";var w=document.createElement("button");E.appendChild(w),w.className="cell-heading__search-close",w.type="button",InfrontUtil.addEventListener(w,"click",function(e){u(e)})}if(1==s){var A=document.createElement("div");p.appendChild(A),A.className="cell-w-latest-trades__header-row";var D=document.createElement("div");if(A.appendChild(D),D.className="cell-w-latest-trades-item__time",D.innerHTML=h.get("columns","TIME"),1==o){var O=document.createElement("div");A.appendChild(O),O.className="cell-w-latest-trades-item__buyer-seller";var k=document.createElement("span");O.appendChild(k),k.className="cell-w-latest-trades-item__buyer",k.innerHTML=h.get("columns","BUYER");var R=document.createElement("span");O.appendChild(R),R.className="cell-w-latest-trades-item__seller",R.innerHTML=h.get("columns","SELLER")}var N=document.createElement("div");A.appendChild(N),N.className="cell-w-latest-trades-item__details";var L=document.createElement("span");N.appendChild(L),L.className="cell-w-latest-trades-item__volume",L.innerHTML=h.get("columns","VOLUME");var P=document.createElement("span");N.appendChild(P),P.className="cell-w-latest-trades-item__price",P.innerHTML=h.get("columns","PRICE");var F=document.createElement("span");N.appendChild(F),F.className="cell-w-latest-trades-item__up-down"}var x=document.createElement("div");return p.appendChild(x),{tradeBody:x,searchContainer:E}},t.create_WIntradayTradesMiniRow_DOM=function(n,i,r,a,s,o,l,c,d,u,h){var p=document.createElement("div");p.className="cell-w-latest-trades__item-row";var m=document.createElement("div");p.appendChild(m),m.className="cell-w-latest-trades-item__vol-bg";var g=e.BindingFactory.createHTMLAttributeBinding(m,"style",function(e){return"width:"+e+"% "});l.observe(g),t.unbindingManager.registerUnbind(m,function(){l.unbind(g)});var f=document.createElement("div");p.appendChild(f),f.className="cell-w-latest-trades-item__time";var v=e.BindingFactory.createTimestampBinding(f);if(a.observe(v,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(f,function(){a.unbind(v)}),1==u){var y=document.createElement("div");p.appendChild(y),y.className="cell-w-latest-trades-item__buyer-seller";var b=document.createElement("span");y.appendChild(b),b.className="cell-w-latest-trades-item__buyer";var T=e.BindingFactory.createValueBinding(b,"innerHTML");c.observe(T,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(b,function(){c.unbind(T)});var S=document.createElement("span");y.appendChild(S),S.className="cell-w-latest-trades-item__seller";var C=e.BindingFactory.createValueBinding(S,"innerHTML");d.observe(C,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(S,function(){d.unbind(C)})}var I=document.createElement("div");p.appendChild(I),I.className="cell-w-latest-trades-item__details";var _=document.createElement("span");I.appendChild(_),_.className="cell-w-latest-trades-item__volume";var M=e.BindingFactory.createNumberFormatValueBinding(_,"innerHTML",0,!1);r.observe(M),t.unbindingManager.registerUnbind(_,function(){r.unbind(M)});var E=document.createElement("span");I.appendChild(E),E.className="cell-w-latest-trades-item__price cell-cursor-pointer",InfrontUtil.addEventListener(E,"click",function(e){h(e)}),InfrontUtil.addEventListener(E,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(e)});var w=e.BindingFactory.createNumberFormatValueBinding(E,"innerHTML",i,!1);n.observe(w);var A=new e.ClassBinding(E,"cell-status-negative",function(e){return e<0});s.observe(A,e.InitialUpdate.Synchronous);var D=new e.ClassBinding(E,"cell-status-positive",function(e){return 0<e});s.observe(D,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(E,function(){n.unbind(w),s.unbind(A),s.unbind(D)});var O=document.createElement("span");I.appendChild(O),O.className="cell-arrow";var k=new e.ClassBinding(O,"cell-arrow--right",function(e){return 0==e});o.observe(k,e.InitialUpdate.Synchronous);var R=new e.ClassBinding(O,"cell-arrow--down",function(e){return e<0});o.observe(R,e.InitialUpdate.Synchronous);var N=new e.ClassBinding(O,"cell-arrow--up",function(e){return 0<e});return o.observe(N,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(O,function(){o.unbind(k),o.unbind(R),o.unbind(N)}),p},t.create_WMultipleValues_DOM=function(e,t){var n=document.createElement("div");e.appendChild(n),n.className="cell-h4",n.innerHTML=t;var i=document.createElement("div");return e.appendChild(i),i},t.create_WStyleMap_DOM=function(n,i,r,a,s,o){var l=document.createElement("div");n.appendChild(l);var c=document.createElement("div");l.appendChild(c),c.className="cell-h4";var d=document.createElement("span");c.appendChild(d),d.innerHTML=o.get("stylemap","title");var u=document.createElement("div");l.appendChild(u),u.className="cell-w-fund-style-map";var h=document.createElement("div");u.appendChild(h),h.className="cell-w-fund-style-map__row";for(var p=function(n){var r=document.createElement("div");h.appendChild(r),r.className="cell-w-fund-style-map__row__element";var a=e.BindingFactory.createHTMLAttributeBinding(r,"aria-hidden",function(e){return(e!=n).toString()});i.observe(a,e.InitialUpdate.Synchronous);var s=new e.ClassBinding(r,"cell-w-fund-style-map__row__element--highlighted",function(e){return e==n});i.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a),i.unbind(s)})},m=1;m<=3;m++)p(m);var g=document.createElement("div");h.appendChild(g),g.className="cell-w-fund-style-map__row__size",g.setAttribute("aria-hidden","true"),g.innerHTML=o.get("stylemap","large");var f=document.createElement("div");u.appendChild(f),f.className="cell-w-fund-style-map__row";var v=function(n){var r=document.createElement("div");f.appendChild(r),r.className="cell-w-fund-style-map__row__element";var a=e.BindingFactory.createHTMLAttributeBinding(r,"aria-hidden",function(e){return(e!=n).toString()});i.observe(a,e.InitialUpdate.Synchronous);var s=new e.ClassBinding(r,"cell-w-fund-style-map__row__element--highlighted",function(e){return e==n});i.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a),i.unbind(s)})};for(m=4;m<=6;m++)v(m);var y=document.createElement("div");f.appendChild(y),y.className="cell-w-fund-style-map__row__size",y.setAttribute("aria-hidden","true"),y.innerHTML=o.get("stylemap","medium");var b=document.createElement("div");u.appendChild(b),b.className="cell-w-fund-style-map__row";var T=function(n){var r=document.createElement("div");b.appendChild(r),r.className="cell-w-fund-style-map__row__element";var a=e.BindingFactory.createHTMLAttributeBinding(r,"aria-hidden",function(e){return(e!=n).toString()});i.observe(a,e.InitialUpdate.Synchronous);var s=new e.ClassBinding(r,"cell-w-fund-style-map__row__element--highlighted",function(e){return e==n});i.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a),i.unbind(s)})};for(m=7;m<=9;m++)T(m);var S=document.createElement("div");b.appendChild(S),S.className="cell-w-fund-style-map__row__size",S.setAttribute("aria-hidden","true"),S.innerHTML=o.get("stylemap","small");var C=document.createElement("div");u.appendChild(C),C.className="cell-w-fund-style-map__row";var I=document.createElement("div");C.appendChild(I),I.className="cell-w-fund-style-map__row__class",I.setAttribute("aria-hidden","true"),I.innerHTML=o.get("stylemap","value");var _=document.createElement("div");C.appendChild(_),_.className="cell-w-fund-style-map__row__class",_.setAttribute("aria-hidden","true"),_.innerHTML=o.get("stylemap","blend");var M=document.createElement("div");C.appendChild(M),M.className="cell-w-fund-style-map__row__class",M.setAttribute("aria-hidden","true"),M.innerHTML=o.get("stylemap","growth")},t.create_WRiskLevel_DOM=function(n,i,r,a,s){var o=document.createElement("div");n.appendChild(o);var l=document.createElement("div");o.appendChild(l),l.className="cell-w-funds-risk-level";var c=document.createElement("div");l.appendChild(c),c.className="cell-w-funds-risk-level__wrapper";var d=document.createElement("div");c.appendChild(d),d.className="cell-w-funds-risk-level__label",d.innerHTML=s.get("riskLevel","riskLevel");var u=document.createElement("div");c.appendChild(u),u.className="cell-w-funds-risk-level__levels";for(var h=function(n){var i=document.createElement("div");u.appendChild(i),i.className="cell-w-funds-risk-level__level";var s=new e.ClassBinding(i,"cell-w-funds-risk-level__level--selected",function(e){return e==n}),o=r.customBind(a,["fund_details","performance","risk_level"],s);t.unbindingManager.registerUnbind(i,o);var l=document.createElement("div");i.appendChild(l),l.className="cell-w-funds-risk-level__level__num",l.innerHTML=InfrontUtil.formatNumber(n,0)},p=1;p<i+1;p++)h(p);return{riskLevelStars:u,container:o}},t.create_WMorningstarRating_DOM=function(n,i,r,a,s){var o=document.createElement("div");if(n.appendChild(o),null!=i){var l=document.createElement("div");o.appendChild(l),l.className="cell-h4",l.innerHTML=i}var c=document.createElement("div");o.appendChild(c),c.className="cell-w-fund-morningstar-rating";var d=document.createElement("div");c.appendChild(d),d.className="cell-w-fund-morningstar-rating__wrapper";for(var u=function(n){var i=document.createElement("div");d.appendChild(i),i.className="cell-w-fund-morningstar-rating__star";var s=new e.ClassBinding(i,"cell-w-fund-morningstar-rating__star--filled",function(e){return n<=e}),o=r.customBind(a,["fund_details","performance","star_rating"],s);t.unbindingManager.registerUnbind(i,o)},h=1;h<=5;h++)u(h);return{container:o,morningstarRating:d}},t.create_WFundsInfo_DOM=function(n,i,r,a){var s=document.createElement("div");n.appendChild(s);var o=document.createElement("div");s.appendChild(o),o.className="cell-h4",o.innerHTML=a.get("fundInfo","fundInfo");var l=document.createElement("table");s.appendChild(l),l.className="cell-table cell-table--quote-list";var c=document.createElement("tbody");l.appendChild(c);var d=document.createElement("tr");c.appendChild(d);var u=document.createElement("td");d.appendChild(u),u.className="cell-instrument-values--vertical__heading",u.innerHTML=a.get("fundInfo","type");var h=document.createElement("td");d.appendChild(h),h.className="cell-instrument-values--vertical__value";var p=e.BindingFactory.createValueBinding(h,"innerHTML"),m=i.customBind(r,"fund_type",p);t.unbindingManager.registerUnbind(h,m);var g=document.createElement("tr");c.appendChild(g);var f=document.createElement("td");g.appendChild(f),f.className="cell-instrument-values--vertical__heading",f.innerHTML=a.get("fundInfo","category");var v=document.createElement("td");g.appendChild(v),v.className="cell-instrument-values--vertical__value";var y=e.BindingFactory.createValueBinding(v,"innerHTML"),b=i.customBind(r,"segment",y);t.unbindingManager.registerUnbind(v,b);var T=document.createElement("tr");c.appendChild(T);var S=document.createElement("td");T.appendChild(S),S.className="cell-instrument-values--vertical__heading",S.innerHTML=a.get("fundInfo","fundTotalExpense");var C=document.createElement("td");T.appendChild(C),C.className="cell-instrument-values--vertical__value";var I=e.BindingFactory.createValueBinding(C,"innerHTML"),_=i.customBind(r,"fund_total_expense",I);t.unbindingManager.registerUnbind(C,_);var M=document.createElement("tr");c.appendChild(M);var E=document.createElement("td");M.appendChild(E),E.className="cell-instrument-values--vertical__heading",E.innerHTML=a.get("fundInfo","minInitialInvestment");var w=document.createElement("td");M.appendChild(w),w.className="cell-instrument-values--vertical__value";var A=e.BindingFactory.createNumberFormatValueBinding(w,"innerHTML",0,!1),D=i.customBind(r,["fund_details","operation","min_init_investment"],A);t.unbindingManager.registerUnbind(w,D);var O=document.createElement("tr");c.appendChild(O);var k=document.createElement("td");O.appendChild(k),k.className="cell-instrument-values--vertical__heading",k.innerHTML=a.get("fundInfo","totalAssets");var R=document.createElement("td");O.appendChild(R),R.className="cell-instrument-values--vertical__value";var N=e.BindingFactory.createValueBinding(R,"innerHTML"),L=i.customBind(r,"fund_total_assets",N);t.unbindingManager.registerUnbind(R,L)},t.create_WFundAllocation_DOM=function(n,i,r,a,s){var o=document.createElement("div");n.appendChild(o),o.className="cell-h4",o.innerHTML=r;var l=document.createElement("table");n.appendChild(l),l.className="cell-table";var c=document.createElement("tbody");l.appendChild(c);var d=new e.ArrayBinding(c,new e.InlineRowFactory(function(e,t){var n=document.createElement("tr"),i=document.createElement("td");n.appendChild(i),i.className="cell-instrument-values--vertical__heading",i.innerHTML=e[a];var r=document.createElement("td");return n.appendChild(r),r.className="cell-instrument-values--vertical__value",r.innerHTML=InfrontUtil.formatPercent(e[s],2),n}),null);return i.observe(d),t.unbindingManager.registerUnbind(c,function(){i.unbind(d)}),c},t.create_WOrderEntry_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S,C,I,_,M,E,w,A,D,O,k,R,N,L,P,F,x,U,B,W){if(r){var H=document.createElement("div");n.appendChild(H),H.className="cell-tabs__horizontal";var V=document.createElement("button");H.appendChild(V),V.className="cell-tabs__horizontal__tab",V.type="button",InfrontUtil.addEventListener(V,"click",function(e){P(e)});var G=new e.ClassBinding(V,"cell-tabs__horizontal__tab--selected",function(e){return 0==e});I.observe(G,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(V,function(){I.unbind(G)});var z=document.createElement("span");V.appendChild(z),z.innerHTML=W.get("orderEntry","widgetTitle");var q=document.createElement("button");H.appendChild(q),q.className="cell-tabs__horizontal__tab",q.type="button",InfrontUtil.addEventListener(q,"click",function(e){P(e)});var Y=new e.ClassBinding(q,"cell-tabs__horizontal__tab--selected",function(e){return 1==e});I.observe(Y,e.InitialUpdate.Synchronous);var K=new e.ClassBinding(q,"cell-tabs__horizontal__tab--invalid",function(e){return 0==e});b.observe(K,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(q,function(){I.unbind(Y),b.unbind(K)});var X=document.createElement("span");q.appendChild(X),X.innerHTML=W.get("orderEntry","advancedOptions")}var j=document.createElement("div");n.appendChild(j),j.className="cell-w-order-entry-panel",1==r&&InfrontUtil.addClassName(j,"cell-w-order-entry-panel--compact");var Z=new e.ClassBinding(j,"cell-display-none",function(e){return 1==e&&1==r});I.observe(Z,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(j,function(){I.unbind(Z)});var J=document.createElement("div");j.appendChild(J),J.className="cell-row  cell-no-margin-bottom";var Q=document.createElement("div");J.appendChild(Q),Q.className="cell  cell-order-entry-wrapper",1==r&&InfrontUtil.addClassName(Q,"cell-order-entry-wrapper--compact");var $=document.createElement("div");Q.appendChild($),$.className="cell-content  cell-content--raised  cell-clear  cell-order-entry-panel__content",1==r&&InfrontUtil.addClassName($,"cell-order-entry-panel__content--compact");var ee=document.createElement("div");$.appendChild(ee);var te=document.createElement("div");ee.appendChild(te),te.className="cell-w-order-entry__kid";var ne=function(e){return!(""!=e)};ne(a.get())&&InfrontUtil.addClassName(te,"cell-display-none");var ie=new e.ClassBinding(te,"cell-display-none",ne);a.observe(ie,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(te,function(){a.unbind(ie)});var re=document.createElement("a");te.appendChild(re),re.className="cell-w-order-entry__kid__link",re.target="_blank";var ae=e.BindingFactory.createValueBinding(re,"innerHTML");s.observe(ae,e.InitialUpdate.Synchronous);var se=e.BindingFactory.createValueBinding(re,"href");if(a.observe(se),t.unbindingManager.registerUnbind(re,function(){s.unbind(ae),a.unbind(se)}),0==r){var oe=document.createElement("div");ee.appendChild(oe),oe.className="cell-h4";var le=e.BindingFactory.createValueBinding(oe,"innerHTML");i.observe(le,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(oe,function(){i.unbind(le)})}var ce=document.createElement("div");$.appendChild(ce),ce.className="cell-w-order-entry__input-pair";var de=new e.ClassBinding(ce,"cell-w-order-entry-panel__confirm",function(e){return 1==e});C.observe(de,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ce,function(){C.unbind(de)});var ue=document.createElement("label");ce.appendChild(ue),ue.innerHTML=W.get("orderEntry","ticker");var he=document.createElement("div");ue.appendChild(he),he.className="cell-override--trade-search  cell-pull-right  cell-width--100px";var pe=document.createElement("div");$.appendChild(pe),pe.className="cell-w-order-entry__input-pair";var me=new e.ClassBinding(pe,"cell-w-order-entry-panel__confirm",function(e){return 1==e});C.observe(me,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(pe,function(){C.unbind(me)});var ge=document.createElement("label");if(pe.appendChild(ge),ge.innerHTML=W.get("orderEntry","volume"),x){var fe=document.createElement("div");ge.appendChild(fe),fe.className="cell-w-order-entry__tick-button  cell-w-order-entry__tick-button--increase",InfrontUtil.addEventListener(fe,"click",function(e){B(38)}),fe.setAttribute("role","button"),InfrontUtil.addEventListener(fe,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||B(38)})}var ve=document.createElement("input");ge.appendChild(ve),ve.className="cell-input  cell-width--100px  cell-text-right",ve.type="text",InfrontUtil.addEventListener(ve,"click",function(e){F(e)}),InfrontUtil.addEventListener(ve,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||F(e)}),ve.setAttribute("maxlength","20"),ve.setAttribute("number","true"),h.bind(ve);var ye=e.BindingFactory.createValueBinding(ve,"disabled");if(C.observe(ye),t.unbindingManager.registerUnbind(ve,function(){h.unbind(),C.unbind(ye)}),x){var be=document.createElement("div");ge.appendChild(be),be.className="cell-w-order-entry__tick-button  cell-w-order-entry__tick-button--decrease",InfrontUtil.addEventListener(be,"click",function(e){B(40)}),be.setAttribute("role","button"),InfrontUtil.addEventListener(be,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||B(40)})}var Te=document.createElement("div");$.appendChild(Te),Te.className="cell-w-order-entry__input-pair";var Se=new e.ClassBinding(Te,"cell-w-order-entry-panel__confirm",function(e){return 1==e});C.observe(Se,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Te,function(){C.unbind(Se)});var Ce=document.createElement("label");Te.appendChild(Ce),Ce.innerHTML=W.get("orderEntry","price");var Ie=document.createElement("div");Ce.appendChild(Ie),Ie.className="cell-w-order-entry__tick-size-alert",Ie.title=W.get("orderEntry","tickSizeWarning");var _e=function(e){return!(1!=e)};_e(_.get())&&InfrontUtil.addClassName(Ie,"cell-display-none");var Me=new e.ClassBinding(Ie,"cell-display-none",_e);_.observe(Me,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ie,function(){_.unbind(Me)});var Ee=document.createElement("div");Ce.appendChild(Ee),Ee.className="cell-w-order-entry__input-ccy-label  cell-noselect";var we=e.BindingFactory.createValueBinding(Ee,"innerHTML");if(M.observe(we,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ee,function(){M.unbind(we)}),x){var Ae=document.createElement("div");Ce.appendChild(Ae),Ae.className="cell-w-order-entry__tick-button  cell-w-order-entry__tick-button--increase",InfrontUtil.addEventListener(Ae,"click",function(e){U(38)}),Ae.setAttribute("role","button"),InfrontUtil.addEventListener(Ae,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||U(38)})}var De=document.createElement("input");Ce.appendChild(De),De.className="cell-input  cell-width--100px  cell-text-right",De.type="text",InfrontUtil.addEventListener(De,"click",function(e){F(e)}),InfrontUtil.addEventListener(De,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||F(e)}),De.setAttribute("maxlength","20"),p.bind(De);var Oe=e.BindingFactory.createValueBinding(De,"disabled");if(C.observe(Oe),t.unbindingManager.registerUnbind(De,function(){p.unbind(),C.unbind(Oe)}),x){var ke=document.createElement("div");Ce.appendChild(ke),ke.className="cell-w-order-entry__tick-button  cell-w-order-entry__tick-button--decrease",InfrontUtil.addEventListener(ke,"click",function(e){U(40)}),ke.setAttribute("role","button"),InfrontUtil.addEventListener(ke,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||U(40)})}if(!r){var Re=document.createElement("div");$.appendChild(Re),Re.className="cell-w-order-entry__divider";var Ne=document.createElement("div");$.appendChild(Ne),Ne.className="cell-w-order-entry__adv-toggler  cell-noselect",InfrontUtil.addEventListener(Ne,"click",function(e){P(e)}),Ne.setAttribute("role","button"),InfrontUtil.addEventListener(Ne,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||P(e)});var Le=e.BindingFactory.createValueBinding(Ne,"innerHTML");o.observe(Le,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ne,function(){o.unbind(Le)});var Pe=document.createElement("div");$.appendChild(Pe),Pe.className="cell-w-order-entry__divider  cell-no-margin-top"}var Fe=document.createElement("div");$.appendChild(Fe),Fe.className="cell-w-order-entry__status-panel",1==r&&InfrontUtil.addClassName(Fe,"cell-w-order-entry__status-panel--compact");var xe=document.createElement("div");Fe.appendChild(xe),xe.className="cell-w-order-entry__feedback";var Ue=function(t){return!(t==e.OrderEntryState.SUCCESS||t==e.OrderEntryState.ERROR)};Ue(S.get())&&InfrontUtil.addClassName(xe,"cell-display-none");var Be=new e.ClassBinding(xe,"cell-display-none",Ue);S.observe(Be,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(xe,function(){S.unbind(Be)});var We=document.createElement("div");xe.appendChild(We),We.className="cell-w-order-entry__feedback__header",We.innerHTML=W.get("orderEntry","status");var He=document.createElement("div");xe.appendChild(He),He.className="cell-w-order-entry__feedback__body";var Ve=e.BindingFactory.createValueBinding(He,"innerHTML");l.observe(Ve,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(He,function(){l.unbind(Ve)});var Ge=document.createElement("div");xe.appendChild(Ge),Ge.className="cell-w-order-entry__feedback__body";var ze=e.BindingFactory.createValueBinding(Ge,"innerHTML");c.observe(ze,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ge,function(){c.unbind(ze)});var qe=document.createElement("div");Fe.appendChild(qe),qe.className="cell-w-order-entry__order-info";var Ye=function(t){return!(t==e.OrderEntryState.DATA_ENTRY||t==e.OrderEntryState.CONFIRM||t==e.OrderEntryState.MODIFY)};Ye(S.get())&&InfrontUtil.addClassName(qe,"cell-display-none");var Ke=new e.ClassBinding(qe,"cell-display-none",Ye);S.observe(Ke,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(qe,function(){S.unbind(Ke)});var Xe=document.createElement("div");qe.appendChild(Xe),Xe.className="cell-w-order-entry__value-list";var je=new e.ClassBinding(Xe,"cell-w-order-entry-panel__confirm",function(e){return 1==e});C.observe(je,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Xe,function(){C.unbind(je)});var Ze=document.createElement("label");Xe.appendChild(Ze),Ze.innerHTML=W.get("orderEntry","portfolio");var Je=document.createElement("div");Ze.appendChild(Je),Je.className="cell-pull-right";var Qe=document.createElement("div");qe.appendChild(Qe),Qe.className="cell-w-order-entry__value-list";var $e=document.createElement("div");Qe.appendChild($e),$e.className="cell-pull-left",$e.innerHTML=W.get("orderEntry","orderTotal");var et=document.createElement("div");Qe.appendChild(et),et.className="cell-pull-right";var tt=document.createElement("span");et.appendChild(tt),tt.className="cell-3-padding-right  cell-opacity-50";var nt=function(e){return!(null!=e)};nt(f.get())&&InfrontUtil.addClassName(tt,"cell-display-none");var it=new e.ClassBinding(tt,"cell-display-none",nt);f.observe(it,e.InitialUpdate.Synchronous);var rt=e.BindingFactory.createValueBinding(tt,"innerHTML");M.observe(rt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(tt,function(){f.unbind(it),M.unbind(rt)});var at=document.createElement("span");et.appendChild(at);var st=e.BindingFactory.createNumberFormatValueBinding(at,"innerHTML",0,!1);f.observe(st),t.unbindingManager.registerUnbind(at,function(){f.unbind(st)});var ot=document.createElement("div");qe.appendChild(ot),ot.className="cell-w-order-entry__value-list";var lt=document.createElement("div");ot.appendChild(lt),lt.className="cell-pull-left",lt.innerHTML=W.get("orderEntry","owned");var ct=document.createElement("div");ot.appendChild(ct),ct.className="cell-pull-right";var dt=e.BindingFactory.createNumberFormatValueBinding(ct,"innerHTML",0,!1);v.observe(dt),t.unbindingManager.registerUnbind(ct,function(){v.unbind(dt)});var ut=document.createElement("div");qe.appendChild(ut),ut.className="cell-w-order-entry__value-list";var ht=document.createElement("div");ut.appendChild(ht),ht.className="cell-pull-left",ht.innerHTML=W.get("orderEntry","tradingPower");var pt=document.createElement("div");ut.appendChild(pt),pt.className="cell-pull-right";var mt=document.createElement("span");pt.appendChild(mt),mt.className="cell-3-padding-right  cell-opacity-50";var gt=e.BindingFactory.createValueBinding(mt,"innerHTML");M.observe(gt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(mt,function(){M.unbind(gt)});var ft=document.createElement("span");pt.appendChild(ft);var vt=e.BindingFactory.createNumberFormatValueBinding(ft,"innerHTML",0,!1);y.observe(vt),t.unbindingManager.registerUnbind(ft,function(){y.unbind(vt)});var yt=document.createElement("div");$.appendChild(yt),yt.className="cell-w-order-entry__divider";var bt=document.createElement("div");$.appendChild(bt),bt.className="cell-row  cell-10-margin-top  cell-w-order-entry__button-row",1==r&&InfrontUtil.addClassName(bt,"cell-w-order-entry__button-row--compact");var Tt=document.createElement("div");bt.appendChild(Tt),Tt.className="cell-trading-button-well  cell-trading-button-well--buy";var St=function(t){return!(t==e.OrderEntryState.DATA_ENTRY)};St(S.get())&&InfrontUtil.addClassName(Tt,"cell-display-none");var Ct=new e.ClassBinding(Tt,"cell-display-none",St);S.observe(Ct,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Tt,function(){S.unbind(Ct)});var It=document.createElement("button");Tt.appendChild(It),It.className="cell-button  cell-button--positive  cell-button-custom--buy",InfrontUtil.addEventListener(It,"click",function(e){w(e)}),It.innerHTML=W.get("orderEntry","buy");var _t=e.BindingFactory.createValueBinding(It,"disabled");T.observe(_t);var Mt=new e.ClassBinding(It,"cell-button--disabled",function(e){return 1==e});T.observe(Mt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(It,function(){T.unbind(_t),T.unbind(Mt)});var Et=document.createElement("div");bt.appendChild(Et),Et.className="cell-trading-button-well  cell-trading-button-well--sell  cell-pull-right";var wt=function(t){return!(t==e.OrderEntryState.DATA_ENTRY)};wt(S.get())&&InfrontUtil.addClassName(Et,"cell-display-none");var At=new e.ClassBinding(Et,"cell-display-none",wt);S.observe(At,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Et,function(){S.unbind(At)});var Dt=document.createElement("button");Et.appendChild(Dt),Dt.className="cell-button  cell-button--negative  cell-button-custom--sell",InfrontUtil.addEventListener(Dt,"click",function(e){A(e)}),Dt.innerHTML=W.get("orderEntry","sell");var Ot=e.BindingFactory.createValueBinding(Dt,"disabled");T.observe(Ot);var kt=new e.ClassBinding(Dt,"cell-button--disabled",function(e){return 1==e});T.observe(kt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Dt,function(){T.unbind(Ot),T.unbind(kt)});var Rt=document.createElement("div");bt.appendChild(Rt),Rt.className="cell-trading-button-well  cell-trading-button-well--confirm";var Nt=function(t){return!(t==e.OrderEntryState.CONFIRM)};Nt(S.get())&&InfrontUtil.addClassName(Rt,"cell-display-none");var Lt=new e.ClassBinding(Rt,"cell-display-none",Nt);S.observe(Lt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Rt,function(){S.unbind(Lt)});var Pt=document.createElement("button");Rt.appendChild(Pt),Pt.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(Pt,"click",function(e){D(e)}),Pt.innerHTML=W.get("orderEntry","confirm");var Ft=document.createElement("div");bt.appendChild(Ft),Ft.className="cell-trading-button-well  cell-trading-button-well--cancel  cell-pull-right";var xt=function(t){return!(t==e.OrderEntryState.CONFIRM)};xt(S.get())&&InfrontUtil.addClassName(Ft,"cell-display-none");var Ut=new e.ClassBinding(Ft,"cell-display-none",xt);S.observe(Ut,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ft,function(){S.unbind(Ut)});var Bt=document.createElement("button");Ft.appendChild(Bt),Bt.className="cell-button  cell-button--cancel",InfrontUtil.addEventListener(Bt,"click",function(e){O(e)}),Bt.innerHTML=W.get("orderEntry","cancel");var Wt=document.createElement("div");bt.appendChild(Wt),Wt.className="cell-trading-button-well  cell-trading-button-well--modify";var Ht=function(t){return!(t==e.OrderEntryState.MODIFY)};Ht(S.get())&&InfrontUtil.addClassName(Wt,"cell-display-none");var Vt=new e.ClassBinding(Wt,"cell-display-none",Ht);S.observe(Vt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Wt,function(){S.unbind(Vt)});var Gt=document.createElement("button");Wt.appendChild(Gt),Gt.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(Gt,"click",function(e){k(e)}),Gt.innerHTML=W.get("orderEntry","modify");var zt=e.BindingFactory.createValueBinding(Gt,"disabled");T.observe(zt);var qt=new e.ClassBinding(Gt,"cell-button--disabled",function(e){return 1==e});T.observe(qt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Gt,function(){T.unbind(zt),T.unbind(qt)});var Yt=document.createElement("div");bt.appendChild(Yt),Yt.className="cell-trading-button-well  cell-trading-button-well--delete  cell-pull-right";var Kt=function(t){return!(t==e.OrderEntryState.MODIFY)};Kt(S.get())&&InfrontUtil.addClassName(Yt,"cell-display-none");var Xt=new e.ClassBinding(Yt,"cell-display-none",Kt);S.observe(Xt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Yt,function(){S.unbind(Xt)});var jt=document.createElement("button");Yt.appendChild(jt),jt.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(jt,"click",function(e){R(e)}),jt.innerHTML=W.get("orderEntry","delete");var Zt=document.createElement("div");bt.appendChild(Zt),Zt.className="cell-trading-button-well  cell-trading-button-well--new";var Jt=function(t){return!(t==e.OrderEntryState.SUCCESS||t==e.OrderEntryState.ERROR)};Jt(S.get())&&InfrontUtil.addClassName(Zt,"cell-display-none");var Qt=new e.ClassBinding(Zt,"cell-display-none",Jt);S.observe(Qt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Zt,function(){S.unbind(Qt)});var $t=document.createElement("button");Zt.appendChild($t),$t.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener($t,"click",function(e){N(e)}),$t.innerHTML=W.get("orderEntry","new");var en=document.createElement("div");bt.appendChild(en),en.className="cell-trading-button-well  cell-trading-button-well--close  cell-pull-right";var tn=function(t){return!(t==e.OrderEntryState.SUCCESS||t==e.OrderEntryState.ERROR)};tn(S.get())&&InfrontUtil.addClassName(en,"cell-display-none");var nn=new e.ClassBinding(en,"cell-display-none",tn);S.observe(nn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(en,function(){S.unbind(nn)});var rn=document.createElement("button");en.appendChild(rn),rn.className="cell-button  cell-button--neutral",InfrontUtil.addEventListener(rn,"click",function(e){L(e)}),rn.innerHTML=W.get("orderEntry","close");var an=document.createElement("div");n.appendChild(an),an.className="cell-w-order-entry-panel cell-w-order-entry-panel__advanced",1==r&&InfrontUtil.addClassName(an,"cell-w-order-entry-panel__advanced--compact");var sn=new e.ClassBinding(an,"cell-w-order-entry-panel__advanced--show",function(e){return 1==e&&0==r});I.observe(sn,e.InitialUpdate.Synchronous);var on=new e.ClassBinding(an,"cell-w-order-entry-panel__advanced--compact--show",function(e){return 1==e&&1==r});I.observe(on,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(an,function(){I.unbind(sn),I.unbind(on)});var ln=document.createElement("div");an.appendChild(ln),ln.className="cell-row  cell-no-margin-bottom";var cn=document.createElement("div");ln.appendChild(cn),cn.className="cell  cell-order-entry-wrapper",1==r&&InfrontUtil.addClassName(cn,"cell-order-entry-wrapper--compact");var dn=document.createElement("div");cn.appendChild(dn),dn.className="cell-content  cell-content--raised  cell-clear  cell-order-entry-panel__content  cell-order-entry-panel__content--advanced",1==r&&InfrontUtil.addClassName(dn,"cell-order-entry-panel__content--compact");var un=document.createElement("div");dn.appendChild(un);var hn=document.createElement("div");if(un.appendChild(hn),0==r){var pn=document.createElement("div");hn.appendChild(pn),pn.className="cell-h4",pn.innerHTML=W.get("orderEntry","advancedOptions")}var mn=document.createElement("div");hn.appendChild(mn),mn.className="cell-w-order-entry__input-pair";var gn=new e.ClassBinding(mn,"cell-w-order-entry-panel__confirm",function(e){return 1==e});C.observe(gn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(mn,function(){C.unbind(gn)});var fn=document.createElement("label");mn.appendChild(fn),fn.innerHTML=W.get("orderEntry","type");var vn=document.createElement("div");fn.appendChild(vn),vn.className="cell-pull-right",InfrontUtil.addEventListener(vn,"click",function(e){F(e)}),vn.setAttribute("role","button"),InfrontUtil.addEventListener(vn,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||F(e)});var yn=document.createElement("div");hn.appendChild(yn),yn.className="cell-w-order-entry__input-pair";var bn=new e.ClassBinding(yn,"cell-w-order-entry-panel__confirm",function(e){return 1==e});C.observe(bn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(yn,function(){C.unbind(bn)});var Tn=document.createElement("label");yn.appendChild(Tn),Tn.innerHTML=W.get("orderEntry","strategyType");var Sn=document.createElement("div");Tn.appendChild(Sn),Sn.className="cell-pull-right",InfrontUtil.addEventListener(Sn,"click",function(e){F(e)}),Sn.setAttribute("role","button"),InfrontUtil.addEventListener(Sn,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||F(e)});var Cn=document.createElement("div");hn.appendChild(Cn);var In=document.createElement("div");Cn.appendChild(In);var _n=document.createElement("div");Cn.appendChild(_n);var Mn=document.createElement("div");return Cn.appendChild(Mn),{searchBoxElement:he,portfolioElement:Je,algoWidgetElement:In,customFieldsWidgetElement:_n,orderTypesElement:vn,algoTypesElement:Sn,volumeInput:ve,priceInput:De,advancedPanelElement:hn,commentFieldElement:Mn}},t.create_WOrderEntry_Select_DOM=function(n,i,r,a,s,o){if(1==o){(u=document.createElement("select")).className="cell-input cell-width--100px",u.setAttribute("tabindex","-1"),r.bind(u);var l=e.BindingFactory.createValueBinding(u,"disabled");s.observe(l);var c=function(e,t){var n=document.createElement("option");return n.innerHTML=e[i],n},d=new e.ArrayBinding(u,new e.InlineRowFactory(c),null);n.observe(d),t.unbindingManager.registerUnbind(u,function(){r.unbind(),s.unbind(l),n.unbind(d)})}if(0==o){var u;(u=document.createElement("select")).className="cell-input cell-width--100px",r.bind(u);var h=e.BindingFactory.createValueBinding(u,"disabled");s.observe(h),c=function(e,t){var n=document.createElement("option");return n.innerHTML=e[i],n};var p=new e.ArrayBinding(u,new e.InlineRowFactory(c),null);n.observe(p),t.unbindingManager.registerUnbind(u,function(){r.unbind(),s.unbind(h),n.unbind(p)})}return u},t.create_WOrderEntry_LimitOrder_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y){var b=document.createElement("div"),T=document.createElement("div");b.appendChild(T),T.className="cell-w-order-entry__input-pair";var S=new e.ClassBinding(T,"cell-w-order-entry-panel__confirm",function(e){return 1==e});p.observe(S,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){p.unbind(S)});var C=document.createElement("label");T.appendChild(C),C.innerHTML=y.get("orderEntry","validity");var I=document.createElement("select");C.appendChild(I),I.className="cell-input  cell-width--100px",InfrontUtil.addEventListener(I,"click",function(e){f(e)}),InfrontUtil.addEventListener(I,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||f(e)}),r.bind(I);var _=new e.ArrayBinding(I,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);i.observe(_),t.unbindingManager.registerUnbind(I,function(){r.unbind(),i.unbind(_)});var M=document.createElement("div");b.appendChild(M),M.className="cell-w-order-entry__input-pair";var E=new e.ClassBinding(M,"cell-w-order-entry-panel__confirm",function(e){return 1==e});p.observe(E,e.InitialUpdate.Synchronous);var w=function(e){return!(1==e)};w(a.get())&&InfrontUtil.addClassName(M,"cell-display-none");var A=new e.ClassBinding(M,"cell-display-none",w);a.observe(A,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(M,function(){p.unbind(E),a.unbind(A)});var D=document.createElement("label");M.appendChild(D),D.innerHTML=y.get("orderEntry","validityDate");var O=document.createElement("div");D.appendChild(O),O.className="cell-pull-right  cell-width--100px";var k=document.createElement("div");b.appendChild(k),k.className="cell-w-order-entry__input-pair";var R=new e.ClassBinding(k,"cell-w-order-entry-panel__confirm",function(e){return 1==e});p.observe(R,e.InitialUpdate.Synchronous);var N=function(e){return!(1==e)};N(s.get())&&InfrontUtil.addClassName(k,"cell-display-none");var L=new e.ClassBinding(k,"cell-display-none",N);s.observe(L,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(k,function(){p.unbind(R),s.unbind(L)});var P=document.createElement("label");k.appendChild(P),P.innerHTML=y.get("orderEntry","validityTime");var F=document.createElement("div");P.appendChild(F),F.className="cell-pull-right  cell-width--100px";var x=document.createElement("div");b.appendChild(x),x.className="cell-w-order-entry__input-pair";var U=new e.ClassBinding(x,"cell-w-order-entry-panel__confirm",function(e){return 1==e});p.observe(U,e.InitialUpdate.Synchronous);var B=function(e){return!(1==e)};B(c.get())&&InfrontUtil.addClassName(x,"cell-display-none");var W=new e.ClassBinding(x,"cell-display-none",B);c.observe(W,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(x,function(){p.unbind(U),c.unbind(W)});var H=document.createElement("label");x.appendChild(H),H.innerHTML=y.get("orderEntry","active");var V=document.createElement("input");H.appendChild(V),V.className="cell-pull-right",V.type="checkbox",V.checked="checked",InfrontUtil.addEventListener(V,"click",function(e){f(e)}),InfrontUtil.addEventListener(V,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||f(e)}),l.bind(V);var G=e.BindingFactory.createValueBinding(V,"disabled");p.observe(G),t.unbindingManager.registerUnbind(V,function(){l.unbind(),p.unbind(G)});var z=document.createElement("div");b.appendChild(z),z.className="cell-w-order-entry__input-pair";var q=new e.ClassBinding(z,"cell-w-order-entry-panel__confirm",function(e){return 1==e});p.observe(q,e.InitialUpdate.Synchronous);var Y=function(e){return!(1==e)};Y(d.get())&&InfrontUtil.addClassName(z,"cell-display-none");var K=new e.ClassBinding(z,"cell-display-none",Y);d.observe(K,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(z,function(){p.unbind(q),d.unbind(K)});var X=document.createElement("label");z.appendChild(X),X.innerHTML=y.get("orderEntry","active");var j=document.createElement("button");X.appendChild(j),j.className="cell-pull-right  cell-width--100px  cell-button  cell-button--confirm  cell-button--activate  cell-button--inline",InfrontUtil.addEventListener(j,"click",function(e){v(e)});var Z=e.BindingFactory.createValueBinding(j,"innerHTML");u.observe(Z,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(j,function(){u.unbind(Z)});var J=document.createElement("div");b.appendChild(J),J.className="cell-w-order-entry__input-pair";var Q=new e.ClassBinding(J,"cell-w-order-entry-panel__confirm",function(e){return 1==e});p.observe(Q,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(J,function(){p.unbind(Q)});var $=document.createElement("label");J.appendChild($),$.innerHTML=y.get("orderEntry","openVolume");var ee=document.createElement("div");$.appendChild(ee),ee.className="cell-w-order-entry__tick-size-alert";var te=e.BindingFactory.createValueBinding(ee,"title");g.observe(te);var ne=function(e){return!(1!=e)};ne(m.get())&&InfrontUtil.addClassName(ee,"cell-display-none");var ie=new e.ClassBinding(ee,"cell-display-none",ne);m.observe(ie,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ee,function(){g.unbind(te),m.unbind(ie)});var re=document.createElement("input");$.appendChild(re),re.className="cell-input  cell-width--100px",re.type="text",InfrontUtil.addEventListener(re,"click",function(e){f(e)}),InfrontUtil.addEventListener(re,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||f(e)}),o.bind(re);var ae=e.BindingFactory.createValueBinding(re,"disabled");return p.observe(ae),t.unbindingManager.registerUnbind(re,function(){o.unbind(),p.unbind(ae)}),{root:b,dateSelector:O,timeSelector:F}},t.create_WOrderEntry_Comment_DOM=function(n,i,r,a){var s=document.createElement("div");s.className="cell-w-order-entry__input-pair";var o=new e.ClassBinding(s,"cell-w-order-entry-panel__confirm",function(e){return 1==e});i.observe(o,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){i.unbind(o)});var l=document.createElement("label");s.appendChild(l),l.className="cell-label",l.innerHTML=a.get("orderEntry","comment");var c=document.createElement("textarea");l.appendChild(c),c.className="cell-input",c.type="text",InfrontUtil.addEventListener(c,"click",function(e){r(e)}),InfrontUtil.addEventListener(c,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r(e)}),n.bind(c);var d=e.BindingFactory.createValueBinding(c,"disabled");return i.observe(d),t.unbindingManager.registerUnbind(c,function(){n.unbind(),i.unbind(d)}),s},t.create_WOrderEntryAlgo_DOM=function(n,i,r){var a=document.createElement("div");n.appendChild(a);var s=document.createElement("div");n.appendChild(s),s.className="cell-w-order-entry-algo__algo-name";var o=e.BindingFactory.createValueBinding(s,"innerHTML");i.observe(o,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){i.unbind(o)});var l=document.createElement("div");n.appendChild(l),l.className="cell-w-order-entry-algo__algo-desc";var c=e.BindingFactory.createValueBinding(l,"innerHTML");return r.observe(c,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(l,function(){r.unbind(c)}),a},t.create_WOrderEntryAlgo_Input_DOM=function(n,i,r,a,s){var o=document.createElement("div");o.className="cell-w-order-entry__input-pair";var l=new e.ClassBinding(o,"cell-w-order-entry-panel__confirm",function(e){return 1==e});a.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){a.unbind(l)});var c=document.createElement("label");o.appendChild(c),c.className="cell-label",c.innerHTML=i;var d=document.createElement("input");c.appendChild(d),d.className="cell-input cell-width--100px cell-pull-right",d.type="text",InfrontUtil.addEventListener(d,"click",function(e){s(e)}),InfrontUtil.addEventListener(d,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s(e)}),n.bind(d);var u=e.BindingFactory.createValueBinding(d,"disabled");return r.observe(u),t.unbindingManager.registerUnbind(d,function(){n.unbind(),r.unbind(u)}),o},t.create_WOrderEntryAlgo_TextArea_DOM=function(n,i,r,a,s){var o=document.createElement("div");o.className="cell-w-order-entry__input-pair";var l=new e.ClassBinding(o,"cell-w-order-entry-panel__confirm",function(e){return 1==e});a.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){a.unbind(l)});var c=document.createElement("label");o.appendChild(c),c.className="cell-label",c.innerHTML=i;var d=document.createElement("textarea");c.appendChild(d),d.className="cell-input",d.type="text",InfrontUtil.addEventListener(d,"click",function(e){s(e)}),InfrontUtil.addEventListener(d,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s(e)}),n.bind(d);var u=e.BindingFactory.createValueBinding(d,"disabled");return r.observe(u),t.unbindingManager.registerUnbind(d,function(){n.unbind(),r.unbind(u)}),o},t.create_WOrderEntryAlgo_Select_DOM=function(n,i,r,a,s,o){var l=document.createElement("div");l.className="cell-w-order-entry__input-pair";var c=new e.ClassBinding(l,"cell-w-order-entry-panel__confirm",function(e){return 1==e});s.observe(c,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(l,function(){s.unbind(c)});var d=document.createElement("label");l.appendChild(d),d.className="cell-label",d.innerHTML=r;var u=document.createElement("select");d.appendChild(u),u.className="cell-input cell-input--100px cell-pull-right",InfrontUtil.addEventListener(u,"click",function(e){o(e)}),InfrontUtil.addEventListener(u,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(e)}),i.bind(u);var h=e.BindingFactory.createValueBinding(u,"disabled");a.observe(h);var p=new e.ArrayBinding(u,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);return n.observe(p),t.unbindingManager.registerUnbind(u,function(){i.unbind(),a.unbind(h),n.unbind(p)}),l},t.create_WOrderEntryAlgo_Calendar_DOM=function(n,i){var r=document.createElement("div");r.className="cell-w-order-entry__input-pair";var a=new e.ClassBinding(r,"cell-w-order-entry-panel__confirm",function(e){return 1==e});i.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a)});var s=document.createElement("label");r.appendChild(s),s.className="cell-label",s.innerHTML=n;var o=document.createElement("div");return s.appendChild(o),o.className="cell-pull-right  cell-width--100px",{root:r,dateSelector:o}},t.create_WOrderEntryAlgo_Time_DOM=function(n,i){var r=document.createElement("div");r.className="cell-w-order-entry__input-pair";var a=new e.ClassBinding(r,"cell-w-order-entry-panel__confirm",function(e){return 1==e});i.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a)});var s=document.createElement("label");r.appendChild(s),s.className="cell-label",s.innerHTML=n;var o=document.createElement("div");return s.appendChild(o),o.className="cell-pull-right  cell-width--100px",{root:r,timeSelector:o}},t.create_WOrderEntryCustomFields_DOM=function(e){var t=document.createElement("div");return e.appendChild(t),t},t.create_WOrderEntryCustomFields_Input_DOM=function(n,i,r,a,s){var o=document.createElement("div");o.className="cell-w-order-entry__input-pair";var l=new e.ClassBinding(o,"cell-w-order-entry-panel__confirm",function(e){return 1==e});a.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){a.unbind(l)});var c=document.createElement("label");o.appendChild(c),c.className="cell-label",c.innerHTML=i;var d=document.createElement("input");c.appendChild(d),d.className="cell-input cell-width--100px cell-pull-right",d.type="text",InfrontUtil.addEventListener(d,"click",function(e){s(e)}),InfrontUtil.addEventListener(d,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s(e)}),n.bind(d);var u=e.BindingFactory.createValueBinding(d,"disabled");return r.observe(u),t.unbindingManager.registerUnbind(d,function(){n.unbind(),r.unbind(u)}),o},t.create_WOrderEntryCustomFields_TextArea_DOM=function(n,i,r,a,s){var o=document.createElement("div");o.className="cell-w-order-entry__input-pair";var l=new e.ClassBinding(o,"cell-w-order-entry-panel__confirm",function(e){return 1==e});a.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){a.unbind(l)});var c=document.createElement("label");o.appendChild(c),c.className="cell-label",c.innerHTML=i;var d=document.createElement("textarea");c.appendChild(d),d.className="cell-input",d.type="text",InfrontUtil.addEventListener(d,"click",function(e){s(e)}),InfrontUtil.addEventListener(d,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s(e)}),n.bind(d);var u=e.BindingFactory.createValueBinding(d,"disabled");return r.observe(u),t.unbindingManager.registerUnbind(d,function(){n.unbind(),r.unbind(u)}),o},t.create_WOrderEntryCustomFields_Select_DOM=function(n,i,r,a,s,o){var l=document.createElement("div");l.className="cell-w-order-entry__input-pair";var c=new e.ClassBinding(l,"cell-w-order-entry-panel__confirm",function(e){return 1==e});s.observe(c,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(l,function(){s.unbind(c)});var d=document.createElement("label");l.appendChild(d),d.className="cell-label",d.innerHTML=r;var u=document.createElement("select");d.appendChild(u),u.className="cell-input cell-input--100px cell-pull-right",InfrontUtil.addEventListener(u,"click",function(e){o(e)}),InfrontUtil.addEventListener(u,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(e)}),i.bind(u);var h=e.BindingFactory.createValueBinding(u,"disabled");a.observe(h);var p=new e.ArrayBinding(u,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);return n.observe(p),t.unbindingManager.registerUnbind(u,function(){i.unbind(),a.unbind(h),n.unbind(p)}),l},t.create_WOrderEntryCustomFields_Calendar_DOM=function(n,i){var r=document.createElement("div");r.className="cell-w-order-entry__input-pair";var a=new e.ClassBinding(r,"cell-w-order-entry-panel__confirm",function(e){return 1==e});i.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a)});var s=document.createElement("label");r.appendChild(s),s.className="cell-label",s.innerHTML=n;var o=document.createElement("div");return s.appendChild(o),o.className="cell-pull-right  cell-width--100px",{root:r,dateSelector:o}},t.create_WOrderEntryHoriz_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S,C,I,_,M,E,w,A,D,O,k,R,N,L,P,F,x,U,B,W,H,V,G,z,q){var Y=document.createElement("div");n.appendChild(Y),Y.className="cell-h4";var K=document.createElement("span");Y.appendChild(K),K.innerHTML=q.get("orderEntry","widgetTitle"),Y.appendChild(document.createTextNode(", "));var X=document.createElement("span");Y.appendChild(X),X.innerHTML=q.get("orderEntry","portfolio"),Y.appendChild(document.createTextNode(" "));var j=document.createElement("span");Y.appendChild(j);var Z=e.BindingFactory.createObjectFieldBinding(j,["name"],"innerHTML");s.observe(Z,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(j,function(){s.unbind(Z)});var J=document.createElement("div");n.appendChild(J),J.className="cell-row  cell-w-trading-1__top-row";var Q=document.createElement("div");J.appendChild(Q),Q.className="cell  cell--w4  cell-text-left";var $=document.createElement("span");Q.appendChild($),$.innerHTML=q.get("orderEntry","tradingPower"),Q.appendChild(document.createTextNode(": "));var ee=document.createElement("span");Q.appendChild(ee);var te=e.BindingFactory.createNumberFormatValueBinding(ee,"innerHTML",0,!1);o.observe(te),t.unbindingManager.registerUnbind(ee,function(){o.unbind(te)});var ne=document.createElement("div");J.appendChild(ne),ne.className="cell  cell--w4  cell-text-center";var ie=document.createElement("span");ne.appendChild(ie),ie.innerHTML=q.get("orderEntry","owned"),ne.appendChild(document.createTextNode(": "));var re=document.createElement("span");ne.appendChild(re);var ae=e.BindingFactory.createNumberFormatValueBinding(re,"innerHTML",0,!1);l.observe(ae),t.unbindingManager.registerUnbind(re,function(){l.unbind(ae)});var se=document.createElement("div");J.appendChild(se),se.className="cell  cell--w4  cell-text-right";var oe=document.createElement("span");se.appendChild(oe),oe.innerHTML=q.get("orderEntry","orderTotal"),se.appendChild(document.createTextNode(": "));var le=document.createElement("span");se.appendChild(le),le.className="cell-strong";var ce=e.BindingFactory.createNumberFormatValueBinding(le,"innerHTML",i,!1);c.observe(ce),t.unbindingManager.registerUnbind(le,function(){c.unbind(ce)});var de=document.createElement("div");n.appendChild(de),de.className="cell-order-entry__step-1";var ue=new e.ClassBinding(de,"cell-display-none",function(e){return 1!=e});a.observe(ue,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(de,function(){a.unbind(ue)});var he=document.createElement("div");de.appendChild(he),he.className="cell-row  cell-w-trading-1__mid-row";var pe=document.createElement("div");he.appendChild(pe),pe.className="cell  cell--w3";var me=document.createElement("span");pe.appendChild(me),me.className="cell-label",me.innerHTML=q.get("orderEntry","ticker");var ge=document.createElement("span");pe.appendChild(ge),ge.appendChild(document.createTextNode(":"));var fe=document.createElement("br");pe.appendChild(fe);var ve=document.createElement("div");pe.appendChild(ve),ve.className="cell-override--trade-search";var ye=document.createElement("div");he.appendChild(ye),ye.className="cell  cell--w3";var be=document.createElement("span");ye.appendChild(be),be.className="cell-label",be.innerHTML=q.get("orderEntry","volume");var Te=document.createElement("span");ye.appendChild(Te),Te.appendChild(document.createTextNode(":"));var Se=document.createElement("br");ye.appendChild(Se);var Ce=document.createElement("input");ye.appendChild(Ce),Ce.className="cell-input  cell-input--80pct",Ce.type="text",F.bind(Ce),t.unbindingManager.registerUnbind(Ce,function(){return F.unbind()});var Ie=document.createElement("div");he.appendChild(Ie),Ie.className="cell  cell--w3";var _e=document.createElement("span");Ie.appendChild(_e),_e.className="cell-label",_e.innerHTML=q.get("orderEntry","price");var Me=document.createElement("span");Ie.appendChild(Me),Me.appendChild(document.createTextNode(":"));var Ee=document.createElement("br");Ie.appendChild(Ee);var we=document.createElement("input");Ie.appendChild(we),we.className="cell-input  cell-input--80pct",we.type="text",P.bind(we),t.unbindingManager.registerUnbind(we,function(){return P.unbind()});var Ae=document.createElement("div");he.appendChild(Ae),Ae.className="cell  cell--w3";var De=document.createElement("span");Ae.appendChild(De),De.className="cell-label",De.innerHTML=q.get("orderEntry","validity");var Oe=document.createElement("span");Ae.appendChild(Oe),Oe.appendChild(document.createTextNode(":"));var ke=document.createElement("br");Ae.appendChild(ke);var Re=document.createElement("div");Ae.appendChild(Re);var Ne=document.createElement("div");de.appendChild(Ne),Ne.className="cell-w-trading-1__bottom-row";var Le=document.createElement("div");Ne.appendChild(Le),Le.className="cell  cell--w12";var Pe=document.createElement("div");Le.appendChild(Pe),Pe.className="cell-trading-button-well  cell-trading-button-well--buy";var Fe=function(e){return!(0==e)};Fe(r.get())&&InfrontUtil.addClassName(Pe,"cell-display-none");var xe=new e.ClassBinding(Pe,"cell-display-none",Fe);r.observe(xe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Pe,function(){r.unbind(xe)});var Ue=document.createElement("button");Pe.appendChild(Ue),Ue.className="cell-button  cell-button--positive  cell-button-custom--buy",InfrontUtil.addEventListener(Ue,"click",function(e){x(e)}),Ue.innerHTML=q.get("orderEntry","buy");var Be=e.BindingFactory.createValueBinding(Ue,"disabled");N.observe(Be);var We=new e.ClassBinding(Ue,"cell-button--disabled",function(e){return 1==e});N.observe(We,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ue,function(){N.unbind(Be),N.unbind(We)});var He=document.createElement("div");Le.appendChild(He),He.className="cell-trading-button-well  cell-trading-button-well--sell";var Ve=function(e){return!(0==e)};Ve(r.get())&&InfrontUtil.addClassName(He,"cell-display-none");var Ge=new e.ClassBinding(He,"cell-display-none",Ve);r.observe(Ge,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(He,function(){r.unbind(Ge)});var ze=document.createElement("button");He.appendChild(ze),ze.className="cell-button  cell-button--negative  cell-button-custom--sell  cell-10-margin-left",InfrontUtil.addEventListener(ze,"click",function(e){U(e)}),ze.innerHTML=q.get("orderEntry","sell");var qe=e.BindingFactory.createValueBinding(ze,"disabled");N.observe(qe);var Ye=new e.ClassBinding(ze,"cell-button--disabled",function(e){return 1==e});N.observe(Ye,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ze,function(){N.unbind(qe),N.unbind(Ye)});var Ke=document.createElement("div");Le.appendChild(Ke),Ke.className="cell-trading-button-well";var Xe=function(e){return!(1==e)};Xe(r.get())&&InfrontUtil.addClassName(Ke,"cell-display-none");var je=new e.ClassBinding(Ke,"cell-display-none",Xe);r.observe(je,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ke,function(){r.unbind(je)});var Ze=document.createElement("button");Ke.appendChild(Ze),Ze.className="cell-button  cell-button--positive  cell-button-custom--buy",InfrontUtil.addEventListener(Ze,"click",function(e){G(e)}),Ze.innerHTML=q.get("orderEntry","modify");var Je=document.createElement("div");Le.appendChild(Je),Je.className="cell-trading-button-well";var Qe=function(e){return!(1==e)};Qe(r.get())&&InfrontUtil.addClassName(Je,"cell-display-none");var $e=new e.ClassBinding(Je,"cell-display-none",Qe);r.observe($e,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Je,function(){r.unbind($e)});var et=document.createElement("button");Je.appendChild(et),et.className="cell-button  cell-button--cancel  cell-10-margin-left",InfrontUtil.addEventListener(et,"click",function(e){z(e)}),et.innerHTML=q.get("orderEntry","cancel");var tt=document.createElement("div");n.appendChild(tt),tt.className="cell-order-entry__step-2";var nt=new e.ClassBinding(tt,"cell-display-none",function(e){return 2!=e});a.observe(nt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(tt,function(){a.unbind(nt)});var it=document.createElement("div");tt.appendChild(it),it.className="cell-row  cell-w-trading-1__confirm-top-row  cell-w-trading-1__confirm-top-row--pending";var rt=document.createElement("div");it.appendChild(rt),rt.className="cell  cell--w12";var at=document.createElement("div");rt.appendChild(at),at.className="cell-w-trading-1__confirm-msg";var st=document.createElement("span");at.appendChild(st),st.innerHTML=q.get("messages","insertOrderWarning");var ot=document.createElement("span");at.appendChild(ot),ot.appendChild(document.createTextNode(" "));var lt=document.createElement("span");at.appendChild(lt);var ct=e.BindingFactory.createValueBinding(lt,"innerHTML");d.observe(ct,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(lt,function(){d.unbind(ct)});var dt=document.createElement("div");tt.appendChild(dt),dt.className="cell-row  cell-w-trading-1__confirm-mid-row";var ut=document.createElement("div");dt.appendChild(ut),ut.className="cell  cell--w6";var ht=document.createElement("table");ut.appendChild(ht),ht.className="cell-table  cell-w-trading-1__confirm-details-table2";var pt=document.createElement("tr");ht.appendChild(pt);var mt=function(t){return!(t==e.AdvancedOrderType.NORMAL)};mt(g.get())&&InfrontUtil.addClassName(pt,"cell-display-none");var gt=new e.ClassBinding(pt,"cell-display-none",mt);g.observe(gt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(pt,function(){g.unbind(gt)});var ft=document.createElement("td");pt.appendChild(ft),ft.innerHTML=q.get("orderEntryAdvanced","openVolume");var vt=document.createElement("td");pt.appendChild(vt),vt.className="cell-text-right";var yt=e.BindingFactory.createNumberFormatValueBinding(vt,"innerHTML",0,!1);f.observe(yt),t.unbindingManager.registerUnbind(vt,function(){f.unbind(yt)});var bt=document.createElement("tr");ht.appendChild(bt);var Tt=function(t){return!(t==e.AdvancedOrderType.NORMAL)};Tt(g.get())&&InfrontUtil.addClassName(bt,"cell-display-none");var St=new e.ClassBinding(bt,"cell-display-none",Tt);g.observe(St,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(bt,function(){g.unbind(St)});var Ct=document.createElement("td");bt.appendChild(Ct),Ct.innerHTML=q.get("orderEntry","validity");var It=document.createElement("td");bt.appendChild(It),It.className="cell-text-right";var _t=e.BindingFactory.createValueBinding(It,"innerHTML");m.observe(_t,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(It,function(){m.unbind(_t)});var Mt=document.createElement("tr");ht.appendChild(Mt);var Et=function(t){return!(t==e.AdvancedOrderType.STOP_LOSS)};Et(g.get())&&InfrontUtil.addClassName(Mt,"cell-display-none");var wt=new e.ClassBinding(Mt,"cell-display-none",Et);g.observe(wt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Mt,function(){g.unbind(wt)});var At=document.createElement("td");Mt.appendChild(At),At.innerHTML=q.get("orderEntryAdvanced","triggerPrice");var Dt=document.createElement("td");Mt.appendChild(Dt),Dt.className="cell-text-right";var Ot=e.BindingFactory.createNumberFormatValueBinding(Dt,"innerHTML",i,!1);v.observe(Ot),t.unbindingManager.registerUnbind(Dt,function(){v.unbind(Ot)});var kt=document.createElement("tr");ht.appendChild(kt);var Rt=function(t){return!(t==e.AdvancedOrderType.STOP_LOSS)};Rt(g.get())&&InfrontUtil.addClassName(kt,"cell-display-none");var Nt=new e.ClassBinding(kt,"cell-display-none",Rt);g.observe(Nt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(kt,function(){g.unbind(Nt)});var Lt=document.createElement("td");kt.appendChild(Lt),Lt.innerHTML=q.get("orderEntryAdvanced","limitPrice");var Pt=document.createElement("td");kt.appendChild(Pt),Pt.className="cell-text-right";var Ft=e.BindingFactory.createNumberFormatValueBinding(Pt,"innerHTML",i,!1);y.observe(Ft),t.unbindingManager.registerUnbind(Pt,function(){y.unbind(Ft)});var xt=document.createElement("tr");ht.appendChild(xt);var Ut=function(t){return!(t==e.AdvancedOrderType.TRAILING_STOP)};Ut(g.get())&&InfrontUtil.addClassName(xt,"cell-display-none");var Bt=new e.ClassBinding(xt,"cell-display-none",Ut);g.observe(Bt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(xt,function(){g.unbind(Bt)});var Wt=document.createElement("td");xt.appendChild(Wt),Wt.innerHTML=q.get("orderEntryAdvanced","trailLimit");var Ht=document.createElement("td");xt.appendChild(Ht),Ht.className="cell-text-right";var Vt=e.BindingFactory.createNumberFormatValueBinding(Ht,"innerHTML",2,!1);b.observe(Vt);var Gt=function(t){return!(t==e.AdvancedOETriggerLimit.PERCENT)};Gt(S.get())&&InfrontUtil.addClassName(Ht,"cell-display-none");var zt=new e.ClassBinding(Ht,"cell-display-none",Gt);S.observe(zt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ht,function(){b.unbind(Vt),S.unbind(zt)});var qt=document.createElement("td");xt.appendChild(qt),qt.className="cell-text-right";var Yt=e.BindingFactory.createNumberFormatValueBinding(qt,"innerHTML",0,!1);b.observe(Yt);var Kt=function(t){return!(t==e.AdvancedOETriggerLimit.TICKS)};Kt(S.get())&&InfrontUtil.addClassName(qt,"cell-display-none");var Xt=new e.ClassBinding(qt,"cell-display-none",Kt);S.observe(Xt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(qt,function(){b.unbind(Yt),S.unbind(Xt)});var jt=document.createElement("tr");ht.appendChild(jt);var Zt=function(t){return!(t==e.AdvancedOrderType.TRAILING_STOP)};Zt(g.get())&&InfrontUtil.addClassName(jt,"cell-display-none");var Jt=new e.ClassBinding(jt,"cell-display-none",Zt);g.observe(Jt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(jt,function(){g.unbind(Jt)});var Qt=document.createElement("td");jt.appendChild(Qt),Qt.innerHTML=q.get("orderEntryAdvanced","deviation");var $t=document.createElement("td");jt.appendChild($t),$t.className="cell-text-right";var en=e.BindingFactory.createNumberFormatValueBinding($t,"innerHTML",2,!1);T.observe(en);var tn=function(t){return!(t==e.AdvancedOETriggerLimit.PERCENT)};tn(S.get())&&InfrontUtil.addClassName($t,"cell-display-none");var nn=new e.ClassBinding($t,"cell-display-none",tn);S.observe(nn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind($t,function(){T.unbind(en),S.unbind(nn)});var rn=document.createElement("td");jt.appendChild(rn),rn.className="cell-text-right";var an=e.BindingFactory.createNumberFormatValueBinding(rn,"innerHTML",0,!1);T.observe(an);var sn=function(t){return!(t==e.AdvancedOETriggerLimit.TICKS)};sn(S.get())&&InfrontUtil.addClassName(rn,"cell-display-none");var on=new e.ClassBinding(rn,"cell-display-none",sn);S.observe(on,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(rn,function(){T.unbind(an),S.unbind(on)});var ln=document.createElement("div");if(tt.appendChild(ln),ln.className="cell-w-trading-1__confirm-details-buttons",_){var cn=document.createElement("button");ln.appendChild(cn),cn.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(cn,"click",function(e){B(e)}),cn.innerHTML=q.get("orderEntry","confirm");var dn=document.createElement("button");ln.appendChild(dn),dn.className="cell-button  cell-button--cancel  cell-10-margin-left",InfrontUtil.addEventListener(dn,"click",function(e){W(e)}),dn.innerHTML=q.get("orderEntry","cancel")}var un=document.createElement("div");n.appendChild(un),un.className="cell-order-entry__step-3";var hn=new e.ClassBinding(un,"cell-display-none",function(e){return 3!=e});a.observe(hn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(un,function(){a.unbind(hn)});var pn=document.createElement("div");un.appendChild(pn),pn.className="cell-row  cell-w-trading-1__confirm-top-row";var mn=new e.ClassBinding(pn,"cell-w-trading-1__confirm-top-row--pending",function(t){return t==e.OrderState.PENDING});O.observe(mn,e.InitialUpdate.Synchronous);var gn=new e.ClassBinding(pn,"cell-w-trading-1__confirm-top-row--success",function(t){return t==e.OrderState.SUCCESS});O.observe(gn,e.InitialUpdate.Synchronous);var fn=new e.ClassBinding(pn,"cell-w-trading-1__confirm-top-row--failed",function(t){return t==e.OrderState.FAILED});O.observe(fn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(pn,function(){O.unbind(mn),O.unbind(gn),O.unbind(fn)});var vn=document.createElement("div");pn.appendChild(vn),vn.className="cell  cell--w12";var yn=document.createElement("div");vn.appendChild(yn),yn.className="cell-w-trading-1__confirm-msg";var bn=document.createElement("span");yn.appendChild(bn);var Tn=e.BindingFactory.createValueBinding(bn,"innerHTML");k.observe(Tn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(bn,function(){k.unbind(Tn)});var Sn=document.createElement("span");yn.appendChild(Sn),Sn.appendChild(document.createTextNode(" "));var Cn=document.createElement("span");yn.appendChild(Cn);var In=e.BindingFactory.createValueBinding(Cn,"innerHTML");d.observe(In,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Cn,function(){d.unbind(In)});var _n=document.createElement("div");un.appendChild(_n),_n.className="cell-row  cell-w-trading-1__confirm-mid-row";var Mn=document.createElement("div");_n.appendChild(Mn),Mn.className="cell  cell--w6";var En=document.createElement("table");Mn.appendChild(En),En.className="cell-table  cell-w-trading-1__confirm-details-table2";var wn=document.createElement("tr");En.appendChild(wn);var An=document.createElement("td");wn.appendChild(An),An.innerHTML=q.get("orderEntry","status");var Dn=document.createElement("td");wn.appendChild(Dn);var On=e.BindingFactory.createValueBinding(Dn,"innerHTML");D.observe(On,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Dn,function(){D.unbind(On)});var kn=document.createElement("tr");En.appendChild(kn);var Rn=document.createElement("td");kn.appendChild(Rn),Rn.innerHTML=q.get("orderEntry","filled");var Nn=document.createElement("td");kn.appendChild(Nn);var Ln=document.createElement("span");Nn.appendChild(Ln);var Pn=e.BindingFactory.createNumberFormatValueBinding(Ln,"innerHTML",0,!1);w.observe(Pn),t.unbindingManager.registerUnbind(Ln,function(){w.unbind(Pn)});var Fn=document.createElement("span");Nn.appendChild(Fn),Fn.appendChild(document.createTextNode("/"));var xn=document.createElement("span");Nn.appendChild(xn);var Un=e.BindingFactory.createNumberFormatValueBinding(xn,"innerHTML",0,!1);E.observe(Un),t.unbindingManager.registerUnbind(xn,function(){E.unbind(Un)});var Bn=document.createElement("span");Nn.appendChild(Bn);var Wn=function(e){return!(0<e)};Wn(w.get())&&InfrontUtil.addClassName(Bn,"cell-display-none");var Hn=new e.ClassBinding(Bn,"cell-display-none",Wn);w.observe(Hn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Bn,function(){w.unbind(Hn)});var Vn=document.createElement("span");Bn.appendChild(Vn),Vn.appendChild(document.createTextNode(" @ "));var Gn=document.createElement("span");Bn.appendChild(Gn),Gn.innerHTML=q.get("orderEntry","avgPrice");var zn=document.createElement("span");Bn.appendChild(zn),zn.appendChild(document.createTextNode(" "));var qn=document.createElement("span");Bn.appendChild(qn);var Yn=e.BindingFactory.createNumberFormatValueBinding(qn,"innerHTML",i,!1);A.observe(Yn),t.unbindingManager.registerUnbind(qn,function(){A.unbind(Yn)});var Kn=document.createElement("div");_n.appendChild(Kn),Kn.className="cell  cell--w6";var Xn=function(e){return!(-1!=e)};Xn(R.get())&&InfrontUtil.addClassName(Kn,"cell-display-none");var jn=new e.ClassBinding(Kn,"cell-display-none",Xn);R.observe(jn,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Kn,function(){R.unbind(jn)});var Zn=document.createElement("div");Kn.appendChild(Zn),Zn.className="cell-w-trading-1__exchange-message";var Jn=document.createElement("div");Zn.appendChild(Jn),Jn.className="cell-strong  cell-5-margin-bottom",Jn.innerHTML=q.get("orderEntry","errorMessageHeading");var Qn=document.createElement("span");Zn.appendChild(Qn);var $n=e.BindingFactory.createValueBinding(Qn,"innerHTML");R.observe($n,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Qn,function(){R.unbind($n)});var ei=document.createElement("div");un.appendChild(ei),ei.className="cell-w-trading-1__confirm-details-buttons";var ti=document.createElement("button");ei.appendChild(ti),ti.className="cell-button  cell-button--confirm ",InfrontUtil.addEventListener(ti,"click",function(e){H(e)}),ti.innerHTML=q.get("orderEntry","ok");for(var ni=function(e,t){var n=document.createElement("button");return n.className="cell-button  cell-button--nav  cell-10-margin-left",InfrontUtil.addEventListener(n,"click",function(t){e.onclick()}),n.innerHTML=e.label,n},ii=0;ii<L.length;ii++)ei.appendChild(ni(L[ii]));return{searchBox:ve,dateSelector:Re}},t.create_WOEAdvancedOptions_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-h4",m.innerHTML=p.get("orderEntryAdvanced","widgetTitle");var g=document.createElement("div");n.appendChild(g);var f=document.createElement("div");g.appendChild(f);var v=document.createElement("div");f.appendChild(v),v.className="cell-clear";var y=document.createElement("div");v.appendChild(y);var b=document.createElement("div");v.appendChild(b),b.className="cell-paneltoggler";var T=new e.ClassBinding(b,"cell-display-none",function(e){return"openVolume"!=e});i.observe(T,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(b,function(){i.unbind(T)});var S=document.createElement("div");b.appendChild(S),S.className="cell-w-trading-1__adv-row";var C=document.createElement("div");S.appendChild(C),C.className="cell-row  cell-w-trading-1__adv-volume-row";var I=document.createElement("div");C.appendChild(I),I.className="cell cell--w6";var _=document.createElement("span");I.appendChild(_),_.className="cell-label",_.innerHTML=p.get("orderEntryAdvanced","openVolume");var M=document.createElement("div");C.appendChild(M),M.className="cell cell--w6";var E=document.createElement("input");M.appendChild(E),E.className="cell-input  cell-input--80pct",E.type="text",r.bind(E),t.unbindingManager.registerUnbind(E,function(){return r.unbind()});var w=document.createElement("div");S.appendChild(w),w.className="cell-row  cell-w-trading-1__adv-method-row";var A=document.createElement("div");w.appendChild(A),A.className="cell cell--w12";var D=document.createElement("span");A.appendChild(D),D.className="cell-label",D.innerHTML=p.get("orderEntryAdvanced","orderMethod");var O=document.createElement("div");w.appendChild(O),O.className="cell cell--w4";var k=document.createElement("input");O.appendChild(k),k.type="radio",k.name="order-method",k.value="order-method__fill-any",k.checked="checked",a.bind(k),t.unbindingManager.registerUnbind(k,function(){return a.unbind()});var R=document.createElement("span");O.appendChild(R),R.innerHTML=p.get("orderEntryAdvanced","fillAny");var N=document.createElement("div");w.appendChild(N),N.className="cell cell--w4";var L=document.createElement("input");N.appendChild(L),L.type="radio",L.name="order-method",L.value="order-method__fill-and-kill",a.bind(L),t.unbindingManager.registerUnbind(L,function(){return a.unbind()});var P=document.createElement("span");N.appendChild(P),P.innerHTML=p.get("orderEntryAdvanced","fillAndKill");var F=document.createElement("div");w.appendChild(F),F.className="cell cell--w4";var x=document.createElement("input");F.appendChild(x),x.type="radio",x.name="order-method",x.value="order-method__fill-or-kill",a.bind(x),t.unbindingManager.registerUnbind(x,function(){return a.unbind()});var U=document.createElement("span");F.appendChild(U),U.innerHTML=p.get("orderEntryAdvanced","fillOrKill");var B=document.createElement("div");v.appendChild(B),B.className="cell-paneltoggler";var W=new e.ClassBinding(B,"cell-display-none",function(e){return"stopLoss"!=e});i.observe(W,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(B,function(){i.unbind(W)});var H=document.createElement("div");B.appendChild(H),H.className="cell-row";var V=document.createElement("div");H.appendChild(V),V.className="cell cell--w6";var G=document.createElement("span");V.appendChild(G),G.className="cell-label",G.innerHTML=p.get("orderEntryAdvanced","triggerCondition");var z=document.createElement("div");H.appendChild(z),z.className="cell cell--w6";var q=document.createElement("select");z.appendChild(q),q.className="cell-input  cell-input--80pct",s.bind(q),t.unbindingManager.registerUnbind(q,function(){return s.unbind()});var Y=document.createElement("option");q.appendChild(Y),Y.value="stop-loss__lower-equal",Y.innerHTML=p.get("orderEntryAdvanced","lowerEqual");var K=document.createElement("option");q.appendChild(K),K.value="stop-loss__greater-equal",K.innerHTML=p.get("orderEntryAdvanced","greaterEqual");var X=document.createElement("div");B.appendChild(X),X.className="cell-row";var j=document.createElement("div");X.appendChild(j),j.className="cell cell--w6";var Z=document.createElement("span");j.appendChild(Z),Z.className="cell-label",Z.innerHTML=p.get("orderEntryAdvanced","triggerPrice");var J=document.createElement("div");X.appendChild(J),J.className="cell cell--w6";var Q=document.createElement("input");J.appendChild(Q),Q.className="cell-input  cell-input--80pct",Q.type="text",o.bind(Q),t.unbindingManager.registerUnbind(Q,function(){return o.unbind()});var $=document.createElement("div");B.appendChild($),$.className="cell-row  cell-no-margin-bottom";var ee=document.createElement("div");$.appendChild(ee),ee.className="cell cell--w6";var te=document.createElement("span");ee.appendChild(te),te.className="cell-label",te.innerHTML=p.get("orderEntryAdvanced","limitPrice");var ne=document.createElement("div");$.appendChild(ne),ne.className="cell cell--w6";var ie=document.createElement("input");ne.appendChild(ie),ie.className="cell-input  cell-input--80pct",ie.type="text",l.bind(ie),t.unbindingManager.registerUnbind(ie,function(){return l.unbind()});var re=document.createElement("div");v.appendChild(re),re.className="cell-paneltoggler";var ae=new e.ClassBinding(re,"cell-display-none",function(e){return"trailingStopLoss"!=e});i.observe(ae,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(re,function(){i.unbind(ae)});var se=document.createElement("div");re.appendChild(se),se.className="cell-row";var oe=document.createElement("div");se.appendChild(oe),oe.className="cell cell--w6";var le=document.createElement("span");oe.appendChild(le),le.className="cell-label",le.innerHTML=p.get("orderEntryAdvanced","triggerLimit");var ce=document.createElement("div");se.appendChild(ce),ce.className="cell cell--w6";var de=document.createElement("select");ce.appendChild(de),de.className="cell-input  cell-input--80pct",c.bind(de),t.unbindingManager.registerUnbind(de,function(){return c.unbind()});var ue=document.createElement("option");de.appendChild(ue),ue.value="trailing_stop__percent",ue.innerHTML=p.get("orderEntryAdvanced","percent");var he=document.createElement("option");de.appendChild(he),he.value="trailing_stop__ticks",he.innerHTML=p.get("orderEntryAdvanced","ticks");var pe=document.createElement("div");re.appendChild(pe),pe.className="cell-row";var me=document.createElement("div");pe.appendChild(me),me.className="cell cell--w6";var ge=document.createElement("span");me.appendChild(ge),ge.className="cell-label",ge.innerHTML=p.get("orderEntryAdvanced","trailLimit");var fe=document.createElement("span");me.appendChild(fe),fe.appendChild(document.createTextNode(" ("));var ve=document.createElement("span");me.appendChild(ve),ve.innerHTML=p.get("orderEntryAdvanced","ticks");var ye=new e.ClassBinding(ve,"cell-display-none",function(e){return 1!=e});h.observe(ye,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ve,function(){h.unbind(ye)});var be=document.createElement("span");me.appendChild(be);var Te=new e.ClassBinding(be,"cell-display-none",function(e){return 0!=e});h.observe(Te,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(be,function(){h.unbind(Te)}),be.appendChild(document.createTextNode("%"));var Se=document.createElement("span");me.appendChild(Se),Se.appendChild(document.createTextNode(")"));var Ce=document.createElement("div");pe.appendChild(Ce),Ce.className="cell cell--w6";var Ie=document.createElement("input");Ce.appendChild(Ie),Ie.className="cell-input  cell-input--80pct",Ie.type="text",d.bind(Ie),t.unbindingManager.registerUnbind(Ie,function(){return d.unbind()});var _e=document.createElement("div");re.appendChild(_e),_e.className="cell-row  cell-no-margin-bottom";var Me=document.createElement("div");_e.appendChild(Me),Me.className="cell cell--w6";var Ee=document.createElement("span");Me.appendChild(Ee),Ee.className="cell-label",Ee.innerHTML=p.get("orderEntryAdvanced","deviation");var we=document.createElement("span");Me.appendChild(we),we.appendChild(document.createTextNode(" ("));var Ae=document.createElement("span");Me.appendChild(Ae),Ae.innerHTML=p.get("orderEntryAdvanced","ticks");var De=new e.ClassBinding(Ae,"cell-display-none",function(e){return 1!=e});h.observe(De,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ae,function(){h.unbind(De)});var Oe=document.createElement("span");Me.appendChild(Oe);var ke=new e.ClassBinding(Oe,"cell-display-none",function(e){return 0!=e});h.observe(ke,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Oe,function(){h.unbind(ke)}),Oe.appendChild(document.createTextNode("%"));var Re=document.createElement("span");Me.appendChild(Re),Re.appendChild(document.createTextNode(")"));var Ne=document.createElement("div");_e.appendChild(Ne),Ne.className="cell cell--w6";var Le=document.createElement("input");return Ne.appendChild(Le),Le.className="cell-input  cell-input--80pct",Le.type="text",u.bind(Le),t.unbindingManager.registerUnbind(Le,function(){return u.unbind()}),y},t.create_WCompactModifyOrder_DOM=function(n,i,r,a,s,o,l,c,d){var u=document.createElement("div");n.appendChild(u),u.className="cell-w-compact-modify-order";var h=document.createElement("div");u.appendChild(h),h.className="cell-h4";var p=document.createElement("span");h.appendChild(p),p.innerHTML=i;var m=document.createElement("span");h.appendChild(m),m.appendChild(document.createTextNode(" "));var g=document.createElement("span");h.appendChild(g),g.innerHTML=InfrontUtil.formatID(a);var f=document.createElement("table");u.appendChild(f),f.className="cell-table";var v=function(t){return!(t==e.CompactModifyState.INPUT)};v(r.get())&&InfrontUtil.addClassName(f,"cell-display-none");var y=new e.ClassBinding(f,"cell-display-none",v);r.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(f,function(){r.unbind(y)});var b=document.createElement("tbody");f.appendChild(b);var T=document.createElement("table");u.appendChild(T),T.className="cell-table";var S=function(t){return!(t==e.CompactModifyState.CONFIRM)};S(r.get())&&InfrontUtil.addClassName(T,"cell-display-none");var C=new e.ClassBinding(T,"cell-display-none",S);r.observe(C,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){r.unbind(C)});var I=document.createElement("tbody");T.appendChild(I);var _=document.createElement("div");u.appendChild(_);var M=function(t){return!(t==e.CompactModifyState.EXECUTE)};M(r.get())&&InfrontUtil.addClassName(_,"cell-display-none");var E=new e.ClassBinding(_,"cell-display-none",M);r.observe(E,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){r.unbind(E)});var w=document.createElement("div");_.appendChild(w);var A=document.createElement("div");u.appendChild(A),A.className="cell-10-margin-top  cell-pull-right";var D=document.createElement("button");A.appendChild(D),D.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(D,"click",function(e){o(e)});var O=function(t){return!(t==e.CompactModifyState.INPUT)};O(r.get())&&InfrontUtil.addClassName(D,"cell-display-none");var k=new e.ClassBinding(D,"cell-display-none",O);r.observe(k,e.InitialUpdate.Synchronous),D.innerHTML=d.get("compactModifyOrder","modify"),t.unbindingManager.registerUnbind(D,function(){r.unbind(k)});var R=document.createElement("span");A.appendChild(R),s!=e.OrderEntryConfirmation.SIMPLE&&InfrontUtil.addClassName(R,"cell-display-none");var N=document.createElement("button");R.appendChild(N),N.className="cell-button  cell-button--confirm  cell-10-margin-left",InfrontUtil.addEventListener(N,"click",function(e){l(e)});var L=function(t){return!(t==e.CompactModifyState.CONFIRM)};L(r.get())&&InfrontUtil.addClassName(N,"cell-display-none");var P=new e.ClassBinding(N,"cell-display-none",L);r.observe(P,e.InitialUpdate.Synchronous),N.innerHTML=d.get("compactModifyOrder","confirm"),t.unbindingManager.registerUnbind(N,function(){r.unbind(P)});var F=document.createElement("button");A.appendChild(F),F.className="cell-button  cell-button--cancel  cell-10-margin-left",InfrontUtil.addEventListener(F,"click",function(e){c(e)});var x=function(t){return!(t!=e.CompactModifyState.EXECUTE)};x(r.get())&&InfrontUtil.addClassName(F,"cell-display-none");var U=new e.ClassBinding(F,"cell-display-none",x);r.observe(U,e.InitialUpdate.Synchronous),F.innerHTML=d.get("compactModifyOrder","cancel"),t.unbindingManager.registerUnbind(F,function(){r.unbind(U)});var B=document.createElement("button");A.appendChild(B),B.className="cell-button  cell-button--confirm  cell-10-margin-left",InfrontUtil.addEventListener(B,"click",function(e){c(e)});var W=function(t){return!(t==e.CompactModifyState.EXECUTE)};W(r.get())&&InfrontUtil.addClassName(B,"cell-display-none");var H=new e.ClassBinding(B,"cell-display-none",W);return r.observe(H,e.InitialUpdate.Synchronous),B.innerHTML=d.get("compactModifyOrder","ok"),t.unbindingManager.registerUnbind(B,function(){r.unbind(H)}),{parameterBody:b,confirmBody:I,executeContainer:w}},t.create_WCompactModifyTextinputRow_DOM=function(e,n){var i=document.createElement("tr"),r=document.createElement("td");i.appendChild(r),r.className="cell--w6",r.innerHTML=e;var a=document.createElement("td");i.appendChild(a),a.className="cell-no-padding";var s=document.createElement("input");return a.appendChild(s),s.className="cell-input  cell-input--80pct",s.type="text",n.bind(s),t.unbindingManager.registerUnbind(s,function(){return n.unbind()}),i},t.create_WGenericTableRow_DOM=function(e){for(var t,n,i=document.createElement("tr"),r=0;r<e.length;r++)i.appendChild((t=e[r],n=void 0,(n=document.createElement("td")).className="cell--w6",n.innerHTML=t,n));return i},t.create_WCompactModifyExecuteScreen_DOM=function(n,i,r,a,s,o,l,c){var d=document.createElement("div");n.appendChild(d),d.className="cell-row  cell-w-trading-1__confirm-top-row";var u=new e.ClassBinding(d,"cell-w-trading-1__confirm-top-row--pending",function(t){return t==e.OrderState.PENDING});r.observe(u,e.InitialUpdate.Synchronous);var h=new e.ClassBinding(d,"cell-w-trading-1__confirm-top-row--success",function(t){return t==e.OrderState.SUCCESS});r.observe(h,e.InitialUpdate.Synchronous);var p=new e.ClassBinding(d,"cell-w-trading-1__confirm-top-row--failed",function(t){return t==e.OrderState.FAILED});r.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){r.unbind(u),r.unbind(h),r.unbind(p)});var m=document.createElement("div");d.appendChild(m),m.className="cell  cell--w12";var g=document.createElement("span");m.appendChild(g);var f=e.BindingFactory.createValueBinding(g,"innerHTML");a.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){a.unbind(f)});var v=document.createElement("span");m.appendChild(v),v.appendChild(document.createTextNode(": "));var y=document.createElement("span");m.appendChild(y);var b=e.BindingFactory.createValueBinding(y,"innerHTML"),T=o.customBind(l,"buy_or_sell",b);t.unbindingManager.registerUnbind(y,T);var S=document.createElement("span");m.appendChild(S),S.appendChild(document.createTextNode(" "));var C=document.createElement("span");m.appendChild(C);var I=e.BindingFactory.createValueBinding(C,"innerHTML"),_=o.customBind(l,"volume",I);t.unbindingManager.registerUnbind(C,_);var M=document.createElement("span");m.appendChild(M),M.appendChild(document.createTextNode(" "));var E=document.createElement("span");m.appendChild(E);var w=e.BindingFactory.createValueBinding(E,"innerHTML"),A=o.customBind(l,["instrument","ticker"],w);t.unbindingManager.registerUnbind(E,A);var D=document.createElement("table");n.appendChild(D),D.className="cell-table";var O=document.createElement("tbody");D.appendChild(O);var k=document.createElement("tr");O.appendChild(k);var R=document.createElement("td");k.appendChild(R),R.className="cell--w6",R.innerHTML=c.get("orderEntry","status");var N=document.createElement("td");k.appendChild(N);var L=e.BindingFactory.createTranslateBinding(N,InfrontUtil.formatEnumString,"innerHTML"),P=o.customBind(l,"order_status",L);t.unbindingManager.registerUnbind(N,P);var F=document.createElement("tr");O.appendChild(F);var x=document.createElement("td");F.appendChild(x),x.innerHTML=c.get("orderEntry","filled");var U=document.createElement("td");F.appendChild(U);var B=document.createElement("span");U.appendChild(B);var W=e.BindingFactory.createNumberFormatValueBinding(B,"innerHTML",0,!1),H=o.customBind(l,"volume_filled",W);t.unbindingManager.registerUnbind(B,H);var V=document.createElement("span");U.appendChild(V),V.appendChild(document.createTextNode("/"));var G=document.createElement("span");U.appendChild(G);var z=e.BindingFactory.createNumberFormatValueBinding(G,"innerHTML",0,!1),q=o.customBind(l,"volume",z);t.unbindingManager.registerUnbind(G,q);var Y=document.createElement("div");n.appendChild(Y),Y.className="cell  cell--w12";var K=function(e){return!(1==e)};K(i.get())&&InfrontUtil.addClassName(Y,"cell-display-none");var X=new e.ClassBinding(Y,"cell-display-none",K);i.observe(X,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Y,function(){i.unbind(X)});var j=document.createElement("div");Y.appendChild(j),j.className="cell-w-trading-1__exchange-message";var Z=document.createElement("div");j.appendChild(Z),Z.className="cell-strong  cell-5-margin-bottom",Z.innerHTML=c.get("orderEntry","errorMessageHeading");var J=document.createElement("span");j.appendChild(J);var Q=e.BindingFactory.createValueBinding(J,"innerHTML");s.observe(Q,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(J,function(){s.unbind(Q)})},t.create_WOrder_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g){var f=document.createElement("div");f.className="cell-w-order-widget  cell-clear";var v=document.createElement("div");f.appendChild(v),v.className="cell-w-order-widget-row",InfrontUtil.addEventListener(v,"click",function(e){h(e)}),v.setAttribute("role","button"),InfrontUtil.addEventListener(v,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(e)});var y=new e.ClassBinding(v,"cell-w-order-widget-row--exchange",function(e){return"EXCHANGE_ORDER"==e}),b=p.customBind(m,"order_status",y),T=new e.ClassBinding(v,"cell-w-order-widget-row__inactive",function(e){return"INACTIVE_ORDER"==e}),S=p.customBind(m,"order_status",T),C=new e.ClassBinding(v,"cell-w-order-widget-row--working",function(e){return"WORKING_ORDER"==e}),I=p.customBind(m,"order_status",C),_=new e.ClassBinding(v,"cell-w-order-widget-row--executed",function(e){return"EXECUTED_ORDER"==e}),M=p.customBind(m,"order_status",_),E=new e.ClassBinding(v,"cell-w-order-widget-row--monitor",function(e){return"MONITOR_ORDER"==e}),w=p.customBind(m,"order_status",E),A=new e.ClassBinding(v,"cell-w-order-widget-row--deleted",function(e){return"DELETED_ORDER"==e}),D=p.customBind(m,"order_status",A);t.unbindingManager.registerUnbind(v,function(){b(),S(),I(),M(),w(),D()});var O=document.createElement("div");v.appendChild(O),O.className="cell-row  cell-5-margin-bottom";var k=document.createElement("div");O.appendChild(k),k.className="cell-w-order-widget__buy-or-sell";var R=e.BindingFactory.createValueBinding(k,"innerHTML"),N=p.customBind(m,"buy_or_sell",R),L=new e.ClassBinding(k,"cell-status-positive",function(e){return"BUY"==e}),P=p.customBind(m,"buy_or_sell",L),F=new e.ClassBinding(k,"cell-status-negative",function(e){return"SELL"==e}),x=p.customBind(m,"buy_or_sell",F);t.unbindingManager.registerUnbind(k,function(){N(),P(),x()});var U=document.createElement("div");O.appendChild(U),U.className="cell-w-order-widget__ticker";var B=e.BindingFactory.createValueBinding(U,"innerHTML"),W=p.customBind(m,["instrument","ticker"],B);t.unbindingManager.registerUnbind(U,W);var H=document.createElement("div");O.appendChild(H),H.className="cell-w-order-widget__status";var V=e.BindingFactory.createValueBinding(H,"innerHTML");i.observe(V,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(H,function(){i.unbind(V)});var G=document.createElement("div");v.appendChild(G),G.className="cell-row  cell-no-margin-bottom";var z=document.createElement("div");G.appendChild(z),z.className="cell-w-order-widget__volume-filled";var q=e.BindingFactory.createNumberFormatValueBinding(z,"innerHTML",0,!0),Y=p.customBind(m,"volume_filled",q);t.unbindingManager.registerUnbind(z,Y);var K=document.createElement("div");G.appendChild(K),K.className="cell-w-order-widget__volume";var X=e.BindingFactory.createNumberFormatValueBinding(K,"innerHTML",0,!0),j=p.customBind(m,"volume",X);t.unbindingManager.registerUnbind(K,j);var Z=document.createElement("div");G.appendChild(Z),Z.className="cell-w-order-widget__price";var J=e.BindingFactory.createNumberFormatValueBinding(Z,"innerHTML",n,!0);r.observe(J),t.unbindingManager.registerUnbind(Z,function(){r.unbind(J)});var Q=document.createElement("div");G.appendChild(Q),Q.className="cell-pull-left";var $=e.BindingFactory.createValueBinding(Q,"innerHTML");if(s.observe($,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Q,function(){s.unbind($)}),0==u){var ee=document.createElement("div");G.appendChild(ee),ee.className="cell-w-order-widget__currency";var te=e.BindingFactory.createValueBinding(ee,"innerHTML"),ne=p.customBind(m,["instrument","currency"],te);t.unbindingManager.registerUnbind(ee,ne)}var ie=document.createElement("div");G.appendChild(ie),ie.className="cell-w-order-widget__condition  cell-space-before";var re=e.BindingFactory.createValueBinding(ie,"innerHTML");a.observe(re,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ie,function(){a.unbind(re)});var ae=document.createElement("div");G.appendChild(ae),ae.className="cell-w-order-widget__details";var se=document.createElement("span");ae.appendChild(se),se.className="cell-w-order-widget__bid-ask-lbl";var oe=e.BindingFactory.createValueBinding(se,"innerHTML");l.observe(oe,e.InitialUpdate.Synchronous);var le=e.BindingFactory.createValueBinding(se,"innerHTML"),ce=p.customBind(m,"visible",le),de=new e.ClassBinding(se,"cell-display-none",function(e){return"EXCHANGE_ORDER"!=e}),ue=p.customBind(m,"order_status",de);t.unbindingManager.registerUnbind(se,function(){l.unbind(oe),ce(),ue()});var he=document.createElement("span");ae.appendChild(he),he.className="cell-w-order-widget__bid-ask";var pe=e.BindingFactory.createNumberFormatValueBinding(he,"innerHTML",n,!0);c.observe(pe);var me=e.BindingFactory.createValueBinding(he,"innerHTML"),ge=p.customBind(m,"visible",me),fe=new e.ClassBinding(he,"cell-display-none",function(e){return"EXCHANGE_ORDER"!=e}),ve=p.customBind(m,"order_status",fe);t.unbindingManager.registerUnbind(he,function(){c.unbind(pe),ge(),ve()});var ye=document.createElement("span");ae.appendChild(ye),ye.className="cell-w-order-widget__bid-ask-lbl";var be=e.BindingFactory.createValueBinding(ye,"innerHTML");l.observe(be,e.InitialUpdate.Synchronous);var Te=e.BindingFactory.createValueBinding(ye,"innerHTML"),Se=p.customBind(m,"visible",Te),Ce=new e.ClassBinding(ye,"cell-display-none",function(e){return"MONITOR_ORDER"!=e}),Ie=p.customBind(m,"order_status",Ce);t.unbindingManager.registerUnbind(ye,function(){l.unbind(be),Se(),Ie()});var _e=document.createElement("span");ae.appendChild(_e),_e.className="cell-w-order-widget__bid-ask";var Me=e.BindingFactory.createNumberFormatValueBinding(_e,"innerHTML",n,!0);c.observe(Me);var Ee=e.BindingFactory.createValueBinding(_e,"innerHTML"),we=p.customBind(m,"visible",Ee),Ae=new e.ClassBinding(_e,"cell-display-none",function(e){return"MONITOR_ORDER"!=e}),De=p.customBind(m,"order_status",Ae);t.unbindingManager.registerUnbind(_e,function(){c.unbind(Me),we(),De()});var Oe=document.createElement("span");ae.appendChild(Oe),Oe.className="cell-w-order-widget__bid-ask-lbl";var ke=e.BindingFactory.createValueBinding(Oe,"innerHTML");l.observe(ke,e.InitialUpdate.Synchronous);var Re=e.BindingFactory.createValueBinding(Oe,"innerHTML"),Ne=p.customBind(m,"visible",Re),Le=new e.ClassBinding(Oe,"cell-display-none",function(e){return"WORKING_ORDER"!=e}),Pe=p.customBind(m,"order_status",Le);t.unbindingManager.registerUnbind(Oe,function(){l.unbind(ke),Ne(),Pe()});var Fe=document.createElement("span");ae.appendChild(Fe),Fe.className="cell-w-order-widget__bid-ask";var xe=e.BindingFactory.createNumberFormatValueBinding(Fe,"innerHTML",n,!0);c.observe(xe);var Ue=e.BindingFactory.createValueBinding(Fe,"innerHTML"),Be=p.customBind(m,"visible",Ue),We=new e.ClassBinding(Fe,"cell-display-none",function(e){return"WORKING_ORDER"!=e}),He=p.customBind(m,"order_status",We);t.unbindingManager.registerUnbind(Fe,function(){c.unbind(xe),Be(),He()});var Ve=document.createElement("span");ae.appendChild(Ve),Ve.className="cell-w-order-widget__avg-price-lbl",Ve.innerHTML=g.get("orderWidget","avgPrice");var Ge=new e.ClassBinding(Ve,"cell-display-none",function(e){return"EXECUTED_ORDER"!=e}),ze=p.customBind(m,"order_status",Ge);t.unbindingManager.registerUnbind(Ve,ze);var qe=document.createElement("span");ae.appendChild(qe),qe.className="cell-w-order-widget__avg-price";var Ye=e.BindingFactory.createNumberFormatValueBinding(qe,"innerHTML",n,!0);d.observe(Ye);var Ke=e.BindingFactory.createValueBinding(qe,"innerHTML"),Xe=p.customBind(m,"visible",Ke),je=new e.ClassBinding(qe,"cell-display-none",function(e){return"EXECUTED_ORDER"!=e}),Ze=p.customBind(m,"order_status",je);return t.unbindingManager.registerUnbind(qe,function(){d.unbind(Ye),Xe(),Ze()}),v},t.create_WTradingTable_DOM=function(n,i,r,a,s,o,l,c,d,u,h){var p=document.createElement("div");if(n.appendChild(p),p.className="cell-h4  cell-pull-left",1!=o&&null!=r){if(void 0!==u){var m=document.createElement("div");p.appendChild(m),m.className="cell-pull-left";var g=document.createElement("span");m.appendChild(g),g.className="cell-portfolio-select__title--interaction",InfrontUtil.addEventListener(g,"click",function(e){u()}),InfrontUtil.addEventListener(g,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u()}),g.innerHTML=r}if(void 0===u){var f=document.createElement("div");p.appendChild(f),f.className="cell-pull-left";var v=document.createElement("span");f.appendChild(v),v.innerHTML=r}if(1==s){var y=document.createElement("div");p.appendChild(y),y.className="cell-portfolio-select__label  cell-pull-left";var b=document.createElement("span");y.appendChild(b);var T=e.BindingFactory.createValueBinding(b,"innerHTML");a.observe(T,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(b,function(){a.unbind(T)})}}if(1==o){var S=document.createElement("div");p.appendChild(S)}var C=document.createElement("div");n.appendChild(C),C.className="cell-pull-right",1!=l&&InfrontUtil.addClassName(C,"cell-display-none");var I=document.createElement("span");if(C.appendChild(I),I.className="cell-button-link-h4  cell-button-link-h4--delete",InfrontUtil.addEventListener(I,"click",function(e){d(e)}),InfrontUtil.addEventListener(I,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)}),I.innerHTML=h.get("orders","deleteAll"),0==i){var _=document.createElement("table");n.appendChild(_),_.className="cell-table";var M=document.createElement("thead");_.appendChild(M);var E=document.createElement("tbody");_.appendChild(E);var w=document.createElement("tfoot");_.appendChild(w)}1==i&&(_=document.createElement("div"),n.appendChild(_),_.className="cell-flex-list-wrapper",_.setAttribute("style","margin-top:20px;"),M=document.createElement("div"),_.appendChild(M),M.className="cell-flex-list  cell-flex-list--header",E=document.createElement("div"),_.appendChild(E),E.className="cell-flex-list  cell-flex-list--body",w=document.createElement("div"),_.appendChild(w),w.className="cell-flex-list  cell-flex-list--footer");var A=document.createElement("div");return n.appendChild(A),{thead:M,tbody:E,tfoot:w,progressIndicator:A,portfolioContainer:S}},t.create_WTradingTableFlex_DOM=function(n,i,r,a,s,o,l,c,d,u,h){if(1!=s&&null!=i){var p=document.createElement("div");if(n.appendChild(p),p.className="cell-h4",void 0!==c){var m=document.createElement("div");p.appendChild(m),m.className="cell-pull-left";var g=document.createElement("span");m.appendChild(g),g.className="cell-portfolio-select__title--interaction",InfrontUtil.addEventListener(g,"click",function(e){c()}),InfrontUtil.addEventListener(g,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||c()}),g.innerHTML=i}if(void 0===c){var f=document.createElement("div");p.appendChild(f),f.className="cell-pull-left";var v=document.createElement("span");f.appendChild(v),v.innerHTML=i}if(1==a){var y=document.createElement("div");p.appendChild(y),y.className="cell-portfolio-select__label  cell-pull-left";var b=document.createElement("span");y.appendChild(b);var T=e.BindingFactory.createValueBinding(b,"innerHTML");r.observe(T,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(b,function(){r.unbind(T)})}}if(1==s){var S=document.createElement("div");n.appendChild(S),S.className="cell-h4";var C=document.createElement("div");S.appendChild(C)}var I=document.createElement("div");n.appendChild(I),I.className="cell-pull-right",1!=o&&InfrontUtil.addClassName(I,"cell-display-none");var _=document.createElement("span");I.appendChild(_),_.className="cell-button-link-h4  cell-button-link-h4--delete",InfrontUtil.addEventListener(_,"click",function(e){l(e)}),InfrontUtil.addEventListener(_,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)}),_.innerHTML=h.get("orders","deleteAll");var M=document.createElement("div");n.appendChild(M),M.className="cell-flex-list-wrapper",M.setAttribute("style","margin-top:20px;");var E=document.createElement("div");M.appendChild(E),E.className="cell-w-positions";var w=document.createElement("div");E.appendChild(w),w.className="cell-w-positions__header";var A=new e.ClassBinding(w,"cell-display-none",function(t){return t==e.ListLayout.CARD});u.observe(A,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(w,function(){u.unbind(A)});var D=document.createElement("div");E.appendChild(D),D.className="cell-w-positions__payload";var O=new e.ClassBinding(D,"cell-w-positions__payload--compact",function(t){return t==e.ListLayout.COMPACT});u.observe(O,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(D,function(){u.unbind(O)});var k=document.createElement("div");E.appendChild(k),k.className="cell-flex-row";var R=new e.ClassBinding(k,"cell-display-none",function(e){return 0==e});d.observe(R,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(k,function(){d.unbind(R)});var N=document.createElement("div");k.appendChild(N),N.className="cell-flex-column cell-list--empty__message cell-w-positions__empty-message",N.innerHTML=h.get("myList","emptyList");var L=document.createElement("div");return n.appendChild(L),{tbody:D,thead:w,progressIndicator:L,portfolioContainer:C}},t.create_WNetTrades_DOM=function(n,i,r,a,s,o,l){if(null!=i){var c=document.createElement("div");n.appendChild(c),c.className="cell-h4";var d=document.createElement("span");if(c.appendChild(d),d.innerHTML=i,r){var u=document.createElement("span");c.appendChild(u),u.appendChild(document.createTextNode(": "));var h=document.createElement("span");c.appendChild(h);var p=e.BindingFactory.createValueBinding(h,"innerHTML");a.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(h,function(){a.unbind(p)})}}var m=document.createElement("table");n.appendChild(m),m.className="cell-table";var g=document.createElement("thead");m.appendChild(g);var f=document.createElement("tr");g.appendChild(f);var v=document.createElement("th");f.appendChild(v);var y=document.createElement("th");f.appendChild(y),y.className="cell-table--net-trades__col-buy  cell-1-border-left",y.colSpan=3,y.innerHTML=l.get("netTrades","buy");var b=document.createElement("th");f.appendChild(b),b.className="cell-table--net-trades__col-sell  cell-1-border-left",b.colSpan=3,b.innerHTML=l.get("netTrades","sell");var T=document.createElement("th");f.appendChild(T),T.className="cell-table--net-trades__col-net  cell-1-border-left",T.colSpan=3,T.innerHTML=l.get("netTrades","net");var S=document.createElement("tr");g.appendChild(S);var C=document.createElement("th");S.appendChild(C),C.className="cell-table__txt cell-cursor-pointer",InfrontUtil.addEventListener(C,"click",function(t){o(e.NetTradesWidget.kColTicker)}),InfrontUtil.addEventListener(C,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColTicker)});var I=document.createElement("span");C.appendChild(I),I.innerHTML=l.get("netTrades","ticker");var _=document.createElement("span");C.appendChild(_),_.className="cell-table__col-sortable";var M=new e.ClassBinding(_,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColTickerDesc});s.observe(M,e.InitialUpdate.Synchronous);var E=new e.ClassBinding(_,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColTickerAsc});s.observe(E,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){s.unbind(M),s.unbind(E)});var w=document.createElement("th");S.appendChild(w),w.className="cell-table__num cell-cursor-pointer  cell-1-border-left",InfrontUtil.addEventListener(w,"click",function(t){o(e.NetTradesWidget.kColBuyVol)}),InfrontUtil.addEventListener(w,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColBuyVol)});var A=document.createElement("span");w.appendChild(A),A.innerHTML=l.get("netTrades","quantity");var D=document.createElement("span");w.appendChild(D),D.className="cell-table__col-sortable";var O=new e.ClassBinding(D,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColBuyVolDesc});s.observe(O,e.InitialUpdate.Synchronous);var k=new e.ClassBinding(D,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColBuyVolAsc});s.observe(k,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(D,function(){s.unbind(O),s.unbind(k)});var R=document.createElement("th");S.appendChild(R),R.className="cell-table__num cell-cursor-pointer",InfrontUtil.addEventListener(R,"click",function(t){o(e.NetTradesWidget.kColBuyVWap)}),InfrontUtil.addEventListener(R,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColBuyVWap)});var N=document.createElement("span");R.appendChild(N),N.innerHTML=l.get("netTrades","vwap");var L=document.createElement("span");R.appendChild(L),L.className="cell-table__col-sortable";var P=new e.ClassBinding(L,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColBuyVWapDesc});s.observe(P,e.InitialUpdate.Synchronous);var F=new e.ClassBinding(L,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColBuyVWapAsc});s.observe(F,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(L,function(){s.unbind(P),s.unbind(F)});var x=document.createElement("th");S.appendChild(x),x.className="cell-table__num cell-cursor-pointer",InfrontUtil.addEventListener(x,"click",function(t){o(e.NetTradesWidget.kColBuyValue)}),InfrontUtil.addEventListener(x,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColBuyValue)});var U=document.createElement("span");x.appendChild(U),U.innerHTML=l.get("netTrades","value");var B=document.createElement("span");x.appendChild(B),B.className="cell-table__col-sortable";var W=new e.ClassBinding(B,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColBuyValueDesc});s.observe(W,e.InitialUpdate.Synchronous);var H=new e.ClassBinding(B,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColBuyValueAsc});s.observe(H,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(B,function(){s.unbind(W),s.unbind(H)});var V=document.createElement("th");S.appendChild(V),V.className="cell-table__num cell-cursor-pointer  cell-1-border-left",InfrontUtil.addEventListener(V,"click",function(t){o(e.NetTradesWidget.kColSellVol)}),InfrontUtil.addEventListener(V,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColSellVol)});var G=document.createElement("span");V.appendChild(G),G.innerHTML=l.get("netTrades","quantity");var z=document.createElement("span");V.appendChild(z),z.className="cell-table__col-sortable";var q=new e.ClassBinding(z,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColSellVolDesc});s.observe(q,e.InitialUpdate.Synchronous);var Y=new e.ClassBinding(z,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColSellVolAsc});s.observe(Y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(z,function(){s.unbind(q),s.unbind(Y)});var K=document.createElement("th");S.appendChild(K),K.className="cell-table__num cell-cursor-pointer",InfrontUtil.addEventListener(K,"click",function(t){o(e.NetTradesWidget.kColSellVWap)}),InfrontUtil.addEventListener(K,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColSellVWap)});var X=document.createElement("span");K.appendChild(X),X.innerHTML=l.get("netTrades","vwap");var j=document.createElement("span");K.appendChild(j),j.className="cell-table__col-sortable";var Z=new e.ClassBinding(j,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColSellVWapDesc});s.observe(Z,e.InitialUpdate.Synchronous);var J=new e.ClassBinding(j,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColSellVWapAsc});s.observe(J,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(j,function(){s.unbind(Z),s.unbind(J)});var Q=document.createElement("th");S.appendChild(Q),Q.className="cell-table__num cell-cursor-pointer",InfrontUtil.addEventListener(Q,"click",function(t){o(e.NetTradesWidget.kColSellValue)}),InfrontUtil.addEventListener(Q,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColSellValue)});var $=document.createElement("span");Q.appendChild($),$.innerHTML=l.get("netTrades","value");var ee=document.createElement("span");Q.appendChild(ee),ee.className="cell-table__col-sortable";var te=new e.ClassBinding(ee,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColSellValueDesc});s.observe(te,e.InitialUpdate.Synchronous);var ne=new e.ClassBinding(ee,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColSellValueAsc});s.observe(ne,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ee,function(){s.unbind(te),s.unbind(ne)});var ie=document.createElement("th");S.appendChild(ie),ie.className="cell-table__num cell-cursor-pointer  cell-1-border-left",InfrontUtil.addEventListener(ie,"click",function(t){o(e.NetTradesWidget.kColNetVolume)}),InfrontUtil.addEventListener(ie,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColNetVolume)});var re=document.createElement("span");ie.appendChild(re),re.innerHTML=l.get("netTrades","netQuantity");var ae=document.createElement("span");ie.appendChild(ae),ae.className="cell-table__col-sortable";var se=new e.ClassBinding(ae,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColNetVolumeDesc});s.observe(se,e.InitialUpdate.Synchronous);var oe=new e.ClassBinding(ae,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColNetVolumeAsc});s.observe(oe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ae,function(){s.unbind(se),s.unbind(oe)});var le=document.createElement("th");S.appendChild(le),le.className="cell-table__num cell-cursor-pointer",InfrontUtil.addEventListener(le,"click",function(t){o(e.NetTradesWidget.kColNetValue)}),InfrontUtil.addEventListener(le,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColNetValue)});var ce=document.createElement("span");le.appendChild(ce),ce.innerHTML=l.get("netTrades","netValue");var de=document.createElement("span");le.appendChild(de),de.className="cell-table__col-sortable";var ue=new e.ClassBinding(de,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColNetValueDesc});s.observe(ue,e.InitialUpdate.Synchronous);var he=new e.ClassBinding(de,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColNetValueAsc});s.observe(he,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(de,function(){s.unbind(ue),s.unbind(he)});var pe=document.createElement("th");S.appendChild(pe),pe.className="cell-table__num cell-cursor-pointer",InfrontUtil.addEventListener(pe,"click",function(t){o(e.NetTradesWidget.kColNetRealized)}),InfrontUtil.addEventListener(pe,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||o(e.NetTradesWidget.kColNetRealized)});var me=document.createElement("span");pe.appendChild(me),me.innerHTML=l.get("netTrades","realized");var ge=document.createElement("span");pe.appendChild(ge),ge.className="cell-table__col-sortable";var fe=new e.ClassBinding(ge,"cell-table__col-sortable--descending",function(t){return t==e.NetTradesWidget.kColNetRealizedDesc});s.observe(fe,e.InitialUpdate.Synchronous);var ve=new e.ClassBinding(ge,"cell-table__col-sortable--ascending",function(t){return t==e.NetTradesWidget.kColNetRealizedAsc});s.observe(ve,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ge,function(){s.unbind(fe),s.unbind(ve)});var ye=document.createElement("tbody");m.appendChild(ye);var be=document.createElement("div");return n.appendChild(be),{thead:g,tbody:ye,progressIndicator:be}},t.create_WNetTradesRow_DOM=function(n,i){var r=document.createElement("tr"),a=document.createElement("td");r.appendChild(a),a.className="cell-table__txt";var s=e.BindingFactory.createValueBinding(a,"innerHTML"),o=n.customBind(i,["instrument","ticker"],s);t.unbindingManager.registerUnbind(a,o);var l=document.createElement("td");r.appendChild(l),l.className="cell-table__num";var c=e.BindingFactory.createNumberFormatValueBinding(l,"innerHTML",0,!0),d=n.customBind(i,"buy_volume",c),u=new e.ClassBinding(l,"cell-table-cell__highlight--buy",function(e){return 0<e}),h=n.customBind(i,"buy_volume",u);t.unbindingManager.registerUnbind(l,function(){d(),h()});var p=document.createElement("td");r.appendChild(p),p.className="cell-table__num";var m=e.BindingFactory.createNumberFormatValueBinding(p,"innerHTML",2,!0),g=n.customBind(i,"buy_vwap",m),f=new e.ClassBinding(p,"cell-table-cell__highlight--buy",function(e){return 0<e}),v=n.customBind(i,"buy_volume",f);t.unbindingManager.registerUnbind(p,function(){g(),v()});var y=document.createElement("td");r.appendChild(y),y.className="cell-table__num";var b=e.BindingFactory.createNumberFormatValueBinding(y,"innerHTML",0,!0),T=n.customBind(i,"buy_value",b),S=new e.ClassBinding(y,"cell-table-cell__highlight--buy",function(e){return 0<e}),C=n.customBind(i,"buy_volume",S);t.unbindingManager.registerUnbind(y,function(){T(),C()});var I=document.createElement("td");r.appendChild(I),I.className="cell-table__num";var _=e.BindingFactory.createNumberFormatValueBinding(I,"innerHTML",0,!0),M=n.customBind(i,"sell_volume",_),E=new e.ClassBinding(I,"cell-table-cell__highlight--sell",function(e){return 0<e}),w=n.customBind(i,"sell_volume",E);t.unbindingManager.registerUnbind(I,function(){M(),w()});var A=document.createElement("td");r.appendChild(A),A.className="cell-table__num";var D=e.BindingFactory.createNumberFormatValueBinding(A,"innerHTML",2,!0),O=n.customBind(i,"sell_vwap",D),k=new e.ClassBinding(A,"cell-table-cell__highlight--sell",function(e){return 0<e}),R=n.customBind(i,"sell_volume",k);t.unbindingManager.registerUnbind(A,function(){O(),R()});var N=document.createElement("td");r.appendChild(N),N.className="cell-table__num";var L=e.BindingFactory.createNumberFormatValueBinding(N,"innerHTML",0,!0),P=n.customBind(i,"sell_value",L),F=new e.ClassBinding(N,"cell-table-cell__highlight--sell",function(e){return 0<e}),x=n.customBind(i,"sell_volume",F);t.unbindingManager.registerUnbind(N,function(){P(),x()});var U=document.createElement("td");r.appendChild(U),U.className="cell-table__num";var B=e.BindingFactory.createNumberFormatValueBinding(U,"innerHTML",0,!0),W=n.customBind(i,"net_volume",B),H=new e.ClassBinding(U,"cell-table-cell__highlight--buy",function(e){return 0<e}),V=n.customBind(i,"net_volume",H),G=new e.ClassBinding(U,"cell-table-cell__highlight--sell",function(e){return e<0}),z=n.customBind(i,"net_volume",G);t.unbindingManager.registerUnbind(U,function(){W(),V(),z()});var q=document.createElement("td");r.appendChild(q),q.className="cell-table__num";var Y=e.BindingFactory.createNumberFormatValueBinding(q,"innerHTML",0,!0),K=n.customBind(i,"net_value",Y),X=new e.ClassBinding(q,"cell-table-cell__highlight--buy",function(e){return 0<e}),j=n.customBind(i,"net_volume",X),Z=new e.ClassBinding(q,"cell-table-cell__highlight--sell",function(e){return e<0}),J=n.customBind(i,"net_volume",Z);t.unbindingManager.registerUnbind(q,function(){K(),j(),J()});var Q=document.createElement("td");r.appendChild(Q),Q.className="cell-table__num";var $=e.BindingFactory.createNumberFormatValueBinding(Q,"innerHTML",0,!0),ee=n.customBind(i,"net_realized",$),te=new e.ClassBinding(Q,"cell-table-cell__highlight--buy",function(e){return 0<e}),ne=n.customBind(i,"net_volume",te),ie=new e.ClassBinding(Q,"cell-table-cell__highlight--sell",function(e){return e<0}),re=n.customBind(i,"net_volume",ie);return t.unbindingManager.registerUnbind(Q,function(){ee(),ne(),re()}),r},t.create_WPortfolioValues_DOM=function(e,t){if(null!=t){var n=document.createElement("div");e.appendChild(n),n.className="cell-h4",n.innerHTML=t}var i=document.createElement("table");e.appendChild(i),i.className="cell-table";var r=document.createElement("thead");i.appendChild(r);var a=document.createElement("tbody");return i.appendChild(a),{thead:r,tbody:a}},t.create_WPortfolioValuesRow_DOM=function(n,i,r,a){var s=document.createElement("tr"),o=document.createElement("td");if(s.appendChild(o),o.innerHTML=n,!i){var l=document.createElement("td");s.appendChild(l),l.className="cell-text-right";var c=document.createElement("span");l.appendChild(c);var d=e.BindingFactory.createNumberFormatValueBinding(c,"innerHTML",0,!0),u=r.customBind(a,"value",d),h=new e.ClassBinding(c,"cell-5-padding-right",function(e){return null!=e}),p=r.customBind(a,"currency",h);t.unbindingManager.registerUnbind(c,function(){u(),p()});var m=document.createElement("span");l.appendChild(m);var g=e.BindingFactory.createValueBinding(m,"innerHTML"),f=r.customBind(a,"currency",g);t.unbindingManager.registerUnbind(m,f)}if(i){l=document.createElement("td"),s.appendChild(l),l.className="cell-text-right";var v=document.createElement("span");l.appendChild(v);var y=e.BindingFactory.createPercentBinding(v,2,"innerHTML",!0),b=r.customBind(a,"value",y),T=new e.ClassBinding(v,"cell-5-padding-right",function(e){return null!=e}),S=r.customBind(a,"currency",T);t.unbindingManager.registerUnbind(v,function(){b(),S()})}return s},t.create_WPortfolioRanking_DOM=function(e,t){if(null!=t){var n=document.createElement("div");e.appendChild(n),n.className="cell-h4",n.innerHTML=t}var i=document.createElement("div");e.appendChild(i),i.className="cell-w-portfolio-ranking";var r=document.createElement("div");i.appendChild(r),r.className="cell  cell--w6  cell-w-portfolio-ranking--left";var a=document.createElement("div");return i.appendChild(a),a.className="cell  cell--w6  cell-w-portfolio-ranking--right",{leftColumn:r,rightColumn:a}},t.create_NPortfolioName_DOM=function(n,i){var r=document.createElement("span");n.appendChild(r),r.className="cell-noselect";var a=e.BindingFactory.createObjectFieldBinding(r,["name"],"innerHTML");i.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a)})},t.create_WPortfolioSelect_DOM=function(n,i,r,a,s,o,l,c,d,u){var h=document.createElement("div");if(n.appendChild(h),h.className="cell-portfolio-select",void 0!==typeof u){var p=document.createElement("div");h.appendChild(p),p.className="cell-pull-left cell-portfolio-select__title--interaction",InfrontUtil.addEventListener(p,"click",function(e){u()}),p.setAttribute("role","button"),InfrontUtil.addEventListener(p,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u()}),p.innerHTML=i}void 0===typeof u&&(p=document.createElement("div"),h.appendChild(p),p.className="cell-portfolio-select__title cell-pull-left",p.innerHTML=i);var m=document.createElement("div");h.appendChild(m),m.className="cell-portfolio-select__title cell-pull-left";var g=function(e){return!(1<e)};g(s.get())&&InfrontUtil.addClassName(m,"cell-display-none");var f=new e.ClassBinding(m,"cell-display-none",g);if(s.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){s.unbind(f)}),1!=l){var v=document.createElement("button");m.appendChild(v),v.className="cell-noselect cell-portfolio-select__scaling-button",v.type="button",InfrontUtil.addEventListener(v,"click",function(e){c(e)});var y=document.createElement("span");v.appendChild(y),y.className="cell-noselect cell-portfolio-select__scaling-button-text";var b=e.BindingFactory.createObjectFieldBinding(y,["displayName"],"innerHTML");r.observe(b,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(y,function(){r.unbind(b)});var T=document.createElement("span");v.appendChild(T),T.className="cell-noselect cell-portfolio-select__scaling-button-arrow";var S=document.createElement("div");m.appendChild(S),S.className="cell-pos-relative";var C=document.createElement("div");S.appendChild(C),C.className="cell-mininav__dd  cell-mininav__dd--right",C.setAttribute("style","display:none");var I=document.createElement("ul");C.appendChild(I),I.className="cell-ul";var _=function(e,t){var n=document.createElement("li");n.className="cell-noselect  cell-clear";var i=document.createElement("div");return n.appendChild(i),i.className="cell-mininav__dd__label",InfrontUtil.addEventListener(i,"click",function(t){d(e)}),i.setAttribute("role","button"),InfrontUtil.addEventListener(i,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||d(e)}),i.setAttribute("tabindex","0"),i.innerHTML=e.fullName,n},M=new e.ArrayBinding(I,new e.InlineRowFactory(_),null);a.observe(M),t.unbindingManager.registerUnbind(I,function(){a.unbind(M)})}if(1==l){var E=document.createElement("button");m.appendChild(E),E.className="cell-noselect cell-portfolio-select__scaling-button",E.type="button",InfrontUtil.addEventListener(E,"click",function(e){c(e)}),y=document.createElement("span"),E.appendChild(y),y.className="cell-noselect cell-portfolio-select__scaling-button-text";var w=e.BindingFactory.createObjectFieldBinding(y,["displayName"],"innerHTML");r.observe(w,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(y,function(){r.unbind(w)});var A=document.createElement("span");E.appendChild(A),A.className="cell-noselect cell-portfolio-select__scaling-button-arrow";var D=document.createElement("div");m.appendChild(D),D.className="cell-pos-relative",C=document.createElement("div"),D.appendChild(C),C.className="cell-portfolio-select__scaling__dd-wrapper";var O=document.createElement("div");C.appendChild(O),O.className="cell-portfolio-select__scaling__dd",I=document.createElement("ul"),O.appendChild(I),I.className="cell-ul",_=function(e,t){var n=document.createElement("li");n.className="cell-noselect  cell-clear";var i=document.createElement("div");return n.appendChild(i),i.className="cell-portfolio-select__scaling__dd__label",InfrontUtil.addEventListener(i,"click",function(t){d(e)}),i.setAttribute("role","button"),InfrontUtil.addEventListener(i,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||d(e)}),i.innerHTML=e.fullName,n};var k=new e.ArrayBinding(I,new e.InlineRowFactory(_),null);a.observe(k),t.unbindingManager.registerUnbind(I,function(){a.unbind(k)})}var R=document.createElement("div");h.appendChild(R),R.className="cell-portfolio-select__label  cell-pull-left";var N=function(e){return!(e<2)};N(s.get())&&InfrontUtil.addClassName(R,"cell-display-none");var L=new e.ClassBinding(R,"cell-display-none",N);s.observe(L,e.InitialUpdate.Synchronous);var P=new e.ArrayBinding(R,new e.InlineRowFactory(function(e,t){var n=document.createElement("span");return n.innerHTML=e.displayName,n}),null);return a.observe(P),t.unbindingManager.registerUnbind(R,function(){s.unbind(L),a.unbind(P)}),{dropdownContainer:C,dropdownLabel:y,dropDownList:I}},t.create_DTradingLogin_DOM=function(n,i,r,a,s,o,l){var c=document.createElement("div");c.className="cell-loginbox";var d=document.createElement("div");c.appendChild(d),d.className="cell-h3",d.innerHTML=l.get("tradingLogin","dialogTitle");var u=document.createElement("div");c.appendChild(u),u.className="cell-loginbox__row";var h=document.createElement("div");u.appendChild(h),h.className="cell-loginbox__message",""==s&&InfrontUtil.addClassName(h,"cell-display-none");var p=document.createElement("div");h.appendChild(p),p.innerHTML=s;var m=document.createElement("div");c.appendChild(m),m.className="cell-loginbox__row";var g=document.createElement("label");m.appendChild(g),g.className="cell-loginbox__label",g.innerHTML=l.get("tradingLogin","gateway"),g.setAttribute("id","gateWaySelectLabel");var f=document.createElement("select");m.appendChild(f),f.className="cell-input  cell-loginbox__select",f.setAttribute("aria-labelledby","gateWaySelectLabel"),i.bind(f);for(var v,y,b=0;b<n.length;b++)f.appendChild((v=n[b],y=void 0,(y=document.createElement("option")).innerHTML=v.name,y));t.unbindingManager.registerUnbind(f,function(){return i.unbind()});var T=document.createElement("div");c.appendChild(T),T.className="cell-loginbox__controls";var S=new e.ClassBinding(T,"cell-visibility-hidden",function(e){return 1!=e});o.observe(S,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){o.unbind(S)});var C=document.createElement("div");T.appendChild(C);var I=document.createElement("div");T.appendChild(I),I.className="cell-loginbox__row";var _=document.createElement("button");I.appendChild(_),_.className="cell-loginbox__button  cell-loginbox__button--login",InfrontUtil.addEventListener(_,"click",function(e){r(e)}),_.setAttribute("tabindex","0"),_.innerHTML=l.get("tradingLogin","logIn");var M=document.createElement("div");c.appendChild(M),M.className="cell-loginbox__row";var E=document.createElement("button");return M.appendChild(E),E.className="cell-loginbox__button  cell-loginbox__button--cancel",InfrontUtil.addEventListener(E,"click",function(e){a(e)}),E.setAttribute("tabindex","0"),E.innerHTML=l.get(null,"cancel"),{inputContainer:C,widgetRoot:c}},t.create_DTradingLoginInputFields_DOM=function(n,i,r,a,s){var o=document.createElement("div");n.appendChild(o);for(var l=function(e,n){var i=document.createElement("div");i.className="cell-input__row";var a=document.createElement("label");if(i.appendChild(a),a.className="cell-loginbox__label",a.innerHTML=e.label,!e.mask){var o=document.createElement("input");i.appendChild(o),o.className="cell-loginbox__input",o.type="text",o.name="wtk-trading-login-name",o.setAttribute("aria-label",""+s.get("accessibility","username")),r[e.key].bind(o),t.unbindingManager.registerUnbind(o,function(){return r[e.key].unbind()})}if(e.mask){var l=document.createElement("input");i.appendChild(l),l.className="cell-loginbox__input",l.type="password",l.name="wtk-trading-login-password",l.setAttribute("aria-label",""+s.get("accessibility","password")),r[e.key].bind(l),t.unbindingManager.registerUnbind(l,function(){return r[e.key].unbind()})}return i},c=0;c<i.length;c++)o.appendChild(l(i[c]));var d=document.createElement("div");n.appendChild(d),d.className="cell-input__row";var u=document.createElement("div");d.appendChild(u),u.className="cell-loginbox__warning";var h=function(e){return!(""!=e)};h(a.get())&&InfrontUtil.addClassName(u,"cell-display-none");var p=new e.ClassBinding(u,"cell-display-none",h);a.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(u,function(){a.unbind(p)});var m=document.createElement("div");u.appendChild(m),m.className="cell-loginbox__warning__label";var g=e.BindingFactory.createValueBinding(m,"innerHTML");a.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){a.unbind(g)})},t.create_Overlay_DOM=function(n,i,r,a){var s=document.createElement("div");n.appendChild(s),s.className="cell-overlay-root";var o=function(e){return!(1==e)};o(i.get())&&InfrontUtil.addClassName(s,"cell-display-none");var l=new e.ClassBinding(s,"cell-display-none",o);i.observe(l,e.InitialUpdate.Synchronous);var c=new e.ClassBinding(s,"cell-off-screen",function(e){return 0==e});i.observe(c,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){i.unbind(l),i.unbind(c)});var d=document.createElement("div");s.appendChild(d),d.className="cell-overlay-fade",InfrontUtil.addEventListener(d,"click",function(e){r(e)}),d.setAttribute("role","button"),InfrontUtil.addEventListener(d,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r(e)});var u=function(e){return!(1==e)};u(i.get())&&InfrontUtil.addClassName(d,"cell-display-none");var h=new e.ClassBinding(d,"cell-display-none",u);i.observe(h,e.InitialUpdate.Synchronous);var p=new e.ClassBinding(d,"cell-overlay-fade--show",function(e){return 1==e});i.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){i.unbind(h),i.unbind(p)});var m=document.createElement("div");s.appendChild(m),m.className="cell-overlay_lightbox  cell-content  cell-no-padding",m.setAttribute("style","overflow: hidden;"),m.setAttribute("tabindex","0");var g=new e.ClassBinding(m,"cell-overlay_lightbox--show",function(e){return 1==e});i.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){i.unbind(g)});var f=document.createElement("div");return m.appendChild(f),f.className="cell-overlay-lightbox__close-btn",InfrontUtil.addEventListener(f,"click",function(e){r(e)}),f.setAttribute("role","button"),InfrontUtil.addEventListener(f,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r(e)}),f.setAttribute("aria-label",""+a.get("accessibility","closeButton")),{lightbox:m,closeBtn:f}},t.create_DNotifications_DOM=function(n,i,r,a,s){var o=document.createElement("div");n.appendChild(o),o.className="cell-notifications";var l=function(e){return!(1==e)};l(r.get())&&InfrontUtil.addClassName(o,"cell-display-none");var c=new e.ClassBinding(o,"cell-display-none",l);r.observe(c,e.InitialUpdate.Synchronous);var d=new e.ArrayBinding(o,new e.InlineRowFactory(function(e,t){var n=document.createElement("div");n.className="cell-notifications__row",InfrontUtil.addEventListener(n,"click",function(t){s(e.internalId)}),n.setAttribute("role","button"),InfrontUtil.addEventListener(n,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||s(e.internalId)}),InfrontUtil.addClassName(n,e.class);var i=document.createElement("div");n.appendChild(i),i.className="cell-notifications__row--date",i.innerHTML=InfrontUtil.formatStandardTimestamp(e.timeStamp);var r=document.createElement("div");n.appendChild(r),r.className="cell-notifications__row--message",r.innerHTML=e.message;var o=document.createElement("div");return n.appendChild(o),o.className="cell-notifications__row--close-button",InfrontUtil.addEventListener(o,"click",function(t){a(e.internalId)}),o.setAttribute("role","button"),InfrontUtil.addEventListener(o,"keyup",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||a(e.internalId)}),n}),null);i.observe(d),t.unbindingManager.registerUnbind(o,function(){r.unbind(c),i.unbind(d)})},t.create_WStatus_DOM=function(n,i){var r=document.createElement("div");n.appendChild(r);var a=new e.ClassBinding(r,"status-connected-ok",function(e){return 1==e});i.observe(a,e.InitialUpdate.Synchronous);var s=new e.ClassBinding(r,"status-connected-fail",function(e){return 0==e});i.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a),i.unbind(s)})},t.create_WIdsStatus_DOM=function(n,i){var r=document.createElement("div");n.appendChild(r);var a=new e.ClassBinding(r,"status-connected-ok",function(t){return t==e.InfrontStatus.Connected});i.observe(a,e.InitialUpdate.Synchronous);var s=new e.ClassBinding(r,"status-connected-reconnnecting",function(t){return t==e.InfrontStatus.Connecting});i.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){i.unbind(a),i.unbind(s)})},t.create_WScreener_DOM=function(n,i,r){var a=document.createElement("div");n.appendChild(a),a.className="cell-h4";var s=e.BindingFactory.createValueBinding(a,"innerHTML");i.observe(s,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(a,function(){i.unbind(s)});var o=document.createElement("div");n.appendChild(o);var l=document.createElement("div");return n.appendChild(l),l.className="cell-row cell--w12",o},t.create_WBondsTrading_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S,C,I,_,M,E,w,A,D,O){var k=document.createElement("div");n.appendChild(k),k.className="cell-w-bond-trader";var R=document.createElement("div");k.appendChild(R),R.className="cell-w-bond-trader__tabs";var N=document.createElement("div");R.appendChild(N),N.className="cell-w-bond-trader__tabs__tab",InfrontUtil.addEventListener(N,"click",function(e){r(0)}),N.setAttribute("role","button"),InfrontUtil.addEventListener(N,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r(0)}),N.innerHTML=O.get("bondsTrading","spot");var L=new e.ClassBinding(N,"cell-w-bond-trader__tabs__tab--selected",function(e){return 0==e});f.observe(L,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(N,function(){f.unbind(L)});var P=document.createElement("div");R.appendChild(P),P.className="cell-w-bond-trader__tabs__tab",InfrontUtil.addEventListener(P,"click",function(e){r(1)}),P.setAttribute("role","button"),InfrontUtil.addEventListener(P,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r(1)}),P.innerHTML=O.get("bondsTrading","forward");var F=new e.ClassBinding(P,"cell-w-bond-trader__tabs__tab--selected",function(e){return 1==e});f.observe(F,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(P,function(){f.unbind(F)});var x=document.createElement("div");k.appendChild(x),x.className="cell-w-bond-trader__panel";var U=document.createElement("div");x.appendChild(U),U.className="cell-w-bond-trader__panel__section  cell-1-border-bottom";var B=document.createElement("div");U.appendChild(B),B.className="cell-w-bond-trader-input-container";var W=document.createElement("label");B.appendChild(W),W.className="cell-vertical-align-middle cell-5-margin-right";var H=function(e){return!(0==e)};H(f.get())&&InfrontUtil.addClassName(W,"cell-display-none");var V=new e.ClassBinding(W,"cell-display-none",H);f.observe(V,e.InitialUpdate.Synchronous),W.innerHTML=O.get("bondsTrading","spot"),t.unbindingManager.registerUnbind(W,function(){f.unbind(V)});var G=document.createElement("label");B.appendChild(G),G.className="cell-vertical-align-middle cell-5-margin-right";var z=function(e){return!(1==e)};z(f.get())&&InfrontUtil.addClassName(G,"cell-display-none");var q=new e.ClassBinding(G,"cell-display-none",z);f.observe(q,e.InitialUpdate.Synchronous),G.innerHTML=O.get("bondsTrading","forward"),t.unbindingManager.registerUnbind(G,function(){f.unbind(q)});var Y=document.createElement("label");B.appendChild(Y),Y.className="cell-vertical-align-middle",Y.innerHTML=O.get("bondsTrading","direction");var K=document.createElement("div");U.appendChild(K),K.className="cell-pull-right";var X=document.createElement("div");K.appendChild(X),X.className="cell-radio-filter__group  cell-radio-filter__group--inline",X.setAttribute("style","width:150px;border-top:0px;"),InfrontUtil.addEventListener(X,"click",function(e){a(0)}),X.setAttribute("role","button"),InfrontUtil.addEventListener(X,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a(0)});var j=document.createElement("div");X.appendChild(j),j.className="cell-w-bond-trader__paneo-filter__group__component  cell-radio-filter__group__component--radio-button";var Z=new e.ClassBinding(j,"cell-radio-filter__group__component--radio-button--selected",function(e){return 0==e});v.observe(Z,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(j,function(){v.unbind(Z)});var J=document.createElement("div");X.appendChild(J),J.className="cell-radio-filter__group__component  cell-radio-filter__group__component--filter-name",J.innerHTML=O.get("bondsTrading","buy");var Q=document.createElement("div");K.appendChild(Q),Q.className="cell-radio-filter__group  cell-radio-filter__group--inline",Q.setAttribute("style","width:150px;border-top:0px;"),InfrontUtil.addEventListener(Q,"click",function(e){a(1)}),Q.setAttribute("role","button"),InfrontUtil.addEventListener(Q,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a(1)});var $=document.createElement("div");Q.appendChild($),$.className="cell-radio-filter__group__component  cell-radio-filter__group__component--radio-button";var ee=new e.ClassBinding($,"cell-radio-filter__group__component--radio-button--selected",function(e){return 1==e});v.observe(ee,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind($,function(){v.unbind(ee)});var te=document.createElement("div");Q.appendChild(te),te.className="cell-radio-filter__group__component  cell-radio-filter__group__component--filter-name",te.innerHTML=O.get("bondsTrading","sell");var ne=document.createElement("div");x.appendChild(ne),ne.className="cell-w-bond-trader__panel__section  cell-1-border-bottom";var ie=document.createElement("div");ne.appendChild(ie),ie.className="cell-w-order-entry__input-pair cell-5-margin-bottom";var re=document.createElement("label");ie.appendChild(re),re.innerHTML=O.get("bondsTrading","instrument");var ae=document.createElement("span");re.appendChild(ae),ae.className="cell-override--trade-search  cell-pull-right  cell-width--150px";var se=document.createElement("div");ne.appendChild(se),se.className="cell-w-bond-trader__panel__section__item  cell-w-bond-trader__panel__section__item--instrument-info";var oe=e.BindingFactory.createHTMLAttributeBinding(se,"style",function(e){return"display:"+(null==e?"none":"inline-block")});m.observe(oe),t.unbindingManager.registerUnbind(se,function(){m.unbind(oe)});var le=document.createElement("div");se.appendChild(le),le.className="cell-w-bond-trader__panel__section__item__name";var ce=e.BindingFactory.createObjectFieldBinding(le,["full_name"],"innerHTML");m.observe(ce,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(le,function(){m.unbind(ce)});var de=document.createElement("div");se.appendChild(de),de.className="cell-w-bond-trader__panel__section__item__instrument-fields  cell-pull-right  cell-text-right";var ue=e.BindingFactory.createHTMLAttributeBinding(de,"style",function(e){return"display:"+(0==e?"inline-block;width:33%;":"none;")});f.observe(ue),t.unbindingManager.registerUnbind(de,function(){f.unbind(ue)});var he=document.createElement("label");de.appendChild(he),he.className="cell-w-bond-trading__instrument__label ",he.innerHTML=O.get("bondsTrading","spot_price");var pe=document.createElement("div");de.appendChild(pe),pe.className="cell-w-bond-trading__instrument__value  cell-w-bond-trading__instrument__value--spot-price";var me=e.BindingFactory.createValueBinding(pe,"innerHTML");_.observe(me,e.InitialUpdate.Synchronous);var ge=e.BindingFactory.createHTMLAttributeBinding(pe,"style",function(e){return"display:"+(0==e?"block;":"none;")});v.observe(ge),t.unbindingManager.registerUnbind(pe,function(){_.unbind(me),v.unbind(ge)});var fe=document.createElement("div");de.appendChild(fe),fe.className="cell-w-bond-trading__instrument__value  cell-w-bond-trading__instrument__value--spot-price";var ve=e.BindingFactory.createValueBinding(fe,"innerHTML");M.observe(ve,e.InitialUpdate.Synchronous);var ye=e.BindingFactory.createHTMLAttributeBinding(fe,"style",function(e){return"display:"+(1==e?"block;":"none;")});v.observe(ye),t.unbindingManager.registerUnbind(fe,function(){M.unbind(ve),v.unbind(ye)});var be=document.createElement("div");se.appendChild(be),be.className="cell-w-bond-trader__panel__section__item__instrument-fields";var Te=e.BindingFactory.createHTMLAttributeBinding(be,"style",function(e){return"display:"+(1==e?"inline-block;width:33%;":"none;")});f.observe(Te),t.unbindingManager.registerUnbind(be,function(){f.unbind(Te)});var Se=document.createElement("label");be.appendChild(Se),Se.className="cell-w-bond-trading__instrument__label ",Se.innerHTML=O.get("bondsTrading","spot_price");var Ce=document.createElement("div");be.appendChild(Ce),Ce.className="cell-w-bond-trading__instrument__value  cell-w-bond-trading__instrument__value--spot-price";var Ie=e.BindingFactory.createValueBinding(Ce,"innerHTML");_.observe(Ie,e.InitialUpdate.Synchronous);var _e=e.BindingFactory.createHTMLAttributeBinding(Ce,"style",function(e){return"display:"+(0==e?"block;":"none;")});v.observe(_e),t.unbindingManager.registerUnbind(Ce,function(){_.unbind(Ie),v.unbind(_e)});var Me=document.createElement("div");be.appendChild(Me),Me.className="cell-w-bond-trading__instrument__value  cell-w-bond-trading__instrument__value--spot-price";var Ee=e.BindingFactory.createValueBinding(Me,"innerHTML");M.observe(Ee,e.InitialUpdate.Synchronous);var we=e.BindingFactory.createHTMLAttributeBinding(Me,"style",function(e){return"display:"+(1==e?"block;":"none;")});v.observe(we),t.unbindingManager.registerUnbind(Me,function(){M.unbind(Ee),v.unbind(we)});var Ae=document.createElement("div");se.appendChild(Ae),Ae.className="cell-w-bond-trader__panel__section__item__instrument-fields  cell-text-center ";var De=e.BindingFactory.createHTMLAttributeBinding(Ae,"style",function(e){return"display:"+(e?"inline-block;width:33%;":"none")});E.observe(De),t.unbindingManager.registerUnbind(Ae,function(){E.unbind(De)});var Oe=document.createElement("label");Ae.appendChild(Oe),Oe.className="cell-w-bond-trading__instrument__label";var ke=function(e){return!(null==e)};ke(I.get())&&InfrontUtil.addClassName(Oe,"cell-display-none");var Re=new e.ClassBinding(Oe,"cell-display-none",ke);I.observe(Re,e.InitialUpdate.Synchronous),Oe.innerHTML=O.get("bondsTrading","discount"),t.unbindingManager.registerUnbind(Oe,function(){I.unbind(Re)});var Ne=document.createElement("label");Ae.appendChild(Ne),Ne.className="cell-w-bond-trading__instrument__label";var Le=function(e){return!(null==e)};Le(C.get())&&InfrontUtil.addClassName(Ne,"cell-display-none");var Pe=new e.ClassBinding(Ne,"cell-display-none",Le);C.observe(Pe,e.InitialUpdate.Synchronous),Ne.innerHTML=O.get("bondsTrading","premium"),t.unbindingManager.registerUnbind(Ne,function(){C.unbind(Pe)});var Fe=document.createElement("div");Ae.appendChild(Fe),Fe.className="cell-w-bond-trading__instrument__value  cell-w-bond-trading__instrument__value--spot-price";var xe=function(e){return!(null==e)};xe(I.get())&&InfrontUtil.addClassName(Fe,"cell-display-none");var Ue=new e.ClassBinding(Fe,"cell-display-none",xe);I.observe(Ue,e.InitialUpdate.Synchronous);var Be=e.BindingFactory.createValueBinding(Fe,"innerHTML");C.observe(Be,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Fe,function(){I.unbind(Ue),C.unbind(Be)});var We=document.createElement("div");Ae.appendChild(We),We.className="cell-w-bond-trading__instrument__value  cell-w-bond-trading__instrument__value--spot-price";var He=function(e){return!(null==e)};He(C.get())&&InfrontUtil.addClassName(We,"cell-display-none");var Ve=new e.ClassBinding(We,"cell-display-none",He);C.observe(Ve,e.InitialUpdate.Synchronous);var Ge=e.BindingFactory.createValueBinding(We,"innerHTML");I.observe(Ge,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(We,function(){C.unbind(Ve),I.unbind(Ge)});var ze=document.createElement("div");se.appendChild(ze),ze.className="cell-w-bond-trader__panel__section__item__instrument-fields  cell-pull-right  cell-text-right";var qe=e.BindingFactory.createHTMLAttributeBinding(ze,"style",function(e){return"display:"+(e?"inline-block;width:33%;":"none")});E.observe(qe),t.unbindingManager.registerUnbind(ze,function(){E.unbind(qe)});var Ye=document.createElement("label");ze.appendChild(Ye),Ye.className="cell-w-bond-trading__instrument__label",Ye.innerHTML=O.get("bondsTrading","forward_price");var Ke=document.createElement("div");ze.appendChild(Ke),Ke.className="cell-w-bond-trading__instrument__value  cell-w-bond-trading__instrument__value--forward-price";var Xe=e.BindingFactory.createValueBinding(Ke,"innerHTML");S.observe(Xe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ke,function(){S.unbind(Xe)});var je=document.createElement("div");se.appendChild(je),je.className="cell-w-bond-trader__panel__section__item__instrument-fields",je.setAttribute("style","width:100%;display:inline-block;");var Ze=document.createElement("div");je.appendChild(Ze),Ze.className="cell-w-bond-trading__instrument-field  cell-w-bond-trading__instrument-field--last-updated",Ze.setAttribute("style","width:33%;display:inline-block;");var Je=document.createElement("label");Ze.appendChild(Je),Je.className="cell-w-bond-trading__instrument__label",Je.innerHTML=O.get("bondsTrading","last_updated");var Qe=document.createElement("div");Ze.appendChild(Qe);var $e=e.BindingFactory.createObjectFieldBinding(Qe,["last_valid_date"],"innerHTML");b.observe($e,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Qe,function(){b.unbind($e)});var et=document.createElement("div");x.appendChild(et),et.className="cell-w-bond-trader__panel__section  cell-1-border-bottom";var tt=document.createElement("div");et.appendChild(tt),tt.className="cell-w-order-entry__input-pair";var nt=document.createElement("label");tt.appendChild(nt),nt.innerHTML=O.get("bondsTrading","date");var it=e.BindingFactory.createHTMLAttributeBinding(nt,"style",function(t){return"display:"+(t==e.BondsTradeType.SPOT?"block":"none")+";line-height: 26px;"});f.observe(it),t.unbindingManager.registerUnbind(nt,function(){f.unbind(it)});var rt=document.createElement("span");nt.appendChild(rt),rt.className="cell-width--150px  cell-pull-right  cell-text-right  cell-input--invalid",rt.setAttribute("style","line-height:26px");var at=e.BindingFactory.createValueBinding(rt,"innerHTML");y.observe(at,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(rt,function(){y.unbind(at)});var st=document.createElement("label");tt.appendChild(st),st.innerHTML=O.get("bondsTrading","forward_date");var ot=e.BindingFactory.createHTMLAttributeBinding(st,"style",function(t){return"display:"+(t==e.BondsTradeType.FORWARD?"inline-block":"none")});f.observe(ot),t.unbindingManager.registerUnbind(st,function(){f.unbind(ot)});var lt=document.createElement("div");tt.appendChild(lt),lt.className="cell-width--150px  cell-pull-right";var ct=e.BindingFactory.createHTMLAttributeBinding(lt,"style",function(t){return"display:"+(t==e.BondsTradeType.FORWARD?"inline-block":"none")});f.observe(ct),t.unbindingManager.registerUnbind(lt,function(){f.unbind(ct)});var dt=document.createElement("div");et.appendChild(dt),dt.className="cell-w-order-entry__input-pair";var ut=document.createElement("label");dt.appendChild(ut),ut.innerHTML=O.get("bondsTrading","nominal");var ht=document.createElement("input");ut.appendChild(ht),ht.className="cell-input  cell-width--150px  cell-text-right",ht.type="text",ht.setAttribute("maxlength","20"),ht.setAttribute("number","true"),c.bind(ht),t.unbindingManager.registerUnbind(ht,function(){return c.unbind()});var pt=document.createElement("div");et.appendChild(pt),pt.className="cell-w-order-entry__input-pair";var mt=document.createElement("label");pt.appendChild(mt),mt.innerHTML=O.get("bondsTrading","deposit_num");var gt=document.createElement("input");mt.appendChild(gt),gt.className="cell-input  cell-width--150px  cell-text-right",gt.type="text",u.bind(gt),t.unbindingManager.registerUnbind(gt,function(){return u.unbind()});var ft=document.createElement("div");x.appendChild(ft),ft.className="cell-w-bond-trader__panel__section";var vt=document.createElement("div");ft.appendChild(vt);var yt=document.createElement("div");vt.appendChild(yt),yt.className="cell-w-order-entry__input-pair cell-5-margin-bottom";var bt=document.createElement("div");yt.appendChild(bt),bt.className="cell-h4",bt.innerHTML=O.get("bondsTrading","account_details");var Tt=document.createElement("div");vt.appendChild(Tt),Tt.className="cell-w-order-entry__input-pair cell-w-order-entry__input-pair label cell-5-margin-bottom";var St=document.createElement("label");Tt.appendChild(St),St.className="cell-pull-left",St.innerHTML=O.get("orderEntry","portfolio");var Ct=document.createElement("div");Tt.appendChild(Ct),Ct.className="cell-pull-right cell-5-margin-right";var It=document.createElement("div");vt.appendChild(It),It.className="cell-w-order-entry__input-pair cell-w-order-entry__input-pair label cell-5-margin-bottom";var _t=function(e){return!(0==e)};_t(v.get())&&InfrontUtil.addClassName(It,"cell-display-none");var Mt=new e.ClassBinding(It,"cell-display-none",_t);v.observe(Mt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(It,function(){v.unbind(Mt)});var Et=document.createElement("div");It.appendChild(Et),Et.className="cell-pull-left";var wt=function(e){return!(1==e)};wt(w.get())&&InfrontUtil.addClassName(Et,"cell-display-none");var At=new e.ClassBinding(Et,"cell-display-none",wt);w.observe(At,e.InitialUpdate.Synchronous),Et.innerHTML=O.get("bondsTrading","depot_acc"),t.unbindingManager.registerUnbind(Et,function(){w.unbind(At)});var Dt=document.createElement("div");It.appendChild(Dt),Dt.className="cell-pull-right";var Ot=document.createElement("div");vt.appendChild(Ot),Ot.className="cell-w-order-entry__input-pair cell-5-margin-bottom";var kt=document.createElement("label");Ot.appendChild(kt),kt.innerHTML=O.get("bondsTrading","loan_transaction_acc");var Rt=document.createElement("input");kt.appendChild(Rt),Rt.className="cell-input  cell-width--220px  cell-text-right",Rt.type="text",Rt.setAttribute("maxlength","15"),Rt.setAttribute("number","true"),h.bind(Rt),t.unbindingManager.registerUnbind(Rt,function(){return h.unbind()});var Nt=document.createElement("div");vt.appendChild(Nt),Nt.className="cell-w-order-entry__input-pair cell-5-margin-bottom";var Lt=document.createElement("label");Nt.appendChild(Lt),Lt.innerHTML=O.get("bondsTrading","free_text");var Pt=document.createElement("input");Lt.appendChild(Pt),Pt.className="cell-input  cell-input--220px  cell-text-right",Pt.type="text",p.bind(Pt),t.unbindingManager.registerUnbind(Pt,function(){return p.unbind()});var Ft=document.createElement("div");ft.appendChild(Ft),Ft.className="cell cell--w12";var xt=document.createElement("div");Ft.appendChild(xt),xt.className="cell-w-bond-trader-input-container  cell-pull-right  cell-5-margin-bottom";var Ut=document.createElement("button");xt.appendChild(Ut),Ut.className="cell-button  cell-button--confirm cell-5-margin-right",InfrontUtil.addEventListener(Ut,"click",function(e){o()});var Bt=function(e){return!(null==e)};Bt(D.get())&&InfrontUtil.addClassName(Ut,"cell-display-none");var Wt=new e.ClassBinding(Ut,"cell-display-none",Bt);D.observe(Wt,e.InitialUpdate.Synchronous),Ut.innerHTML=O.get("bondsTrading","clear_order"),t.unbindingManager.registerUnbind(Ut,function(){D.unbind(Wt)});var Ht=document.createElement("button");xt.appendChild(Ht),Ht.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(Ht,"click",function(e){s()});var Vt=function(e){return!(null==e)};Vt(D.get())&&InfrontUtil.addClassName(Ht,"cell-display-none");var Gt=new e.ClassBinding(Ht,"cell-display-none",Vt);D.observe(Gt,e.InitialUpdate.Synchronous),Ht.innerHTML=O.get("bondsTrading","place_order");var zt=e.BindingFactory.createValueBinding(Ht,"disabled");g.observe(zt);var qt=new e.ClassBinding(Ht,"cell-button--disabled",function(e){return 1==e});g.observe(qt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Ht,function(){D.unbind(Gt),g.unbind(zt),g.unbind(qt)});var Yt=document.createElement("button");xt.appendChild(Yt),Yt.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(Yt,"click",function(e){o()});var Kt=function(e){return!(null!=e)};Kt(D.get())&&InfrontUtil.addClassName(Yt,"cell-display-none");var Xt=new e.ClassBinding(Yt,"cell-display-none",Kt);D.observe(Xt,e.InitialUpdate.Synchronous),Yt.innerHTML=O.get("bondsTrading","clear_order"),t.unbindingManager.registerUnbind(Yt,function(){D.unbind(Xt)});var jt=document.createElement("div");ft.appendChild(jt),jt.className="cell--w12";var Zt=document.createElement("div");jt.appendChild(Zt),Zt.className="cell-w-bond-trader-input-container  cell-pull-right";var Jt=e.BindingFactory.createValueBinding(Zt,"innerHTML");A.observe(Jt,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Zt,function(){A.unbind(Jt)});var Qt=document.createElement("div");ft.appendChild(Qt),Qt.className="cell--w12";var $t=document.createElement("div");Qt.appendChild($t),$t.className="cell-w-bond-trader-input-container  cell-pull-right";var en=e.BindingFactory.createValueBinding($t,"innerHTML");return D.observe(en,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind($t,function(){D.unbind(en)}),{searchBoxContainer:ae,buySellDropdownContainer:K,portfolioContainer:Ct,depotNumberDropdownContainer:Dt,dateContainer:lt}},t.create_WColumnChooser_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g){var f=document.createElement("div");if(n.appendChild(f),f.className="cell-w-column-chooser__panel",null!=i&&""!=i){var v=document.createElement("div");f.appendChild(v),v.className="cell-h4",v.innerHTML=i}var y=document.createElement("div");f.appendChild(y),y.className="cell-flex-row";var b=document.createElement("div");y.appendChild(b),b.className="cell-flex-column cell-w-column-chooser__content-col";var T=document.createElement("div");b.appendChild(T),T.className="cell-h4 cell-w-column-chooser__title cell-widget-med-text",T.innerHTML=g.get("columnChooser","availableColumns");var S=document.createElement("div");b.appendChild(S),S.className="cell-w-column-chooser__input-pair";var C=document.createElement("label");S.appendChild(C),C.innerHTML=g.get("columnChooser","filter");var I=document.createElement("input");C.appendChild(I),I.className="cell-input  cell-width--200px  cell-text-right",I.type="text",r.bind(I),t.unbindingManager.registerUnbind(I,function(){return r.unbind()});var _=document.createElement("div");y.appendChild(_),_.className="cell-flex-column cell-flex-shrink cell-w-column-chooser__seperator-col";var M=document.createElement("div");y.appendChild(M),M.className="cell-flex-column cell-w-column-chooser__content-col";var E=document.createElement("div");M.appendChild(E),E.className="cell-h4 cell-w-column-chooser__title cell-widget-med-text",E.innerHTML=g.get("columnChooser","displayedColumns");var w=document.createElement("div");M.appendChild(w),w.className="cell-w-column-chooser__text",w.innerHTML=g.get("columnChooser","displayedColumnsNote");var A=document.createElement("div");f.appendChild(A),A.className="cell-flex-row cell-no-margin-bottom";var D=document.createElement("div");A.appendChild(D),D.className="cell-flex-column cell-w-column-chooser__columns-list cell-w-column-chooser__content-col";var O=document.createElement("div");A.appendChild(O),O.className="cell-flex-column cell-flex-shrink cell-w-column-chooser__seperator-col";var k=document.createElement("div");O.appendChild(k),k.className="cell-w-column-chooser__button-add";var R=document.createElement("button");k.appendChild(R),R.className="cell-button  cell-button--confirm  cell-button--add",InfrontUtil.addEventListener(R,"click",function(e){l(e)});var N=new e.ClassBinding(R,"cell-button--disabled",function(e){return 1==e});a.observe(N,e.InitialUpdate.Synchronous);var L=e.BindingFactory.createValueBinding(R,"disabled");a.observe(L),t.unbindingManager.registerUnbind(R,function(){a.unbind(N),a.unbind(L)});var P=document.createElement("div");O.appendChild(P),P.className="cell-w-column-chooser__button-remove";var F=document.createElement("button");P.appendChild(F),F.className="cell-button  cell-button--confirm  cell-button--remove",InfrontUtil.addEventListener(F,"click",function(e){c(e)});var x=new e.ClassBinding(F,"cell-button--disabled",function(e){return 1==e});s.observe(x,e.InitialUpdate.Synchronous);var U=e.BindingFactory.createValueBinding(F,"disabled");s.observe(U),t.unbindingManager.registerUnbind(F,function(){s.unbind(x),s.unbind(U)});var B=document.createElement("div");A.appendChild(B),B.className="cell-flex-column cell-w-column-chooser__columns-list cell-w-column-chooser__content-col";var W=document.createElement("div");f.appendChild(W),W.className="cell-flex-row";var H=document.createElement("div");W.appendChild(H),H.className="cell-flex-column cell-w-column-chooser__content-col";var V=document.createElement("div");W.appendChild(V),V.className="cell-flex-column cell-w-column-chooser__seperator-col";var G=document.createElement("div");W.appendChild(G),G.className="cell-flex-column cell-row  cell-w-column-chooser__content-col";var z=document.createElement("div");G.appendChild(z),z.className="cell";var q=document.createElement("a");z.appendChild(q),q.className="cell-w-column-chooser__link",InfrontUtil.addEventListener(q,"click",function(e){u(e)}),InfrontUtil.addEventListener(q,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u(e)}),q.setAttribute("role","button"),q.setAttribute("tabindex","0"),q.innerHTML=g.get("columnChooser","removeAll");var Y=document.createElement("div");G.appendChild(Y),Y.className="cell  cell-pull-right";var K=document.createElement("a");Y.appendChild(K),K.className="cell-w-column-chooser__link",InfrontUtil.addEventListener(K,"click",function(e){d(e)}),InfrontUtil.addEventListener(K,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)}),K.setAttribute("role","button"),K.setAttribute("tabindex","0"),K.innerHTML=g.get("columnChooser","resetToDefault");var X=document.createElement("div");f.appendChild(X),X.className="cell-w-column-chooser__divider";var j=document.createElement("div");f.appendChild(j),j.className="cell-10-margin-top  cell-w-column-chooser__button-row-wrapper";var Z=document.createElement("div");j.appendChild(Z),Z.className="cell-w-column-chooser__button-row  cell-pull-right";var J=document.createElement("div");Z.appendChild(J),J.className="cell-w-column-chooser__button-close  cell-pull-right";var Q=document.createElement("button");J.appendChild(Q),Q.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(Q,"click",function(e){h(e)}),Q.innerHTML=g.get("columnChooser","close"),1!=o&&InfrontUtil.addClassName(Q,"cell-display-none");var $=document.createElement("div");Z.appendChild($),$.className="cell-w-column-chooser__button-ok  cell-pull-right";var ee=document.createElement("button");$.appendChild(ee),ee.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(ee,"click",function(e){p(e)}),ee.innerHTML=g.get("columnChooser","ok"),0!=o&&InfrontUtil.addClassName(ee,"cell-display-none");var te=document.createElement("div");Z.appendChild(te),te.className="cell-w-column-chooser__button-cancel  cell-pull-right";var ne=document.createElement("button");return te.appendChild(ne),ne.className="cell-button  cell-button--cancel",InfrontUtil.addEventListener(ne,"click",function(e){m(e)}),ne.innerHTML=g.get("columnChooser","cancel"),0!=o&&InfrontUtil.addClassName(ne,"cell-display-none"),{aListElement:D,bListElement:B,filterInput:I}},t.create_WColumnChooserCategory_DOM=function(n,i,r,a,s){var o=document.createElement("div");o.className="cell-w-column-chooser__category",InfrontUtil.addEventListener(o,"click",function(e){a(i)}),o.setAttribute("role","button"),InfrontUtil.addEventListener(o,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a(i)}),InfrontUtil.addEventListener(o,"dblclick",function(e){s(i)});var l=new e.ClassBinding(o,"cell-w-column-chooser__category--collapsed",function(e){return 0==e});r.observe(l,e.InitialUpdate.Synchronous);var c=new e.ClassBinding(o,"cell-w-column-chooser__category--expanded",function(e){return 1==e});r.observe(c,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){r.unbind(l),r.unbind(c)});var d=document.createElement("div");o.appendChild(d),d.className="cell-w-column-chooser__category-title",d.innerHTML=n;var u=document.createElement("div");o.appendChild(u),u.className="cell-w-column-chooser__category-content";var h=function(e){return!(1==e)};h(r.get())&&InfrontUtil.addClassName(u,"cell-display-none");var p=new e.ClassBinding(u,"cell-display-none",h);return r.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(u,function(){r.unbind(p)}),{categoryElement:o,contentElement:u}},t.create_WColumnChooserItem_DOM=function(n,i,r,a,s,o,l,c,d,u){var h=document.createElement("div");h.className="cell-w-column-chooser__item",InfrontUtil.addEventListener(h,"click",function(e){d(e)}),h.setAttribute("role","button"),InfrontUtil.addEventListener(h,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)}),InfrontUtil.addEventListener(h,"dblclick",function(e){u(e)});var p=new e.ClassBinding(h,"cell-w-column-chooser__item--selected",function(e){return 1==e});a.observe(p,e.InitialUpdate.Synchronous);var m=function(e){return!(0==e)};m(o.get())&&InfrontUtil.addClassName(h,"cell-display-none");var g=new e.ClassBinding(h,"cell-display-none",m);o.observe(g,e.InitialUpdate.Synchronous);var f=function(e){return!(1==e)};f(s.get())&&InfrontUtil.addClassName(h,"cell-display-none");var v=new e.ClassBinding(h,"cell-display-none",f);s.observe(v,e.InitialUpdate.Synchronous);var y=new e.ClassBinding(h,"cell-w-column-chooser__item--draggable",function(e){return 1==e});l.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(h,function(){a.unbind(p),o.unbind(g),s.unbind(v),l.unbind(y)});var b=document.createElement("ul");h.appendChild(b),b.className="cell-list-inline-block";var T=document.createElement("li");b.appendChild(T),T.className="cell-w-column-chooser__item-drag";var S=function(e){return!(1==e)};S(l.get())&&InfrontUtil.addClassName(T,"cell-display-none");var C=new e.ClassBinding(T,"cell-display-none",S);l.observe(C,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){l.unbind(C)});var I=document.createElement("li");if(b.appendChild(I),I.innerHTML=i,n){var _=document.createElement("li");b.appendChild(_),_.className="cell-w-column-chooser__item-hint",_.innerHTML=n}var M=document.createElement("li");b.appendChild(M),M.className="cell-w-column-chooser__item--locked";var E=function(e){return!(1==e)};E(c.get())&&InfrontUtil.addClassName(M,"cell-display-none");var w=new e.ClassBinding(M,"cell-display-none",E);return c.observe(w,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(M,function(){c.unbind(w)}),h},t.create_WPutCall_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m){var g=document.createElement("div");n.appendChild(g),g.className="cell-h4";var f=document.createElement("span");g.appendChild(f),f.innerHTML=i;var v=document.createElement("span");g.appendChild(v);var y=function(e){return!(""!=e&&""!=i)};y(r.get())&&InfrontUtil.addClassName(v,"cell-display-none");var b=new e.ClassBinding(v,"cell-display-none",y);r.observe(b,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){r.unbind(b)});var T=document.createElement("span");g.appendChild(T),T.className="cell-w-put-call__sub-title";var S=function(e){return!(""!=e)};S(r.get())&&InfrontUtil.addClassName(T,"cell-display-none");var C=new e.ClassBinding(T,"cell-display-none",S);r.observe(C,e.InitialUpdate.Synchronous);var I=e.BindingFactory.createValueBinding(T,"innerHTML");r.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){r.unbind(C),r.unbind(I)});var _=document.createElement("div");g.appendChild(_),_.className="cell-w-put-call__sub-title--extra";var M=document.createElement("div");g.appendChild(M),M.className="cell-pull-right";var E=document.createElement("div");n.appendChild(E),E.className="cell-w-put-call__tool-bar";var w=document.createElement("label");E.appendChild(w),w.className="cell-label",w.innerHTML=m.get("putCall","underlying"),1!=o&&InfrontUtil.addClassName(w,"cell-display-none");var A=document.createElement("select");w.appendChild(A),A.className="cell-input cell-input--200px",A.setAttribute("tabindex","0"),a.bind(A);var D=new e.ArrayBinding(A,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);s.observe(D),t.unbindingManager.registerUnbind(A,function(){a.unbind(),s.unbind(D)});var O=document.createElement("label");E.appendChild(O),O.className="cell-label",O.innerHTML=m.get("putCall","expiry");var k=function(e){return!(1==e)};k(d.get())&&InfrontUtil.addClassName(O,"cell-display-none");var R=new e.ClassBinding(O,"cell-display-none",k);d.observe(R,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(O,function(){d.unbind(R)});var N=document.createElement("select");O.appendChild(N),N.className="cell-input cell-input--150px",N.setAttribute("tabindex","0"),l.bind(N);var L=new e.ArrayBinding(N,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);c.observe(L),t.unbindingManager.registerUnbind(N,function(){l.unbind(),c.unbind(L)});var P=document.createElement("label");E.appendChild(P),P.className="cell-label",P.innerHTML=m.get("putCall","range");var F=function(e){return!(1==e)};F(p.get())&&InfrontUtil.addClassName(P,"cell-display-none");var x=new e.ClassBinding(P,"cell-display-none",F);p.observe(x,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(P,function(){p.unbind(x)});var U=document.createElement("select");P.appendChild(U),U.className="cell-input cell-input--150px",U.setAttribute("tabindex","0"),u.bind(U);var B=new e.ArrayBinding(U,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e,n}),null);h.observe(B),t.unbindingManager.registerUnbind(U,function(){u.unbind(),h.unbind(B)});var W=document.createElement("div");n.appendChild(W);var H=document.createElement("div");return n.appendChild(H),H.className="cell-table-wrapper",{titleEl:g,tableEl:H,symbolPanelEl:M,tabBarEl:W,subTitleExtraEl:_}},t.create_WWire_DOM=function(n,i,r){var a=document.createElement("div");n.appendChild(a),a.className="cell-super-absolute",a.setAttribute("style","position:fixed");var s=document.createElement("div");n.appendChild(s),s.className="cell-w-wire";var o=document.createElement("div");s.appendChild(o),o.className="cell-w-wire__header";var l=function(e){return!(1==e)};l(i.get())&&InfrontUtil.addClassName(o,"cell-display-none");var c=new e.ClassBinding(o,"cell-display-none",l);i.observe(c,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){i.unbind(c)});var d=document.createElement("span");o.appendChild(d),d.appendChild(document.createTextNode("Infront Wire"));var u=document.createElement("div");o.appendChild(u),u.className="cell-w-wire__setup-button";var h=document.createElement("div");s.appendChild(h),h.className="cell-w-wire__connection-status cell-display-none";var p=document.createElement("label");h.appendChild(p),p.className="cell-label__warning",p.innerHTML=r.get("wire","notConnected");var m=document.createElement("div");return s.appendChild(m),{wireContainer:m,popupWrapper:a,setupButton:u,connectionStatus:h}},t.create_CWireNewsCard_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m){var g=document.createElement("div");n.appendChild(g),g.className="cell-w-wire__card";var f=new e.ClassBinding(g,"cell-w-wire__card--unread",function(e){return 0==e});a.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){a.unbind(f)});var v=document.createElement("div");g.appendChild(v),v.className="cell-w-wire__card__score";var y=e.BindingFactory.createValueBinding(v,"innerHTML");d.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){d.unbind(y)});var b=document.createElement("div");g.appendChild(b),b.className="cell-flex-row  cell-w-wire__card__content";var T=document.createElement("div");b.appendChild(T),T.className="cell-w-wire__card__content__time";var S=e.BindingFactory.createValueBinding(T,"innerHTML");c.observe(S,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){c.unbind(S)});var C=document.createElement("a");b.appendChild(C),C.className="cell-w-wire__card__content__header",InfrontUtil.addEventListener(C,"click",function(e){r()}),InfrontUtil.addEventListener(C,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r()});var I=e.BindingFactory.createValueBinding(C,"innerHTML");i.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){i.unbind(I)});var _=document.createElement("div");g.appendChild(_),_.className="cell-flex-row";var M=document.createElement("div");_.appendChild(M),M.className="cell-w-wire__card__flashes";var E=new e.ArrayBinding(M,new e.InlineRowFactory(function(t,n){var i=new e.ClassBinding(M,"cell-w-wire__card__flashes--collapsed",function(e){return 0==e});u.observe(i,e.InitialUpdate.Synchronous);var r=document.createElement("div");r.className="cell-w-wire__card__flashes__item";var a=document.createElement("span");r.appendChild(a),a.className="cell-w-wire__card__flashes__item__time",a.innerHTML=t.timeStr;var s=document.createElement("a");return r.appendChild(s),s.innerHTML=t.headline,r}),null);o.observe(E);var w=function(){o.unbind(E)};t.unbindingManager.registerUnbind(M,function(){w(),w()});var A=document.createElement("div");g.appendChild(A),A.className="cell-w-wire__card__pill-wrapper";var D=document.createElement("div");g.appendChild(D),D.className="cell-w-wire__card__footer";var O=document.createElement("div");D.appendChild(O),O.className="cell-w-wire__card__footer__content";var k=function(e){return!(1==e)};k(l.get())&&InfrontUtil.addClassName(O,"cell-display-none");var R=new e.ClassBinding(O,"cell-display-none",k);l.observe(R,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(O,function(){l.unbind(R)});var N=document.createElement("span");O.appendChild(N);var L=document.createElement("a");O.appendChild(L),L.className="cell-w-wire__card__market-data__item";var P=document.createElement("a");O.appendChild(P),P.className="cell-w-wire__card__market-data__item";var F=document.createElement("div");D.appendChild(F);var x=function(e){return!(0==e)};x(l.get())&&InfrontUtil.addClassName(F,"cell-display-none");var U=new e.ClassBinding(F,"cell-display-none",x);l.observe(U,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(F,function(){l.unbind(U)});var B=document.createElement("div");D.appendChild(B),B.className="cell-w-wire__card__footer__clicker",InfrontUtil.addEventListener(B,"click",function(e){p()}),B.setAttribute("role","button"),InfrontUtil.addEventListener(B,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||p()});var W=e.BindingFactory.createValueBinding(B,"innerHTML");h.observe(W,e.InitialUpdate.Synchronous);var H=e.BindingFactory.createHTMLAttributeBinding(B,"style",function(e){return"display:"+(e?"flex":"none")});return h.observe(H),t.unbindingManager.registerUnbind(B,function(){h.unbind(W),h.unbind(H)}),{wireCard:g,header:C,cardPills:A,feedFlag:N,tickerField:L,todaysChangeField:P,footerLink:B}},t.create_CWireEquityCalendarCard_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-w-wire__card";var g=new e.ClassBinding(m,"cell-w-wire__card--unread",function(e){return 0==e});a.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){a.unbind(g)});var f=document.createElement("div");m.appendChild(f),f.className="cell-flex-row  cell-w-wire__card__content";var v=document.createElement("div");f.appendChild(v),v.className="cell-w-wire__card__content__time",InfrontUtil.addEventListener(v,"click",function(e){r()}),v.setAttribute("role","button"),InfrontUtil.addEventListener(v,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r()});var y=e.BindingFactory.createValueBinding(v,"innerHTML");i.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){i.unbind(y)});var b=document.createElement("div");m.appendChild(b),b.className="cell-flex-row";var T=document.createElement("table");b.appendChild(T),T.className="cell-w-wire__card__calendar__table";var S=document.createElement("thead");T.appendChild(S);var C=document.createElement("tr");S.appendChild(C);var I=document.createElement("th");C.appendChild(I),I.className="cell-w-wire__card__calendar__table__col1  cell-w-wire__card__calendar__table__header-cell",I.innerHTML=p.get("wire","labelCompany");var _=document.createElement("th");C.appendChild(_),_.className="cell-w-wire__card__calendar__table__col2  cell-w-wire__card__calendar__table__header-cell",_.innerHTML=p.get("wire","labelType");var M=document.createElement("th");C.appendChild(M),M.className="cell-w-wire__card__calendar__table__col3  cell-w-wire__card__calendar__table__header-cell",M.innerHTML=p.get("wire","labelTime");var E=document.createElement("tbody");T.appendChild(E);var w=new e.ArrayBinding(E,new e.InlineRowFactory(function(n,i){var r=document.createElement("tr"),a=new e.ClassBinding(r,"cell-w-wire__card__calendar--collapsed",function(e){return 0==e});d.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){d.unbind(a)});var s=document.createElement("td");r.appendChild(s),s.className="cell-w-wire__card__calendar__table__cell";var o=document.createElement("span");s.appendChild(o),InfrontUtil.addClassName(o,n.flag);var l=document.createElement("span");s.appendChild(l),l.innerHTML=n.calendarSubject;var c=document.createElement("td");r.appendChild(c),c.className="cell-w-wire__card__calendar__table__cell  cell-text-right",c.innerHTML=n.calendarTypeStr;var u=document.createElement("td");return r.appendChild(u),u.className="cell-w-wire__card__calendar__table__cell  cell-text-right",u.innerHTML=n.calendarTimeStr,r}),null);o.observe(w),t.unbindingManager.registerUnbind(E,function(){o.unbind(w)});var A=document.createElement("div");m.appendChild(A),A.className="cell-w-wire__card__footer";var D=document.createElement("a");A.appendChild(D),D.className="cell-w-wire__card__footer__content  cell-w-wire__card__footer__content--link",D.setAttribute("role","button"),D.innerHTML=p.get("wire","openCalendar");var O=document.createElement("div");A.appendChild(O),O.className="cell-w-wire__card__footer__clicker",InfrontUtil.addEventListener(O,"click",function(e){h()}),O.setAttribute("role","button"),InfrontUtil.addEventListener(O,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h()});var k=e.BindingFactory.createValueBinding(O,"innerHTML");u.observe(k,e.InitialUpdate.Synchronous);var R=e.BindingFactory.createHTMLAttributeBinding(O,"style",function(e){return"display:"+(e?"flex":"none")});return u.observe(R),t.unbindingManager.registerUnbind(O,function(){u.unbind(k),u.unbind(R)}),{wireCard:m,openCalendar:D,footerLink:O}},t.create_CWireMacroCalendarCard_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-w-wire__card";var g=new e.ClassBinding(m,"cell-w-wire__card--unread",function(e){return 0==e});a.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){a.unbind(g)});var f=document.createElement("div");m.appendChild(f),f.className="cell-flex-row  cell-w-wire__card__content";var v=document.createElement("div");f.appendChild(v),v.className="cell-w-wire__card__content__time",InfrontUtil.addEventListener(v,"click",function(e){r()}),v.setAttribute("role","button"),InfrontUtil.addEventListener(v,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r()});var y=e.BindingFactory.createValueBinding(v,"innerHTML");i.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){i.unbind(y)});var b=document.createElement("div");m.appendChild(b),b.className="cell-flex-row";var T=document.createElement("table");b.appendChild(T),T.className="cell-w-wire__card__calendar__table";var S=document.createElement("thead");T.appendChild(S);var C=document.createElement("tr");S.appendChild(C);var I=document.createElement("th");C.appendChild(I),I.className="cell-w-wire__card__calendar__table__col1  cell-w-wire__card__calendar__table__header-cell",I.innerHTML=p.get("wire","Indicator");var _=document.createElement("th");C.appendChild(_),_.className="cell-w-wire__card__calendar__table__col2  cell-w-wire__card__calendar__table__header-cell",_.innerHTML=p.get("wire","labelActual");var M=document.createElement("th");C.appendChild(M),M.className="cell-w-wire__card__calendar__table__col3  cell-w-wire__card__calendar__table__header-cell",M.innerHTML=p.get("wire","labelExpected");var E=document.createElement("th");C.appendChild(E),E.className="cell-w-wire__card__calendar__table__col4  cell-w-wire__card__calendar__table__header-cell",E.innerHTML=p.get("wire","labelPrevious");var w=document.createElement("th");C.appendChild(w),w.className="cell-w-wire__card__calendar__table__col5  cell-w-wire__card__calendar__table__header-cell",w.innerHTML=p.get("wire","labelTime");var A=document.createElement("tbody");T.appendChild(A);var D=new e.ArrayBinding(A,new e.InlineRowFactory(function(n,i){var r=document.createElement("tr"),a=new e.ClassBinding(r,"cell-w-wire__card__calendar--collapsed",function(e){return 0==e});d.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){d.unbind(a)});var s=document.createElement("td");r.appendChild(s),s.className="cell-w-wire__card__calendar__table__cell";var o=document.createElement("span");s.appendChild(o),InfrontUtil.addClassName(o,n.flag);var l=document.createElement("span");s.appendChild(l),l.innerHTML=n.calendarSubject;var c=document.createElement("td");r.appendChild(c),c.className="cell-w-wire__card__calendar__table__cell  cell-text-right",c.innerHTML=n.calendarActual;var u=document.createElement("td");r.appendChild(u),u.className="cell-w-wire__card__calendar__table__cell  cell-text-right",u.innerHTML=n.calendarExpected;var h=document.createElement("td");r.appendChild(h),h.className="cell-w-wire__card__calendar__table__cell  cell-text-right",h.innerHTML=n.calendarPrevious;var p=document.createElement("td");return r.appendChild(p),p.className="cell-w-wire__card__calendar__table__cell  cell-text-right",p.innerHTML=n.calendarTimeStr,r}),null);o.observe(D),t.unbindingManager.registerUnbind(A,function(){o.unbind(D)});var O=document.createElement("div");m.appendChild(O),O.className="cell-w-wire__card__footer";var k=document.createElement("a");O.appendChild(k),k.className="cell-w-wire__card__footer__content  cell-w-wire__card__footer__content--link",k.setAttribute("role","button"),k.innerHTML=p.get("wire","openCalendar");var R=document.createElement("div");O.appendChild(R),R.className="cell-w-wire__card__footer__clicker",InfrontUtil.addEventListener(R,"click",function(e){h()}),R.setAttribute("role","button"),InfrontUtil.addEventListener(R,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h()});var N=e.BindingFactory.createValueBinding(R,"innerHTML");u.observe(N,e.InitialUpdate.Synchronous);var L=e.BindingFactory.createHTMLAttributeBinding(R,"style",function(e){return"display:"+(e?"flex":"none")});return u.observe(L),t.unbindingManager.registerUnbind(R,function(){u.unbind(N),u.unbind(L)}),{wireCard:m,openCalendar:k,footerLink:R}},t.create_CWireMotionDetectionCard_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m){var g=document.createElement("div");n.appendChild(g),g.className="cell-w-wire__card";var f=new e.ClassBinding(g,"cell-w-wire__card--unread",function(e){return 0==e});a.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){a.unbind(f)});var v=document.createElement("div");g.appendChild(v),v.className="cell-flex-row  cell-w-wire__card__content";var y=document.createElement("div");v.appendChild(y),y.className="cell-w-wire__card__content__time";var b=e.BindingFactory.createValueBinding(y,"innerHTML");c.observe(b,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(y,function(){c.unbind(b)});var T=document.createElement("div");v.appendChild(T),T.className="cell-w-wire__card__score";var S=e.BindingFactory.createValueBinding(T,"innerHTML");d.observe(S,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){d.unbind(S)});var C=document.createElement("a");v.appendChild(C),C.className="cell-w-wire__card__content__header",InfrontUtil.addEventListener(C,"click",function(e){r()}),InfrontUtil.addEventListener(C,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r()});var I=e.BindingFactory.createValueBinding(C,"innerHTML");i.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){i.unbind(I)});var _=document.createElement("div");g.appendChild(_),_.className="cell-w-wire__card__pill-wrapper";var M=document.createElement("div");g.appendChild(M),M.className="cell-w-wire__card__footer";var E=document.createElement("div");M.appendChild(E),E.className="cell-w-wire__card__footer__content";var w=document.createElement("span");E.appendChild(w);var A=document.createElement("a");E.appendChild(A),A.className="cell-w-wire__card__market-data__item";var D=document.createElement("a");E.appendChild(D),D.className="cell-w-wire__card__market-data__item";var O=document.createElement("div");M.appendChild(O),O.className="cell-w-wire__card__footer__clicker",InfrontUtil.addEventListener(O,"click",function(e){p()}),O.setAttribute("role","button"),InfrontUtil.addEventListener(O,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||p()});var k=e.BindingFactory.createValueBinding(O,"innerHTML");h.observe(k,e.InitialUpdate.Synchronous);var R=e.BindingFactory.createHTMLAttributeBinding(O,"style",function(e){return"display:"+(e?"flex":"none")});return h.observe(R),t.unbindingManager.registerUnbind(O,function(){h.unbind(k),h.unbind(R)}),{wireCard:g,header:C,cardPills:_,feedFlag:w,tickerField:A,todaysChangeField:D,footerLink:O}},t.create_CWireAlertCard_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-w-wire__card";var g=new e.ClassBinding(m,"cell-w-wire__card--unread",function(e){return 0==e});a.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){a.unbind(g)});var f=document.createElement("div");m.appendChild(f),f.className="cell-flex-row  cell-w-wire__card__content";var v=document.createElement("a");f.appendChild(v),v.className="cell-w-wire__card__content__header--no-link",InfrontUtil.addEventListener(v,"click",function(e){r()}),InfrontUtil.addEventListener(v,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r()});var y=e.BindingFactory.createValueBinding(v,"innerHTML");i.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){i.unbind(y)});var b=document.createElement("div");m.appendChild(b),b.className="cell-flex-row";var T=document.createElement("div");b.appendChild(T),T.className="cell-w-wire__card__pill-wrapper";var S=document.createElement("div");m.appendChild(S),S.className="cell-w-wire__card__footer";var C=document.createElement("div");S.appendChild(C),C.className="cell-w-wire__card__footer__content";var I=document.createElement("span");C.appendChild(I);var _=document.createElement("a");C.appendChild(_),_.className="cell-w-wire__card__market-data__item";var M=document.createElement("a");C.appendChild(M),M.className="cell-w-wire__card__market-data__item";var E=document.createElement("a");S.appendChild(E),E.className="cell-w-wire__card__footer__clicker",InfrontUtil.addEventListener(E,"click",function(e){h()}),InfrontUtil.addEventListener(E,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h()});var w=e.BindingFactory.createValueBinding(E,"innerHTML");u.observe(w,e.InitialUpdate.Synchronous);var A=e.BindingFactory.createHTMLAttributeBinding(E,"style",function(e){return"display:"+(e?"flex":"none")});return u.observe(A),t.unbindingManager.registerUnbind(E,function(){u.unbind(w),u.unbind(A)}),{wireCard:m,footerLink:E,cardPills:T,feedFlag:I,tickerField:_,todaysChangeField:M}},t.create_WSwapCalculator_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y){var b=document.createElement("div");n.appendChild(b),b.className="cell-w-swap-calculator";var T=document.createElement("div");b.appendChild(T),T.className="cell-w-swap-calculator__header",""==i&&InfrontUtil.addClassName(T,"cell-display-none");var S=document.createElement("div");T.appendChild(S),S.className="cell-w-swap-calculator__title",S.innerHTML=i;var C=document.createElement("div");b.appendChild(C),C.className="cell-w-swap-calculator__tab-bar";var I=document.createElement("div");b.appendChild(I),I.className="cell-w-swap-calculator__content";var _=document.createElement("div");I.appendChild(_),_.className="cell-w-swap-calculator__tab-bar__tab-main";var M=new e.ClassBinding(_,"cell-tab-hidden",function(t){return t!=e.SwapCalculatorTab.TabMain});r.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){r.unbind(M)});var E=document.createElement("div");_.appendChild(E),E.className="cell-w-swap-calculator__section";var w=document.createElement("div");E.appendChild(w),w.className="cell-w-swap-calculator__section_title",w.innerHTML=y.get("swapCalculator","parameters");var A=document.createElement("div");E.appendChild(A),A.className="cell-w-swap-calculator__row";var D=document.createElement("div");A.appendChild(D),D.className="cell-w-swap-calculator__row__col";var O=document.createElement("label");D.appendChild(O),O.className="cell-w-swap-calculator__label",O.innerHTML=y.get("swapCalculator","notional");var k=document.createElement("input");D.appendChild(k),k.className="cell-input  cell-width--100px  cell-text-right",k.type="text",k.setAttribute("maxlength","20"),k.setAttribute("number","true"),a.bind(k),t.unbindingManager.registerUnbind(k,function(){return a.unbind()});var R=document.createElement("div");A.appendChild(R),R.className="cell-w-swap-calculator__row__col";var N=document.createElement("label");R.appendChild(N),N.className="cell-w-swap-calculator__label",N.innerHTML=y.get("swapCalculator","startDate");var L=document.createElement("div");R.appendChild(L),L.className="cell-w-swap-calculator__date";var P=document.createElement("div");E.appendChild(P),P.className="cell-w-swap-calculator__row";var F=document.createElement("div");P.appendChild(F),F.className="cell-w-swap-calculator__row__col";var x=document.createElement("label");F.appendChild(x),x.className="cell-w-swap-calculator__label",x.innerHTML=y.get("swapCalculator","currency");var U=document.createElement("select");F.appendChild(U),U.className="cell-input cell-input--100px",s.bind(U);var B=new e.ArrayBinding(U,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);o.observe(B),t.unbindingManager.registerUnbind(U,function(){s.unbind(),o.unbind(B)});var W=document.createElement("div");P.appendChild(W),W.className="cell-w-swap-calculator__row__col";var H=document.createElement("label");W.appendChild(H),H.className="cell-w-swap-calculator__label",H.innerHTML=y.get("swapCalculator","maturityDate");var V=document.createElement("div");W.appendChild(V),V.className="cell-w-swap-calculator__date";var G=document.createElement("div");E.appendChild(G),G.className="cell-w-swap-calculator__row";var z=document.createElement("div");G.appendChild(z),z.className="cell-w-swap-calculator__row__col";var q=document.createElement("div");G.appendChild(q),q.className="cell-w-swap-calculator__row__col";var Y=document.createElement("label");q.appendChild(Y),Y.className="cell-w-swap-calculator__label",Y.innerHTML=y.get("swapCalculator","valueDate");var K=document.createElement("div");q.appendChild(K),K.className="cell-w-swap-calculator__date";var X=document.createElement("div");_.appendChild(X),X.className="cell-w-swap-calculator__section";var j=document.createElement("div");X.appendChild(j),j.className="cell-w-swap-calculator__row";var Z=document.createElement("div");j.appendChild(Z),Z.className="cell-w-swap-calculator__row__col";var J=document.createElement("label");Z.appendChild(J),J.className="cell-w-swap-calculator__label",J.innerHTML=y.get("swapCalculator","leg1Fixed");var Q=document.createElement("button");Z.appendChild(Q),Q.className="cell-button leg-button",InfrontUtil.addEventListener(Q,"click",function(e){v(e)}),Q.innerHTML=y.get("swapCalculator","buttonPay");var $=function(e){return!(1==e)};$(l.get())&&InfrontUtil.addClassName(Q,"cell-display-none");var ee=new e.ClassBinding(Q,"cell-display-none",$);l.observe(ee,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Q,function(){l.unbind(ee)});var te=document.createElement("button");Z.appendChild(te),te.className="cell-button leg-button",InfrontUtil.addEventListener(te,"click",function(e){v(e)}),te.innerHTML=y.get("swapCalculator","buttonReceive");var ne=function(e){return!(0==e)};ne(l.get())&&InfrontUtil.addClassName(te,"cell-display-none");var ie=new e.ClassBinding(te,"cell-display-none",ne);l.observe(ie,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(te,function(){l.unbind(ie)});var re=document.createElement("div");j.appendChild(re),re.className="cell-w-swap-calculator__row__col";var ae=document.createElement("label");re.appendChild(ae),ae.className="cell-w-swap-calculator__label",ae.innerHTML=y.get("swapCalculator","leg2Float");var se=document.createElement("button");re.appendChild(se),se.className="cell-button leg-button",InfrontUtil.addEventListener(se,"click",function(e){v(e)}),se.innerHTML=y.get("swapCalculator","buttonReceive");var oe=function(e){return!(1==e)};oe(l.get())&&InfrontUtil.addClassName(se,"cell-display-none");var le=new e.ClassBinding(se,"cell-display-none",oe);l.observe(le,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(se,function(){l.unbind(le)});var ce=document.createElement("button");re.appendChild(ce),ce.className="cell-button leg-button",InfrontUtil.addEventListener(ce,"click",function(e){v(e)}),ce.innerHTML=y.get("swapCalculator","buttonPay");var de=function(e){return!(0==e)};de(l.get())&&InfrontUtil.addClassName(ce,"cell-display-none");var ue=new e.ClassBinding(ce,"cell-display-none",de);l.observe(ue,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ce,function(){l.unbind(ue)});var he=document.createElement("div");X.appendChild(he),he.className="cell-w-swap-calculator__row";var pe=document.createElement("div");he.appendChild(pe),pe.className="cell-w-swap-calculator__row__col";var me=document.createElement("label");pe.appendChild(me),me.className="cell-w-swap-calculator__label",me.innerHTML=y.get("swapCalculator","fixedRate");var ge=document.createElement("input");pe.appendChild(ge),ge.className="cell-input  cell-width--100px  cell-text-right",ge.type="text",ge.setAttribute("maxlength","20"),ge.setAttribute("number","true"),c.bind(ge),t.unbindingManager.registerUnbind(ge,function(){return c.unbind()});var fe=document.createElement("div");he.appendChild(fe),fe.className="cell-w-swap-calculator__row__col";var ve=document.createElement("label");fe.appendChild(ve),ve.className="cell-w-swap-calculator__label",ve.innerHTML=y.get("swapCalculator","spread");var ye=document.createElement("input");fe.appendChild(ye),ye.className="cell-input  cell-width--100px  cell-text-right",ye.type="text",ye.setAttribute("maxlength","20"),ye.setAttribute("number","true"),d.bind(ye),t.unbindingManager.registerUnbind(ye,function(){return d.unbind()});var be=document.createElement("div");X.appendChild(be),be.className="cell-w-swap-calculator__row";var Te=document.createElement("div");be.appendChild(Te),Te.className="cell-w-swap-calculator__row__col";var Se=document.createElement("label");Te.appendChild(Se),Se.className="cell-w-swap-calculator__label",Se.innerHTML=y.get("swapCalculator","payFrequency");var Ce=document.createElement("select");Te.appendChild(Ce),Ce.className="cell-input cell-input--100px",u.bind(Ce);var Ie=new e.ArrayBinding(Ce,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);p.observe(Ie),t.unbindingManager.registerUnbind(Ce,function(){u.unbind(),p.unbind(Ie)});var _e=document.createElement("div");be.appendChild(_e),_e.className="cell-w-swap-calculator__row__col";var Me=document.createElement("label");_e.appendChild(Me),Me.className="cell-w-swap-calculator__label",Me.innerHTML=y.get("swapCalculator","payFrequency");var Ee=document.createElement("select");_e.appendChild(Ee),Ee.className="cell-input cell-input--100px",h.bind(Ee);var we=new e.ArrayBinding(Ee,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);p.observe(we),t.unbindingManager.registerUnbind(Ee,function(){h.unbind(),p.unbind(we)});var Ae=document.createElement("div");X.appendChild(Ae),Ae.className="cell-w-swap-calculator__row";var De=document.createElement("div");Ae.appendChild(De),De.className="cell-w-swap-calculator__row__col";var Oe=document.createElement("label");De.appendChild(Oe),Oe.className="cell-w-swap-calculator__label",Oe.innerHTML=y.get("swapCalculator","firstCoupon");var ke=document.createElement("div");De.appendChild(ke),ke.className="cell-w-swap-calculator__date";var Re=document.createElement("div");Ae.appendChild(Re),Re.className="cell-w-swap-calculator__row__col";var Ne=document.createElement("label");Re.appendChild(Ne),Ne.className="cell-w-swap-calculator__label",Ne.innerHTML=y.get("swapCalculator","firstCoupon");var Le=document.createElement("div");Re.appendChild(Le),Le.className="cell-w-swap-calculator__date";var Pe=document.createElement("div");X.appendChild(Pe),Pe.className="cell-w-swap-calculator__row";var Fe=document.createElement("div");Pe.appendChild(Fe),Fe.className="cell-w-swap-calculator__row__col";var xe=document.createElement("label");Fe.appendChild(xe),xe.className="cell-w-swap-calculator__label",xe.innerHTML=y.get("swapCalculator","dayCount");var Ue=document.createElement("select");Fe.appendChild(Ue),Ue.className="cell-input cell-input--100px",m.bind(Ue);var Be=new e.ArrayBinding(Ue,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);f.observe(Be),t.unbindingManager.registerUnbind(Ue,function(){m.unbind(),f.unbind(Be)});var We=document.createElement("div");Pe.appendChild(We),We.className="cell-w-swap-calculator__row__col";var He=document.createElement("label");We.appendChild(He),He.className="cell-w-swap-calculator__label",He.innerHTML=y.get("swapCalculator","dayCount");var Ve=document.createElement("select");We.appendChild(Ve),Ve.className="cell-input cell-input--100px",g.bind(Ve);var Ge=new e.ArrayBinding(Ve,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);f.observe(Ge),t.unbindingManager.registerUnbind(Ve,function(){g.unbind(),f.unbind(Ge)});var ze=document.createElement("div");_.appendChild(ze);var qe=document.createElement("div");I.appendChild(qe),qe.className="cell-w-swap-calculator__tab-bar__tab-cash-flow";var Ye=new e.ClassBinding(qe,"cell-tab-hidden",function(t){return t!=e.SwapCalculatorTab.TabCashFlow});r.observe(Ye,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(qe,function(){r.unbind(Ye)});var Ke=document.createElement("div");return qe.appendChild(Ke),{tabBar:C,resultPanel:ze,cashFlowPanel:Ke,startDate:L,maturityDate:V,valueDate:K,firstCouponDateFixed:ke,firstCouponDateFloat:Le}},t.create_WSwapCalculator_result_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-w-swap-calculator__section";var g=document.createElement("div");m.appendChild(g),g.className="cell-w-swap-calculator__section_title cell-w-swap-calculator__section_title-result",g.innerHTML=p.get("swapCalculator","valuationResults");var f=document.createElement("div");m.appendChild(f),f.className="cell-w-swap-calculator__status";var v=new e.ClassBinding(f,"cell-display-none",function(e){return 1==e});h.observe(v,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(f,function(){h.unbind(v)});var y=document.createElement("label");f.appendChild(y),y.className="cell-w-swap-calculator__error-msg";var b=e.BindingFactory.createValueBinding(y,"innerHTML");u.observe(b,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(y,function(){u.unbind(b)});var T=document.createElement("div");m.appendChild(T);var S=new e.ClassBinding(T,"cell-w-swap-calculator__result-hidden",function(e){return 0==e});h.observe(S,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){h.unbind(S)});var C=document.createElement("div");T.appendChild(C),C.className="cell-w-swap-calculator__row";var I=document.createElement("div");C.appendChild(I),I.className="cell-w-swap-calculator__row__col  cell-w-swap-calculator__result";var _=document.createElement("label");I.appendChild(_),_.className="cell-w-swap-calculator__label",_.innerHTML=p.get("swapCalculator","leg1NPV");var M=document.createElement("div");I.appendChild(M),M.className=" cell-width--120px  cell-text-right",M.type="text";var E=e.BindingFactory.createValueBinding(M,"innerHTML");i.observe(E,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(M,function(){i.unbind(E)});var w=document.createElement("div");C.appendChild(w),w.className="cell-w-swap-calculator__row__col  cell-w-swap-calculator__result";var A=document.createElement("label");w.appendChild(A),A.className="cell-w-swap-calculator__label",A.innerHTML=p.get("swapCalculator","leg2NPV");var D=document.createElement("div");w.appendChild(D),D.className="cell-width--120px  cell-text-right",D.type="text";var O=e.BindingFactory.createValueBinding(D,"innerHTML");r.observe(O,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(D,function(){r.unbind(O)});var k=document.createElement("div");T.appendChild(k),k.className="cell-w-swap-calculator__row";var R=document.createElement("div");k.appendChild(R),R.className="cell-w-swap-calculator__row__col  cell-w-swap-calculator__result";var N=document.createElement("label");R.appendChild(N),N.className="cell-w-swap-calculator__label",N.innerHTML=p.get("swapCalculator","NPV");var L=document.createElement("div");R.appendChild(L),L.className="cell-width--120px  cell-text-right",L.type="text";var P=e.BindingFactory.createValueBinding(L,"innerHTML");a.observe(P,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(L,function(){a.unbind(P)});var F=document.createElement("div");k.appendChild(F),F.className="cell-w-swap-calculator__row__col  cell-w-swap-calculator__result";var x=document.createElement("div");T.appendChild(x),x.className="cell-w-swap-calculator__row";var U=document.createElement("div");x.appendChild(U),U.className="cell-w-swap-calculator__row__col  cell-w-swap-calculator__result";var B=document.createElement("label");U.appendChild(B),B.className="cell-w-swap-calculator__label",B.innerHTML=p.get("swapCalculator","accrued");var W=document.createElement("div");U.appendChild(W),W.className="cell-width--120px  cell-text-right",W.type="text";var H=e.BindingFactory.createValueBinding(W,"innerHTML");c.observe(H,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(W,function(){c.unbind(H)});var V=document.createElement("div");x.appendChild(V),V.className="cell-w-swap-calculator__row__col  cell-w-swap-calculator__result";var G=document.createElement("label");V.appendChild(G),G.className="cell-w-swap-calculator__label",G.innerHTML=p.get("swapCalculator","marketValue");var z=document.createElement("div");V.appendChild(z),z.className="cell-width--100px  cell-text-right",z.type="text";var q=e.BindingFactory.createValueBinding(z,"innerHTML");d.observe(q,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(z,function(){d.unbind(q)})},t.create_WSwapCalculator_cashFlow_DOM=function(n,i,r){var a=document.createElement("div");n.appendChild(a),a.className="cell-w-swap-calculator__section";var s=document.createElement("table");a.appendChild(s),s.className="cell-table";var o=document.createElement("thead");s.appendChild(o);var l=document.createElement("tr");o.appendChild(l);var c=document.createElement("th");l.appendChild(c),c.className="cell-text-left",c.innerHTML=r.get("swapCalculator","colDate");var d=document.createElement("th");l.appendChild(d),d.className="cell-text-right",d.innerHTML=r.get("swapCalculator","colFloatingRate");var u=document.createElement("th");l.appendChild(u),u.className="cell-text-right",u.innerHTML=r.get("swapCalculator","ColFloatingCashFlow");var h=document.createElement("th");l.appendChild(h),h.className="cell-text-right",h.innerHTML=r.get("swapCalculator","colFixedRate");var p=document.createElement("th");l.appendChild(p),p.className="cell-text-right",p.innerHTML=r.get("swapCalculator","colFixedCashFlow");var m=document.createElement("th");l.appendChild(m),m.className="cell-text-right",m.innerHTML=r.get("swapCalculator","colNetCashFlow");var g=document.createElement("th");l.appendChild(g),g.className="cell-text-right",g.innerHTML=r.get("swapCalculator","colDiscountFactor");var f=document.createElement("th");l.appendChild(f),f.className="cell-text-right",f.innerHTML=r.get("swapCalculator","colNetPresentValue");var v=document.createElement("tbody");s.appendChild(v),v.className="";var y=new e.ArrayBinding(v,new e.InlineRowFactory(function(e,t){var n=document.createElement("tr");n.className="cell-w-swap-calculator__cash-flow-item";var i=document.createElement("td");n.appendChild(i),i.className="cell-nowrap",i.innerHTML=e.date;var r=document.createElement("td");n.appendChild(r),r.className="cell-text-right",r.innerHTML=e.floatingRate;var a=document.createElement("td");n.appendChild(a),a.className="cell-text-right",a.innerHTML=e.floatingCashFlow;var s=document.createElement("td");n.appendChild(s),s.className="cell-text-right",s.innerHTML=e.fixedRate;var o=document.createElement("td");n.appendChild(o),o.className="cell-text-right",o.innerHTML=e.fixedCashFlow;var l=document.createElement("td");n.appendChild(l),l.className="cell-text-right",l.innerHTML=e.netCashFlow;var c=document.createElement("td");n.appendChild(c),c.className="cell-text-right",c.innerHTML=e.discountFactor;var d=document.createElement("td");return n.appendChild(d),d.className="cell-text-right",d.innerHTML=e.netPresentValue,n}),null);i.observe(y),t.unbindingManager.registerUnbind(v,function(){i.unbind(y)})},t.create_WBondsCalculator_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b,T,S){var C=document.createElement("div");n.appendChild(C),C.className="cell-w-bonds-calculator";var I=document.createElement("div");C.appendChild(I),I.className="cell-w-bonds-calculator__header",""==i&&InfrontUtil.addClassName(I,"cell-display-none");var _=document.createElement("div");I.appendChild(_),_.className="cell-w-bonds-calculator__title",_.innerHTML=i;var M=document.createElement("div");C.appendChild(M),M.className="cell-w-bonds-calculator__tab-bar";var E=document.createElement("div");C.appendChild(E),E.className="cell-w-bonds-calculator__content";var w=document.createElement("div");E.appendChild(w),w.className="cell-w-bonds-calculator__tab-bar__tab-main";var A=new e.ClassBinding(w,"cell-tab-hidden",function(t){return t!=e.BondsCalculatorTab.TabMain});r.observe(A,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(w,function(){r.unbind(A)});var D=document.createElement("div");w.appendChild(D),D.className="cell-w-bonds-calculator__section";var O=document.createElement("div");D.appendChild(O),O.className="cell-w-bonds-calculator__row cell-w-bonds-calculator__search";var k=document.createElement("div");O.appendChild(k),k.className="cell-w-bonds-calculator__row__col";var R=document.createElement("div");k.appendChild(R),R.className="cell-w-bonds-calculator__search-box";var N=document.createElement("div");O.appendChild(N),N.className="cell-w-bonds-calculator__row__col";var L=document.createElement("div");D.appendChild(L),L.className="cell-w-bonds-calculator__row";var P=document.createElement("div");L.appendChild(P),P.className="cell-w-bonds-calculator__row__col";var F=document.createElement("label");P.appendChild(F),F.className="cell-w-bonds-calculator__label",F.innerHTML=S.get("bondsCalculator","bondType");var x=document.createElement("select");P.appendChild(x),x.className="cell-input cell-input--100px",a.bind(x);var U=new e.ArrayBinding(x,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);s.observe(U),t.unbindingManager.registerUnbind(x,function(){a.unbind(),s.unbind(U)});var B=document.createElement("div");L.appendChild(B),B.className="cell-w-bonds-calculator__row__col";var W=document.createElement("label");B.appendChild(W),W.className="cell-w-bonds-calculator__label",W.innerHTML=S.get("bondsCalculator","currency");var H=document.createElement("select");B.appendChild(H),H.className="cell-input cell-input--100px",o.bind(H);var V=new e.ArrayBinding(H,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);l.observe(V),t.unbindingManager.registerUnbind(H,function(){o.unbind(),l.unbind(V)});var G=document.createElement("div");D.appendChild(G),G.className="cell-w-bonds-calculator__row";var z=document.createElement("div");G.appendChild(z),z.className="cell-w-bonds-calculator__row__col";var q=document.createElement("label");z.appendChild(q),q.className="cell-w-bonds-calculator__label",q.innerHTML=S.get("bondsCalculator","valueDate");var Y=document.createElement("div");z.appendChild(Y),Y.className="cell-w-bonds-calculator__date";var K=document.createElement("div");G.appendChild(K),K.className="cell-w-bonds-calculator__row__col";var X=document.createElement("label");K.appendChild(X),X.className="cell-w-bonds-calculator__label",X.innerHTML=S.get("bondsCalculator","issueDate");var j=document.createElement("div");K.appendChild(j),j.className="cell-w-bonds-calculator__date";var Z=document.createElement("div");D.appendChild(Z),Z.className="cell-w-bonds-calculator__row";var J=document.createElement("div");Z.appendChild(J),J.className="cell-w-bonds-calculator__row__col";var Q=document.createElement("label");J.appendChild(Q),Q.className="cell-w-bonds-calculator__label",Q.innerHTML=S.get("bondsCalculator","cleanPricePercent");var $=document.createElement("input");J.appendChild($),$.className="cell-input  cell-width--100px  cell-text-right",$.type="text",$.setAttribute("maxlength","20"),$.setAttribute("number","true"),v.bind($),t.unbindingManager.registerUnbind($,function(){return v.unbind()});var ee=document.createElement("div");Z.appendChild(ee),ee.className="cell-w-bonds-calculator__row__col";var te=document.createElement("label");ee.appendChild(te),te.className="cell-w-bonds-calculator__label",te.innerHTML=S.get("bondsCalculator","maturityDate");var ne=document.createElement("div");ee.appendChild(ne),ne.className="cell-w-bonds-calculator__date";var ie=document.createElement("div");D.appendChild(ie),ie.className="cell-w-bonds-calculator__row";var re=document.createElement("div");ie.appendChild(re),re.className="cell-w-bonds-calculator__row__col";var ae=document.createElement("label");re.appendChild(ae),ae.className="cell-w-bonds-calculator__label",ae.innerHTML=S.get("bondsCalculator","yieldPercent");var se=document.createElement("input");re.appendChild(se),se.className="cell-input  cell-width--100px  cell-text-right",se.type="text",se.setAttribute("maxlength","20"),se.setAttribute("number","true"),T.bind(se),t.unbindingManager.registerUnbind(se,function(){return T.unbind()});var oe=document.createElement("div");ie.appendChild(oe),oe.className="cell-w-bonds-calculator__row__col";var le=document.createElement("label");oe.appendChild(le),le.className="cell-w-bonds-calculator__label",le.innerHTML=S.get("bondsCalculator","fixedRate");var ce=document.createElement("input");oe.appendChild(ce),ce.className="cell-input  cell-width--100px  cell-text-right",ce.type="text",ce.setAttribute("maxlength","20"),ce.setAttribute("number","true"),d.bind(ce),t.unbindingManager.registerUnbind(ce,function(){return d.unbind()});var de=document.createElement("div");D.appendChild(de),de.className="cell-w-bonds-calculator__row";var ue=document.createElement("div");de.appendChild(ue),ue.className="cell-w-bonds-calculator__row__col";var he=document.createElement("label");ue.appendChild(he),he.className="cell-w-bonds-calculator__label",he.innerHTML=S.get("bondsCalculator","redemptionPrice");var pe=document.createElement("input");ue.appendChild(pe),pe.className="cell-input  cell-width--100px  cell-text-right",pe.type="text",pe.setAttribute("maxlength","20"),pe.setAttribute("number","true"),y.bind(pe),t.unbindingManager.registerUnbind(pe,function(){return y.unbind()});var me=document.createElement("div");de.appendChild(me),me.className="cell-w-bonds-calculator__row__col";var ge=document.createElement("label");me.appendChild(ge),ge.className="cell-w-bonds-calculator__label",ge.innerHTML=S.get("bondsCalculator","couponFrequency");var fe=document.createElement("select");me.appendChild(fe),fe.className="cell-input cell-input--100px",u.bind(fe);var ve=new e.ArrayBinding(fe,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);h.observe(ve),t.unbindingManager.registerUnbind(fe,function(){u.unbind(),h.unbind(ve)});var ye=document.createElement("div");D.appendChild(ye),ye.className="cell-w-bonds-calculator__row";var be=document.createElement("div");ye.appendChild(be),be.className="cell-w-bonds-calculator__row__col";var Te=document.createElement("div");ye.appendChild(Te),Te.className="cell-w-bonds-calculator__row__col";var Se=document.createElement("label");Te.appendChild(Se),Se.className="cell-w-bonds-calculator__label",Se.innerHTML=S.get("bondsCalculator","firstCouponDate");var Ce=document.createElement("div");Te.appendChild(Ce),Ce.className="cell-w-bonds-calculator__date";var Ie=document.createElement("div");D.appendChild(Ie),Ie.className="cell-w-bonds-calculator__row";var _e=document.createElement("div");Ie.appendChild(_e),_e.className="cell-w-bonds-calculator__row__col";var Me=document.createElement("div");Ie.appendChild(Me),Me.className="cell-w-bonds-calculator__row__col";var Ee=document.createElement("label");Me.appendChild(Ee),Ee.className="cell-w-bonds-calculator__label",Ee.innerHTML=S.get("bondsCalculator","lastCouponDate");var we=document.createElement("div");Me.appendChild(we),we.className="cell-w-bonds-calculator__date";var Ae=document.createElement("div");D.appendChild(Ae),Ae.className="cell-w-bonds-calculator__row";var De=document.createElement("div");Ae.appendChild(De),De.className="cell-w-bonds-calculator__row__col";var Oe=document.createElement("label");De.appendChild(Oe),Oe.className="cell-w-bonds-calculator__label",Oe.innerHTML=S.get("bondsCalculator","calculationMethod");var ke=document.createElement("select");De.appendChild(ke),ke.className="cell-input cell-input--100px",g.bind(ke);var Re=new e.ArrayBinding(ke,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);f.observe(Re),t.unbindingManager.registerUnbind(ke,function(){g.unbind(),f.unbind(Re)});var Ne=document.createElement("div");Ae.appendChild(Ne),Ne.className="cell-w-bonds-calculator__row__col";var Le=document.createElement("label");Ne.appendChild(Le),Le.className="cell-w-bonds-calculator__label",Le.innerHTML=S.get("bondsCalculator","dayCountConvention");var Pe=document.createElement("select");Ne.appendChild(Pe),Pe.className="cell-input cell-input--100px",p.bind(Pe);var Fe=new e.ArrayBinding(Pe,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);m.observe(Fe),t.unbindingManager.registerUnbind(Pe,function(){p.unbind(),m.unbind(Fe)});var xe=document.createElement("div");D.appendChild(xe),xe.className="cell-w-bonds-calculator__row";var Ue=document.createElement("div");xe.appendChild(Ue),Ue.className="cell-w-bonds-calculator__row__col";var Be=document.createElement("label");Ue.appendChild(Be),Be.className="cell-w-bonds-calculator__label",Be.innerHTML=S.get("bondsCalculator","nominalAmount");var We=document.createElement("input");Ue.appendChild(We),We.className="cell-input  cell-width--100px  cell-text-right",We.type="text",We.setAttribute("maxlength","20"),We.setAttribute("number","true"),c.bind(We),t.unbindingManager.registerUnbind(We,function(){return c.unbind()});var He=document.createElement("div");xe.appendChild(He),He.className="cell-w-bonds-calculator__row__col";var Ve=document.createElement("label");He.appendChild(Ve),Ve.className="cell-w-bonds-calculator__label",Ve.innerHTML=S.get("bondsCalculator","taxRatePercent");var Ge=document.createElement("input");He.appendChild(Ge),Ge.className="cell-input  cell-width--100px  cell-text-right",Ge.type="text",Ge.setAttribute("maxlength","20"),Ge.setAttribute("number","true"),b.bind(Ge),t.unbindingManager.registerUnbind(Ge,function(){return b.unbind()});var ze=document.createElement("div");w.appendChild(ze);var qe=document.createElement("div");E.appendChild(qe),qe.className="cell-w-bonds-calculator__tab-bar__tab-cash-flow";var Ye=new e.ClassBinding(qe,"cell-tab-hidden",function(t){return t!=e.BondsCalculatorTab.TabCashFlow});r.observe(Ye,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(qe,function(){r.unbind(Ye)});var Ke=document.createElement("div");return qe.appendChild(Ke),{tabBar:M,resultPanel:ze,cashFlowPanel:Ke,valueDate:Y,issueDate:j,firstCouponDate:Ce,lastCouponDate:we,maturityDate:ne,searchBox:R}},t.create_WBondsCalculator_result_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v){var y=document.createElement("div");n.appendChild(y),y.className="cell-w-bonds-calculator__section";var b=document.createElement("div");y.appendChild(b),b.className="cell-w-bonds-calculator__section_title cell-w-bonds-calculator__section_title-result",b.innerHTML=v.get("bondsCalculator","valuationResults");var T=document.createElement("div");y.appendChild(T),T.className="cell-w-bonds-calculator__status";var S=new e.ClassBinding(T,"cell-display-none",function(e){return 1==e});f.observe(S,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(T,function(){f.unbind(S)});var C=document.createElement("label");T.appendChild(C),C.className="cell-w-bonds-calculator__error-msg";var I=e.BindingFactory.createValueBinding(C,"innerHTML");g.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){g.unbind(I)});var _=document.createElement("div");y.appendChild(_);var M=new e.ClassBinding(_,"cell-w-bonds-calculator__result-hidden",function(e){return 0==e});f.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){f.unbind(M)});var E=document.createElement("div");_.appendChild(E),E.className="cell-w-bonds-calculator__row";var w=document.createElement("div");E.appendChild(w),w.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var A=document.createElement("label");w.appendChild(A),A.className="cell-w-bonds-calculator__label",A.innerHTML=v.get("bondsCalculator","yield");var D=document.createElement("div");w.appendChild(D),D.className=" cell-width--120px  cell-text-right",D.type="text";var O=e.BindingFactory.createValueBinding(D,"innerHTML");i.observe(O,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(D,function(){i.unbind(O)});var k=document.createElement("div");E.appendChild(k),k.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var R=document.createElement("label");k.appendChild(R),R.className="cell-w-bonds-calculator__label",R.innerHTML=v.get("bondsCalculator","cleanPricePercent");var N=document.createElement("div");k.appendChild(N),N.className="cell-width--120px  cell-text-right",N.type="text";var L=e.BindingFactory.createValueBinding(N,"innerHTML");r.observe(L,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(N,function(){r.unbind(L)});var P=document.createElement("div");_.appendChild(P),P.className="cell-w-bonds-calculator__row";var F=document.createElement("div");P.appendChild(F),F.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var x=document.createElement("label");F.appendChild(x),x.className="cell-w-bonds-calculator__label",x.innerHTML=v.get("bondsCalculator","grossYieldPercent");var U=document.createElement("div");F.appendChild(U),U.className="cell-width--120px  cell-text-right",U.type="text";var B=e.BindingFactory.createValueBinding(U,"innerHTML");a.observe(B,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(U,function(){a.unbind(B)});var W=document.createElement("div");P.appendChild(W),W.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var H=document.createElement("label");W.appendChild(H),H.className="cell-w-bonds-calculator__label",H.innerHTML=v.get("bondsCalculator","remainingMaturity");var V=document.createElement("div");W.appendChild(V),V.className="cell-width--120px  cell-text-right",V.type="text";var G=e.BindingFactory.createValueBinding(V,"innerHTML");s.observe(G,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(V,function(){s.unbind(G)});var z=document.createElement("div");_.appendChild(z),z.className="cell-w-bonds-calculator__row";var q=document.createElement("div");z.appendChild(q),q.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var Y=document.createElement("label");q.appendChild(Y),Y.className="cell-w-bonds-calculator__label",Y.innerHTML=v.get("bondsCalculator","netYieldPercent");var K=document.createElement("div");q.appendChild(K),K.className="cell-width--120px  cell-text-right",K.type="text";var X=e.BindingFactory.createValueBinding(K,"innerHTML");o.observe(X,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(K,function(){o.unbind(X)});var j=document.createElement("div");z.appendChild(j),j.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var Z=document.createElement("label");j.appendChild(Z),Z.className="cell-w-bonds-calculator__label",Z.innerHTML=v.get("bondsCalculator","duration");var J=document.createElement("div");j.appendChild(J),J.className="cell-width--100px  cell-text-right",J.type="text";var Q=e.BindingFactory.createValueBinding(J,"innerHTML");l.observe(Q,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(J,function(){l.unbind(Q)});var $=document.createElement("div");_.appendChild($),$.className="cell-w-bonds-calculator__row";var ee=document.createElement("div");$.appendChild(ee),ee.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var te=document.createElement("label");ee.appendChild(te),te.className="cell-w-bonds-calculator__label",te.innerHTML=v.get("bondsCalculator","accruedInterestDays");var ne=document.createElement("div");ee.appendChild(ne),ne.className="cell-width--120px  cell-text-right",ne.type="text";var ie=e.BindingFactory.createValueBinding(ne,"innerHTML");c.observe(ie,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ne,function(){c.unbind(ie)});var re=document.createElement("div");$.appendChild(re),re.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var ae=document.createElement("label");re.appendChild(ae),ae.className="cell-w-bonds-calculator__label",ae.innerHTML=v.get("bondsCalculator","modifiedDuration");var se=document.createElement("div");re.appendChild(se),se.className="cell-width--100px  cell-text-right",se.type="text";var oe=e.BindingFactory.createValueBinding(se,"innerHTML");d.observe(oe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(se,function(){d.unbind(oe)});var le=document.createElement("div");_.appendChild(le),le.className="cell-w-bonds-calculator__row";var ce=document.createElement("div");le.appendChild(ce),ce.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var de=document.createElement("label");ce.appendChild(de),de.className="cell-w-bonds-calculator__label",de.innerHTML=v.get("bondsCalculator","accruedInterest");var ue=document.createElement("div");ce.appendChild(ue),ue.className="cell-width--120px  cell-text-right",ue.type="text";var he=e.BindingFactory.createValueBinding(ue,"innerHTML");u.observe(he,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ue,function(){u.unbind(he)});var pe=document.createElement("div");le.appendChild(pe),pe.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var me=document.createElement("label");pe.appendChild(me),me.className="cell-w-bonds-calculator__label",me.innerHTML=v.get("bondsCalculator","basisPointValue");var ge=document.createElement("div");pe.appendChild(ge),ge.className="cell-width--100px  cell-text-right",ge.type="text";var fe=e.BindingFactory.createValueBinding(ge,"innerHTML");h.observe(fe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ge,function(){h.unbind(fe)});var ve=document.createElement("div");_.appendChild(ve),ve.className="cell-w-bonds-calculator__row";var ye=document.createElement("div");ve.appendChild(ye),ye.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var be=document.createElement("label");ye.appendChild(be),be.className="cell-w-bonds-calculator__label",be.innerHTML=v.get("bondsCalculator","dirtyPricePercent");var Te=document.createElement("div");ye.appendChild(Te),Te.className="cell-width--120px  cell-text-right",Te.type="text";var Se=e.BindingFactory.createValueBinding(Te,"innerHTML");p.observe(Se,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(Te,function(){p.unbind(Se)});var Ce=document.createElement("div");ve.appendChild(Ce),Ce.className="cell-w-bonds-calculator__row__col  cell-w-bonds-calculator__result";var Ie=document.createElement("label");Ce.appendChild(Ie),Ie.className="cell-w-bonds-calculator__label",Ie.innerHTML=v.get("bondsCalculator","convexity");var _e=document.createElement("div");Ce.appendChild(_e),_e.className="cell-width--100px  cell-text-right",_e.type="text";var Me=e.BindingFactory.createValueBinding(_e,"innerHTML");m.observe(Me,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_e,function(){m.unbind(Me)})},t.create_WBondsCalculator_cashFlow_DOM=function(n,i,r){var a=document.createElement("div");n.appendChild(a),a.className="cell-w-bonds-calculator__section";var s=document.createElement("table");a.appendChild(s),s.className="cell-table";var o=document.createElement("thead");s.appendChild(o);var l=document.createElement("tr");o.appendChild(l);var c=document.createElement("th");l.appendChild(c),c.className="cell-text-left",c.innerHTML=r.get("bondsCalculator","colDate");var d=document.createElement("th");l.appendChild(d),d.className="cell-text-right",d.innerHTML=r.get("bondsCalculator","colDescription");var u=document.createElement("th");l.appendChild(u),u.className="cell-text-right",u.innerHTML=r.get("bondsCalculator","colAmount");var h=document.createElement("th");l.appendChild(h),h.className="cell-text-right",h.innerHTML=r.get("bondsCalculator","colBalance");var p=document.createElement("th");l.appendChild(p),p.className="cell-text-right",p.innerHTML=r.get("bondsCalculator","colAmountPercent");var m=document.createElement("th");l.appendChild(m),m.className="cell-text-right",m.innerHTML=r.get("bondsCalculator","colBalancePercent");var g=document.createElement("tbody");s.appendChild(g),g.className="";var f=new e.ArrayBinding(g,new e.InlineRowFactory(function(e,t){var n=document.createElement("tr");n.className="cell-w-bonds-calculator__cash-flow-item";var i=document.createElement("td");n.appendChild(i),i.className="cell-nowrap",i.innerHTML=e.date;var r=document.createElement("td");n.appendChild(r),r.className="cell-text-right",r.innerHTML=e.description;var a=document.createElement("td");n.appendChild(a),a.className="cell-text-right",a.innerHTML=e.amount;var s=document.createElement("td");n.appendChild(s),s.className="cell-text-right",s.innerHTML=e.balance;var o=document.createElement("td");n.appendChild(o),o.className="cell-text-right",o.innerHTML=e.amountPercent;var l=document.createElement("td");return n.appendChild(l),l.className="cell-text-right",l.innerHTML=e.balancePercent,n}),null);i.observe(f),t.unbindingManager.registerUnbind(g,function(){i.unbind(f)})},t.create_CFilterSelector_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-funds-filter-list-wrapper  cell-noselect";var g=new e.ClassBinding(m,"cell-funds-filter-list-wrapper--expanded",function(e){return 1==e});l.observe(g,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(m,r),t.unbindingManager.registerUnbind(m,function(){l.unbind(g)});var f=document.createElement("div");m.appendChild(f),f.className="cell-funds-filter__header-wrapper",f.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(f,"click",function(e){d()}),f.setAttribute("role","button"),InfrontUtil.addEventListener(f,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d()});var v=e.BindingFactory.createHTMLAttributeBinding(f,"aria-expanded",function(e){return(1==e).toString()});l.observe(v,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(f,function(){l.unbind(v)});var y=document.createElement("div");f.appendChild(y),y.className="cell-funds-filter--header";var b=document.createElement("span");y.appendChild(b),b.innerHTML=i;var T=document.createElement("span");y.appendChild(T),T.className="cell-funds-filter--total-selected-filters";var S=e.BindingFactory.createValueBinding(T,"innerHTML");a.observe(S,e.InitialUpdate.Synchronous);var C=e.BindingFactory.createHTMLAttributeBinding(T,"style",function(e){return"display:"+(0<e?"inline":"none")});if(a.observe(C),t.unbindingManager.registerUnbind(T,function(){a.unbind(S),a.unbind(C)}),1==u){var I=document.createElement("div");f.appendChild(I),I.className="cell-funds-filter--expand-arrow";var _=document.createElement("div");I.appendChild(_),_.className="cell-funds-filter--expand-arrow__icon";var M=new e.ClassBinding(_,"cell-funds-filter--expand-arrow__icon--expanded",function(e){return 1==e});l.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){l.unbind(M)})}var E=document.createElement("div");m.appendChild(E);var w=new e.ClassBinding(E,"cell-funds-filter--groups-wrapper--expanded",function(e){return 1==e||0==u});l.observe(w,e.InitialUpdate.Synchronous),1==u&&InfrontUtil.addClassName(E,"cell-funds-filter--groups-wrapper");var A=e.BindingFactory.createHTMLAttributeBinding(E,"style",function(e){return"height:"+(e||1!=u?h.get()+"px":0)});l.observe(A),t.unbindingManager.registerUnbind(E,function(){l.unbind(w),l.unbind(A)});var D=document.createElement("div");E.appendChild(D),D.className="cell-funds-filter--groups";for(var O=function(n,i){D.setAttribute("role","listbox");var r=document.createElement("div");r.className="cell-funds-filter__group",InfrontUtil.addEventListener(r,"click",function(e){e.stopPropagation(),o(n)}),r.setAttribute("role","button"),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(n)}),r.setAttribute("role","option");var a=e.BindingFactory.createHTMLAttributeBinding(r,"aria-selected",function(e){return(1==e).toString()});n.selected.observe(a,e.InitialUpdate.Synchronous);var s=new e.ClassBinding(r,"cell-funds-filter__group--selected",function(e){return 1==e});n.selected.observe(s,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(r,n.className);var l=e.BindingFactory.createHTMLAttributeBinding(r,"tabIndex",function(e){return e});c.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){n.selected.unbind(a),n.selected.unbind(s),c.unbind(l)});var d=document.createElement("span");r.appendChild(d),d.className="cell-funds-filter__group__component  cell-funds-filter__group__component--filter-name";var u=e.BindingFactory.createValueBinding(d,"innerHTML");n.text.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){n.text.unbind(u)});var h=document.createElement("span");r.appendChild(h),h.className="cell-funds-filter__group__component  cell-funds-filter__group__component--total-count";var p=e.BindingFactory.createValueBinding(h,"innerHTML");return n.count.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(h,function(){n.count.unbind(p)}),r},k=0;k<s.length;k++)D.appendChild(O(s[k]));return D},t.create_CRadioFilterSelector_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),m.className="cell-funds-filter-list-wrapper  cell-noselect";var g=new e.ClassBinding(m,"cell-funds-filter-list-wrapper--expanded",function(e){return 1==e});l.observe(g,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(m,r),t.unbindingManager.registerUnbind(m,function(){l.unbind(g)});var f=document.createElement("div");m.appendChild(f),f.className="cell-funds-filter__header-wrapper",f.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(f,"click",function(e){d()}),f.setAttribute("role","button"),InfrontUtil.addEventListener(f,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d()});var v=e.BindingFactory.createHTMLAttributeBinding(f,"aria-expanded",function(e){return(1==e).toString()});l.observe(v,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(f,function(){l.unbind(v)});var y=document.createElement("div");f.appendChild(y),y.className="cell-funds-filter--header";var b=document.createElement("span");y.appendChild(b),b.innerHTML=i;var T=document.createElement("span");y.appendChild(T),T.className="cell-funds-filter--total-selected-filters";var S=e.BindingFactory.createValueBinding(T,"innerHTML");a.observe(S,e.InitialUpdate.Synchronous);var C=e.BindingFactory.createHTMLAttributeBinding(T,"style",function(e){return"display:"+(0<e?"inline":"none")});if(a.observe(C),t.unbindingManager.registerUnbind(T,function(){a.unbind(S),a.unbind(C)}),1==u){var I=document.createElement("div");f.appendChild(I),I.className="cell-funds-filter--expand-arrow";var _=document.createElement("div");I.appendChild(_),_.className="cell-funds-filter--expand-arrow__icon";var M=new e.ClassBinding(_,"cell-funds-filter--expand-arrow__icon--expanded",function(e){return 1==e});l.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){l.unbind(M)})}var E=document.createElement("div");m.appendChild(E);var w=new e.ClassBinding(E,"cell-funds-filter--groups-wrapper--expanded",function(e){return 1==e||0==u});l.observe(w,e.InitialUpdate.Synchronous),1==u&&InfrontUtil.addClassName(E,"cell-funds-filter--groups-wrapper");var A=e.BindingFactory.createHTMLAttributeBinding(E,"style",function(e){return"height:"+(e||1!=u?h.get()+"px":0)});l.observe(A),t.unbindingManager.registerUnbind(E,function(){l.unbind(w),l.unbind(A)});var D=document.createElement("div");E.appendChild(D),D.className="cell-funds-filter--radio-groups";for(var O=function(n,i){var r=document.createElement("div");r.className="cell-radio-filter__group",InfrontUtil.addEventListener(r,"click",function(e){e.stopPropagation(),o(n)}),r.setAttribute("role","button"),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(n)}),r.setAttribute("role","radio");var a=new e.ClassBinding(r,"cell-radio-filter__group--selected",function(e){return 1==e});n.selected.observe(a,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(r,n.className);var s=e.BindingFactory.createHTMLAttributeBinding(r,"tabIndex",function(e){return e});c.observe(s,e.InitialUpdate.Synchronous);var l=e.BindingFactory.createHTMLAttributeBinding(r,"aria-checked",function(e){return(1==e).toString()});n.selected.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){n.selected.unbind(a),c.unbind(s),n.selected.unbind(l)});var d=document.createElement("div");r.appendChild(d),d.className="cell-radio-filter__group__component  cell-radio-filter__group__component--radio-button";var u=new e.ClassBinding(d,"cell-radio-filter__group__component--radio-button--selected",function(e){return 1==e});n.selected.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){n.selected.unbind(u)});var h=document.createElement("div");r.appendChild(h),h.className="cell-radio-filter__group__component  cell-radio-filter__group__component--filter-name";var p=e.BindingFactory.createValueBinding(h,"innerHTML");n.text.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(h,function(){n.text.unbind(p)});var m=document.createElement("div");r.appendChild(m),m.className="cell-funds-filter__group__component  cell-funds-filter__group__component--total-count";var g=e.BindingFactory.createValueBinding(m,"innerHTML");return n.count.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){n.count.unbind(g)}),r},k=0;k<s.length;k++)D.appendChild(O(s[k]));return D},t.create_CRangeFilterSelector_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m){var g=document.createElement("div");n.appendChild(g),g.className="cell-funds-filter-list-wrapper  cell-noselect";var f=new e.ClassBinding(g,"cell-funds-filter-list-wrapper--expanded",function(e){return 1==e});d.observe(f,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(g,r),t.unbindingManager.registerUnbind(g,function(){d.unbind(f)});var v=document.createElement("div");g.appendChild(v),v.className="cell-funds-filter__header-wrapper",v.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(v,"click",function(e){h()}),v.setAttribute("role","button"),InfrontUtil.addEventListener(v,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h()});var y=document.createElement("div");v.appendChild(y),y.className="cell-funds-filter--header";var b=document.createElement("span");y.appendChild(b),b.innerHTML=i;var T=document.createElement("span");y.appendChild(T),T.className="cell-funds-filter--total-selected-filters";var S=e.BindingFactory.createValueBinding(T,"innerHTML");o.observe(S,e.InitialUpdate.Synchronous);var C=e.BindingFactory.createHTMLAttributeBinding(T,"style",function(e){return"display:"+(0<e?"inline":"none")});if(o.observe(C),t.unbindingManager.registerUnbind(T,function(){o.unbind(S),o.unbind(C)}),1==p){var I=document.createElement("div");v.appendChild(I),I.className="cell-funds-filter--expand-arrow";var _=document.createElement("div");I.appendChild(_),_.className="cell-funds-filter--expand-arrow__icon";var M=new e.ClassBinding(_,"cell-funds-filter--expand-arrow__icon--expanded",function(e){return 1==e});d.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){d.unbind(M)})}var E=document.createElement("div");g.appendChild(E);var w=new e.ClassBinding(E,"cell-funds-filter--groups-wrapper--expanded",function(e){return 1==e||0==p});d.observe(w,e.InitialUpdate.Synchronous),1==p&&InfrontUtil.addClassName(E,"cell-funds-filter--groups-wrapper");var A=e.BindingFactory.createHTMLAttributeBinding(E,"style",function(e){return"height:"+(e||1!=p?m.get()+"px":0)});d.observe(A),t.unbindingManager.registerUnbind(E,function(){d.unbind(w),d.unbind(A)});var D=document.createElement("div");E.appendChild(D),D.className="cell-funds-filter__range-wrapper";var O=document.createElement("div");D.appendChild(O),O.className="cell-funds-filter__range-holder";var k=document.createElement("div");O.appendChild(k),k.className="cell-range-filter-bullets-container";for(var R=function(n,i){var r=document.createElement("div");r.className="cell-range-filter-bullet__group",InfrontUtil.addEventListener(r,"click",function(e){e.stopPropagation(),c(n)}),r.setAttribute("role","button"),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||c(n)}),InfrontUtil.addClassName(r,n.className);var a=e.BindingFactory.createHTMLAttributeBinding(r,"tabIndex",function(e){return e});u.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){u.unbind(a)});var s=document.createElement("div");r.appendChild(s),s.className="cell-range-filter__group__component  cell-range-filter__group__component__range-bullet";var o=document.createElement("div");r.appendChild(o),o.className="cell-range-filter__group__component  cell-range-filter__group__component--filter-name";var l=e.BindingFactory.createValueBinding(o,"innerHTML");return n.text.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){n.text.unbind(l)}),r},N=0;N<l.length;N++)k.appendChild(R(l[N]));return{filtergroupContainer:k,filtergroupHolder:O,rangeWrapper:D}},t.create_CFilterSingleSelector_DOM=function(n,i,r,a,s){var o=document.createElement("article");n.appendChild(o),o.className="cell-funds-filter-list-wrapper",InfrontUtil.addClassName(o,r),o.setAttribute("role","listbox");var l=document.createElement("div");o.appendChild(l),l.className="cell-funds-filter__header-wrapper",InfrontUtil.addEventListener(l,"click",function(e){s()}),l.setAttribute("role","button"),InfrontUtil.addEventListener(l,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s()});var c=e.BindingFactory.createHTMLAttributeBinding(l,"aria-selected",function(e){return(1==e).toString()});a.selected.observe(c,e.InitialUpdate.Synchronous),l.setAttribute("role","option"),t.unbindingManager.registerUnbind(l,function(){a.selected.unbind(c)});var d=document.createElement("div");l.appendChild(d),d.className="cell-funds-filter__group",d.setAttribute("tabIndex","0");var u=new e.ClassBinding(d,"cell-funds-filter__group--selected",function(e){return 1==e});a.selected.observe(u,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(d,a.className),t.unbindingManager.registerUnbind(d,function(){a.selected.unbind(u)});var h=document.createElement("span");d.appendChild(h),h.className="cell-funds-filter__group__component  cell-funds-filter__group__component--filter-name";var p=e.BindingFactory.createValueBinding(h,"innerHTML");a.text.observe(p,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(h,function(){a.text.unbind(p)});var m=document.createElement("span");d.appendChild(m),m.className="cell-funds-filter__group__component  cell-funds-filter__group__component--total-count";var g=e.BindingFactory.createValueBinding(m,"innerHTML");return a.count.observe(g,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(m,function(){a.count.unbind(g)}),{filterContainer:o,columnElement:d}},t.create_CFilterFreeTextSearch_DOM=function(e,t,n,i){var r=document.createElement("div");e.appendChild(r),r.className="cell-funds-filter-list-wrapper",InfrontUtil.addClassName(r,n);var a=document.createElement("div");r.appendChild(a),a.className="cell-funds-filter__header-wrapper";var s=document.createElement("input");return a.appendChild(s),s.className="cell-input  cell-funds-filter-list-search  cell-funds-filter-list-search--input",s.type="text",s.setAttribute("aria-label",""+i.get("accessibility","filterLabel")),s},t.create_WScreenerActiveFilter_DOM=function(n,i,r,a,s){var o=document.createElement("article");if(n.appendChild(o),null!=i){var l=document.createElement("div");o.appendChild(l),l.className="cell-h4",l.innerHTML=i}var c=document.createElement("div");o.appendChild(c),c.className="cell-w-active-filter-wrapper";var d=document.createElement("div");o.appendChild(d),d.className="cell-w-clear-filters-wrapper",d.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(d,"click",function(e){e.stopPropagation(),a()}),d.setAttribute("role","button"),InfrontUtil.addEventListener(d,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a()});var u=new e.ClassBinding(d,"cell-display-none",function(e){return 0==e});r.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){r.unbind(u)});var h=document.createElement("div");return d.appendChild(h),h.className="cell-w-clear-filters",h.innerHTML=s.get("screenerActiveFilters","removeAllFilters"),c},t.create_CScreenerActiveFilterGroup_DOM=function(n,i,r,a,s,o){var l=document.createElement("div");n.appendChild(l),l.className="cell-w-active-filter  cell-noselect",InfrontUtil.addEventListener(l,"click",function(e){a()}),l.setAttribute("role","button"),InfrontUtil.addEventListener(l,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a()});var c=document.createElement("div");l.appendChild(c),c.className="cell-w-active-filter__header";var d=e.BindingFactory.createValueBinding(c,"innerHTML");i.observe(d,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(c,function(){i.unbind(d)});var u=document.createElement("div");l.appendChild(u),u.className="cell-w-active-filter__parameters";var h=new e.ArrayBinding(u,new e.InlineRowFactory(function(n,i){var r=document.createElement("span");r.className="cell-w-active-filter__parameters__element",r.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(r,"click",function(e){e.stopPropagation(),o(n)}),InfrontUtil.addEventListener(r,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(n)});var a=e.BindingFactory.createValueBinding(r,"innerHTML");return n.text.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){n.text.unbind(a)}),r}),null);r.observe(h),t.unbindingManager.registerUnbind(u,function(){r.unbind(h)});var p=document.createElement("div");return l.appendChild(p),p.className="cell-w-active-filter__remove-button",p.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(p,"click",function(e){e.stopPropagation(),s()}),p.setAttribute("role","button"),InfrontUtil.addEventListener(p,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s()}),l},t.create_CScreenerActiveFilterShowCountGroup_DOM=function(n,i,r,a,s,o,l){var c=document.createElement("div");n.appendChild(c),c.className="cell-w-active-filter  cell-noselect",InfrontUtil.addEventListener(c,"click",function(e){s()}),c.setAttribute("role","button"),InfrontUtil.addEventListener(c,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s()});var d=document.createElement("div");c.appendChild(d),d.className="cell-w-active-filter__header";var u=e.BindingFactory.createValueBinding(d,"innerHTML");i.observe(u,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(d,function(){i.unbind(u)});var h=document.createElement("div");c.appendChild(h),h.className="cell-w-active-filter__parameters";var p=document.createElement("span");h.appendChild(p),p.className="cell-w-active-filter__parameters__count",p.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(p,"click",function(e){e.stopPropagation(),o()}),InfrontUtil.addEventListener(p,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o()});var m=e.BindingFactory.createValueBinding(p,"innerHTML");r.observe(m,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(p,function(){r.unbind(m)});var g=document.createElement("span");h.appendChild(g),g.className="cell-w-active-filter__parameters__label",g.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(g,"click",function(e){e.stopPropagation(),o()}),InfrontUtil.addEventListener(g,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o()}),g.innerHTML=a;var f=document.createElement("div");return c.appendChild(f),f.className="cell-w-active-filter__remove-button",f.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(f,"click",function(e){e.stopPropagation(),o()}),f.setAttribute("role","button"),InfrontUtil.addEventListener(f,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o()}),c},t.create_CScreenerActiveRangeFilterGroup_DOM=function(n,i,r,a,s,o,l,c){var d=document.createElement("div");n.appendChild(d),d.className="cell-w-active-filter  cell-noselect",InfrontUtil.addEventListener(d,"click",function(e){o()}),d.setAttribute("role","button"),InfrontUtil.addEventListener(d,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o()});var u=document.createElement("div");d.appendChild(u),u.className="cell-w-active-filter__header";var h=e.BindingFactory.createValueBinding(u,"innerHTML");i.observe(h,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(u,function(){i.unbind(h)});var p=document.createElement("div");d.appendChild(p),p.className="cell-w-active-filter__parameters";var m=document.createElement("span");p.appendChild(m),m.className="cell-w-active-range-filter__parameters__element",m.setAttribute("tabIndex","0");var g=document.createElement("span");m.appendChild(g),g.className="cell-w-active-range-filter__range__start",g.setAttribute("tabIndex","0");var f=e.BindingFactory.createValueBinding(g,"innerHTML");r.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){r.unbind(f)});var v=document.createElement("span");m.appendChild(v),v.className="cell-w-active-range-filter__range__separator";var y=e.BindingFactory.createValueBinding(v,"innerHTML");s.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){s.unbind(y)});var b=document.createElement("span");m.appendChild(b),b.className="cell-w-active-range-filter__range__end",b.setAttribute("tabIndex","0");var T=e.BindingFactory.createValueBinding(b,"innerHTML");a.observe(T,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(b,function(){a.unbind(T)});var S=document.createElement("div");return d.appendChild(S),S.className="cell-w-active-filter__remove-button",S.setAttribute("tabIndex","0"),InfrontUtil.addEventListener(S,"click",function(e){e.stopPropagation(),l()}),S.setAttribute("role","button"),InfrontUtil.addEventListener(S,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l()}),d},t.create_CTabs_DOM=function(n,i,r,a){var s=document.createElement("div");n.appendChild(s);var o=document.createElement("div");s.appendChild(o),o.className="cell-clear";var l=document.createElement("ul");o.appendChild(l),l.className="cell-ul  cell-tabs__horizontal",l.setAttribute("role","tablist");var c=new e.ArrayBinding(l,new e.InlineRowFactory(function(n,i){var s=document.createElement("li");s.className="cell-tabs__horizontal__tab  cell-noselect",InfrontUtil.addEventListener(s,"click",function(e){a(n.id)}),InfrontUtil.addEventListener(s,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a(n.id)}),s.setAttribute("role","tab");var o=e.BindingFactory.createHTMLAttributeBinding(s,"aria-selected",function(e){return(e==n.id).toString()});r.observe(o,e.InitialUpdate.Synchronous),s.setAttribute("tabindex","0"),s.innerHTML=n.label;var l=new e.ClassBinding(s,"cell-tabs__horizontal__tab--selected",function(e){return e==n.id});return r.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){r.unbind(o),r.unbind(l)}),s}),null);i.observe(c),t.unbindingManager.registerUnbind(l,function(){i.unbind(c)});var d=document.createElement("div");return s.appendChild(d),d},t.create_CSearch_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p){var m=document.createElement("div");n.appendChild(m),InfrontUtil.addEventListener(m,"click",function(e){p(e)}),m.setAttribute("role","button"),InfrontUtil.addEventListener(m,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||p(e)});var g=document.createElement("div");if(m.appendChild(g),1==l&&InfrontUtil.addClassName(g,"cell-csearch-wrapper"),l){var f=document.createElement("div");g.appendChild(f),f.className="cell-csearch-instruments";var v=new e.ArrayBinding(f,new e.InlineRowFactory(function(n,i){var r=document.createElement("div");r.className="cell-csearch-instrument";var a=new e.ClassBinding(r,"cell-csearch-instrument--selected",function(e){return 1==e});d.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){d.unbind(a)});var s=document.createElement("span");r.appendChild(s),s.className="cell-csearch-instrument__label",s.innerHTML=n.ticker;var o=document.createElement("span");return r.appendChild(o),o.className="cell-csearch-instrument__close-btn",InfrontUtil.addEventListener(o,"click",function(e){h(n)}),InfrontUtil.addEventListener(o,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(n)}),r}),null);c.observe(v),t.unbindingManager.registerUnbind(f,function(){c.unbind(v)})}var y=document.createElement("input");g.appendChild(y),y.className="cell-input",y.type="text",y.setAttribute("id","search-field"),y.setAttribute("autocomplete","off"),y.setAttribute("tabindex","0"),y.setAttribute("role","textbox"),i.bind(y),1==l&&InfrontUtil.addClassName(y,"cell-csearch-input"),t.unbindingManager.registerUnbind(y,function(){return i.unbind()});var b=document.createElement("div");m.appendChild(b),b.className="cell-search-results cell-search-result__wrapper",b.setAttribute("role","list");var T=e.BindingFactory.createHTMLAttributeBinding(b,"style",function(e){return"display:"+(e?"block":"none")});o.observe(T);var S=new e.ArrayBinding(b,new e.InlineRowFactory(function(n,i){var r=document.createElement("div");r.className="cell-flex-row cell-search-result__item",r.setAttribute("role","listitem"),r.setAttribute("tabindex","0");var o=new e.ClassBinding(r,"cell-search-result__item--selected",function(e){return e==i});if(s.observe(o,e.InitialUpdate.Synchronous),InfrontUtil.addClassName(r,n._itemTypeClass),t.unbindingManager.registerUnbind(r,function(){s.unbind(o)}),!n.type||"INSTRUMENT"==n.type){var l=document.createElement("div");r.appendChild(l),l.className="cell-flex-column cell-flex-shrink cell-flex-collapse";var c=document.createElement("span");l.appendChild(c),c.className="cell-search-result__item-instrument",InfrontUtil.addClassName(c,n._typeclass);for(var d=function(e,t){var i=document.createElement("div");if(i.className="cell-flex-column","ticker"===e&&InfrontUtil.addClassName(i,"cell-flex-shrink"),"full_name"==e){var r=document.createElement("span");i.appendChild(r),r.className="",InfrontUtil.addClassName(r,n.country)}var a=document.createElement("span");return i.appendChild(a),a.className="cell-search-result__item-name",a.innerHTML=n.instrument[e],i},u=0;u<a.length;u++)r.appendChild(d(a[u]))}if("CHAIN"==n.type){var h=document.createElement("div");r.appendChild(h),h.className="cell-flex-column cell-flex-shrink cell-flex-collapse";var p=document.createElement("span");h.appendChild(p),p.className="cell-search-result__item-instrument",InfrontUtil.addClassName(p,n._typeclass);var m=document.createElement("div");r.appendChild(m),m.className="cell-flex-column",m.innerHTML=n.chain.description}if("FEED"==n.type){var g=document.createElement("div");r.appendChild(g),g.className="cell-flex-column cell-flex-shrink cell-flex-collapse";var f=document.createElement("span");g.appendChild(f),f.className="cell-search-result__item-instrument",InfrontUtil.addClassName(f,n._typeclass);var v=document.createElement("div");r.appendChild(v),v.className="cell-flex-column";var y=document.createElement("span");v.appendChild(y),y.className="",InfrontUtil.addClassName(y,n.flag);var b=document.createElement("span");v.appendChild(b),b.className="",b.innerHTML=n.service;var T=document.createElement("div");v.appendChild(T),T.className="cell-pull-right cell-opacity-50 cell-5-padding-right";var S=document.createElement("span");T.appendChild(S),S.className="",S.innerHTML=n.access}return r}),null);return r.observe(S),t.unbindingManager.registerUnbind(b,function(){o.unbind(T),r.unbind(S)}),{dropdownContainer:b,searchfield:y}},t.create_CSearchInputOnly_DOM=function(n,i,r,a,s,o,l){var c=document.createElement("div");n.appendChild(c),InfrontUtil.addEventListener(c,"click",function(e){l(e)}),c.setAttribute("role","button"),InfrontUtil.addEventListener(c,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)});var d=document.createElement("div");if(c.appendChild(d),1==r&&InfrontUtil.addClassName(d,"cell-csearch-wrapper"),r){var u=document.createElement("div");d.appendChild(u),u.className="cell-csearch-instruments";var h=new e.ArrayBinding(u,new e.InlineRowFactory(function(n,i){var r=document.createElement("div");r.className="cell-csearch-instrument";var a=new e.ClassBinding(r,"cell-csearch-instrument--selected",function(e){return 1==e});s.observe(a,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(r,function(){s.unbind(a)});var l=document.createElement("span");r.appendChild(l),l.className="cell-csearch-instrument__label",l.innerHTML=n.ticker;var c=document.createElement("span");return r.appendChild(c),c.className="cell-csearch-instrument__close-btn",InfrontUtil.addEventListener(c,"click",function(e){o(n)}),InfrontUtil.addEventListener(c,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(n)}),r}),null);a.observe(h),t.unbindingManager.registerUnbind(u,function(){a.unbind(h)})}var p=document.createElement("input");return d.appendChild(p),p.className="cell-input",p.type="text",i.bind(p),1==r&&InfrontUtil.addClassName(p,"cell-csearch-input"),t.unbindingManager.registerUnbind(p,function(){return i.unbind()}),p},t.create_CDropDown_DOM=function(n,i,r,a,s,o,l,c,d,u,h,p,m,g,f,v,y,b){var T=document.createElement("div");n.appendChild(T),T.className="cell-pull-right";var S=document.createElement("div");T.appendChild(S),InfrontUtil.addEventListener(S,"click",function(e){e.stopPropagation(),c(e)}),S.setAttribute("role","button"),InfrontUtil.addEventListener(S,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||c(e)}),S.setAttribute("role","button"),S.setAttribute("tabindex","0"),S.setAttribute("aria-label",""+b.get("accessibility","selectFilter")),S.setAttribute("aria-haspopup","true");var C=document.createElement("div");S.appendChild(C),C.className="cell-mininav__btn",C.type="button";var I=e.BindingFactory.createValueBinding(C,"innerHTML");i.observe(I,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(C,function(){i.unbind(I)});var _=document.createElement("span");C.appendChild(_),_.className="cell-noselect  cell-heading-dropdown__arrow  cell-arrow  cell-arrow--down  cell-pull-right";var M=document.createElement("div");T.appendChild(M),M.className="cell-pos-relative";var E=document.createElement("div");M.appendChild(E),E.className="cell-pull-left";var w=document.createElement("div");E.appendChild(w),w.className="cell-custom-dropdown-selector-wrapper",w.setAttribute("style","display:none"),w.setAttribute("role","list"),w.setAttribute("tabindex","0");var A=e.BindingFactory.createHTMLAttributeBinding(w,"style",function(e){return"display:"+(e?"":"none")});s.observe(A);var D=new e.ClassBinding(w,"cell-custom-dropdown-selector-wrapper--active",function(e){return 1==e});s.observe(D,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(w,function(){s.unbind(A),s.unbind(D)});var O=document.createElement("div");w.appendChild(O),O.className="cell-custom-dropdown-selector";var k=document.createElement("div");O.appendChild(k),k.className="cell-custom-dropdown-selector__item",InfrontUtil.addEventListener(k,"click",function(e){e.stopPropagation(),h(e)}),k.setAttribute("role","button"),InfrontUtil.addEventListener(k,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(e)}),k.setAttribute("tabindex","0"),k.setAttribute("aria-label",""+b.get("accessibility","closeMenu"));var R=document.createElement("div");k.appendChild(R),R.className="cell-custom-dropdown-selector__item__header";var N=e.BindingFactory.createValueBinding(R,"innerHTML");o.observe(N,e.InitialUpdate.Synchronous);var L=new e.ClassBinding(R,"cell-custom-dropdown-selector__item__header--back-button",function(e){return 1==e});l.observe(L,e.InitialUpdate.Synchronous);var P=new e.ClassBinding(R,"cell-custom-dropdown-selector__item__header--close-button",function(e){return 0==e});l.observe(P,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(R,function(){o.unbind(N),l.unbind(L),l.unbind(P)});var F=document.createElement("div");O.appendChild(F),F.className="cell-custom-dropdown-selector__item__upper-pane",InfrontUtil.addEventListener(F,"click",function(e){e.stopPropagation(),h(e)}),F.setAttribute("role","button"),InfrontUtil.addEventListener(F,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(e)}),F.setAttribute("tabindex","0");var x=function(e){return!(0==e)};x(l.get())&&InfrontUtil.addClassName(F,"cell-display-none");var U=new e.ClassBinding(F,"cell-display-none",x);l.observe(U,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(F,function(){l.unbind(U)});var B=document.createElement("div");O.appendChild(B),B.className="cell-custom-dropdown-selector-scroller";var W=new e.ArrayBinding(B,new e.InlineRowFactory(function(n,i){B.setAttribute("role","listitem");var r=document.createElement("div");if(r.className="cell-custom-dropdown-selector__item",n.hasSubMenu){var a=document.createElement("div");r.appendChild(a),a.className="cell-custom-dropdown-selector__item__label  cell-custom-dropdown-selector__item__label--has-children",InfrontUtil.addEventListener(a,"click",function(e){e.stopPropagation(),u(n)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u(n)}),a.setAttribute("tabindex","0"),a.setAttribute("aria-haspopup","true");var s=document.createElement("span");a.appendChild(s),s.innerHTML=n.title;var o=document.createElement("span");a.appendChild(o);var l=e.BindingFactory.createValueBinding(o,"innerHTML");n.subItemsSelectedText.observe(l,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(o,function(){n.subItemsSelectedText.unbind(l)})}if(!n.hasSubMenu){if(1==g){a=document.createElement("div"),r.appendChild(a),a.className="cell-custom-dropdown-selector__item__label  cell-custom-dropdown-selector__item__label--multiselect",InfrontUtil.addEventListener(a,"click",function(e){e.stopPropagation(),d(n)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(n)}),a.setAttribute("aria-haspopup","false"),a.setAttribute("role","radio"),a.setAttribute("tabindex","0"),a.innerHTML=n.title;var c=new e.ClassBinding(a,"cell-custom-dropdown-selector__item__label--multiselect--selected",function(e){return 1==e});n.selected.observe(c,e.InitialUpdate.Synchronous);var h=e.BindingFactory.createHTMLAttributeBinding(a,"aria-checked",function(e){return e});n.selected.observe(h,e.InitialUpdate.Synchronous),a.setAttribute("aria-live","polite"),t.unbindingManager.registerUnbind(a,function(){n.selected.unbind(c),n.selected.unbind(h)})}if(0==g){a=document.createElement("div"),r.appendChild(a),a.className="cell-custom-dropdown-selector__item__label",InfrontUtil.addEventListener(a,"click",function(e){e.stopPropagation(),d(n)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(n)}),a.setAttribute("tabindex","0"),a.innerHTML=n.title;var p=new e.ClassBinding(a,"cell-custom-dropdown-selector__item__label--selected",function(e){return 1==e});n.selected.observe(p,e.InitialUpdate.Synchronous),a.setAttribute("aria-haspopup","true"),t.unbindingManager.registerUnbind(a,function(){n.selected.unbind(p)})}}return r}),null);a.observe(W),t.unbindingManager.registerUnbind(B,function(){a.unbind(W)});var H=document.createElement("div");w.appendChild(H),H.className="cell-custom-dropdown-selector__item__lower-pane",InfrontUtil.addEventListener(H,"click",function(e){e.stopPropagation(),h(e)}),H.setAttribute("role","button"),InfrontUtil.addEventListener(H,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||h(e)});var V=function(e){return!(0==e)};V(l.get())&&InfrontUtil.addClassName(H,"cell-display-none");var G=new e.ClassBinding(H,"cell-display-none",V);l.observe(G,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(H,function(){l.unbind(G)});var z=document.createElement("div");w.appendChild(z),z.className="cell-custom-dropdown-selector__button-tray";var q=function(e){return!(e||!f&&r)};q(l.get())&&InfrontUtil.addClassName(z,"cell-display-none");var Y=new e.ClassBinding(z,"cell-display-none",q);l.observe(Y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(z,function(){l.unbind(Y)});var K=document.createElement("button");z.appendChild(K),K.className="cell-button  cell-button--small  cell-button--confirm cell-button--flat",InfrontUtil.addEventListener(K,"click",function(e){e.stopPropagation(),m(e)}),K.setAttribute("tabindex","0"),1!=r&&InfrontUtil.addClassName(K,"cell-display-none"),K.innerHTML=y;var X=document.createElement("div");z.appendChild(X),X.className="cell-pull-right";var j=document.createElement("button");X.appendChild(j),j.className="cell-button  cell-button--small  cell-button--cancel cell-10-margin-left",InfrontUtil.addEventListener(j,"click",function(e){e.stopPropagation(),h(e)}),j.setAttribute("tabindex","0");var Z=function(e){return!(1==e)};Z(l.get())&&InfrontUtil.addClassName(j,"cell-display-none");var J=new e.ClassBinding(j,"cell-display-none",Z);l.observe(J,e.InitialUpdate.Synchronous),j.innerHTML=v,t.unbindingManager.registerUnbind(j,function(){l.unbind(J)});var Q=document.createElement("button");return X.appendChild(Q),Q.className="cell-button  cell-button--small  cell-button--confirm cell-10-margin-left",InfrontUtil.addEventListener(Q,"click",function(e){e.stopPropagation(),p(e)}),Q.innerHTML=b.get("global","ok"),{dropdownContainer:w,upperPaneContainer:F,lowerPaneContainer:H,dropdownElements:B,dropDownLabel:S,closeBtn:k}},t.create_CPager_DOM=function(n,i,r,a,s,o,l,c){var d=document.createElement("div");n.appendChild(d),d.className="cell-text-center  cell-news-pager-control  cell-noselect";var u=e.BindingFactory.createHTMLAttributeBinding(d,"style",function(e){return"display:"+(e?"block":"none")});i.observe(u),t.unbindingManager.registerUnbind(d,function(){i.unbind(u)});var h=document.createElement("ul");d.appendChild(h),h.className="cell-ul  cell-mininav";var p=document.createElement("li");h.appendChild(p),p.className="cell-mininav__btn",InfrontUtil.addEventListener(p,"click",function(e){s(e)}),InfrontUtil.addEventListener(p,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||s(e)}),p.innerHTML=c.get("pager","first");var m=new e.ClassBinding(p,"cell-mininav__btn--disabled",function(e){return 0==e});r.observe(m,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(p,function(){r.unbind(m)});var g=document.createElement("li");h.appendChild(g),g.className="cell-mininav__btn",InfrontUtil.addEventListener(g,"click",function(e){o(e)}),InfrontUtil.addEventListener(g,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||o(e)}),g.innerHTML=c.get("pager","prev");var f=new e.ClassBinding(g,"cell-mininav__btn--disabled",function(e){return 0==e});r.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){r.unbind(f)});var v=document.createElement("li");h.appendChild(v),v.className="cell-mininav__btn",InfrontUtil.addEventListener(v,"click",function(e){l(e)}),InfrontUtil.addEventListener(v,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)}),v.innerHTML=c.get("pager","next");var y=new e.ClassBinding(v,"cell-mininav__btn--disabled",function(e){return 0==e});a.observe(y,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(v,function(){a.unbind(y)})},t.create_CDateSelector_DOM=function(n,i,r,a,s,o,l,c,d,u){var h=document.createElement("div");n.appendChild(h),h.className="cell-pos-relative  cell-noselect";var p=document.createElement("input");h.appendChild(p),p.className="cell-input  cell-input--date-selector",p.type="text",a.bind(p);var m=e.BindingFactory.createValueBinding(p,"disabled");i.observe(m),t.unbindingManager.registerUnbind(p,function(){a.unbind(),i.unbind(m)});var g=document.createElement("div");h.appendChild(g),g.className="cell-w-date-selector";var f=function(e){return!(1==e)};f(r.get())&&InfrontUtil.addClassName(g,"cell-display-none");var v=new e.ClassBinding(g,"cell-display-none",f);r.observe(v,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){r.unbind(v)});var y=document.createElement("div");g.appendChild(y),y.className="cell-w-date-selector__top cell-w-date-selector__top--year cell-clear";var b=document.createElement("div");y.appendChild(b),b.className="cell-arrow--container cell-arrow--container--left",InfrontUtil.addEventListener(b,"click",function(e){u(e)}),b.setAttribute("role","button"),InfrontUtil.addEventListener(b,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||u(e)});var T=document.createElement("div");b.appendChild(T),T.className="cell-w-date-selector__arrow  cell-arrow cell-arrow--left";var S=document.createElement("div");y.appendChild(S),S.className="cell-w-date-selector__year-label";var C=e.BindingFactory.createValueBinding(S,"innerHTML");o.observe(C,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(S,function(){o.unbind(C)});var I=document.createElement("div");y.appendChild(I),I.className="cell-arrow--container cell-arrow--container--right",InfrontUtil.addEventListener(I,"click",function(e){d(e)}),I.setAttribute("role","button"),InfrontUtil.addEventListener(I,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)});var _=document.createElement("div");I.appendChild(_),_.className="cell-w-date-selector__arrow  cell-arrow cell-arrow--right";var M=document.createElement("div");g.appendChild(M),M.className="cell-w-date-selector__top  cell-w-date-selector__top--month cell-clear";var E=document.createElement("div");M.appendChild(E),E.className="cell-arrow--container cell-arrow--container--left",InfrontUtil.addEventListener(E,"click",function(e){c(e)}),E.setAttribute("role","button"),InfrontUtil.addEventListener(E,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||c(e)});var w=document.createElement("div");E.appendChild(w),w.className="cell-w-date-selector__arrow  cell-arrow cell-arrow--left";var A=document.createElement("div");M.appendChild(A),A.className="cell-w-date-selector__month-label";var D=e.BindingFactory.createValueBinding(A,"innerHTML");s.observe(D,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(A,function(){s.unbind(D)});var O=document.createElement("div");M.appendChild(O),O.className="cell-arrow--container cell-arrow--container--right",InfrontUtil.addEventListener(O,"click",function(e){l(e)}),O.setAttribute("role","button"),InfrontUtil.addEventListener(O,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||l(e)});var k=document.createElement("div");O.appendChild(k),k.className="cell-w-date-selector__arrow  cell-arrow cell-arrow--right";var R=document.createElement("div");return g.appendChild(R),{calendar:R,dropdownContainer:g}},t.create_CTimeSelector_DOM=function(n,i,r,a,s,o,l,c,d){var u=document.createElement("div");n.appendChild(u);var h=document.createElement("select");u.appendChild(h),h.className="cell-input cell-pull-left cell-width--45px",h.setAttribute("style","width:45px;"),a.bind(h);var p=e.BindingFactory.createValueBinding(h,"disabled");d.observe(p);var m=new e.ArrayBinding(h,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e,o<=e||InfrontUtil.addClassName(n,"cell-display-none"),e<=l||InfrontUtil.addClassName(n,"cell-display-none"),n}),null);i.observe(m),t.unbindingManager.registerUnbind(h,function(){a.unbind(),d.unbind(p),i.unbind(m)});var g=document.createElement("span");u.appendChild(g),g.setAttribute("style","float: left; width: 10px; text-align: center; padding-top: 4px;");var f=e.BindingFactory.createValueBinding(g,"innerHTML");c.observe(f,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(g,function(){c.unbind(f)});var v=document.createElement("select");u.appendChild(v),v.className="cell-input cell-pull-right cell-width--45px",v.setAttribute("style","width:45px;"),s.bind(v);var y=e.BindingFactory.createValueBinding(v,"disabled");d.observe(y);var b=new e.ArrayBinding(v,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e,n}),null);return r.observe(b),t.unbindingManager.registerUnbind(v,function(){s.unbind(),d.unbind(y),r.unbind(b)}),u},t.create_CSlider_DOM=function(e,t){var n=document.createElement("div");e.appendChild(n),n.className="cell-slider__range-wrapper";var i=document.createElement("div");n.appendChild(i),i.className="cell-slider__range-holder";var r=document.createElement("div");i.appendChild(r),r.className="cell-slider__range-background";var a=document.createElement("div");i.appendChild(a),a.className="cell-slider__bullets-container";for(var s=function(e,t){var n=document.createElement("div");n.className="cell-slider__bullet-group";var i=document.createElement("div");if(n.appendChild(i),i.className="cell-slider__bullet-item  cell-slider__bullet-item__marker",null!=e.label){var r=document.createElement("div");n.appendChild(r),r.className="cell-slider__bullet-item  cell-slider__bullet-item__label",r.innerHTML=e.label}return n},o=0;o<t.length;o++)a.appendChild(s(t[o]));var l=document.createElement("div");i.appendChild(l),l.className="cell-slider__selected-range";var c=document.createElement("div");return i.appendChild(c),c.className="cell-slider__bullet",{sliderGroupHolder:i,backgroundBar:r,sliderRangeContainer:a,sliderWrapper:n,sliderBullet:c,sliderSelectedRange:l}},t.create_CPopup_DOM=function(e,t,n){var i=document.createElement("div");e.appendChild(i),i.className="cell-tooltip",i.setAttribute("style","display:block"),1==t&&InfrontUtil.addClassName(i,"cell-tooltip__arrow"),InfrontUtil.addClassName(i,n);var r=document.createElement("div");return i.appendChild(r),{container:i,content:r}},t.create_CYesNoPopup_DOM=function(e,t,n,i,r){var a=document.createElement("div");e.appendChild(a),a.innerHTML=t;var s=document.createElement("div");e.appendChild(s),s.className="cell-clear  cell-5-margin-top";var o=document.createElement("div");s.appendChild(o),o.className="cell-mininav__dd__func--confirm",InfrontUtil.addEventListener(o,"click",function(e){n(e)}),o.setAttribute("role","button"),InfrontUtil.addEventListener(o,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||n(e)}),o.innerHTML=r.get("yesno","yes");var l=document.createElement("div");s.appendChild(l),l.className="cell-mininav__dd__func--cancel",InfrontUtil.addEventListener(l,"click",function(e){i(e)}),l.setAttribute("role","button"),InfrontUtil.addEventListener(l,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||i(e)}),l.innerHTML=r.get("yesno","no")},t.create_CHoldingValuesPopup_DOM=function(n,i,r,a,s,o,l,c,d,u){var h=document.createElement("div");n.appendChild(h),h.className="cell-h4",h.innerHTML=i;var p=document.createElement("div");n.appendChild(p),p.className="cell-w-order-entry__input-pair";var m=document.createElement("label");p.appendChild(m),m.innerHTML=u.get("myList","quantity");var g=document.createElement("input");m.appendChild(g),g.className="cell-input  cell-width--100px  cell-text-right",g.type="text",InfrontUtil.addEventListener(g,"click",function(e){d(e)}),InfrontUtil.addEventListener(g,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)}),g.setAttribute("maxlength","15"),g.setAttribute("number","true"),r.bind(g),t.unbindingManager.registerUnbind(g,function(){return r.unbind()});var f=document.createElement("div");n.appendChild(f),f.className="cell-w-order-entry__input-pair";var v=document.createElement("label");f.appendChild(v),v.innerHTML=u.get("myList","avgPrice");var y=document.createElement("input");v.appendChild(y),y.className="cell-input  cell-width--100px  cell-text-right",y.type="text",InfrontUtil.addEventListener(y,"click",function(e){d(e)}),InfrontUtil.addEventListener(y,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)}),y.setAttribute("maxlength","15"),y.setAttribute("number","true"),a.bind(y),t.unbindingManager.registerUnbind(y,function(){return a.unbind()});var b=document.createElement("div");n.appendChild(b),b.className="cell-w-order-entry__input-pair";var T=document.createElement("label");b.appendChild(T),T.innerHTML=u.get("myList","invested");var S=document.createElement("input");T.appendChild(S),S.className="cell-input  cell-width--100px  cell-text-right",S.type="text",InfrontUtil.addEventListener(S,"click",function(e){d(e)}),InfrontUtil.addEventListener(S,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||d(e)}),S.setAttribute("maxlength","15"),S.setAttribute("number","true"),s.bind(S),t.unbindingManager.registerUnbind(S,function(){return s.unbind()});var C=document.createElement("div");n.appendChild(C),C.className="cell-w-order-entry__divider";var I=document.createElement("div");n.appendChild(I),I.className="cell-row  cell-10-margin-top  cell-w-popup__button-row";var _=document.createElement("div");I.appendChild(_),_.className="cell-holding-button-well  cell-pull-right";var M=document.createElement("button");_.appendChild(M),M.className="cell-button  cell-button--confirm",InfrontUtil.addEventListener(M,"click",function(e){l(e)}),M.innerHTML=u.get(null,"ok");var E=e.BindingFactory.createValueBinding(M,"disabled");o.observe(E);var w=new e.ClassBinding(M,"cell-button--disabled",function(e){return 1==e});o.observe(w,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(M,function(){o.unbind(E),o.unbind(w)});var A=document.createElement("button");return _.appendChild(A),A.className="cell-button  cell-button--neutral cell-10-margin-left",InfrontUtil.addEventListener(A,"click",function(e){c(e)}),A.innerHTML=u.get(null,"cancel"),{volumeInput:g,avgPriceInput:y}},t.create_CWireSettingsPopup_DOM=function(n,i,r,a,s,o,l,c,d){var u=document.createElement("div");n.appendChild(u),u.className="cell-h4",u.innerHTML=d.get("wire","sources");var h=document.createElement("div");n.appendChild(h),h.className="cell-list-row-group";var p=document.createElement("div");h.appendChild(p),p.className="cell-list-row";var m=document.createElement("div");p.appendChild(m),m.className="cell-list-row__col1";var g=document.createElement("label");m.appendChild(g),g.className="cell-list-label",g.innerHTML=d.get("wire","watchlist");var f=document.createElement("label");m.appendChild(f),f.className="cell-list-label  cell-list-label--desc",f.innerHTML=d.get("wire","watchlistDesc");var v=document.createElement("div");p.appendChild(v),v.className="cell-list-row__col2";var y=document.createElement("select");v.appendChild(y),y.className="cell-input cell-input--100px cell-pull-right",a.bind(y);var b=new e.ArrayBinding(y,new e.InlineRowFactory(function(e,t){var n=document.createElement("option");return n.innerHTML=e.label,n}),null);r.observe(b),t.unbindingManager.registerUnbind(y,function(){a.unbind(),r.unbind(b)});var T=document.createElement("div");h.appendChild(T),T.className="cell-list-row";var S=document.createElement("div");T.appendChild(S),S.className="cell-list-row__col1";var C=document.createElement("label");S.appendChild(C),C.className="cell-list-label",C.innerHTML=d.get("wire","markets");var I=document.createElement("label");S.appendChild(I),I.className="cell-list-label  cell-list-label--desc",I.innerHTML=d.get("wire","marketsDesc");var _=document.createElement("div");T.appendChild(_),_.className="cell-list-row__col2";var M=document.createElement("div");_.appendChild(M);var E=document.createElement("div");n.appendChild(E),E.className="cell-h4",E.innerHTML=d.get("wire","news");var w=document.createElement("div");n.appendChild(w),w.className="cell-list-row-group";var A=document.createElement("div");w.appendChild(A),A.className="cell-list-row";var D=document.createElement("div");A.appendChild(D),D.className="cell-list-row__col1";var O=document.createElement("label");D.appendChild(O),O.className="cell-list-label",O.innerHTML=d.get("wire","showNews");var k=document.createElement("label");D.appendChild(k),k.className="cell-list-label  cell-list-label--desc",k.innerHTML=d.get("wire","showNewsDesc");var R=document.createElement("div");A.appendChild(R),R.className="cell-list-row__col2";var N=document.createElement("div");R.appendChild(N);var L=document.createElement("div");w.appendChild(L),L.className="cell-list-row  cell-list-row--tall";var P=document.createElement("div");L.appendChild(P),P.className="cell-list-row__col1";var F=document.createElement("label");P.appendChild(F),F.className="cell-list-label",F.innerHTML=d.get("wire","newsSlider");var x=document.createElement("div");P.appendChild(x),x.className="cell-slider__wrapper";var U=document.createElement("div");P.appendChild(U),U.className="cell-w-wire__slider-values  cell-noselect";var B=document.createElement("span");U.appendChild(B),B.innerHTML=d.get("wire","sliderLabelAll");var W=document.createElement("span");U.appendChild(W),W.innerHTML=d.get("wire","sliderLabelOnlyImportant");var H=document.createElement("div");n.appendChild(H),H.className="cell-h4",H.innerHTML=d.get("wire","motionDetection");var V=document.createElement("div");n.appendChild(V),V.className="cell-list-row-group";var G=document.createElement("div");V.appendChild(G),G.className="cell-list-row";var z=document.createElement("div");G.appendChild(z),z.className="cell-list-row__col1";var q=document.createElement("label");z.appendChild(q),q.className="cell-list-label",q.innerHTML=d.get("wire","showMotionDetection");var Y=document.createElement("div");G.appendChild(Y),Y.className="cell-list-row__col2";var K=document.createElement("div");Y.appendChild(K);var X=document.createElement("div");V.appendChild(X),X.className="cell-list-row  cell-list-row--tall";var j=document.createElement("div");X.appendChild(j),j.className="cell-list-row__col1";var Z=document.createElement("label");j.appendChild(Z),Z.className="cell-list-label",Z.innerHTML=d.get("wire","motionSlider");var J=document.createElement("div");j.appendChild(J),J.className="cell-slider__wrapper";var Q=document.createElement("div");j.appendChild(Q),Q.className="cell-w-wire__slider-values  cell-noselect";var $=document.createElement("span");Q.appendChild($),$.innerHTML=d.get("wire","sliderLabelAll");var ee=document.createElement("span");Q.appendChild(ee),ee.innerHTML=d.get("wire","sliderLabelOnlyImportant");var te=document.createElement("div");n.appendChild(te),te.className="cell-h4",te.innerHTML=d.get("wire","alerts");var ne=document.createElement("div");n.appendChild(ne),ne.className="cell-list-row-group";var ie=document.createElement("div");ne.appendChild(ie),ie.className="cell-list-row";var re=document.createElement("div");ie.appendChild(re),re.className="cell-list-row__col1";var ae=document.createElement("label");re.appendChild(ae),ae.className="cell-list-label",ae.innerHTML=d.get("wire","myAlerts");var se=document.createElement("div");ie.appendChild(se),se.className="cell-list-row__col2";var oe=document.createElement("div");se.appendChild(oe);var le=document.createElement("div");n.appendChild(le),le.className="cell-row  cell-no-margin-bottom cell-w-popup__button-row";var ce=document.createElement("div");le.appendChild(ce),ce.className="cell-wire-button-well  cell-pull-right";var de=document.createElement("button");ce.appendChild(de),de.className="cell-button  cell-button--neutral",InfrontUtil.addEventListener(de,"click",function(e){l(e)}),de.innerHTML=d.get(null,"cancel");var ue=document.createElement("button");ce.appendChild(ue),ue.className="cell-button  cell-button--confirm cell-10-margin-left",InfrontUtil.addEventListener(ue,"click",function(e){o(e)}),ue.innerHTML=d.get(null,"ok");var he=e.BindingFactory.createValueBinding(ue,"disabled");s.observe(he);var pe=new e.ClassBinding(ue,"cell-button--disabled",function(e){return 1==e});return s.observe(pe,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(ue,function(){s.unbind(he),s.unbind(pe)}),{customLists:v,markets:M,newsSlider:x,newsSwitch:N,motionSlider:J,motionDetectionSwitch:K,alertSwitch:oe}},t.create_COrderMessage_DOM=function(e,t,n,i,r,a){var s=document.createElement("div");e.appendChild(s),s.className="cell-flex-column",InfrontUtil.addEventListener(s,"click",function(e){r(i)}),s.setAttribute("role","button"),InfrontUtil.addEventListener(s,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r(i)});var o=document.createElement("div");s.appendChild(o),o.className="cell-w-positions__trading-notification",InfrontUtil.addClassName(o,n);var l=document.createElement("span");return o.appendChild(l),l.innerHTML=t,s},t.macro_MHeader=function(n,i,r,a,s,o){var l=document.createElement("div");if(l.className="cell-h4",null!=n){var c=document.createElement("span");l.appendChild(c),c.innerHTML=n}if(s){var d=document.createElement("span");l.appendChild(d),d.className="cell-5-margin-left";var u=e.BindingFactory.createValueBinding(d,"innerHTML");s.observe(u,e.InitialUpdate.Synchronous);var h=e.BindingFactory.createHTMLAttributeBinding(d,"style",function(e){return"display:"+(e?"initial":"none")});s.observe(h),t.unbindingManager.registerUnbind(d,function(){s.unbind(u),s.unbind(h)})}var p=document.createElement("span");if(l.appendChild(p),p.className="cell-image-link",InfrontUtil.addEventListener(p,"click",function(e){a(e)}),InfrontUtil.addEventListener(p,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a(e)}),r==e.WidgetNavButtonType.NONE&&InfrontUtil.addClassName(p,"cell-display-none"),r==e.WidgetNavButtonType.NAVIGATE&&InfrontUtil.addClassName(p,"cell-image-link--navigation"),r==e.WidgetNavButtonType.EXPAND&&InfrontUtil.addClassName(p,"cell-image-link--expand"),1==i){var m=document.createElement("span");l.appendChild(m),m.className="cell-image  cell-image--snapshot",m.title=o.get("global","snapshot")}return l},t.create_CSwitch_DOM=function(n,i,r){var a=document.createElement("div");n.appendChild(a),a.className="cell-w-switch",InfrontUtil.addEventListener(a,"click",function(e){r(e)}),a.setAttribute("role","button"),InfrontUtil.addEventListener(a,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||r(e)}),a.setAttribute("role","none");var s=document.createElement("div");a.appendChild(s),s.className="cell-w-switch__case";var o=new e.ClassBinding(s,"cell-w-switch__case--on",function(e){return 1==e});i.observe(o,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){i.unbind(o)});var l=document.createElement("button");s.appendChild(l),l.className="cell-w-switch__handle",l.setAttribute("role","switch");var c=e.BindingFactory.createHTMLAttributeBinding(l,"aria-checked",function(e){return e});i.observe(c,e.InitialUpdate.Synchronous);var d=new e.ClassBinding(l,"cell-w-switch__handle--on",function(e){return 1==e});return i.observe(d,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(l,function(){i.unbind(c),i.unbind(d)}),{container:a,switchBtn:l}},t.create_CRadio_DOM=function(n,i,r,a){var s=document.createElement("div");n.appendChild(s),s.className="cell-radio-button",InfrontUtil.addEventListener(s,"click",function(e){a(e)}),s.setAttribute("role","button"),InfrontUtil.addEventListener(s,"keyup",function(e){var t=e.which||e.keyCode;13!==t&&32!==t||a(e)});var o=new e.ClassBinding(s,"cell-radio-button--active",function(e){return 1==e});r.observe(o,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(s,function(){r.unbind(o)});var l=document.createElement("div");s.appendChild(l),l.className="cell-radio-dot";var c=document.createElement("div");s.appendChild(c),c.className="cell-radio-label",c.innerHTML=i},t.create_WCompanyFundamentals_DOM=function(n,i,r,a,s,o,l){var c,d,u,h,p=document.createElement("div");if(n.appendChild(p),p.className="cell-w-company-fundamentals",i){var m=document.createElement("div");p.appendChild(m),m.className="cell-flex-row";var g=document.createElement("div");m.appendChild(g),g.className="cell-flex-column";var f=document.createElement("h4");g.appendChild(f),f.className="cell-h4",f.innerHTML=i}if(s==e.ListLayout.TABLE){var v=document.createElement("table");p.appendChild(v),v.className="cell-table";var y=document.createElement("thead");v.appendChild(y);var b=new e.ClassBinding(y,"cell-display-none",function(e){return 0==e});o.observe(b,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(y,function(){o.unbind(b)});var T=document.createElement("tr");y.appendChild(T);var S=document.createElement("th");T.appendChild(S),S.className="cell-table__txt",S.innerHTML=r;for(var C=0;C<a.length;C++)T.appendChild((c=a[C],d=void 0,(d=document.createElement("th")).className="cell-table__num",d.innerHTML=c.label,d));var I=document.createElement("tbody");v.appendChild(I);var _=document.createElement("div");v.appendChild(_),_.className="cell-list--empty";var M=new e.ClassBinding(_,"cell-display-none",function(e){return 1==e});o.observe(M,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(_,function(){o.unbind(M)});var E=document.createElement("span");_.appendChild(E),E.className="cell-list--empty__message",E.innerHTML=l.get("companyFundamentals","noDataAvailableLabel")}if(s==e.ListLayout.FLEX||s==e.ListLayout.CARD||s==e.ListLayout.DIV){var w=document.createElement("div");if(p.appendChild(w),w.className="cell-w-company-fundamentals__list",s==e.ListLayout.FLEX){var A=document.createElement("div");w.appendChild(A),A.className="cell-w-company-fundamentals__list-header";var D=new e.ClassBinding(A,"cell-display-none",function(e){return 0==e});o.observe(D,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(A,function(){o.unbind(D)});var O=document.createElement("section");A.appendChild(O),O.className="cell-flex-row";var k=document.createElement("div");for(O.appendChild(k),k.className="cell-flex-column cell-w-company-fundamentals__list-cell",k.innerHTML=r,C=0;C<a.length;C++)O.appendChild((u=a[C],h=void 0,(h=document.createElement("div")).className="cell-flex-column cell-w-company-fundamentals__list-cell",h.innerHTML=u.label,h))}I=document.createElement("div"),w.appendChild(I),I.className="cell-w-company-fundamentals__list-content";var R=document.createElement("div");w.appendChild(R),R.className="cell-list--empty";var N=new e.ClassBinding(R,"cell-display-none",function(e){return 1==e});o.observe(N,e.InitialUpdate.Synchronous),t.unbindingManager.registerUnbind(R,function(){o.unbind(N)});var L=document.createElement("span");R.appendChild(L),L.className="cell-list--empty__message",L.innerHTML=l.get("companyFundamentals","noDataAvailableLabel")}return I},t.create_WCompanyDescription_DOM=function(e,t,n){var i=document.createElement("div");e.appendChild(i),i.className="cell-w-company-info";var r=document.createElement("h4");i.appendChild(r),r.className="cell-h4",r.innerHTML=t;var a=document.createElement("div");i.appendChild(a),a.className="cell-w-company-info__content",a.innerHTML=n},t.create_WCommunicationStatus_DOM=function(e,t,n){var i=document.createElement("div");e.appendChild(i),i.className="cell-w-comstats cell-clear";var r=document.createElement("table");i.appendChild(r),r.className="cell-table cell-table--news-list";var a=document.createElement("thead");r.appendChild(a);var s=document.createElement("tbody");return r.appendChild(s),{thead:a,tbody:s}},t.unbindAll=function(e){t.unbindingManager.unbind(e,!0)},t.unbindingManager=new e.UnbindingManager,t}();e.WidgetDOMFactory=t}(Infront||(Infront={})),function(e){var t,n;(n=t=e.FocusWidgetLayout||(e.FocusWidgetLayout={}))[n.STANDARD=0]="STANDARD",n[n.MINI=1]="MINI";var i=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.layout=t.STANDARD,n}return __extends(n,e),n}(e.SingleInstrumentWidgetOptions);e.FocusWidgetOptions=i;var r=function(n){function r(t,i,r){var a=n.call(this,t,i,"focuswidget",r)||this;return a.prevLast=null,a.tradesToday=new e.Observable,a.subscribes.addFields(["LAST","CHANGE","PCT_CHANGE","HIGH","LOW","PREVIOUS_CLOSE","LAST_VALID","TIME"]),a}return __extends(r,n),r.prototype.returnDefaultWidgetOptions=function(){return new i},r.prototype.newInit=function(){this.lastTicks=null,this.prevLast=null,this.lastTicks=new e.ObservableArray,this.tradesToday.set(!1);for(var t=0;t<r.kNumberOfTicks;t++)this.lastTicks.push("");n.prototype.newInit.call(this)},r.prototype.newBuildUI=function(){var i=this;if(this.options.instrument){var a,s=function(e){return i.onSearchButtonClick(e)},o=this.feedMetaData&&0<this.feedMetaData.min_delay_secs;this.cache.createSymbolComputedField(this.options.instrument,r.kComputedLowBarField,[IDS.RealtimeTags.High,IDS.RealtimeTags.Low,IDS.RealtimeTags.YestClose],function(e){var t=e[0],n=e[1],i=e[2],r=Math.round((i-n)/(t-n)*100);return r<0?r=0:100<r&&(r=100),r}),this.cache.createSymbolComputedField(this.options.instrument,r.kComputedHighBarField,[r.kComputedLowBarField],function(e){return 100-e[0]}),this.cache.createSymbolComputedField(this.options.instrument,r.kComputedArrowPosition,[IDS.RealtimeTags.High,IDS.RealtimeTags.Low,IDS.MwsRealtimeTags.LastTradedAt],function(e){var t=e[0],n=e[1],i=e[2],r=100-Math.round((i-n)/(t-n)*100);return r<0?r=0:100<r&&(r=100),r}),this.enableLink=null!=this.options.onClick,a=this.options.layout==t.MINI?e.WidgetDOMFactory.create_WFocusMini_DOM(this.element,this.decimals,this.tradesToday,o,this.options.showSearchWidget,s,this.cache,this.cacheKey,this.languageHandler):e.WidgetDOMFactory.create_WFocus_DOM(this.element,this.lastTicks,this.decimals,this.tradesToday,this.enableLink,function(e){return i.linkClicked()},o,this.options.showSearchWidget,s,this.cache,this.cacheKey,this.languageHandler),this.unbinds.push(this.cache.customSymbolBind(this.options.instrument,IDS.MwsRealtimeTags.LastTradedAt,e.BindingFactory.createInlineBinding(function(e){null!=i.prevLast&&(e>i.prevLast?i.lastTicks.push("up"):e<i.prevLast?i.lastTicks.push("down"):i.lastTicks.push(""),i.lastTicks.removeItemAt(0)),i.prevLast=e}))),this.cache.symbolAsyncGet(this.options.instrument,IDS.RealtimeDateTime.TradeTime,function(e){i&&i.tradesToday&&i.tradesToday.set(!0)}),this.options.showSearchWidget&&(this.searchWidget=new e.SearchBox(a.searchContainer,this.infront,this.addInstrumentSearchOpts("focuswidget")),this.searchContainer=a.searchContainer)}n.prototype.newBuildUI.call(this)},r.prototype.linkClicked=function(){this.options.onClick(this.options.instrument)},r.kComputedLowBarField="computedLowBar",r.kComputedHighBarField="computedHighBar",r.kComputedArrowPosition="computedArrowPosition",r.kNumberOfTicks=10,r}(e.SingleInstrumentWidgetBase);e.FocusWidget=r}(Infront||(Infront={})),function(e){var t,n;(n=t||(t={}))[n.Country=1]="Country",n[n.Asset=2]="Asset",n[n.Sector=3]="Sector";var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.instruments=[],t.animation=!0,t.colors=["#31c0ba","#66a2e0","#9d50a3","#c35551","#d3ae5e","#e8e774","#85d465","#cccccc"],t.borderColor="#001b26",t.borderWidth=2,t.enableLabels=!1,t.legend=!1,t.enable3d=!1,t.alpha=45,t.beta=0,t.depth=40,t.spacingBottom=15,t.spacingLeft=10,t.spacingRight=10,t.spacingTop=10,t.innerSize="0%",t.fontFamily="Arial, sans-serif",t.legendLabelColor="#999",t}return __extends(t,e),t}(e.WidgetOptions);e.FundAllocationPieChartWidgetOptions=i;var r=function(n){function i(e,i,r){var a=n.call(this,e,i,"FundAllocationPieChart",r)||this;return a.allocationArray=[],a.subscribes.addFields([InfrontConstants.Fields.LAST,InfrontConstants.FieldGroups.FUND_DETAILS]),a.allocationType=t[r.allocationType],a.allocationType||InfrontUtil.errorLog(a.options.id+": Invalid allocationType"),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new e.FundAllocationWidgetOptions},i.prototype.createBindings=function(){var t=this,n=this.getCaptionFieldName(),i=this.getValueFieldName();this.options.instruments.forEach(function(r){var a=e.CacheKeyFactory.createInstrumentKey(r);t.allocationArray.push(new e.CacheComputedObservable(t.cache,[new e.FieldReference(a,t.getBindingFields())],function(e){var t={};if(e[0]){for(var r=0,a=e[0];r<a.length;r++){var s=a[r];t[s[n]]=(t[s[n]]||0)+1*s[i]/100}return t}return null}))}),this.fundAllocationTotalValues=new e.ComputedObservable(this.allocationArray,function(e){for(var t=0,n=e;t<n.length;t++)if(null==n[t])return;for(var i={},r=0,a=0,s=e;a<s.length;a++){var o=s[a];if(o)for(var l in o)i[l]?i[l]+=o[l]:i[l]=o[l],r+=o[l]}var c=void 0,d=0;for(var l in i)i[l]<r/100*2&&(0<d?(i.Other?i.Other+=i[l]:i.Other=i[l],delete i[l],d++,i[c]&&(i.Other?i.Other+=i[c]:i.Other=i[c],delete i[c])):(c=l,d++));return i},!0),this.fundAllocationTotalValues.observe(this)},i.prototype.newSubscribe=function(){this.subscribes.addInstruments(this.options.instruments),n.prototype.newSubscribe.call(this)},i.prototype.removeBindings=function(){this.fundAllocationTotalValues.unbind(this);for(var e=0,t=this.allocationArray;e<t.length;e++)t[e].unbindAll();this.allocationArray=[],n.prototype.removeBindings.call(this)},i.prototype.newDestroyUI=function(){this.chart&&this.chart.destroy(),this.chart=null,n.prototype.newDestroyUI.call(this)},i.prototype.valueUpdated=function(e){e&&this.updateChart()},i.prototype.receiveMessage=function(t){t.type==InterLibraryLink.DataType.infrontInstrument?this.options.instruments&&1==this.options.instruments.length&&e.Instrument.isSameInstrument(this.options.instruments[0],t.value)||(this.newDestroyUI(),this.options.instruments=[e.Instrument.prototype.inf_clone.apply(t.value)],this.isInitialised&&this.newInit()):t.type==InterLibraryLink.DataType.replaceAllInstruments&&(this.newDestroyUI(),this.options.instruments=t.value,this.isInitialised&&this.newInit())},i.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument,InterLibraryLink.DataType.replaceAllInstruments]},i.prototype.updateChart=function(){if(this.chart)this.chart.series[0].setData(this.formatCacheDataForSeries());else{var e={title:{text:null},colors:function(e){for(var t=[],n=0;n<4;n++)for(var i=0,r=e;i<r.length;i++){var a=r[i],s=Highcharts.Color(a).brighten(-.1*n).get("rgb"),o={radialGradient:{cx:.5,cy:.3,r:.7},stops:[[0,s],[1,Highcharts.Color(s).brighten(-.1).get("rgb")]]};t.push(o)}return t}((t=this.options).colors),credits:{enabled:!1},chart:{animation:t.animation,plotBackgroundColor:"transparent",backgroundColor:"transparent",plotBorderWidth:null,plotShadow:!1,style:{fontFamily:t.fontFamily},spacingBottom:t.spacingBottom,spacingLeft:t.spacingLeft,spacingRight:t.spacingRight,spacingTop:t.spacingTop,options3d:{enabled:t.enable3d,alpha:t.alpha,beta:t.beta}},legend:{enabled:t.legend,layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0,navigation:{style:{color:t.legendLabelColor,fontSize:"11px"}},itemStyle:{color:t.legendLabelColor,fontSize:"11px",width:100,textOverflow:"ellipsis"},itemMarginTop:2,itemMarginBottom:2,maxHeight:t.legendMaxHeight,itemHoverStyle:{color:t.legendLabelColor}},tooltip:{headerFormat:"",pointFormatter:function(){var e="<span class='cell-chart--tooltip-text'><b>"+(this.fullName?this.fullName:this.name)+"</b>";return e+="<br/>",(e+=this.series.name+":<b> "+InfrontUtil.formatNumber(this.percentage,1)+"%</b>")+"</span>"},useHTML:!0},plotOptions:{pie:{animation:t.animation,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:t.enableLabels,format:"{point.name}"},showInLegend:!0,borderWidth:t.borderWidth,borderColor:t.borderColor,depth:t.depth}}};e.chart.renderTo=this.element,e.series=[this.createPieChartSeries()],this.chart=new Highcharts.Chart(e)}var t},i.prototype.createPieChartSeries=function(){var e={id:"FundPieChart",type:"pie",name:"Share",innerSize:this.options.innerSize,data:[]};return e.data=this.formatCacheDataForSeries(),e},i.prototype.formatCacheDataForSeries=function(){var e=this.fundAllocationTotalValues.get(),t=[];for(var n in e){var i={id:n,name:n,fullName:n,y:e[n]};t.push(i)}return t},i.prototype.getBindingFields=function(){switch(this.allocationType){case t.Asset:return InfrontConstants.FundDetailsMap.ASSET_ALLOCATION;case t.Country:return InfrontConstants.FundDetailsMap.TOP_COUNTRIES;case t.Sector:default:return InfrontConstants.FundDetailsMap.TOP_SECTORS}},i.prototype.getCaptionFieldName=function(){switch(this.allocationType){case t.Asset:return"asset";case t.Country:return"country_code";case t.Sector:default:return"sector"}},i.prototype.getValueFieldName=function(){switch(this.allocationType){case t.Asset:return"allocation";case t.Country:case t.Sector:default:return"exposure"}},i}(e.WidgetBase);e.FundAllocationPieChartWidget=r}(Infront||(Infront={})),function(e){var t,n;(n=t||(t={}))[n.Country=1]="Country",n[n.Asset=2]="Asset",n[n.Sector=3]="Sector";var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxLines=-1,t}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.FundAllocationWidgetOptions=i;var r=function(n){function r(i,r,a){var s=n.call(this,i,r,"FundAllocation",a)||this;return s.subscribes.addFields([InfrontConstants.FieldGroups.FUND_DETAILS]),s.allocationType=t[a.allocationType],s.allocationType||InfrontUtil.errorLog(s.options.id+": Invalid allocationType"),s.allocationArray=new e.ObservableArray,s}return __extends(r,n),r.prototype.newBuildUI=function(){var t=e.CacheKeyFactory.createInstrumentKey(this.options.instrument);e.WidgetDOMFactory.create_WFundAllocation_DOM(this.element,this.allocationArray,this.getTitle(),this.getCaptionFieldName(),this.getValueFieldName()),this.unbinds.push(this.infront.getCache().customBind(t,this.getBindingFields(),this)),n.prototype.newBuildUI.call(this)},r.prototype.returnDefaultWidgetOptions=function(){return new i},r.prototype.getTitle=function(){switch(this.allocationType){case t.Asset:return-1!=this.options.maxLines?this.infrontUI.languageHandler.get("fundAllocation","assetTitle")+" | Top "+this.options.maxLines:this.infrontUI.languageHandler.get("fundAllocation","assetTitle");case t.Country:return-1!=this.options.maxLines?this.infrontUI.languageHandler.get("fundAllocation","countryTitle")+" | Top "+this.options.maxLines:this.infrontUI.languageHandler.get("fundAllocation","countryTitle");case t.Sector:default:return-1!=this.options.maxLines?this.infrontUI.languageHandler.get("fundAllocation","sectorTitle")+" | Top "+this.options.maxLines:this.infrontUI.languageHandler.get("fundAllocation","sectorTitle")}},r.prototype.getCaptionFieldName=function(){switch(this.allocationType){case t.Asset:return"asset";case t.Country:return"country_code";case t.Sector:default:return"sector"}},r.prototype.getValueFieldName=function(){switch(this.allocationType){case t.Asset:return"allocation";case t.Country:case t.Sector:default:return"exposure"}},r.prototype.getBindingFields=function(){switch(this.allocationType){case t.Asset:return InfrontConstants.FundDetailsMap.ASSET_ALLOCATION;case t.Country:return InfrontConstants.FundDetailsMap.TOP_COUNTRIES;case t.Sector:default:return InfrontConstants.FundDetailsMap.TOP_SECTORS}},r.prototype.valueUpdated=function(e){-1!=this.options.maxLines&&0<e.length?this.allocationArray.replaceWith(e.slice(0,this.options.maxLines)):this.allocationArray.replaceWith(e)},r}(e.SingleInstrumentWidgetBase);e.FundAllocationWidget=r}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.FundMorningstarRatingWidgetOptions=t;var n=function(n){function i(e,t,i){var r=n.call(this,e,t,"morningstarRating",i,"morningstarRating")||this;return r.subscribes.addFields([InfrontConstants.FieldGroups.FUND_DETAILS]),r.strings=r.infrontUI.languageHandler,r}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){for(var t=e.CacheKeyFactory.createInstrumentKey(this.options.instrument),i=e.WidgetDOMFactory.create_WMorningstarRating_DOM(this.element,this.widgetTitle,this.infront.getCache(),t,this.infrontUI.languageHandler).morningstarRating,r=0;r<i.children.length;r++)i.children[r].setAttribute("aria-label",this.strings.get("accessibility","morningstarLevelOne")+" "+r+" "+this.strings.get("accessibility","morningstarLevelTwo")+" "+i.children.length+" "+this.strings.get("accessibility","morningstarLevelThree"));n.prototype.newBuildUI.call(this)},i}(e.SingleInstrumentWidgetBase);e.FundMorningstarRatingWidget=n}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.FundRiskLevelWidgetOptions=t;var n=function(n){function i(e,t,i){var r=n.call(this,e,t,"riskLevel",i)||this;return r.subscribes.addFields([InfrontConstants.FieldGroups.FUND_DETAILS]),r.strings=r.infrontUI.languageHandler,r}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){for(var t,r=e.WidgetDOMFactory.create_WRiskLevel_DOM(this.element,i.kDefaultRiskLevels,this.infront.getCache(),this.cacheKey,this.infrontUI.languageHandler).riskLevelStars,a=function(n){var i=r.children[n];t=e.BindingFactory.createHTMLAttributeBinding(i,"aria-hidden",function(e){return(e!=n+1).toString()}),s.infront.getCache().customBind(s.cacheKey,["fund_details","performance","risk_level"],t),i.setAttribute("aria-label",s.strings.get("accessibility","fundRiskLevelOne")+" "+(n+1)+" "+s.strings.get("accessibility","fundRiskLevelTwo")+" "+r.children.length)},s=this,o=0;o<r.children.length;o++)a(o);n.prototype.newBuildUI.call(this)},i.kDefaultRiskLevels=7,i}(e.SingleInstrumentWidgetBase);e.FundRiskLevelWidget=n}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.FundStylemapWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"stylemap",r)||this;return a.selected=new e.Observable,a.subscribes.addFields([InfrontConstants.FieldGroups.FUND_DETAILS]),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){var t=e.CacheKeyFactory.createInstrumentKey(this.options.instrument);e.WidgetDOMFactory.create_WStyleMap_DOM(this.element,this.selected,null,this.infront.getCache(),t,this.infrontUI.languageHandler),n.prototype.newBuildUI.call(this);var i=document.getElementsByClassName("cell-w-fund-style-map__row__element");i[0].setAttribute("aria-label","Large Value"),i[1].setAttribute("aria-label","Large Blend"),i[2].setAttribute("aria-label","Large Growth"),i[3].setAttribute("aria-label","Medium Value"),i[4].setAttribute("aria-label","Medium Blend"),i[5].setAttribute("aria-label","Medium Growth"),i[6].setAttribute("aria-label","Small Value"),i[7].setAttribute("aria-label","Small Blend"),i[8].setAttribute("aria-label","Small Growth"),n.prototype.newBuildUI.call(this)},i.prototype.newSubscribe=function(){var t=this;this.unbinds.push(this.infront.getCache().customBind(e.CacheKeyFactory.createInstrumentKey(this.options.instrument),InfrontConstants.FundDetailsMap.FUND_STYLEBOX,e.BindingFactory.createInlineBinding(function(e){t.selected.set(e)}))),n.prototype.newSubscribe.call(this)},i}(e.SingleInstrumentWidgetBase);e.FundStylemapWidget=n}(Infront||(Infront={})),function(e){var t=function(){},n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showCurrency=!0,t}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.FundTopHoldingsWidgetOptions=n;var i=function(i){function r(t,n,r){var a=i.call(this,t,n,"FundTopHoldings",r)||this;return a.subscribes.addFields([InfrontConstants.FieldGroups.FUND_DETAILS]),a.holdings=new e.ObservableArray,a}return __extends(r,i),r.prototype.newSubscribe=function(){if(this.holdings.clear(),this.holdingsUnbind&&(this.holdingsUnbind(),this.holdingsUnbind=null),this.options.instrument){var t=e.CacheKeyFactory.createInstrumentKey(this.options.instrument);this.holdingsUnbind=this.infront.getCache().customBind(t,InfrontConstants.FundDetailsMap.TOP_HOLDINGS,this)}i.prototype.newSubscribe.call(this)},r.prototype.newBuildUI=function(){e.WidgetDOMFactory.create_WFundAllocation_DOM(this.element,this.holdings,this.widgetTitle,"label","weight"),i.prototype.newBuildUI.call(this)},r.prototype.returnDefaultWidgetOptions=function(){return new n},r.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument]},r.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.infrontInstrument&&(this.options.instrument=e.value,this.newSubscribe())},r.prototype.valueUpdated=function(e){if(this.holdings.clear(),InfrontUtil.isArray(e))for(var t=e,n=0;n<t.length;n++)this.holdings.push(this.createHolding(t[n].name,t[n].currency,t[n].isin,t[n].weight))},r.prototype.createHolding=function(e,n,i,r){var a=new t;return a.label=e,this.options.showCurrency&&(a.label+=" ("+n+")"),a.weight=r,a},r}(e.SingleInstrumentWidgetBase);e.FundTopHoldingsWidget=i}(Infront||(Infront={})),function(e){var t,n,i,r,a,s;(n=t=e.RGBColors||(e.RGBColors={}))[n.R=0]="R",n[n.G=1]="G",n[n.B=2]="B",(r=i=e.HeatmapMode||(e.HeatmapMode={}))[r.CHAINS=0]="CHAINS",r[r.WATCHLIST=1]="WATCHLIST",(s=a=e.HeatmapPeriod||(e.HeatmapPeriod={}))[s.INTRADAY=0]="INTRADAY",s[s.ONE_WEEK=1]="ONE_WEEK",s[s.ONE_MONTH=2]="ONE_MONTH",s[s.ONE_YEAR=3]="ONE_YEAR",s[s.YTD=4]="YTD";var o=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.streaming=!0,n.sortOrder=e.SortOrder.Asc,n.heatmapPeriod=a.INTRADAY,n.layout=e.ListLayout.CARD,n.rangeUpMinColor=[4,102,4],n.rangeUpMaxColor=[36,198,36],n.rangeDownMinColor=[113,4,15],n.rangeDownMaxColor=[226,8,30],n.defaultColor=[136,162,170],n.useChains=!1,n.chains=[],n.defaultChain=null,n.colorClippingTreshold=3,n}return __extends(n,t),n}(e.CommonListOptions);e.HeatmapWidgetOptions=o;var l=function(n){function r(t,i,s){var o=n.call(this,t,i,"heatmap",s,l)||this;o.instruments=new e.ObservableArray,o.cachedReferenceData={feed:void 0,data:[]},o.feedMetaData={},o.isChainsDropdownSet=!1,o.isWatchlistDropdownSet=!1,o.isSortDropdownSet=!1,o.colorArrayUp=[],o.colorArrayDown=[],o.firstInit=!0,o.periodValues=[a.INTRADAY,a.ONE_WEEK,a.ONE_MONTH,a.ONE_YEAR,a.YTD],o.periods=[o.infrontUI.languageHandler.get("ranking","today"),o.infrontUI.languageHandler.get("ranking","lastWeek"),o.infrontUI.languageHandler.get("ranking","lastMonth"),o.infrontUI.languageHandler.get("ranking","lastYear"),o.infrontUI.languageHandler.get("ranking","ytd")];var l="widgetTitleDefault";o.decimals=e.UI.kDefaultDecimals,o.selectedChain=null,o.selectedChainName=new e.Observable;var c=o.columnManager.createQuoteOptions().fields,d=c.indexOf("LAST");0<=d&&c.splice(d,1),0<=(d=c.indexOf("TURNOVER"))&&c.splice(d,1),0<=(d=c.indexOf("PCT_CHANGE"))&&c.splice(d,1),o.subscribes.addFields(c),o.linkController=new e.InstrumentListLinkControllerDelegate(o.infront.getCache()),o.currentPeriod=o.periodValues[o.periods.indexOf(o.getStoredValue(r.kMyStoredTimeperiodKey))]||a.INTRADAY;var u="Ascending"===o.getStoredValue(r.kMyStoredSortingKey)?e.SortOrder.Asc:e.SortOrder.Desc;return o.options.sortOrder=null!==u||void 0!==u?u:o.options.sortOrder,o.columnManager.currentSortOrder=o.options.sortOrder,o.columnManager.currentlySortedColumn=o.columnManager.columns[1],o.createPeriodDropdown(),o.calculateColorArray(),o.setListItems(),InfrontUtil.isNumber(o.options.maxItems)&&(o.cap=new e.ObservableArrayCap(o.items,o.options.maxItems),o.items.setCap(o.options.maxItems)),o}return __extends(r,n),r.prototype.setColumnManager=function(){var t=this;this.columnManager=new e.ColumnManager(this.options,this.infront,this.infrontUI,null,this.subscribes),this.columnManager.setLinkTriggerCallback(function(e,n,i){return t.linkEvent(i.instrument)}),this.columnManager.currentSortOrder=this.options.sortOrder},r.prototype.setListItems=function(){this.itemsToShow=new e.ContinouslySortedCachedInstrumentObservableArray(this.options.sortable?this.columnManager.currentlySortedColumn:null,this.getTickerField(),this.cache,this.options.sortOrder),this.items=this.itemsToShow},r.prototype.newInit=function(){this.setStreaming(),this.isSortDropdownSet||this.createSortDropdown(),this.options.mode===i.CHAINS?(this.loadChains(),n.prototype.newInit.call(this)):this.options.mode===i.WATCHLIST?(this.loadWatchlists(),n.prototype.newInit.call(this)):this.options.instruments&&this.options.instruments.length&&(this.addAllInstruments(this.options.instruments),n.prototype.newInit.call(this)),this.firstInit&&"PCT_CHANGE"===this.options.columns[1].name&&(this.firstInit=!1,this.updateHistColumns())},r.prototype.addAllInstruments=function(t){var n=this;if(t&&0<t.length){for(var i=function(t){r.feedMetaData.hasOwnProperty(t.feed.toString())?(r.doAddInstrument(new e.Instrument(t.feed,t.ticker)),r.items.push(new e.Instrument(t.feed,t.ticker))):r.infront.getFeedHandler().getFeed(t.feed,function(i){n.feedMetaData[t.feed]=i,n.doAddInstrument(new e.Instrument(t.feed,t.ticker)),n.items.push(new e.Instrument(t.feed,t.ticker))})},r=this,a=0,s=t;a<s.length;a++)i(s[a]);this.subscribes.addInstruments(t)}},r.prototype.loadWatchlists=function(){var e=this;this.infront.getWatchlistTitles().then(function(t){e.buildWatchlistNodes(t.data)})},r.prototype.loadChains=function(){null!=this.options.feed?this.loadFeedChains():this.options.chains&&0<this.options.chains.length?this.buildChainNodes(this.options.chains):this.addAllInstruments(this.options.instruments)},r.prototype.loadFeedChains=function(){var t=this,n=new e.ChainsOptions;n.homeProvider=!0,n.tree=!0,n.onError=InfrontUtil.errorLogCallback,n.onData=function(e){t.chains&&t.chains.clear(),t.buildChainNodes(e)},this.infront.chains(this.options.feed,n)},r.prototype.buildWatchlistNodes=function(e){var t=this,n=this.getStoredValue(r.kMyStoredWatchlistKey)||e[0];this.watchlistSelected(n),this.isWatchlistDropdownSet||(this.buildDropdown(e,this.infrontUI.languageHandler.get("myList","selectorTitle"),function(e){t.watchlistSelected(e),t.store(r.kMyStoredWatchlistKey,e)},[n]),this.dropdownElement.appendChild(this.dropdownContainer),this.isWatchlistDropdownSet=!0)},r.prototype.buildChainNodes=function(e){var t=this,n=this.getStoredValue(r.kMyStoredChainKey)||this.options.defaultChain,i=0<e.length&&e[0].hasOwnProperty("description")?this.nodesFromFlatChains(e):e;this.selectInitChain(i,n)||this.selectInitChain(i,""),this.options.useChains&&(this.isChainsDropdownSet||(this.buildDropdown(i,this.infrontUI.languageHandler.get("quoteList","chainsDropDownTitle"),function(e){t.chainSelected(e),t.store(r.kMyStoredChainKey,e.name)},[this.selectedChain]),this.isChainsDropdownSet=!0))},r.prototype.nodesFromFlatChains=function(e){for(var t=[],n=0;n<e.length;n++)t.push({chain:e[n]});return t},r.prototype.selectInitChain=function(e,t){for(var n=0;n<e.length;n++)if(e[n].hasOwnProperty("chain")){if(!t||t==e[n].chain.name)return this.chainSelected(e[n].chain),!0}else if(e[n].hasOwnProperty("nodes")&&this.selectInitChain(e[n].nodes,t))return!0;return!1},r.prototype.watchlistSelected=function(e){var t=this;this.items.clear(),this.infront.getWatchlistContents(e).then(function(e){for(var n=0;n<e.entries.data.length;n++)t.addInstrument(e.entries.data[n].instrument)})},r.prototype.chainSelected=function(e){this.clear(),(this.selectedChain=e).fullPath?this.selectedChainName.set(e.fullPath):this.selectedChainName.set(e.description);var t=this.getSyncFeedMetadata(e.feed);t&&(this.feedMetaData[t.feed]=t),this.loadChain(e)},r.prototype.loadChain=function(t){var n=this,i=new e.ChainOptions;t.hasOwnProperty("provider")&&"number"==typeof t.provider&&(i.provider=t.provider),i.onError=function(e,t){},i.onData=function(t){for(var i=t.items,r=[],a=[],s=0;s<i.length;s++){var o=new e.Instrument(i[s].feed,i[s].ticker);n.hasInstrument(o)||(-1==a.indexOf(o.feed)&&a.push(o.feed),r.push(o))}var l=!n.feedMetaData||!n.feedMetaData[a[0]]||!n.feedMetaData[a[0]].full_feed&&0<n.feedMetaData[a[0]].data_types.filter(function(t){return t!=e.FeedDataTypes.STOCKS&&t!=e.FeedDataTypes.INDICES}).length;if(1==a.length&&n.options.feed&&n.options.feed==a[0]&&l)n.getReferenceData(a[0],r);else for(var c=0,d=r;c<d.length;c++){var u=d[c];n.addInstrument(u)}},this.infront.chain(t.name,t.feed,i)},r.prototype.getReferenceData=function(t,n){var i=this;if(t===this.cachedReferenceData.feed)this.preFilterInstruments(this.cachedReferenceData.data,n);else{var r=new e.ReferenceDataOptions;r.feedNumber=t,r.onError=function(e,t){},r.onData=function(r){i.clear(),i.cachedReferenceData.data=r[e.MWSConstants.instruments],i.cachedReferenceData.feed=t,i.preFilterInstruments(r[e.MWSConstants.instruments],n)},this.infront.referenceData(r)}},r.prototype.clear=function(){this.clearVisible(),this.instruments.clear()},r.prototype.hasInstrument=function(t){for(var n=this.items.length(),i=0;i<n;i++)if(e.Instrument.prototype.equals.call(this.items.item(i),t))return!0;return!1},r.prototype.clearVisible=function(){this.items&&0<this.items.length()&&this.subscribes.removeAllInstruments(),this.items.clear(),this.columnManager.updateDefaultContent()},r.prototype.addInstrument=function(e){var t=this;this.hasInstrument(e)||(this.feedMetaData.hasOwnProperty(e.feed.toString())?(this.doAddInstrument(e),this.items.push(e)):this.infront.getFeedHandler().getFeed(e.feed,function(n){t.feedMetaData[e.feed]=n,t.doAddInstrument(e),t.items.push(e)}),this.subscribes.addInstrument(e))},r.prototype.returnDefaultWidgetOptions=function(){return new o},r.prototype.preFilterInstruments=function(t,n){var i=this,r=[],a=function(t){r.push(t);var n=new e.Instrument(t.feed,t.ticker);i.doAddInstrument(n)};if(this.options.instrumentTypes||n)for(var s=0;s<t.length;s++){var o=!0;n&&!c(n,t[s])&&(o=!1),this.options.instrumentTypes&&this.options.instrumentTypes.indexOf(t[s][e.MWSConstants.instrument_type])<0&&(o=!1),o&&a(t[s])}else for(s=0;s<t.length;s++)a(t[s]);this.subscribes.addInstruments(this.instruments.data),this.items.replaceWith(this.instruments.data),this.columnManager.updateDefaultContent()},r.prototype.setStreaming=function(){this.isStreaming=this.options.streaming&&this.infront.isStreaming()},r.prototype.newBuildUI=function(){var t=e.WidgetDOMFactory.create_WHeatmap_DOM(this.element,this.widgetTitle,this.infrontUI.languageHandler);this.dropdownContainer&&t.dropdown.appendChild(this.dropdownContainer),this.heatmapWrapper=t.heatmapWrapper,this.dropdownElement=t.dropdown;var i=new e.ArrayBinding(t.heatmapWrapper,this,this);this.cap||this.options.maxItems?(this.cap=new e.ObservableArrayCap(this.items,this.options.maxItems),this.cap.observe(i)):this.items.observe(i),this.columnManager.updateDefaultContent(),this.progressIndicator=new e.ProgressIndicator(this.element),n.prototype.newBuildUI.call(this)},r.prototype.updateHistColumns=function(){var t=this;this.columnManager.removeColumn(2),this.columnManager.removeColumn(1),this.columnManager.addCustomColumn({name:"S_"+this.getHistoryColumn(),header:"1",className:"cell-heatmap__container__instrument__column--pct",type:"computed",blinkType:e.BlinkType.None,computeFields:["LAST_VALID",this.getHistoryColumn()],dataType:e.DataType.Percent,allowZero:!0,compute:function(e,t){return 0===t[1]||null===t[0]||null===t[1]?0:(t[0]-t[1])/t[1]*100}}),this.columnManager.addCustomColumn({name:"S_COLOR_"+this.getHistoryColumn(),header:"1",className:"cell-heatmap__container__instrument__column--color",type:"computed",blinkType:e.BlinkType.None,computeFields:["LAST_VALID",this.getHistoryColumn()],dataType:e.DataType.Text,compute:function(e,n){return'<div class="cell-heatmap__container__instrument__column--color" style="background-color:'+t.calculateColorByValue((n[0]-n[1])/n[1]*100)+';"></div>'}}),this.sortColumnChanged(this.columnManager.columns[1],this.options.sortOrder,!0)},r.prototype.getHistoryColumn=function(){var e;switch(this.currentPeriod){case a.INTRADAY:e="PREVIOUS_";break;case a.ONE_WEEK:e="ONE_W_";break;case a.ONE_MONTH:e="ONE_M_";break;case a.ONE_YEAR:e="ONE_Y_";break;case a.YTD:e="YTD_";break;default:e="PREVIOUS_"}return e+"CLOSE"},r.prototype.setOptions=function(t){var n=this;this.options=t,this.setCurrentPeriod(this.getStoredValue(r.kMyStoredTimeperiodKey)),this.options.columns=[{name:"TICKER",hover:"FULL_NAME",className:"cell-heatmap__container__instrument__column--ticker"},{name:"PCT-X_Y",className:"cell-heatmap__container__instrument__column--pct",type:"computed",computeFields:["LAST_VALID",this.getHistoryColumn()],dataType:e.DataType.Percent,blinkType:e.BlinkType.None,allowZero:!0,compute:function(e,t){return 0===t[1]||null===t[0]||null===t[1]?0:(t[0]-t[1])/t[1]*100}},{name:"PCT-X_Y_color",className:"cell-heatmap__container__instrument__column--color",type:"computed",computeFields:["LAST_VALID",this.getHistoryColumn()],blinkType:e.BlinkType.None,dataType:e.DataType.Text,compute:function(e,t){return t[1]&&null!==t[0]?'<div class="cell-heatmap__container__instrument__column--color" style="background-color:'+n.calculateColorByValue((t[0]-t[1])/t[1]*100)+';"></div>':'<div class="cell-heatmap__container__instrument__column--color" style="background-color:'+n.calculateColorByValue(0)+';"></div>'}}]},r.prototype.calculateColorArray=function(){for(var e=0;e<=100;e++)this.colorArrayUp.push(this.colorBetween(this.options.rangeUpMaxColor,this.options.rangeUpMinColor,e)),this.colorArrayDown.push(this.colorBetween(this.options.rangeDownMaxColor,this.options.rangeDownMinColor,e))},r.prototype.colorBetween=function(e,t,n){for(var i=[],r=0;r<3;r++)i.push(n*(t[r]-e[r])/100+e[r]);return i},r.prototype.getColorValueFromChangedField=function(e){var t,n=e;return Math.min(100,Math.ceil(100*Math.abs(n)/this.options.colorClippingTreshold))*((t=n)?t<0?-1:1:0)},r.prototype.calculateColorByValue=function(e){var t,n=this.getColorValueFromChangedField(e);return t=n<0?this.colorArrayDown[Math.abs(n)]:0<n?this.colorArrayUp[n]:this.options.defaultColor,this.generateRGBString(t)},r.prototype.generateRGBString=function(e){return"rgb("+e[t.R]+","+e[t.G]+","+e[t.B]+")"},r.prototype.sortColumnChanged=function(e,t,n){e&&e.getFieldSpec()&&this.items.setSortingField(e,t,null)},r.prototype.buildDropdown=function(t,n,i,r){var a=new e.DropDownOptions;a.itemLabelPropertyKeys=["label","description"],a.itemPath="chain",a.subNodeName=e.MWSConstants.nodes,a.title=n,a.sortAlphabetically=!0,a.id="chainsDropDown",a.onSortItems=function(t,n){return t.item&&t.item.hasOwnProperty("sortField")&&null!=t.item.sortField&&n.item&&n.item.hasOwnProperty("sortField")&&null!=n.item.sortField?e.CompareFunctions.compareNumberAsc(t.item.sortField,n.item.sortField):t.item&&t.item.hasOwnProperty("sortField")&&null!=t.item.sortField?e.CompareFunctions.compareStringsDesc(t.item.sortField,n.title):n.item&&n.item.hasOwnProperty("sortField")&&null!=n.item.sortField?e.CompareFunctions.compareStringsDesc(t.title,n.item.sortField):e.CompareFunctions.compareStringsDesc(t.title,n.title)},a.list=t,a.closeOnClick=!0,a.onItemClicked=i,a.preSelectedItems=r,this.addDropDown(a)},r.prototype.createSortDropdown=function(){var t=this,n=new e.DropDownOptions,i=this.options.sortOrder===e.SortOrder.Asc?"Ascending":"Descending";return n.title="Sort",n.list=["Ascending","Descending"],n.closeOnClick=!0,n.sortAlphabetically=!1,n.itemPath="fullName",n.id="periodDropdown",n.preSelectedItems=[this.getStoredValue(r.kMyStoredSortingKey)||i],n.onItemClicked=function(n){t.options.sortOrder="Ascending"===n?e.SortOrder.Asc:e.SortOrder.Desc,t.store(r.kMyStoredSortingKey,n),t.updateHistColumns()},this.isSortDropdownSet=!0,this.addDropDown(n)},r.prototype.createPeriodDropdown=function(){var t=this,n=new e.DropDownOptions;return n.title="Time period",n.list=this.periods,n.closeOnClick=!0,n.sortAlphabetically=!1,n.itemPath="fullName",n.id="periodDropdown",n.preSelectedItems=[this.getStoredValue(r.kMyStoredTimeperiodKey)||"Intraday"],n.onItemClicked=function(e){t.setCurrentPeriod(e),t.updateHistColumns(),t.store(r.kMyStoredTimeperiodKey,e)},this.addDropDown(n)},r.prototype.setCurrentPeriod=function(e){switch(e){case"Intraday":this.currentPeriod=a.INTRADAY;break;case"Last week":this.currentPeriod=a.ONE_WEEK;break;case"Last month":this.currentPeriod=a.ONE_MONTH;break;case"Last year":this.currentPeriod=a.ONE_YEAR;break;case"Year to date":this.currentPeriod=a.YTD}},r.prototype.addDropDown=function(t){var n=new e.Observable(!0),i=document.createElement("div");i.className="cell-pull-right";var r=new e.DropDown(i,t,this.languageHandler,this),a=e.BindingFactory.createInlineBinding(function(e){r.display(e)});return this.dropdownContainer||(this.dropdownContainer=document.createElement("div")),this.dropdownContainer.appendChild(i),n.observe(a),r},r.prototype.doAddInstrument=function(t){this.instruments.push(t),this.columnManager.createComputedFieldsInCache(t,e.CacheKeyFactory.createInstrumentKey(t)),this.cache.update(e.CacheKeyFactory.createInstrumentKey(t),{instrument:t},!1)},r.prototype.newSubscribe=function(){this.streamingUnsub&&(this.streamingUnsub(),this.streamingUnsub=null),this.columnManager.subscribe(),n.prototype.newSubscribe.call(this)},r.prototype.newUnsubscribe=function(){this.columnManager.unsubscribe(),this.streamingUnsub&&(this.streamingUnsub(),this.streamingUnsub=null),this.subscribes.removeAllFields(),n.prototype.newUnsubscribe.call(this)},r.prototype.newDestroyUI=function(){this.streamingUnsub&&(this.streamingUnsub(),this.streamingUnsub=null),this.unbindingManager.unbind(this.element,!0),n.prototype.newDestroyUI.call(this)},r.prototype.createRow=function(t,n){var i=e.CacheKeyFactory.createInstrumentKey(t);this.isStreaming||this.infront.snapshot(t,this.columnManager.getSubscriptionFields());var r=this.createElementRowFromCache(t,i,this.decimals);return!this.colorInterval||this.options.useChains&&0!=this.options.chains.length||r.setAttribute("id",n+""),r},r.prototype.appendPlaceholders=function(e){var t=document.createElement("div");InfrontUtil.addClassName(t,"cell-flex-column  cell-flex-child-auto  cell-heatmap__container__instrument  cell-heatmap__container__instrument--placeholder"),e.appendChild(t)},r.prototype.createElementRowFromCache=function(t,n,i){var r=e.ColumnManager.createSimpleCachedDataBlock(this.options,this.columnManager,t,n,i,e.CommonListWidgetBase.trCounter,this.columnManager.columns,this.unbindingManager);return e.CommonListWidgetBase.trCounter++,InfrontUtil.addClassName(r,"cell-heatmap__container__instrument"),r},r.prototype.rowClicked=function(t){if(this.options.onInstrumentSelected){var n=e.CacheKeyFactory.createInstrumentKey(t);this.options.onInstrumentSelected(this.infront.getCache().getInstrument(n))}},r.prototype.linkEvent=function(e){this.linkController.instrumentClicked(e)},r.prototype.getColumnManager=function(){return this.columnManager},r.prototype.getTickerField=function(){return this.columnManager.findColumn(e.MWSConstants.ticker.toUpperCase())||null},r.prototype.htmlElementTreeAdded=function(e,t,n){if(n==this.items.length()-1&&!e.nextSibling)for(var i=0;i<12;i++)this.appendPlaceholders(e.parentElement)},r.prototype.htmlElementTreeRemoved=function(e,t,n){this.unbindingManager.unbind(e,!0)},r.prototype.htmlElementTreeMoved=function(e,t,n,i){},r.prototype.link=function(e){this.linkController.link(e)},r.prototype.unlink=function(e){this.linkController.unlink(e)},r.kMyStoredChainKey="chain",r.kMyStoredWatchlistKey="watchlist",r.kMyStoredTimeperiodKey="timeperiod",r.kMyStoredSortingKey="sortorder",r}(e.CommonListWidgetBase);function c(e,t){return InfrontUtil.arrayContains(e,function(e){return t.feed==e.feed&&t.ticker==e.ticker})}e.HeatmapWidget=l}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.historicFields=[InfrontConstants.HistoricalPeriodes.ONE_WEEK,InfrontConstants.HistoricalPeriodes.ONE_MONTH,InfrontConstants.HistoricalPeriodes.THREE_MONTH,InfrontConstants.HistoricalPeriodes.SIX_MONTH,InfrontConstants.HistoricalPeriodes.YTD],t.barPeriod=InfrontConstants.HistoricalPeriodes.ONE_YEAR,t}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.HistoricalOverviewWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"historicalOverview",r)||this;return a.currentBarPeriod=new e.Observable,a.localLow=new e.ObservableBinding,a.localHigh=new e.ObservableBinding,a.localLast=new e.ObservableBinding,a.localHistClose=new e.ObservableBinding,a.lowLabel=new e.Observable,a.highLabel=new e.Observable,a.subscribes.addFields([InfrontConstants.Fields.LAST,InfrontConstants.FieldGroups.HIST_PERFORMANCE,InfrontConstants.Fields.LAST_VALID]),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){var e=this.getStoredValue(i.kStoredPeriodKey);this.currentBarPeriod.set(e||this.options.barPeriod),n.prototype.newInit.call(this)},i.prototype.newBuildUI=function(){var t=this;this.unbinds.push(this.cache.customBind(this.cacheKey,this.createHistFieldDef(this.currentBarPeriod.get(),"low"),this.localLow)),this.unbinds.push(this.cache.customBind(this.cacheKey,this.createHistFieldDef(this.currentBarPeriod.get(),"high"),this.localHigh)),this.unbinds.push(this.cache.customBind(this.cacheKey,["last"],this.localLast)),this.unbinds.push(this.cache.customBind(this.cacheKey,this.createHistFieldDef(this.currentBarPeriod.get(),"close"),this.localHistClose));for(var i=new e.ComputedObservable([this.localLow,this.localHigh,this.localLast],function(e){var t=e[1]-e[0],n=e[2]-e[0];return Math.max(Math.min(n/t*100,100),0)}),r=new e.ComputedObservable([this.localLow,this.localHigh,this.localHistClose],function(e){var t=e[1]-e[0],n=e[2]-e[0];return Math.max(Math.min(n/t*100,100),0)}),a=[],s=0;s<this.options.historicFields.length;){var c=this.options.historicFields[s];if(o.hasOwnProperty(c)){var d={field:o[c],heading:this.infrontUI.languageHandler.get("historicalOverview",l[c]),type:l[c]};a.push(d)}s++}var u=this.infrontUI.languageHandler.get("historicalOverview",l[this.currentBarPeriod.get()]);this.lowLabel.set(this.infrontUI.languageHandler.get("historicalOverview","low")+" "+u),this.highLabel.set(this.infrontUI.languageHandler.get("historicalOverview","high")+" "+u),e.WidgetDOMFactory.create_WHistoricalOverview_DOM(this.element,this.widgetTitle,a,r,i,this.localLow,this.localHigh,this.lowLabel,this.highLabel,this.decimals,function(e){t.onPeriodClicked(e)},this.currentBarPeriod,this.cache,this.cacheKey,this.infrontUI.languageHandler),n.prototype.newBuildUI.call(this)},i.prototype.onPeriodClicked=function(e){this.removeBindings(),this.store(i.kStoredPeriodKey,e.heading),this.currentBarPeriod.set(e.type),this.unbinds.push(this.cache.customBind(this.cacheKey,this.createHistFieldDef(this.currentBarPeriod.get(),"low"),this.localLow)),this.unbinds.push(this.cache.customBind(this.cacheKey,this.createHistFieldDef(this.currentBarPeriod.get(),"high"),this.localHigh)),this.unbinds.push(this.cache.customBind(this.cacheKey,["last"],this.localLast)),this.unbinds.push(this.cache.customBind(this.cacheKey,this.createHistFieldDef(this.currentBarPeriod.get(),"close"),this.localHistClose)),this.lowLabel.set(this.infrontUI.languageHandler.get("historicalOverview","low")+" "+e.heading),this.highLabel.set(this.infrontUI.languageHandler.get("historicalOverview","high")+" "+e.heading)},i.prototype.createHistFieldDef=function(t,n){var i=null;return s.hasOwnProperty(t)&&((i=[]).push(e.MWSConstants.hist_performance),i.push(s[t]+n)),i},i.kStoredPeriodKey="period",i}(e.SingleInstrumentWidgetBase);e.HistoricalOverviewWidget=n;var i,r,a,s=((i={})[InfrontConstants.HistoricalPeriodes.ONE_WEEK]="one_w_",i[InfrontConstants.HistoricalPeriodes.ONE_MONTH]="one_m_",i[InfrontConstants.HistoricalPeriodes.THREE_MONTH]="three_m_",i[InfrontConstants.HistoricalPeriodes.SIX_MONTH]="six_m_",i[InfrontConstants.HistoricalPeriodes.ONE_YEAR]="one_y_",i[InfrontConstants.HistoricalPeriodes.TWO_YEAR]="two_y_",i[InfrontConstants.HistoricalPeriodes.THREE_YEAR]="three_y_",i[InfrontConstants.HistoricalPeriodes.FIVE_YEAR]="five_y_",i[InfrontConstants.HistoricalPeriodes.YTD]="ytd_",i),o=((r={})[InfrontConstants.HistoricalPeriodes.ONE_WEEK]="one_w_pct_change",r[InfrontConstants.HistoricalPeriodes.ONE_MONTH]="one_m_pct_change",r[InfrontConstants.HistoricalPeriodes.THREE_MONTH]="three_m_pct_change",r[InfrontConstants.HistoricalPeriodes.SIX_MONTH]="six_m_pct_change",r[InfrontConstants.HistoricalPeriodes.ONE_YEAR]="one_y_pct_change",r[InfrontConstants.HistoricalPeriodes.TWO_YEAR]="two_y_pct_change",r[InfrontConstants.HistoricalPeriodes.THREE_YEAR]="three_y_pct_change",r[InfrontConstants.HistoricalPeriodes.FIVE_YEAR]="five_y_pct_change",r[InfrontConstants.HistoricalPeriodes.YTD]="ytd_pct_change",r),l=((a={})[InfrontConstants.HistoricalPeriodes.ONE_WEEK]="1W",a[InfrontConstants.HistoricalPeriodes.ONE_MONTH]="1M",a[InfrontConstants.HistoricalPeriodes.THREE_MONTH]="3M",a[InfrontConstants.HistoricalPeriodes.SIX_MONTH]="6M",a[InfrontConstants.HistoricalPeriodes.ONE_YEAR]="1Y",a[InfrontConstants.HistoricalPeriodes.TWO_YEAR]="2Y",a[InfrontConstants.HistoricalPeriodes.THREE_YEAR]="3Y",a[InfrontConstants.HistoricalPeriodes.FIVE_YEAR]="5Y",a[InfrontConstants.HistoricalPeriodes.YTD]="YTD",a)}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startYear=(new Date).getFullYear(),t.endYear=t.startYear,t.useRatioForSplit=!1,t.filterSmallSplits=!1,t}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.HistoryWidgetOptions=t;var n=function(n){function a(t,s,o){var l=n.call(this,t,s,"history",o)||this;l.items=new e.SortedObservableArray(null),l.years=[],l.yearObserver=new e.SelectInputBinding,l.yearObserver.observe(function(e){return l.yearSelected(l.years[e])});for(var c=l.options.endYear;c>=l.options.startYear;c--)l.years.push(c);return l.selectedYear=0<l.years.length?l.years[0]:null,l.selectedOptionButton=new e.Observable,l.columns=[{name:"date",sortName:"_date",class:"cell-table__txt",compareFactory:r},{name:"open",class:"cell-table__num",compareFactory:i},{name:"high",class:"cell-table__num",compareFactory:i},{name:"low",class:"cell-table__num",compareFactory:i},{name:"last",class:"cell-table__num",compareFactory:i},{name:"num_trades",class:"cell-table__num",compareFactory:i},{name:"volume",class:"cell-table__num",compareFactory:i},{name:"turnover",class:"cell-table__num",compareFactory:i}],l.sortedColumn=new e.Observable,l.sortedColumn.set(a.kDefaultSortingColumn),l.updateSorting(),l.dividends=new e.SortedObservableArray(null),l.dividends.setCompareFunction(r("_date",!0)),l.splits=new e.SortedObservableArray(null),l.splits.setCompareFunction(r("_date",!0)),l.subscribes.addField(InfrontConstants.Fields.PREVIOUS_CLOSE),l}return __extends(a,n),a.prototype.returnDefaultWidgetOptions=function(){return new t},a.prototype.newBuildUI=function(){var t,i=this;this.cache.guaranteedAsyncGet(function(r){t=i.symbolIsFund()||i.symbolIsStock()?[i.infrontUI.languageHandler.get("history","show_all"),i.infrontUI.languageHandler.get("history","dividends_only"),i.infrontUI.languageHandler.get("history","splits_only")]:[i.infrontUI.languageHandler.get("history","show_all")],i.selectedOptionButton.set(0);var a=function(e){return i.optionSelected(e)},s=function(e){return i.columnHeaderClicked(e)};i.cache.guaranteedAsyncGet(function(n){var r=e.UI.kDefaultDecimals;InfrontUtil.isNumber(n)?r=n:i.feedMetaData&&InfrontUtil.isNumber(i.feedMetaData.decimals)&&(r=i.feedMetaData.decimals);var o=e.WidgetDOMFactory.create_WHistory_DOM(i.element,i.widgetTitle,i.options.instrument,i.items,i.dividends,i.splits,i.options.useRatioForSplit,i.columns,i.sortedColumn,s,i.years,i.yearObserver,r,t,i.selectedOptionButton,a,i.infrontUI.languageHandler),l=e.BindingFactory.createInlineBinding(function(e){0<e?o.children[Math.abs(e)-1].setAttribute("aria-label",i.infrontUI.languageHandler.get("accessibility","sortAscHistory")):e<0?o.children[Math.abs(e)-1].setAttribute("aria-label",i.infrontUI.languageHandler.get("accessibility","sortDescHistory")):o.children[Math.abs(e)-1].setAttribute("aria-label",i.infrontUI.languageHandler.get("accessibility","notSorted"))});i.sortedColumn.observe(l)},new e.FieldReference(i.cacheKey,[e.MWSConstants.instrument,e.MWSConstants.precision_code])),n.prototype.newBuildUI.call(i)},new e.FieldReference(this.cacheKey,[e.MWSConstants.instrument,e.MWSConstants.instrument_type]))},a.prototype.newSubscribe=function(){var e=this;this.loadCompanyHistory(function(){n.prototype.newSubscribe.call(e)})},a.prototype.feedContainsOnlyFund=function(){return 1==this.feedMetaData.data_types.length&&"FUND"===this.feedMetaData.data_types[0]},a.prototype.symbolIsFund=function(){var t=this.cache.get(this.cacheKey,[e.MWSConstants.instrument,e.MWSConstants.instrument_type]);return"FUND"===t||"NONE"===t&&this.feedContainsOnlyFund()},a.prototype.symbolIsStock=function(){return"STOCK"===this.cache.get(this.cacheKey,[e.MWSConstants.instrument,e.MWSConstants.instrument_type])},a.prototype.loadCompanyHistory=function(t){var n=this;void 0===t&&(t=null);var i=new e.HistoricalTradesOptions;i.adjust_splits=!0,i.start_date=new Date(this.selectedYear,0,1),i.end_date=new Date(this.selectedYear,11,31),i.onError=function(e,n){t(),IDS.log("HistoryWidget: ",n)},i.onData=function(i){n.items.clear();for(var r=i[e.MWSConstants.dividends],s=i[e.MWSConstants.splits],o=i[e.MWSConstants.trades],l=o.length-1;0<=l;l--){var c=o[l];c._date=new Date(c[e.MWSConstants.date]),c._type=a.kTradeItem,n.items.push(c)}if(r){r.sort(function(t,n){return t[e.MWSConstants.date]<n[e.MWSConstants.date]?1:t[e.MWSConstants.date]>n[e.MWSConstants.date]?-1:0});for(var d=0;d<r.length;d++){var u=r[d];u._date=new Date(u[e.MWSConstants.date]),u._type=a.kDividendItem}n.dividends.replaceWith(r);for(var h=0;h<n.dividends.length();h++)n.dividends.item(h)._date.getFullYear()==n.selectedYear&&n.items.push(n.dividends.item(h))}if(s){n.options.filterSmallSplits&&(s=s.filter(function(e){return e.factor<.94||1.1<e.factor})),s.sort(function(t,n){return t[e.MWSConstants.date]<n[e.MWSConstants.date]?1:t[e.MWSConstants.date]>n[e.MWSConstants.date]?-1:0});for(var p=0;p<s.length;p++){var m=s[p];n.options.useRatioForSplit&&(m.factor=n.convertToRatio(m.factor).toString()),m._date=new Date(m[e.MWSConstants.date]),m._type=a.kSplitItem}for(n.splits.replaceWith(s),h=0;h<n.splits.length();h++)1!=n.splits.item(h).factor&&n.splits.item(h)._date.getFullYear()==n.selectedYear&&n.items.push(n.splits.item(h))}t&&t()},this.infront.companyHistory(this.options.instrument,i)},a.prototype.convertToRatio=function(e){if(.32<e&&e<.34)return"3:1";if(.64<e&&e<.67)return"3:2";if(.74<e&&e<.76)return"4:3";if(.24<e&&e<.26)return"4:1";e=Math.round(100*e)/100;var t=this.getClosestFraction(e);return 100<t.denominator||100<t.numerator||1==t.numerator&&1==t.denominator?e:t.denominator+":"+t.numerator},a.prototype.getClosestFraction=function(e){if(e-Math.floor(e)==0)return{numerator:e,denominator:e};var t=function(e,n){return n<1e-7?e:n?t(n,e%n):e},n=e.toString().length-2,i=Math.pow(10,n),r=e*i,a=t(r,i);return{numerator:Math.round(r/a),denominator:Math.round(i/a)}},a.prototype.optionSelected=function(e){switch(this.selectedOptionButton.set(e),e){case 0:this.yearObserver.setDisabled(!1),this.loadCompanyHistory();break;default:this.yearObserver.setDisabled(!0)}},a.prototype.yearSelected=function(e){"number"==typeof e&&(this.selectedYear=e,this.sortedColumn.set(a.kDefaultSortingColumn),this.updateSorting(),this.loadCompanyHistory())},a.prototype.columnHeaderClicked=function(e){e==Math.abs(this.sortedColumn.get())?this.sortedColumn.set(-1*this.sortedColumn.get()):this.sortedColumn.set(e),this.updateSorting()},a.prototype.updateSorting=function(){var e=this.columns[Math.abs(this.sortedColumn.get())-1],t=e.compareFactory(e.hasOwnProperty("sortName")?e.sortName:e.name,0<this.sortedColumn.get());this.items.setCompareFunction(t)},a.kTradeItem=0,a.kSplitItem=1,a.kDividendItem=2,a.kDefaultSortingColumn=1,a}(e.SingleInstrumentWidgetBase);function i(e,t){return t?function(t,n){return n.hasOwnProperty(e)&&t.hasOwnProperty(e)?n[e]-t[e]:n.hasOwnProperty(e)?1:t.hasOwnProperty(e)?-1:0}:function(t,n){return t.hasOwnProperty(e)&&n.hasOwnProperty(e)?t[e]-n[e]:t.hasOwnProperty(e)?-1:n.hasOwnProperty(e)?1:0}}function r(e,t){return t?function(t,i){if(i[e].getTime()==t[e].getTime()){if(t._type!=n.kTradeItem)return 1;if(i._type!=n.kTradeItem)return-1}return i[e].getTime()-t[e].getTime()}:function(t,i){if(i[e].getTime()==t[e].getTime()){if(t._type!=n.kTradeItem)return-1;if(i._type!=n.kTradeItem)return 1}return t[e].getTime()-i[e].getTime()}}e.HistoryWidget=n}(Infront||(Infront={})),function(e){var t,n;(n=t=e.InstrumentOverviewWidgetLayout||(e.InstrumentOverviewWidgetLayout={}))[n.STANDARD=0]="STANDARD",n[n.MINI=1]="MINI",n[n.SIMPLE=2]="SIMPLE";var i=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.primaryValue=InfrontConstants.Fields.LAST,n.historicFields=[InfrontConstants.HistoricalPeriodes.ONE_MONTH,InfrontConstants.HistoricalPeriodes.THREE_MONTH,InfrontConstants.HistoricalPeriodes.SIX_MONTH,InfrontConstants.HistoricalPeriodes.YTD],n.historicColor=!0,n.layout=t.STANDARD,n.showFullName=!0,n}return __extends(n,e),n}(e.SingleInstrumentWidgetOptions);e.IndexOverviewWidgetOptions=i;var r=function(n){function r(i,r,a){var s=n.call(this,i,r,"indexoverviewwidget",a)||this;return s.up=new e.Observable,s.up.set(0),s.down=new e.Observable,s.down.set(0),s.unchanged=new e.Observable,s.unchanged.set(0),s.upPct=new e.Observable,s.upPct.set(0),s.downPct=new e.Observable,s.downPct.set(0),s.unchangedPct=new e.Observable,s.unchangedPct.set(0),s.options.layout==t.STANDARD?s.subscribes.addFields(["LAST","CHANGE","PCT_CHANGE","PREVIOUS_CLOSE","TIME","HIST_PERFORMANCE","LAST_VALID"]):s.subscribes.addFields(["LAST","CHANGE","PCT_CHANGE","LAST_VALID"]),s}return __extends(r,n),r.prototype.returnDefaultWidgetOptions=function(){return new i},r.prototype.newBuildUI=function(){for(var i=this,r=[],a=[],s=0,c=0;s<4&&c<this.options.historicFields.length;){var d=this.options.historicFields[c];o.hasOwnProperty(d)&&(r.push(l[d]),a.push(o[d]),s++),c++}var u=this.options.primaryValue==InfrontConstants.Fields.PCT_CHANGE?1:0;null==this.options.onClick?this.enableLink=!1:this.enableLink=!0,this.options.layout==t.STANDARD?e.WidgetDOMFactory.create_WIndexOverview_DOM(this.element,this.decimals,r,a,u,this.up,this.unchanged,this.down,this.upPct,this.unchangedPct,this.downPct,this.options.historicColor,this.enableLink,function(e){return i.linkClicked()},this.cache,this.cacheKey,this.infrontUI.languageHandler):this.options.layout==t.MINI?e.WidgetDOMFactory.create_WIndexOverviewMini_DOM(this.element,this.decimals,this.options.showFullName,this.cache,this.cacheKey):e.WidgetDOMFactory.create_WIndexOverviewSimple_DOM(this.element,this.decimals,this.up,this.unchanged,this.down,this.upPct,this.unchangedPct,this.downPct,this.cache,this.cacheKey,this.infrontUI.languageHandler),n.prototype.newBuildUI.call(this)},r.prototype.newSubscribe=function(){n.prototype.newSubscribe.call(this),!this.options.instrument||this.options.layout!=t.STANDARD&&this.options.layout!=t.SIMPLE||this.getMarketActivity()},r.prototype.getMarketActivity=function(){var t=this,n=new e.MarketActivityOptions;n.chain=this.options.instrument.ticker,n.onError=function(e,t){},n.onData=function(e){return t.marketActivityUpdate(e)},this.unbind=this.infront.marketActivity(this.options.instrument.feed,n)},r.prototype.marketActivityUpdate=function(t){this.up.set(t[e.MWSConstants.up]),this.down.set(t[e.MWSConstants.down]),this.unchanged.set(t[e.MWSConstants.unchanged]),null!=t[e.MWSConstants.up_pct]?this.upPct.set(t[e.MWSConstants.up_pct]):this.upPct.set("-"),null!=t[e.MWSConstants.down_pct]?this.downPct.set(t[e.MWSConstants.down_pct]):this.downPct.set("-"),null!=t[e.MWSConstants.unchanged_pct]?this.unchangedPct.set(t[e.MWSConstants.unchanged_pct]):this.unchangedPct.set("-")},r.prototype.linkClicked=function(){this.options.onClick(this.options.instrument)},r.prototype.destroy=function(){this.unbind&&this.unbind(),n.prototype.destroy.call(this)},r}(e.SingleInstrumentWidgetBase);e.IndexOverviewWidget=r;var a,s,o=((a={})[InfrontConstants.HistoricalPeriodes.ONE_WEEK]="one_w_pct_change",a[InfrontConstants.HistoricalPeriodes.ONE_MONTH]="one_m_pct_change",a[InfrontConstants.HistoricalPeriodes.THREE_MONTH]="three_m_pct_change",a[InfrontConstants.HistoricalPeriodes.SIX_MONTH]="six_m_pct_change",a[InfrontConstants.HistoricalPeriodes.ONE_YEAR]="one_y_pct_change",a[InfrontConstants.HistoricalPeriodes.TWO_YEAR]="two_y_pct_change",a[InfrontConstants.HistoricalPeriodes.THREE_YEAR]="three_y_pct_change",a[InfrontConstants.HistoricalPeriodes.FIVE_YEAR]="five_y_pct_change",a[InfrontConstants.HistoricalPeriodes.YTD]="ytd_pct_change",a),l=((s={})[InfrontConstants.HistoricalPeriodes.ONE_WEEK]="1W",s[InfrontConstants.HistoricalPeriodes.ONE_MONTH]="1M",s[InfrontConstants.HistoricalPeriodes.THREE_MONTH]="3M",s[InfrontConstants.HistoricalPeriodes.SIX_MONTH]="6M",s[InfrontConstants.HistoricalPeriodes.ONE_YEAR]="1Y",s[InfrontConstants.HistoricalPeriodes.TWO_YEAR]="2Y",s[InfrontConstants.HistoricalPeriodes.THREE_YEAR]="3Y",s[InfrontConstants.HistoricalPeriodes.FIVE_YEAR]="5Y",s[InfrontConstants.HistoricalPeriodes.YTD]="YTD",s)}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show_user_id=!1,t}return __extends(t,e),t}(e.WidgetOptions);e.StatusWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"statuswidget",r)||this;return a.connected=new e.Observable,a.connected.set(a.infront.getStatus()===e.InfrontStatus.Connected),a.addInfrontEventObserver("onReady",function(e){a.connected.set(!0)}),a.addInfrontEventObserver("onDisconnect",function(e){a.connected.set(!1),a.options.show_user_id&&(a.userIdElement.innerHTML="")}),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){e.WidgetDOMFactory.create_WStatus_DOM(this.element,this.connected)},i}(e.WidgetBase);e.StatusWidget=n;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show_user_id=!1,t}return __extends(t,e),t}(e.WidgetOptions);e.IDSStatusWidgetOptions=i;var r=function(t){function n(n,i,r){var a=t.call(this,n,i,"IDSstatuswidget",r)||this;if(a.serverTypeDisconnects={},a.status=new e.Observable(a.infront.getStatus()),a.addInfrontEventObserver("onReady",function(e){a.status.set(a.infront.getStatus())}),a.addInfrontEventObserver("onDisconnect",function(t){a.status.set(e.InfrontStatus.Disconnected)}),a.addInfrontEventObserver(e.LowLevelConnectEvent.kEventName,function(e){a.addLowLevelConnect(e)}),a.addInfrontEventObserver(e.LowLevelDisconnectEvent.kEventName,function(e){a.addLowLevelDisconnect(e)}),r.statusChangedCallback){var s=e.BindingFactory.createInlineBinding(r.statusChangedCallback);a.status.observe(s,e.InitialUpdate.Asynchronous)}return a.status.set(a.infront.getStatus()),a}return __extends(n,t),n.prototype.addLowLevelConnect=function(t){var n,i=this.serverTypeDisconnects[t.serverType];if(i){var r=i.indexOf(t.ps);r&&i.splice(r,1)}for(var a in this.serverTypeDisconnects){var s=this.serverTypeDisconnects[a];if(s&&0<s.length){n=!0;break}}this.status.set(n?e.InfrontStatus.Connecting:e.InfrontStatus.Connected)},n.prototype.addLowLevelDisconnect=function(t){var n=this.serverTypeDisconnects[t.serverType];n?n.indexOf(t.ps)||n.push(t.ps):this.serverTypeDisconnects[t.serverType]=[t.ps],this.status.set(e.InfrontStatus.Connecting)},n.prototype.returnDefaultWidgetOptions=function(){return new i},n.prototype.newBuildUI=function(){e.WidgetDOMFactory.create_WIdsStatus_DOM(this.element,this.status)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.serverTypeDisconnects={}},n}(e.WidgetBase);e.IDSStatusWidget=r}(Infront||(Infront={})),function(e){var t=function(){function e(e){this.observer=e,this.showing=!1}return e.prototype.show=function(){var e=this;if(!this.showing){this.overlay=document.createElement("div"),InfrontUtil.addClassName(this.overlay,"cell-page-overlay"),this.box=document.createElement("div"),InfrontUtil.addClassName(this.box,"cell-loginbox");var t=document.createElement("div");InfrontUtil.addClassName(t,"cell-h3"),t.innerHTML="Please log in";var n=document.createElement("form"),i=document.createElement("div");InfrontUtil.addClassName(i,"cell-loginbox__row");var r=document.createElement("div");InfrontUtil.addClassName(r,"cell-loginbox__row");var a=document.createElement("div");InfrontUtil.addClassName(a,"cell-loginbox__row");var s=document.createElement("div");InfrontUtil.addClassName(s,"cell-loginbox__row"),n.appendChild(i),n.appendChild(r),n.appendChild(a),n.appendChild(s);var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","username"),o.setAttribute("placeholder","Username"),InfrontUtil.addClassName(o,"cell-loginbox__input"),i.appendChild(o);var l=document.createElement("input");l.setAttribute("type","password"),l.setAttribute("id","password"),l.setAttribute("placeholder","Password"),InfrontUtil.addClassName(l,"cell-loginbox__input"),r.appendChild(l);var c=document.createElement("input");InfrontUtil.addClassName(c,"cell-loginbox__button  cell-loginbox__button--login"),c.type="Submit",c.value="Log in",a.appendChild(c),this.box.appendChild(t),this.box.appendChild(n),n.onsubmit=function(t){return null!=e.observer&&(e.hide(),e.observer.loginInformationProvided(o.value,l.value)),!1},document.body.appendChild(this.overlay),document.body.appendChild(this.box),this.showing=!0}},e.prototype.hide=function(){this.showing&&(document.body.removeChild(this.overlay),document.body.removeChild(this.box),this.overlay=null,this.box=null,this.showing=!1)},e}();e.LoginDialog=t}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.TradingWidgetOptions);e.PortfolioNameWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"portfolioName",r)||this;return a.portfolios=new e.ObservableArray,a.selectedPortfolio=new e.Observable,a.selectedPortfolio.set(null),a.showMenu=new e.Observable,a.showMenu.set(!1),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){e.WidgetDOMFactory.create_NPortfolioName_DOM(this.element,this.selectedPortfolio)},i.prototype.availablePortfoliosChanged=function(e){this.portfolios.replaceWith(e)},i.prototype.currentPortfolioChanged=function(e){this.selectedPortfolio.set(e)},i}(e.TradingWidgetBase);e.PortfolioNameWidget=n}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showFullName=!0,t}return __extends(t,e),t}(e.TradingWidgetOptions);e.PortfolioSelectWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"portfolioSelect",r)||this;if(a.portfolios=new e.ObservableArray,a.numberOfPortfolios=new e.Observable,a.numberOfPortfolios.set(0),a.selectedPortfolio=new e.Observable,a.selectedPortfolio.set(null),a.showMenu=new e.Observable,a.showMenu.set(!1),a.scaling=a.options.scaling,a.options.portfoliosChanged){var s=e.BindingFactory.createInlineBinding(function(e){a.options.portfoliosChanged(e)});a.numberOfPortfolios.observe(s)}return a}return __extends(i,n),i.prototype.newBuildUI=function(){var t=this;this.listClick=function(e){return t.portfolioSelected(e)};var i=e.WidgetDOMFactory.create_WPortfolioSelect_DOM(this.element,this.widgetTitle,this.selectedPortfolio,this.portfolios,this.numberOfPortfolios,this.showMenu,this.scaling,function(e){t.showMenu.set(!t.showMenu.get()),e.stopPropagation(),e.preventDefault()},this.listClick,this.options.titleClick);this.dropdownContainer=i.dropdownContainer;var r=e.BindingFactory.createInlineBinding(function(e){if(e){t.scaling&&t.dropdownContainer&&!t.dropdownScaled?t.scaleDropdown():t.scaling&&t.absolutePositionDropdown(),t.dropdownContainer.style.display="block";var n=i.dropdownLabel.getBoundingClientRect();n&&(i.dropDownList.style.top="35px",i.dropDownList.style.left=n.left+"px")}else t.dropdownContainer&&(t.dropdownContainer.style.display="none")});this.showMenu.observe(r),this.addEventListener(window.document.body,"click",function(e){return t.showMenu.set(!1)}),n.prototype.newBuildUI.call(this)},i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.portfolioSelected=function(e){this.showMenu.set(!1),this.infront.getTradingManager().setCurrentPortfolio(e),this.store(i.kMyStoredPortfolio,e.name)},i.prototype.getPortfoliosAmount=function(){return this.portfolios.length()},i.prototype.scaleDropdown=function(){var e=this.dropdownContainer.parentElement.getBoundingClientRect(),t=this.dropdownContainer.parentElement.parentElement.offsetWidth;this.dropdownPositioning=window.getComputedStyle(this.dropdownContainer).position,document.body.appendChild(this.dropdownContainer),this.dropdownContainer.style.minWidth=t+"px",this.dropdownContainer.style.left=e.left+"px",this.dropdownContainer.style.top=e.top-document.body.getBoundingClientRect().top+"px",this.dropdownContainer.style.position=this.dropdownPositioning,this.dropdownContainer.style.fontSize="13px",this.dropdownContainer.style.lineHeight="16px",this.dropdownScaled=!0},i.prototype.absolutePositionDropdown=function(){"fixed"==this.dropdownPositioning||document.body.getBoundingClientRect().top},i.prototype.availablePortfoliosChanged=function(e){for(var t=0;t<e.length;t++){var n=this.options.showFullName&&e[t].description?e[t].name+" - "+e[t].description:e[t].name,r=this.options.showFullName&&e[t].description?e[t].description:e[t].name;e[t].fullName=InfrontUtil.htmlSanitize(n),e[t].displayName=InfrontUtil.htmlSanitize(r)}this.portfolios.replaceWith(e),this.numberOfPortfolios.set(this.portfolios.length());var a=this.getStoredValue(i.kMyStoredPortfolio);for(t=0;t<e.length;t++)e[t].name==InfrontUtil.htmlSanitize(a)&&this.infront.getTradingManager().setCurrentPortfolio(e[t])},i.prototype.currentPortfolioChanged=function(e){e&&!e.displayName&&(e.fullName=this.options.showFullName&&e.description?e.name+" - "+e.description:e.name,e.displayName=this.options.showFullName&&e.description?e.description:e.name),this.selectedPortfolio.set(e)},i.prototype.currentPortfolioReady=function(e){},i.kMyStoredPortfolio="my-stored-portfolio",i}(e.TradingWidgetBase);e.PortfolioSelectWidget=n}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showPortfolio=!1,t.showPortfolioSelect=!1,t.showDeleteAll=!1,t.clickToLogin=!1,t.aggregated=!1,t.hideEmptyList=!0,t}return __extends(t,e),t}(e.CommonListOptions);e.TradingTableWidgetOptions=t;var n=function(t){function n(n,i,r,a,s,o,l){void 0===s&&(s=null),void 0===o&&(o=null),void 0===l&&(l=null);var c=t.call(this,n,r,i,a)||this;return c.trCounter=0,c.filters=[],c.symbolCacheKeys=[],c.options.defaultSortedColumn||c.getStoredColumn(),c.showPortfolioSelect=a.showPortfolioSelect,c.showPortfolio=!c.showPortfolioSelect&&a.showPortfolio,c.deleteAllClick=l,c.cache=c.infront.getCache(),c.filterFields=s,c.filterFunc=o,c.portfolioNameObs=new e.Observable,c.portfolioNameObs.set(""),c.decimals={},c.feedMetadata={},c.isTrading=new e.Observable,c.isTrading.set(!1),c.columnManager=new e.ColumnManager(c.options,c.infront,r,function(e,t){return c.createColumn(e,t)}),c.columnManager.setCacheKeyConverter(function(e,t){return c.convertCacheKey(e,t)}),c.columnManager.setSortColumnChangedCallback(function(e,t,n){return c.sortColumnChanged(e,t,n)}),c.columnManager.setRowClickCallback(function(e){return c.rowClicked(e)}),c.subscribes.addFields(c.columnManager.createQuoteOptions().fields),c.items=new e.ContinouslySortedColumnCacheKeyObservableArray(c.columnManager.currentlySortedColumn,c.columnManager.currentSortOrder,c.cache,function(e,t,n){return c.convertCacheKey(e,t)}),c.rowCounter=new e.ObservableArrayRowCounter(c.items),c.rowCounter.rowCount.observe(e.BindingFactory.createInlineBinding(function(t){c.setHasContent(0<t),0===t&&c.options.hideEmptyList?InfrontUtil.addClassName(c.element,e.CssConstants.kNoDataClass):InfrontUtil.removeClassName(c.element,e.CssConstants.kNoDataClass)})),c.columnManager.createFooterFields(c.items,function(e){return e}),c}return __extends(n,t),n.prototype.newBuildUI=function(){var n=this,i=e.WidgetDOMFactory.create_WTradingTable_DOM(this.element,this.options.layout,this.showPortfolioSelect?null:this.widgetTitle,this.portfolioNameObs,this.showPortfolio,this.showPortfolioSelect,this.options.showDeleteAll,this.isTrading,this.deleteAllClick,this.options.titleClick,this.infrontUI.languageHandler);InfrontUtil.isString(this.options.className)&&(this.element.className=this.options.className);var r=i.thead,a=i.tbody,s=i.tfoot,o=i.portfolioContainer;r.appendChild(e.ColumnManager.createHeaderRow(this.options,this.columnManager,this.columnManager.getUnbindingManager(),this.columnManager.columns)),r.appendChild(this.createNoTradingContentDisplay());var l=new e.ArrayBinding(a,this,this);this.items.observe(l),this.unbinds.push(function(){n.items.unbind(l)});var c=e.ColumnManager.createFooterRow(this.options,this.columnManager,this.columnManager.getUnbindingManager(),2,this.languageKey,this.columnManager.columns,this.infrontUI,c,this.cache);c&&s.appendChild(c),this.showPortfolioSelect&&this.createPortfolioSelect(o),this.progressIndicator=new e.ProgressIndicator(i.progressIndicator),t.prototype.newBuildUI.call(this)},n.prototype.newSubscribe=function(){!0===this.options.aggregated&&this.infront.getTradingManager().subscribeToAllPortfolios(),t.prototype.newSubscribe.call(this)},n.prototype.newUnsubscribe=function(){!0===this.options.aggregated&&this.infront.getTradingManager().unsubscribeFromAllPortfolios(),t.prototype.newUnsubscribe.call(this)},n.prototype.newDestroyUI=function(){this.syncUnbind&&(this.syncUnbind(),this.syncUnbind=null),this.items.clear(),this.columnManager.unbindFooterTr(),this.portfolioSelectWidget&&this.portfolioSelectWidget.destroy(),t.prototype.newDestroyUI.call(this)},n.prototype.rowClicked=function(e){},n.prototype.createArrayCacheKey=function(e){return""},n.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n)},n.prototype.getRowId=function(t){var n=this.cache.get(t,["instrument","feed"]),i=this.cache.get(t,["instrument","ticker"]);return new e.Instrument(n,i)},n.prototype.sortColumnChanged=function(e,t,i){e&&(this.items.setSortColumn(e,t),i&&this.store(n.kMySortingColumnKey,e.name+t))},n.prototype.getStoredColumn=function(){var t=this.getStoredValue(n.kMySortingColumnKey);if(t){var i=t.substr(0,t.length-1),r=t.substr(t.length-1);this.options.defaultSortedColumn=i,"0"==r?this.options.defaultSortOrder=e.SortOrder.Desc:"1"==r&&(this.options.defaultSortOrder=e.SortOrder.Asc)}},n.prototype.convertCacheKey=function(t,n){if(n.source==e.FieldSource.Snapshot||n.source==e.FieldSource.Instrument&&"TICKER"!=n.name&&"FEED"!=n.name||n.source==e.FieldSource.Historical||n.source==e.FieldSource.Fund){var i=this.cache.get(t,["instrument","feed"]),r=this.cache.get(t,["instrument","ticker"]);return e.CacheKeyFactory.createInstrumentKey(new e.Instrument(i,r))}return t},n.prototype.createCacheKey=function(e,t){return e},n.prototype.createRow=function(t,n){this.columnManager.createComputedFieldsInCache(t,t);var i=this.getRowId(t),r=e.ColumnManager.createElementRowFromCache(this.options,this.columnManager,i,t,this.decimals[t],this.trCounter);return this.trCounter++,r},n.prototype.availablePortfoliosChanged=function(e){this.options.aggregated&&this.syncToPortfolios(e)},n.prototype.currentPortfolioChanged=function(e){if(!this.options.aggregated){var t=null==e?"":e.name;if(this.portfolioNameObs.get()!=t){for(var n=0;n<this.filters.length;n++)this.filters[n].destroy();this.filters=[],this.syncToPortfolios([e]),this.portfolioNameObs.set(t)}}},n.prototype.syncToPortfolios=function(t){var n=this;if(this.progressIndicator&&this.progressIndicator.start(),this.syncUnbind&&this.syncUnbind(),this.items.clear(),null!=t){for(var i=[],r=0;r<t.length;r++){var a=t[r];if(null!=this.filterFields){var s=new e.CacheBasedFilter(this.cache,this,this.filterFields,function(e,t){return n.createCacheKey(e,t)},this.filterFunc);this.filters.push(s),i.push(this.cache.bindToArray(this.createArrayCacheKey(a),s))}else i.push(this.cache.bindToArray(this.createArrayCacheKey(a),this))}this.syncUnbind=function(){for(;0<i.length;)i.pop()()}}},n.prototype.currentPortfolioReady=function(e){this.progressIndicator&&this.progressIndicator.stop()},n.prototype.reInit=function(e){for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)},n.prototype.itemAdded=function(t,n){var i=this;this.decimals.hasOwnProperty(t)||(this.decimals[t]=new e.Observable,this.decimals[t].set(e.UI.kDefaultDecimals));var r=this.createCacheKey(t,null);this.items.push(t);var a=new e.FieldReference(this.createCacheKey(t,null),[e.MWSConstants.instrument,e.MWSConstants.feed]),s=null,o=null,l=function(){i.options.decimals==e.WidgetDecimals.INSTRUMENT&&InfrontUtil.isNumber(s)?i.decimals[t].set(s):InfrontUtil.isNumber(o)&&i.decimals[t].set(o)};if(InfrontUtil.isNumber(this.options.decimals))this.decimals[t].set(this.options.decimals);else if(this.options.decimals==e.WidgetDecimals.INSTRUMENT){var c=this.cache.getInstrument(r),d=e.CacheKeyFactory.createInstrumentKey(c);this.cache.guaranteedAsyncGet(function(e){InfrontUtil.isNumber(e)&&(s=e,l())},new e.FieldReference(d,[e.MWSConstants.instrument,e.MWSConstants.precision_code]))}this.options.decimals!=e.WidgetDecimals.INSTRUMENT&&this.options.decimals!=e.WidgetDecimals.FEED||this.cache.guaranteedAsyncGet(function(e){i.infront.getFeedHandler().getFeed(e,function(e){e&&e.decimals&&(o=e.decimals,l())})},a)},n.prototype.itemRemoved=function(e,t){this.items.remove(e)},n.prototype.itemMoved=function(e,t,n){},n.prototype.iterateCacheItems=function(t,n,i,r,a){for(var s=this,o=a?[a]:this.cache.getArray(e.MWSConstants.portfolio+"_"+n+"|"+r).data,l=IDS.FromMws.Tags([t]),c=function(){var e=o[u],n=d.cache.getInstrument(e);n&&d.cache.inlineSymbolBind(n,l.normalTags[0],function(r){var a={instrument:n};if(i)if(a.hasOwnProperty(i))a[i][t]=r;else{var o={};o[t]=r,a[i]=o}else a[t]=r;s.cache.update(e,a)})},d=this,u=0;u<o.length;u++)c()},n.prototype.htmlElementTreeAdded=function(t,n,i){this.columnManager.htmlElementTreeAdded(t,n,i);var r=this.cache.get(n,["instrument","feed"]),a=this.cache.get(n,["instrument","ticker"]),s=new e.Instrument(r,a);this.subscribes.addInstrument(s)},n.prototype.htmlElementTreeRemoved=function(t,n,i){this.columnManager.htmlElementTreeRemoved(t,n,i);var r=this.cache.get(n,["instrument","feed"]),a=this.cache.get(n,["instrument","ticker"]),s=new e.Instrument(r,a);this.subscribes.removeInstrument(s)},n.prototype.htmlElementTreeMoved=function(e,t,n,i){this.columnManager.htmlElementTreeMoved(e,t,n,i)},n.prototype.supportsHasContent=function(){return!0},n.prototype.createPortfolioSelect=function(t){var n=new e.PortfolioSelectWidgetOptions;n.widgetTitle=this.widgetTitle,n.scaling=!0,n.titleClick=this.options.titleClick,this.portfolioSelectWidget=new e.PortfolioSelectWidget(t,this.infrontUI,n)},n.kMySortingColumnKey="my-sorting-column",n}(e.TradingWidgetBase);e.TradingTableWidgetBase=n}(Infront||(Infront={})),function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.instrumentTypes=null,n.instrumentSubtypes=null,n.hideInstrumentSubtypes=null,n.hideInstrumentTypes=null,n.loans=!1,n.layout=e.ListLayout.TABLE,n.displayRowColumns=["AVG_PRICE","LAST","CURRENCY","INVESTED"],n.enableOrders=!1,n.enableTrades=!1,n}return __extends(n,t),n}(e.TradingTableWidgetOptions);e.PositionsWidgetOptions=t;var n=function(n){function r(t,i,r,a){var s=this,o=[[e.MWSConstants.instrument,e.MWSConstants.market]];return null!=a.instrumentSubtypes&&0<a.instrumentSubtypes.length||null!=a.hideInstrumentSubtypes&&0<a.hideInstrumentSubtypes.length?(o.push([e.MWSConstants.instrument,e.MWSConstants.instrument_type]),o.push([e.MWSConstants.instrument,e.MWSConstants.instrument_subtype])):(null!=a.instrumentTypes&&0<a.instrumentTypes.length||null!=a.hideInstrumentTypes&&0<a.hideInstrumentTypes.length)&&o.push([e.MWSConstants.instrument,e.MWSConstants.instrument_type]),null!=(s=n.call(this,t,"positions",r,a,o,function(e){return s.filter(e)})||this).columnManager.findColumn("PL_TODAY")&&s.infront.getTradingManager().enableTodaysPL(),s.options.columns.push(s.createTickerColumn()),s.itemCacheKeys=[],s.mode=new e.Observable(s.options.layout),s.infrontUI=r,s.isEmpty=new e.Observable(!0),s.expandables={},s.unbindingManager=new e.UnbindingManager,s.options.layout!=e.ListLayout.CARD&&s.options.layout!=e.ListLayout.COMPACT||s.setColumns(),s.options.enableOrders&&s.initializeOrders(),s.options.enableTrades&&s.initializeTrades(),s.rebuild=!1,s}return __extends(r,n),r.prototype.setColumns=function(){var e=this;if(this.options.columns.push(this.createTickerColumn()),this.displayColumns=[],this.options.displayRowColumns&&0<this.options.displayRowColumns.length)for(var t=this.columnManager.columns,n=0;n<this.options.displayRowColumns.length;n++)this.displayColumns.push(this.createColumn(this.options.displayRowColumns[n],this.infrontUI.languageHandler)),t=t.filter(function(t){var i=e.options.displayRowColumns[n].name?e.options.displayRowColumns[n].name.toUpperCase():e.options.displayRowColumns[n].toUpperCase();return t.name!==i}),this.columnManager.portfolioColumns=t},r.prototype.setDisplayColumns=function(e){this.options.displayRowColumns=e,this.setColumns()},r.prototype.createTickerColumn=function(){return{name:"TICKER",hover:"FULL_NAME",className:"cell-text-left",type:"computed",flag:!0,computeFields:["TICKER","FULL_NAME"],compute:function(e,t){return t[0]&&t[0].startsWith("0P0")?t[1]:t[0]}}},r.prototype.initializeOrders=function(){var t=this;this.ordersfilterFields=["order_status","order_type","algo_id",e.MWSConstants.volume_filled],this.orderItems=new e.ObservableArray,this.ordersSync=new e.ObservableArraySync(this.orderItems);var n=new e.ArrayBinding(null,this,null);this.unbinds.push(function(){t.orderItems.unbind(n)}),this.orderItems.observe(this)},r.prototype.initializeTrades=function(){var t=this;this.netTradesHandler=new i(function(e,n,i){return e&&t.removeOrderInfoElement(null,i,e),n?t.appendOrderInfoElement(null,n,i):null}),this.tradeItems=new e.ObservableArray,this.tradesSync=new e.ObservableArraySync(this.tradeItems);var n=new e.ArrayBinding(null,this,null);this.unbinds.push(function(){t.tradeItems.unbind(n)}),this.tradeItems.observe(this)},r.prototype.newBuildUI=function(){var t=this;if(this.mode.get()==e.ListLayout.DIV||this.mode.get()==e.ListLayout.TABLE)n.prototype.newBuildUI.call(this);else{var i=e.WidgetDOMFactory.create_WTradingTableFlex_DOM(this.element,this.showPortfolioSelect?null:this.widgetTitle,this.portfolioNameObs,this.showPortfolio,this.showPortfolioSelect,this.options.showDeleteAll,this.deleteAllClick,this.options.titleClick,this.isEmpty,this.mode,this.infrontUI.languageHandler);InfrontUtil.isString(this.options.className)&&(this.element.className=this.options.className);var r=i.thead,a=i.tbody,s=i.portfolioContainer;r.appendChild(e.ColumnManager.createCompactCardHeader(this.columnManager,this.displayColumns));var o=new e.ArrayBinding(a,this,this);this.items.observe(o),this.unbinds.push(function(){t.items.unbind(o)}),this.showPortfolioSelect&&this.createPortfolioSelect(s),this.progressIndicator=new e.ProgressIndicator(i.progressIndicator),this.itemCacheKeys=[],this.createBindings(),this.widgetState=e.WidgetState.UiBuilt,this.newSubscribe()}},r.prototype.linkEvent=function(e){},r.prototype.returnDefaultWidgetOptions=function(){return new t},r.prototype.createArrayCacheKey=function(t){return e.CacheKeyFactory.createPortfolioPositionsKey(t)},r.prototype.filter=function(e){var t=this.filterMarket(e[0]);return 2==e.length?t=t&&this.filterInstrumentType(e[1]):2<e.length&&(t=t&&this.filterInstrumentType(e[1],e[2])),t},r.prototype.filterMarket=function(e){return this.options.loans?e==r.kLoanMarket:e!=r.kLoanMarket},r.prototype.filterInstrumentType=function(e,t){var n=null!=this.options.hideInstrumentTypes&&-1<this.options.hideInstrumentTypes.indexOf(e)||null!=this.options.hideInstrumentSubtypes&&-1<this.options.hideInstrumentSubtypes.indexOf(t);return(null==this.options.instrumentTypes||-1<this.options.instrumentTypes.indexOf(e))&&(null==this.options.instrumentSubtypes||-1<this.options.instrumentSubtypes.indexOf(t))&&!n},r.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n,[e.FieldSource.Position,e.FieldSource.Historical,e.FieldSource.Snapshot,e.FieldSource.Unknown])},r.prototype.itemAdded=function(t,i){var r=this;this.iterateCacheItems(e.MWSConstants.instrument_type,null,e.MWSConstants.instrument,null,t),-1<t.indexOf(e.MWSConstants.order+"_"+this.portfolioNameObs.get())&&(this.mode.get()==e.ListLayout.CARD||this.mode.get()==e.ListLayout.COMPACT)&&this.options.enableOrders?-1==this.itemCacheKeys.indexOf(t)&&(this.itemCacheKeys.push(t),new a(t,this.cache,this.infrontUI,function(e,n,i,a){return e&&r.removeOrderInfoElement(null,i,e),n?r.appendOrderInfoElement(t,n,i):null})):-1<t.indexOf(e.MWSConstants.trade+"_"+this.portfolioNameObs.get())&&(this.mode.get()==e.ListLayout.CARD||this.mode.get()==e.ListLayout.COMPACT)&&this.options.enableTrades?this.netTradesHandler.processTradeItem(t,this.cache.get(t,e.MWSConstants.buy_or_sell),this.cache):n.prototype.itemAdded.call(this,t,i)},r.prototype.appendOrderInfoElement=function(t,n,i){var r=this.expandables[i],a=null!=t&&-1<t.indexOf(e.MWSConstants.order)?e.CssConstants.kCellActiveOrderMessageBox:e.CssConstants.kCellTradesMessageBox;if(r){var s=e.MWSConstants.order===this.getInfoType(t)?this.options.onOrderClick:this.options.onTradeClick,o=e.MWSConstants.order===this.getInfoType(t)?{portfolio:this.cache.get(t,e.MWSConstants.portfolio),order_id:this.cache.get(t,e.MWSConstants.order_id)}:e.CacheKeyFactory.createInstrumentFromKey(i);return e.WidgetDOMFactory.create_COrderMessage_DOM(r,n,a,o,s,this.languageHandler)}return null},r.prototype.getInfoType=function(t){if(t){if(-1<t.indexOf(e.MWSConstants.order+"_"+this.portfolioNameObs.get()))return e.MWSConstants.order;if(-1<t.indexOf(e.MWSConstants.trade+"_"+this.portfolioNameObs.get()))return e.MWSConstants.trade}return null},r.prototype.removeOrderInfoElement=function(e,t,n){if(n){var i=this.expandables[t];-1<Array.prototype.slice.call(i.children).indexOf(n)&&i.removeChild(n)}},r.prototype.createRow=function(t,i){var r,a=this.getRowId(t);switch(this.columnManager.createComputedFieldsInCache(t,t),this.options.layout){case e.ListLayout.CARD:r=e.ColumnManager.createElementCardRowFromCache(this.options,this.columnManager,a,t,this.decimals[t],this.trCounter,this.displayColumns),this.options.enableOrders&&this.appendInfoWrapper(t,r),this.trCounter++;break;case e.ListLayout.COMPACT:r=e.ColumnManager.createCompactCardSection(this.options,this.columnManager,a,t,this.decimals[t],this.trCounter,this.displayColumns),this.options.enableOrders&&this.appendInfoWrapper(t,r),this.trCounter++;break;case e.ListLayout.DIV:case e.ListLayout.TABLE:default:r=n.prototype.createRow.call(this,t,i)}return r&&this.isEmpty.set(!1),r},r.prototype.reInit=function(e){n.prototype.reInit.call(this,e),0<e.length?this.isEmpty.set(!1):0==this.items.data.length&&this.isEmpty.set(!0)},r.prototype.appendInfoWrapper=function(t,n){var i=document.createElement("div");this.expandables[t]=i,InfrontUtil.addClassName(i,e.CssConstants.kCellTradingInfoWrapper),n.appendChild(i)},r.prototype.onTradingConnected=function(){n.prototype.onTradingConnected.call(this)},r.prototype.currentPortfolioChanged=function(e){n.prototype.currentPortfolioChanged.call(this,e),this.itemCacheKeys=[]},r.prototype.currentPortfolioReady=function(t){n.prototype.currentPortfolioReady.call(this,t),this.options.enableOrders&&(this.ordersUnbind&&(this.ordersUnbind(),this.ordersUnbind=null),this.ordersUnbind=this.infront.getCache().bindToArray(e.CacheKeyFactory.createPortfolioOrdersKey(t),this.ordersSync)),this.options.enableTrades&&(this.tradesUnbind&&(this.tradesUnbind(),this.tradesUnbind=null),this.tradesUnbind=this.infront.getCache().bindToArray(e.CacheKeyFactory.createPortfolioTradesKey(t),this.tradesSync))},r.prototype.setLayout=function(e){for(this.itemCacheKeys=[],this.options.layout=e,this.mode.set(e),this.setColumns();this.element.hasChildNodes();)this.element.removeChild(this.element.lastChild);this.newBuildUI(),this.options.onChangeModeCallback&&this.options.onChangeModeCallback(e)},r.kLoanMarket="Loan",r}(e.TradingTableWidgetBase);e.PositionsWidget=n;var i=function(){function t(e){this.netTrades={},e&&(this.returnCallback=e)}return t.prototype.processTradeItem=function(t,n,i){var r=this.getCacheKeyFromTradeItem(t,i);if(this.instrumentTraded(r)||(this.netTrades[r]={SELL:0,BUY:0,TOTAL:0,volume_sold:0,volume_bought:0,ret:null}),this.setNetBuySellPrice(t,r,i,n),this.setNetVolume(t,r,i,n),this.updateTotal(r),0==this.netTrades[r].TOTAL)this.returnCallback(this.netTrades[r].ret,null,r),this.netTrades[r].ret=null;else{var a=0<this.netTrades[r].TOTAL?this.getNetSellMessage(r,i.get(r,e.MWSConstants.precision_code)):this.getNetBuyMessage(r,i.get(r,e.MWSConstants.precision_code));this.netTrades[r].ret=this.returnCallback(this.netTrades[r].ret,a,r)}},t.prototype.instrumentTraded=function(e){return this.netTrades[e]},t.prototype.getCacheKeyFromTradeItem=function(t,n){var i=n.get(t,[e.MWSConstants.portfolio]),r=n.get(t,[e.MWSConstants.instrument,e.MWSConstants.ticker]);return i+"|"+n.get(t,[e.MWSConstants.instrument,e.MWSConstants.feed])+"|"+r},t.prototype.setNetBuySellPrice=function(t,n,i,r){this.netTrades[n][r]+=i.get(t,e.MWSConstants.price)*i.get(t,e.MWSConstants.volume)},t.prototype.setNetVolume=function(t,n,i,r){var a=r===e.MWSBuyOrSell.SELL?"volume_sold":"volume_bought";this.netTrades[n][a]+=i.get(t,e.MWSConstants.volume)},t.prototype.updateTotal=function(t){this.netTrades[t].TOTAL=this.netTrades[t][e.MWSBuyOrSell.SELL]-this.netTrades[t][e.MWSBuyOrSell.BUY]},t.prototype.getTotal=function(e){return this.netTrades[e].TOTAL},t.prototype.getNetSellMessage=function(t,n){return n?"TOTAL NET SOLD "+this.netTrades[t].volume_sold+" @ AVG "+InfrontUtil.roundFloat(this.netTrades[t][e.MWSBuyOrSell.SELL]/this.netTrades[t].volume_sold,n):"TOTAL NET SOLD "+this.netTrades[t].volume_sold+"@AVG"+(this.netTrades[t][e.MWSBuyOrSell.SELL]/this.netTrades[t].volume_sold).toFixed(e.UI.kDefaultDecimals)},t.prototype.getNetBuyMessage=function(t,n){return n?"TOTAL NET BOUGHT "+this.netTrades[t].volume_bought+" @ AVG "+InfrontUtil.roundFloat(this.netTrades[t][e.MWSBuyOrSell.SELL]/this.netTrades[t].volume_bought,n):"TOTAL NET BOUGHT "+this.netTrades[t].volume_bought+"@AVG"+(this.netTrades[t][e.MWSBuyOrSell.BUY]/this.netTrades[t].volume_bought).toFixed(e.UI.kDefaultDecimals)},t}();e.PositionsNetTradesHandler=i;var r=function(){};e.OrderItem=r;var a=function(){function t(t,n,i,a,s){this.orderStatusCallback=a,this.subscribes=new e.WidgetSubscriptions(i.getModel()),this.orderItem=new r,this.setValuesFromCache(t,n),this.getOrderStatusUnbind(t,n),this.setBindings(n)}return t.prototype.setBindings=function(t){var n=this;t.customBind(this.orderItem.orderkey,[e.MWSConstants.price],e.BindingFactory.createInlineBinding(function(e){n.orderItem.price=e,n.updateOrderStatus(n.orderItem.orderkey,t.get(n.orderItem.orderkey,"order_status"))})),t.customBind(this.orderItem.orderkey,[e.MWSConstants.volume],e.BindingFactory.createInlineBinding(function(e){n.orderItem.volume=e,n.updateOrderStatus(n.orderItem.orderkey,t.get(n.orderItem.orderkey,"order_status"))}))},t.prototype.setValuesFromCache=function(t,n){this.orderItem.orderkey=t,this.orderItem.orderStatus=n.get(t,"order_status"),this.orderItem.instrument=this.getInstrumentFromOrder(this.orderItem.orderkey,n),this.bidAskField=this.getBidAskFromOrderPosition(t,n),this.orderItem.price=n.get(t,["price"]),this.orderItem.buySell=n.get(t,e.MWSConstants.buy_or_sell),this.orderItem.portfolio=n.get(t,[e.MWSConstants.portfolio]),this.orderItem.volume=n.get(t,e.MWSConstants.volume),this.orderItem.order_type=n.get(t,[e.MWSConstants.order_type]),this.orderItem.currency=n.get(t,[e.MWSConstants.instrument,e.MWSConstants.currency]),this.orderItem.algoID=n.get(t,[e.MWSConstants.algo_id]),this.orderItem.algoID&&this.handleStrategyOrderType(t,n),this.orderMessage=this.createOrderMessage()},t.prototype.getBidAskFromOrderPosition=function(t,n){return n.get(t,e.MWSConstants.buy_or_sell)==e.MWSBuyOrSell.BUY?e.MWSConstants.ask:e.MWSConstants.bid},t.prototype.getOrderStatusUnbind=function(t,n){var i=this;return n.customBind(t,[e.MWSConstants.order_status],e.BindingFactory.createInlineBinding(function(e){i.updateOrderStatus(t,e)}))},t.prototype.updateOrderStatus=function(t,n){var i=this.orderItem.portfolio+"|"+this.orderItem.instrument.feed+"|"+this.orderItem.instrument.ticker;this.orderItem.orderStatus=n,this.orderMessage=this.createOrderMessage(),(-1==e.OrderStackWidget.activeStates.indexOf(n)||this.retVal)&&(this.subscribes.removeInstrument(this.orderItem.instrument),this.orderStatusCallback&&this.orderStatusCallback(this.retVal,null,i,t)),-1!=e.OrderStackWidget.activeStates.indexOf(n)&&(this.subscribes.addInstrument(this.orderItem.instrument),this.orderStatusCallback&&(this.retVal=this.orderStatusCallback(this.retVal,this.orderMessage,i,t)))},t.prototype.handleStrategyOrderType=function(t,n){var i=this;switch(this.orderItem.algoID){case e.AlgoID.STOP_LOSS:n.customBind(t,[e.MWSConstants.algo_params]+"/orderlimitpx",e.BindingFactory.createInlineBinding(function(e){i.orderItem.orderlimit=e}));break;case e.AlgoID.TRAILING_STOP_LOSS_PCT:case e.AlgoID.TRAILING_STOP_LOSS_TICK:n.customBind(t,[e.MWSConstants.algo_params]+"/traillimit",e.BindingFactory.createInlineBinding(function(e){i.orderItem.orderlimit=e}))}},t.prototype.createOrderMessage=function(){if("STRATEGY"!==this.orderItem.order_type)return(this.isActive()?"Active order":"Executed order")+": "+this.orderItem.buySell+" "+this.orderItem.volume+"@ "+this.orderItem.price+this.orderItem.currency;var t="";switch(this.orderItem.algoID){case e.AlgoID.STOP_LOSS:t="Stop loss";break;case e.AlgoID.TRAILING_STOP_LOSS_PCT:t="Trailing %";break;case e.AlgoID.TRAILING_STOP_LOSS_TICK:t="Trailing ticks"}return(this.isActive()?t+" order":"Executed order")+": "+this.orderItem.buySell+" "+this.orderItem.volume+"@"+this.orderItem.orderlimit+this.orderItem.currency},t.prototype.getOrderMessage=function(){return this.orderMessage},t.prototype.getInstrumentFromOrder=function(t,n){var i=n.get(t,[e.MWSConstants.instrument,e.MWSConstants.ticker]),r=n.get(t,[e.MWSConstants.instrument,e.MWSConstants.feed]);return new e.Instrument(r,i)},t.prototype.isActive=function(){return-1!=e.OrderStackWidget.activeStates.indexOf(this.orderItem.orderStatus)},t}();e.PositionsOrderItemHandler=a}(Infront||(Infront={})),function(e){var t=function(){function e(){}return e.INACTIVE_ORDER="INACTIVE_ORDER",e.ORDER_REQUEST="ORDER_REQUEST",e.EXCHANGE_ORDER="EXCHANGE_ORDER",e.INTERNAL_ORDER="INTERNAL_ORDER",e.DELETE_REQUEST="DELETE_REQUEST",e.OFFLINE_ORDER="OFFLINE_ORDER",e.DELETED_ORDER="DELETED_ORDER",e.MONITOR_ORDER="MONITOR_ORDER",e.EXECUTED_ORDER="EXECUTED_ORDER",e.WORKING_ORDER="WORKING_ORDER",e.MODTONEW_ORDER="MODTONEW_ORDER",e.DONE_FOR_DAY="DONE_FOR_DAY",e.REJECTED_ORDER="REJECTED_ORDER",e.EXPIRED_ORDER="EXPIRED_ORDER",e.PENDING_INSERT_ORDER="PENDING_INSERT_ORDER",e.PENDING_MODIFY_ORDER="PENDING_MODIFY_ORDER",e.PENDING_DELETE_ORDER="PENDING_DELETE_ORDER",e.CARE_REQUEST="CARE_REQUEST",e}();e.OrderStatus=t;var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stopLossOnly=!1,t.columns=["TICKER","VOLUME","PRICE","ORDER_STATUS","VALID_UNTIL","FILLED","BUY_OR_SELL"],t}return __extends(t,e),t}(e.TradingTableWidgetOptions);e.OrdersWidgetOptions=n;var i=function(r){function a(n,s,o){for(var l=this,c=-1,d=null,u=0;u<o.columns.length;u++){if(InfrontUtil.isString(o.columns[u])&&o.columns[u]==a.kCancelOrderColumn){c=u;break}if(InfrontUtil.isObject(o.columns[u])&&o.columns[u].name==a.kCancelOrderColumn){c=u,d=o.columns[u];break}}if(-1<c){var h={name:"CANCEL_ORDER",type:"computed",sortable:!1,heading:"",className:e.CssConstants.kFullButtonCellClass,computeFields:["ORDER_STATUS","READ_ONLY"],compute:function(t,n){return!n[1]&&-1<a.deletableOrderStatuses.indexOf(n[0])?'<span class="'+e.CssConstants.kDeleteButton+'"></span>':""},onClick:d&&d.onClick?d.onClick:function(e,t,n){""!=t&&l.showDeleteConfirmation(e,n.target)}};o.columns.splice(c,1,h)}return function(t,n){for(var r=-1,a=0;a<t.columns.length;a++){if(InfrontUtil.isString(t.columns[a])&&t.columns[a]==i.kModifyOrderColumn){r=a;break}if(InfrontUtil.isObject(t.columns[a])&&t.columns[a].name==i.kModifyOrderColumn){r=a;break}}if(-1<r){var s=e.FieldsHelper.createFieldFromSpec({name:i.kModifyOrderColumn,type:e.FieldType.Computed,sortable:!1,heading:"",className:e.CssConstants.kFullButtonCellClass,computeFields:["ORDER_STATUS","READ_ONLY"],compute:function(t,n){return'<span class="'+e.CssConstants.kModifyButton+'"></span>'},onClick:n});t.columns.splice(r,1,s)}}(o,function(e,t,n){""!=t&&l.modifyClicked(e)}),function(n,r){for(var a=-1,s=0;s<n.columns.length;s++){if(InfrontUtil.isString(n.columns[s])&&n.columns[s]==i.kActivateOrderColumn){a=s;break}if(InfrontUtil.isObject(n.columns[s])&&n.columns[s].name==i.kActivateOrderColumn){a=s;break}}if(-1<a){var o=e.FieldsHelper.createFieldFromSpec({name:i.kActivateOrderColumn,type:e.FieldType.Computed,sortable:!1,className:e.CssConstants.kFullButtonCellClass,computeFields:["ORDER_STATUS","READ_ONLY","PARENT_ORDER_ID"],compute:function(n,i){return i[0]!=t.INACTIVE_ORDER||i[1]||i[2]?"":'<span class="'+e.CssConstants.kActivateButton+'"></span>'},onClick:r});n.columns.splice(a,1,o)}}(o,function(e,t,n){""!=t&&l.activateClicked(e)}),function(n,r){for(var a=-1,s=0;s<n.columns.length;s++){if(InfrontUtil.isString(n.columns[s])&&n.columns[s]==i.kDeactivateOrderColumn){a=s;break}if(InfrontUtil.isObject(n.columns[s])&&n.columns[s].name==i.kDeactivateOrderColumn){a=s;break}}if(-1<a){var o=e.FieldsHelper.createFieldFromSpec({name:i.kDeactivateOrderColumn,type:e.FieldType.Computed,sortable:!1,className:e.CssConstants.kFullButtonCellClass,computeFields:["ORDER_STATUS","READ_ONLY","PARENT_ORDER_ID"],compute:function(n,i){return i[0]!=t.EXCHANGE_ORDER&&i[0]!=t.INTERNAL_ORDER||i[1]||i[2]?"":'<span class="'+e.CssConstants.kDeactivateButton+'"></span>'},onClick:r});n.columns.splice(a,1,o)}}(o,function(e,t,n){""!=t&&l.deactivateClicked(e)}),(l=r.call(this,n,"orders",s,o,["order_status","order_type","algo_id",e.MWSConstants.volume_filled],function(e){return l.filterStatus(e[0],e[3])&&l.filterType(e[1])&&l.filterAlgoId(e[2])},function(e){l.showDeleteAllConfirmation(e.target),e.stopPropagation()})||this).addEventListener(document.body,"click",function(){l.closePopup()}),l.unbindingManager=new e.UnbindingManager,l}return __extends(a,r),a.prototype.linkEvent=function(){},a.prototype.returnDefaultWidgetOptions=function(){return new n},a.prototype.modifyClicked=function(e){this.options.modifyClick&&this.options.modifyClick(this.infront.getTradingManager().getCurrentPortfolio().name,e)},a.prototype.activateClicked=function(t){var n=new e.ActivateOrderOptions;n.portfolio=this.infront.getTradingManager().getCurrentPortfolio().name,n.order_id=t,n.onError=function(e,t){return InfrontUtil.errorLogCallback(e,t)},n.onData=function(){},this.infront.activateOrder(n)},a.prototype.deactivateClicked=function(t){var n=new e.ActivateOrderOptions;n.portfolio=this.infront.getTradingManager().getCurrentPortfolio().name,n.order_id=t,n.onError=function(e,t){return InfrontUtil.errorLogCallback(e,t)},n.onData=function(){},this.infront.deactivateOrder(n)},a.prototype.closePopup=function(){this.popup&&(this.popup.destroy(),this.popup=null)},a.prototype.showDeleteAllConfirmation=function(t){var n=this;this.closePopup();var i=new e.YesNoPopupOptions;i.anchor=e.PopupAnchorLocation.TOP_RIGHT,i.arrow=!0,i.offsetX=-1*(t.offsetWidth/2-15),i.offsetY=4,i.onYes=function(){n.deleteAllOrders()},this.popup=new e.YesNoPopup(null,t,this.infrontUI.languageHandler.get(a.kLanguageKey,"confirmDeleteAll"),this.infrontUI.languageHandler,i)},a.prototype.deleteAllOrders=function(){var e=this;this.items.foreach(function(t){var n=e.infront.getCache().get(t,"order_id");e._deleteOrder(n)})},a.prototype.showDeleteConfirmation=function(t,n){var i=this;this.closePopup();var r=new e.YesNoPopupOptions;r.anchor=e.PopupAnchorLocation.TOP_RIGHT,r.arrow=!0,r.offsetX=8,r.onYes=function(){i._deleteOrder(t)},this.popup=new e.YesNoPopup(null,n,this.infrontUI.languageHandler.get(a.kLanguageKey,"confirmDelete"),this.infrontUI.languageHandler,r)},a.prototype._deleteOrder=function(t){var n=e.CacheKeyFactory.createOrderIdKey(this.portfolioNameObs.get(),t),i=this.cache.get(n,"order_status");if(-1<a.deletableOrderStatuses.indexOf(i)){var r=new e.DataOptions;r.onError=InfrontUtil.errorLogCallback,r.onData=function(e){return IDS.log("OrdersWidget: ",e)},this.infront.trDeleteOrder(this.portfolioNameObs.get(),t,r)}},a.prototype.rowClicked=function(t){if(this.options.onOrderSelected){var n=e.CacheKeyFactory.createOrderIdKey(this.portfolioNameObs.get(),t);this.options.onOrderSelected(this.portfolioNameObs.get(),t,this.cache.getInstrument(n))}},a.prototype.createArrayCacheKey=function(t){return e.CacheKeyFactory.createPortfolioOrdersKey(t)},a.prototype.deleteOrder=function(e){var t=this;this.items.foreach(function(n){var i=t.infront.getCache().get(n,"order_id");e==i&&t._deleteOrder(e)})},a.prototype.getRowId=function(e){return this.cache.get(e,"order_id")},a.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n,[e.FieldSource.Order,e.FieldSource.Snapshot,e.FieldSource.Unknown])},a.prototype.filterStatus=function(e,n){var i=!0,r=!0;return this.options.showStatuses&&(i=i&&-1<this.options.showStatuses.indexOf(e),r=-1<this.options.showStatuses.indexOf(t.EXECUTED_ORDER)),this.options.hideStatuses&&(i=i&&-1==this.options.hideStatuses.indexOf(e),r=r&&-1==this.options.hideStatuses.indexOf(t.EXECUTED_ORDER)),r&&-1<a.partialFillExecutedStatuses.indexOf(e)&&0<n&&(i=!0),i},a.prototype.filterType=function(e){var t=!0;return this.options.showTypes&&(t=t&&-1<this.options.showTypes.indexOf(e)),this.options.hideTypes&&(t=t&&-1==this.options.hideTypes.indexOf(e)),t},a.prototype.filterAlgoId=function(e){var t=!0;return this.options.stopLossOnly&&(t=null!=e),t},a.prototype.createRow=function(t,n){var i=r.prototype.createRow.call(this,t,n),a=[];return a.push(this.cache.customBind(t,e.MWSConstants.buy_or_sell,new e.ClassBinding(i,e.CssConstants.kTableRowBuy,e.MWSBuyOrSell.isBuy))),a.push(this.cache.customBind(t,e.MWSConstants.buy_or_sell,new e.ClassBinding(i,e.CssConstants.kTableRowSell,e.MWSBuyOrSell.isSell))),this.unbindingManager.registerUnbinds(i,a),i},a.prototype.htmlElementTreeRemoved=function(e,t,n){r.prototype.htmlElementTreeRemoved.call(this,e,t,n),this.unbindingManager.unbind(e,!1)},a.kLanguageKey="orders",a.kCancelOrderColumn="CANCEL_ORDER",a.kModifyOrderColumn="MODIFY_ORDER",a.kActivateOrderColumn="ACTIVATE_ORDER",a.kDeactivateOrderColumn="DEACTIVATE_ORDER",a.deletableOrderStatuses=[t.INACTIVE_ORDER,t.EXCHANGE_ORDER,t.INTERNAL_ORDER,t.OFFLINE_ORDER,t.MONITOR_ORDER,t.WORKING_ORDER,t.MODTONEW_ORDER,t.DONE_FOR_DAY],a.partialFillExecutedStatuses=[t.EXPIRED_ORDER,t.DELETED_ORDER,t.REJECTED_ORDER],a}(e.TradingTableWidgetBase);e.OrdersWidget=i}(Infront||(Infront={})),function(e){var t,n;(n=t=e.SpecialExpiryDate||(e.SpecialExpiryDate={}))[n.All=0]="All",n[n.FirstMonthly=1]="FirstMonthly",n[n.SecondMonthly=2]="SecondMonthly",n[n.ThirdMonthly=3]="ThirdMonthly",n[n.AllWeekly=4]="AllWeekly",n[n.FutureForward=5]="FutureForward";var i=function(e,t,n,i){this.callInstrument=e,this.putInstrument=t,this.expiry=n,this.strike=i,this.rank=0};e.PutCallPair=i;var r=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.showTitle=!0,n.showTabs=!1,n.showFutureForward=!1,n.showUnderlyingChooser=!0,n.showRangeChooser=!0,n.showSymbolPanel=!1,n.showLastInTitle=!0,n.showAllTab=!1,n.columns=["LAST","VOLUME","OPEN_INTEREST","TIME","BID","ASK","STRIKE_PRICE","EXPIRY_DATE"],n.sortable=!0,n.defaultSortedColumn=6,n.defaultSortOrder=e.SortOrder.Asc,n.linkAction=e.LinkAction.None,n}return __extends(n,t),n}(e.CommonListOptions);e.PutCallWidgetOptions=r;var a=function(n){function a(t,i,r){var s=n.call(this,t,i,a.kLanguageKey,r)||this;return s.instrumentsPairs=new e.ObservableArray,s.cacheStorage={},s.feedMetaData={},s.feedDescription="",s.underlyings=[],s.expiries=[],s.expiriesFutureForward=[],s.tabIgnoreChange=!1,s.widgetSubTitle=new e.Observable(""),s.currentSymbolLastValue=new e.Observable(null),s.targetManager=new InfrontUtil.LinkTargetManager,s.isinTargetManager=new InfrontUtil.LinkTargetManager,s.showProgressIndicator=new e.Observable,s.showProgressIndicator.set(!1),s.underlyingBinding=new e.SelectInputBinding(!1),s.underlyingBinding.observe(function(e){return s.underlyingChanged(e)}),s.underlyingList=new e.ObservableArray,s.expiryVisible=new e.Observable(!0),s.expiryBinding=new e.SelectInputBinding,s.expiryBinding.observe(function(e){return s.expiryChanged(e)}),s.expiryList=new e.ObservableArray,s.rangeVisible=new e.Observable(r.showRangeChooser),s.rangeBinding=new e.SelectInputBinding,s.rangeBinding.observe(function(e){return s.rangeChanged(e)}),s.rangeList=new e.ObservableArray,s.rangeList.push(s.languageHandler.get(a.kLanguageKey,"none")),s.rangeList.push(s.languageHandler.get(a.kLanguageKey,"activeView5")),s.rangeList.push(s.languageHandler.get(a.kLanguageKey,"activeView7")),s.underlyingChooserVisible=1==s.options.showUnderlyingChooser,s}return __extends(a,n),a.prototype.setListItems=function(){this.itemsToShow=new e.ContinouslySortedCachedInstrumentObservableArray(this.options.sortable?this.columnManager.currentlySortedColumn:null,this.options.sortable&&this.secondarySortingColumn?this.secondarySortingColumn:null,this.cache),this.instrumentsToShow=this.itemsToShow,this.columnManager.updateDefaultContent()},a.prototype.setColumnManager=function(){var t=this;this.getStoredColumn(),this.initColumns(),this.options.loadSavedColumns&&(e.ColumnManager._loadColumns(this.getStoredValue(e.CommonListWidgetBase.kMyColumnsKey),this.options),this.afterLoadCallback&&this.afterLoadCallback()),this.columnManager=new e.ColumnManager(this.options,this.infront,this.infrontUI,null,this.subscribes),this.columnManager.setCacheKeyConverter(function(e,n){return t.convertCacheKey(e,n)}),this.columnManager.setLinkTriggerCallback=function(e){},this.primarySortingColumn=this.columnManager.findColumn("_STRIKE"),this.secondarySortingColumn=this.columnManager.findColumn("_EXPIRY_DATE"),this.primarySortingColumn||(this.primarySortingColumn=this.columnManager.findColumn("TICKER"))},a.prototype.getColumnManager=function(){return this.columnManager},a.prototype.returnDefaultWidgetOptions=function(){return new r},a.prototype.newInit=function(){var t=this;this.options.feed&&this.loadFeed(this.options.feed),this.currentSymbolLastBinding=new e.ObservableBinding(function(e){t.currentSymbolLastValue.set(e),t.rangeVisible.get()&&0!=t.rangeBinding.getSelectedIndex()&&t.showInstruments()}),this.progressIndicator=new e.ProgressIndicator(this.element),this.progressIndicator.observe(this.showProgressIndicator),n.prototype.newInit.call(this)},a.prototype.newBuildUI=function(){var t=this;this.widgetTitle=null,this.widgetTitle=this.options.widgetTitle?this.options.widgetTitle:this.languageHandler.get(a.kLanguageKey,"widgetTitle"),this.widgetSubTitle.set("");var i=e.WidgetDOMFactory.create_WPutCall_DOM(this.element,this.widgetTitle,this.widgetSubTitle,this.underlyingBinding,this.underlyingList,this.underlyingChooserVisible,this.expiryBinding,this.expiryList,this.expiryVisible,this.rangeBinding,this.rangeList,this.rangeVisible,this.languageHandler),r=this.createRootUI();r.headerContainer.appendChild(this.createHeaderRow()),this.options.showTitle||(i.titleEl.hidden=!0),i.tableEl.appendChild(r.root),this.tabBarEl=i.tabBarEl,this.updateTabBar(),this.createSymbolPanel(i.symbolPanelEl),this.createExtraSubtitle(i.subTitleExtraEl),this.rangeBinding.setSelected(this.getStoredValue(a.kMyRangeKey)||0),this.binding=new e.ArrayBinding(r.bodyContainer,this,this),this.instrumentsToShow.observe(this.binding),this.unbindingManager.registerUnbind(r.bodyContainer,function(){t.instrumentsToShow.unbind(t.binding)}),this.columnManager.updateDefaultContent(),this.fillUnderlyings(),n.prototype.newBuildUI.call(this)},a.prototype.newSubscribe=function(){this.columnManager.subscribe()},a.prototype.newUnsubscribe=function(){this.columnManager.unsubscribe(),this.subscribes.removeAllFields()},a.prototype.newDestroyUI=function(){this.clear(),this.underlyings=[],this.underlyingList.clear(),n.prototype.newDestroyUI.call(this)},a.prototype.convertCacheKey=function(e,t){return e&&"-"==e[0]&&"PUT"!=t.id?"_EXPIRY_DATE"==t.name||"_STRIKE"==t.name?e.replace("-",""):"-":"PUT"==t.id?this.cacheStorage[e]:e},a.prototype.initColumns=function(){var t,n,i,r,s,o=this,l=[],c=[],d=function(e,t,n){void 0===n&&(n=!0);var i=InfrontUtil.deepCopy(e);if(i.id="CALL",t&&(i.heading=o.languageHandler.get(a.kLanguageKey,"call")+" "+o.languageHandler.get("columns","TICKER")),l.push(i),n){var r=InfrontUtil.deepCopy(e);r.id="PUT",t&&(r.heading=o.languageHandler.get(a.kLanguageKey,"put")+" "+o.languageHandler.get("columns","TICKER")),c.unshift(r)}},u=function(t){for(var n=0,i=0,r=!1,a=0;a<t.length;a++){var s=t[a];if("CALL"==s.id)switch(s.name.toLowerCase()){case e.MWSConstants.bid:case e.MWSConstants.ask:case"_strike":case"_expiry_date":break;default:n=a}else{if("PUT"!=s.id){IDS.DEBUG_WIDGET_PUTCALLWIDGET&&IDS.log("PutCallWidget: Error structure"),o.initColumns();break}switch(i=a,s.name.toLowerCase()){case e.MWSConstants.bid:case e.MWSConstants.ask:i=a+1;break;default:r=!0}if(r)break}}return{callEndIndex:n,putStartIndex:i}},h=function(t){var n=-1,i=-1,r=-1,a=-1,s=b;if(y!=b-1){for(var l=y;l<b;l++)switch(o.columns[l].name.toLowerCase()){case e.MWSConstants.bid:-1==i&&(i=l);break;case e.MWSConstants.ask:-1==n&&(n=l);break;case"_strike":-1==r&&(r=l);break;case"_expiry_date":-1==a&&(a=l)}switch(t.toLowerCase()){case"bid":0<=n?s=n:0<=r?s=r:0<=a&&(s=a);break;case"ask":0<=i?s=i+1:0<=r?s=r:0<=a&&(s=a);break;case"_strike":0<=a?s=a:0<=n?s=n+1:0<=i&&(s=i+1);break;case"_expiry_date":0<=r?s=r+1:0<=n?s=n+1:0<=i&&(s=i+1)}}return s};if(this.options.availableColumns&&0<this.options.availableColumns.length)for(var p=0;p<this.options.availableColumns.length;p++){var m=this.options.availableColumns[p],g={};switch(InfrontUtil.isString(m)?g.name=m:g=m,g.name.toLowerCase()){case e.MWSConstants.bid:case e.MWSConstants.ask:g.frozen="middle";break;case e.MWSConstants.strike_price:case"strike":g.name="_STRIKE",g.id="CALL",g.frozen="middle",g.className=g.className+"  cell-w-put-call__columns--strike",g.heading=this.languageHandler.get("columns","STRIKE"),g.dataType=e.DataType.Numeric,g.type="computed",g.computeFields=["STRIKE"],g.compute=function(e,t){return e.strike};break;case e.MWSConstants.expiry_date:case"expiry":g.name="_EXPIRY_DATE",g.id="CALL",g.frozen="middle",g.heading=this.languageHandler.get("columns","EXPIRY"),g.dataType=e.DataType.DateOnly,g.type="computed",g.computeFields=["EXPIRY_DATE"],g.compute=function(e,t){return t[0]?t[0]:a.numberToDate(""+e.expiry)}}this.options.availableColumns[p]=g}for(var f=0,v=this.options.columns;f<v.length;f++)switch(m=v[f],g={},InfrontUtil.isString(m)?g.name=m:g=m,g.name.toLowerCase()){case e.MWSConstants.bid:t=g;break;case e.MWSConstants.ask:n=g;break;case e.MWSConstants.strike_price:i=g;break;case e.MWSConstants.expiry_date:r=g;break;case e.MWSConstants.ticker:d(g,!0);break;default:d(g,!1)}var y=l.length-1,b=l.length;t&&(t.frozen="middle",d(t,!1),c[0].frozen="middle",b+=2),n&&(n.frozen="middle",d(n,!1),c[0].frozen="middle",b+=2),t&&n&&c.splice(0,0,c.splice(1,1)[0]),i&&(d(i={name:"_STRIKE",id:"CALL",frozen:"middle",className:"cell-w-put-call__columns--strike",heading:this.languageHandler.get("columns","STRIKE"),dataType:e.DataType.Numeric,type:"computed",computeFields:["STRIKE"],compute:function(e,t){return e.strike}},!1,!1),b++),r&&(d(r={name:"_EXPIRY_DATE",id:"CALL",frozen:"middle",heading:this.languageHandler.get("columns","EXPIRY"),dataType:e.DataType.DateOnly,type:"computed",computeFields:["EXPIRY_DATE"],compute:function(e,t){return t[0]?InfrontUtil.DateFromDateNu(t[0]):InfrontUtil.DateFromDateNu(e.expiry)}},!1,!1),b++),s=l.concat(c),this.options.columns=s;var T,S=this.options.onColumnMoved,C=this.options.onColumnMoving,I=this.options.onColumnInsert,_=this.options.onColumnsResized,M=this.options.onResetColumns,E=this.options.onColumnDeleted;this.options.onColumnsChanged&&(T=this.options.onColumnsChanged,this.options.onColumnsChanged=function(){});var w=!0;this.options.onColumnInsert=function(e,t){if(w){if(w=!1,InfrontUtil.isString(e)&&(e={name:e}),e.id="CALL",o.columns[t].id="CALL","_STRIKE"==e.name||"_EXPIRY_DATE"==e.name)o.moveColumn(t,h(e.name)),b++;else{if("TICKER"==e.name){o.columns[t].heading=o.languageHandler.get(a.kLanguageKey,"call")+" "+o.languageHandler.get("columns","TICKER");var n=o.columns[t].element;n&&(n.innerText=o.languageHandler.get(a.kLanguageKey,"call")+" "+o.languageHandler.get("columns","TICKER"))}var i,r;"BID"==e.name||"ASK"==e.name?(i=h(e.name),r=y+1+(b+1)-i,"BID"!=o.columns[i-1].name&&"ASK"!=o.columns[i].name||r++,b++):(i=1+y++,r=b+1),o.moveColumn(t,i),b++;var s=InfrontUtil.deepCopy(e);InfrontUtil.isString(e)&&(s={name:s}),s.id="PUT","TICKER"==e.name&&(s.heading=o.languageHandler.get(a.kLanguageKey,"put")+" "+o.languageHandler.get("columns","TICKER")),o.addCustomColumn(s),o.moveColumn(o.columns.length-1,r)}w=!0,I&&I(e,t),T&&T()}},this.options.onColumnMoving=function(e,t,n){var i=!0;return"_STRIKE"!=e.name&&"_EXPIRY_DATE"!=e.name&&"BID"!=e.name&&"ASK"!=e.name&&(i="CALL"==e.id?n<=y:b<=n),C?i&&C(e,t,n):i},this.options.onColumnMoved=function(e,t,n){w&&(w=!1,e.id,o.moveColumn(y+b-t,y+b-n),w=!0,S&&S(e,t,n),T&&T())},this.options.onColumnsResized=function(e){if(w){w=!1;for(var t=0,n=e;t<n.length;t++){var i=n[t],r=o.columns[i];r.id,o.resizeColumn(y+b-i,r.width)}w=!0,_&&_(e)}},this.options.onResetColumns=function(){var e=u(o.options.columns);y=e.callEndIndex,b=e.putStartIndex,M&&M(),T&&T()},this.afterLoadCallback=function(){var e=o.options.columns;o.options.hasOwnProperty("storedColumns")&&(e=o.options.storedColumns);var t=u(e);y=t.callEndIndex,b=t.putStartIndex},this.options.onColumnDeleted=function(e,t){if(w){if(w=!1,"_STRIKE"==e.name||"_EXPIRY_DATE"==e.name)b--;else if("BID"==e.name||"ASK"==e.name){var n=y+b-t;"BID"==e.name&&o.columns[y+b-t].name!=e.name?n-=1:"ASK"==e.name&&o.columns[y+b-t].name!=e.name&&(n+=1),o.removeColumn(n),b-=2}else o.removeColumn(y+b-t-1),y--,b--;w=!0}E&&E(e,t),T&&T()}},a.prototype.fillUnderlyings=function(){var t=this,n=new e.DataOptions;n.onData=function(n){t.showProgressIndicator.set(!0);var i=n;t.underlyings=[],t.underlyingList.clear();for(var r=0,a=i;r<a.length;r++)if((c=a[r][e.MWSConstants.underlying])&&c[e.MWSConstants.feed]&&c[e.MWSConstants.ticker]){t.underlyings.push(c);var s=c[e.MWSConstants.ticker]+(c.descr?" - "+c.descr:"");t.underlyingList.push({label:s,index:t.underlyings.length-1})}if(t.underlyingList.sort(function(e,t){var n=e.label,i=t.label;return n<i?-1:i<n?1:0}),t.options.defaultUnderlying){for(var o=!1,l=0;l<t.underlyingList.length();l++){var c;if((c=t.underlyings[t.underlyingList.item(l).index])[e.MWSConstants.feed]==t.options.defaultUnderlying.feed&&c[e.MWSConstants.ticker]==t.options.defaultUnderlying.ticker){t.underlyingBinding.setSelected(l),o=!0;break}}o||t.underlyingBinding.setSelected(0)}else 0<t.underlyingList.length()&&t.underlyingBinding.setSelected(0);t.showProgressIndicator.set(!1)},n.onError=InfrontUtil.errorLogCallback,this.infront.underlyings(this.options.feed,void 0,void 0,n)},a.prototype.underlyingChanged=function(n){var i=this;this.expiryList.clear(),this.expiries=[],this.expiriesFutureForward=[],this.clear(),this.tabBar&&this.tabBar.destroy(),this.activeItem=null;var r=this.underlyingList.item(n).index,s=new e.Instrument(this.underlyings[r][e.MWSConstants.feed],this.underlyings[r][e.MWSConstants.ticker]);this.currentUnderlying&&this.linkEvent(s),this.currentUnderlying=s;var o="";this.options.showTitle&&this.widgetTitle&&(o=" | "),o+=s.ticker,this.widgetSubTitle.set(o);var l=function(t){switch(t){case e.SymbolSubType.OptionPut:case e.SymbolSubType.OptionPutWarrant:case e.SymbolSubType.OptionBarrierPut:case e.SymbolSubType.OptionBinaryAonPut:case e.SymbolSubType.OptionBinaryConPut:case e.SymbolSubType.OptionBinaryGapPut:case e.SymbolSubType.OptionCall:case e.SymbolSubType.OptionCallWarrant:case e.SymbolSubType.OptionBarrierCall:case e.SymbolSubType.OptionBinaryAonCall:case e.SymbolSubType.OptionBinaryConCall:case e.SymbolSubType.OptionBinaryGapCall:return!0;default:return!1}},c=function(t){switch(t){case e.SymbolSubType.OptionFuture:case e.SymbolSubType.OptionForward:return!0;default:return!1}},d=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];if(t==r.expiry)return r}return null};if(s){this.updateSymbolPanel(s),this.updateLastBinding(s),this.updateExtraSubtitle(s);var u=new e.DataOptions;u.onError=InfrontUtil.errorLogCallback,u.onData=function(e){i.expiryList.clear(),i.expiries=[];for(var n=!(i.expiriesFutureForward=[]),r=!1,o=-1,u=0,h=e;u<h.length;u++){var p=h[u],m={index:i.expiries.length,underlyingFeed:s.feed,underlyingTicker:s.ticker,expiry:p.option?p.option.expiry:null,expiryDate:p.option?a.numberToDate(""+p.option.expiry):null,expiryType:p.option?p.option.expiryType:0,subtype:p.symbolSubType,futureForward:c(p.symbolSubType),weekly:!!p.option&&32==p.option.expiryType};if(n=n||m.futureForward,m.futureForward)d(i.expiriesFutureForward,m.expiry)||(m.index=i.expiriesFutureForward.length,i.expiriesFutureForward.push(m));else if(!(m.expiry<Number(InfrontUtil.getTradingAlgoParamDateString(new Date)))&&l(m.subtype)&&!d(i.expiries,m.expiry)){var g=InfrontUtil.formatDateTime(m.expiryDate,InfrontUtil.formatSettings.longDateFormat,i.languageHandler);m.weekly?(g+=" (Weekly)",r=!0):o<0&&(o=i.expiryList.length()),i.expiries.push(m),i.expiryList.push({label:g,value:m.expiry,index:i.expiries.length-1})}}i.expiryList.sort(function(e,t){var n=e.value,i=t.value;return n<i?-1:i<n?1:0});for(var f=i.expiryList.length(),v=0;v<f;v++)if(!(m=i.expiries[i.expiryList.item(v).index]).weekly&&!m.futureForward){i.expiryBinding.setSelected(v);break}var y=0;i.options.showAllTab&&i.expiryList.insert({label:"&lt"+i.languageHandler.get(a.kLanguageKey,"all")+"&gt",index:-2,expiry:t.All},y++),i.expiryList.insert({label:"&lt"+i.languageHandler.get(a.kLanguageKey,"expiryFirstMonth")+"&gt",index:-2,expiry:t.FirstMonthly},y++),i.expiryList.insert({label:"&lt"+i.languageHandler.get(a.kLanguageKey,"expirySecondMonth")+"&gt",index:-2,expiry:t.SecondMonthly},y++),i.expiryList.insert({label:"&lt"+i.languageHandler.get(a.kLanguageKey,"expiryThirdMonth")+"&gt",index:-2,expiry:t.ThirdMonthly},y++),r&&i.expiryList.insert({label:"&lt"+i.languageHandler.get(a.kLanguageKey,"weekly")+"&gt",index:-2,expiry:t.AllWeekly},y++),i.options.showFutureForward&&n&&i.expiryList.push({label:"&lt"+i.languageHandler.get(a.kLanguageKey,"forward")+"&gt",index:-2,expiry:t.FutureForward}),i.updateTabBar()},this.infront.expiryDates(this.options.feed,s.feed,s.ticker,u)}},a.prototype.requestOptions=function(t,n,r,a,s){var o=this;void 0===s&&(s=!1),this.showProgressIndicator.set(!0);var l=new e.DataOptions;l.onData=function(t){for(var n,r={},a=[],l=0,c=0,d=t;c<d.length;c++){var u=d[c];if(u.instrument)if(u.option&&u.option.expiry){var h=""+((n=u).option.expiry||"")+(n.option.strike||++l);r[h]||(r[h]=new i(null,null,u.option.expiry,u.option.strike)),u.symbolSubType==e.SymbolSubType.OptionPut?r[h].putInstrument=u.instrument:r[h].callInstrument=u.instrument}else a.push(new i(u.instrument,null,0,0))}for(var p in r)a.unshift(r[p]);o.addInstruments(a),s&&o.showInstruments(),o.showProgressIndicator.set(!1)},l.onError=function(e,t){s&&o.showInstruments(),o.showProgressIndicator.set(!1),IDS.DEBUG_WIDGET_PUTCALLWIDGET&&IDS.log("PutCallWidget: "+t)},this.infront.underlyingOptions(this.options.feed,t,n,r,a,null,l)},a.prototype.showHideSelectors=function(e,n){if(e)switch(n){case t.All:case t.FirstMonthly:case t.SecondMonthly:this.options.showTabs&&this.expiryVisible.set(!0),this.rangeVisible.set(!1);break;case t.AllWeekly:this.options.showTabs&&this.expiryVisible.set(!1),this.rangeVisible.set(!1);break;case t.FutureForward:this.options.showTabs&&this.expiryVisible.set(!1),this.rangeVisible.set(this.options.showRangeChooser)}else this.options.showTabs&&this.expiryVisible.set(!1),this.rangeVisible.set(this.options.showRangeChooser)},a.prototype.expiryChanged=function(e){this.clear();var n,i=this.expiryList.item(e).index,r=[],a=[];if(0<=i)this.showHideSelectors(!1),n=this.expiries[i],this.requestOptions(n.underlyingFeed,n.underlyingTicker,[n.expiry],null,!0);else if(-2==i)switch(this.showHideSelectors(!0,this.expiryList.get()[e].expiry),n=this.expiries[0],this.expiryList.get()[e].expiry){case t.All:if(this.options.showAllTab){for(var s=0;s<this.expiries.length;s++)r.push(this.expiries[s].expiry);if(this.options.showFutureForward)for(s=0;s<this.expiriesFutureForward.length;s++)a.push(this.expiriesFutureForward[s].expiry);this.requestOptions(n.underlyingFeed,n.underlyingTicker,r,a,!0)}break;case t.FirstMonthly:var o=Number(InfrontUtil.getTradingAlgoParamDateString(InfrontUtil.addDays(new Date,30)));for(s=0;s<this.expiries.length;s++)this.expiries[s].expiry<=o&&!1===this.expiries[s].weekly&&r.push(this.expiries[s].expiry);this.requestOptions(n.underlyingFeed,n.underlyingTicker,r,null,!0);break;case t.SecondMonthly:o=Number(InfrontUtil.getTradingAlgoParamDateString(InfrontUtil.addDays(new Date,30)));var l=Number(InfrontUtil.getTradingAlgoParamDateString(InfrontUtil.addDays(new Date,60)));for(s=0;s<this.expiries.length;s++)o<this.expiries[s].expiry&&this.expiries[s].expiry<=l&&!1===this.expiries[s].weekly&&r.push(this.expiries[s].expiry);this.requestOptions(n.underlyingFeed,n.underlyingTicker,r,null,!0);break;case t.ThirdMonthly:l=Number(InfrontUtil.getTradingAlgoParamDateString(InfrontUtil.addDays(new Date,60)));var c=Number(InfrontUtil.getTradingAlgoParamDateString(InfrontUtil.addDays(new Date,90)));for(s=0;s<this.expiries.length;s++)l<this.expiries[s].expiry&&this.expiries[s].expiry<=c&&!1===this.expiries[s].weekly&&r.push(this.expiries[s].expiry);this.requestOptions(n.underlyingFeed,n.underlyingTicker,r,null,!0);break;case t.AllWeekly:for(s=0;s<this.expiries.length;s++)!0===this.expiries[s].weekly&&r.push(this.expiries[s].expiry);this.requestOptions(n.underlyingFeed,n.underlyingTicker,r,null,!0);break;case t.FutureForward:if(this.options.showFutureForward){for(s=0;s<this.expiriesFutureForward.length;s++)!0===this.expiriesFutureForward[s].futureForward&&a.push(this.expiriesFutureForward[s].expiry);this.requestOptions(n.underlyingFeed,n.underlyingTicker,null,a,!0)}}this.options.showTabs&&this.tabBar&&(this.tabIgnoreChange=!0,this.tabBar.setSelectedId(this.expiryList.item(e).label),this.tabIgnoreChange=!1)},a.prototype.updateLastBinding=function(t){this.currentSymbolLastUnsub&&(this.unbinds.splice(this.unbinds.indexOf(this.currentSymbolLastUnsub),1),this.currentSymbolLastUnsub()),this.currentSymbolLastUnsub=this.cache.customBind(e.CacheKeyFactory.createInstrumentKey(t),["LAST"],this.currentSymbolLastBinding),this.unbinds.push(this.currentSymbolLastUnsub)},a.prototype.reCalcRanges=function(e){var t,n,i,r=0,a=Number.MAX_VALUE,s=0,o=-a,l=0;this.activeItem=null;for(var c=0;c<this.instrumentsPairs.data.length;c++)if((r=(t=this.instrumentsPairs.data[c]).strike-e)<0)if(o<r){o=r,t.rank=-1,n=t;for(var d=0;d<c;d++)(m=(p=this.instrumentsPairs.data[d]).strike-e)<0&&(p.rank-=1);l-=1}else{var u=1,h=!1;for(d=c-1;0<=d;d--)(m=(p=this.instrumentsPairs.data[d]).strike-e)<0&&m<r&&(!h||t.rank<p.rank)&&(u=m,t.rank=p.rank,h=!0),m==r&&n.strike==t.strike&&n!=t&&(n=t);if(1!=u){for(d=c-1;0<=d;d--)(m=(p=this.instrumentsPairs.data[d]).strike-e)<0&&t!=p&&p.rank<=t.rank&&(p.rank-=1);l-=1}else t.rank=--l}else if(r<a){for(a=r,t.rank=1,i=t,d=0;d<c;d++)0<=(m=(p=this.instrumentsPairs.data[d]).strike-e)&&(p.rank+=1);s+=1}else{for(u=-1,h=!1,d=c-1;0<=d;d--)0<=(m=(p=this.instrumentsPairs.data[d]).strike-e)&&r<m&&(!h||t.rank>p.rank)&&(u=m,t.rank=p.rank,h=!0);if(-1!=u){for(d=c-1;0<=d;d--){var p,m;0<=(m=(p=this.instrumentsPairs.data[d]).strike-e)&&t!=p&&p.rank>=t.rank&&(p.rank+=1)}s+=1}else t.rank=++s}n&&i?this.activeItem=Math.abs(n.strike-e)<Math.abs(i.strike-e)?n:i:n?this.activeItem=n:i&&(this.activeItem=i)},a.prototype.rangeChanged=function(e){var t=0==e?0:1==e?5:7;this.lastRange!=t&&this.store(a.kMyRangeKey,e),this.showInstruments()},a.prototype.loadFeed=function(e){this.showProgressIndicator.set(!0),this.clear();var t=this.getSyncFeedMetadata(e);t&&(this.feedMetaData[t.feed]=t,this.feedDescription=t.description),this.showProgressIndicator.set(!1)},a.prototype.addInstruments=function(e){if(e&&0<e.length){for(var t=[],n=0,i=e;n<i.length;n++){var r,a=i[n],s=!1,o=a.callInstrument;if(o&&(this.feedMetaData.hasOwnProperty(o.feed.toString())||(r=this.getSyncFeedMetadata(o.feed))&&(this.feedMetaData[o.feed]=r),t.push(o),s=!0),o=a.putInstrument)this.feedMetaData.hasOwnProperty(o.feed.toString())||(r=this.getSyncFeedMetadata(o.feed))&&(this.feedMetaData[o.feed]=r),t.push(o),s=!0;s&&this.doAddInstrument(a)}0<t.length&&this.subscribes.addInstruments(t)}},a.prototype.showInstruments=function(){var e=this,t=function(){if(100<e.instrumentsPairs.data.length){var t=e.instrumentsPairs.data.slice(0,100);e.instrumentsToShow.replaceWith(t),e.columnManager.updateDefaultContent(),setTimeout(function(){for(var t=0,n=e.instrumentsPairs.data.slice(100,e.instrumentsPairs.data.length);t<n.length;t++){var i=n[t];e.instrumentsToShow.insert(i,0)}e.columnManager.updateDefaultContent()},10)}else e.instrumentsToShow.replaceWith(e.instrumentsPairs.data),e.columnManager.updateDefaultContent()};if(this.rangeVisible.get()){var n=this.rangeBinding.getSelectedIndex();if(0<=n)switch(n){case 0:this.activeItem=null,this.lastRange=0,t();break;case 1:case 2:var i=this.currentSymbolLastValue.get();if(null!=i){this.reCalcRanges(i);var r=1==n?5:7,a=this.activeItem&&this.activeItem.rank<0?-(r+1)+(this.activeItem.rank+1):-r,s=this.activeItem&&0<this.activeItem.rank?r+1:r+(this.activeItem?this.activeItem.rank+1:0);if(this.activeItem!=this.lastActiveItem||this.lastRange!=r){this.lastRange=r,this.lastActiveItem=this.activeItem;var o=this.instrumentsPairs.data.filter(function(e){return e.rank<0?e.rank>=a:e.rank<=s});this.instrumentsToShow.replaceWith(o),this.columnManager.updateDefaultContent()}}else t()}}else this.activeItem=null,this.lastRange=0,t()},a.prototype.doAddInstrument=function(t){if(t){this.instrumentsPairs.push(t),t.callInstrument&&(t.callInstrument.expiry=t.expiry,t.callInstrument.strike=t.strike),t.putInstrument&&(t.putInstrument.expiry=t.expiry,t.putInstrument.strike=t.strike);var n=t.callInstrument;n&&(this.columnManager.createComputedFieldsInCache(n,e.CacheKeyFactory.createInstrumentKey(n)),this.cache.update(e.CacheKeyFactory.createInstrumentKey(n),{instrument:n},!1)),(n=t.putInstrument)&&(this.columnManager.createComputedFieldsInCache(n,e.CacheKeyFactory.createInstrumentKey(n)),this.cache.update(e.CacheKeyFactory.createInstrumentKey(n),{instrument:n},!1))}},a.prototype.clear=function(){this.clearVisible(),this.instrumentsPairs.clear()},a.prototype.clearVisible=function(){this.instrumentsToShow&&0<this.instrumentsToShow.length()&&this.subscribes.removeAllInstruments(),this.instrumentsToShow.clear(),this.cacheStorage={},this.columnManager.updateDefaultContent()},a.prototype.getStoredColumn=function(){var t=this.getStoredValue(a.kMySortingColumnKey);if(t){var n=t.substr(0,t.length-1),i=t.substr(t.length-1);this.options.defaultSortedColumn=n,"0"==i?this.options.defaultSortOrder=e.SortOrder.Desc:"1"==i&&(this.options.defaultSortOrder=e.SortOrder.Asc)}},a.prototype.dateStringCompareFunction=function(t,n,i){return i==e.SortOrder.Desc?Date.parse(n)-Date.parse(t):Date.parse(t)-Date.parse(n)},a.prototype.sortColumnChanged=function(t,n,i){var r,s,o;if(t&&(o=this.primarySortingColumn&&this.secondarySortingColumn?t.name==this.primarySortingColumn.name?(r=this.primarySortingColumn,s=this.secondarySortingColumn,this.secondarySortingColumn):(r=t.name==this.secondarySortingColumn.name?this.secondarySortingColumn:t,s=this.primarySortingColumn,this.primarySortingColumn):(r=t,s=this.primarySortingColumn?this.primarySortingColumn:null,this.primarySortingColumn),r&&this.options.sortable)){this.instrumentsToShow.instrumentProperty="PUT"==t.id?"putInstrument":"callInstrument";var l=null;t.dataType!=e.DataType.DateTime&&t.dataType!=e.DataType.DateOnly||(l=this.dateStringCompareFunction);var c=null;!o||o.dataType!=e.DataType.DateTime&&o.dataType!=e.DataType.DateOnly||(c=this.dateStringCompareFunction),this.instrumentsToShow.setSecondarySortingField(s,c,!1),this.instrumentsToShow.setSortingField(r,n,l),i&&this.store(a.kMySortingColumnKey,t.name+n)}},a.prototype.getDecimals=function(t,n){var i;return this.options.decimals==e.WidgetDecimals.DEFAULT?i=e.UI.kDefaultDecimals:InfrontUtil.isNumber(this.options.decimals)?i=this.options.decimals:this.options.decimals==e.WidgetDecimals.INSTRUMENT&&this.cache.guaranteedAsyncGet(function(e){InfrontUtil.isNumber(e)&&(i=e)},new e.FieldReference(t,[e.MWSConstants.instrument,e.MWSConstants.precision_code])),this.options.decimals!=e.WidgetDecimals.INSTRUMENT&&this.options.decimals!=e.WidgetDecimals.FEED||!this.feedMetaData[n]||void 0===this.feedMetaData[n].decimals||(i=this.feedMetaData[n].decimals),i},a.prototype.createRow=function(t,n){var i=this,r=t.callInstrument?e.CacheKeyFactory.createInstrumentKey(t.callInstrument):"",a=t.putInstrument?e.CacheKeyFactory.createInstrumentKey(t.putInstrument):"",s=r?this.getDecimals(r,t.callInstrument.feed):e.UI.kDefaultDecimals;a?this.getDecimals(a,t.putInstrument.feed):e.UI.kDefaultDecimals,!r&&a&&(r="-"+a),this.cacheStorage[r]=a||"-";var o=this.createElementRowFromCache(t.callInstrument,r,s);return this.currentSymbolLastValue.observe(e.BindingFactory.createInlineBinding(function(e){i.rangeVisible.get()&&null!=e&&i.activeItem&&t.strike&&i.activeItem.strike==t.strike?o.classList.add("cell-w-put-call__active-row"):o.classList.remove("cell-w-put-call__active-row")})),this.options.layout===e.ListLayout.DIV?o.parentElement:o},a.prototype.rowClicked=function(t){if(this.options.onRowClicked){var n=this.cacheStorage[e.CacheKeyFactory.createInstrumentKey(t)];this.options.onRowClicked(t,this.cache.getInstrument(n))}},a.prototype.createExtraSubtitle=function(e){if(e.hidden=!(this.options.showTitle&&this.options.showLastInTitle),this.options.showTitle&&this.options.showLastInTitle){var t;(t=document.createElement("div")).className="cell-w-put-call__sub-title--last",t.innerText="("+this.languageHandler.get("columns","LAST")+": ",this.extraSubTitleLastEl=document.createElement("div"),t.appendChild(this.extraSubTitleLastEl);var n=document.createElement("div");n.innerHTML=")",t.appendChild(n),e.appendChild(t)}},a.prototype.updateExtraSubtitle=function(t){if(this.options.showTitle&&this.options.showLastInTitle){this.extraSubtitleLast&&this.extraSubtitleLast.destroy(),InfrontUtil.removeAllChildNodes(this.extraSubTitleLastEl);var n=new e.InstrumentSingleValueWidgetOptions;n.name="LAST",n.instrument=t,n.useOriginal=!0,n.enableChangeStatusColors=this.options.enableChangeStatusColors,this.extraSubtitleLast=new e.InstrumentSingleValueWidget(this.extraSubTitleLastEl,this.infrontUI,n)}},a.prototype.createSymbolPanel=function(t){var n=this;t.hidden=!(this.options.showTitle&&this.options.showSymbolPanel);var i,r=document.createElement("div");r.className="cell  cell-w-put-call__pct-change  cell-arrow",this.currentSymbolPctChange=new e.ObservableBinding(function(e){r.classList.remove("cell-arrow--up"),r.classList.remove("cell-arrow--down"),0<e?r.classList.add("cell-arrow--up"):e<0&&r.classList.add("cell-arrow--down")}),t.appendChild(r),this.options.showTitle&&this.options.showSymbolPanel&&((i=document.createElement("div")).className="cell  cell-w-put-call__symbol-panel--title",i.onclick=function(e){n.options.onUnderlyingClicked&&n.options.onUnderlyingClicked(n.currentUnderlying)},this.currentSymbolTitleEl=i,t.appendChild(i),(i=document.createElement("div")).className="cell  cell-w-put-call__symbol-panel--bid",i.innerText=this.languageHandler.get("columns","BID")+":",this.currentSymbolBidEl=document.createElement("div"),i.appendChild(this.currentSymbolBidEl),t.appendChild(i),(i=document.createElement("div")).className="cell  cell-w-put-call__symbol-panel--ask",i.innerText=this.languageHandler.get("columns","ASK")+":",this.currentSymbolAskEl=document.createElement("div"),i.appendChild(this.currentSymbolAskEl),t.appendChild(i),(i=document.createElement("div")).className="cell  cell-w-put-call__symbol-panel--last",i.innerText=this.languageHandler.get("columns","LAST")+":",this.currentSymbolLastEl=document.createElement("div"),i.appendChild(this.currentSymbolLastEl),t.appendChild(i))},a.prototype.updateSymbolPanel=function(t){var n;this.currentSymbolLastValue.set(null),this.currentSymbolPctChangeUnsub&&(this.unbinds.splice(this.unbinds.indexOf(this.currentSymbolPctChangeUnsub),1),this.currentSymbolPctChangeUnsub()),this.currentSymbolPctChangeUnsub=this.cache.customBind(e.CacheKeyFactory.createInstrumentKey(t),["pct_change"],this.currentSymbolPctChange),this.unbinds.push(this.currentSymbolPctChangeUnsub),this.options.showTitle&&this.options.showSymbolPanel&&(this.currentSymbolTitleEl.innerText=t.ticker,this.currentSymbolBid&&this.currentSymbolBid.destroy(),InfrontUtil.removeAllChildNodes(this.currentSymbolBidEl),(n=new e.InstrumentSingleValueWidgetOptions).name="BID",n.instrument=t,n.useOriginal=!0,n.enableChangeStatusColors=this.options.enableChangeStatusColors,this.currentSymbolBid=new e.InstrumentSingleValueWidget(this.currentSymbolBidEl,this.infrontUI,n),this.currentSymbolAsk&&this.currentSymbolAsk.destroy(),InfrontUtil.removeAllChildNodes(this.currentSymbolAskEl),(n=new e.InstrumentSingleValueWidgetOptions).name="ASK",n.instrument=t,n.useOriginal=!0,n.enableChangeStatusColors=this.options.enableChangeStatusColors,this.currentSymbolAsk=new e.InstrumentSingleValueWidget(this.currentSymbolAskEl,this.infrontUI,n),this.currentSymbolLast&&this.currentSymbolLast.destroy(),InfrontUtil.removeAllChildNodes(this.currentSymbolLastEl),(n=new e.InstrumentSingleValueWidgetOptions).name="LAST",n.instrument=t,n.useOriginal=!0,n.enableChangeStatusColors=this.options.enableChangeStatusColors,this.currentSymbolLast=new e.InstrumentSingleValueWidget(this.currentSymbolLastEl,this.infrontUI,n))},a.prototype.updateTabBar=function(){var n=this;if(this.options.showTabs){var i=function(e){var i=n.expiryList.item(e).index,r=!1;0<=i&&(r=n.expiries[i].weekly);var a=n.expiryList.item(e).expiry;return a==t.FirstMonthly||a==t.SecondMonthly||a==t.ThirdMonthly||r};this.tabBar&&this.tabBar.destroy(),this.tabIgnoreChange=!0;var r=new e.TabbedContainerOptions;r.tabs=[];for(var a=this.expiryList.length(),s=0;s<a;s++)i(s)||r.tabs.push({label:this.expiryList.item(s).label,id:this.expiryList.item(s).label});r.useContainers=!0,r.onSelect=function(e){return n.tabSelected(e)},this.tabBar=new e.TabbedContainer(this.tabBarEl,r);var o=this.expiryBinding.getSelectedIndex();0<=o&&this.tabBar.setSelectedId(this.expiryList.item(o).label),this.tabIgnoreChange=!1}},a.prototype.tabSelected=function(e){if(!(0<=this.expiryBinding.getSelectedIndex()&&e==this.expiryList.item(this.expiryBinding.getSelectedIndex()).label||this.tabIgnoreChange))for(var t=this.expiryList.length(),n=0;n<t;n++)if(e==this.expiryList.item(n).label){this.expiryBinding.setSelected(n);break}},a.numberToDate=function(e){var t=null,n=null,i=null,r=null;return 8==e.length&&(n=parseInt(e.substr(0,4)),i=parseInt(e.substr(4,2)),r=parseInt(e.substr(6,2))),n&&i&&r&&(t=new Date(n,i-1,r)),t},a.prototype.selectUnderlying=function(t){if(t)for(var n=this.underlyingList.length(),i=0;i<n;i++){var r=this.underlyings[this.underlyingList.item(i).index];if(r[e.MWSConstants.feed]==t.feed&&r[e.MWSConstants.ticker]==t.ticker){this.underlyingBinding.getSelectedIndex()!=i&&this.underlyingBinding.setSelected(i);break}}},a.prototype.htmlElementTreeAdded=function(e,t,n){this.showProgressIndicator.set(!1),this.columnManager.htmlElementTreeAdded(e,t,n)},a.prototype.htmlElementTreeRemoved=function(e,t,n){this.columnManager.htmlElementTreeRemoved(e,t,n)},a.prototype.htmlElementTreeMoved=function(e,t,n,i){this.columnManager.htmlElementTreeMoved(e,t,n,i)},a.prototype.linkEvent=function(t){if(this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,t),this.isinTargetManager.isLinked()){var n=this.cache.get(e.CacheKeyFactory.createInstrumentKey(t),[e.MWSConstants.instrument,e.MWSConstants.isin]),i=InterLibraryLink.DataType.isin;this.isinTargetManager.updateTargets(i,n)}},a.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument,InterLibraryLink.DataType.removeInfrontInstrument,InterLibraryLink.DataType.clearAllInstruments,InterLibraryLink.DataType.replaceAllInstruments]},a.prototype.receiveMessage=function(t){this.options.linkAction!=e.LinkAction.None&&(t.type==InterLibraryLink.DataType.clearAllInstruments?this.clear():t.type==InterLibraryLink.DataType.replaceAllInstruments||(t.type==InterLibraryLink.DataType.infrontInstrument?this.selectUnderlying(t.value):(t.type,InterLibraryLink.DataType.removeInfrontInstrument)))},a.prototype.link=function(e){var t=e.accepts();-1!=t.indexOf(InterLibraryLink.DataType.infrontInstrument)||-1!=t.indexOf(InterLibraryLink.DataType.listInstrument)?this.targetManager.addTarget(e):-1<t.indexOf(InterLibraryLink.DataType.isin)&&this.isinTargetManager.addTarget(e)},a.prototype.unlink=function(e){this.targetManager.removeTarget(e),this.isinTargetManager.removeTarget(e)},a.kLanguageKey="putCall",a.kMySortingColumnKey="putCall-Sorting-Column",a.kMyRangeKey="putCall-Range",a.replaceAlls=0,a.adds=0,a}(e.CommonListWidgetBase);e.PutCallWidget=a}(Infront||(Infront={})),function(e){var t;(t=e.LinkAction||(e.LinkAction={}))[t.Replace=0]="Replace",t[t.Append=1]="Append",t[t.None=2]="None";var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enableLoginDialog=!1,t.language="en",t.dictionary=null,t.widgetStateStorage=null,t.useDefaultStateStorage=!1,t.infrontDemotradingAutologon=!1,t.enableAlertNotification=!1,t.enableHighlightUpDownChanges=!1,t}return __extends(t,e),t}(e.InfrontOptions);e.InfrontUIOptions=n;var i=function(){function t(i){var r=this;this.currentLoginDialog=null,this.options=InfrontUtil.mergeRecursive(new n,i),(e.ui=this).options.infrontDemotradingAutologon&&new e.LocallyStoredSession(e.Controller.kStoredTradingSessionName).clear();try{if(InfrontUtil.isLocalStorageSupported()){var a=window.localStorage.getItem("INFRONT-RTD");a&&this.infrontRTD(a)}}catch(i){this.infrontRTD("")}if(!0===this.options.useDefaultStateStorage&&InfrontUtil.isLocalStorageSupported()?this.storage=new e.DefaultWidgetStorage(t.kDefaultLocalStorageKey):this.storage=this.options.widgetStateStorage,this.cancelClicked=new e.Observable,this.storage){this.storage.getGlobal(t.kCancelClicked)?this.cancelClicked.set(this.storage.getGlobal(t.kCancelClicked)):this.cancelClicked.set(!1);var s=e.BindingFactory.createInlineBinding(function(e){r.storage.storeGlobal(t.kCancelClicked,e)});this.cancelClicked.observe(s,e.InitialUpdate.None)}var o=new e.LanguageOptions;o.dictionary=this.options.dictionary,o.language=this.language=e.urlLanguage?e.urlLanguage:this.options.language,this.languageHandler=new e.Language(o),InfrontUtil.formatSettings.kilo=this.languageHandler.get("global","kilo"),InfrontUtil.formatSettings.mega=this.languageHandler.get("global","mega"),this.infront=new e.Model(i),this.infront.language=this.language,this.infront.registerEventObserver(e.ReadyEvent.kEventName,function(e){return r.infrontReady()}),this.infront.registerEventObserver("onLoginFailed",function(t){r.options.enableLoginDialog&&r.options.getAuthenticationType()===e.AuthenticationType.NONE&&r.displayLoginDialog()}),this.infront.registerEventObserver(e.TradingConnectedEvent.kEventName,function(e){return r.tradingConnected()}),this.infront.registerEventObserver(e.TradingDisconnectedEvent.kEventName,function(e){return r.tradingDisconnected()}),this.infront.registerEventObserver(e.TradingLoginFailedEvent.kEventName,function(e){return r.tradingLoginFailed()}),this.cache=this.infront.getCache(),this.tradingLoginListeners=[],this.tradingLoginDialogVisible=!1}return t.prototype.registerEventObserver=function(e,t){this.infront.registerEventObserver(e,t)},t.prototype.init=function(){this.infront.init()},t.prototype.logout=function(){this.infront.logOut()},t.prototype.notify=function(t,n,i,r){void 0===i&&(i=e.NotificationType.INFO),this.notificationHandler&&this.notificationHandler.notify(t,n,i,r)},t.prototype.infrontReady=function(){var t=this;if(this.options.infrontDemotradingAutologon&&this.infrontDemoTradingLogin(),this.options.enableAlertNotification){this.unsubscribe&&this.unsubscribe();var n=new e.DataOptions;n.onError=function(e,t){IDS.log("Alerts: ","Error code: "+e+" Error message: "+t)},n.onData=function(n){var i=n.ToMws(),r=new e.NotificationOptions;r.message=i[e.MWSConstants.data][e.MWSConstants.message],r.payload=i[e.MWSConstants.data][e.MWSConstants.payload],r.timeout=200,r.onClick=function(n,i){var r=new e.AlertNotificationClickedEvent(i);t.infront.publishEvent(r)};var a=new e.AlertNotificationShownEvent(r.payload);t.infront.publishEvent(a),t.notify(r)},this.unsubscribe=this.infront.alerts(n)}},t.prototype.infrontDemoTradingLogin=function(){var t=[];t.push(new e.LoginField("user_id","tg")),t.push(new e.LoginField("password","tg")),this.tradingLoginInformationProvided(1,98,t)},t.prototype.isTradingLoggedIn=function(){return e.InfrontStatus.Connected==this.infront.getTradingStatus()},t.prototype.ensureTradingLoggedIn=function(t){if(!t||!this.cancelClicked.get()){var n=this.infront.getTradingStatus();n!=e.InfrontStatus.Uninitialized&&n!=e.InfrontStatus.Disconnected||this.tradingLogin()}},t.prototype.tradingConnected=function(){for(var e=0;e<this.tradingLoginListeners.length;e++)this.tradingLoginListeners[e](!0);this.cancelClicked.set(!1)},t.prototype.tradingDisconnected=function(){for(var e=0;e<this.tradingLoginListeners.length;e++)this.tradingLoginListeners[e](!1)},t.prototype.tradingLoginFailed=function(){0<this.tradingLoginListeners.length&&this.tradingLogin()},t.prototype.tradingLogin=function(t){var n=this.infront.getTradingRoutings();!this.tradingLoginDialogVisible&&InfrontUtil.isArray(n)&&0<n.length&&(this.tradingLoginDialogVisible=!0,this.currentLoginDialog?(this.currentLoginDialog.hide(),this.currentLoginDialog.show(t)):(this.currentLoginDialog=new e.TradingLoginDialog(n,this.infront.getSidPidMatches(),this,this.infront,this,t),this.currentLoginDialog.show()))},t.prototype.AddTradingManagerObserver=function(e){this.infront.getTradingManager().observe(e)},t.prototype.RemoveTradingManagerObserver=function(e){this.infront.getTradingManager().removeObserver(e)},t.prototype.setActivePortfolio=function(e){var t=this.infront.getTradingManager();t&&t.setCurrentPortfolioName(e)},t.prototype.displayLoginDialog=function(){new e.LoginDialog(this).show()},t.prototype.getDataAccess=function(){return new e.DataAccess(this.infront.getCache(),this.infront.getTradingManager())},t.prototype.getModel=function(){return this.infront},t.prototype.getStorage=function(){return this.storage},t.prototype.loginInformationProvided=function(t,n){var i=new e.LoginOptions;i.user_id=t,i.password=n,this.infront.setLoginInformation(i),this.infront.init()},t.prototype.tradingLoginInformationProvided=function(e,t,n){var i,r,a;this.tradingLoginDialogVisible=!1;for(var s=0;s<n.length;s++)"user_id"==n[s].key?i=n[s].value:"password"==n[s].key?r=n[s].value:"pin"==n[s].key&&(a=n[s].value);this.infront.tradingLogin(e,t,i,r,a)},t.prototype.tradingLoginDialogCanceled=function(){this.tradingLoginDialogVisible=!1,this.infront.cancelTradingLogin(),this.infront.publishEvent(new e.TradingLoginCanceledEvent)},t.prototype.tradingLoginDialogReset=function(){this.infront.cancelTradingLogin()},t.prototype.loginCanceled=function(){IDS.log("Login canceled by user")},t.prototype.hideTradingDialog=function(){this.currentLoginDialog&&(this.tradingLoginDialogVisible=!1,this.cancelClicked.set(!0),this.currentLoginDialog.hide())},t.prototype.showTradingDialog=function(){this.currentLoginDialog||(this.tradingLogin(),this.tradingLoginDialogVisible=!0)},t.prototype.simpleSearchWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.SimpleSearchBox(a,this.infront,i)),r},t.prototype.searchWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.SearchBox(a,this.infront,i)),r},t.prototype.dropDownWidget=function(n,i,r){var a=null,s=t.parseElementArgument(n);return null!=s&&(a=new e.DropDown(s,i)),a},t.prototype.quoteWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.QuoteWidget(a,this,i)),r},t.prototype.myListsWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.MyListsWidget(a,this.infront,this,i)),r},t.prototype.quoteList=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.QuoteListWidget(a,this.infront,this,i)),r},t.prototype.rankingWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.RankingWidget(a,this,i)),r},t.prototype.chainViewer=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(i.useChains=!0,r=new e.QuoteListWidget(a,this.infront,this,i)),r},t.prototype.companyDescription=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.CompanyDescriptionWidget(a,this,i)),r},t.prototype.companyFundamentals=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.CompanyFundamentalsWidget(a,this,i)),r},t.prototype.focusWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FocusWidget(a,this,i)),r},t.prototype.fundMorningstarRatingWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FundMorningstarRatingWidget(a,this,i)),r},t.prototype.fundRiskLevelWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FundRiskLevelWidget(a,this,i)),r},t.prototype.fundAllocationWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FundAllocationWidget(a,this,i)),r},t.prototype.fundAllocationPieChartWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FundAllocationPieChartWidget(a,this,i)),r},t.prototype.fundStylemapWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FundStylemapWidget(a,this,i)),r},t.prototype.fundTopHoldingsWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FundTopHoldingsWidget(a,this,i)),r},t.prototype.instrumentSingleValueWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.InstrumentSingleValueWidget(a,this,i)),r},t.prototype.instrumentValuesWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.InstrumentValuesWidget(a,this,i)),r},t.prototype.valuePairWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.ValuePairWidget(a,this,i)),r},t.prototype.wireWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.WireWidget(a,this,i)),r},t.prototype.swapCalculatorWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.SwapCalculatorWidget(a,this,i)),r},t.prototype.bondsCalculatorWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.BondsCalculatorWidget(a,this,i)),r},t.prototype.simpleChartOverviewWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.SimpleChartOverviewWidget(a,this,i)),r},t.prototype.orderbookWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.OrderbookWidget(a,this,i)),r},t.prototype.statusWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.StatusWidget(a,this,i)),r},t.prototype.idsStatusWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.IDSStatusWidget(a,this,i)),r},t.prototype.chartWidget2=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.ComplexChartWidget(a,this,i)),r},t.prototype.alertListWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.AlertListWidget(a,this,i)),r},t.prototype.alertWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.AlertWidget(a,this,i)),r},t.prototype.indexOverviewWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.IndexOverviewWidget(a,this,i)),r},t.prototype.newsListWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.NewsListWidget(a,this,i)),r},t.prototype.newsReaderWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.NewsReaderWidget(a,this,i)),r},t.prototype.newsScrollerWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.NewsScrollerWidget(a,this,i)),r},t.prototype.historicalOverviewWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.HistoricalOverviewWidget(a,this,i)),r},t.prototype.historyWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.HistoryWidget(a,this,i)),r},t.prototype.heatmapWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.HeatmapWidget(a,this,i)),r},t.prototype.financialCalendarWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.FinancialCalendarWidget(a,this,i)),r},t.prototype.brokerstatsWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.BrokerstatsWidget(a,this,i)),r},t.prototype.intradayTradesWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.IntradayTradesWidget(a,this,i)),r},t.prototype.intradayTradesSimpleWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.IntradayTradesSimpleWidget(a,this,i)),r},t.prototype.portfolioNameWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PortfolioNameWidget(a,this,i)),r},t.prototype.portfolioSelectWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PortfolioSelectWidget(a,this,i)),r},t.prototype.orderEntryWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.OrderEntryWidget(a,this,i)),r},t.prototype.OrderEntryAlgoWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.OrderEntryAlgoWidget(a,this,i)),r},t.prototype.OrderEntryHorizWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.OrderEntryHorizWidget(a,this,i)),r},t.prototype.modifyOrderWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.CompactModifyOrderWidget(a,this,i)),r},t.prototype.positionsWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PositionsWidget(a,this.infront,this,i)),r},t.prototype.positionsFlexWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PositionsFlexWidget(a,this.infront,this,i)),r},t.prototype.cashPositionsWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.CashPositionsWidget(a,this,i)),r},t.prototype.ordersWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.OrdersWidget(a,this,i)),r},t.prototype.tradesWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.TradesWidget(a,this,i)),r},t.prototype.netTradesWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.NetTradesWidget(a,this,i)),r},t.prototype.portfolioValuesWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PortfolioValuesWidget(a,this,i)),r},t.prototype.singlePortfolioValueWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PortfolioSingleValueWidget(a,this,i)),r},t.prototype.tradingPowerWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.TradingPowerWidget(a,this,i)),r},t.prototype.portfolioPie=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.AssetsPieChart(a,this,i)),r},t.prototype.assetsPieChart=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.AssetsPieChart(a,this,i)),r},t.prototype.portfolioRankingWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PortfolioRankingWidget(a,this,i)),r},t.prototype.orderStackWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.OrderStackWidget(a,this,i)),r},t.prototype.marketListWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.MarketListWidget(a,this,i)),r},t.prototype.screenerWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.ScreenerWidget(a,this,i)),r},t.prototype.activeFiltersWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.ScreenerActiveFiltersWidget(a,this,i)),r},t.prototype.bondsTradingWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.BondsTradingWidget(a,this,i)),r},t.prototype.columnChooserWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.ColumnChooserWidget(a,this,i)),r},t.prototype.putCallWidget=function(n,i){var r=null,a=t.parseElementArgument(n);return a&&(r=new e.PutCallWidget(a,this,i)),r},t.prototype.communicationStatus=function(n,i){var r=null,a=t.parseElementArgument(n);return null!=a&&(r=new e.CommunicationStatusWidget(a,this,i)),r},t.prototype.notifications=function(n,i){void 0===i&&(i=!1);var r=t.parseElementArgument(n);r&&(this.notificationHandler=new e.Notifications(r,i))},t.parseElementArgument=function(e){var t=null;if("string"==typeof e){var n=e.trim(),i="#"===n.substring(0,1)?n:"#"+n;t=document.querySelector(i)}else t=e;return t},t.prototype.infrontRTD=function(t,n){void 0===n&&(n=!0);var i=0,r=-1;if(t){for(var a in IDS.log=function(){var t="";e.debugger||(this.numberOfAddedLines=0);for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];try{if(IDS.DEBUG_CONFIG_TO_FILE){var s="",o="";IDS.DEBUG_CONFIG_TIME_STAMP&&(s=InfrontUtil.formatDateTime(new Date,"hh:mm:ss.sss: "));for(var l=0,c=n;l<c.length;l++){var d=c[l];d instanceof Array?s+=o+"["+d.toString+"]":d instanceof Object?s+=o+JSON.stringify(d):d&&(s+=o+d.toString().replace(new RegExp("\n","g"),", ")),o=", "}if(0<r&&r<=i){var u=e.debugger.indexOf("\n");t=e.debugger.slice(u+1),i--,e.debugger=t}e.debugger?(e.debugger+="\n"+s,i++):e.debugger=s}}catch(t){}},IDS)0==a.indexOf("DEBUG_")&&(IDS[a]=!1);for(var s=0,o=t.split(",");s<o.length;s++){var l=o[s];l.trim().match("DEBUG_CONFIG_LITE_TRESHOLD")&&(r=parseInt(l.trim().split("=")[1])),IDS[l.trim()]=!0}}},t.kDefaultDecimals=2,t.kDefaultLocalStorageKey="com.goinfront.wtk.state",t.kCancelClicked="cancelClicked",t}();e.UI=i}(Infront||(Infront={})),function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.rootElement="div",n.currencyField="currency",n.blinkType=e.BlinkType.None,n.allowZero=!0,n}return __extends(n,t),n}(e.SingleInstrumentWidgetOptions);e.ValueWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"valuewidget",r)||this;return a.rowId=null,a.languageHandler=i.languageHandler,a.options.column?a.options.column instanceof e.Field?a.column=a.options.column:a.column=e.FieldsHelper.createFieldFromSpec(a.options.column,a.languageHandler):a.column=e.FieldsHelper.createFieldFromSpec(a.options,a.languageHandler),a.subscribes.addFields(a.column.getSubscriptionFieldNames()),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){n.prototype.newInit.call(this)},i.prototype.newBuildUI=function(){var t=this;if(this.rootEl=document.createElement(this.options.rootElement),this.column.className&&InfrontUtil.addClassName(this.rootEl,this.column.className),this.column.specificClass&&InfrontUtil.addClassName(this.rootEl,this.column.specificClass),InfrontUtil.addClassName(this.rootEl,"cell-w-single-value cell-w-single-value--value"),null!=this.column.onClick&&null!=this.options.instrument&&this.addEventListener(this.rootEl,"click",function(e){e.stopPropagation(),t.column.onClick(t.rowId,t.cache.get(t.cacheKey,t.column.getFieldSpec()),{target:t.rootEl,instrument:t.options.instrument})}),this.cacheKey){if(this.column.hover){var i=this.column.hover;if(null!=i&&i.type==e.FieldType.Normal){var r=this.column.createValueBinding(this.rowId,this.rootEl,"title",this.decimals);this.unbinds.push(this.cache.customBind(this.cacheKey,i.getFieldSpec(),r))}}if(this.column.type==e.FieldType.Custom)"function"==typeof this.column.content?this.rootEl.innerHTML=this.column.content(this.rowId)||"":this.rootEl.innerHTML=this.column.content||"";else if(e.ComputedField.isComputedField(this.column)){this.column.createComputedFieldInCache(this.cache,this.rowId,this.cacheKey);var a=this.column.getFieldSpec()[0],s=this.column.createValueBinding(this.rowId,this.rootEl,"innerHTML",this.decimals);this.unbinds.push(this.cache.customBind(this.cacheKey,a,s))}else{if(s=this.column.createValueBinding(this.rowId,this.rootEl,"innerHTML",this.decimals),this.unbinds.push(this.cache.customBind(this.cacheKey,this.column.getFieldSpec(),s)),this.options.blinkType!=e.BlinkType.None){var o=new e.CssUpdateBinding(this.rootEl,1e3,this.options.blinkType);this.unbinds.push(this.cache.customBind(this.cacheKey,this.column.getFieldSpec(),o))}if(this.options.enableChangeStatusColors){var l=new e.ClassBinding(this.rootEl,e.CssConstants.kStatusPositive,function(e){return 0<parseFloat(e)});this.unbinds.push(this.cache.customBind(this.cacheKey,this.column.getFieldSpec(),l));var c=new e.ClassBinding(this.rootEl,e.CssConstants.kStatusNegative,function(e){return parseFloat(e)<0});this.unbinds.push(this.cache.customBind(this.cacheKey,this.column.getFieldSpec(),c))}}if(this.options.showCurrency){var d=document.createElement(this.options.rootElement);this.options.currencyClassName&&InfrontUtil.addClassName(d,this.options.currencyClassName),InfrontUtil.addClassName(d,"cell-w-single-value cell-w-single-value--currency");var u=new e.ClassBinding(d,"cell-5-padding-right",function(e){return null!=e});this.unbinds.push(this.cache.customBind(this.cacheKey,this.options.currencyField,u));var h=e.BindingFactory.createValueBinding(d,"innerHTML");this.unbinds.push(this.cache.customBind(this.cacheKey,this.options.currencyField,h)),this.element.appendChild(d)}}this.element.appendChild(this.rootEl),n.prototype.newBuildUI.call(this)},i}(e.SingleInstrumentWidgetBase);e.ValueWidget=n;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(t);e.CachedValueWidgetOptions=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.assignCacheKey=function(){this.cacheKey=this.options.cacheKeyConverter?this.options.cacheKeyConverter(this.options.cacheKey,this.column):this.options.cacheKey},t.prototype.returnDefaultWidgetOptions=function(){return new i},t.prototype.accepts=function(){return[]},t}(n);e.CachedValueWidget=r}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.ValueWidgetOptions);e.InstrumentSingleValueWidgetOptions=t;var n=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.assignCacheKey=function(){if(this.options.instrument){var t=e.CacheKeyFactory.createInstrumentKey(this.options.instrument);this.cacheKey=this.options.cacheKeyConverter?this.options.cacheKeyConverter(t,this.column):t}},i}(e.ValueWidget);e.InstrumentSingleValueWidget=n}(Infront||(Infront={})),function(e){var t,n,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageItems=5,t.showBuyerAndSeller=!0,t.showColumnsHeaders=!0,t}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.IntradayTradesSimpleWidgetOptions=i,(n=t=e.TradePriceStatus||(e.TradePriceStatus={}))[n.NORMAL=0]="NORMAL",n[n.DOWN=-1]="DOWN",n[n.UP=1]="UP";var r=function(){this.seq_id=-1,this.buyer="",this.seller="",this.last=0,this.volume=0};e.TradeItem=r;var a=function(){function t(t){this.seq_id=t.seq_id,this.buyer=new e.Observable(t.buyer||""),this.seller=new e.Observable(t.seller||""),this.last=new e.Observable(t.last),this.volume=new e.Observable(t.volume),this.time=new e.Observable(t.time),this.upDownStatus=new e.Observable(t.upDownStatus),this.priceStatus=new e.Observable(t.priceStatus),this.volumeBarSize=new e.Observable(t.volumeBarSize)}return t.prototype.getTrade=function(){var e=new r;return e.seq_id=this.seq_id,e.buyer=this.buyer.get(),e.seller=this.seller.get(),e.last=this.last.get(),e.volume=this.volume.get(),e.time=this.time.get(),e.upDownStatus=this.upDownStatus.get(),e.priceStatus=this.priceStatus.get(),e.volumeBarSize=this.volumeBarSize.get(),e},t.prototype.setTrade=function(e){this.seq_id=e.seq_id,this.buyer.set(e.buyer||""),this.seller.set(e.seller||""),this.last.set(e.last),this.volume.set(e.volume),this.time.set(e.time),this.upDownStatus.set(e.upDownStatus),this.priceStatus.set(e.priceStatus),this.volumeBarSize.set(e.volumeBarSize)},t}();e.TradeItemObs=a;var s=function(n){function s(t,i,o){var l=n.call(this,t,i,"intradayTrades",o)||this;l.maxVolume=-1,l.tradesList=[],l.tradesListLength=0,l.rowsElementsList=[],l.rowsMapping=[],l.lookupTrades={},l.displayTicker=new e.Observable;for(var c=function(t){d.tradesList.unshift(new a(new r));var n=d.tradesList[0];d.rowsElementsList.unshift(e.WidgetDOMFactory.create_WIntradayTradesMiniRow_DOM(n.last,d.decimals,n.volume,n.time,n.priceStatus,n.upDownStatus,n.volumeBarSize,n.buyer,n.seller,d.options.showBuyerAndSeller,function(e){return l.priceClicked(n.getTrade())}))},d=this,u=0;u<l.options.pageItems;++u)c();return l.options.pageItems!=s.kTradePageItems&&(l.cappedItems=new e.CachedObservableArrayCap(l.infront.getCache(),l.options.pageItems)),l.targetManager=new InfrontUtil.LinkTargetManager,l.subscribes.addField(e.QuoteFields.TRADES),l}return __extends(s,n),s.prototype.returnDefaultWidgetOptions=function(){return new i},s.prototype.newInit=function(){this.options.instrument&&this.displayTicker.set(this.options.instrument.ticker),n.prototype.newInit.call(this)},s.prototype.newBuildUI=function(){var t=this,i=this.options.showBuyerAndSeller&&this.feedMetaData&&this.feedMetaData.buyer_seller;null==this.options.onTickerClick?this.enableLink=!1:this.enableLink=!0;var r=e.WidgetDOMFactory.create_WIntradayTradesMini_DOM(this.element,this.displayTicker,this.widgetTitle,this.options.tickerInHeader,this.options.showColumnsHeaders,i,this.enableLink,this.options.showSearchWidget,function(e){return t.linkClicked()},function(e){return t.onSearchButtonClick(e)},this.infrontUI.languageHandler);this.options.showSearchWidget&&(this.searchWidget=new e.SearchBox(r.searchContainer,this.infront,this.addInstrumentSearchOpts("intradayTradesMini")),this.searchContainer=r.searchContainer);var a=new e.InlineRowFactory(function(e,n){return t.updateTradeRow(e,n)});this.itemsBinding=new e.ArrayBinding(r.tradeBody,a,null),this.lookupTrades={},n.prototype.newBuildUI.call(this)},s.prototype.createBindings=function(){var t=this;this.options.instrument&&(this.tradesListLength=0,this.maxVolume=-1,this.rowsMapping=[],this.options.pageItems==s.kTradePageItems?this.unbinds.push(this.infront.getCache().bindToArray(e.CacheKeyFactory.createTradesArrayKey(this.options.instrument),this.itemsBinding)):(this.cappedItems.observe(this.itemsBinding),this.cappedItems.bindToCache(e.CacheKeyFactory.createTradesArrayKey(this.options.instrument)),this.unbinds.push(function(){t.cappedItems.unbind(t.itemsBinding),t.cappedItems.unbindFromCache()}))),n.prototype.createBindings.call(this)},s.prototype.newSubscribe=function(){this.setHasContent(!0),this.infront.snapshot(this.options.instrument,[e.QuoteFields.TRADES],!1,null,this.options.pageItems),n.prototype.newSubscribe.call(this)},s.prototype.newUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),n.prototype.newUnsubscribe.call(this)},s.prototype.removeBindings=function(){this.itemsBinding&&this.itemsBinding.reInit([]),n.prototype.removeBindings.call(this)},s.prototype.updateTradeStatus=function(e,n){var i=t.NORMAL,r=t.NORMAL;return n&&n.last&&(n.last<e.last?i=t.UP:n.last>e.last?i=t.DOWN:n.last==e.last&&(i=t.NORMAL),r=i!=t.NORMAL?i:n.priceStatus),e.priceStatus=r,e.upDownStatus=i},s.prototype.updateTradesVolumeBarSize=function(e){this.maxVolume=e;for(var t=0,n=this.tradesList;t<n.length;t++){var i=n[t];i.volume&&i.volumeBarSize.set(i.volume.get()/this.maxVolume*100)}},s.prototype.updateTradeRow=function(e,n){var i;if(this.maxVolume<e.volume&&this.updateTradesVolumeBarSize(e.volume),e.volumeBarSize=e.volume/this.maxVolume*100,e.priceStatus=t.NORMAL,e.upDownStatus=t.NORMAL,this.tradesListLength<this.options.pageItems&&!this.lookupTrades[e.tradeId]){if(0==n)this.rowsMapping.unshift(this.tradesListLength),1<this.rowsMapping.length&&this.updateTradeStatus(e,this.tradesList[this.rowsMapping[this.tradesListLength-1]].getTrade()),this.tradesList[this.tradesListLength].setTrade(e);else{this.rowsMapping.push(this.tradesListLength),this.tradesList[this.rowsMapping[this.tradesListLength]].setTrade(e);for(var r=this.tradesListLength;0<r;--r){var a=this.tradesList[this.rowsMapping[r-1]].getTrade();this.updateTradeStatus(a,this.tradesList[this.rowsMapping[r]].getTrade()),this.tradesList[this.rowsMapping[r-1]].setTrade(a)}}i=this.rowsElementsList[this.rowsMapping[n]],this.tradesListLength++,this.lookupTrades[e.tradeId]=e.tradeId}else{for(var s=this.tradesList.length-1;n<s;--s)this.tradesList[this.rowsMapping[s]].setTrade(this.tradesList[this.rowsMapping[s-1]].getTrade());0<n&&this.updateTradeStatus(this.tradesList[this.rowsMapping[n-1]].getTrade(),e),n+1<this.rowsMapping.length&&this.updateTradeStatus(e,this.tradesList[this.rowsMapping[n+1]].getTrade()),this.tradesList[this.rowsMapping[n]].setTrade(e),i=this.rowsElementsList[this.rowsMapping[n]]}return i},s.prototype.priceClicked=function(e){this.options.onPriceClick&&this.options.onPriceClick(e.last),this.options.onPriceInstrumentClick&&this.options.onPriceInstrumentClick(e.last,this.options.instrument),this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.price,e.last)},s.prototype.linkClicked=function(){this.options.onTickerClick(this.options.instrument)},s.prototype.link=function(e){InterLibraryLink.targetSupportsType(e,InterLibraryLink.DataType.price)&&this.targetManager.addTarget(e)},s.prototype.unlink=function(e){this.targetManager.removeTarget(e)},s.prototype.htmlElementTreeAdded=function(e,t,n){},s.prototype.htmlElementTreeRemoved=function(t,n,i){e.WidgetDOMFactory.unbindAll(t)},s.prototype.htmlElementTreeMoved=function(e,t,n,i){},s.kTradePageItems=-1,s}(e.SingleInstrumentWidgetBase);e.IntradayTradesSimpleWidget=s}(Infront||(Infront={})),function(e){var t=function(){function t(){}return t.createSortByString=function(n,i){var r=t.TIME;return"VOLUME"==n?r=t.VOLUME:"LAST"==n&&(r=t.PRICE),r+(i!=e.SortOrder.Asc?t.DESC:t.ASC)},t.TIME="TIME_",t.VOLUME="VOLUME_",t.PRICE="PRICE_",t.ASC="ASC",t.DESC="DESC",t}(),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageItems=20,t.paging=!0,t.columns=["LAST","VOLUME","BUYER","SELLER","TIME"],t.defaultSortedColumn="TIME",t}return __extends(t,e),t}(e.CommonListOptions);e.IntradayTradesWidgetOptions=n;var i=function(i){function r(n,r,a){var s=i.call(this,n,r,"intradayTrades",a)||this;s.instrumentDecimals=null,s.feedDecimals=null;for(var o=[],l=s.snapReqCount=0;l<s.options.columns.length;l++){var c="string"==typeof s.options.columns[l]?{type:e.FieldType.Normal,name:s.options.columns[l]}:s.options.columns[l];c.sortable=!("LAST"!=c.name&&"VOLUME"!=c.name&&"TIME"!=c.name||c.hasOwnProperty("sortable")&&!0!==c.sortable),o.push(c)}return s.options.columns=o,s.currentSorting=t.createSortByString(s.columnManager.currentlySortedColumn.name,s.columnManager.currentSortOrder),s.highestSequenceID=-1,s.historyHighestSeqID=-1,s}return __extends(r,i),r.prototype.rowClicked=function(e){},r.prototype.linkEvent=function(e){},r.prototype.setColumnManager=function(){var t=this;this.getStoredColumn(),this.columnManager=new e.ColumnManager(this.options,this.infront,this.infrontUI),this.columnManager.setSortColumnChangedCallback(function(e,n,i){return t.sortColumnChanged(e,n,i)})},r.prototype.setListItems=function(){this.items=new e.SortedObservableArray(this.columnManager.currentlySortedColumn.getCompareFunction(this.columnManager.currentSortOrder)),this.decimals=new e.Observable},r.prototype.returnDefaultWidgetOptions=function(){return new n},r.prototype.newInit=function(){var t=this;if(this.decimals.set(e.UI.kDefaultDecimals),this.instrumentDecimals=null,this.feedDecimals=null,this.options.instrument){this.getFeedMetadata(this.options.instrument.feed,function(e){e.hasOwnProperty("decimals")&&(t.feedDecimals=e.decimals,t.updateDecimals()),i.prototype.newInit.call(t)});var n=e.CacheKeyFactory.createInstrumentKey(this.options.instrument);this.cache.guaranteedAsyncGet(function(e){InfrontUtil.isNumber(e)&&(t.instrumentDecimals=e,t.updateDecimals())},new e.FieldReference(n,[e.MWSConstants.instrument,e.MWSConstants.precision_code]))}},r.prototype.updateDecimals=function(){InfrontUtil.isNumber(this.instrumentDecimals)?this.decimals.set(this.instrumentDecimals):InfrontUtil.isNumber(this.feedDecimals)&&this.decimals.set(this.feedDecimals),2==this.decimals.get()&&this.options.instrument.ticker},r.prototype.newBuildUI=function(){var t=this;this.options.tickerInHeader&&this.options.instrument&&(this.widgetTitle=this.languageHandler.get("intradayTrades","widgetTitle")+" "+this.options.instrument.ticker);var n=e.WidgetDOMFactory.create_WIntradayTrades_DOM(this.element,this.widgetTitle,this.options.navButton,this.navButtonClick,this.options.layout),r=n.thead,a=n.tbody,s=n.pagerContainer;if(r.appendChild(this.createHeaderRow()),this.binding=new e.ArrayBinding(a,this,this.columnManager),this.options.paging){var o=new e.PagerOptions;o.onPageChange=function(e,n){return t.pageChanged(e,n)},this.pager=new e.Pager(s,this.infrontUI.languageHandler,o)}this.reload(),i.prototype.newBuildUI.call(this)},r.prototype.setHighestSequenceID=function(e){this.highestSequenceID=e,this.pager&&this.pager.setPages(Math.ceil(this.highestSequenceID/this.options.pageItems))},r.prototype.newUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),i.prototype.newUnsubscribe.call(this)},r.prototype.newDestroyUI=function(){i.prototype.newDestroyUI.call(this),this.items.clear(),this.highestSequenceID=-1,this.currentPage=0,this.pager&&(this.pager.destroy(),this.pager=null)},r.prototype.getColumnManager=function(){return this.columnManager},r.prototype.getHistoricTrades=function(t){var n=this;this.newUnsubscribe(),this.removeBindings();var i=new e.InstrumentIntradayTradesOptions,r=++this.snapReqCount;i.sortBy=this.currentSorting,t&&0<t&&(i.offset=t-this.options.pageItems,i.highestSequenceId=t),i.onData=function(e){r==n.snapReqCount&&n.onData(e)},this.infront.instrumentIntradayTrades(this.options.instrument,i),this.items.observe(this.binding),this.unbinds.push(function(){n.items.unbind(n.binding)})},r.prototype.onData=function(t){var n=t[e.MWSConstants.trades];if(n&&0<n.length){var i=n[0][e.MWSConstants.seq_id]>n[1][e.MWSConstants.seq_id]?n[0][e.MWSConstants.seq_id]:n[n.length-1][e.MWSConstants.seq_id];if(i>this.highestSequenceID&&(this.highestSequenceID=i,this.pager)){var r=Math.ceil(this.highestSequenceID/this.options.pageItems);this.pager.setPages(r)}0<this.currentPage&&this.items.clear(),n.reverse(),n.splice(this.options.pageItems),this.items.replaceWith(n)}},r.prototype.subscribe=function(){var t=this;this.newUnsubscribe(),this.removeBindings(),this.subscribes.addField("LAST_TRADE_DATE"),this.setHasContent(!1);var n=this.options.instrument,i=[e.QuoteFields.TRADES],r=!1;this.unsubscribe=this.infront.subscribe(n,i,!0,function(i){i.trades&&i.trades.length?t.setHasContent(!0,i):t.setHasContent(!0,{date:t.cache.get(e.CacheKeyFactory.createInstrumentKey(t.options.instrument),"LAST_TRADE_DATE")}),r||(r=!0,(!i.hasOwnProperty(e.MWSConstants.trades)||i[e.MWSConstants.trades].length<t.options.pageItems&&i[e.MWSConstants.trades][0]&&i[e.MWSConstants.trades][0][e.MWSConstants.seq_id]>t.options.pageItems)&&t.infront.snapshot(n,[e.QuoteFields.TRADES],!1,null,t.options.pageItems))},this.options.pageItems);var a=new e.CachedObservableArrayCap(this.infront.getCache(),this.options.pageItems);a.observe(this.binding);var s=e.CacheKeyFactory.createTradesArrayKey(n);a.bindToCache(s);var o=this.infront.getCache().bindToArray(s,this);this.unbinds.push(function(){o(),a.unbindFromCache(),a.unbind(t.binding)})},r.prototype.reload=function(){this.currentPage=0,this.items.clear(),"TIME_DESC"==this.currentSorting?(this.isStreaming=this.infront.isStreaming(),this.highestSequenceID=-1,this.historyHighestSeqID=-1,this.options.instrument&&(this.isStreaming?this.subscribe():this.getHistoricTrades(null))):(this.isStreaming=!1,this.historyHighestSeqID=this.options.pageItems,this.getHistoricTrades(this.historyHighestSeqID))},r.prototype.createRow=function(e,t){return e.instrument=this.options.instrument,this.createRowFromResult(e,e,this.decimals.get())},r.prototype.sortColumnChanged=function(e,n,i){var a=t.createSortByString(e.name,n);a!=this.currentSorting&&(this.currentSorting=a,!this.options.paging||this.pager&&0==this.pager.getCurrentPage()?this.reload():this.pager&&this.pager.setCurrentPage(0)),i&&this.store(r.kMySortingColumnKey,e.name+n)},r.prototype.getStoredColumn=function(){var t=this.getStoredValue(r.kMySortingColumnKey);if(t){var n=t.substr(0,t.length-1),i=t.substr(t.length-1);this.options.defaultSortedColumn=n,"0"==i?this.options.defaultSortOrder=e.SortOrder.Desc:"1"==i&&(this.options.defaultSortOrder=e.SortOrder.Asc)}},r.prototype.pageChanged=function(e,t){0==(this.currentPage=e)?this.reload():((0==t||this.historyHighestSeqID<0)&&(this.historyHighestSeqID=this.highestSequenceID),this.historyHighestSeqID-=this.options.pageItems*(e-t),this.getHistoricTrades(this.historyHighestSeqID))},r.prototype.reInit=function(t){this.setHighestSequenceID(0<t.length?t[0][e.MWSConstants.seq_id]:-1)},r.prototype.itemAdded=function(t,n){this.setHighestSequenceID(Math.max(t[e.MWSConstants.seq_id],this.highestSequenceID))},r.prototype.itemRemoved=function(e,t){},r.prototype.itemMoved=function(e,t,n){},r.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontInstrument]},r.prototype.receiveMessage=function(t){t.type==InterLibraryLink.DataType.infrontInstrument&&(this.newDestroyUI(),this.options.instrument=t.value,null!=t.value&&t.value.hasOwnProperty(e.MWSConstants.ticker)&&t.value.hasOwnProperty(e.MWSConstants.feed)&&this.newInit())},r.prototype.supportsHasContent=function(){return!0},r.kMySortingColumnKey="my-sorting-column",r}(e.CommonListWidgetBase);e.IntradayTradesWidget=i}(Infront||(Infront={})),function(e){e.LanguageOptions=function(){};var t=function(){function t(t){this.languageMap=InfrontUtil.mergeRecursiveCopy(r,e.languageMap),t&&(t.dictionary?this.primary=new n(t.dictionary):t.language&&this.languageMap.hasOwnProperty(t.language)&&(this.primary=new n(this.languageMap[t.language]))),this.default=new n(i)}return t.prototype.get=function(e,t){var n=this.primary?this.primary.get(e,t):null;return(n=n||this.default.get(e,t))||t},t}();e.Language=t;var n=function(){function e(e){this.modules=e}return e.prototype.get=function(e,t){return InfrontUtil.isString(e)&&this.modules.hasOwnProperty(e)&&this.modules[e].hasOwnProperty(t)?this.modules[e][t]:this.getGlobal(t)},e.prototype.getGlobal=function(t){var n=null;if(this.modules.hasOwnProperty(e.kGlobalModuleKey)){var i=this.modules[e.kGlobalModuleKey];n=i.hasOwnProperty(t)?i[t]:null}return n},e.kGlobalModuleKey="global",e}(),i={accessibility:{editRow:"Edit row",deleteRow:"Delete row",expandOptions:"Expand options",addList:"Add new list",edit:"Edit",delete:"Delete",nameList:"Name your list",yearFilter:"Select year to filter",periodSelect:"Select period for table",fundRiskLevelOne:"Fund risk level is ",fundRiskLevelTwo:" out of ",username:"Username",password:"Password",closeButton:"Close button",morningstarLevelOne:"Morningstar rating is",morningstarLevelTwo:" out of ",morningstarLevelThree:" stars.",selectFilter:"Select filter for table.",closeMenu:"Close menu.",searchAndAdd:"Search and add instrument",alertList:"Alerts list table",switch:"Switch button.",dailyChange:"Daily change of value",dailyPercentage:"Daily percentage change",currentVal:"Current value",filterLabel:"Enter text to filter on here",sortAscHistory:"Sorted Ascending. Activate to sort descending",sortDescHistory:"Sorted Descending. Activate to sort ascending",sortAsc:"Sorted Ascending. Activate to sort descending",sortDesc:"Sorted Descending. Activate to unsort",notSorted:"Not sorted. Activate to sort ascending",searchFilter:"Type text to filter on"},global:{cancel:"Cancel",ok:"OK",yes:"Yes",no:"No",confirm_delete:"Delete?",ticker:"Symbol",high:"High",low:"Low",logIn:"Log in",buy:"Buy",sell:"Sell",kilo:"k",mega:"m",total:"Total",snapshot:"Snapshot data. Please refresh page to update."},messages:{loggedIn:"Logged in",tradingLoggedIn:"Logged in to trading",insertOrderWarning:"Confirm order:",dateMoved:"Validity was automatically extended to $DATE$"},tradingLogin:{dialogTitle:"Log in to trading",gateway:"Trading Service",capsLockWarning:"Caps Lock is on"},indexOverview:{turnover:"Turnover",performance:"Performance",down:"Down",unchanged:"Unchg.",up:"Up"},alert:{type:"Type",source:"Source",condition:"Condition",recurrence:"Recurrence",comment:"Comment",enabled:"Enabled",alertError:"Invalid inputs",alertMe:"Alert me if",addAlert:"Add alert",modifyAlert:"Modify Alert",enable:"Enable",yes:"Yes",no:"No",typeInstrument:"Instrument",typeNews:"News",delete:"Delete",once:"Once",renewDaily:"Renew Daily",lastAbove:"Last is above",lastBelow:"Last is below",changeAbove:"Change% is above",changeBelow:"Change % is below",noAlertsSet:"No alerts have been set"},newsList:{widgetTitle:"News",searchPlaceholder:"Search for instrument",headline:"Headline",category:"Category",source:"Source",time:"Time",first:"First page",prev:"Previous page",next:"Next page",allSources:"All news",noRegions:"No regions selected",noFeedsStored:"No feeds stored",quickFilterPlaceholder:"Filter",customFilterPlaceholder:"Save custom filter",customFilters:"Custom filters",sources:"Sources",newsSources:"Sources",noSavedFilters:"No saved filters",product_code:"Tags",showFlashNewsOnly:"Show flash news only",TODAY:"Today",YESTERDAY:"Yesterday",TWO_DAYS:"Two days ago",THREE_DAYS:"Three days ago",FOUR_DAYS:"Four days ago",FIVE_DAYS:"Five days ago",THIS_WEEK:"Last week",LAST_WEEK:"One week ago",THIS_MONTH:"This month",LAST_MONTH:"Last month"},myList:{searchPlaceholder:"Add instrument",addListPlaceholder:"Add list",selectorTitle:"Watchlists",volume:"Volume",quantity:"Quantity",quantity_S:"Qty",avgPrice:"Average price",avgPrice_S:"Avg.P",invested:"Invested",marketValue:"Market value",totalProfit:"Total profit",holdingValues:"Holding values for",emptyList:"Empty list",confirmDelete:"Confirm delete",editList:"Edit list",isReadOnly:"(Read Only)"},quoteList:{expiryDateDropDownTitle:"Expiry Date",underlyingDropDownTitle:"Underlying",issuersDropDownTitle:"Issuers",chainsDropDownTitle:"Chains",all:"All",none:"None"},chainViewer:{searchPlaceholder:"Search for list"},history:{widgetTitle:"Historical prices",show_all:"Show all",dividends_only:"Dividends only",splits_only:"Splits only",date:"Date",exDate:"Ex-date",open:"Open",high:"High",low:"Low",last:"Last",volume:"Volume",turnover:"Turnover",num_trades:"# Trades",dividend:"Dividend",split:"Split"},historicalOverview:{widgetTitle:"Historical overview","1W":"1W","1M":"1M","3M":"3M","6M":"6M","1Y":"1Y","5Y":"5Y",YTD:"YTD"},financialCalendar:{widgetTitle:"Financial calendar",ticker:"Symbol",description:"Description",date:"Date",regions:"Regions",category:"Category",Announcement:"Announcement",ResultDividend:"Results & Dividends",CorporateAction:"Corporate Actions",IPO:"New Listings & IPOs",Dividends:"Dividends",Results:"Results",MacroGeneral:"Economic Indicators",MacroAuction:"Government Auctions",MacroUnknown:"Uncategorized Macro"},pager:{first:"First page",prev:"Previous page",next:"Next page"},orderBook:{widgetTitle:"Orderbook",searchPlaceholder:"Search for instrument",orders:"#",asksize:"A Size",bidsize:"B Size",ask:"Ask",bid:"Bid",bidaskratio:"B/A",spread:"Spread"},ranking:{widgetTitleDefault:"Ranked list",widgetTitleWinners:"Winners",widgetTitleLosers:"Losers",widgetTitleHighestTurnovers:"Highest turnover",widgetTitleHighestVolumes:"Highest volumes",today:"Intraday",lastWeek:"Last week",lastMonth:"Last month",lastYear:"Last year",ytd:"Year to date"},brokerstats:{widgetTitle:"Broker statistics",searchPlaceholder:"Search for instrument",INTRADAY:"Intraday",TWO_DAYS:"2 days",THIS_WEEK:"This week",ONE_WEEK:"1 week",THIS_MONTH:"This month",ONE_MONTH:"1 month",THREE_MONTHS:"3 months",SIX_MONTHS:"6 months",ONE_YEAR:"1 year",YTD:"Year to date",unavailable:"This market no longer deliver broker statistics"},focuswidget:{searchPlaceholder:"Search for instrument"},marketList:{FLAG:"Flag"},intradayTrades:{widgetTitle:"Latest trades",searchPlaceholder:"Search for instrument"},intradayTradesMini:{widgetTitle:"Latest trades",searchPlaceholder:"Search for instrument"},chartResolution:{S:"second",m:"minute",D:"day",W:"week",M:"month"},chart:{volume:"Volume",searchPlaceholder:"Add instrument",indicators:"Indicators",simple_moving_avg:"Simple Moving Average",exponential_moving_avg:"Exponential Moving Average",weighted_moving_avg:"Weighted Moving Average",bollinger_bands:"Bollinger Bands",relative_strength_index:"Relative strength index",stochastic:"Stochastic",average_true_range:"Average True Range",volume_underlay:"Volume Underlay",high_low:"High-Low",historical_volatility:"Volatility (60)",relative_volatility_index:"Rel. Volatility Index (10, 14)",standard_deviation:"Standard Deviation 50",volume_weighted_average_price:"VWAP",MACD:"MACD",beta:"Beta",line:"Line",bar:"Bar",candlestick:"Candlestick",area:"Area",resolutionAuto:"Auto",noChartDataText:"No market data for the given time period",resetButtonText:"Reset chart",saveButtonText:"Save chart",T:"T",S:"S","1D":"1D","24H":"24H","2D":"2D","3D":"3D","5D":"5D","10D":"10D","30D":"30D","1M":"1M","3M":"3M","6M":"6M","1Y":"1Y","5Y":"5Y",YTD:"YTD",ALL:"ALL",close:"Close",change:"Change"},assetsPieChart:{others:"Others",none:"None",unknown:"Unknown",hidden:"Hidden",value:"Value",share:"Share"},multipleValues:{widgetTitle:"Symbol info"},screenerActiveFilters:{removeAllFilters:"Remove all filters",selected:"Selected",to:"to"},orderEntry:{widgetTitle:"New order",advancedOptions:"Advanced",showAdvanced:"Show advanced",hideAdvanced:"Hide advanced",ticker:"Symbol",volume:"Volume",price:"Price",type:"Type",portfolio:"Portfolio",owned:"Current position",orderTotal:"Gross price",tradingPower:"Trading power",limitOrder:"Limit order",validity:"Validity",validityDate:"Validity date",validityTime:"Validity time",today:"Today",gtd:"Good till Date",gtt:"Good till Time",selectDate:"Select date",active:"Active",openVolume:"Open volume",method:"Method",fillAny:"Normal",fillOrKill:"Fill or kill",fillAndKill:"Fill and kill",buyAction:"Buy",buy:"Buy",sellAction:"Sell",sell:"Sell",confirm:"Confirm",confirmCaption:"Confirm order",deleteCaption:"Delete order",cancel:"Cancel",modify:"Modify",delete:"Delete",new:"New",close:"Close",modifyOrder:"Modify order",orderPlaced:"Order placed",orderModified:"Order modified",status:"Status:",tickSizeWarning:"Price violates tick size rules",openVolumeWarning:"Open volume minimum size: ",strategyType:"Strategy",activate:"Set active",deactivate:"Set inactive",comment:"Comment",NORMAL:"Limit",FILL_OR_KILL:"Fill and Kill",FILL_AND_KILL:"Fill or Kill",FILL_OR_NOTHING:"All or Nothing",CROSS:"Cross Order",BEST_POSSIBLE:"Best Possible",AT_MARKET:"At Market",MARKET:"Market",MARKET_TO_LIMIT:"Market To Limit",AT_MARKET_AND_KILL:"At Market And Kill",QUOTE_ORDER:"Request Quote",LIMIT_OR_MARKET_ON_CLOSE:"Funari",STOP_LIMIT:"Stop Limit",STOP_LOSS:"Stop Market",CONTINGENT:"Contingent",FLEX:"Flex",INTEREST:"Interest",ACCEPT:"Accept",PARENT:"Parent",STRATEGY:"Strategy",FIX:"Fix",LIMIT_TO_MARKET:"Limit To Market",BEST_TO_LIMIT:"Best To Limit",MULTI_LEG:"Multileg",MARKET_FOK:"Market Fill or Kill",MARKET_FAK:"Market Fill and Kill",PEGGED:"Pegged",AT_OPEN:"At Open",AT_CLOSE:"At Close",OCO:"OCO",ICEBERG:"Iceberg"},bondsTrading:{buy:"Indfrielse",sell:"Hjemtagelse",spot:"Strakshandel",forward:"Kurskontrakt",forward_date:"Afregningsdato",date:"Afregningsdato",spot_price:"Strakshandel pris",account_num:"Kontonummer",discount:"Fradrag",isin:"Fondskode",premium:"Till\xe6g",coupon:"Kupon",last_updated:"Opdateret",nominal:"Nominel",forward_price:"Terminskurs",place_order:"Gennemf\xf8r",clear_order:"Ryd",direction:"V\xe6lg",instrument:"Papir",deposit_num:"Ejendomsnummer",depot_acc:"Internt depotnummer",maturity_date:"Udl\xf8bsdato",account_details:"Handlen vil blive foretaget p\xe5",pct_fixed:"% fixed",loan_transaction_acc:"L\xe5nesagskonto",free_text:"Fritekst"},orderEntryAdvanced:{widgetTitle:"Advanced Options",stopLoss:"Stop-loss",trailingStopLoss:"Trailing stop-loss",orderMethod:"Order method",openVolume:"Open volume",fillAny:"Fill any",fillAndKill:"Fill and kill",fillOrKill:"Fill or kill",triggerCondition:"Trigger condition",lowerEqual:"Lower/Equal",greaterEqual:"Greater/Equal",triggerPrice:"Trigger price",limitPrice:"Limit price",triggerLimit:"Trigger limit",trailLimit:"Trail limit",deviation:"Deviation",percent:"% Percent",ticks:"Ticks"},compactModifyOrder:{widgetTitle:"Modify order",confirm:"Confirm",modify:"Modify",success:"Modify succeeded",fail:"Modify failed"},positions:{widgetTitle:"Positions"},orders:{widgetTitle:"Orders",deleteAll:"Delete all orders",confirmDelete:"Delete order?",confirmDeleteAll:"Delete all orders?"},trades:{widgetTitle:"Trades",noTradingClick:"Click to log in to trading",noTrading:"Log in to trading to view content"},netTrades:{widgetTitle:"Net trades",net:"Net",quantity:"Qty.",vwap:"VWAP",value:"Value",netQuantity:"Qty.",netValue:"Value",realized:"Realized"},orderWidget:{avgPrice:"Avg. price:",bid:"Bid:",ask:"Ask:",EXCHANGE_ORDER:"Active",OFFLINE_ORDER:"Offline",EXECUTED_ORDER:"Executed",INACTIVE_ORDER:"Inactive",MONITOR_ORDER:"Monitor",PENDING_INSERT_ORDER:"Pending insert",DELETED_ORDER:"Deleted",WORKING_ORDER:"Working",ORDER_REQUEST:"Order Request",stopLoss:"Stop Loss",NORMAL:"Limit",FILL_OR_KILL:"Fill and Kill",FILL_AND_KILL:"Fill or Kill",FILL_OR_NOTHING:"All or Nothing",CROSS:"Cross Order",BEST_POSSIBLE:"Best Possible",AT_MARKET:"At Market",MARKET:"Market",MARKET_TO_LIMIT:"Market To Limit",AT_MARKET_AND_KILL:"At Market And Kill",QUOTE_ORDER:"Request Quote",LIMIT_OR_MARKET_ON_CLOSE:"Funari",STOP_LIMIT:"Stop Limit",STOP_LOSS:"Stop Market",CONTINGENT:"Contingent",FLEX:"Flex",INTEREST:"Interest",ACCEPT:"Accept",PARENT:"Parent",STRATEGY:"Strategy",FIX:"Fix",LIMIT_TO_MARKET:"Limit To Market",BEST_TO_LIMIT:"Best To Limit",MULTI_LEG:"Multileg",MARKET_FOK:"Market Fill or Kill",MARKET_FAK:"Market Fill and Kill",PEGGED:"Pegged",AT_OPEN:"At Open",AT_CLOSE:"At Close",OCO:"OCO",ICEBERG:"Iceberg",BOUGHT:"Bought",SOLD:"Sold"},portfolioSelect:{widgetTitle:"Active portfolio: "},portfolioValues:{widgetTitle:"Values",portfolio_value:"Total portfolio value",overnight_tp:"Overnight TP",intraday_credit:"Intraday credit",total_cash:"Total cash",collateral:"Collateral",credit_limit:"Credit limit",collateral_and_margin:"Collateral and margin",trading_power:"Trading power",cash_balance:"Cash balance",collateral_value:"Collateral value",margin_requirement:"Margin requirement",margin_requirement_equity:"Margin requirement equity",forward_balance:"Forward balance",accrued_debit_interest:"Accrued debit interest",accrued_credit_interest:"Accrued credit interest",open_buys:"Open buys",open_sells:"Open sells",total_invested:"Total invested",total_result:"Total result",change_today:"Change today",handelsramme:"Trading limit",total_invested_nn:"Total invested",sum_cash:"Sum Cash",interest:"Interest",own_capital:"Own Capital",own_capital_morning:"Own Capital Morning",own_capital_change:"Own Capital change today",full_market_value:"Full Market Value",credit:"Credit",pawn_value:"Pawn Value",total_base_result:"Total result",total_base_invested:"Total invested",market_value:"Market value",total_base_market_value:"Market value",total_base_pl_today:"Change today",total_base_pl_today_pct:"Change today %"},putCall:{widgetTitle:"Put / Call",underlying:"Underlying: ",expiry:"Expiry: ",range:"Range: ",all:"All",weekly:"Weekly",forward:"Fwd/Fut",expiryFirstMonth:"First Monthly Expiry",expirySecondMonth:"Second Monthly Expiry",expiryThirdMonth:"Third Monthly Expiry",expiryWeekly:"All Weekly Expiry",none:"None",activeView5:"Active View 5",activeView7:"Active View 7",put:"Put",call:"Call"},stylemap:{value:"Value",blend:"Blend",growth:"Growth",title:"Style map",large:"Large",medium:"Med",small:"Small"},riskLevel:{riskLevel:"Risk"},fundAllocation:{assetTitle:"Asset allocation",countryTitle:"Top Countries",sectorTitle:"Top Sectors"},morningstarRating:{morningstarRating:"Morningstar Rating"},fundInfo:{fundInfo:"Fund info",type:"Type",category:"Category",fundTotalExpense:"Fund total expense",minInitialInvestment:"Min. initial investment",totalAssets:"Total assets"},FundTopHoldings:{widgetTitle:"Top Holdings"},columnChooser:{widgetTitle:"Select Columns",close:"Close",ok:"Apply",cancel:"Cancel",removeAll:"Remove all",resetToDefault:"Reset to default",availableColumns:"Available columns",displayedColumns:"Displayed columns",displayedColumnsNote:"Drag and drop boxes to change column order in the table",filter:"Filter",defaultCategory:"Available columns",unknownColumn:"Unknown"},time:{january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},timeShort:{january:"Jan",february:"Feb",march:"Mar",april:"Apr",may:"May",june:"Jun",july:"Jul",august:"Aug",september:"Sep",october:"Oct",november:"Nov",december:"Dec",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"},dropdowns:{backButtonLabel:"Back",toggleAllButtonLabel:"Toggle All"},columns:{TICKER:"Symbol",FULL_NAME:"Name",ISIN:"ISIN",CURRENCY:"Ccy",CFI:"CFI",MARKET:"Market",INSTRUMENT_TYPE:"Type",INSTRUMENT_SUBTYPE:"Subtype",EXPIRY_DATE:"Expiry date",STRIKE_PRICE:"Strike price",EXPIRY:"ExpDate",STRIKE:"Strike",MIN_ICEBERG_SIZE:"Min. open volume",COMPANY_URL:"Url",FLAG:"Flag",SORT_NU:"Sort number",OPEN_INTEREST:"OI",ISSUER_FULL_NAME:"Issuer name",EUSIPA_CODE:"EUSIPA",ESMA_TYPE:"ESMA Type",SHARE_CAPITAL:"Share cap",Y_SHARE_CAPITAL:"Y Scap",ACC_VOLUME:"Volume",TURNOVER:"Turnover",ONEXCH_VOLUME:"Volume",ONEXCH_TURNOVER:"Turnover",BID:"Bid",ASK:"Ask",BID_SIZE:"Bid Size",ASK_SIZE:"Ask Size",NUM_BIDS:"Bids",NUM_ASKS:"Asks",VWAP:"Vwap",AVG_VOLUME:"Avg. volume",AVG_VALUE:"Avg. value",OPEN:"Open",HIGH:"High",LOW:"Low",LAST:"Last",LAST_VALID:"Last valid",PREVIOUS_CLOSE:"Prev. close",TIME:"Time",LAST_VALID_DATE:"Date",CHANGE:"\xb1",LV_CHANGE:"\xb1",PCT_CHANGE:"\xb1 %",LV_PCT_CHANGE:"\xb1 %",NUM_TRADES:"Trades",GICS:"GICS",NUM_SHARES:"Num. shares",RSI14:"RSI14",MACD:"MACD",MA50:"MA50",MA100:"MA100",MA200:"MA200",CONTRACT_SIZE:"Contract size",TRADING_STATUS:"Trading status",IS_TRADEABLE:"Is tradable",SEGMENT:"Segment",SECONDARY_SEGMENT:"Secondary segment","SEGMENT DESCRIPTION":"Segment description",SECTOR:"Sector",INDIC_PRICE:"Indicative price",INDIC_VOLUME:"Indicative volume",ARROW_LAST:"Last arrow",ARROW_BID:"Bid arrow",ARROW_ASK:"Ask arrow",PHYSICAL_UNIT:"Physical unit",NEXT_COUPON_DATE:"Next coupon date",COUPON_RATE:"Coupon rate",COUPONS_PER_YEAR:"Coupons per year",MATURITY_DATE:"Maturity date",BID_YIELD:"Bid Yield",ASK_YIELD:"Ask Yield",RECOMMENDATION_TYPE:"Sell recommendation",YTD_CLOSE:"YTD close",ONE_W_CLOSE:"1w close",ONE_M_CLOSE:"1m close",THREE_M_CLOSE:"3m close",SIX_M_CLOSE:"6m close",ONE_Y_CLOSE:"1y close",TWO_Y_CLOSE:"2y close",THREE_Y_CLOSE:"3y close",FIVE_Y_CLOSE:"5y close",YTD_CHANGE:"YTD \xb1",ONE_W_CHANGE:"1w \xb1",ONE_M_CHANGE:"1m \xb1",THREE_M_CHANGE:"3m \xb1",SIX_M_CHANGE:"6m \xb1",ONE_Y_CHANGE:"1y \xb1",TWO_Y_CHANGE:"2y \xb1",THREE_Y_CHANGE:"3y \xb1",FIVE_Y_CHANGE:"5y \xb1",YTD_PCT_CHANGE:"YTD \xb1 %",ONE_W_PCT_CHANGE:"1w \xb1 %",ONE_M_PCT_CHANGE:"1m \xb1 %",THREE_M_PCT_CHANGE:"3m \xb1 %",SIX_M_PCT_CHANGE:"6m \xb1 %",ONE_Y_PCT_CHANGE:"1y \xb1 %",TWO_Y_PCT_CHANGE:"2y \xb1 %",THREE_Y_PCT_CHANGE:"3y \xb1 %",FIVE_Y_PCT_CHANGE:"5y \xb1 %",YTD_HIGH:"YTD high",ONE_W_HIGH:"1w high",ONE_M_HIGH:"1m high",THREE_M_HIGH:"3m high",SIX_M_HIGH:"6m high",ONE_Y_HIGH:"1y high",TWO_Y_HIGH:"2y high",THREE_Y_HIGH:"3y high",FIVE_Y_HIGH:"5y high",YTD_LOW:"YTD low",ONE_W_LOW:"1w low",ONE_M_LOW:"1m low",THREE_M_LOW:"3m low",SIX_M_LOW:"6m low",ONE_Y_LOW:"1y low",TWO_Y_LOW:"2y low",THREE_Y_LOW:"3y low",FIVE_Y_LOW:"5y low",LAST_TRADE:"Last trade",LAST_TRADE_DATE:"Last trade date",MARGIN_RATE:"Margin rate",IS_SHORTABLE:"Shortable",ONE_Y_PERF:"1y \xb1 %",TWO_Y_PERF:"2y \xb1 %",THREE_Y_PERF:"3y \xb1 %",FIVE_Y_PERF:"5y \xb1 %",TEN_Y_PERF:"10y \xb1 %",YTD_Y_PERF:"YTD \xb1 %",ONE_M_PERF_SEK:"1m \xb1 %",THREE_M_PERF_SEK:"3m \xb1 %",SIX_M_PERF_SEK:"6m \xb1 %",ONE_Y_PERF_SEK:"1y \xb1 %",TWO_Y_PERF_SEK:"2y \xb1 %",THREE_Y_PERF_SEK:"3y \xb1 %",FIVE_Y_PERF_SEK:"5y \xb1 %",TEN_Y_PERF_SEK:"10y \xb1 %",YTD_PERF_SEK:"YTD \xb1 %",ONE_D_PERF_SEK:"1d \xb1 %",ONE_W_PERF_SEK:"1w \xb1 %",NAME:"Name",FULLNAME:"Full name",BUYS:"Buys",SELLS:"Sells",INT_TRADES:"Int. trades",BUY_VOLUME:"Buy vol.",SELL_VOLUME:"Sell vol.",INT_VOLUME:"Int. vol.",TOTAL_VOLUME:"Total vol.",BUY_VALUE:"Buy val.",SELL_VALUE:"Sell val.",INT_VALUE:"Int. val.",AVG_BUY:"Avg. buy",AVG_SELL:"Avg. sell",NET_BUY_VALUE:"Net buy",NET_BUY_VOLUME:"Net buy vol.",HIT_VALUE:"Hit",HIT_VALUE_PCT:"Hit %",TAKE_VALUE:"Take",TAKE_VALUE_PCT:"Take %",TOTAL_VALUE:"Tot. val.",TOTAL_VALUE_PCT:"Tot. val. %",TRADES:"Trades",TRADES_PCT:"Trades %",SYM_TURN:"Sym. turnover",SYM_TURN_PCT:"Sym. turnover %",VOLUME:"Volume",BUYER:"Buyer",SELLER:"Seller",BUYER_FULL:"Buyer",SELLER_FULL:"Seller",TYPE:"Type",SEQ_ID:"Seq. ID",ORDER_ID:"Order ID",FAIL_CODE:"Fail code",ERROR_MESSAGE:"Error",PORTFOLIO:"Portfolio",CUSTOMER_ID:"Customer ID",BUY_OR_SELL:"Buy/Sell",PRICE:"Price",AVG_PRICE:"Avg. Price",S_AVG_PRICE:"Avg. Price",OPEN_VOLUME:"Open volume",ORDER_TYPE:"Order type",CREATED:"Created",CHANGED:"Changed",VALID_UNTIL:"Valid until",S_VALID_UNTIL:"Valid until",ORDER_STATUS:"Order status",VOLUME_FILLED:"Filled",COMMENT:"Comment",ACCUMULATED_TRADED:"Acc. traded",TRANSACTION_ID:"Transaction ID",EXCHANGE_ORDER_ID:"Exch. order ID",READ_ONLY:"Read only",S_TRIGGER_PRICE:"Trigger price",FREETXT:"Comments",S_CLIENT_SPOT:"Client spot",S_DISC_PREMIUM:"till\xe6g/fradrag",S_LOAN_TRANS_ACC:"Loan acc",S_FORWARD_DATE:"Forward date",TRIGGERCOND:"Trigger condition",TRIGGERPX:"Trigger price",ORDERLIMITPX:"Limit",TRIGGERVALID:"Valid until",TRAILLIMIT:"Trail limit",PCTFROMLAST:"Deviation",TICKSFROMLAST:"Deviation","-BESTPX":"Ref. price","-ENTRYPX":"Entry price","-FORETGTPX":"Exp. price","-TRIGGERATPX":"Trigger price",VOLUME_ADV_PCT:"Vol/ADV%",TRADE_ID:"Trade ID",TRADE_TIME:"Trade time",FEE:"Fee",FOREX_RATE:"FX rate",INVESTED:"Invested",EXCHANGE_TRADE_ID:"Exch. trade id",EXCHANGE_TRADE_ID2:"Exch. trade id 2",DELETED_TRADE:"Deleted trade",VERIFIED_TRADE:"Verified trade",EXEC_MARKET:"Exec. Market",AMOUNT:"Amount",MULTIPLIER:"Multiplier",COLLATERAL:"Collateral",PROFIT:"Profit",BASE_CURRENCY:"Base ccy",BASE_INVESTED:"Base Invested",YTD_BASE_INVESTED:"YTD base invested",BASE_VALUE:"Base Value",MARKET_VALUE:"Value",BASE_MARKET_VALUE:"Base Value",BASE_RESULT:"Base Result",RESULT_VALUE:"Result",BASE_RESULT_VALUE:"Base Result",MARKET_PRICE:"Market price",PL_TODAY:"Todays P/L",RESULT_PCT:"Result %",BASE_RESULT_PCT:"Result %",OFFHIGH:"OffHi %",OFFLOW:"OffLo %",GAP_PCT:"Gap %",OPEN_LAST_CHANGE_PCT:"O \xb1 %",NET_VOLUME:"Net vol.",S_DATETIME:"Time",S_MIXED_DEVIATION:"Deviation",S_POS_LAST:"Last",S_ORDER_VALUE:"Order value",S_COLLATERAL:"Collateral",S_TRADED_VALUE:"Traded value",S_MARKET_PRICE:"Market price",AVG_DAILY_VOLUME:"Average Daily Volume",INFRONT_SECTOR:"Sector",PCT_SPREAD:"% Spread",RANGE:"Range","Volume/ADV% ":"Range",ADV:"Avg. Daily Volume",MIN_INIT_INVESTMENT:"Min initial investment",START_DATE:"Start date",INVESTMENT_MANDATE:"Investment mandate",FUND_PROSPECTIVE_BOOK_VALUE_YIELD:"Price/Book",FUND_PROSPECTIVE_DIVIDEND_YIELD:"Price/Dividend",PROSPECTIVE_BOOK_VALUE_YIELD:"Price/Book",PROSPECTIVE_EARNINGS_YIELD:"Price/Earnings",FUND_TYPE:"Type",FUND_CATEGORY:"Category",FUND_TOTAL_ASSETS:"Total assets",FUND_TOTAL_EXPENSE:"Expenses",FOR_SALE_IN:"For sale in",FOR_SALE_IN_SHORT:"For sale in",FUND_SHARPE_RATIO:"Sharpe ratio 1y",FUND_STD_DEV_1Y:"Std.dev. 1y",ISSUER:"Issuer",TRACKING_ERROR:"Tracking error",ACTIVE_SHARE:"Active share",HOMEPAGE:"homepage",RISK_LEVEL:"Risk level",STAR_RATING:"Rating",STAR_RATING_3Y:"Rating 3y",FUND_ONGOING_CHARGE:"Ongoing charge",COUNTRY:"Origin",FEED:"Feed",PROVIDER:"Provider",SERVICE:"Service",ACCESS:"Access",MAX_DELAY_SECS:"Max Delay",MIN_DELAY_SECS:"Min Delay"},chartIndicatores:{period:"Period",standardDeviation:"Standard deviation",midLine:"Mid Line",upperLine:"Upper Line",lowerLine:"Lower Line","H-L":"HiLo",firstEMAperiod:"First EMA Period",secondEMAperiod:"Second EMA Period",signalPeriod:"Signal Period",macdSignal:"MACD Signal",macdHistogram:"MACD Histogram",MACD:"MACD",MACD_full_name:"MACD",SO:"SO",stochasticOscillator:"Stochastic Oscillator",periodForK:"Period for %K",phSlowing:"%K Slowing",periodForD:"Period for %D",psKO:"%K (SO)",pdMA:"%D (MA)",SMA:"SMA",simpleMovingAverage:"Simple Moving Average",EMA:"EMA",exponentialMovingAverage:"Exponential Moving Average",WMA:"WMA",weightedMovingAverage:"Weighted Moving Average",BB:"BB",boolingerBands:"Bollinger Bands",RSI:"RSI",relativeStrengthIndex:"Relative Strength Index",ATR:"ATR",averageTrueRange:"Average True Range",ATR30:"ATR30"},companyFundamentals:{widgetTitle:"Company Fundamentals",noDataAvailableLabel:"No fundamentals data available"},companyDescription:{widgetTitle:"Company Description"},wire:{notConnected:"Not connected",setup:"Setup",wireSettings:"Customize your wire",sources:"Wire sources",myAlerts:"My alerts",motionDetection:"Market monitoring",sliderLabelAll:"Everything",sliderLabelOnlyImportant:"Only important",watchlist:"Watchlist",watchlistDesc:"Add instruments from a watchlist",markets:"Markets",marketsDesc:"Add one or more markets",selectMarkets:"Select markets",news:"News",noiseCancelling:"News story filter",showNews:"News",newsSlider:"Filter",showNewsDesc:"Display news articles and flash news",showMotionDetection:"Activate market monitoring",motionSlider:"Filter",noList:"- None selected -",alerts:"Alerts",labelWatchList:"Add instruments from a watch list",labelMarkets:"Add one or more markets",labelNoiseCancel:"A higher threshold filters away less important items",labelMyAlerts:"Alert me when my custom alerts are triggered",expandLabel:"items",expandLabelNews:"articles about this",collapseLabel:"Show only",last:"Last",change:"Today",ytd_change:"YTD",minutesAgo:"minutes ago",minuteAgo:"minute ago",now:"Just now",equityCalendarEvents:"Equity calendar",macroCalendarEvents:"Economic indicators",alertTriggered:"Alert Triggered",openCalendar:"Open calendar",labelActual:"Act.",labelExpected:"Exp.",labelPrevious:"Prv.",labelType:"Type",labelCompany:"Company",labelTime:"Time",up:"up",down:"down",calendarType_1:"IPO",calendarType_2:"Earnings",calendarType_3:"Dividend",calendarType_4:"General Meeting",macroType_1:"GDP",macroType_2:"Inflation",macroType_3:"PMI",macroType_4:"CPI",macroType_5:"Ifo",macroType_6:"Consumer Sentiment",macroType_7:"Manufacturing Outlook",macroType_8:"CFNAI",macroType_9:"Business Sent",macroType_10:"Retail Sales Index",macroType_11:"Business Activity",macroType_12:"Residential Sales",motionDetectionType_1:"Large price movement detected: [symbol] [direction] [value]% from opening",motionDetectionType_2:"Price break daily high/low",motionDetectionType_3:"High volume detected: [symbol] traded [value] x Average Daily Volume",motionDetectionType_4:"Technical signal",motionDetectionType_5:"Index Deviation detected: [symbol] [direction] [value]% since opening, while the index is [ix-direction] [sub-value]%",motionDetectionType_6:"Technical signal",motionDetectionType_7:"Recent news",motionDetectionType_8:"Fast Mover: [symbol] [direction] [value]% in the last 5 minutes",motionDetectionType_9:"Technical signal",motionDetectionType_10:"Large trade detected on [symbol] : [value] @ [sub-value]",motionDetectionType_11:"Large trade (deferred) detected on [symbol] : [value] @ [sub-value]",highLowSubtype_1:"Price break 1 week high",highLowSubtype_2:"Price break 1 month high",highLowSubtype_3:"Price break 3 month high",highLowSubtype_4:"Price break 6 month high",highLowSubtype_5:"Price break 1 year high",highLowSubtype_6:"Price break 2 year high",highLowSubtype_7:"Price break 3 year high",highLowSubtype_8:"Price break 5 year high",highLowSubtype_9:"Price break 1 week low",highLowSubtype_10:"Price break 1 month low",highLowSubtype_11:"Price break 3 month low",highLowSubtype_12:"Price break 6 month low",highLowSubtype_13:"Price break 1 year low",highLowSubtype_14:"Price break 2 year low",highLowSubtype_15:"Price break 3 year low",highLowSubtype_16:"Price break 5 year low",maCross_1:"last > MA 50",maCross_2:"last > MA 100",maCross_4:"last > MA 200",maCross_8:"MA 50 > MA 100",maCross_16:"MA 50 > MA 200",maCross_32:"MA 100 > MA 200",maCross_64:"last < MA 50",maCross_128:"last < MA 100",maCross_256:"last < MA 200",maCross_512:"MA 50 < MA 100",maCross_1024:"MA 50 < MA 200",maCross_2048:"MA 100 < MA 200"},calculatorStatus:{statusCode_200:"Ok",statusCode_400:"One or more input fields are invalid",statusCode_401:"Bad or expired access token",statusCode_402:"Payment required",statusCode_403:"Forbidden",statusCode_404:"Stored object not found",statusCode_408:"Timeout",statusCode_409:"Conflict",statusCode_500:"Internal server error encountered",statusCode_590:"Invalid response from access server"},swapCalculator:{widgetTitle:"Swap Calculator",tabMain:"Main",tabCashFlow:"Cash Flow",tabOther:"Other",parameters:"Parameters",notional:"Notional",currency:"Currency",startDate:"Start Date",maturityDate:"Maturity Date",valueDate:"Value Date",buttonPay:"Pay",buttonReceive:"Receive",leg1Fixed:"Leg 1 - Fixed",leg2Float:"Leg 2 - Float",fixedRate:"Fixed Rate (%)",spread:"Spread (bp)",payFrequency:"Pay Frequency",firstCoupon:"First Coupon",dayCount:"Day Count",monthly:"Monthly",quarterly:"Quarterly",four_month_interval:"Four Monthly",semi_annually:"Semi Annually",annually:"Annually",german_30_360:"30/360",german_30_365:"30/365",french_act_360:"Act/360",english_act_365:"Act/365",isma_act_act:"Act/Act",isma_30e_360:"30e/360",valuationResults:"Valuation Results",leg1NPV:"Leg 1 NPV",leg2NPV:"Leg 2 NPV",NPV:"NPV",premium:"Premium",parRate:"Par Rate (%)",principal:"Principal",accrued:"Accrued",marketValue:"Market Value",colDate:"Date",colFloatingRate:"Floating Rate %",ColFloatingCashFlow:"Floating Cash Flow",colFixedRate:"Fixed Rate",colFixedCashFlow:"Fixed Cash Flow",colNetCashFlow:"Net Cash Flow",colDiscountFactor:"Discount Factor",colNetPresentValue:"Present Value"},bondsCalculator:{widgetTitle:"Bonds Calculator",tabMain:"Main",tabCashFlow:"Cash Flow",tabOther:"Other",searchPlaceholder:"Search for Bond",bondType:"Bond Type",currency:"Currency",nominalAmount:"Nominal Amount",valueDate:"Value Date",issueDate:"Issue Date",lastCouponDate:"Last Coupon Date",firstCouponDate:"First Coupon Date",fixedRate:"Fixed Rate (%)",maturityDate:"Maturity Date",redemptionPrice:"Redemption Price",couponFrequency:"Coupon Frequency",dayCountConvention:"Day Count",taxRatePercent:"Tax Rate (%)",calculationMethod:"Calculation Method",yieldPercent:"Yield (%)",yield:"Yield",valuationResults:"Valuation Results",cleanPricePercent:"Clean Price",grossYieldPercent:"Gross Yield",remainingMaturity:"Remaining Maturity (years)",netYieldPercent:"Net Yield",duration:"Duration",accruedInterestDays:"Accrued Interest Days",modifiedDuration:"Modified Duration",accruedInterest:"Accrued Interest",basisPointValue:"Basis Point Value",dirtyPricePercent:"Dirty Price",convexity:"Convexity",fixedBond:"Fixed",floatingBond:"Floating",monthly:"Monthly",quarterly:"Quarterly",four_month_interval:"Four Monthly",semi_annually:"Semi Annually",annually:"Annually",german_30_360:"30/360",german_30_365:"30/365",french_act_360:"Act/360",english_act_365:"Act/365",isma_act_act:"Act/Act",isma_30e_360:"30e/360",colDate:"Date",colDescription:"Description",colAmount:"Amount",colBalance:"Balance",colAmountPercent:"Amount (%)",colBalancePercent:"Balance (%)"}},r={en:i};e.languageMap={}}(Infront||(Infront={})),function(e){var t,n;(n=t=e.MarketListFilters||(e.MarketListFilters={}))[n.BI=0]="BI";var i=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.widgetTitle=null,n.columns=["FLAG","FEED","SERVICE"],n.linkAction=e.LinkAction.Append,n.filters=[],n}return __extends(n,t),n}(e.CommonListOptions);e.MarketListWidgetOptions=i;var r=function(n){function r(t,i,r){var a=n.call(this,t,i,"marketList",r)||this;return a.getStoredColumn(),a.setColumnManager(),a.initiallySelectedFeedNumber=null,a.feeds=new e.ObservableArray,a.filters=[],a.targetManager=new InfrontUtil.LinkTargetManager,a.isinTargetManager=new InfrontUtil.LinkTargetManager,a.showProgressIndicator=new e.Observable,a.showProgressIndicator.set(!1),a.options.selectedFeedNumber&&(a.initiallySelectedFeedNumber=a.options.selectedFeedNumber),a.options.filters&&(a.filters=a.options.filters),a}return __extends(r,n),r.prototype.setListItems=function(){this.itemsToShow=new e.ContinouslySortedColumnCacheKeyObservableArray(this.options.sortable?this.columnManager.currentlySortedColumn:null,this.columnManager.currentSortOrder,this.cache),this.feedsToShow=this.itemsToShow},r.prototype.setColumnManager=function(){this.columnManager=new e.MarketListColumnManager(this.options,this.infront,this.infrontUI)},r.prototype.returnDefaultWidgetOptions=function(){return new i},r.prototype.newInit=function(){this.flagColumnIndex=-1<this.options.columns.indexOf("FLAG")?this.options.columns.indexOf("FLAG"):void 0,this.options.expandableRows&&(this.flagColumnIndex+=1),n.prototype.newInit.call(this)},r.prototype.newBuildUI=function(){var t=this,i=new e.DataOptions;i.onError=function(e,t){IDS.log("MarketListWidget: ",e)},i.onData=function(e){e.forEach(function(e){t.passesFilters(e)&&(t.addMarket(e),t.feedsToShow.push(e))}),t.createAndBindRootElement(),n.prototype.newBuildUI.call(t)},this.infront.marketLists(i)},r.prototype.addMarket=function(t){this.feeds.push(t),this.columnManager.createComputedFieldsInCache(t,e.CacheKeyFactory.createFeedKey(t.feed)),this.cache.update(e.CacheKeyFactory.createFeedKey(t.feed),{Market:t})},r.prototype.passesFilters=function(e){var n=!0;return this.filters.forEach(function(i){switch(i){case t.BI:if(e.feed<2e5){n=!1;break}}}),n},r.prototype.createAndBindRootElement=function(){if(this.widgetTitle){var t=document.createElement("div"),n=document.createElement("span");n.innerHTML=this.widgetTitle,t.appendChild(n);var i=document.createElement("span");i.innerHTML="",t.appendChild(i);var r=document.createElement("span");r.innerHTML="",t.appendChild(r),this.element.appendChild(t)}var a=this.createRootUI();this.options.className&&InfrontUtil.addClassName(a.root,this.options.className);var s=this.createHeaderRow();a.headerContainer.appendChild(s),this.element.appendChild(a.root),this.binding=new e.ArrayBinding(a.bodyContainer,this,this),this.feeds.observe(this.binding),this.columnManager.updateDefaultContent(),this.progressIndicator=new e.ProgressIndicator(this.element),this.progressIndicator.observe(this.showProgressIndicator)},r.prototype.createRow=function(t,n){var i=this,r=this.createRowFromResult(n,t,2);if(this.options.rowSelectable&&this.addEventListener(r,"click",function(t){i.selectedRow&&InfrontUtil.removeClassName(i.selectedRow,e.CssConstants.kCellActiveRow),i.selectedRow=r,InfrontUtil.addClassName(i.selectedRow,e.CssConstants.kCellActiveRow)}),this.initiallySelectedFeedNumber&&t.feed==this.initiallySelectedFeedNumber&&(this.selectedRow&&InfrontUtil.removeClassName(this.selectedRow,e.CssConstants.kCellActiveRow),this.selectedRow=r,InfrontUtil.addClassName(this.selectedRow,e.CssConstants.kCellActiveRow)),InfrontUtil.isNumber(this.flagColumnIndex)){var a="cell-flag cell-flag-"+e.Countries.getAlpha2(t.country).toLowerCase();r.children[this.flagColumnIndex].innerHTML="";var s=document.createElement("img");s.setAttribute("aria-label","country flag: "+(""!=e.Countries.getAlpha2(t.country).toLowerCase()?e.Countries.getAlpha2(t.country).toLowerCase():"Infront")),s.className=a,r.children[this.flagColumnIndex].appendChild(s)}return this.options.layout===e.ListLayout.DIV?r.parentElement:r},r.prototype.rowClicked=function(t){if(this.options.onFeedSelected){var n=e.CacheKeyFactory.createFeedKey(t.feed);this.options.onFeedSelected(this.cache.get(n,"Market"))}},r.prototype.sortColumnChanged=function(e,t,n){this.options.sortable&&(this.feedsToShow.setSortColumn(e,t),n&&this.store(r.kMySortingColumnKey,e.name+t))},r.prototype.getStoredColumn=function(){var t=this.getStoredValue(r.kMySortingColumnKey);if(t){var n=t.substr(0,t.length-1),i=t.substr(t.length-1);this.options.defaultSortedColumn=n,"0"==i?this.options.defaultSortOrder=e.SortOrder.Desc:"1"==i&&(this.options.defaultSortOrder=e.SortOrder.Asc)}else this.options.defaultSortedColumn=0,this.options.defaultSortOrder=e.SortOrder.Desc},r.prototype.linkEvent=function(t){if(this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,t),this.isinTargetManager.isLinked()){var n=this.cache.get(e.CacheKeyFactory.createInstrumentKey(t),[e.MWSConstants.feed,e.MWSConstants.isin]),i=InterLibraryLink.DataType.isin;this.isinTargetManager.updateTargets(i,n)}},r.prototype.htmlElementTreeAdded=function(e,t,n){this.showProgressIndicator.set(!1),this.columnManager.htmlElementTreeAdded(e,t,n)},r.prototype.htmlElementTreeRemoved=function(e,t,n){this.columnManager.htmlElementTreeRemoved(e,t,n)},r.prototype.htmlElementTreeMoved=function(e,t,n,i){this.columnManager.htmlElementTreeMoved(e,t,n,i)},r.prototype.link=function(e){var t=e.accepts();-1!=t.indexOf(InterLibraryLink.DataType.infrontInstrument)?this.targetManager.addTarget(e):-1<t.indexOf(InterLibraryLink.DataType.isin)&&this.isinTargetManager.addTarget(e)},r.prototype.unlink=function(e){this.targetManager.removeTarget(e),this.isinTargetManager.removeTarget(e)},r.kMySortingColumnKey="my-sorting-column",r}(e.CommonListWidgetBase);e.MarketListWidget=r}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rememberCanceledLogin=!0,t.fields=[],t}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.InstrumentValuesWidgetOptions=t;var n,i,r=function(n){function i(t,i,r){var a=n.call(this,t,i,"instrumentvalueswidget",r)||this;a.columns=[],a.hasContent=!0;for(var s=0;s<a.options.fields.length;s++){var o=e.FieldsHelper.createFieldFromSpec(a.options.fields[s],a.infrontUI.languageHandler);o&&o.isValid()&&a.columns.push(o)}return a.subscribes.addFields(e.FieldsHelper.getSubscriptionFieldsArray(a.columns)),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){var t=this;if(this.options.instrument){var i=new a;i.columns=this.columns,i.useOriginal=!0,i.cacheKey=e.CacheKeyFactory.createInstrumentKey(this.options.instrument),i.layout=this.options.layout,i.widgetTitle=this.options.widgetTitle,this.infront.getFeedHandler().getFeed(this.options.instrument.feed,function(n){i.decimals=n&&n.hasOwnProperty(e.MWSConstants.decimals)?n.decimals:e.UI.kDefaultDecimals,t.widget=new s(t.element,t.infrontUI,i)}),-1<this.options.fields.indexOf("IS_SHORTABLE")||-1<this.options.fields.indexOf("MARGIN_RATE")?(this.infrontUI.ensureTradingLoggedIn(this.options.rememberCanceledLogin),this.infrontUI.AddTradingManagerObserver(this)):this.newSubscribe(),this.options.hasContentCallback&&!this.hasContent&&this.options.hasContentCallback(!0),this.hasContent=!0}else this.options.hasContentCallback&&this.hasContent?(this.hasContent=!1,this.options.hasContentCallback(!1)):this.hasContent=!1;n.prototype.newInit.call(this)},i.prototype.newDestroyUI=function(){this.infrontUI.RemoveTradingManagerObserver(this),this.widget&&(this.widget.destroy(),this.widget=null),n.prototype.newDestroyUI.call(this)},i.prototype.currentPortfolioChanged=function(e){},i.prototype.availablePortfoliosChanged=function(e){},i.prototype.currentPortfolioReady=function(e){this.newSubscribe()},i}(e.SingleInstrumentWidgetBase);e.InstrumentValuesWidget=r,(i=n=e.MultipleValuesWidgetLayout||(e.MultipleValuesWidgetLayout={}))[i.VERTICAL=0]="VERTICAL",i[i.TABLE_ROW=1]="TABLE_ROW";var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=n.TABLE_ROW,t}return __extends(t,e),t}(e.WidgetOptions);e.MultipleValuesWidgetOptions=a;var s=function(t){function i(e,n,r){var a=t.call(this,e,n,i.kLanguageKey,r)||this;return a.subWidgets=[],a}return __extends(i,t),i.prototype.returnDefaultWidgetOptions=function(){return new a},i.prototype.newBuildUI=function(){var i=e.WidgetDOMFactory.create_WMultipleValues_DOM(this.element,this.widgetTitle),r=document.createDocumentFragment();this.options.layout==n.TABLE_ROW?this.buildTableRowUI(r):this.options.layout==n.VERTICAL&&this.buildVerticalUI(r),i.appendChild(r),t.prototype.newBuildUI.call(this)},i.prototype.buildVerticalUI=function(t){InfrontUtil.addClassName(this.element,e.CssConstants.kInstrumentValuesVertical);var n=document.createElement("table");InfrontUtil.addClassName(n,"cell-table");for(var i=0;i<this.options.columns.length;i++){var r,a=document.createElement("tr"),s=document.createElement("td");this.options.columns[i].heading?(r=document.createElement("td"),InfrontUtil.addClassName(r,e.CssConstants.kInstrumentValuesVerticalHeading),r.innerHTML=this.options.columns[i].heading,a.appendChild(r)):s.colSpan=2,InfrontUtil.addClassName(s,e.CssConstants.kInstrumentValuesVerticalValue),a.appendChild(s);var o=new e.CachedValueWidget(s,this.infrontUI,this.createValueWidgetOpts(this.options.columns[i]));this.subWidgets.push(o),o.column.genericClass&&InfrontUtil.addClassName(s,o.column.genericClass),o.column.specificClass&&InfrontUtil.addClassName(s,o.column.specificClass),n.appendChild(a)}t.appendChild(n)},i.prototype.buildTableRowUI=function(t){InfrontUtil.addClassName(this.element,e.CssConstants.kInstrumentValuesHorizontal);for(var n=document.createElement("tr"),i=document.createElement("tr"),r=0;r<this.options.columns.length;r++){var a=document.createElement("td");i.appendChild(a);var s=new e.CachedValueWidget(a,this.infrontUI,this.createValueWidgetOpts(this.options.columns[r]));this.subWidgets.push(s);var o=document.createElement("th");o.innerHTML=s.column.heading,n.appendChild(o),s.column.genericClass&&(InfrontUtil.addClassName(a,s.column.genericClass),InfrontUtil.addClassName(o,s.column.genericClass)),s.column.specificClass&&(InfrontUtil.addClassName(a,s.column.specificClass),InfrontUtil.addClassName(o,s.column.specificClass+"--header"))}var l=document.createElement("table");InfrontUtil.addClassName(l,"cell-table");var c=document.createElement("thead"),d=document.createElement("tbody");c.appendChild(n),l.appendChild(c),d.appendChild(i),l.appendChild(d),t.appendChild(l)},i.prototype.createValueWidgetOpts=function(t){var n=new e.CachedValueWidgetOptions;return n.useOriginal=!0,n.column=t,n.rootElement="span",n.decimals=this.options.decimals,n.cacheKey=this.options.cacheKey,n.cacheKeyConverter=this.options.cacheKeyConverter,n},i.prototype.newDestroyUI=function(){for(;0<this.subWidgets.length;)this.subWidgets.pop().destroy();InfrontUtil.removeClassName(this.element,e.CssConstants.kInstrumentValuesHorizontal),InfrontUtil.removeClassName(this.element,e.CssConstants.kInstrumentValuesVertical),t.prototype.newDestroyUI.call(this)},i.kLanguageKey="multipleValues",i}(e.WidgetBase);e.MultipleValuesWidget=s;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=null,t}return __extends(t,e),t}(e.PopupOptions);e.ExtendedTableRowPopupOptions=o;var l=function(e){function t(i,r,o,l){var c=e.call(this,i,r,l)||this;c.options=InfrontUtil.deepCopy(l),c.options.width=null!=l.width?l.width:l.columns.length*t.kDefaultCellWidth;var d=new a;return d.columns=c.options.columns,d.cacheKey=c.options.cacheKey,d.cacheKeyConverter=c.options.cacheKeyConverter,d.layout=n.TABLE_ROW,d.widgetTitle=null,c.widget=new s(c.getContent(),o,d),InfrontUtil.addEventListener(c.getContent(),"click",function(e){e.stopPropagation()}),c}return __extends(t,e),t.prototype.destroy=function(){this.widget.destroy(),this.widget=null,e.prototype.destroy.call(this)},t.kDefaultCellWidth=60,t}(e.Popup);e.ExtendedTableRowPopup=l}(Infront||(Infront={})),function(e){var t=IDS.StorageXmlTags,n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.PopupOptions);e.HoldingValuesPopupOptions=n;var i=function(n){function i(e,t,i,r,a,s){var o=n.call(this,e,t,a)||this;return o.cancelClickListener=function(){event.target!=o.container&&o.container&&!o.container.contains(event.srcElement)&&o.cancelClick()},o.keyUp=function(e){switch(e.code){case"Enter":o.inputIsValid()&&o.okClick();break;case"Escape":o.cancelClick()}},o.options=a,o.entry=s,o.caption=i,o.languageHandler=r,o.doBuildUI(),o}return __extends(i,n),i.prototype.doBuildUI=function(){var t=this;this.disableOk=new e.Observable,this.disableOk.set(!1),this.volumeBinding=new e.TextInputBinding,this.volumeBinding.setValidator(function(e){return null==e||InfrontUtil.isIntegerString(e)}),this.volumeBinding.setNumeric(!0),this.volumeBinding.observe(function(e){return t.volumeInputChanged(e)}),InfrontUtil.setZeroTimeout(function(){t.volumeBinding.requestFocus(),t.volumeBinding.getElement().select()}),this.priceBinding=new e.TextInputBinding,this.priceBinding.setValidator(function(e){return null==e||InfrontUtil.isNumeric(e)}),this.priceBinding.setNumeric(!0),this.priceBinding.observe(function(e){return t.priceInputChanged(e)}),this.investedBinding=new e.TextInputBinding,this.investedBinding.setValidator(function(e){return null==e||InfrontUtil.isNumeric(e)}),this.investedBinding.setNumeric(!0),this.investedBinding.observe(function(e){return t.investedInputChanged(e)}),this.setValues(),e.WidgetDOMFactory.create_CHoldingValuesPopup_DOM(this.content,this.caption,this.volumeBinding,this.priceBinding,this.investedBinding,this.disableOk,function(){return t.okClick()},function(){return t.cancelClick()},function(){return t.selectClick()},this.languageHandler),InfrontUtil.addEventListener(document.body,"click",this.cancelClickListener),InfrontUtil.addEventListener(this.container,"keyup",this.keyUp),this.changed=!1},i.prototype.setValues=function(){var e=this.entry.getValue(t.HoldingAvgPrice);e&&this.priceBinding.set(InfrontUtil.formatNumber(InfrontUtil.parseNumber(e),this.entry.getDecimals()),!0);var n=this.entry.getValue(t.HoldingVolume);n&&this.volumeBinding.set(n,!0)},i.prototype.inputIsValid=function(){var e=this.priceBinding.get(),t=this.volumeBinding.get(),n=this.investedBinding.get();return(null==e||InfrontUtil.isNumeric(e))&&(null==t||InfrontUtil.isIntegerString(t)&&(null==n||InfrontUtil.isNumeric(n)))},i.prototype.validateInput=function(){this.disableOk.set(!this.inputIsValid())},i.prototype.volumeInputChanged=function(e){if(this.changed=!0,this.holdingVolume=InfrontUtil.parseNumber(e),0<this.holdingAvgPrice){var t=this.holdingVolume*this.holdingAvgPrice;this.holdingInvested!=t&&0<t&&this.investedBinding.set(InfrontUtil.formatNumber(t,this.entry.getDecimals()),!1)}this.validateInput()},i.prototype.priceInputChanged=function(e){if(this.changed=!0,this.holdingAvgPrice=InfrontUtil.parseNumber(e),0<this.holdingVolume&&!isNaN(this.holdingVolume)){var t=this.holdingVolume*this.holdingAvgPrice;this.holdingInvested!=t&&0<t&&this.investedBinding.set(InfrontUtil.formatNumber(t,this.entry.getDecimals()),!1)}this.validateInput()},i.prototype.investedInputChanged=function(e){if(this.changed=!0,this.holdingInvested=InfrontUtil.parseNumber(e),0<this.holdingVolume&&!isNaN(this.holdingVolume)){var t=this.holdingInvested/this.holdingVolume;this.holdingAvgPrice!=t&&0<this.holdingVolume&&(this.priceBinding.set(InfrontUtil.formatNumber(t,this.entry.getDecimals()),!1),this.holdingAvgPrice=t)}this.validateInput()},i.prototype.selectClick=function(){},i.prototype.okClick=function(){this.changed&&(this.entry.extra||(this.entry.extra={}),this.entry.extra[t.HoldingAvgPrice]=this.holdingAvgPrice?this.holdingAvgPrice.toString():"",this.entry.extra[t.HoldingVolume]=this.holdingVolume?this.holdingVolume.toString():""),this.options.okClick&&this.options.okClick(this.entry,this.changed),this.destroy()},i.prototype.cancelClick=function(){this.options.cancelClick&&this.options.cancelClick(),this.destroy()},i.prototype.destroy=function(){InfrontUtil.removeEventListener(document.body,"click",this.cancelClickListener),InfrontUtil.removeEventListener(this.container,"keyup",this.keyUp),n.prototype.destroy.call(this)},i}(e.Popup);e.HoldingValuesPopup=i;var r,a,s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.linkAction=e.LinkAction.None,n.hideListSelector=!1,n.rightAlignSearchBoxDropdown=!1,n}return __extends(n,t),n}(e.CommonListOptions);e.MyListsWidgetOptions=s,(a=r=e.WatchlistActions||(e.WatchlistActions={}))[a.ADD=0]="ADD",a[a.EDIT=1]="EDIT",a[a.DELETE=2]="DELETE";var o=function(t){function a(n,i,r,a){var s=t.call(this,n,r,"myList",a)||this;return s.targetManager=new InfrontUtil.LinkTargetManager,s.listTitles=new e.ObservableArray,s.showDeleteList=new e.Observable(!1),s.enableAdd=new e.Observable(!1),s.editMode=new e.Observable(!1),s.isReadOnly=new e.Observable(!1),s.showDeleteColumn=new e.Observable(!0),s.holdingUnbinds=[],s.isEmptyWatchlist=new e.Observable(!0),s.sortIndex=0,s.UUID=InfrontUtil.makeUUID(),s.watclistInstrumentChangeCount=0,s.watchlistInstrumentChanged=new e.Observable,s.windowClicked=function(){1==s.showMenu.get()&&s.showMenu.set(!s.showMenu.get()),1==s.showAddListPopup.get()&&(s.showAddListPopup.set(!s.showAddListPopup.get()),s.editMode.set(!1)),1==s.showDeleteList.get()&&s.showDeleteList.set(!s.showDeleteList.get())},s.options.instrumentList=function(){return s.getInstruments()},s.selectedList=new e.Observable,s.showMenu=new e.Observable,s.showMenu.set(!1),s.showAddListPopup=new e.Observable,s.showAddListPopup.set(!1),s.confirmIndex=new e.Observable(""),s.showListSelector=!s.options.hideListSelector,s.addListObserver=new e.TextInputBinding,s.addListObserver.observe(function(e){return s.addListTextChanged(e)}),s.addListObserver.observeSpecialKeys(e.TextInputBinding.kKeycodeEnter,function(e){return s.addListSpecialKeyPress(e)}),s.addListObserver.setPlaceholder(s.infrontUI.languageHandler.get("myList","addListPlaceholder")),s.addListObserver.setValidator(function(e){return s.enableAdd.set(!e),-1==s.listTitles.indexOf(e)&&e&&""!=e}),s}return __extends(a,t),a.prototype.returnDefaultWidgetOptions=function(){return new s},a.prototype.newInit=function(){var e=this;this.infront.getWatchlistTitles().then(function(n){e.listTitles=n,t.prototype.newInit.call(e)}).catch(function(e){return IDS.log("MyListsWidget: ","getWatchListTitles failed",e)})},a.prototype.newBuildUI=function(){var n=this,i=e.WidgetDOMFactory.create_WMyLists_DOM(this.element,this.listTitles,this.isEmptyWatchlist,this.selectedList,this.showMenu,this.showDeleteList,this.showAddListPopup,this.showListSelector,this.confirmIndex,this.enableAdd,this.editMode,function(e){return n.dropdownLabelClicked()},function(e){return n.setSelectedList(e)},function(){return n.addListClick()},function(e){return n.editListClick(e)},function(e){return n.deleteListClicked(e)},function(){n.deleteList(n.confirmIndex.get()),n.showDeleteList.set(!1)},function(e){n.showDeleteList.set(!1)},function(e){return n.triggerConfirm(e)},this.addListObserver,this.isReadOnly,this.infrontUI.languageHandler);this.addListButton=i.addListButton,this.dropdownContainer=i.dropdownContainer,this.dropdownLabel=i.dropDownLabel;var r=i.deleteBtn,a=e.BindingFactory.createInlineBinding(function(e){e&&n.addListButton.focus()}),s=e.BindingFactory.createInlineBinding(function(e){e&&r.focus()});this.showDeleteList.observe(s),this.showMenu.observe(a),this.addEventListener(document.body,"click",this.windowClicked);var o=i.popupWrapper;this.element.removeChild(i.popupWrapper),document.body.appendChild(o),this.options.layout,e.ListLayout.DIV;var l=i.listContainer;this.quoteListOptions=new e.QuoteListWidgetOptions,InfrontUtil.mergeRecursive(this.quoteListOptions,this.options,!1),this.quoteListOptions.useOriginal=!0,this.addSpecialColumns(this.quoteListOptions.columns),this.options.widgetStateCallback&&(this.quoteListOptions.widgetStateCallback=this.options.widgetStateCallback,this.options.widgetStateCallback=null);var c={name:this.UUID,heading:"",type:e.FieldType.Computed,compute:function(e,t){return t},computeFields:[this.UUID],dataType:e.DataType.Integer,shorten:!1,tag:this.UUID,allowZero:!0,hidden:!0};this.quoteListOptions.columns.unshift(c),this.options.enableFixedHeader&&80<this.element.offsetHeight&&(l.style.height=this.element.offsetHeight+"px",l.style.clear="both"),i.searchContainer;var d=document.createElement("div"),u=document.createElement("div");if(this.quoteListOptions.customTitle=u,this.quoteListOptions.customElementsAfter=[d],this.quoteList=new e.QuoteListWidget(l,this.infront,this.infrontUI,this.quoteListOptions),this.popupWrapper=i.dropdown,!this.options.hideSearchWidget){this.addInstElement=d;var h=new e.SearchBoxOptions;h.instrumentSelected=function(e){return n.addInstrument(e)},h.placeholder=this.languageHandler.get("myList","searchPlaceholder"),h.rightAlignDropDown=this.options.rightAlignSearchBoxDropdown,this.searchBox=new e.SearchBox(d,this.infront,h)}if(i.dropDownLabel&&u.appendChild(i.dropDownLabel),this.addListPopup=i.addListContainer,this.addListPopupInput=i.addListContainerInput,this.listContainer=i.listContainer,this.deleteListPopup=i.confirmContainer,this.showListSelector){var p=window.getComputedStyle(i.dropdownWrapper);this.absolutePosWrapper=document.createElement("div"),this.absolutePosWrapper.style.position="fixed"==p.position?"fixed":"absolute",this.absolutePosWrapper.className="cell-super-absolute",this.absolutePosWrapper.appendChild(i.dropdownContainer),document.body.appendChild(this.absolutePosWrapper);var m=e.BindingFactory.createInlineBinding(function(e){if(e){var t=i.dropdownWrapper.getBoundingClientRect(),r=document.body.getBoundingClientRect(),a=("fixed"==p.position||r.top,"fixed"==p.position?0:r.left);n.absolutePosWrapper.style.top=t.top.toString()+"px",n.absolutePosWrapper.style.left=t.left-a+"px"}});if(this.showMenu.observe(m),e.PerfectScrollbar){var g=new e.PerfectScrollbar(i.dropdownElements,{suppressScrollX:!0});this.addEventListener(i.dropdownElements,"mouseover",function(e){return g.update()})}}this.element.id===this.options.notificationsTargetElementId&&(this.notificationHandler=new e.Notifications(i.notificationsContainer,!0)),t.prototype.newBuildUI.call(this)},a.prototype.setSpecialColChangeStatus=function(t,n){n&&this.options.enableChangeStatusColors&&(InfrontUtil.removeClassName(n,e.CssConstants.kStatusPositive),InfrontUtil.removeClassName(n,e.CssConstants.kStatusNegative),t&&(0<t?InfrontUtil.addClassName(n,e.CssConstants.kStatusPositive):t<0&&InfrontUtil.addClassName(n,e.CssConstants.kStatusNegative)))},a.prototype.addSpecialColumns=function(t){for(var n=this,i=0;i<t.length;i++){var r=t[i];if(InfrontUtil.isString(r)){var a={};switch(r){case"HOLDING_VOLUME":a.name="HOLDING_VOLUME",a.sortable=!0,a.highlightChange=!0,a.type="custom",a.heading=this.languageHandler.get("myList","quantity"),a.dataType=e.DataType.Integer,a.content=function(t,i,r){var a=null;if(e.Instrument.isInstrument(i)){var s=n.currentWatchList.findInstrument(i);if(s){var o={valueUpdated:function(e){r.innerText=s.getFormattedValue(IDS.StorageXmlTags.HoldingVolume,0),n.setSpecialColChangeStatus(s.getValue(IDS.StorageXmlTags.HoldingVolume),r)}};s.observe(o),n.holdingUnbinds.push(function(){s.unbind(o)}),a=s.getFormattedValue(IDS.StorageXmlTags.HoldingVolume,0),n.setSpecialColChangeStatus(s.getValue(IDS.StorageXmlTags.HoldingVolume),r)}}return a},a.onClick=function(e,t){return n.showHoldingValuesPopup(e)},t[i]=a;break;case"HOLDING_AVG_PRICE":a.name="HOLDING_AVG_PRICE",a.sortable=!0,a.highlightChange=!0,a.type="custom",a.heading=this.languageHandler.get("myList","avgPrice"),a.dataType=e.DataType.Numeric,a.content=function(t,i,r){var a=null;if(e.Instrument.isInstrument(i)){var s=n.currentWatchList.findInstrument(i);if(s){var o={valueUpdated:function(e){var t=s.getNumValue(IDS.StorageXmlTags.HoldingAvgPrice);r.innerText=InfrontUtil.formatNumber(t,s.getDecimals()).toString(),n.setSpecialColChangeStatus(t,r)}};s.observe(o),n.holdingUnbinds.push(function(){s.unbind(o)});var l=s.getNumValue(IDS.StorageXmlTags.HoldingAvgPrice);0<l&&(a=InfrontUtil.formatNumber(l,s.getDecimals()).toString()),n.setSpecialColChangeStatus(l,r)}}return a},a.onClick=function(e,t){return n.showHoldingValuesPopup(e)},t[i]=a;break;case"HOLDING_INVESTED":a.name="HOLDING_INVESTED",a.sortable=!0,a.highlightChange=!0,a.type="custom",a.heading=this.languageHandler.get("myList","invested"),a.dataType=e.DataType.Numeric,a.content=function(t,i,r){if(!e.Instrument.isInstrument(i))return null;var a=n.currentWatchList.findInstrument(i);if(a){var s={valueUpdated:function(e){var t=n.getInvested(a);r.innerText=InfrontUtil.formatNumber(t,a.getDecimals())||null,n.setSpecialColChangeStatus(t,r)}};a.observe(s),n.holdingUnbinds.push(function(){a.unbind(s)});var o=n.getInvested(a);return n.setSpecialColChangeStatus(o,r),InfrontUtil.formatNumber(o,a.getDecimals())||null}return 0},a.onClick=function(e,t){return n.showHoldingValuesPopup(e)},t[i]=a;break;case"HOLDING_MARKET_VALUE":a.name="HOLDING_MARKET_VALUE",a.sortable=!0,a.highlightChange=!0,a.type="custom",a.heading=this.languageHandler.get("myList","marketValue"),a.dataType=e.DataType.Numeric,a.content=function(t,i,r){if(!e.Instrument.isInstrument(i))return"";var a=n.currentWatchList.findInstrument(i);if(a&&a.symbol){var s=a.symbol.getValue(IDS.MwsRealtimeTags.LastTradedAt,!0),o={valueUpdated:function(e){var t=n.getMarketValue(a);r.innerText=InfrontUtil.formatNumber(t,a.getDecimals())||"",n.setSpecialColChangeStatus(t,r)}};s.observe(o),a.observe(o),n.holdingUnbinds.push(function(){s.unbind(o),a.unbind(o)})}var l=n.getMarketValue(a);return n.setSpecialColChangeStatus(l,r),InfrontUtil.formatNumber(l,a.getDecimals())||null},t[i]=a;break;case"HOLDING_TOTAL_PROFIT":a.name="HOLDING_TOTAL_PROFIT",a.sortable=!0,a.highlightChange=!0,a.type="custom",a.heading=this.languageHandler.get("myList","totalProfit"),a.dataType=e.DataType.Numeric,a.content=function(t,i,r){if(!e.Instrument.isInstrument(i))return"";var a=n.currentWatchList.findInstrument(i);if(a&&a.symbol){var s=a.symbol.getValue(IDS.MwsRealtimeTags.LastTradedAt,!0),o={valueUpdated:function(e){var t=n.getTotalProfit(a);r.innerText=InfrontUtil.formatNumber(t,a.getDecimals())||"",n.setSpecialColChangeStatus(t,r)}};s.observe(o),a.observe(o),n.holdingUnbinds.push(function(){s.unbind(o),a.unbind(o)})}var l=n.getTotalProfit(a);return n.setSpecialColChangeStatus(l,r),InfrontUtil.formatNumber(l,a.getDecimals())||null},t[i]=a}}}var s=this.options.layout===e.ListLayout.DIV?"cell-custom-layout__interaction--full-button":"cell-tablecell--interaction--full-button";t.push({name:"DELETE_BUTTON",type:"custom",sortable:!1,heading:"",visible:this.showDeleteColumn,content:'<span class="'+e.CssConstants.kDeleteButton+'"></span>',className:s,onClick:function(e,t){return n.removeInstrument(e)}})},a.prototype.getInvested=function(e){var t=null;if(e){var n=e.getNumValue(IDS.StorageXmlTags.HoldingAvgPrice),i=e.getNumValue(IDS.StorageXmlTags.HoldingVolume);0<n&&0<i&&(t=n*i)}return t},a.prototype.getMarketValue=function(e){var t=null;if(e&&e.symbol){var n=e.symbol.getValueOrNull(IDS.MwsRealtimeTags.LastTradedAt),i=e.getNumValue(IDS.StorageXmlTags.HoldingVolume);0<n&&0<i&&(t=n*i)}return t},a.prototype.getTotalProfit=function(e){var t=null;if(e&&e.symbol){var n=e.symbol.getValueOrNull(IDS.MwsRealtimeTags.LastTradedAt),i=e.getNumValue(IDS.StorageXmlTags.HoldingVolume),r=e.getNumValue(IDS.StorageXmlTags.HoldingAvgPrice);0<n&&0<i&&0<r&&(t=(n-r)*i)}return t},a.prototype.showHoldingValuesPopup=function(t){var r=this,a=new n,s=this.currentWatchList.findInstrument(t);if(s){a.offsetX=30,a.offsetY=10,a.width=270,a.anchor=e.PopupAnchorLocation.TOP_LEFT,a.arrow=!1,a.okClick=function(e,t){t&&r.updateHolding(e)};var o=this.infrontUI.languageHandler.get("myList","holdingValues")+": "+t.ticker;this.popupDialog=new i(null,this.popupWrapper,o,this.languageHandler,a,s)}},a.prototype.updateHolding=function(e){var t=this.currentWatchList.findInstrument(e.instrument);t.extra=e.extra,t.updateBindings(null);var n=this.selectedList.get();this.infront.updateUserList(n,this.currentWatchList).catch(function(e){return IDS.log("MyListsWidget: ","updateUserList failed",e)})},a.prototype.newUnsubscribe=function(){t.prototype.newUnsubscribe.call(this)},a.prototype.adjustPopupPosition=function(e){var t=this.listContainer.getBoundingClientRect(),n=(e.getBoundingClientRect(),e.getBoundingClientRect());document.body.getBoundingClientRect(),window.getComputedStyle(e),e.parentElement.style.left=t.right-t.width/2-n.width/2+"px",e.parentElement.style.top=t.bottom-t.height/2-n.height/2+"px"},a.prototype.addListClick=function(){this.addListObserver.setEnabled(!this.isReadOnly.get()),this.showAddListPopup.get()||(this.showAddListPopup.set(!0),this.adjustPopupPosition(this.addListPopup),this.addListPopupInput.focus(),this.isReadOnly.get()?this.addListObserver.set(this.infrontUI.languageHandler.get("myList","isReadOnly")):this.addListObserver.set("")),this.showMenu.get()&&this.showMenu.set(!this.showMenu.get())},a.prototype.editListClick=function(e){this.listText=e,this.editMode.set(!0),this.addListClick(),this.isReadOnly.get()?this.addListObserver.set(this.infrontUI.languageHandler.get("myList","isReadOnly")):this.addListObserver.set(this.listText)},a.prototype.triggerConfirm=function(t){var n=this;if(t==e.WatchlistActions.ADD&&this.addListSpecialKeyPress(e.TextInputBinding.kKeycodeEnter),t==e.WatchlistActions.EDIT){var i=l(this.addListObserver.get().trim());this.infront.addWatchlist(i).then(function(e){return n.editListName(i,n.listText)})}this.showAddListPopup.set(!this.showAddListPopup.get())},a.prototype.newSubscribe=function(){var e=this.getStoredValue(a.kSelectedListKey);e&&-1<this.listTitles.indexOf(e)?this.setSelectedList(e,!1):0<this.listTitles.length()&&this.setSelectedList(this.listTitles.item(0),!1),t.prototype.newSubscribe.call(this)},a.prototype.newDestroyUI=function(){for(this.unbindFromWatchlist(),null!=this.quoteList&&this.quoteList.clear(),this.absolutePosWrapper&&this.absolutePosWrapper.parentElement&&this.absolutePosWrapper.parentElement.removeChild(this.absolutePosWrapper),this.options.hideSearchWidget||this.searchBox.destroy();this.element.hasChildNodes();)this.element.removeChild(this.element.lastChild);t.prototype.newDestroyUI.call(this)},a.prototype.collapsePopup=function(e){0!=e.parentElement.getBoundingClientRect().height&&(e.parentElement.style.height="0px")},a.prototype.dropdownLabelClicked=function(){this.dropdownLabel.blur(),this.showMenu.get()&&this.confirmIndex.set(""),this.showMenu.set(!this.showMenu.get())},a.prototype.getColumnManager=function(){return this.quoteList.getColumnManager()},a.prototype.setSelectedList=function(e,t){var n=this;if(void 0===t&&(t=!0),this.showMenu.set(!1),this.confirmIndex.set(""),e!=this.selectedList.get()){if(null==e)return this.options.hideSearchWidget||(this.searchBox.setEnabled(!1),this.searchBox.clear()),void this.selectedList.set(this.infrontUI.languageHandler.get("myList","selectorTitle"));this.unbindFromWatchlist(),t&&this.store(a.kSelectedListKey,e),this.selectedList.set(e),this.options.hideSearchWidget||this.searchBox.setEnabled(!0),this.quoteList.clear(),this.infront.getWatchlistContents(e).then(function(e){return n.bindToWatchlist(e)}).catch(function(e){return IDS.log("MyListsWidget: ","setSelectedList failed:",e)}),this.options.selectedList&&this.options.selectedList(e)}},a.prototype.editListName=function(t,n){var i=this;t&&this.infront.getWatchlistContents(n).then(function(r){r.entries.data.forEach(function(n){var r=n instanceof e.WatchlistEntry?n.instrument:n;i.infront.addWatchlistInstrument(t,r)}),i.deleteList(n),i.editMode.set(!1),i.selectedList.get()===n&&i.setSelectedList(t)})},a.prototype.bindToWatchlist=function(e){var t=this;this.enableAdd.set(!e.isReadOnly),this.isReadOnly.set(e.isReadOnly),this.currentWatchList=e,this.isReadOnly.set(e.isReadOnly),this.showDeleteColumn.set(!e.isReadOnly),e.entries.observe(this),this.watchlistUnbind=function(){e.entries.unbind(t)},0<e.entries.get().length?this.isEmptyWatchlist.set(!1):this.isEmptyWatchlist.set(!0)},a.prototype.unbindFromWatchlist=function(){this.isReadOnly.set(!0),this.showDeleteColumn.set(!1),InfrontUtil.isFunction(this.watchlistUnbind)&&(this.watchlistUnbind(),delete this.watchlistUnbind);for(var e=0;e<this.holdingUnbinds.length;e++)InfrontUtil.isFunction(this.holdingUnbinds[e])&&this.holdingUnbinds[e]();this.holdingUnbinds=[]},a.prototype.reInit=function(t){this.quoteList.clear();for(var n=0;n<t.length;n++){var i=t[n];0==n&&this.quoteList.setInitiallySelectedInstrument(i.instrument);var r=i.instrument instanceof e.WatchlistEntry?i.instrument.instrument:i.instrument,a=e.CacheKeyFactory.createInstrumentKey(r);this.cache.updateIdsValue(a,this.UUID,n),this.sortIndex++,this.quoteList.addInstrument(r)}},a.prototype.itemAdded=function(t,n){var i=t.instrument,r=e.CacheKeyFactory.createInstrumentKey(i);this.cache.updateIdsValue(r,this.UUID,this.sortIndex++),this.quoteList.addInstrument(i),this.isEmptyWatchlist.set(!1)},a.prototype.itemRemoved=function(e,t){var n=e.instrument;this.quoteList.removeInstrument(n),this.quoteList.getInstruments().length||this.isEmptyWatchlist.set(!0)},a.prototype.itemMoved=function(e,t,n){},a.prototype.addListTextChanged=function(e){},a.prototype.addListSpecialKeyPress=function(t){var n=this;if(t==e.TextInputBinding.kKeycodeEnter)if(this.editMode.get()){var i=l(this.addListObserver.get().trim());this.infront.addWatchlist(i).then(function(e){n.editListName(i,n.listText),n.triggerNotification(n.createNotificationMessage(r.EDIT,i),200)}),this.editMode.set(!this.editMode.get())}else 0<(i=l(this.addListObserver.get().trim())).length&&0!=this.listTitles.indexOf(i)&&(this.infront.addWatchlist(i).then(function(e){n.setSelectedList(i),n.triggerNotification(n.createNotificationMessage(r.ADD,i),200)}),this.addListObserver.set(""));this.showAddListPopup.get()&&this.showAddListPopup.set(!this.showAddListPopup.get())},a.prototype.deleteList=function(t){var n=this,i=this.listTitles.indexOf(t);0<=i&&(i<this.listTitles.length()-2||null!=this.listTitles.data[i+1]?this.setSelectedList(this.listTitles.data[i+1]):0<=i-1?this.setSelectedList(this.listTitles.data[i-1]):this.setSelectedList(null),this.infront.deleteUserList(t).then(function(i){if(n.notificationHandler){var r=n.createNotificationMessage(e.WatchlistActions.DELETE,t);n.triggerNotification(r,200)}}).catch(function(e){return IDS.log("MyListsWidget: ","deleteList failed",e)}),this.selectedList.get()===t&&0<this.listTitles.data.length&&this.setSelectedList(this.listTitles.data[0]))},a.prototype.deleteListClicked=function(e){this.confirmIndex.set(this.listTitles.item(this.listTitles.indexOf(e))),this.showDeleteList.set(!0),this.adjustPopupPosition(this.deleteListPopup),this.showMenu.get()&&this.showMenu.set(!this.showMenu.get())},a.prototype.addInstrument=function(t){var n=this;if(t){var i=this.selectedList.get();this.infront.addWatchlistInstrument(i,t).then(function(r){r&&n.options.onInstrumentAdded&&n.options.onInstrumentAdded(i,t),n.addInfrontEventObserver(e.WatchlistInstrumentAddedEvent.kEventName,function(e){n.watchlistInstrumentChanged.set(n.watclistInstrumentChangeCount++)}),e.EventCallbackMap.eventMap.publish(new e.WatchlistInstrumentAddedEvent)}).catch(function(e){return IDS.log("MyListsWidget: ","addInstrument failed",e)}),this.isEmptyWatchlist.get()&&this.isEmptyWatchlist.set(!1)}},a.prototype.removeInstrument=function(t){var n=this;if(t){var i=this.selectedList.get();this.infront.removeWatchlistInstrument(i,t).then(function(r){r&&n.options.onInstrumentRemoved&&n.options.onInstrumentRemoved(i,t),n.addInfrontEventObserver(e.WatchlistInstrumentRemovedEvent.kEventName,function(e){n.watchlistInstrumentChanged.set(n.watclistInstrumentChangeCount++)}),e.EventCallbackMap.eventMap.publish(new e.WatchlistInstrumentRemovedEvent)}).catch(function(e){return IDS.log("MyListsWidget: ","removeInstrument failed",e)}),this.quoteList.getInstruments().length<1&&this.isEmptyWatchlist.set(!0)}},a.prototype.createNotificationMessage=function(t,n,i){var r;switch(t){case e.WatchlistActions.ADD:r=n+" was added";break;case e.WatchlistActions.EDIT:r=n+" was renamed to "+i;break;case e.WatchlistActions.DELETE:r=n+" was deleted"}return r},a.prototype.triggerNotification=function(t,n){var i=new e.NotificationOptions;i.message=t,i.timeout=n,i.type=e.NotificationType.ALERT,this.notificationHandler&&this.notificationHandler.notify(i)},a.prototype.adjustNotificationContainer=function(){},a.prototype.modify=function(e){},a.prototype.pause=function(){this.quoteList&&this.quoteList.pause()},a.prototype.resume=function(){this.quoteList&&this.quoteList.resume()},a.prototype.getInstruments=function(){return this.quoteList.getInstruments()},a.kSelectedListKey="my-list-selected-list",a}(e.WidgetBase);function l(e){return e.replace("<","&lt;").replace(">","&gt;")}e.MyListsWidget=o}(Infront||(Infront={})),function(e){var t=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.showPortfolio=!0,i.defaultSortedColumn=n.kColTicker,i.defaultSortOrder=e.SortOrder.Desc,i}return __extends(i,t),i}(e.TradingWidgetOptions);e.NetTradesWidgetOptions=t;var n=function(n){function a(t,i,r){var a=n.call(this,t,i,"netTrades",r)||this;return a.portfolioNameObs=new e.Observable,a.sortedColumn=new e.Observable,a.updateSortedColumn(a.options.defaultSortedColumn,a.options.defaultSortOrder),a.elements=new e.ContinouslySortedCacheKeyObservableArray([a.currentFieldSpec],a.cache,[a.currentCompareFunc]),a.rowCounter=new e.ObservableArrayRowCounter(a.elements),a.rowCounter.rowCount.observe(e.BindingFactory.createInlineBinding(function(t){a.setHasContent(0<t),0===t?InfrontUtil.addClassName(a.element,e.CssConstants.kNoDataClass):InfrontUtil.removeClassName(a.element,e.CssConstants.kNoDataClass)})),a}return __extends(a,n),a.prototype.returnDefaultWidgetOptions=function(){return new t},a.prototype.newBuildUI=function(){var t=this,i=e.WidgetDOMFactory.create_WNetTrades_DOM(this.element,this.widgetTitle,this.options.showPortfolio,this.portfolioNameObs,this.sortedColumn,function(e){return t.columnClicked(e)},this.infrontUI.languageHandler);i.thead.appendChild(this.createNoTradingContentDisplay());var r=new e.ArrayBinding(i.tbody,this,null);this.elements.observe(r),this.progressIndicator=new e.ProgressIndicator(i.progressIndicator),n.prototype.newBuildUI.call(this)},a.prototype.newSubscribe=function(){var t=this;if(this.elements.clear(),this.currentPortfolio&&this.currentPortfolio.name){var s=new e.DataOptions;s.onError=InfrontUtil.errorLogCallback,s.onData=function(n){var s;if(n.hasOwnProperty(e.MWSConstants.net_trades)?s=n[e.MWSConstants.net_trades]:n.hasOwnProperty(e.MWSConstants.net_trade)&&(s=[n[e.MWSConstants.net_trade]]),s)for(var o=0;o<s.length;o++){var l=e.CacheKeyFactory.createNetTradeKey(t.currentPortfolio,s[o][e.MWSConstants.instrument]);t.cache.update(l,s[o]),t.cache.createComputedField(l,a.kRealizedField,r(l),i),-1==t.elements.indexOf(l)&&t.elements.push(l)}},this.unsubscribe=this.infront.trNetTrades(this.currentPortfolio.name,s)}n.prototype.newSubscribe.call(this)},a.prototype.newUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),n.prototype.newUnsubscribe.call(this)},a.prototype.createRow=function(t,n){return e.WidgetDOMFactory.create_WNetTradesRow_DOM(this.cache,t)},a.prototype.updateSortedColumn=function(t,n){this.currentlySortedColumn=t,this.currentSortOrder=n,this.updateSortColumnUI(),this.currentlySortedColumn==a.kColTicker?(this.currentFieldSpec=[e.MWSConstants.instrument,e.MWSConstants.ticker],this.currentCompareFunc=this.currentSortOrder==e.SortOrder.Desc?e.CompareFunctions.compareStringsDesc:e.CompareFunctions.compareStringsAsc):(this.currentFieldSpec=[this.currentlySortedColumn],this.currentCompareFunc=this.currentSortOrder==e.SortOrder.Desc?e.CompareFunctions.compareNumberDesc:e.CompareFunctions.compareNumberAsc),this.elements&&this.elements.updateSorting([this.currentFieldSpec],[this.currentCompareFunc])},a.prototype.updateSortColumnUI=function(){switch(this.currentlySortedColumn){case a.kColTicker:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColTickerDesc:a.kColTickerAsc);break;case a.kColBuyVol:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColBuyVolDesc:a.kColBuyVolAsc);break;case a.kColBuyVWap:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColBuyVWapDesc:a.kColBuyVWapAsc);break;case a.kColBuyValue:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColBuyValueDesc:a.kColBuyValueAsc);break;case a.kColSellVol:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColSellVolDesc:a.kColSellVolAsc);break;case a.kColSellVWap:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColSellVWapDesc:a.kColSellVWapAsc);break;case a.kColSellValue:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColSellValueDesc:a.kColSellValueAsc);break;case a.kColNetVolume:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColNetVolumeDesc:a.kColNetVolumeAsc);break;case a.kColNetValue:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColNetValueDesc:a.kColNetValueAsc);break;case a.kColNetRealized:this.sortedColumn.set(this.currentSortOrder==e.SortOrder.Desc?a.kColNetRealizedDesc:a.kColNetRealizedAsc)}},a.prototype.columnClicked=function(t){t==this.currentlySortedColumn?this.updateSortedColumn(t,this.currentSortOrder==e.SortOrder.Desc?e.SortOrder.Asc:e.SortOrder.Desc):this.updateSortedColumn(t,e.SortOrder.Desc)},a.prototype.currentPortfolioChanged=function(e){if(e!=this.currentPortfolio){this.newUnsubscribe(),this.currentPortfolio=e,this.progressIndicator&&this.progressIndicator.start();var t=null==this.currentPortfolio?"":this.currentPortfolio.name;this.portfolioNameObs.set(t),this.newSubscribe()}},a.prototype.currentPortfolioReady=function(e){this.progressIndicator&&this.progressIndicator.stop()},a.prototype.newDestroyUI=function(){n.prototype.newDestroyUI.call(this)},a.prototype.supportsHasContent=function(){return!0},a.kRealizedField="net_realized",a.kColTicker="ticker",a.kColBuyVol="buy_volume",a.kColBuyVWap="buy_vwap",a.kColBuyValue="buy_value",a.kColSellVol="sell_volume",a.kColSellVWap="sell_vwap",a.kColSellValue="sell_value",a.kColNetVolume="net_volume",a.kColNetValue="net_value",a.kColNetRealized="net_price",a.kColTickerDesc="TICKER_DESC",a.kColTickerAsc="TICKER_ASC",a.kColBuyVolDesc="BUYVOL_DESC",a.kColBuyVolAsc="BUYVOL_ASC",a.kColBuyVWapDesc="BUYVWAP_DESC",a.kColBuyVWapAsc="BUYVWAP_ASC",a.kColBuyValueDesc="BUYVALUE_DESC",a.kColBuyValueAsc="BUYVALUE_ASC",a.kColSellVolDesc="SELLVOL_DESC",a.kColSellVolAsc="SELLVOL_ASC",a.kColSellVWapDesc="SELLVWAP_DESC",a.kColSellVWapAsc="SELLVWAP_ASC",a.kColSellValueDesc="SELLVALUE_DESC",a.kColSellValueAsc="SELLVALUE_ASC",a.kColNetVolumeDesc="NETVOLUME_DESC",a.kColNetVolumeAsc="NETVOLUME_ASC",a.kColNetValueDesc="NETVALUE_DESC",a.kColNetValueAsc="NETVALUE_ASC",a.kColNetRealizedDesc="NETREALIZED_DESC",a.kColNetRealizedAsc="NETREALIZED_ASC",a}(e.TradingWidgetBase);function i(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5];return r<t?s-r*n:t<r?t*a-i:s-i}function r(t){for(var n=["buy_volume","buy_vwap","buy_value","sell_volume","sell_vwap","sell_value"],i=[],r=0;r<n.length;r++)i.push(new e.FieldReference(t,n[r]));return i}e.NetTradesWidget=n}(Infront||(Infront={})),function(e){var t=function(){this.sources=[]};e.NewsListWidgetFilter=function(){};var n,i,r=function(){function e(){this.name=""}return e.prototype.fromStorageFormat=function(e){return!!(InfrontUtil.isArray(e)&&1<e.length)&&(this.name=e.shift(),this.feeds=e,!0)},e.prototype.toStorageFormat=function(){return[this.name].concat(this.feeds)},e}();(i=n=e.NewsListLayout||(e.NewsListLayout={}))[i.flex=0]="flex",i[i.table=1]="table";var a=new Date;e.newsListPeriods={TODAY:{startTime:a,endTime:InfrontUtil.today(),maxDays:1},YESTERDAY:{startTime:InfrontUtil.today(),endTime:InfrontUtil.addDays(InfrontUtil.today(),-1),maxDays:1},TWO_DAYS:{startTime:InfrontUtil.addDays(InfrontUtil.today(),-1),endTime:InfrontUtil.addDays(InfrontUtil.today(),-2),maxDays:1},THREE_DAYS:{startTime:InfrontUtil.addDays(InfrontUtil.today(),-2),endTime:InfrontUtil.addDays(InfrontUtil.today(),-3),maxDays:1},FOUR_DAYS:{startTime:InfrontUtil.addDays(InfrontUtil.today(),-3),endTime:InfrontUtil.addDays(InfrontUtil.today(),-4),maxDays:1},FIVE_DAYS:{startTime:InfrontUtil.addDays(InfrontUtil.today(),-4),endTime:InfrontUtil.addDays(InfrontUtil.today(),-5),maxDays:1},THIS_WEEK:{startTime:a,endTime:InfrontUtil.addDays(InfrontUtil.today(),1-a.getDay()),maxDays:1-a.getDay()},LAST_WEEK:{startTime:InfrontUtil.addDays(InfrontUtil.today(),1-a.getDay()),endTime:InfrontUtil.addDays(InfrontUtil.today(),-a.getDay()-6),maxDays:7},THIS_MONTH:{startTime:a,endTime:InfrontUtil.addDays(InfrontUtil.today(),1-a.getDate()),maxDays:1-a.getDate()},LAST_MONTH:{startTime:InfrontUtil.addDays(InfrontUtil.today(),1-a.getDate()),endTime:InfrontUtil.addMonths(new Date(InfrontUtil.today().setDate(1)),-1),maxDays:30}};var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.streaming=!0,t.columns=["TIME","HEADLINE","SHORT_SOURCE"],t.feeds=null,t.maxDays=30,t.paging=!1,t.pageItems=20,t.selectableDates=["TODAY","YESTERDAY","TWO_DAYS","THREE_DAYS","FOUR_DAYS","FIVE_DAYS","THIS_WEEK","LAST_WEEK","THIS_MONTH","LAST_MONTH"],t.infinitiveScroll=!1,t.useLightbox=!0,t.customFilters=null,t.cssURL=null,t.layout=n.table,t.enableHeaderLine=!0,t.preventDefault=!1,t.showFlashNewsFilter=!0,t.showFlashNewsOnly=!1,t.showTickerInHeader=!1,t}return __extends(t,e),t}(e.WidgetOptions);e.NewsListWidgetOptions=s;var o=function(i){function a(t,n,r){var s=i.call(this,t,n,"newsList",r)||this;if(s.allRegions=[],s.allSources=[],s.subscribedSources=[],s.ItemsReceivedPrevRequest=-1,s.colHandlers={},s.ticker=new e.Observable(""),s.windowClick=function(){1==s.showUserFilterMenu.get()&&s.showUserFilterMenu.set(!s.showUserFilterMenu.get())},!s.options.paging&&s.options.maxItems&&(s.options.pageItems=s.options.maxItems),(s.options.feeds||s.options.instrument)&&(s.options.enableRegionSelector=!1,s.options.enableSourceSelector=!1,s.options.customFilters=null),s.options.maxDays&&(s.maxDays=s.options.maxDays),s.options.maxItems&&(s.initMaxItems=s.options.maxItems),s.options.pageItems&&(s.initPageItems=s.options.pageItems),s.newsRequestCounter=0,s.subscribed=!1,s.newsSources={},s.addEventListener(document.body,"click",s.windowClick),s.displayedItems=new e.ObservableArray,s.displayObserver=new e.Observable,s.userFilters=new e.ObservableArray,s.allFilteredNewsItems=[],s.unfilteredItems=[],s.numberOfPages=new e.Observable,s.numberOfPages.set(0),s.currentPage=new e.Observable,s.currentPage.set(0),s.prevEnabled=new e.ComputedObservable([s.currentPage],function(e){return 0<e[0]}),s.nextEnabled=new e.ComputedObservable([s.currentPage,s.numberOfPages],function(e){return e[0]<e[1]-1}),s.showFlashNewsOnly=new e.Observable(s.options.showFlashNewsOnly),s.options.customFilters){s.customFilters=s.options.customFilters;for(var o=0;o<s.customFilters.length;o++)s.customFilters[o][a.kCustomFilterIdField]=o}else s.customFilters=[];return s.options.enableRegionSelector&&s.options.enableSourceSelector||(s.options.enableUserFilter=!1),s.selectedCustomFilter=new e.Observable,s.selectedCustomFilter.set(a.kCustomFilterNoneSelectedId),s.quickFilterObserver=new e.TextInputBinding,s.quickFilterObserver.observe(function(e){return s.filterChanged(e)}),s.quickFilterObserver.setPlaceholder(s.infrontUI.languageHandler.get("newsList","quickFilterPlaceholder")),s.linkedTargets=[],s.addUserFilterObserver=new e.TextInputBinding,s.addUserFilterObserver.observe(function(e){return s.addUserFilterTextChanged(e)}),s.addUserFilterObserver.observeSpecialKeys(e.TextInputBinding.kKeycodeEnter,function(e){return s.saveUserFilter(e)}),s.addUserFilterObserver.setPlaceholder(s.infrontUI.languageHandler.get("newsList","customFilterPlaceholder")),s.showCategory=new e.OverridableObservable,s.showCategory.set(!1),s.showUserFilterMenu=new e.Observable,s.showUserFilterMenu.set(!1),s}return __extends(a,i),a.prototype.returnDefaultWidgetOptions=function(){return new s},a.prototype.newInit=function(){var t=this;this.initialLoad=!0,this.initUserFilters();var n=new e.DataOptions;n.onData=function(e){t.populateRegionsAndSources(e),t.subscribedSources=t.getInitialSources(),t.newsAmount=0,i.prototype.newInit.call(t)},n.onError=function(e,n){t.showError()},this.infront.newsSources(n)},a.prototype.newBuildUI=function(){var t=this;if(this.options.useLightbox){this.overlay=new e.Overlay;var r=new e.NewsReaderWidgetOptions;this.options.cssURL&&(r.cssURL=this.options.cssURL),this.reader=new e.NewsReaderWidget(this.overlay.getBox(),this.infrontUI,r),this.link(this.reader)}var a=[],o=new s;this.options.layout==n.table?o.columns=[{name:"HEADLINE",heading:this.infrontUI.languageHandler.get("newsList","headline"),cellName:"headingCell",dataBind:"headline",className:"cell-table__txt  cell-table__txt--news-heading"},{name:"CATEGORY",heading:this.infrontUI.languageHandler.get("newsList","category"),cellName:"categoryCell",dataBind:"category",className:"cell-table__txt  cell-table__txt--news-category"},{name:"SOURCE",heading:this.infrontUI.languageHandler.get("newsList","source"),cellName:"sourceCell",dataBind:"_source",className:"cell-table__txt  cell-table__txt--news-source"},{name:"SHORT_SOURCE",heading:this.infrontUI.languageHandler.get("newsList","source"),cellName:"shortCell",dataBind:"_shortSource",className:"cell-table__txt  cell-table__txt--news-short-source"},{name:"TIME",heading:this.infrontUI.languageHandler.get("newsList","time"),cellName:"timeCell",dataBind:"_timeStamp",className:"cell-table__txt  cell-table__txt--news-date"},{name:"PRODUCT_CODE",heading:this.infrontUI.languageHandler.get("newsList","product_code"),cellName:"productCodeCell",dataBind:"_product_code",className:"cell-table__txt  cell-table__txt--news-product-code"}]:this.options.layout==n.flex&&(o.columns=[{name:"HEADLINE",heading:this.infrontUI.languageHandler.get("newsList","headline"),cellName:"headingCell",dataBind:"headline",className:"cell-table__txt cell-flex-news-list__row__field-wrapper--heading "},{name:"CATEGORY",heading:this.infrontUI.languageHandler.get("newsList","category"),cellName:"categoryCell",dataBind:"category",className:"cell-table__txt  "},{name:"SOURCE",heading:this.infrontUI.languageHandler.get("newsList","source"),cellName:"sourceCell",dataBind:"_source",className:"cell-table__txt  cell-flex-news-list__row__field-wrapper--full-source"},{name:"SHORT_SOURCE",heading:this.infrontUI.languageHandler.get("newsList","source"),cellName:"shortCell",dataBind:"_shortSource",className:"cell-table__txt  cell-flex-news-list__row__field-wrapper--short-source"},{name:"TIME",heading:this.infrontUI.languageHandler.get("newsList","time"),cellName:"timeCell",dataBind:"_timeStamp",className:"cell-table__txt  cell-flex-news-list__row__field-wrapper--time"},{name:"PRODUCT_CODE",heading:this.infrontUI.languageHandler.get("newsList","product_code"),cellName:"productCodeCell",dataBind:"_product_code",className:"cell-table__txt  cell-flex-news-list__row__field-wrapper--time"}]),this.colHandlers={};for(var l=0,c=0;c<this.options.columns.length;c++){for(var d=!1,u=0;u<o.columns.length;u++){var h=o.columns[u],p=void 0,m=!1;if(InfrontUtil.isString(this.options.columns[c])?p=this.options.columns[c]:this.options.columns[c]&&(p=this.options.columns[c].name,m=!0),h.name==p){if(d=!0,m)for(var g in this.options.columns[c]){if(h[g])switch(g){case"cellName":case"dataBind":break;case"className":h[g]=h[g]+"  "+this.options.columns[c][g];break;default:h[g]=this.options.columns[c][g]}else h[g]=this.options.columns[c][g];"translate"==g&&(this.colHandlers[h.dataBind]={translate:h[g]})}a.push(o.columns[u])}}if(!d&&!InfrontUtil.isString(this.options.columns[c])){l++;var f=this.options.columns[c];f&&(f.cellName="customCell",f.dataBind="customfield"+l,f.className="cell-table__txt  cell-table__txt--custom",f.customfieldId="customfield"+l,this.colHandlers[f.dataBind+l]={translate:f.translate,id:l},a.push(f))}}this.options.columns=a;var v,y=function(e){return t.goToFirstPage()},b=function(e){return t.prevPage()},T=function(e){return t.nextPage()},S=function(e){return t.itemSelected(e)},C=function(e){return t.customFilterSelected(e)},I=function(e){return t.userFilterDropDownClicked()},_=function(e){return t.userFilterClicked(e)},M=function(e){return t.deleteUserFilter(e)},E=function(e){return t.onSearchButtonClick(e)};this.options.layout==n.table?(v=e.WidgetDOMFactory.create_WNewsList_DOM(this.element,this.widgetTitle,this.options.columns,this.options.navButton,this.navButtonClick,this.options.enableQuickFilter,this.quickFilterObserver,this.customFilters,this.selectedCustomFilter,C,this.displayedItems,this.options.paging,this.currentPage,this.nextEnabled,this.prevEnabled,this.showUserFilterMenu,this.options.enableUserFilter,this.userFilters,this.addUserFilterObserver,y,b,T,S,I,_,M,this.options.showSearchWidget,E,this.ticker,this.infrontUI.languageHandler),this.dropdownContainer=v.dropdownContainer,this.options.showSearchWidget&&(this.searchWidget=new e.SearchBox(v.searchContainer,this.infront,this.addInstrumentSearchOpts("newsList")),this.searchContainer=v.searchContainer),this.progressIndicator=new e.ProgressIndicator(v.root),this.createDropDowns(v.dropDownElement,v.sourcesDropDownElement)):this.options.layout==n.flex&&(v=e.WidgetDOMFactory.create_WNewsListFlex_DOM(this.element,this.widgetTitle,this.options.columns,this.options.navButton,this.navButtonClick,this.options.enableQuickFilter,this.quickFilterObserver,this.customFilters,this.selectedCustomFilter,C,this.displayedItems,this.options.paging,this.currentPage,this.nextEnabled,this.prevEnabled,this.showUserFilterMenu,this.options.enableUserFilter,this.userFilters,this.addUserFilterObserver,y,b,T,S,I,_,M,this.options.enableHeaderLine,this.options.showSearchWidget,E,this.ticker,this.infrontUI.languageHandler),this.dropdownContainer=v.dropdownContainer,this.userInput=v.userInput,this.options.showSearchWidget&&(this.searchWidget=new e.SearchBox(v.searchContainer,this.infront,this.addInstrumentSearchOpts("newsList")),this.searchContainer=v.searchContainer),this.progressIndicator=new e.ProgressIndicator(v.root),this.createDropDowns(v.dropDownElement,v.sourcesDropDownElement)),this.userInput=v.userInput,i.prototype.newBuildUI.call(this)},a.prototype.newSubscribe=function(){this.resetAndGetNews(),i.prototype.newSubscribe.call(this)},a.prototype.newUnsubscribe=function(){this.newsRequestCounter++,this.subscribed=!1,this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),i.prototype.newUnsubscribe.call(this)},a.prototype.newDestroyUI=function(){this.sourcesDropDown&&(this.sourcesDropDown.destroy(),this.sourcesDropDown=void 0),i.prototype.newDestroyUI.call(this)},a.prototype.populateRegionsAndSources=function(n){if(n[e.MWSConstants.news_sources]){this.allSources=n[e.MWSConstants.news_sources];for(var i=0,r=this.allSources;i<r.length;i++){var a=r[i];this.newsSources[a.feed]=a}this.options.feeds&&(this.allSources=this.getSourceItemsFromFeeds(this.options.feeds))}if(n[e.MWSConstants.news_regions])for(var s=0,o=n[e.MWSConstants.news_regions];s<o.length;s++){var l=o[s],c=new t;c.code=l[e.MWSConstants.news_region_code],c.description=l[e.MWSConstants.description],this.allRegions.push(c)}},a.prototype.addSourcesToRegions=function(){for(var t=0,n=this.allSources;t<n.length;t++)for(var i=n[t],r=0,a=this.allRegions;r<a.length;r++){var s=a[r];if(s.code==i.region){s.hasOwnProperty(e.MWSConstants.news_sources)||(s[e.MWSConstants.news_sources]=[]),s[e.MWSConstants.news_sources].push(i);break}}},a.prototype.getSourceItemsFromFeeds=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];this.newsSources.hasOwnProperty(""+r)&&t.push(this.newsSources[""+r])}return t},a.prototype.getAllSourcesForRegion=function(e){var n;if("string"==typeof e||e instanceof t){var i="string"==typeof e?this.regionNameToRegion(e):e;if(i){if(i.sources&&0<i.sources.length)return i.sources;n=i.code}}else"number"==typeof e&&(n=e);for(var r=[],a=0,s=this.allSources;a<s.length;a++){var o=s[a];n==o.region&&r.push(o)}return r},a.prototype.getStoredSources=function(){var e=this.getStoredValue(a.kMyStoredSourcesKey);return e?(e=JSON.parse(e),this.getSourceItemsFromFeeds(e)):[]},a.prototype.storeSelectedSources=function(){this.store(a.kMyStoredSourcesKey,JSON.stringify(this.getSubscribedFeeds()))},a.prototype.getInitialSources=function(){var e;if(0==(e=this.options.enableRegionSelector||this.options.enableSourceSelector?this.getStoredSources():[]).length)if(this.options.feeds)e=this.allSources.slice();else if(this.options.preSelectedRegions)for(var t=0,n=this.options.preSelectedRegions;t<n.length;t++){var i=n[t];e=e.concat(this.getAllSourcesForRegion(i))}return e},a.prototype.regionNameToRegion=function(e){for(var t=0,n=this.allRegions;t<n.length;t++){var i=n[t];if(i.description.toLowerCase()==e.toLowerCase())return i}return null},a.prototype.createDropDowns=function(t,n){var i=this;if(this.options.enableRegionSelector||this.options.enableSourceSelector){this.options.enableRegionSelector&&this.options.enableSourceSelector?(this.addSourcesToRegions(),this.dropdownItems=this.allRegions):this.options.enableRegionSelector?this.dropdownItems=this.allRegions:this.dropdownItems=this.allSources;var r=new e.DropDownOptions;r.title=this.languageHandler.get(this.languageKey,"newsSources"),r.list=this.dropdownItems,r.itemLabelPropertyKeys=[e.MWSConstants.description,e.MWSConstants.source_name],r.subNodeName=e.MWSConstants.news_sources,r.multiSelect=!0,r.showToggleAll=!0,r.preSelectedItems=this.subscribedSources,r.onSelectedItemsChanged=function(e){i.newsSourcesChanged(e)},this.sourcesDropDown=new e.DropDown(n,r,this.languageHandler,this),this.options.showFlashNewsFilter&&this.createShowFlashNewsOnlyFilter()}if(this.options.enableDateSelector){this.selectableDates=[],this.options.selectableDates.forEach(function(t){e.newsListPeriods[t]&&i.selectableDates.push({label:i.languageHandler.get(a.kLanguageKey,t),startTime:e.newsListPeriods[t].startTime,endTime:e.newsListPeriods[t].endTime,maxDays:e.newsListPeriods[t].maxDays})});var s=new e.DropDownOptions;this.selectedPeriod=this.selectableDates[0],s.title=this.selectableDates[0].label,s.list=this.selectableDates,s.selectionUpdatesTitle=!0,s.dropDownClassName="news-list-date-dropdown",s.itemLabelPropertyKeys=["label"],s.preSelectedItems=[this.selectableDates[0]],s.closeOnClick=!0,s.sortAlphabetically=!1,s.itemPath="fullName",s.id="issuersDropDown",s.onItemClicked=function(e){i.selectedPeriod=e,i.maxDays=e.maxDays,i.resetAndGetNews(),i.options.onSelectTimePeriod&&i.options.onSelectTimePeriod(e)},this.datesDropDown=new e.DropDown(n,s,this.languageHandler,this)}},a.prototype.createShowFlashNewsOnlyFilter=function(){var t=this;if(this.sourcesDropDown){this.sourcesDropDown.showUpperPane(!0),this.sourcesDropDown.showLowerPane(!1),this.sourcesDropDown.upperPaneElement.appendChild(e.WidgetDOMFactory.create_WNewsShowFlashOnly_DOM(this.showFlashNewsOnly,function(){t.showFlashNewsOnly.set(!t.showFlashNewsOnly.get()),t.updateFilter(),t.updateDisplay(),t.store(a.kMyStoredShowFlashNewsOnlyKey,t.showFlashNewsOnly.get())},this.infrontUI.languageHandler));var n=this.getStoredValue(a.kMyStoredShowFlashNewsOnlyKey);n&&this.showFlashNewsOnly.set(n)}},a.prototype.newsSourcesChanged=function(e){this.subscribedSources=e,this.storeSelectedSources(),this.selectedCustomFilter.set(a.kCustomFilterNoneSelectedId),this.resetAndGetNews()},a.prototype.getSubscribedFeeds=function(){for(var e=[],t=0,n=this.subscribedSources;t<n.length;t++){var i=n[t];InfrontUtil.isIntegerString(i.feed)&&e.push(+i.feed)}return e},a.prototype.initUserFilters=function(){if(this.options.enableUserFilter){var e=this.getStoredValue(a.kMyStoredFiltersKey);if(e)try{for(var t=JSON.parse(e),n=0,i=t;n<i.length;n++){var s=i[n],o=new r;o.fromStorageFormat(s)?this.userFilters.push(o):InfrontUtil.errorLog("Failed to load single user filter from storage format",s)}}catch(t){InfrontUtil.errorLog("Unable to load user filters from storage "+e,t)}else{var l=new r;this.userFilters.push(l)}}},a.prototype.storeUserFilters=function(){for(var e=[],t=0,n=this.userFilters.data;t<n.length;t++){var i=n[t];i.name&&0<i.feeds.length&&e.push(i.toStorageFormat())}0<e.length?this.store(a.kMyStoredFiltersKey,JSON.stringify(e)):this.clearStoredValue(a.kMyStoredFiltersKey)},a.prototype.userFilterDropDownClicked=function(){this.quickFilterObserver.set(""),this.showUserFilterMenu.set(!this.showUserFilterMenu.get()),this.sourcesDropDown&&this.sourcesDropDown.close(),this.datesDropDown&&this.datesDropDown.close()},a.prototype.userFilterClicked=function(e){this.subscribedSources=this.getSourceItemsFromFeeds(e.feeds),this.sourcesDropDown&&this.sourcesDropDown.setSelectedItems(this.subscribedSources),this.selectedCustomFilter.set(a.kCustomFilterNoneSelectedId),this.resetAndGetNews()},a.prototype.addUserFilterTextChanged=function(e){this.userFilterName=e},a.prototype.itemSelected=function(t){if(t.type==e.NewsType.Regular){for(var n=0;n<this.linkedTargets.length;n++)this.linkedTargets[n].receiveMessage({type:InterLibraryLink.DataType.infrontNewsItem,value:t});this.options.useLightbox&&(this.overlay.show(),this.overlay.getCloseBtn().focus())}else t[e.MWSConstants.type]!=e.NewsType.Url||this.options.preventDefault||window.open(t[e.MWSConstants.url],"_blank");this.options.onNewsItemSelected&&this.options.onNewsItemSelected(t)},a.prototype.deleteUserFilter=function(e){for(var t=0;t<this.userFilters.length();t++)this.userFilters.item(t).name==e.name&&this.userFilters.removeItemAt(t);if(this.userFilters.length()<1){var n=new r;this.userFilters.push(n)}this.storeUserFilters()},a.prototype.saveUserFilter=function(t){if(t==e.TextInputBinding.kKeycodeEnter&&""!=this.userFilterName&&0<this.subscribedSources.length){1==this.userFilters.length()&&""==this.userFilters.item(0).name&&this.userFilters.removeItemAt(0);var n=new r;for(var i in n.name=this.userFilterName,n.feeds=[],this.subscribedSources)n.feeds.push(i);this.userFilters.push(n),this.storeUserFilters(),this.addUserFilterObserver.set("")}},a.prototype.filterChanged=function(e){this.filterText=e.toLowerCase(),this.goToFirstPage(),this.updateFilter(),this.updateDisplay()},a.prototype.customFilterSelected=function(e){this.selectedCustomFilter.set(e[a.kCustomFilterIdField]),e.feeds?this.subscribedSources=this.getSourceItemsFromFeeds(e.feeds):this.subscribedSources=this.getAllSourcesForRegion(e.region),this.sourcesDropDown&&this.sourcesDropDown.setSelectedItems(this.subscribedSources),this.resetAndGetNews()},a.prototype.isFirstPage=function(){return 0===this.currentPage.get()},a.prototype.nextPage=function(){1==this.nextEnabled.get()&&(this.filteredRequestCount=0,this.currentPage.set(this.currentPage.get()+1),this.updateDisplay())},a.prototype.prevPage=function(){1==this.prevEnabled.get()&&(1===this.currentPage.get()?this.goToFirstPage():0<this.currentPage.get()&&(this.currentPage.set(this.currentPage.get()-1),this.updateDisplay()))},a.prototype.goToFirstPage=function(){1==this.prevEnabled.get()&&(this.pageBreakOffset=0,this.currentPage.set(0),this.updateDisplay())},a.prototype.resetAndGetNews=function(){if(this.subscribed&&this.newUnsubscribe(),this.newsFactor=0,this.newsAmount=0,this.pageBreakOffset=0,this.filteredRequestCount=0,this.options.maxItems=this.initMaxItems,this.options.pageItems=this.initPageItems,this.newStartTime=void 0,this.newsIdHint=void 0,this.currentPage.set(0),this.displayedItems.clear(),this.unfilteredItems=[],this.allFilteredNewsItems=[],this.options.selectableDates&&this.selectedPeriod)return this.newStartTime=this.selectedPeriod.startTime,this.options.maxDays=this.selectedPeriod.maxDays,void this.getNewsItems(this.options.pageItems);this.getNewsItems()},a.prototype.getNewsItems=function(t){var n=this,i=new e.NewsItemsOptions,r=this.options.paging?3:1;i.startTime=this.newStartTime,i.newsIdHint=this.newsIdHint,t?(i.maxItems=-t,r=1):i.maxItems=this.options.maxItems?-this.options.maxItems:-(this.options.pageItems*r+1),this.options.instrument?(i.instrument=this.options.instrument,this.options.showTickerInHeader&&this.ticker.set(this.options.instrument.ticker)):this.options.instruments?(i.instruments=this.options.instruments,1===this.options.instruments.length&&this.options.showTickerInHeader?this.ticker.set(this.options.instruments[0].ticker):this.ticker.set(void 0)):0<this.subscribedSources.length&&(i.feedNumbers=this.getSubscribedFeeds()),i.types=this.options.types,this.newsRequestCounter++;var s=this.newsRequestCounter;i.onData=function(t){if(n.newsRequestCounter===s){var i=0<n.unfilteredItems.length,r=t;n.newsAmount=r.length+n.unfilteredItems.length;for(var o=!1,l=0,c=r;l<c.length;l++){var d=c[l];d[a.kNewsTimestampField]=new Date(d[e.MWSConstants.time]),d[e.MWSConstants.news_feed]&&n.newsSources.hasOwnProperty(d[e.MWSConstants.news_feed])&&(d[a.kNewsSourceField]=n.newsSources[d[e.MWSConstants.news_feed]].name,d[a.kNewsShortSourceField]=n.newsSources[d[e.MWSConstants.news_feed]].short_name,d[a.kProductCode]=d[a.kProductCode]?d[a.kProductCode]:"",u==e.NewsType.FlashLevel1||u==e.NewsType.FlashLevel2||u==e.NewsType.FlashLevel3?d[a.kNewsIsFlashField]=!0:d[a.kNewsIsFlashField]=!1);var u=d[e.MWSConstants.type];n.unfilteredItems.push(d),o=o||d.hasOwnProperty("category")}i&&(n.filteredRequestCount=0,n.unfilteredItems.sort(function(t,n){return t[e.MWSConstants.time]<n[e.MWSConstants.time]?1:t[e.MWSConstants.time]>n[e.MWSConstants.time]?-1:0})),n.ItemsReceivedPrevRequest=r.length,n.showCategory.set(o),n.displayedItems.length(),n.updateFilter(),n.updateDisplay(),n.options.onDataLoaded&&n.options.onDataLoaded(n.displayedItems.length()==n.unfilteredItems.length&&n.displayedItems.length()==n.allFilteredNewsItems.length)}},i.onError=function(e,t){InfrontUtil.errorLog(e+" "+t),n.progressIndicator&&n.progressIndicator.stop(),n.displayedItems.clear()},this.progressIndicator&&this.progressIndicator.start(),this.infront.newsItems(i)},a.prototype.subscribeNews=function(){var t=this;if(this.infront.isStreaming()&&!0===this.options.streaming){this.subscribed=!0;var n=new e.NewsItemsOptions;this.options.instrument?n.instrument=this.options.instrument:this.options.instruments?n.instruments=this.options.instruments:0<this.subscribedSources.length&&(n.feedNumbers=this.getSubscribedFeeds()),n.types=this.options.types,n.onData=function(n){var i=n,r=i[e.MWSConstants.news_id];i[a.kNewsTimestampField]=new Date(i[e.MWSConstants.time]),i[e.MWSConstants.news_feed]&&t.newsSources.hasOwnProperty(i[e.MWSConstants.news_feed])&&(i[a.kNewsSourceField]=t.newsSources[i[e.MWSConstants.news_feed]][e.MWSConstants.source_name],i[a.kNewsShortSourceField]=t.newsSources[i[e.MWSConstants.news_feed]][e.MWSConstants.source_short],i[a.kProductCode]=i[a.kProductCode]?i[a.kProductCode]:"");var s=i[e.MWSConstants.type];if(s==e.NewsType.FlashLevel1||s==e.NewsType.FlashLevel2||s==e.NewsType.FlashLevel3?i[a.kNewsIsFlashField]=!0:i[a.kNewsIsFlashField]=!1,0<t.unfilteredItems.length&&r===t.unfilteredItems[0][e.MWSConstants.news_id])t.unfilteredItems[0]=i;else if(i[a.kIsUpdated]){for(var o=i[e.MWSConstants.news_id],l=0;l<t.unfilteredItems.length;l++)if(t.unfilteredItems[l][e.MWSConstants.news_id]===o){t.unfilteredItems[l]=i;break}}else t.isFirstPage()||t.pageBreakOffset++,t.unfilteredItems.unshift(i);t.displayedItems.length(),t.updateFilter(),t.updateDisplay(),t.options.onDataLoaded&&t.options.onDataLoaded(t.displayedItems.length()==t.unfilteredItems.length&&t.displayedItems.length()==t.allFilteredNewsItems.length)},n.onError=function(e,t){},this.unsubscribe=this.infront.subscribeNewsItems(n)}},a.prototype.itemIsQualified=function(t){var n=t[e.MWSConstants.headline].toLowerCase(),i=t[e.MWSConstants.category];return!(this.options.selectableDates&&this.selectedPeriod&&(this.selectedPeriod.startTime<new Date(t.time)||new Date(t.time)<this.selectedPeriod.endTime))&&(-1<n.indexOf(this.filterText)||this.showCategory.get()&&i&&-1<i.indexOf(this.filterText))},a.prototype.updateFilter=function(){var t="string"==typeof this.filterText&&0<this.filterText.length,n=InfrontUtil.isFunction(this.options.filterFunction),i=this.options.showFlashNewsFilter&&this.showFlashNewsOnly.get();if(n||t||i){this.allFilteredNewsItems=[];for(var r=0;r<this.unfilteredItems.length;r++){var s=this.unfilteredItems[r];if(s&&s[e.MWSConstants.headline]){this.preProcessItem(s);var o=!t||this.itemIsQualified(s);(!n||this.options.filterFunction(s))&&o&&(!i||s[a.kNewsIsFlashField])&&(s[e.MWSConstants.headline]=this.highlightTextThatMatchesFilter(this.filterText,s[e.MWSConstants.headline]),this.allFilteredNewsItems.push(this.unfilteredItems[r]))}}}else for(this.allFilteredNewsItems=[],r=0;r<this.unfilteredItems.length;r++)this.unfilteredItems[r]&&this.unfilteredItems[r][e.MWSConstants.headline]&&(this.options.selectableDates&&this.selectedPeriod&&(this.selectedPeriod.startTime<new Date(this.unfilteredItems[r].time)||new Date(this.unfilteredItems[r].time)<this.selectedPeriod.endTime)||(this.preProcessItem(this.unfilteredItems[r]),this.allFilteredNewsItems.push(this.unfilteredItems[r])));var l=this.options.paging?Math.ceil(this.allFilteredNewsItems.length/this.options.pageItems):1;this.numberOfPages.set(l),this.currentPage.get()>l-1&&this.currentPage.set(Math.max(this.numberOfPages.get()-1,0))},a.prototype.preProcessItem=function(t){var n=this;t[e.MWSConstants.headline]=this.removeHighlightTags(t[e.MWSConstants.headline]);var i=function(e,t){var i=n.colHandlers[e];if(i&&i.translate)if(0<=e.indexOf("customfield"))t["customfield"+i.id]=i.translate(t,null);else{var r=t["_"+e]||t[e];t["_"+e]=r,t[e]=i.translate(t,t["_"+e])}};for(var r in this.colHandlers)i(r,t)},a.prototype.highlightTextThatMatchesFilter=function(e,t){var n=new RegExp(e,"gi");return t.replace(n,function(e){return a.startHighlightTag+e+a.endHighlightTag})},a.prototype.removeHighlight=function(){for(var t=0;t<this.allFilteredNewsItems.length;t++){var n=this.allFilteredNewsItems[t];n[e.MWSConstants.headline]=this.removeHighlightTags(n[e.MWSConstants.headline])}},a.prototype.removeHighlightTags=function(e){var t=new RegExp(a.startHighlightTag,"gi"),n=new RegExp(a.endHighlightTag,"gi"),i=e;return(i=i.replace(t,"")).replace(n,"")},a.prototype.updateDisplay=function(){this.displayedItems.clear();var e=this.options.paging?this.pageBreakOffset+this.currentPage.get()*this.options.pageItems:0;if(this.options.infinitiveScroll&&(e=0),this.allFilteredNewsItems.length>e){for(var t=Math.min(e+this.options.pageItems,this.allFilteredNewsItems.length),n=e;n<t;n++)this.options.selectableDates&&this.selectedPeriod&&(this.selectedPeriod.startTime<new Date(this.allFilteredNewsItems[n].time)||new Date(this.allFilteredNewsItems[n].time)<this.selectedPeriod.endTime)||this.displayedItems.push(this.allFilteredNewsItems[n]);this.displayObserver.set(this.allFilteredNewsItems)}this.options.infinitiveScroll||this.fillNextPage(),this.isFirstPage()&&0==this.subscribed&&this.displayedItems.length()==this.options.pageItems&&this.subscribeNews(),1==this.initialLoad&&0<this.linkedTargets.length&&1==this.options.preSelectNews&&(this.initialLoad=!1,this.itemSelected(this.displayedItems.data[0])),this.progressIndicator&&this.progressIndicator.stop(),this.options.onPageChange&&this.options.onPageChange(this.currentPage.get())},a.prototype.fillNextPage=function(t){var n=this.allFilteredNewsItems.length-(this.currentPage.get()+1)*this.options.pageItems>=this.options.pageItems;if((this.options.paging||this.options.infinitiveScroll)&&!n&&1<this.ItemsReceivedPrevRequest){if(0<this.unfilteredItems.length){var i=this.unfilteredItems[this.unfilteredItems.length-1];i[e.MWSConstants.time]&&(this.newStartTime=new Date(i[e.MWSConstants.time])),i[e.MWSConstants.news_id]&&(this.newsIdHint=i[e.MWSConstants.news_id])}var r=InfrontUtil.addDays(new Date,-this.maxDays);this.selectableDates&&this.selectedPeriod&&(r=this.selectedPeriod.endTime),this.newStartTime>=r&&this.filteredRequestCount<15&&(this.filteredRequestCount+=1,this.getNewsItems(t))}},a.prototype.showError=function(){},a.prototype.link=function(e){-1!=e.accepts().indexOf(InterLibraryLink.DataType.infrontNewsItem)&&this.linkedTargets.push(e),-1!=e.accepts().indexOf(InterLibraryLink.DataType.listInstrument)&&this.linkedTargets.push(e)},a.prototype.unlink=function(e){var t=this.linkedTargets.indexOf(e);-1<t&&this.linkedTargets.splice(t,1)},a.prototype.accepts=function(){return[InterLibraryLink.DataType.listInstrument,InterLibraryLink.DataType.infrontInstrument]},a.prototype.receiveMessage=function(e){if(e.type==InterLibraryLink.DataType.listInstrument&&this.updateList(e.value),e.type==InterLibraryLink.DataType.infrontInstrument){var t=Array.isArray(e.value)?e.value:[e.value];this.unfilteredItems=[],this.options.instrument=void 0,this.updateList(t)}},a.prototype.updateList=function(e){this.options.instruments=e,this.getNewsItems()},a.kMyStoredSourcesKey="my-stored-sources",a.kMyStoredFiltersKey="my-stored-filters",a.kMyStoredShowFlashNewsOnlyKey="my-sorting-column",a.kLanguageKey="newsList",a.kNewsTimestampField="_timestamp",a.kNewsSourceField="_source",a.kNewsShortSourceField="_shortSource",a.kNewsIsFlashField="_isflash",a.kNewsSourceAllSources="_allsources",a.kNewsSourceNoSource="_nosource",a.kCustomFilterIdField="_customId",a.kIsUpdated="is_updated",a.kProductCode="product_code",a.kCustomFilterNoneSelectedId=-1,a.startHighlightTag="<span class=cell-highlight-text>",a.endHighlightTag="</span>",a}(e.WidgetBase);e.NewsListWidget=o}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cssURL="",t}return __extends(t,e),t}(e.WidgetOptions);e.NewsReaderWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"newsreaderwidget",r)||this;return a.headline=new e.Observable,a.timestamp=new e.Observable,a.source=new e.Observable,a}return __extends(i,n),i.prototype.newInit=function(){this.setNewsItem(this.options.newsItem),n.prototype.newInit.call(this)},i.prototype.newBuildUI=function(){this.iFrame=e.WidgetDOMFactory.create_WNewsReader_DOM(this.element,this.headline,this.source,this.timestamp),n.prototype.newBuildUI.call(this)},i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.setNewsItem=function(t){(this.currentNewsItem=t)?(this.headline.set(t[e.MWSConstants.headline]),this.timestamp.set(t[e.NewsListWidget.kNewsTimestampField]),this.source.set(t[e.NewsListWidget.kNewsSourceField]),this.getNewsBody()):(this.headline.set(null),this.timestamp.set(null),this.source.set(null))},i.prototype.getNewsBody=function(){var t=this,n=new e.DataOptions;n.onData=function(n){var i;(i=t.iFrame.contentDocument?t.iFrame.contentDocument:t.iFrame.contentWindow?t.iFrame.contentWindow.document:t.iFrame.document).open(),i.writeln(n[e.MWSConstants.body]),i.close();for(var r=i.querySelectorAll("a"),a=0;a<r.length;a++)r.item(a).setAttribute("target","_blank");if(""!=t.options.cssURL&&!document.getElementById("infrontcss")){var s=document.createElement("link");s.id="infrontcss",s.rel="stylesheet",s.href=t.options.cssURL,i.head.appendChild(s)}},n.onError=function(e,n){return t.showError()},this.infront.newsItem(this.currentNewsItem[e.MWSConstants.news_feed],this.currentNewsItem[e.MWSConstants.news_id],this.currentNewsItem,n)},i.prototype.showError=function(){var e;(e=this.iFrame.contentDocument?this.iFrame.contentDocument:this.iFrame.contentWindow?this.iFrame.contentWindow.document:this.iFrame.document).open(),e.writeln(" "),e.close()},i.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontNewsItem]},i.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.infrontNewsItem&&this.setNewsItem(e.value)},i.prototype.modify=function(e){},i}(e.WidgetBase);e.NewsReaderWidget=n}(Infront||(Infront={})),function(e){var t=function(e,t,n,i,r,a){this.type=e,this.headline=t,this.news_id=i,this.news_feed=r,this.url=a;var s=new Date(n);if(InfrontUtil.isToday(s)){var o=s.toTimeString();this.time=o.split(" ")[0]}else this.time=InfrontUtil.formatDate(s)};e.NewsObject=t;var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.streaming=!0,t.columns=["TIME","HEADLINE","SHORT_SOURCE"],t.feeds=null,t.maxItems=10,t.maxDays=30,t.readTime=6500,t}return __extends(t,e),t}(e.WidgetOptions);e.NewsScrollerWidgetOptions=n;var i=function(i){function r(e,t,n){var r=i.call(this,e,t,"newsList",n)||this;return r.newsRequestCounter=0,r.newsElements=[],r.linkedTargets=[],r}return __extends(r,i),r.prototype.returnDefaultWidgetOptions=function(){return new n},r.prototype.newInit=function(){this.newEndTime=new Date,this.newStartTime=InfrontUtil.addDays(new Date,-this.options.maxDays),this.newStartTime.setUTCHours(0,0,0,0),this.getNews(),i.prototype.newInit.call(this)},r.prototype.itemSelected=function(t){if(t.url)window.open(t[e.MWSConstants.url],"_blank");else{for(var n=0;n<this.linkedTargets.length;n++)this.linkedTargets[n].receiveMessage({type:InterLibraryLink.DataType.infrontNewsItem,value:t});this.overlay.show()}this.options.onNewsItemSelected&&this.options.onNewsItemSelected(t)},r.prototype.newBuildUI=function(){this.overlay=new e.Overlay;var t=new e.NewsReaderWidgetOptions;this.options.cssURL&&(t.cssURL=this.options.cssURL),this.reader=new e.NewsReaderWidget(this.overlay.getBox(),this.infrontUI,t),this.link(this.reader),this.element.className="wt-news-ticker-display"},r.prototype.newUnsubscribe=function(){this.newsRequestCounter++,this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),i.prototype.newUnsubscribe.call(this)},r.prototype.updateDisplay=function(){var e=this,n=this.newsElements.length!=this.newsSourceArray.length;this.newsElements=[];for(var i=0,r=this.newsSourceArray;i<r.length;i++){var a=r[i];this.newsElements.push(new t(a.type,a.headline,a.time,a.news_id,a.news_feed,a.url))}if(n){clearTimeout(this.loopTimeout);var s,o=this.newsElements.length,l=0,c=0,d=function(){for(;e.element.hasChildNodes();)e.element.removeChild(e.element.firstChild);var t=function(){var t=e.newsElements[l],n=document.createElement("span");n.className="wt-news-ticker-item",n.onclick=function(){e.itemSelected(t)};var i=document.createElement("span");i.className="wt-news-ticker-item__timestamp",i.innerHTML=t.time,n.appendChild(i);var r=document.createElement("span");r.className="wt-news-ticker-item__text",r.innerHTML=t.headline,n.appendChild(r),e.element.appendChild(n)};for(l=0;l<o;l++)t();e.newsElements.push(e.newsElements.shift()),e.element.style.transition="none",e.element.style.left="0px";var n=document.getElementsByClassName("wt-news-ticker-item");n&&0<n.length&&(c=n[0].offsetWidth,s="-"+c+"px",e.element.style.left=s,e.element.style.transition="ease-in-out 1.5s"),e.loopTimeout=window.setTimeout(d,e.options.readTime)};this.loopTimeout=window.setTimeout(d,2e3)}},r.prototype.getNews=function(){var t=this,n=new e.NewsItemsOptions;n.startTime=this.newStartTime,n.endTime=this.newEndTime,n.feedNumbers=this.options.feeds,n.maxItems=this.options.maxItems,this.newsRequestCounter++;var i=this.newsRequestCounter;n.onData=function(e){t.newsRequestCounter===i&&(t.newsSourceArray=e,t.updateDisplay())},n.onError=function(e,t){},this.infront.newsItems(n)},r.prototype.newSubscribe=function(){var t=this,n=new e.NewsItemsOptions;n.feedNumbers=this.options.feeds,n.onData=function(e){var n=e;t.newsSourceArray.unshift(n),t.newsSourceArray.pop(),t.updateDisplay()},n.onError=function(e,t){},this.unsubscribe=this.infront.subscribeNewsItems(n)},r.prototype.link=function(e){-1!=e.accepts().indexOf(InterLibraryLink.DataType.infrontNewsItem)&&this.linkedTargets.push(e)},r.prototype.unlink=function(e){var t=this.linkedTargets.indexOf(e);-1<t&&this.linkedTargets.splice(t,1)},r.prototype.destroy=function(){clearTimeout(this.loopTimeout),i.prototype.destroy.call(this)},r}(e.WidgetBase);e.NewsScrollerWidget=i}(Infront||(Infront={})),function(e){var t=function(){this.groupById=!1,this.groupMaxCount=6};e.NotificationOptions=t;var n,i,r=function(){this.message=[]};(i=n=e.NotificationType||(e.NotificationType={}))[i.SUCCESS=0]="SUCCESS",i[i.ALERT=1]="ALERT",i[i.INFO=2]="INFO",i[i.ERROR=3]="ERROR";var a=function(){function i(t,n){void 0===n&&(n=!1),this.element=t,this.visible=new e.Observable,this.visible.set(!1),this.closeWhenClicked=n,this.notifications=new e.ObservableArray,this.notifications.observe(this),this.buildUI()}return i.prototype.notify=function(e,n,i,r,a){if(InfrontUtil.isString(e)){var s=new t;s.message=e,s.timeout=n,void 0!==i&&(s.type=i),s.payload=r,s.onClick=a,this.doNotify(s)}else this.doNotify(e)},i.prototype.doNotify=function(a){var s=this,o=new t;o.timeout=5,o.type=n.INFO;var l=InfrontUtil.mergeRecursive(o,a),c=new r;if(l.groupById)for(var d=0;d<this.notifications.length();d++)this.notifications.item(d).id==l.id&&(c.message=[].concat(this.notifications.item(d).message),c.message.length>=l.groupMaxCount&&(c.message.splice(l.groupMaxCount-2,c.message.length),c.message.push(i.kGroupMore)),this.notifications.removeItemAt(d));switch(c.internalId=InfrontUtil.makeUUID(),c.id=l.id,c.message.unshift(l.message),1<c.message.length&&c.message.pop(),c.type=l.type,c.timeStamp=new Date,c.payload=l.payload,c.onClick=l.onClick,c.onClose=l.onClose,c.type){case n.INFO:c.class=e.CssConstants.kCellNotificationsInfo;break;case n.SUCCESS:c.class=e.CssConstants.kCellNotificationsSuccess;break;case n.ALERT:c.class=e.CssConstants.kCellNotificationsAlert;break;default:c.class=e.CssConstants.kCellNotificationsInfo}this.notifications.insert(c,0),0<l.timeout&&setTimeout(function(){s.notifications.remove(c)},1e3*l.timeout)},i.prototype.buildUI=function(){var t=this;e.WidgetDOMFactory.create_DNotifications_DOM(this.element,this.notifications,this.visible,function(e){return t.closeNotification(e)},function(e){return t.notificationClicked(e)})},i.prototype.notificationClicked=function(e){var t=this.lookup(e);t&&t.onClick&&(t.onClick(t.id,t.payload),this.closeWhenClicked&&this.closeNotification(e))},i.prototype.reInit=function(e){this.visible.set(0<this.notifications.length())},i.prototype.itemAdded=function(e,t){this.visible.set(0<this.notifications.length())},i.prototype.itemRemoved=function(e,t){this.visible.set(0<this.notifications.length())},i.prototype.itemMoved=function(e,t,n){},i.prototype.closeNotification=function(e){var t=this.lookup(e);null!=t&&(this.notifications.remove(t),t.onClose&&t.onClose(t.id))},i.prototype.lookup=function(e){return this.notifications.find(function(t){return t.internalId==e})},i.kGroupMore="...",i}();e.Notifications=a}(Infront||(Infront={})),function(e){var t,n;(n=t=e.OrderbookRowLayout||(e.OrderbookRowLayout={}))[n.WIDE=0]="WIDE",n[n.COMPACT=1]="COMPACT";var i=function(){this.showTicker=!1,this.showPctChange=!1,this.showAbsoluteChange=!1};e.OrderBookTitleSettings=i;var r=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.levels=5,n.layout=t.WIDE,n.streaming=!0,n.volumeBarHeight="12px",n.legacyMode=!1,n.showFooter=!1,n.titleSettings=new i,n}return __extends(n,e),n}(e.SingleInstrumentWidgetOptions);e.OrderbookWidgetOptions=r;var a=function(t){function n(i,r,a){var s=t.call(this,i,r,"orderBook",a)||this;if(s.avoidCache=!1,s.bidRowElements=[],s.askRowElements=[],s.bidRows=[],s.askRows=[],s.headerValueWidgets=e.WidgetArray.create(),s.avoidCache=!a.legacyMode,s.displayTicker=new e.Observable,s.maxVolume=new e.ObservableBinding,s.cappedMaxVolume=new e.ObservableBinding,s.pctChange=new e.Observable,s.change=new e.Observable,s.bidRatio=new e.Observable,s.askRatio=new e.Observable,s.bidSize=new e.Observable(0),s.askSize=new e.Observable(0),s.spread=new e.Observable(0),s.options.levels!=n.kOrderbookAllLevels&&(s.cappedBids=new e.CachedObservableArrayCap(s.infront.getCache(),s.options.levels),s.cappedAsks=new e.CachedObservableArrayCap(s.infront.getCache(),s.options.levels),s.avoidCache))for(var o=0;o<s.options.levels;o++){var l=new e.OrderbookRow(e.OrderbookSide.BID);l.level=o+1,l.price.set(null),l.formattedPrice.set(null);var c=new e.OrderbookRow(e.OrderbookSide.ASK);c.level=o+1,c.price.set(null),c.formattedPrice.set(null),s.bidRows.push(l),s.askRows.push(c),s.bidRowElements.push(s.createBidRow(l,o)),s.askRowElements.push(s.createAskRow(c,o))}return s.targetManager=new InfrontUtil.LinkTargetManager,s.avoidCache||s.subscribes.addField(e.QuoteFields.ORDERBOOK),s}return __extends(n,t),n.prototype.returnDefaultWidgetOptions=function(){return new r},n.prototype.newInit=function(){this.options.instrument&&this.displayTicker.set(this.options.instrument.ticker),t.prototype.newInit.call(this)},n.prototype.newBuildUI=function(){var i=this;null==this.options.onTickerClick?this.enableLink=!1:this.enableLink=!0;var r=e.WidgetDOMFactory.create_WOrderbook_DOM(this.element,this.displayTicker,this.pctChange,this.change,this.options.layout,!this.options.hideOrders,this.widgetTitle,this.enableLink,this.options.titleSettings.showPctChange,this.options.titleSettings.showAbsoluteChange,this.options.titleSettings.showTicker,this.options.showFooter,this.options.volumeBarHeight,this.bidSize,this.bidRatio,this.askSize,this.askRatio,this.spread,this.decimals,function(e){return i.linkClicked()},this.options.showSearchWidget,function(e){return i.onSearchButtonClick(e)},this.infrontUI.languageHandler);this.options.titleSettings.showPctChange&&this.addChangeFieldToHeader(r.percentChangeNode,"PCT_CHANGE"),this.options.titleSettings.showAbsoluteChange&&this.addChangeFieldToHeader(r.absoluteChangeNode,"CHANGE");var a=new e.InlineRowFactory(function(e,t){return i.avoidCache?i.bidRowElements[t]:i.createBidRow(e,t)});if(this.bidsBinding=new e.ArrayBinding(r.bidTBody,a,null),this.options.levels!=n.kOrderbookAllLevels&&this.cappedBids.observe(this.bidsBinding),this.avoidCache)for(var s=0;s<this.options.levels;s++)this.bidsBinding.itemAdded(null,s);var o=new e.InlineRowFactory(function(e,t){return i.avoidCache?i.askRowElements[t]:i.createAskRow(e,t)});if(this.asksBinding=new e.ArrayBinding(r.askTBody,o,null),this.options.levels!=n.kOrderbookAllLevels&&this.cappedAsks.observe(this.asksBinding),this.avoidCache)for(s=0;s<this.options.levels;s++)this.asksBinding.itemAdded(null,s);this.options.showSearchWidget&&(this.searchWidget=new e.SearchBox(r.searchContainer,this.infront,this.addInstrumentSearchOpts("orderBook")),this.searchContainer=r.searchContainer,this.bidSize.set(0),this.askSize.set(0),this.bidRatio.set(0),this.askRatio.set(0),this.spread.set(0)),t.prototype.newBuildUI.call(this)},n.prototype.addChangeFieldToHeader=function(t,n){var i=new e.InstrumentSingleValueWidgetOptions;i.name=n,i.instrument=new e.Instrument(this.options.instrument.feed,this.options.instrument.ticker),i.useOriginal=!0,i.enableChangeStatusColors=!0,i.rootElement="span",this.headerValueWidgets.push(new e.InstrumentSingleValueWidget(t,this.infrontUI,i))},n.prototype.newSubscribe=function(){this.options.instrument&&(this.assignCacheKey(),this.subscribes.addInstrument(new e.Instrument(this.options.instrument.feed,this.options.instrument.ticker)),this.subscribes.addField("PCT_SPREAD"),e.ComputedFields.S_MARKET_PRICE().createComputedFieldInCache(this.cache,this.options.instrument,this.cacheKey),this.subscribes.addField("S_MARKET_PRICE"))},n.prototype.newDestroyUI=function(){this.headerValueWidgets.destroyAndRemoveAll(),t.prototype.newDestroyUI.call(this)},n.prototype.addOrUpdateItem=function(t,i){var r,a=!1;if(t){if(r=i?this.bidRows:this.askRows,this.options.levels==n.kOrderbookAllLevels&&!r[t.level-1]){var s=new e.OrderbookRow(i?e.OrderbookSide.BID:e.OrderbookSide.ASK);s.level=t.level,s.price.set(null),r[t.level-1]=s,i?(this.bidRowElements[t.level-1]=this.createBidRow(s,t.level-1),this.bidsBinding.itemAdded(null,t.level-1)):(this.askRowElements[t.level-1]=this.createAskRow(s,t.level-1),this.asksBinding.itemAdded(null,t.level-1))}if(r[t.level-1]){var o=r[t.level-1];i?this.bidSize.set(this.bidSize.get()-(o.volume.get()||0)+(t.volume||0)):this.askSize.set(this.askSize.get()-(o.volume.get()||0)+(t.volume||0)),(this.bidSize.get()||this.askSize.get())&&(this.bidRatio.set(100*this.bidSize.get()/(this.bidSize.get()+this.askSize.get())),this.askRatio.set(100*this.askSize.get()/(this.bidSize.get()+this.askSize.get()))),o.numOrders.set(t.orders);var l=9999.99===t.price?this.languageHandler.get("orderEntry","AT_MARKET"):InfrontUtil.formatNumber(t.price,this.decimals.get());o.formattedPrice.set(l),o.price.set(t.price),o.volume.set(t.volume),a=!0}}return a},n.prototype.createBindings=function(){var n=this;if(this.options.instrument){var i=this.infront.streamingManager.getSymbol(this.options.instrument.feed,this.options.instrument.ticker,!1);if(i){var r=e.BindingFactory.createInlineBinding(function(e){return n.change.set(e)}),a=e.BindingFactory.createInlineBinding(function(e){return n.pctChange.set(e)});i.getValue(IDS.RealtimeTags.Change).observe(r),i.getValue(IDS.RealtimeTags.ChangePct).observe(a)}var s=e.FieldsHelper.createFieldFromSpec("PCT_SPREAD",this.languageHandler);if(s instanceof e.ComputedField){s.createComputedFieldInCache(this.cache,this.options.instrument,this.cacheKey);var o=e.BindingFactory.createInlineBinding(function(e){n.spread.set(e)});this.unbinds.push(this.cache.customBind(this.cacheKey,s.getFieldSpec(),o))}if(this.avoidCache){var l=function(t){var i=n.maxVolume.get()||0;if(t&&(t.asks&&0<t.asks.length||t.bids&&0<t.bids.length)){for(var r=Math.max(t.asks?t.asks.length:0,t.bids?t.bids.length:0),a=0;a<r;a++){if(t.asks&&a<t.asks.length){var s=t.asks[a];n.addOrUpdateItem(s,!1)&&(i=s.volume>i?s.volume:i,a==n.options.levels-1&&n.cappedMaxVolume.set(i))}if(t.bids&&a<t.bids.length){var o=t.bids[a];n.addOrUpdateItem(o,!0)&&(i=o.volume>i?o.volume:i,a==n.options.levels-1&&n.cappedMaxVolume.set(i))}}n.maxVolume.set(i)}else null==t&&(n.reset(),n.newUnsubscribe(),n.unsubscribe=n.infront.getSymbols([n.options.instrument],[e.QuoteFields.ORDERBOOK],function(e){l(e)},0,n.infront.isStreaming()&&!0===n.options.streaming))};if(i&&0!=(i.content&IDS.SymbolContentEnum.Mbl)&&i.mbl){var c=new e.MblOrderBook(i);c.asks=[],c.bids=[];var d=function(t,n){var i=new e.MblOrder;return i.level=t,i.orders=n.orders,i.price=n.price,i.volume=n.volume,i};for(var u in i.mbl.levels){var h=i.mbl.levels[u];h.ask&&c.asks.push(d(u,h.ask)),h.bid&&c.bids.push(d(u,h.bid))}l(c)}this.unsubscribe=this.infront.getSymbols([this.options.instrument],[e.QuoteFields.ORDERBOOK],function(e){l(e)},0,this.infront.isStreaming()&&!0===this.options.streaming)}}t.prototype.createBindings.call(this)},n.prototype.newUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),t.prototype.newUnsubscribe.call(this)},n.prototype.removeBindings=function(){t.prototype.removeBindings.call(this),this.newUnsubscribe(),this.reset(),this.bidsBinding&&this.bidsBinding.reInit([]),this.asksBinding&&this.asksBinding.reInit([])},n.prototype.computeBarWidth=function(e){return(e[0]||0)/(e[1]?e[1]:e[2])*100},n.prototype.createBidRow=function(t,n){var i=this,r=new e.ComputedObservable([t.volume,this.cappedMaxVolume,this.maxVolume],this.computeBarWidth);return e.WidgetDOMFactory.create_WOrderbookBidRow_DOM(t.formattedPrice,t.volume,t.numOrders,r,this.options.volumeBarHeight,this.decimals,function(e){return i.priceClicked(t,InfrontConstants.OrderType.BID)},this.options.layout,!this.options.hideOrders)},n.prototype.createAskRow=function(t,n){var i=this,r=new e.ComputedObservable([t.volume,this.cappedMaxVolume,this.maxVolume],this.computeBarWidth);return e.WidgetDOMFactory.create_WOrderbookAskRow_DOM(t.formattedPrice,t.volume,t.numOrders,r,this.options.volumeBarHeight,this.decimals,function(e){return i.priceClicked(t,InfrontConstants.OrderType.ASK)},this.options.layout,!this.options.hideOrders)},n.prototype.priceClicked=function(e,t){var n=e.price.get();9999.99==n&&(n=this.cache.get(this.cacheKey,"LAST")),this.options.onPriceClick&&this.options.onPriceClick(n,t),this.options.onPriceInstrumentClick&&this.options.onPriceInstrumentClick(n,t,this.options.instrument),this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.price,n)},n.prototype.reset=function(){if(this.avoidCache)for(var e=function(e){e&&(e.price.set(null),e.formattedPrice.set(null),e.numOrders.set(null),e.volume.set(null))},t=0;t<this.bidRows.length;t++)e(this.bidRows[t]),e(this.askRows[t])},n.prototype.linkClicked=function(){this.options.onTickerClick(this.options.instrument)},n.prototype.link=function(e){InterLibraryLink.targetSupportsType(e,InterLibraryLink.DataType.price)&&this.targetManager.addTarget(e)},n.prototype.unlink=function(e){this.targetManager.removeTarget(e)},n.prototype.htmlElementTreeAdded=function(e,t,n){},n.prototype.htmlElementTreeRemoved=function(t,n,i){e.WidgetDOMFactory.unbindAll(t)},n.prototype.htmlElementTreeMoved=function(e,t,n,i){},n.kOrderbookAllLevels=-1,n}(e.SingleInstrumentWidgetBase);e.OrderbookWidget=a}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.WidgetOptions);e.OrderEntryAlgoWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"OrderEntryAlgo",r)||this;return a.confirmMode=new e.Observable,a.confirmMode.set(!1),a.selectedStrategy=a.options.strategy,a.inputFieldClicked=function(e){a.options.fieldClickedCallback&&a.options.fieldClickedCallback()},a.customInit(),a}return __extends(i,n),i.prototype.newInit=function(){},i.prototype.customInit=function(){this.isInitialised=!0,this.widgetState=e.WidgetState.Initialized,this.newBuildUI()},i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){this.algoName=new e.Observable,this.algoName.set(""),this.message=new e.Observable,this.message.set(""),this.algoFields=e.WidgetDOMFactory.create_WOrderEntryAlgo_DOM(this.element,this.algoName,this.message),this.updateUIForSelectedStrategy(),n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){this.clearFields(),e.WidgetDOMFactory.unbindAll(this.algoFields),InfrontUtil.removeAllChildNodes(this.algoFields),n.prototype.newDestroyUI.call(this)},i.prototype.paramIsVisible=function(e){return!e.hasOwnProperty("hidden")||0==e.hidden},i.prototype.updateUIForSelectedStrategy=function(){this.clearFields(),e.WidgetDOMFactory.unbindAll(this.algoFields),InfrontUtil.removeAllChildNodes(this.algoFields),this.algoFieldsData={},this.algoName.set(this.selectedStrategy.label),this.message.set(this.selectedStrategy.description);var t=this.selectedStrategy.params;if(t)for(var n=0;n<t.length;n++){var i=t[n];switch(i.type){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:this.createAlgoParamInputField(i);break;case e.AlgoParam.DATETIME:case e.AlgoParam.DATE:this.createAlgoParamDateField(i);break;case e.AlgoParam.TIME:this.createAlgoParamTimeField(i);break;case e.AlgoParam.DROPDOWN:this.createAlgoParamDropdownField(i);break;case e.AlgoParam.MULTI_LINE:case e.AlgoParam.FREE_TEXT:this.createAlgoParamFreeTextField(i);break;case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:}}},i.prototype.reset=function(){for(var t=this.selectedStrategy.params,n=0;n<t.length;n++){var i=t[n];if(this.paramIsVisible(i))switch(i.type){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:this.algoFieldsData[i.id].inputBinding.set("");break;case e.AlgoParam.DATETIME:case e.AlgoParam.DATE:this.algoFieldsData[i.id].dateSelector.setDate(InfrontUtil.today());break;case e.AlgoParam.TIME:this.algoFieldsData[i.id].timeSelector.setTimeB(new Date);break;case e.AlgoParam.DROPDOWN:this.algoFieldsData[i.id].inputBinding.setSelected(0);break;case e.AlgoParam.MULTI_LINE:case e.AlgoParam.FREE_TEXT:this.algoFieldsData[i.id].inputBinding.set("");break;case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:}}},i.prototype.getLabel=function(e){return e.mandatory?e.label+" *":e.label},i.prototype.createAlgoParamInputField=function(t){var n=this,i=new e.TextInputBinding,r=new e.Observable;r.set(!t.modify),this.applyTextValidators(i,t),i.observe(function(e){return n.algoFieldChanged(e)}),this.algoFieldsData[t.id]={fieldType:t.type,inputBinding:i,disabled:r},this.algoFields.appendChild(e.WidgetDOMFactory.create_WOrderEntryAlgo_Input_DOM(i,this.getLabel(t),r,this.confirmMode,this.inputFieldClicked)).hidden=!this.paramIsVisible(t)},i.prototype.createAlgoParamDropdownField=function(t){var n=this,i=new e.SelectInputBinding;i.observe(function(e){return n.algoFieldChanged(e)});var r=new e.ObservableArray;r.replaceWith(t.dropdown_items);var a=new e.Observable;if(a.set(!t.modify),this.algoFieldsData[t.id]={fieldType:t.type,inputBinding:i,items:r,disabled:a},this.algoFields.appendChild(e.WidgetDOMFactory.create_WOrderEntryAlgo_Select_DOM(r,i,this.getLabel(t),a,this.confirmMode,this.inputFieldClicked)).hidden=!this.paramIsVisible(t),t.default)for(var s=0;s<t.dropdown_items.length;s++)t.dropdown_items[s].value==t.default&&i.setSelected(s)},i.prototype.createAlgoParamDateField=function(t){var n=this,i=e.WidgetDOMFactory.create_WOrderEntryAlgo_Calendar_DOM(this.getLabel(t),this.confirmMode),r=new e.DateSelector(i.dateSelector,this.infrontUI.languageHandler,function(e){n.inputFieldClicked(null)});r.setMinDate(InfrontUtil.addDays(InfrontUtil.today(),t.min)),0<t.max&&r.setMaxDate(InfrontUtil.addDays(InfrontUtil.today(),t.max)),this.algoFieldsData[t.id]={fieldType:t.type,dateSelector:r},this.algoFields.appendChild(i.root).hidden=!this.paramIsVisible(t)},i.prototype.createAlgoParamTimeField=function(t){var n=this,i=e.WidgetDOMFactory.create_WOrderEntryAlgo_Time_DOM(this.getLabel(t),this.confirmMode),r=new e.TimeSelector(i.timeSelector,this.infrontUI.languageHandler,function(e){n.inputFieldClicked(null)});this.algoFieldsData[t.id]={fieldType:t.type,timeSelector:r},this.algoFields.appendChild(i.root).hidden=!this.paramIsVisible(t)},i.prototype.createAlgoParamFreeTextField=function(t){var n=this,i=new e.TextInputBinding;this.applyTextValidators(i,t),i.observe(function(e){return n.algoFieldChanged(e)});var r=new e.Observable;r.set(!t.modify),this.algoFieldsData[t.id]={fieldType:t.type,inputBinding:i,disabled:r},this.algoFields.appendChild(e.WidgetDOMFactory.create_WOrderEntryAlgo_TextArea_DOM(i,this.getLabel(t),r,this.confirmMode,this.inputFieldClicked)).hidden=!this.paramIsVisible(t)},i.prototype.algoFieldChanged=function(e){this.options.fieldChangeCallback&&this.options.fieldChangeCallback()},i.prototype.clearFields=function(){for(var t in this.algoFieldsData)this.algoFieldsData.hasOwnProperty(t)&&(this.algoFieldsData[t].fieldType==e.AlgoParam.DATE?this.algoFieldsData[t].dateSelector.destroy():this.algoFieldsData[t].fieldType==e.AlgoParam.TIME&&this.algoFieldsData[t].timeSelector.destroy())},i.prototype.isNumberField=function(t){switch(t){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:return!0;default:return!1}},i.prototype.applyTextValidators=function(e,t){var n=this;t.mandatory&&e.setValidator(function(e){return n.isNumberField(t.type)?null!=InfrontUtil.parseFloatValue(e):""!=e}),0!=t.min&&e.setValidator(function(e){var n=InfrontUtil.parseFloatValue(e);return null!=n&&n>=t.min}),0!=t.max&&e.setValidator(function(e){var n=InfrontUtil.parseFloatValue(e);return null!=n&&n<=t.max})},i.prototype.setPrice=function(e){},i.prototype.validateInput=function(){for(var t=!0,n=this.selectedStrategy.params,i=0;i<n.length;i++){var r=n[i];if(this.paramIsVisible(r)){var a=r.id;switch(r.type){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:t=t&&this.algoFieldsData[a].inputBinding.isValid();break;case e.AlgoParam.DATETIME:case e.AlgoParam.DATE:var s=this.algoFieldsData[a].dateSelector.getDate(),o=InfrontUtil.addDays(InfrontUtil.today(),r.min),l=InfrontUtil.addDays(InfrontUtil.today(),r.max);t=t&&o<=s&&(0==r.max||s<=l);break;case e.AlgoParam.TIME:var c=this.algoFieldsData[a].timeSelector.getTime();t=t&&null!=c;break;case e.AlgoParam.DROPDOWN:var d=this.algoFieldsData[a].inputBinding.getSelectedIndex();t=t&&null!=d&&0<=d;break;case e.AlgoParam.MULTI_LINE:case e.AlgoParam.FREE_TEXT:t=t&&this.algoFieldsData[a].inputBinding.isValid();break;case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:}}}return t},i.prototype.initModify=function(e){for(var t=this,n=function(n){i.cache.asyncGet(function(e){t.applyFieldValue(n.id,e)},e,["algo_params",n.id.toLowerCase()])},i=this,r=0,a=this.selectedStrategy.params;r<a.length;r++)n(a[r])},i.prototype.modifyOrder=function(t){t.algoParams=[],t.algoId=this.selectedStrategy.id;for(var n=this.selectedStrategy.params,i=0;i<n.length;i++){var r=n[i],a=void 0,s=r.id;switch(r.type){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:a=(a=this.algoFieldsData[s].inputBinding.get())?InfrontUtil.formatTradingAlgoPriceString(a):"",t.algoParams.push({id:s,value:a});break;case e.AlgoParam.DATETIME:case e.AlgoParam.DATE:var o=this.algoFieldsData[s].dateSelector.getDate();t.algoParams.push({id:s,value:InfrontUtil.getTradingAlgoParamDateString(o)});break;case e.AlgoParam.TIME:var l=this.algoFieldsData[s].timeSelector.getTime();t.algoParams.push({id:s,value:InfrontUtil.getTradingAlgoParamTimeString(l)});break;case e.AlgoParam.DROPDOWN:var c=this.algoFieldsData[s].inputBinding.getSelectedIndex(),d=this.algoFieldsData[s].items.item(c).value;t.algoParams.push({id:s,value:d});break;case e.AlgoParam.MULTI_LINE:case e.AlgoParam.FREE_TEXT:a=this.algoFieldsData[s].inputBinding.get(),t.algoParams.push({id:s,value:a});break;case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:t.algoParams.push({id:s,value:""})}}},i.prototype.populateOrder=function(t){t.algoId=this.selectedStrategy.id,t.algoParams=[];for(var n=this.selectedStrategy.params,i=0;i<n.length;i++){var r=n[i],a=void 0,s=r.id;switch(r.type){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:a=(a=this.algoFieldsData[s].inputBinding.get())?InfrontUtil.formatTradingAlgoPriceString(a):"",t.algoParams.push({id:s,value:a});break;case e.AlgoParam.DATETIME:case e.AlgoParam.DATE:var o=this.algoFieldsData[s].dateSelector.getDate();t.algoParams.push({id:s,value:InfrontUtil.getTradingAlgoParamDateString(o)});break;case e.AlgoParam.TIME:var l=this.algoFieldsData[s].timeSelector.getTime();t.algoParams.push({id:s,value:InfrontUtil.getTradingAlgoParamTimeString(l)});break;case e.AlgoParam.DROPDOWN:var c=this.algoFieldsData[s].inputBinding.getSelectedIndex(),d=this.algoFieldsData[s].items.item(c).value;t.algoParams.push({id:s,value:d});break;case e.AlgoParam.MULTI_LINE:case e.AlgoParam.FREE_TEXT:a=this.algoFieldsData[s].inputBinding.get(),t.algoParams.push({id:s,value:a});break;case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:t.algoParams.push({id:s,value:""})}}},i.prototype.getDropdownIndexOfValue=function(e,t){for(var n=0;n<e.length;n++)if(e[n].value==t)return n;return-1},i.prototype.applyFieldValue=function(t,n){for(var i=this.selectedStrategy.params,r=0;r<i.length;r++){var a=i[r],s=a.id;if(a.id==t)switch(a.type){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:this.algoFieldsData[s].inputBinding.set(n);break;case e.AlgoParam.DATETIME:case e.AlgoParam.DATE:var o=InfrontUtil.parseTradingAlgoParamDateString(n);o&&this.algoFieldsData[s].dateSelector.setDate(o);break;case e.AlgoParam.TIME:InfrontUtil.parseTradingAlgoParamTimeString(n),o&&this.algoFieldsData[s].timeSelector.setTimeB(o);break;case e.AlgoParam.DROPDOWN:var l=this.getDropdownIndexOfValue(this.algoFieldsData[s].items.data,n);0<=l&&this.algoFieldsData[s].inputBinding.setSelected(l);break;case e.AlgoParam.MULTI_LINE:case e.AlgoParam.FREE_TEXT:this.algoFieldsData[s].inputBinding.set(n);break;case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:}}},i.prototype.applyOrderAlgoParams=function(e){for(var t=0;t<e.length;t++){var n=e[t].id,i=e[t].value;this.applyFieldValue(n,i)}},i.prototype.populateFromCurrentOrder=function(e){this.applyOrderAlgoParams(e.algoParams)},i.prototype.populateFromModifyOrder=function(e){this.applyOrderAlgoParams(e.algoParams)},i.prototype.setConfirmMode=function(t){this.confirmMode.set(t);for(var n=this.selectedStrategy.params,i=0;i<n.length;i++){var r=n[i];if(this.paramIsVisible(r)){var a=n[i].id,s=n[i].modify,o=this.algoFieldsData[a];switch(n[i].type){case e.AlgoParam.INT:case e.AlgoParam.DOUBLE:case e.AlgoParam.STOP_PRICE:case e.AlgoParam.PRICE:o.hasOwnProperty("disabled")&&o.disabled.set(t||!s);break;case e.AlgoParam.DATETIME:case e.AlgoParam.DATE:o.hasOwnProperty("dateSelector")&&o.dateSelector.setEnabled(!t||!s);break;case e.AlgoParam.TIME:o.hasOwnProperty("timeSelector")&&o.timeSelector.setEnabled(!t||!s);break;case e.AlgoParam.DROPDOWN:o.hasOwnProperty("disabled")&&o.disabled.set(t||!s);break;case e.AlgoParam.MULTI_LINE:case e.AlgoParam.FREE_TEXT:o.hasOwnProperty("disabled")&&o.disabled.set(t||!s);break;case e.AlgoParam.INIT_CODE:case e.AlgoParam.PARENT:case e.AlgoParam.DONE_CODE:case e.AlgoParam.VALID_SESSION:case e.AlgoParam.BOOL:case e.AlgoParam.INSTRUMENT:case e.AlgoParam.VOLUME_LOTS:}}}},i}(e.WidgetBase);e.OrderEntryAlgoWidget=n}(Infront||(Infront={})),function(e){var t=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.customFields=new e.CustomFields,n.orderType=e.OrderType.NORMAL,n}return __extends(n,t),n}(e.WidgetOptions);e.OrderEntryCustomFieldsWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"OrderEntryCustomFields",r)||this;a.hasAnyMandatoryField=!1,a.fields=r.customFields,a.confirmMode=new e.Observable,a.confirmMode.set(!1),a.inputFieldClicked=function(e){a.options.fieldClickedCallback&&a.options.fieldClickedCallback()},a.fields.items=a.fields.items||[],a.customInit();for(var s=0;s<a.fields.items.length;s++)a.unPrefix(a.fields.items[s],a.fields.items[s].value);return a}return __extends(i,n),i.prototype.hasMandatory=function(){return this.hasAnyMandatoryField},i.prototype.newInit=function(){},i.prototype.customInit=function(){this.isInitialised=!0,this.widgetState=e.WidgetState.Initialized,this.newBuildUI()},i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){this.customFields=e.WidgetDOMFactory.create_WOrderEntryCustomFields_DOM(this.element),this.customFieldsData={};for(var t=this.fields.items,i=0;i<t.length;i++)switch(t[i].mandatory&&(this.hasAnyMandatoryField=!0),t[i].type){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:this.createCustomFieldItemInputField(t[i]);break;case e.CustomFieldItem.DATE:this.createCustomFieldItemDateField(t[i]);break;case e.CustomFieldItem.TIME:case e.CustomFieldItem.DATETIME:break;case e.CustomFieldItem.DROPDOWN:this.createCustomFieldItemDropdownField(t[i]);break;case e.CustomFieldItem.MULTI_LINE:case e.CustomFieldItem.FREE_TEXT:this.createCustomFieldItemFreeTextField(t[i]);break;case e.CustomFieldItem.INIT_CODE:case e.CustomFieldItem.PARENT:case e.CustomFieldItem.DONE_CODE:case e.CustomFieldItem.VALID_SESSION:case e.CustomFieldItem.BOOL:case e.CustomFieldItem.INSTRUMENT:case e.CustomFieldItem.VOLUME_LOTS:}n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){this.clearFields(),e.WidgetDOMFactory.unbindAll(this.customFields),InfrontUtil.removeAllChildNodes(this.customFields),n.prototype.newDestroyUI.call(this)},i.prototype.reset=function(){for(var t=this.fields.items,n=0;n<t.length;n++)switch(t[n].type){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:this.customFieldsData[t[n].id].inputBinding.set("");break;case e.CustomFieldItem.DATE:this.customFieldsData[t[n].id].dateSelector.setDate(InfrontUtil.today());break;case e.CustomFieldItem.TIME:case e.CustomFieldItem.DATETIME:break;case e.CustomFieldItem.DROPDOWN:this.customFieldsData[t[n].id].inputBinding.setSelected(0);break;case e.CustomFieldItem.MULTI_LINE:case e.CustomFieldItem.FREE_TEXT:this.customFieldsData[t[n].id].inputBinding.set("");break;case e.CustomFieldItem.INIT_CODE:case e.CustomFieldItem.PARENT:case e.CustomFieldItem.DONE_CODE:case e.CustomFieldItem.BOOL:case e.CustomFieldItem.INSTRUMENT:case e.CustomFieldItem.VOLUME_LOTS:}},i.prototype.getLabel=function(e){return e.mandatory?e.label+" *":e.label},i.prototype.setIsHidden=function(e){e.isHidden=e.forOrderTypes&&0<e.forOrderTypes.length&&e.forOrderTypes.indexOf(this.options.orderType)<0},i.prototype.createCustomFieldItemInputField=function(t){var n=this,i=new e.TextInputBinding,r=new e.Observable,a=!0;this.setIsHidden(t),t.type==e.CustomFieldItem.STOP_PRICE&&(a=0<=(e.OrderType.STOP_LIMIT+e.OrderType.STOP_LOSS).indexOf(this.options.orderType)),r.set(!(t.modify&&a)),this.applyTextValidators(i,t),i.observe(function(e){return n.customFieldChanged(e)}),this.customFieldsData[t.id]={fieldType:t.type,inputBinding:i,disabled:r},this.customFields.appendChild(e.WidgetDOMFactory.create_WOrderEntryCustomFields_Input_DOM(i,this.getLabel(t),r,this.confirmMode,this.inputFieldClicked)).hidden=t.isHidden},i.prototype.createCustomFieldItemDateField=function(t){var n=this;this.setIsHidden(t);var i=e.WidgetDOMFactory.create_WOrderEntryCustomFields_Calendar_DOM(this.getLabel(t),this.confirmMode),r=new e.DateSelector(i.dateSelector,this.infrontUI.languageHandler,function(e){n.inputFieldClicked(null)});r.setMinDate(InfrontUtil.addDays(InfrontUtil.today(),t.min)),0<t.max&&r.setMaxDate(InfrontUtil.addDays(InfrontUtil.today(),t.max)),this.customFieldsData[t.id]={fieldType:t.type,dateSelector:r},this.customFields.appendChild(i.root).hidden=t.isHidden},i.prototype.createCustomFieldItemDropdownField=function(t){var n=this;this.setIsHidden(t);var i=new e.SelectInputBinding;i.observe(function(e){return n.customFieldChanged(e)});var r=new e.ObservableArray;r.replaceWith(t.dropdown_items);var a=new e.Observable;if(a.set(!t.modify),this.customFieldsData[t.id]={fieldType:t.type,inputBinding:i,items:r,disabled:a},this.customFields.appendChild(e.WidgetDOMFactory.create_WOrderEntryCustomFields_Select_DOM(r,i,this.getLabel(t),a,this.confirmMode,this.inputFieldClicked)).hidden=t.isHidden,t.default)for(var s=0;s<t.dropdown_items.length;s++)t.dropdown_items[s].value==t.default&&i.setSelected(s)},i.prototype.createCustomFieldItemFreeTextField=function(t){var n=this;this.setIsHidden(t);var i=new e.TextInputBinding;t.min=0,t.max=0,this.applyTextValidators(i,t),i.observe(function(e){return n.customFieldChanged(e)});var r=new e.Observable;r.set(!t.modify),this.customFieldsData[t.id]={fieldType:t.type,inputBinding:i,disabled:r},this.customFields.appendChild(e.WidgetDOMFactory.create_WOrderEntryCustomFields_Input_DOM(i,this.getLabel(t),r,this.confirmMode,this.inputFieldClicked)).hidden=t.isHidden},i.prototype.customFieldChanged=function(e){this.options.fieldChangeCallback&&this.options.fieldChangeCallback()},i.prototype.checkCommentFieldIsMandatory=function(){return!1},i.prototype.clearFields=function(){for(var t in this.customFieldsData)this.customFieldsData.hasOwnProperty(t)&&this.customFieldsData[t].fieldType==e.CustomFieldItem.DATE&&this.customFieldsData[t].dateSelector.destroy()},i.prototype.prefixNeeded=function(t){switch(t.type){case e.CustomFieldItem.FREE_TEXT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.INT:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.DATE:case e.CustomFieldItem.PRICE:case e.CustomFieldItem.VOLUME_LOTS:return!0;default:return!1}},i.prototype.prefixed=function(e,t){return this.prefixNeeded(e)?e.prefix+(t||""):t},i.prototype.unPrefix=function(e,t){var n=t;if(this.prefixNeeded(e)){var i=t.split("=");2==i.length&&(e.prefix=i[0]+"=",n=i[1]||"")}return n},i.prototype.isNumberField=function(t){switch(t){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:return!0;default:return!1}},i.prototype.applyTextValidators=function(e,t){var n=this;t.mandatory&&e.setValidator(function(e){return n.isNumberField(t.type)?null!=InfrontUtil.parseFloatValue(e):null!=e&&""!=e}),t.min&&e.setValidator(function(e){var n=InfrontUtil.parseFloatValue(e);return null!=n&&n>=t.min}),t.max&&e.setValidator(function(e){var n=InfrontUtil.parseFloatValue(e);return null!=n&&n<=t.max})},i.prototype.setPrice=function(e){},i.prototype.validateInput=function(){for(var t=!0,n=this.fields.items,i=0;i<n.length&&t;i++){var r=n[i].id;if(!n[i].isHidden)switch(n[i].type){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:t=t&&this.customFieldsData[r].inputBinding.isValid();break;case e.CustomFieldItem.DATE:var a=this.customFieldsData[r].dateSelector.getDate(),s=InfrontUtil.addDays(InfrontUtil.today(),n[i].min),o=InfrontUtil.addDays(InfrontUtil.today(),n[i].max);t=t&&s<=a&&(0==n[i].max||a<=o);break;case e.CustomFieldItem.TIME:case e.CustomFieldItem.DATETIME:break;case e.CustomFieldItem.DROPDOWN:var l=this.customFieldsData[r].inputBinding.getSelectedIndex();t=t&&null!=l&&0<=l;break;case e.CustomFieldItem.MULTI_LINE:case e.CustomFieldItem.FREE_TEXT:t=t&&this.customFieldsData[r].inputBinding.isValid();break;case e.CustomFieldItem.INIT_CODE:case e.CustomFieldItem.PARENT:case e.CustomFieldItem.DONE_CODE:case e.CustomFieldItem.BOOL:case e.CustomFieldItem.INSTRUMENT:case e.CustomFieldItem.VOLUME_LOTS:}}return t},i.prototype.initModify=function(e){for(var t=this,n=function(n){i.cache.asyncGet(function(e){t.applyFieldValue(n.id,e)},e,["custom_tags",n.id.toString().toLowerCase()])},i=this,r=0,a=this.fields.items;r<a.length;r++)n(a[r])},i.prototype.getDropdownIndexOfValue=function(e,t){for(var n=0;n<e.length;n++)if(e[n].value==t)return n;return-1},i.prototype.applyFieldValue=function(t,n){for(var i=n,r=this.fields.items,a=0;a<r.length;a++){var s=r[a].id;if(r[a].id==t)switch(i=this.unPrefix(r[a],n),r[a].type){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:this.customFieldsData[s].inputBinding.set(i);break;case e.CustomFieldItem.DATE:var o=InfrontUtil.parseTradingAlgoParamDateString(i);o&&this.customFieldsData[s].dateSelector.setDate(o);break;case e.CustomFieldItem.TIME:case e.CustomFieldItem.DATETIME:break;case e.CustomFieldItem.DROPDOWN:var l=this.getDropdownIndexOfValue(this.customFieldsData[s].items.data,i);0<=l&&this.customFieldsData[s].inputBinding.setSelected(l);break;case e.CustomFieldItem.MULTI_LINE:case e.CustomFieldItem.FREE_TEXT:this.customFieldsData[s].inputBinding.set(i);break;case e.CustomFieldItem.INIT_CODE:case e.CustomFieldItem.PARENT:case e.CustomFieldItem.DONE_CODE:case e.CustomFieldItem.BOOL:case e.CustomFieldItem.INSTRUMENT:case e.CustomFieldItem.VOLUME_LOTS:}}},i.prototype.applyOrderCustomFieldsItems=function(e){for(var t=0;t<e.length;t++){var n=e[t].id,i=e[t].value;this.applyFieldValue(n,i)}},i.prototype.modifyOrder=function(t){t.customFields=[];for(var n=this.fields.items,i=0;i<n.length;i++){var r=n[i].id;switch(n[i].type){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:var a=this.customFieldsData[r].inputBinding.get()||"";(a=InfrontUtil.formatTradingAlgoPriceString(a))&&t.customFields.push({id:r,value:this.prefixed(n[i],a)});break;case e.CustomFieldItem.DATE:var s=this.customFieldsData[r].dateSelector.getDate();s&&t.customFields.push({id:r,value:this.prefixed(n[i],InfrontUtil.getTradingAlgoParamDateString(s))});break;case e.CustomFieldItem.TIME:case e.CustomFieldItem.DATETIME:break;case e.CustomFieldItem.DROPDOWN:var o=this.customFieldsData[r].inputBinding.getSelectedIndex(),l=this.customFieldsData[r].items.item(o).value;l&&t.customFields.push({id:r,value:l});break;case e.CustomFieldItem.MULTI_LINE:case e.CustomFieldItem.FREE_TEXT:(a=this.customFieldsData[r].inputBinding.get())&&t.customFields.push({id:r,value:this.prefixed(n[i],a)});break;case e.CustomFieldItem.INIT_CODE:case e.CustomFieldItem.PARENT:case e.CustomFieldItem.DONE_CODE:case e.CustomFieldItem.BOOL:case e.CustomFieldItem.INSTRUMENT:case e.CustomFieldItem.VOLUME_LOTS:}}},i.prototype.populateOrder=function(t){t.customFields=[];for(var n=this.fields.items,i=0;i<n.length;i++){var r=n[i].id;switch(n[i].type){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:var a=this.customFieldsData[r].inputBinding.get()||"";(a=InfrontUtil.formatTradingAlgoPriceString(a))&&""!==a&&t.customFields.push({id:r,value:this.prefixed(n[i],a)});break;case e.CustomFieldItem.DATE:var s=this.customFieldsData[r].dateSelector.getDate();s&&t.customFields.push({id:r,value:this.prefixed(n[i],InfrontUtil.getTradingAlgoParamDateString(s))});break;case e.CustomFieldItem.TIME:case e.CustomFieldItem.DATETIME:break;case e.CustomFieldItem.DROPDOWN:var o=this.customFieldsData[r].inputBinding.getSelectedIndex(),l=this.customFieldsData[r].items.item(o).value;l&&t.customFields.push({id:r,value:l});break;case e.CustomFieldItem.MULTI_LINE:case e.CustomFieldItem.FREE_TEXT:(a=this.customFieldsData[r].inputBinding.get())&&""!==a&&t.customFields.push({id:r,value:this.prefixed(n[i],a)});break;case e.CustomFieldItem.INIT_CODE:case e.CustomFieldItem.PARENT:case e.CustomFieldItem.DONE_CODE:case e.CustomFieldItem.BOOL:case e.CustomFieldItem.INSTRUMENT:case e.CustomFieldItem.VOLUME_LOTS:}}},i.prototype.populateFromCurrentOrder=function(e){this.applyOrderCustomFieldsItems(e.customFields)},i.prototype.populateFromModifyOrder=function(e){this.applyOrderCustomFieldsItems(e.customFields)},i.prototype.setConfirmMode=function(t){this.confirmMode.set(t);for(var n=this.fields.items,i=0;i<n.length;i++){var r=n[i].id,a=n[i].modify;switch(n[i].type){case e.CustomFieldItem.INT:case e.CustomFieldItem.DOUBLE:case e.CustomFieldItem.STOP_PRICE:case e.CustomFieldItem.PRICE:this.customFieldsData[r].disabled.set(t||!a);break;case e.CustomFieldItem.DATE:this.customFieldsData[r].dateSelector.setEnabled(!t||!a);break;case e.CustomFieldItem.TIME:case e.CustomFieldItem.DATETIME:break;case e.CustomFieldItem.DROPDOWN:this.customFieldsData[r].disabled.set(t||!a);break;case e.CustomFieldItem.MULTI_LINE:case e.CustomFieldItem.FREE_TEXT:this.customFieldsData[r].disabled.set(t||!a);break;case e.CustomFieldItem.INIT_CODE:case e.CustomFieldItem.PARENT:case e.CustomFieldItem.DONE_CODE:case e.CustomFieldItem.BOOL:case e.CustomFieldItem.INSTRUMENT:case e.CustomFieldItem.VOLUME_LOTS:}}},i}(e.WidgetBase);e.OrderEntryCustomFieldsWidget=n}(Infront||(Infront={})),function(e){var t,n,i,r,a,s;(n=t=e.OrderState||(e.OrderState={}))[n.PENDING=0]="PENDING",n[n.FAILED=1]="FAILED",n[n.SUCCESS=2]="SUCCESS",(r=i=e.OrderEntryConfirmation||(e.OrderEntryConfirmation={}))[r.NONE=0]="NONE",r[r.SIMPLE=1]="SIMPLE",r[r.EXTERNAL=2]="EXTERNAL",(s=a=e.AdvancedOrderType||(e.AdvancedOrderType={}))[s.NORMAL=0]="NORMAL",s[s.STOP_LOSS=1]="STOP_LOSS",s[s.TRAILING_STOP=2]="TRAILING_STOP";e.OrderEntryConfirmScreenButton=function(){};var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initialPrice=null,t.confirmation=i.SIMPLE,t.confirmScreenButtons=null,t}return __extends(t,e),t}(e.TradingWidgetOptions);e.OrderEntryHorizWidgetOptions=o;var l,c,d,u,h,p,m=function(n){function r(t,i,s){var o=n.call(this,t,i,"orderEntry",s)||this;if(o.decimals=new e.Observable,o.decimals.set(e.UI.kDefaultDecimals),o.options.confirmScreenButtons){if(!InfrontUtil.isArray(o.options.confirmScreenButtons)){var l=o.options.confirmScreenButtons;o.options.confirmScreenButtons=[l]}}else o.options.confirmScreenButtons=[];return o.modifyMode=new e.Observable,o.options.modifyOrder?o.modifyMode.set(!0):o.modifyMode.set(!1),o.step=new e.Observable,o.step.set(1),o.confirmPrice=new e.Observable,o.confirmVolume=new e.Observable,o.confirmOrderType=new e.Observable,o.confirmOrderType.set(r.kNoOrderType),o.confirmValidity=new e.Observable,o.confirmOpenVolume=new e.Observable,o.confirmTriggerPrice=new e.Observable,o.confirmLimitPrice=new e.Observable,o.confirmTrailLimit=new e.Observable,o.confirmDeviation=new e.Observable,o.confirmTriggerLimit=new e.Observable,o.currency=new e.Observable,o.message=new e.Observable,o.advancedOrderType=new e.Observable,o.advancedOrderType.set(a.NORMAL),o.actualPrice=new e.Observable,o.actualVolume=new e.Observable,o.ticker=new e.Observable,o.filled=new e.Observable,o.avgPrice=new e.Observable,o.orderStatus=new e.Observable,o.orderState=new e.Observable,o.orderStateText=new e.Observable,o.errorMessage=new e.Observable,o.errorMessage.set(-1),o.portfolios=new e.ObservableArray,o.currentPortfolio=new e.Observable,o.orderTotal=new e.Observable,o.owned=new e.ObservableBinding,o.tradingPower=new e.ObservableBinding,o.currentPrice=-1,o.currentVolume=0,o.volumeBinding=new e.TextInputBinding,o.volumeBinding.setValidator(InfrontUtil.isIntegerString),o.volumeBinding.observe(function(e){return o.volumeInputChanged(e)}),o.priceBinding=new e.TextInputBinding,o.priceBinding.setValidator(InfrontUtil.isNumeric),o.priceBinding.observe(function(e){return o.priceInputChanged(e)}),o.disableBuySell=new e.Observable,o.disableBuySell.set(!0),o.targetManager=new InfrontUtil.LinkTargetManager,o.options.instrument&&o.options.instrument.feed&&o.options.instrument.ticker&&o.instrumentSelected(new e.Instrument(o.options.instrument.feed,o.options.instrument.ticker)),o.isInitialized=!1,"number"==typeof o.options.initialPrice&&o.priceBinding.set(o.options.initialPrice.toString()),o}return __extends(r,n),r.prototype.returnDefaultWidgetOptions=function(){return new o},r.prototype.onTradingConnected=function(){this.isInitialized||this.init(),this.validateInput()},r.prototype.onTradingDisconnected=function(){this.validateInput()},r.prototype.onTradingReconnecting=function(){this.validateInput()},r.prototype.onTradingReconnected=function(){this.validateInput()},r.prototype.init=function(){this.isInitialized=!0,this.currentInstrument&&this.instrumentSelected(this.currentInstrument)},r.prototype.initModify=function(){var t,n,i=this,r=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.get().name,this.options.modifyOrder);this.searchBox.setEnabled(!1),this.advancedOptions&&this.advancedOptions.tabBar.setEnabled(!1);var a=new InfrontUtil.MultiCallbackHandler(function(){i.currentInstrument=new e.Instrument(t,n),i.cache.asyncGet(function(t){i.currentInstrument[e.MWSConstants.full_name]=t},e.CacheKeyFactory.createInstrumentKey(i.currentInstrument),[e.MWSConstants.instrument,e.MWSConstants.full_name]),i.searchBox.setText(n,!1)});this.cache.asyncGet(a.addCallback(function(e){t=e}),r,[e.MWSConstants.instrument,e.MWSConstants.feed]),this.cache.asyncGet(a.addCallback(function(e){n=e}),r,[e.MWSConstants.instrument,e.MWSConstants.ticker]),this.cache.asyncGet(function(e){i.volumeBinding.set(InfrontUtil.formatNumber(e,0),!0)},r,e.MWSConstants.volume),this.cache.asyncGet(function(e){var t=new Date(e);i.dateSelector.setDate(t)},r,e.MWSConstants.valid_until),this.cache.asyncGet(function(t){(i.modifyOrderType=t)!=e.OrderType.STRATEGY&&i.cache.asyncGet(function(e){i.priceBinding.set(e.toString(),!0)},r,e.MWSConstants.price)},r,e.MWSConstants.order_type),this.loadAdvanceModifyValues(r)},r.prototype.loadAdvanceModifyValues=function(t){var n=this;this.advancedOptions&&(this.cache.asyncGet(function(e){n.advancedOptions.ovInput.set(e.toString(),!0)},t,e.MWSConstants.open_volume),this.cache.asyncGet(function(i){i==e.OrderType.STRATEGY?n.cache.asyncGet(function(i){(n.modifyAlgoId=i)==f.kStopLossAlgoId?(n.advancedOptions.setSelectedTab(f.kStopLossTab),n.cache.asyncGet(function(i){i==f.kTriggerCondLteVal?n.advancedOptions.slCondition.setSelected(0):n.advancedOptions.slCondition.setSelected(1),n.cache.asyncGet(function(e){n.advancedOptions.slTriggerPrice.set(e.toString(),!0)},t,[e.MWSConstants.algo_params,f.kTriggerPriceId.toLowerCase()]),n.cache.asyncGet(function(e){n.advancedOptions.slLimitPrice.set(e.toString(),!0)},t,[e.MWSConstants.algo_params,f.kLimitPriceId.toLowerCase()])},t,[e.MWSConstants.algo_params,f.kTriggerConditionId.toLowerCase()])):i==f.kTrailingStopLossPctAlgoId?(n.advancedOptions.setSelectedTab(f.kTrailingStopLossTab),n.advancedOptions.tsTriggerLimit.setSelected(0),n.cache.asyncGet(function(e){n.advancedOptions.tsTrailLimit.set(e.toString(),!0)},t,[e.MWSConstants.algo_params,f.kTrailLimitId.toLowerCase()]),n.cache.asyncGet(function(e){n.advancedOptions.tsDeviation.set(e.toString(),!0)},t,[e.MWSConstants.algo_params,f.kDeviationPctId.toLowerCase()])):i==f.kTrailingStopLossTicksAlgoId&&(n.advancedOptions.setSelectedTab(f.kTrailingStopLossTab),n.advancedOptions.tsTriggerLimit.setSelected(1),n.cache.asyncGet(function(e){n.advancedOptions.tsTrailLimit.set(e.toString(),!0)},t,[e.MWSConstants.algo_params,f.kTrailLimitId.toLowerCase()]),n.cache.asyncGet(function(e){n.advancedOptions.tsDeviation.set(e.toString(),!0)},t,[e.MWSConstants.algo_params,f.kDeviationTicksId.toLowerCase()]))},t,e.MWSConstants.algo_id):(n.cache.asyncGet(function(e){n.advancedOptions.ovInput.set(e.toString())},t,[e.MWSConstants.open_volume]),e.OrderType.FILL_AND_KILL)},t,e.MWSConstants.order_type))},r.prototype.updateOwned=function(){if(this.ownedUnbinding&&this.ownedUnbinding(),this.owned.set(0),this.currentInstrument&&this.currentPortfolio.get()){var t=e.CacheKeyFactory.createPotentialPositionKey(this.currentPortfolio.get().name,this.currentInstrument);this.ownedUnbinding=this.cache.customBind(t,e.MWSConstants.volume,this.owned)}},r.prototype.updateTotal=function(){if(this.advancedOptions&&this.advancedOptions.getSelectedTab()==f.kTrailingStopLossTab)this.orderTotal.set("-");else if(this.advancedOptions&&this.advancedOptions.getSelectedTab()==f.kStopLossTab){var e=InfrontUtil.parseFloatValue(this.advancedOptions.slLimitPrice.get());this.orderTotal.set(e*this.currentVolume)}else-1<this.currentPrice&&0<this.currentVolume?this.orderTotal.set(this.currentPrice*this.currentVolume):this.orderTotal.set(0)},r.prototype.validateInput=function(){var e=null!=this.currentInstrument&&(!this.priceBinding.isEnabled()||this.priceBinding.isValid())&&this.volumeBinding.isValid()&&this.isTradingConnected();this.disableBuySell.set(!e)},r.prototype.snapshot=function(t){InfrontUtil.mergeRecursive(this.currentInstrument,t[e.MWSConstants.instrument]),-1==this.currentPrice&&"string"==typeof this.options.initialPrice&&t.hasOwnProperty(this.options.initialPrice.toLowerCase())&&this.priceBinding.set(t[this.options.initialPrice.toLowerCase()].toString())},r.prototype.loadStrategies=function(){var t=this;if(this.strategies=[],this.currentInstrument){var n=new e.GetAlgosOptions;n.feed=this.currentInstrument.feed,n.onError=InfrontUtil.errorLogCallback,n.onData=function(n){for(var i=n,r=0;r<i.length;r++)t.strategies.push(e.Strategy.parseFromResultObject(i[r]))},this.infront.trGetAlgos(n)}},r.prototype.newBuildUI=function(){var t=this,r=e.WidgetDOMFactory.create_WOrderEntryHoriz_DOM(this.element,this.decimals,this.modifyMode,this.step,this.currentPortfolio,this.tradingPower,this.owned,this.orderTotal,this.message,this.confirmPrice,this.confirmVolume,this.confirmOrderType,this.confirmValidity,this.advancedOrderType,this.confirmOpenVolume,this.confirmTriggerPrice,this.confirmLimitPrice,this.confirmTrailLimit,this.confirmDeviation,this.confirmTriggerLimit,this.currency,this.ticker,this.options.confirmation==i.SIMPLE,this.actualPrice,this.actualVolume,this.filled,this.avgPrice,this.orderStatus,this.orderState,this.orderStateText,this.errorMessage,this.disableBuySell,this.options.confirmScreenButtons,this.priceBinding,this.volumeBinding,function(n){return t.buttonClicked(e.BuyOrSell.Buy)},function(n){return t.buttonClicked(e.BuyOrSell.Sell)},function(e){return t.confirmClicked()},function(e){return t.cancelClicked()},function(e){return t.reset()},function(e){return t.cancelOrder()},function(e){return t.modifyClicked()},function(e){return t.reset()},this.infrontUI.languageHandler),a=r.dateSelector,s=r.searchBox;this.dateSelector=new e.DateSelector(a,this.infrontUI.languageHandler);var o=new e.SearchBoxOptions;o.fields=["ticker","full_name","currency"],o.searchThreshold=1,o.autoselectAfterTab=this.options.autoselectAfterTab,this.options.enabledFeeds&&(o.feeds=this.options.enabledFeeds),o.showAfterSelect=function(e){return e.ticker},o.searchTickersOnly=this.options.searchTickersOnly,o.instrumentSelected=function(e){return t.instrumentSelected(e)},this.currentInstrument&&(o.preselectedInstruments=this.currentInstrument),o.filter=function(e){return t.filterResultItem(e)},this.searchBox=new e.SearchBox(s,this.infront,o),n.prototype.newBuildUI.call(this)},r.prototype.filterResultItem=function(t){var n=!0;return t.hasOwnProperty(e.MWSConstants.instrument)&&-1!=r.defaultTradeableInstrumentTypes.indexOf(t[e.MWSConstants.instrument][e.MWSConstants.instrument_type])||(n=n&&!1),n},r.prototype.instrumentSelected=function(t){var n=this;if(this.currentInstrument=t,this.currentInstrument&&this.currentInstrument.ticker){this.ticker.set(this.currentInstrument.ticker);var i=new e.DataOptions,r=this.cache.getSnapshotOnDataCallback();i.onData=function(e){r(e),n.snapshot(e)},i.onError=InfrontUtil.errorLogCallback,this.infront.instrumentInfo(this.currentInstrument.feed,this.currentInstrument.ticker,i)}this.isInitialized&&(this.updateOwned(),this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,this.currentInstrument),this.infront.snapshot(this.currentInstrument,["BID","ASK"],!1,function(e){n.snapshot(e)}),this.loadStrategies()),this.currentInstrument&&this.currentInstrument.feed&&this.infront.getFeedHandler().getFeed(this.currentInstrument.feed,function(t){n.decimals.set(t.hasOwnProperty("decimals")?t.decimals:e.UI.kDefaultDecimals)}),this.validateInput()},r.prototype.advancedTabSelected=function(e){this.priceBinding.setEnabled(e==f.kOpenVolumeTab),this.updateTotal(),this.validateInput()},r.prototype.createAlgoParams=function(e,t,n){var i=null;return this.advancedOptions&&(i=[],e==f.kStopLossTab&&null!=t.triggerPrice&&null!=t.limitPrice?(i.push({id:f.kTriggerValidityId,value:n}),i.push({id:f.kTriggerConditionId,value:t.stopLossCondition==d.LOWER_EQUAL?f.kTriggerCondLteVal:f.kTriggerCondGteVal}),i.push({id:f.kTriggerPriceId,value:t.triggerPrice}),i.push({id:f.kLimitPriceId,value:t.limitPrice})):e==f.kTrailingStopLossTab&&t.triggerLimit==h.PERCENT?((i=[]).push({id:f.kTriggerValidityId,value:n}),i.push({id:f.kTrailLimitId,value:t.trailLimit}),i.push({id:f.kDeviationPctId,value:t.deviation})):e==f.kTrailingStopLossTab&&t.triggerLimit==h.TICKS&&((i=[]).push({id:f.kTriggerValidityId,value:n}),i.push({id:f.kTrailLimitId,value:t.trailLimit}),i.push({id:f.kDeviationTicksId,value:t.deviation}))),i},r.prototype.modifyClicked=function(){var t=this,n=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.get().name,this.options.modifyOrder);this.cache.asyncGet(function(n){var i=t.infrontUI.languageHandler.get("messages","insertOrderWarning");i=(i=(i=i.replace("$ACTION",t.infrontUI.languageHandler.get("orderEntry",n==e.MWSBuyOrSell.BUY?"buyAction":"sellAction"))).replace("$INSTRUMENT",t.currentInstrument[e.MWSConstants.full_name])).replace("$FEED",t.currentInstrument.feed_code),t.message.set(i)},n,e.MWSConstants.buy_or_sell),this.modifyOrderType==e.OrderType.FILL_AND_KILL?this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","fillAndKill")):this.modifyOrderType==e.OrderType.FILL_OR_KILL?this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","fillOrKill")):this.modifyOrderType==e.OrderType.STRATEGY&&this.modifyAlgoId==f.kStopLossAlgoId?this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","stopLoss")):this.modifyOrderType!=e.OrderType.STRATEGY||this.modifyAlgoId!=f.kTrailingStopLossPctAlgoId&&this.modifyAlgoId!=f.kTrailingStopLossTicksAlgoId?this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","normal")):this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","trailingStopLoss")),this.confirmPrice.set(InfrontUtil.parseFloatValue(this.priceBinding.get())),this.confirmVolume.set(parseInt(this.volumeBinding.get())),this.modifyOptions=new e.ModifyOrderOptions,this.modifyOptions.volume=parseInt(this.volumeBinding.get()),this.modifyOptions.validUntil=this.dateSelector.getDate();var r=this.advancedOptions.getOptions();switch(this.modifyOrderType==e.OrderType.STRATEGY?this.modifyOptions.algoParams=this.createAlgoParams(this.advancedOptions.getSelectedTab(),r,InfrontUtil.getTradingAlgoParamDateString(this.dateSelector.getDate())):(this.modifyOptions.price=InfrontUtil.parseFloatValue(this.priceBinding.get()),this.modifyOptions.openVolume=r.openVolume),this.modifyOptions.onData=function(e){t.showOrderFeedback(t.options.modifyOrder)},this.modifyOptions.onError=function(e,n){return t.showInsertOrderError(n)},this.options.confirmation){case i.NONE:this.confirmClicked();break;case i.SIMPLE:this.step.set(2);break;case i.EXTERNAL:this.step.set(2),this.options.confirmationCallback(this.currentOrder)}},r.prototype.buttonClicked=function(t){var n=this;this.currentValidity=null,this.confirmVolume.set(parseInt(this.volumeBinding.get()));var s=[this.infrontUI.languageHandler.get("orderEntry",t==e.BuyOrSell.Buy?"buyAction":"sellAction"),InfrontUtil.formatNumber(this.confirmVolume.get(),0),this.currentInstrument.ticker].join(" ");this.confirmOrderType.set(r.kNoOrderType),this.advancedOrderType.set(a.NORMAL),this.confirmVolume.set(parseInt(this.volumeBinding.get())),this.confirmValidity.set(InfrontUtil.getPlainDatestring(this.dateSelector.getDate())),this.cache.asyncGet(function(e){n.currency.set(e)},e.CacheKeyFactory.createInstrumentKey(this.currentInstrument),[e.MWSConstants.instrument,e.MWSConstants.currency]);var o,c=new e.InsertOrderOptions;if(c.instrument=this.currentInstrument,c.portfolio=this.currentPortfolio.get().name,c.buyOrSell=t,this.advancedOptions){var u=InfrontUtil.getTradingAlgoParamDateString(this.dateSelector.getDate());o=this.advancedOptions.getOptions();var p=this.advancedOptions.getSelectedTab();p==f.kOpenVolumeTab?(o.orderMethod==l.FILL_AND_KILL?(c.orderType=e.OrderType.FILL_AND_KILL,this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","fillAndKill"))):o.orderMethod==l.FILL_OR_KILL?(c.orderType=e.OrderType.FILL_OR_KILL,this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","fillOrKill"))):c.orderType=e.OrderType.NORMAL,null!=o.openVolume?(c.openVolume=o.openVolume,this.confirmOpenVolume.set(o.openVolume)):this.confirmOpenVolume.set(null),c.price=InfrontUtil.parseFloatValue(this.priceBinding.get())):p==f.kStopLossTab&&null!=o.triggerPrice&&null!=o.limitPrice?(this.advancedOrderType.set(a.STOP_LOSS),c.orderType=e.OrderType.STRATEGY,this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","stopLoss")),c.algoId="InfrontCondor_StopLmt",c.algoParams=[],c.algoParams.push({id:f.kTriggerValidityId,value:u}),c.algoParams.push({id:f.kTriggerConditionId,value:o.stopLossCondition==d.LOWER_EQUAL?f.kTriggerCondLteVal:f.kTriggerCondGteVal}),c.algoParams.push({id:f.kTriggerPriceId,value:o.triggerPrice.toString()}),c.algoParams.push({id:f.kLimitPriceId,value:o.limitPrice.toString()}),this.confirmTriggerPrice.set(o.triggerPrice),this.confirmLimitPrice.set(o.limitPrice)):p==f.kTrailingStopLossTab&&o.triggerLimit==h.PERCENT?(this.confirmTriggerLimit.set(h.PERCENT),this.advancedOrderType.set(a.TRAILING_STOP),this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","trailingStopLoss")),c.orderType=e.OrderType.STRATEGY,c.algoId=f.kTrailingStopLossPctAlgoId,c.algoParams=[],c.algoParams.push({id:f.kTriggerValidityId,value:u}),c.algoParams.push({id:f.kTrailLimitId,value:o.trailLimit.toString()}),c.algoParams.push({id:f.kDeviationPctId,value:o.deviation.toString()}),this.confirmTrailLimit.set(o.trailLimit),this.confirmDeviation.set(o.deviation)):p==f.kTrailingStopLossTab&&o.triggerLimit==h.TICKS?(this.confirmTriggerLimit.set(h.TICKS),this.advancedOrderType.set(a.TRAILING_STOP),this.confirmOrderType.set(this.infrontUI.languageHandler.get("orderEntry","trailingStopLoss")),c.orderType=e.OrderType.STRATEGY,c.algoId=f.kTrailingStopLossTicksAlgoId,c.algoParams=[],c.algoParams.push({id:f.kTriggerValidityId,value:u}),c.algoParams.push({id:f.kTrailLimitId,value:o.trailLimit.toString()}),c.algoParams.push({id:f.kDeviationTicksId,value:o.deviation.toString()}),this.confirmTrailLimit.set(o.trailLimit),this.confirmDeviation.set(o.deviation)):(c.orderType=e.OrderType.NORMAL,c.price=InfrontUtil.parseFloatValue(this.priceBinding.get()),this.confirmOpenVolume.set(null))}else c.orderType=e.OrderType.NORMAL,c.price=InfrontUtil.parseFloatValue(this.priceBinding.get()),this.confirmOpenVolume.set(null);switch(this.confirmPrice.set("-"),c.orderType==e.OrderType.STRATEGY&&c.algoId==f.kStopLossAlgoId?s=[s," (",this.infrontUI.languageHandler.get(f.kLanguageKey,"stopLoss")," - ",this.infrontUI.languageHandler.get(f.kLanguageKey,o.stopLossCondition==d.LOWER_EQUAL?"lowerEqual":"greaterEqual"),")"].join(""):c.orderType==e.OrderType.STRATEGY&&c.algoId==f.kTrailingStopLossPctAlgoId?s=[s," (",this.infrontUI.languageHandler.get(f.kLanguageKey,"trailingStopLoss")," - ",this.infrontUI.languageHandler.get(f.kLanguageKey,"percent"),")"].join(""):c.orderType==e.OrderType.STRATEGY&&c.algoId==f.kTrailingStopLossTicksAlgoId?s=[s," (",this.infrontUI.languageHandler.get(f.kLanguageKey,"trailingStopLoss")," - ",this.infrontUI.languageHandler.get(f.kLanguageKey,"ticks"),")"].join(""):(this.confirmPrice.set(InfrontUtil.parseFloatValue(this.priceBinding.get())),s=[s,"@",InfrontUtil.formatNumber(this.confirmPrice.get(),this.decimals.get())].join(" "),c.orderType!=e.OrderType.FILL_OR_KILL&&c.orderType!=e.OrderType.FILL_AND_KILL||(s=[s," (",this.infrontUI.languageHandler.get(f.kLanguageKey,c.orderType==e.OrderType.FILL_AND_KILL?"fillAndKill":"fillOrKill"),")"].join(""))),this.message.set(s),c.volume=parseFloat(this.volumeBinding.get()),c.validUntil=this.dateSelector.getDate(),c.onError=function(e,t){return n.showInsertOrderError(t)},c.onData=function(t){n.showOrderFeedback(t[e.MWSConstants.order_id])},this.currentOrder=c,this.options.confirmation){case i.NONE:this.confirmClicked();break;case i.SIMPLE:this.step.set(2);break;case i.EXTERNAL:this.step.set(2),this.options.confirmationCallback(this.currentOrder)}},r.prototype.confirmOrder=function(){this.options.confirmation==i.EXTERNAL&&this.confirmClicked()},r.prototype.cancelOrder=function(){this.options.confirmation==i.EXTERNAL&&this.cancelClicked()},r.prototype.confirmClicked=function(){this.modifyMode.get()&&this.modifyOptions?(this.infront.trModifyOrder(this.currentPortfolio.get().name,this.options.modifyOrder,this.modifyOptions),this.modifyOptions=null,this.step.set(3)):this.currentOrder?(this.infront.trInsertOrder(this.currentOrder),this.currentValidity=this.currentOrder.validUntil,this.currentOrder=null,this.step.set(3)):this.step.set(1)},r.prototype.cancelClicked=function(){this.step.set(1)},r.prototype.showInsertOrderError=function(e){this.errorMessage.set(e),this.orderState.set(t.FAILED),this.orderStateText.set(this.infrontUI.languageHandler.get("orderEntry","orderFailed")),this.actualVolume.set(this.confirmVolume.get()),this.actualPrice.set(this.confirmPrice.get())},r.prototype.showOrderFeedback=function(n){var i=this;this.orderStatusUnbind&&this.orderStatusUnbind(),this.orderState.set(t.PENDING),this.errorMessage.set(-1);var a=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.get().name,n),s=[];s.push(this.cache.customBind(a,"price",e.BindingFactory.createInlineBinding(function(e){i.actualPrice.set(e)}))),s.push(this.cache.customBind(a,"volume",e.BindingFactory.createInlineBinding(function(e){i.actualVolume.set(e)}))),s.push(this.cache.customBind(a,"volume_filled",e.BindingFactory.createInlineBinding(function(e){i.filled.set(e)}))),s.push(this.cache.customBind(a,"avg_price",e.BindingFactory.createInlineBinding(function(e){i.avgPrice.set(e)}))),s.push(this.cache.customBind(a,"order_status",e.BindingFactory.createInlineBinding(function(e){i.orderStatus.set(InfrontUtil.formatEnumString(e)),-1!=r.successStatuses.indexOf(e)?(i.orderState.set(t.SUCCESS),i.orderStateText.set(i.infrontUI.languageHandler.get("orderEntryHoriz","orderSuccessful"))):-1!=r.rejectedStuses.indexOf(e)?(i.orderState.set(t.FAILED),i.orderStateText.set(i.infrontUI.languageHandler.get("orderEntryHoriz","orderFailed"))):(i.orderState.set(t.PENDING),i.orderStateText.set(i.infrontUI.languageHandler.get("orderEntryHoriz","orderPending")))})));var o=!1,l=!1;s.push(this.cache.customBind(a,"error_message",e.BindingFactory.createInlineBinding(function(e){InfrontUtil.isString(e)?(l=!0,i.errorMessage.set(e)):0==o&&i.errorMessage.set(-1)}))),s.push(this.cache.customBind(a,e.MWSConstants.valid_until,e.BindingFactory.createInlineBinding(function(e){if(!l){var t=i.currentValidity,n=new Date(e);t.getDate()==n.getDate()&&t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()||(o=!0,i.errorMessage.set(i.infrontUI.languageHandler.get("messages","dateMoved").replace("$DATE$",InfrontUtil.formatDate(n))))}}))),this.orderStatusUnbind=function(){for(var e=0;e<s.length;e++)s[e]()}},r.prototype.reset=function(){this.step.set(1),this.owned.set(0),this.modifyMode.set(!1),this.searchBox.clear(),this.searchBox.setEnabled(!0),this.currentInstrument=null,this.volumeBinding.set(""),this.priceBinding.set(""),this.dateSelector.reset(),this.orderStatusUnbind&&(this.orderStatusUnbind(),this.orderStatusUnbind=null),this.orderState.set(t.PENDING),this.errorMessage.set(-1),this.advancedOptions&&this.advancedOptions.reset(),this.updateOwned()},r.prototype.volumeInputChanged=function(e){this.currentVolume=parseInt(e),this.updateTotal(),this.validateInput()},r.prototype.priceInputChanged=function(e){this.currentPrice=InfrontUtil.parseFloatValue(e),this.updateTotal(),this.validateInput()},r.prototype.availablePortfoliosChanged=function(e){this.portfolios.replaceWith(e)},r.prototype.currentPortfolioChanged=function(t){var n=this;if(!0===this.modifyMode.get()&&null!=t&&null==this.currentPortfolio.get()){var i=e.CacheKeyFactory.createOrderIdKey(t.name,this.options.modifyOrder);this.cache.asyncGet(function(e){n.initModify()},i,"order_id")}this.currentPortfolio.set(t),this.tpUnbinding&&this.tpUnbinding(),t&&(this.tpUnbinding=this.cache.customBind(e.CacheKeyFactory.createPortfolioDataKey(t),e.MWSConstants.trading_power,this.tradingPower)),this.updateOwned()},r.prototype.accepts=function(){return[InterLibraryLink.DataType.price]},r.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.price&&"number"==typeof e.value&&this.priceBinding.set(e.value.toString())},r.prototype.link=function(e){this.targetManager.addTarget(e),this.currentInstrument&&e.receiveMessage({type:InterLibraryLink.DataType.infrontInstrument,value:this.currentInstrument})},r.prototype.unlink=function(e){this.targetManager.removeTarget(e)},r.prototype.modify=function(e){this.reset(),e.instrument&&(this.instrumentSelected(e.instrument),this.searchBox.setText(e.instrument.ticker,!1)),InfrontUtil.isNumber(e.initialPrice)&&this.priceBinding.set(e.initialPrice.toString())},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.ownedUnbinding&&this.ownedUnbinding(),this.tpUnbinding&&this.tpUnbinding(),this.dateSelector.destroy(),e.WidgetDOMFactory.unbindAll(this.element),InfrontUtil.removeAllChildNodes(this.element)},r.prototype.createAdvancedOptionsWidget=function(t){var n=this,i=e.UI.parseElementArgument(t);return this.advancedOptions=null,i&&(this.advancedOptions=new f(i,this.infrontUI,function(e){return n.advancedTabSelected(e)}),this.advancedOptions.slLimitPrice.observe(function(e){n.updateTotal()})),this.advancedOptions},r.pendingStatuses=[e.OrderStatus.ORDER_REQUEST],r.successStatuses=[e.OrderStatus.EXCHANGE_ORDER,e.OrderStatus.EXECUTED_ORDER,e.OrderStatus.MONITOR_ORDER],r.rejectedStuses=[e.OrderStatus.REJECTED_ORDER,e.OrderStatus.DELETED_ORDER,e.OrderStatus.DELETE_REQUEST],r.defaultTradeableInstrumentTypes=[InfrontConstants.InstrumentType.STOCK,InfrontConstants.InstrumentType.BOND,InfrontConstants.InstrumentType.FUND],r.kNoOrderType="-",r}(e.TradingWidgetBase);e.OrderEntryHorizWidget=m,(c=l=e.AdvancedOEOrderType||(e.AdvancedOEOrderType={}))[c.FILL_ANY=0]="FILL_ANY",c[c.FILL_AND_KILL=1]="FILL_AND_KILL",c[c.FILL_OR_KILL=2]="FILL_OR_KILL",(u=d=e.AdvancedOEStopLossCondition||(e.AdvancedOEStopLossCondition={}))[u.LOWER_EQUAL=0]="LOWER_EQUAL",u[u.GREATER_EQUAL=1]="GREATER_EQUAL",(p=h=e.AdvancedOETriggerLimit||(e.AdvancedOETriggerLimit={}))[p.PERCENT=0]="PERCENT",p[p.TICKS=1]="TICKS";var g=function(){};e.AdvancedOEValues=g;var f=function(t){function n(n,i,r){void 0===r&&(r=null);var a=t.call(this,n,i,"advancedoeoptionswidget",{})||this;return a.element=n,a.onTabSelect=r,a.selectedTab=new e.Observable,a.selectedTab.set(0),a.ovInput=new e.TextInputBinding,a.ovType=new e.RadioInputBinding(function(e){}),a.slCondition=new e.SelectInputBinding,a.slTriggerPrice=new e.TextInputBinding,a.slLimitPrice=new e.TextInputBinding,a.tsTriggerLimitSelectedIndex=new e.Observable,a.tsTriggerLimitSelectedIndex.set(0),a.tsTriggerLimit=new e.SelectInputBinding,a.tsTriggerLimit.observe(function(e){a.tsTriggerLimitSelectedIndex.set(e)}),a.tsTrailLimit=new e.TextInputBinding,a.tsDeviation=new e.TextInputBinding,a.buildUI(),a}return __extends(n,t),n.prototype.returnDefaultWidgetOptions=function(){return new e.WidgetOptions},n.prototype.reset=function(){this.tabBar.setEnabled(!0),this.tabBar.setSelectedId(n.kOpenVolumeTab),this.ovType.setSelectedValue("order-method__fill-any"),this.ovInput.set(""),this.slCondition.setSelected(0),this.slLimitPrice.set(""),this.slTriggerPrice.set(""),this.tsTriggerLimit.setSelected(0),this.tsTrailLimit.set(""),this.tsDeviation.set("")},n.prototype.getSelectedTab=function(){return this.selectedTab.get()},n.prototype.setSelectedTab=function(e){this.tabBar.setSelectedId(e)},n.prototype.getOptions=function(){var e=new g;return e.openVolume=InfrontUtil.isNumeric(this.ovInput.get())?InfrontUtil.parseFloatValue(this.ovInput.get()):null,e.orderMethod=n.orderMethodMap[this.ovType.getValue()],e.stopLossCondition=0==this.slCondition.getSelectedIndex()?d.LOWER_EQUAL:d.GREATER_EQUAL,e.triggerPrice=InfrontUtil.isNumeric(this.slTriggerPrice.get())?InfrontUtil.parseFloatValue(this.slTriggerPrice.get()):null,e.limitPrice=InfrontUtil.isNumeric(this.slLimitPrice.get())?InfrontUtil.parseFloatValue(this.slLimitPrice.get()):null,0==this.tsTriggerLimit.getSelectedIndex()?(e.triggerLimit=h.PERCENT,e.trailLimit=InfrontUtil.isNumeric(this.tsTrailLimit.get())?InfrontUtil.parseFloatValue(this.tsTrailLimit.get()):null,e.deviation=InfrontUtil.isNumeric(this.tsDeviation.get())?InfrontUtil.parseFloatValue(this.tsDeviation.get()):null):(e.triggerLimit=h.TICKS,e.trailLimit=InfrontUtil.isNumeric(this.tsTrailLimit.get())?parseInt(this.tsTrailLimit.get()):null,e.deviation=InfrontUtil.isNumeric(this.tsDeviation.get())?parseInt(this.tsDeviation.get()):null),e},n.prototype.buildUI=function(){var t=this,i=e.WidgetDOMFactory.create_WOEAdvancedOptions_DOM(this.element,this.selectedTab,this.ovInput,this.ovType,this.slCondition,this.slTriggerPrice,this.slLimitPrice,this.tsTriggerLimit,this.tsTrailLimit,this.tsDeviation,this.tsTriggerLimitSelectedIndex,this.infrontUI.languageHandler),r=this.infrontUI.languageHandler,a=new e.TabbedContainerOptions;a.tabs=[],a.tabs.push(new e.TabOptions(n.kOpenVolumeTab,r.get(n.kLanguageModule,n.kOpenVolumeTab),!0)),a.tabs.push(new e.TabOptions(n.kStopLossTab,r.get(n.kLanguageModule,n.kStopLossTab))),a.tabs.push(new e.TabOptions(n.kTrailingStopLossTab,r.get(n.kLanguageModule,n.kTrailingStopLossTab))),a.onSelect=function(e){t.selectedTab.set(e),t.onTabSelect&&t.onTabSelect(e)},this.tabBar=new e.TabbedContainer(i,a)},n.prototype.modify=function(e){},n.prototype.destroy=function(){this.onTabSelect=null,this.tabBar.destroy(),e.WidgetDOMFactory.unbindAll(this.element),InfrontUtil.removeAllChildNodes(this.element)},n.kLanguageKey="orderEntryAdvanced",n.kStopLossAlgo="InfrontCondor_Stop",n.kStopLossAlgoId="InfrontCondor_StopLmt",n.kTriggerConditionId="TriggerCond",n.kTriggerCondGteVal="gte",n.kTriggerCondLteVal="lte",n.kTriggerPriceId="TriggerPx",n.kLimitPriceId="OrderLimitPx",n.kTrailingStopLossTicksAlgoId="InfrontCondor_TrailTick",n.kTrailingStopLossPctAlgoId="InfrontCondor_TrailPct",n.kTriggerValidityId="TriggerValid",n.kTrailLimitId="TrailLimit",n.kDeviationPctId="PctFromLast",n.kDeviationTicksId="TicksFromLast",n.kLanguageModule="orderEntryAdvanced",n.kOpenVolumeTab="openVolume",n.kStopLossTab="stopLoss",n.kTrailingStopLossTab="trailingStopLoss",n.orderMethodMap={"order-method__fill-any":l.FILL_ANY,"order-method__fill-and-kill":l.FILL_AND_KILL,"order-method__fill-or-kill":l.FILL_OR_KILL},n}(e.WidgetBase);e.AdvancedOEOptionsWidget=f}(Infront||(Infront={})),function(e){var t,n,i,r,a=e.Instrument;e.KidDefinition=function(){},(n=t=e.OrderEntryState||(e.OrderEntryState={}))[n.DATA_ENTRY=0]="DATA_ENTRY",n[n.CONFIRM=1]="CONFIRM",n[n.MODIFY=2]="MODIFY",n[n.SUCCESS=3]="SUCCESS",n[n.ERROR=4]="ERROR",(r=i=e.OrderAction||(e.OrderAction={}))[r.INSERT=0]="INSERT",r[r.MODIFY=1]="MODIFY",r[r.DELETE=2]="DELETE";var s=function(){function e(){}return e.prototype.populateToOrder=function(e){var t=this.validitySelector.getSelectedIndex();0==t?e.validUntil=InfrontUtil.today():t==this.dateSelectorIndex?e.validUntil=this.dateSelector.getDate():t>=this.validSessionItemIndex?this.validSessionItem&&(e.validUntil=-1,e.customFields.push({id:this.validSessionItem.id,value:this.validityItems.item(t).value})):t==this.timeSelectorIndex&&(e.validUntil=this.timeSelector.getFormattedTime());var n=this.commentObs.get();n&&(e.comment=n)},e.prototype.populateOrder=function(e){this.populateToOrder(e)},e.prototype.modifyOrder=function(e){this.populateToOrder(e)},e.prototype.populateFromOrder=function(e){if(-1!=e.validUntil)1==new Date(e.validUntil).getDate()?this.validitySelector.setSelected(0):-1!=this.dateSelectorIndex?(this.validitySelector.setSelected(this.dateSelectorIndex),this.dateSelector.setDate(e.validUntil)):-1!=this.timeSelectorIndex&&(this.validitySelector.setSelected(this.timeSelectorIndex),this.timeSelector.setTimeB(e.validUntil));else if(this.validSessionItem)for(var t=0;t<e.customFields.length;t++)if(e.customFields[t].id==this.validSessionItem.id){for(var n=e.customFields[t].value,i=0;i<this.validityItems.length();i++)if(this.validityItems.item(i).hasOwnProperty("value")&&this.validityItems.item(i).value==n){this.validitySelector.setSelected(i);break}break}e.comment&&this.commentObs.set(e.comment)},e.prototype.populateFromCurrentOrder=function(e){this.populateFromOrder(e)},e.prototype.populateFromModifyOrder=function(e){this.populateFromOrder(e)},e}();e.LimitOrderData=s;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.compactMode=!1,t.autoSelectAfterTab=!1,t.searchTickersOnly=!1,t.algoId="",t.modifyOrderId=0,t.modifyPortfolio="",t.confirmation=!0,t.closeOnComplete=!1,t.keepInstrumentOnNew=!0,t.kidLinkDefinition=null,t.customKidMidUrlParameter=null,t.enableTickButtons=!1,t}return __extends(t,e),t.prototype.hasInstrument=function(){return InfrontUtil.isObject(this.instrument)&&InfrontUtil.isNumber(this.instrument.feed)&&InfrontUtil.isString(this.instrument.ticker)},t}(e.TradingWidgetOptions);e.OrderEntryWidgetOptions=o;var l=function(n){function r(o,l,c){var d=n.call(this,o,l,"orderEntry",c)||this;if(d.compactMode=!1,d.selectedOrderTypeIx=0,d.isSendingRequest=!1,d.hasPrice=!1,d.hasOpenVol=!1,d.forceOrderTypeUpdate=!1,d.isOrderActive=!1,d.hasParentOrder=!1,d.orderTypesWithoutPrice=e.OrderType.QUOTE_ORDER+e.OrderType.MARKET+e.OrderType.AT_MARKET+e.OrderType.BEST_POSSIBLE+e.OrderType.AT_MARKET_AND_KILL+e.OrderType.MARKET_TO_LIMIT+e.OrderType.STOP_LOSS+e.OrderType.BEST_TO_LIMIT+e.OrderType.STRATEGY+e.OrderType.MARKET_FOK+e.OrderType.MARKET_FAK,d.options.autoSelectAfterTab=!1,d.compactMode=c.compactMode,d.tradingManager=d.infront.getTradingManager(),d.decimals=new e.Observable,d.decimals.set(e.UI.kDefaultDecimals),d.subscribes.addFields([e.QuoteFields.CONTRACT_SIZE,e.QuoteFields.TICK_SIZE_ID]),d.volumeBinding=new e.TextInputBinding,d.volumeBinding.setValidator(function(e){return InfrontUtil.isIntegerString(e)&&0<InfrontUtil.parseFloatValue(e)}),d.volumeBinding.observe(function(e){return d.volumeInputChanged(e)}),d.volumeBinding.setNumeric(!0),d.volumeBinding.setScrolling(!0,function(e){return d.scrollVolume(e)}),d.volumeBinding.observeSpecialKeys([e.TextInputBinding.kKeycodeUpArrow,e.TextInputBinding.kKeycodeDownArrow],function(e){return d.increaseVolume(e)}),d.priceBinding=new e.TextInputBinding,d.priceBinding.setValidator(function(e){var t=InfrontUtil.parseFloatValue(e);return d.isAlgoOrderType()||!d.hasPrice||InfrontUtil.isNumeric(e)&&d.conformsToTickSizeRules(t)&&0<t}),d.priceBinding.observe(function(e){return d.priceInputChanged(e)}),d.priceBinding.setNumeric(!0),d.priceBinding.setScrolling(!0,function(e){return d.scrollPrice(e)}),d.priceBinding.observeSpecialKeys([e.TextInputBinding.kKeycodeUpArrow,e.TextInputBinding.kKeycodeDownArrow],function(e){return d.increasePrice(e)}),d.orderTotal=new e.Observable,d.owned=new e.ObservableBinding,d.tradingPower=new e.ObservableBinding,d.disableBuySell=new e.Observable,d.disableBuySell.set(!0),d.orderState=new e.Observable,d.orderState.set(t.DATA_ENTRY),d.disableInput=new e.ObservableBinding(function(e){var n=e==t.CONFIRM||e==t.SUCCESS;return d.limitOrderData&&d.limitOrderData.validitySelector&&d.limitOrderData.validitySelector.setDisabled(n||d.limitOrderData.validityItems.length()<=1),n}),d.orderState.observe(d.disableInput),d.disableOrderTypeSelector=new e.Observable,d.disableOrderTypeSelector.set(!1),d.advancedValid=new e.Observable(!0),d.advancedMode=new e.Observable,d.advancedMode.set(!1),d.currentIceBerg=new e.Observable,d.currentIceBerg.set(0),d.tickSizeValid=new e.Observable,d.tickSizeValid.set(1),d.orderTypes=new e.ObservableArray,d.algoTypes=new e.ObservableArray,d.portfolios=new e.ObservableArray,d.currentPortfolio=new e.Observable,d.ticker=new e.Observable,d.instrumentCurrency=new e.Observable,d.baseCurrency=new e.Observable,d.limitOrderData=new s,d.orderAction=i.INSERT,d.currentPrice=-1,d.currentVolume=0,d.currentOpenVolume=0,d.initSteps=0,d.kidUrl=new e.Observable,d.kidTitle=new e.Observable,d.kidUrl.set(""),d.isInitialized=!1,d.targetManager=new InfrontUtil.LinkTargetManager,d.options.hasInstrument())d.instrumentSelected(new a(d.options.instrument.feed,d.options.instrument.ticker));else{var u=a.jsonToInstrument(d.getStoredValue(r.kOEStoredInstrument));u&&d.instrumentSelected(u,!1)}d.caption=new e.Observable,d.caption.set(d.widgetTitle+d.getTGWStr()),d.advancedCaption=new e.Observable,d.advancedCaption.set(d.infrontUI.languageHandler.get(d.languageKey,"showAdvanced")),d.openVolumeValid=new e.Observable,d.openVolumeValid.set(!0),d.warningOpenVolume=new e.Observable,d.warningOpenVolume.set(d.infrontUI.languageHandler.get(d.languageKey,"openVolumeWarning")+d.currentIceBerg.get().toString());var h=e.BindingFactory.createInlineBinding(function(e){d.warningOpenVolume.set(d.infrontUI.languageHandler.get(d.languageKey,"openVolumeWarning")+d.currentIceBerg.get().toString())});return d.currentIceBerg.observe(h),d.statusMessage=new e.Observable,d.statusMessage.set(""),d.errorMessage=new e.Observable,d.errorMessage.set(""),d.tickSizes=[],d.orderTypeObserver=new e.SelectInputBinding,d.algoTypeObserver=new e.SelectInputBinding,d.portfolioObserver=new e.SelectInputBinding(!1),d}return __extends(r,n),r.prototype.returnDefaultWidgetOptions=function(){return new o},r.prototype.onTradingConnected=function(){this.isInitialized||this.init(),this.validateInput()},r.prototype.onTradingDisconnected=function(){this.validateInput()},r.prototype.onTradingReconnecting=function(){this.validateInput()},r.prototype.onTradingReconnected=function(){this.validateInput()},r.prototype.setFocus=function(){this.currentInstrument?this.volumeBinding&&this.volumeBinding.requestFocus():this.searchBox&&this.searchBox.focus()},r.prototype.newBuildUI=function(){var t=this;this.compactMode&&this.element.classList.add("cell-w-order-entry--compact");var i=e.WidgetDOMFactory.create_WOrderEntry_DOM(this.element,this.caption,this.compactMode,this.kidUrl,this.kidTitle,this.advancedCaption,this.statusMessage,this.errorMessage,this.decimals,this.ticker,this.volumeBinding,this.priceBinding,this.orderTypes,this.orderTypeObserver,this.orderTotal,this.owned,this.tradingPower,this.advancedValid,this.disableBuySell,this.orderState,this.disableInput,this.advancedMode,this.tickSizeValid,this.instrumentCurrency,this.baseCurrency,function(e){return t.buyClicked()},function(e){return t.sellClicked()},function(e){return t.confirmClicked()},function(e){return t.cancelClicked()},function(e){return t.modifyClicked()},function(e){return t.deleteClicked()},function(e){return t.newClicked()},function(e){return t.closeClicked()},function(e){return t.toggleAdvancedMode(e)},function(e){return t.inputFieldSelected()},this.options.enableTickButtons,function(e){return t.setPriceByTick(e)},function(e){return t.increaseVolume(e)},this.infrontUI.languageHandler);this.algoElement=i.algoWidgetElement,this.customFieldsElement=i.customFieldsWidgetElement,this.commentFieldElement=i.commentFieldElement,this.portfolioElement=i.portfolioElement,this.orderTypesElement=i.orderTypesElement,this.algoTypesElement=i.algoTypesElement,this.attachSearchBoxToElement(i.searchBoxElement),this.advancedPanelElement=i.advancedPanelElement,this.options.advancedOptionsCreated&&this.options.advancedOptionsCreated(this.advancedPanelElement),this.orderTypeObserver.observe(function(e){if(t.selectedOrderTypeIx!=e||t.forceOrderTypeUpdate){t.selectedOrderTypeIx=e;var n=t.isAlgoOrderType();t.orderTypes.length(),t.algoTypesElement.parentElement.parentElement.hidden=!n,n?t.destroyCustomFieldWidget():t.destroyAlgoFieldWidget(),t.updateUIForSelectedOrderType(e)}}),this.algoTypeObserver.observe(function(e){(t.algoIndex!=e||t.forceOrderTypeUpdate)&&(t.algoIndex=e,t.updateUIForSelectedOrderType(t.selectedOrderTypeIx))}),n.prototype.newBuildUI.call(this)},r.prototype.newDestroyUI=function(){this.destroyLimitOrderWidget(),this.ownedUnbinding&&this.ownedUnbinding(),this.tpUnbinding&&this.tpUnbinding(),this.orderStatusUnbind&&this.orderStatusUnbind(),n.prototype.newDestroyUI.call(this)},r.prototype.init=function(){if(this.isInitialized=!0,this.getTradableFeeds(),this.currentInstrument?this.instrumentSelected(this.currentInstrument):(this.orderTypes.clear(),this.algoTypes.clear()),this.createOrderTypeSelector(),this.createAlgoTypeSelector(),InfrontUtil.isNumber(this.options.initialPrice))if(this.options.initialPrice){var e=InfrontUtil.formatNumber(this.options.initialPrice,this.decimals.get());this.priceBinding.set(e)}else this.priceBinding.set(this.options.initialPrice.toString())},r.prototype.initModify=function(){var t=this;this.isInitialized=!0;var n,i,s=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.get().name,this.options.modifyOrderId);this.cache.asyncGet(function(e){t.buyOrSell=e,t.caption.set(t.getBuyOrSellStr()+t.infrontUI.languageHandler.get(t.languageKey,"modifyOrder")+t.getTGWStr())},s,e.MWSConstants.buy_or_sell),this.disableOrderTypeSelector.set(!0),this.portfolioObserver.setDisabled(!0);var o=new InfrontUtil.MultiCallbackHandler(function(){t.currentInstrument=new a(n,i),t.algoId=t.cache.get(s,[e.MWSConstants.algo_id]),t.cache.asyncGet(function(n){t.currentInstrument[e.MWSConstants.full_name]=n},e.CacheKeyFactory.createInstrumentKey(t.currentInstrument),[e.MWSConstants.instrument,e.MWSConstants.full_name]),t.instrumentSelected(t.currentInstrument),t.setSearchBoxInstrument(t.currentInstrument),t.searchBox.setEnabled(!1)});this.cache.createComputedField(s,r.kComputedVolume,[new e.FieldReference(s,e.MWSConstants.volume),new e.FieldReference(s,e.MWSConstants.volume_filled)],function(e){var n=e[0],i=e[1];return i&&n&&t.hasTradingFeature(IDS.ServerProperties.ModifyRemainingVolume)?n-i:n}),this.cache.asyncGet(o.addCallback(function(e){n=e}),s,[e.MWSConstants.instrument,e.MWSConstants.feed]),this.cache.asyncGet(o.addCallback(function(e){i=e}),s,[e.MWSConstants.instrument,e.MWSConstants.ticker]),this.cache.asyncGet(function(e){t.volumeBinding.set(e.toFixed(0),!0)},s,r.kComputedVolume)},r.prototype.initModifyOrderTypeSettings=function(){var t=this,n=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.get().name,this.options.modifyOrderId);this.cache.asyncGet(function(i){if(i==e.OrderType.STRATEGY)t.setOrderType(i),t.cache.asyncGet(function(e){t.algoId=e},n,e.MWSConstants.algo_id),t.algoWidget&&t.algoWidget.initModify(n);else{if(t.algoId=null,t.orderTypesMapping)for(var r=0;r<t.orderTypesMapping.length;r++)if(i==t.orderTypesMapping[r]){t.selectedOrderTypeIx=r,t.forceOrderTypeUpdate=!0,t.orderTypeObserver.setSelected(t.selectedOrderTypeIx),t.forceOrderTypeUpdate=!1;break}t.orderSupportsPrice(),t.initModifyLimitOrder(n),t.hasPrice?t.cache.asyncGet(function(e){t.priceBinding.set(InfrontUtil.formatNumber(e,t.decimals.get()),!0)},n,e.MWSConstants.price):t.priceBinding.set(""),t.customFieldsWidget&&t.customFieldsWidget.initModify(n)}},n,e.MWSConstants.order_type),this.disableOrderTypeSelector.set(!0)},r.prototype.initModifyLimitOrder=function(t){var n=this;this.cache.asyncGet(function(i){var r=!1;if(n.limitOrderData.validSessionItem){var a=n.cache.get(t,[e.MWSConstants.custom_tags,n.limitOrderData.validSessionItem.id.toString().toLowerCase()]);if(null!=a){for(var s=0;s<n.limitOrderData.validityItems.length();s++)if(n.limitOrderData.validityItems.item(s).hasOwnProperty("value")&&n.limitOrderData.validityItems.item(s).value==a){n.limitOrderData.validitySelector.setSelected(s);break}}else r=!0}else r=!0;if(r&&n.limitOrderData.dateSelector){var o=new Date(i);o.toDateString()!=InfrontUtil.today().toDateString()?(n.limitOrderData.dateSelector.setDate(o),null!=n.limitOrderData.dateSelectorIndex&&0<n.limitOrderData.dateSelectorIndex&&n.limitOrderData.validitySelector.setSelected(n.limitOrderData.dateSelectorIndex)):n.limitOrderData.validitySelector.setSelected(0)}},t,e.MWSConstants.valid_until),this.cache.asyncGet(function(e){n.hasPrice?n.priceBinding.set(InfrontUtil.formatNumber(e,n.decimals.get()),!0):n.priceBinding.set("")},t,e.MWSConstants.price),this.cache.asyncGet(function(t){(n.modifyOrderStatus=t)!=e.OrderStatus.INACTIVE_ORDER&&t!=e.OrderStatus.OFFLINE_ORDER||n.setActiveStatus(!1)},t,e.MWSConstants.order_status),this.cache.asyncGet(function(e){e&&(n.hasParentOrder=!0)},t,"parent_order_id"),this.cache.asyncGet(function(e){InfrontUtil.isNumber(e)&&0<e&&n.limitOrderData.openVolObs.set(e.toString(),!0)},t,e.MWSConstants.open_volume),this.cache.asyncGet(function(e){e&&n.limitOrderData.commentObs.set(e,!0)},t,e.MWSConstants.comment),this.hasTradingFeature3(IDS.ServerProperties3.NoOpenVolumeModify)&&this.limitOrderData.openVolObs&&this.limitOrderData.openVolObs.setEnabled(!1),this.hasTradingFeature2(IDS.ServerProperties2.NoValidityModify)&&(this.limitOrderData.validitySelector&&this.limitOrderData.validitySelector.setDisabled(!0),this.limitOrderData.dateSelector&&this.limitOrderData.dateSelector.setEnabled(!1))},r.prototype.getAlgos=function(){var t=this;if(this.currentInstrument){this.algoTypes.clear();var n=new e.GetAlgosOptions;n.feed=this.currentInstrument.feed,n.algoId=this.algoId,n.onData=function(n){var i=n[e.MWSConstants.algos];i?t.algoTypes.replaceWith(i):t.algoTypes.clear();for(var r=0,a=0,s=0;s<t.algoTypes.length();s++){var o=t.algoTypes.data[s];if(t.algoId&&o.hasOwnProperty("id")&&o.id==t.algoId){r=t.orderTypes.length()-1,a=s;break}}t.algoIndex=a,t.forceOrderTypeUpdate=!0,t.orderTypeObserver.setSelected(r),t.forceOrderTypeUpdate=!1,t.isModifyMode()&&t.algoTypeObserver.setSelected(a),t.populateOrderTypes(),t.initWhenReady()},n.onError=function(e,t){InfrontUtil.errorLogCallback(e,t)},this.infront.trGetAlgos(n)}},r.prototype.getCustomFields=function(){var t=this;if(this.currentInstrument){this.customFields=[];var n=new e.GetCustomFieldsOptions;n.feed=this.currentInstrument.feed,n.onData=function(n){t.customFields=n[e.MWSConstants.custom_fields],t.updateUIForSelectedOrderType(t.selectedOrderTypeIx),t.initWhenReady()},n.onError=function(e,t){InfrontUtil.errorLogCallback(e,t)},this.infront.trGetCustomFields(n)}},r.prototype.getTradableFeeds=function(){this.tradableFeeds=this.infront.getTradableFeeds(),this.tradableFeeds?this.store(r.kOEStoredTradableFeeds,this.tradableFeeds):this.tradableFeeds=this.getStoredValue(r.kOEStoredTradableFeeds),this.searchBoxOptions.feeds=this.tradableFeeds,this.searchBox.modify(this.searchBoxOptions)},r.prototype.scrollPrice=function(e){if(this.hasPrice){var t=this.getInstrumentTickSize(),n=this.decimals.get();if(e.preventDefault(),Math.floor(t)!=t&&(n=t.toString().split(".")[1].length),e.deltaY<0){var i=this.currentPrice+t,r=InfrontUtil.formatNumber(i,n);this.priceBinding.set(r)}else 0<e.deltaY&&null!=this.currentPrice&&0!=this.currentPrice&&(i=this.currentPrice-t,r=InfrontUtil.formatNumber(i,n),this.priceBinding.set(r))}},r.prototype.scrollOpenVolume=function(e){InfrontUtil.isNumber(this.currentOpenVolume)||this.limitOrderData.openVolObs.set("0"),e.deltaY<0?this.limitOrderData.openVolObs.set((this.currentOpenVolume+1).toString()):0<e.deltaY&&0!=this.currentOpenVolume&&this.limitOrderData.openVolObs.set((this.currentOpenVolume-1).toString())},r.prototype.scrollVolume=function(e){InfrontUtil.isNumber(this.currentVolume)||this.volumeBinding.set("0"),e.preventDefault(),e.deltaY<0?this.volumeBinding.set((this.currentVolume+1).toString()):0<e.deltaY&&0!=this.currentVolume&&this.volumeBinding.set((this.currentVolume-1).toString())},r.prototype.setPriceByTick=function(t){var n=this.getInstrumentTickSize(),i=this.decimals.get();if(Math.floor(n)!=n&&(i=n.toString().split(".")[1].length),t==e.TextInputBinding.kKeycodeDownArrow&&0!=this.currentPrice){var r=this.currentPrice-n,a=InfrontUtil.formatNumber(r,i);this.priceBinding.set(a)}else t==e.TextInputBinding.kKeycodeUpArrow&&(r=this.currentPrice+n,a=InfrontUtil.formatNumber(r,i),this.priceBinding.set(a))},r.prototype.increasePrice=function(e){this.hasPrice&&this.setPriceByTick(e)},r.prototype.increaseVolume=function(t){InfrontUtil.isNumber(this.currentVolume)||this.volumeBinding.set("0"),t==e.TextInputBinding.kKeycodeDownArrow&&0!=this.currentVolume?this.volumeBinding.set((this.currentVolume-1).toString()):t==e.TextInputBinding.kKeycodeUpArrow&&this.volumeBinding.set((this.currentVolume+1).toString())},r.prototype.increaseOpenVolume=function(t){InfrontUtil.isNumber(this.currentOpenVolume)||this.limitOrderData.openVolObs.set("0"),t==e.TextInputBinding.kKeycodeDownArrow&&0!=this.currentOpenVolume?this.limitOrderData.openVolObs.set((this.currentOpenVolume-1).toString()):t==e.TextInputBinding.kKeycodeUpArrow&&this.limitOrderData.openVolObs.set((this.currentOpenVolume+1).toString())},r.prototype.getInstrumentTickSize=function(){for(var e=1,t=0,n=this.tickSizes;t<n.length;t++){var i=n[t];if(this.currentPrice>=i.lower_bound&&this.currentPrice<=i.upper_bound){e=i.size;break}}return e},r.prototype.getTickSizes=function(t){var n=this;if(this.tickSizes=[],this.currentInstrument){var i=new e.TickSizesOptions;i.id=t,i.ticker=this.currentInstrument.ticker,i.isin=this.currentInstrument.isin,i.onError=function(e,t){InfrontUtil.errorLogCallback(e,"getTickSizes: "+t)},i.onData=function(e){n.tickSizes=e,n.validateInput()},this.infront.tickSizes(this.currentInstrument.feed,i)}},r.prototype.findMarket=function(e,t){for(var n=0;n<t.length;n++){var i=t[n].feeds;if(i&&0<i.length&&0<=i.indexOf(e))return t[n]}return{order_types:[]}},r.prototype.insertDefaultOrderTypes=function(){this.supportedOrderTypes=["NORMAL","FILL_AND_KILL","FILL_OR_KILL","FILL_OR_NOTHING"],this.supportedMaxValidDays=7},r.prototype.receiveOrderTypes=function(e){if(this.orderTypesMapping=[],e&&e.hasOwnProperty("markets")){var t=e.markets,n=void 0;t&&0<t.length&&(this.currentInstrument&&(n=this.findMarket(this.currentInstrument.feed,t))&&n.hasOwnProperty("order_types")&&0!=n.order_types.length?(this.supportedOrderTypes=n.order_types,this.supportedMaxValidDays=n.max_valid_days):this.insertDefaultOrderTypes())}this.populateOrderTypes()},r.prototype.populateOrderTypes=function(){var t=[];this.orderTypesMapping=[];for(var n=0,i=this.supportedOrderTypes;n<i.length;n++){var r=i[n],a=this.infrontUI.languageHandler.get(this.languageKey,r);this.orderTypesMapping.push(r),t.push({label:a})}0<this.algoTypes.length()&&(this.orderTypesMapping.push(e.OrderType.STRATEGY),t.push({label:this.infrontUI.languageHandler.get(this.languageKey,"strategyType")})),this.orderTypes.replaceWith(t)},r.prototype.insertStandardOrderTypes=function(){var t=this,n=new e.DataOptions;n.onData=function(e){t.receiveOrderTypes(e),t.initWhenReady()},n.onError=function(e,t){IDS.log("OrderEntryWidget: ",t)},this.infront.trOrderTypes(n)},r.prototype.isAlgoOrderType=function(){return(this.orderTypesMapping?this.orderTypesMapping[this.selectedOrderTypeIx]:null)===e.OrderType.STRATEGY},r.prototype.getAlgoType=function(){return this.isAlgoOrderType()?this.algoIndex:-1},r.prototype.hasTradingFeature=function(e,t){var n=this.infront.trHasServerProp(e,t);return IDS.DEBUG_TRADING_FEATURES&&IDS.log("OrderEntryWidget: ","hasTradingFeature:",IDS.ServerPropToStr(e),n),n},r.prototype.hasTradingFeature2=function(e,t){var n=this.infront.trHasServerProp2(e,t);return IDS.DEBUG_TRADING_FEATURES&&IDS.log("OrderEntryWidget: ","hasTradingFeature2:",IDS.ServerProp2ToStr(e),n),n},r.prototype.hasTradingFeature3=function(e,t){var n=this.infront.trHasServerProp3(e,t);return IDS.DEBUG_TRADING_FEATURES&&IDS.log("OrderEntryWidget: ","hasTradingFeature3:",IDS.ServerProp3ToStr(e),n),n},r.prototype.createCustomFieldWidget=function(){var t=this;this.destroyCustomFieldWidget();var n=new e.OrderEntryCustomFieldsWidgetOptions;n.customFields.items=this.customFields,n.orderType=this.orderTypesMapping[this.selectedOrderTypeIx],n.fieldChangeCallback=function(){return t.customFieldChanged()},n.fieldClickedCallback=function(){return t.inputFieldSelected()},this.customFieldsWidget=new e.OrderEntryCustomFieldsWidget(this.customFieldsElement,this.infrontUI,n),this.customFieldsWidget.hasMandatory()&&(this.compactMode||this.advancedMode.get()||this.setAdvancedMode(!0)),this.validateInput()},r.prototype.destroyCustomFieldWidget=function(){null!=this.customFieldsWidget&&(this.customFieldsWidget.destroy(),this.customFieldsWidget=null),e.WidgetDOMFactory.unbindAll(this.customFieldsElement),InfrontUtil.removeAllChildNodes(this.customFieldsElement)},r.prototype.customFieldChanged=function(){this.limitOrderData.commentObs.validate(),this.validateInput()},r.prototype.createAlgoFieldWidget=function(){var t=this;if(this.destroyAlgoFieldWidget(),this.priceBinding.set(""),this.priceBinding.setEnabled(!1),this.algoTypes&&0<this.algoTypes.length()){var n=new e.OrderEntryAlgoWidgetOptions;n.strategy=this.algoTypes.item(this.getAlgoType()),this.algoIndex&&-1<this.algoIndex&&(n.strategy=this.algoTypes.item(this.algoIndex),this.algoTypeObserver.setSelected(this.algoIndex,!1)),n.fieldChangeCallback=function(){return t.algoFieldChanged()},n.fieldClickedCallback=function(){return t.inputFieldSelected()},this.algoWidget=new e.OrderEntryAlgoWidget(this.algoElement,this.infrontUI,n)}},r.prototype.destroyAlgoFieldWidget=function(){null!=this.algoWidget&&(this.algoWidget.destroy(),this.algoWidget=null),e.WidgetDOMFactory.unbindAll(this.algoElement),InfrontUtil.removeAllChildNodes(this.algoElement)},r.prototype.algoFieldChanged=function(){this.validateInput()},r.prototype.orderSupportsPrice=function(){return this.hasPrice=!1,0<=this.selectedOrderTypeIx&&this.orderTypesMapping&&this.orderTypesMapping.length>this.selectedOrderTypeIx&&(this.hasPrice=this.orderTypesWithoutPrice.indexOf(this.orderTypesMapping[this.selectedOrderTypeIx])<0),this.hasPrice},r.prototype.orderSupportsOpenVol=function(){return this.hasOpenVol=!1,0<=this.selectedOrderTypeIx&&this.orderTypesMapping&&this.orderTypesMapping.length>this.selectedOrderTypeIx&&(this.hasOpenVol=this.orderTypesMapping[this.selectedOrderTypeIx]===e.OrderType.ICEBERG||this.supportedOrderTypes.indexOf(e.OrderType.ICEBERG)<0),this.hasOpenVol},r.prototype.orderSupportsGoodTillDate=function(){return null!=this.supportedMaxValidDays&&1<this.supportedMaxValidDays},r.prototype.orderSupportsGoodTillTime=function(){return!1},r.prototype.updateUIForSelectedOrderType=function(e){-1<e&&(this.selectedOrderTypeIx=e,this.isAlgoOrderType()?this.createAlgoFieldWidget():(this.orderSupportsPrice(),this.priceBinding.setEnabled(this.hasPrice),this.hasPrice||this.priceBinding.set(""),this.orderSupportsOpenVol(),this.createLimitOrderWidget(),this.createCustomFieldWidget(),this.createCommentFieldWidget()),this.validateInput())},r.prototype.updateUIForSelectedPortfolio=function(e){var t=this.portfolios.data[e];this.tradingManager.setCurrentPortfolio(t),this.options.portfolioChangedCallback&&this.options.portfolioChangedCallback(t)},r.prototype.updateValidity=function(){if(this.limitOrderData&&this.limitOrderData.validityItems){if(this.limitOrderData.validityItems.clear(),this.limitOrderData.validSessionItemIndex=0,this.limitOrderData.dateSelectorIndex=-1,this.limitOrderData.timeSelectorIndex=-1,this.customFields)for(var t=0,n=this.customFields;t<n.length;t++){var i=n[t];if(i&&i.type==e.CustomFieldItem.VALID_SESSION){this.limitOrderData.validSessionItem=i,this.limitOrderData.validityItems.replaceWith(i.dropdown_items);break}}this.limitOrderData.validityItems.insert({label:this.infrontUI.languageHandler.get(this.languageKey,"today")},0),this.limitOrderData.validSessionItemIndex++,this.orderSupportsGoodTillDate()&&(this.orderSupportsGoodTillTime()?this.limitOrderData.validityItems.insert({label:this.infrontUI.languageHandler.get(this.languageKey,"gtd")},1):this.limitOrderData.validityItems.insert({label:this.infrontUI.languageHandler.get(this.languageKey,"selectDate")},1),this.limitOrderData.dateSelectorIndex=1,this.limitOrderData.validSessionItemIndex++),this.orderSupportsGoodTillTime()&&(this.limitOrderData.timeSelectorIndex=-1==this.limitOrderData.dateSelectorIndex?1:2,this.limitOrderData.validityItems.insert({label:this.infrontUI.languageHandler.get(this.languageKey,"gtt")},this.limitOrderData.timeSelectorIndex),this.limitOrderData.validSessionItemIndex++),this.isModifyMode()||(this.limitOrderData.validitySelector.setDisabled(this.limitOrderData.validityItems.length()<=1),this.limitOrderData.validitySelector.setSelected(0))}},r.prototype.createOrderTypeSelector=function(){if(e.WidgetDOMFactory.unbindAll(this.orderTypesElement),InfrontUtil.removeAllChildNodes(this.orderTypesElement),1==this.orderTypes.get().length){var t=document.createElement("div");t.setAttribute("class","cell-w-order-entry__single-value"),t.innerHTML=this.orderTypes.get()[0].label,this.orderTypesElement.appendChild(t),this.updateUIForSelectedOrderType(this.selectedOrderTypeIx)}else this.orderTypesElement.appendChild(e.WidgetDOMFactory.create_WOrderEntry_Select_DOM(this.orderTypes,"label",this.orderTypeObserver,this.orderState,this.disableOrderTypeSelector,!1))},r.prototype.createAlgoTypeSelector=function(){e.WidgetDOMFactory.unbindAll(this.algoTypesElement),InfrontUtil.removeAllChildNodes(this.algoTypesElement),this.algoTypesElement.appendChild(e.WidgetDOMFactory.create_WOrderEntry_Select_DOM(this.algoTypes,"label",this.algoTypeObserver,this.orderState,this.disableOrderTypeSelector,!1)),this.algoTypesElement.parentElement.parentElement.hidden=!0},r.prototype.createLimitOrderWidget=function(){var t=this;this.destroyLimitOrderWidget();var n=new e.TextInputBinding;n.setNumeric(!0),n.setValidator(function(e){return""==e||null!=InfrontUtil.parseFloatValue(e)&&(InfrontUtil.parseFloatValue(e)>=t.currentIceBerg.get()&&InfrontUtil.isIntegerString(e)||0==InfrontUtil.parseFloatValue(e))}),n.set(""),n.setScrolling(!0,function(e){return t.scrollOpenVolume(e)}),n.observeSpecialKeys([e.TextInputBinding.kKeycodeUpArrow,e.TextInputBinding.kKeycodeDownArrow],function(e){return t.increaseOpenVolume(e)}),n.observe(function(e){return t.OpenVolumeChanged(e)}),n.setEnabled(this.hasOpenVol);var i=new e.CheckBoxInputBinding(function(e){});i.setValue(!0);var r=new e.Observable(this.ActiveCheckBoxVisible()),a=new e.Observable(this.ActivateButtonVisible()),s=new e.Observable(""),o=new e.ObservableArray;o.push({label:this.infrontUI.languageHandler.get(this.languageKey,"today")});var l=new e.SelectInputBinding,c=new e.Observable(!1),d=new e.Observable(!1),u=e.WidgetDOMFactory.create_WOrderEntry_LimitOrder_DOM(this.isModifyMode(),o,l,c,d,n,i,r,a,s,this.orderState,this.disableInput,this.openVolumeValid,this.warningOpenVolume,function(e){return t.inputFieldSelected()},function(e){return t.activeToggled()},this.infrontUI.languageHandler);this.limitOrderElement=u.root;var h=new e.DateSelector(u.dateSelector,this.infrontUI.languageHandler,function(e){t.inputFieldSelected()});h.setMinDate(InfrontUtil.today());var p=new e.TimeSelector(u.timeSelector,this.infrontUI.languageHandler,function(e){t.inputFieldSelected()});this.limitOrderData.openVolObs=n,this.limitOrderData.validitySelector=l,this.limitOrderData.validityItems=o,this.limitOrderData.dateVisible=c,this.limitOrderData.timeVisible=d,this.limitOrderData.validitySelector.observe(function(e){t.limitOrderData.dateVisible.set(null!=t.limitOrderData.dateSelectorIndex&&0<t.limitOrderData.dateSelectorIndex&&e==t.limitOrderData.dateSelectorIndex),t.limitOrderData.timeVisible.set(null!=t.limitOrderData.timeSelectorIndex&&0<t.limitOrderData.timeSelectorIndex&&e==t.limitOrderData.timeSelectorIndex),t.isModifyMode()||t.limitOrderData.validitySelector.setDisabled(t.limitOrderData.validityItems.length()<=1)}),this.limitOrderData.dateSelector=h,this.limitOrderData.timeSelector=p,this.limitOrderData.activeObs=i,this.limitOrderData.activeVisible=a,this.limitOrderData.activeBtnTitle=s,this.setActiveStatus(!0),this.algoElement.appendChild(u.root);var m=this.currentPortfolio.get();m&&(this.limitOrderData.statusUnbind=this.cache.customBind(e.CacheKeyFactory.createOrderIdKey(m.name,this.options.modifyOrderId),e.MWSConstants.order_status,e.BindingFactory.createInlineBinding(function(n){t.setActiveStatus(n!=e.OrderStatus.INACTIVE_ORDER&&n!=e.OrderStatus.DELETED_ORDER),n==e.OrderStatus.DELETED_ORDER&&t.deleteOrderCallback(null)}))),this.updateValidity()},r.prototype.hideCommentField=function(){var t=this.hasTradingFeature(IDS.ServerProperties.NoCommentField,this.currentInstrument.feed),n=!0,i=this.customFields;if(i)for(var r=0;r<i.length;r++){var a=i[r];switch(a.type){case e.CustomFieldItem.DROPDOWN:for(var s=0;s<a.dropdown_items.length;s++)"CARE"==a.dropdown_items[s].label.toUpperCase()&&(n=!1)}}return this.getOrderType()==e.OrderType.STRATEGY&&(n=!0),t||n},r.prototype.commentFieldIsMandatory=function(){var t=!this.hasTradingFeature(IDS.ServerProperties.NoCommentField,this.currentInstrument.feed),n=this.getOrderType()!==e.OrderType.STRATEGY;return t&&n&&this.customFieldsWidget&&this.customFieldsWidget.checkCommentFieldIsMandatory()},r.prototype.createCommentFieldWidget=function(){var t=this,n=new e.TextInputBinding;n.set(""),n.setValidator(function(e){return""!=e||!t.commentFieldIsMandatory()}),n.observe(function(e){return t.validateInput()});var i=e.WidgetDOMFactory.create_WOrderEntry_Comment_DOM(n,this.disableInput,function(e){return t.inputFieldSelected()},this.infrontUI.languageHandler);this.limitOrderData.commentObs=n,this.commentFieldElement.appendChild(i).hidden=this.hideCommentField()},r.prototype.destroyLimitOrderWidget=function(){this.limitOrderData.statusUnbind&&this.limitOrderData.statusUnbind(),this.limitOrderElement&&(e.WidgetDOMFactory.unbindAll(this.limitOrderElement),InfrontUtil.removeAllChildNodes(this.limitOrderElement),InfrontUtil.removeAllChildNodes(this.commentFieldElement))},r.prototype.ActiveCheckBoxVisible=function(){var e=!this.infront.trHasUserProp(IDS.UserProperties.InactiveOnly);return!this.isModifyMode()&&e},r.prototype.ActivateButtonVisible=function(){var t=this.hasTradingFeature(IDS.ServerProperties.ModifyOrder,this.currentInstrument.feed)&&-1<[e.OrderStatus.INACTIVE_ORDER,e.OrderStatus.EXCHANGE_ORDER,e.OrderStatus.INTERNAL_ORDER].indexOf(this.modifyOrderStatus),n=!this.infront.trHasUserProp(IDS.UserProperties.InactiveOnly),i=!this.hasTradingFeature(IDS.ServerProperties.DisableActivate,this.currentInstrument.feed);return this.isModifyMode()&&t&&n&&i},r.prototype.activeToggled=function(){var t,n=this;!this.isModifyMode()||this.hasTradingFeature(IDS.ServerProperties.DisableActivate,this.currentInstrument.feed)||this.hasParentOrder||(this.isOrderActive?((t=new e.ActivateOrderOptions).portfolio=this.tradingManager.getCurrentPortfolio().name,t.order_id=this.options.modifyOrderId,t.onError=function(e,t){return n.displayErrorMessage("Deactivate order failed",t)},t.onData=function(){},this.infront.deactivateOrder(t)):((t=new e.ActivateOrderOptions).portfolio=this.tradingManager.getCurrentPortfolio().name,t.order_id=this.options.modifyOrderId,t.onError=function(e,t){return n.displayErrorMessage("Activate order failed",t)},t.onData=function(){},this.infront.activateOrder(t)))},r.prototype.setActiveStatus=function(e){this.isOrderActive=e,this.limitOrderData.activeObs.setValue(e),this.limitOrderData.activeBtnTitle.set(this.infrontUI.languageHandler.get(this.languageKey,e?"deactivate":"activate"))},r.prototype.attachSearchBoxToElement=function(t){var n=this,i=new e.SearchBoxOptions;i.fields=["full_name","ticker"],i.searchThreshold=1,i.autoselectAfterTab=this.options.autoSelectAfterTab,this.options.availableFeeds?i.feeds=this.options.availableFeeds:this.tradableFeeds&&(i.feeds=this.tradableFeeds),i.showAfterSelect=function(t){var i=t.ticker,r=n.infront.getCache().get(e.CacheKeyFactory.createInstrumentKey(t),[e.MWSConstants.instrument,"feed_code"]);return(r||t.feed_code)&&(i+=" ["+(r||t.feed_code)+"]"),i},i.instrumentInfoCallback=this.options.instrumentInfoCallback,i.searchTickersOnly=this.options.searchTickersOnly,i.instrumentSelected=function(e){return n.instrumentSelected(e)},i.emptyResultSelected=function(e){return n.validateInput()},this.currentInstrument&&(i.preselectedInstruments=this.currentInstrument),i.filter=function(e){return r.filterResultItem(e)},this.searchBox=new e.SearchBox(t,this.infront,i),this.searchBoxOptions=i},r.prototype.setSearchBoxInstrument=function(t){var n=this;this.searchBoxOptions&&this.searchBox&&(this.searchBoxOptions.preselectedInstruments=t,this.searchBox.modify(this.searchBoxOptions),t&&this.cache.asyncGet(function(e){var i=t.ticker+" ["+e+"]";n.searchBox.setText(i,!1)},e.CacheKeyFactory.createInstrumentKey(t),[e.MWSConstants.instrument,"feed_code"]))},r.filterResultItem=function(t){var n=!0;return t.hasOwnProperty(e.MWSConstants.instrument)&&-1!=r.defaultTradableInstrumentTypes.indexOf(t[e.MWSConstants.instrument][e.MWSConstants.instrument_type])||(n=n&&!1),n},r.prototype.resetAdvancedOptions=function(){this.algoWidget&&this.algoWidget.reset(),this.customFieldsWidget&&this.customFieldsWidget.reset(),this.limitOrderData.openVolObs&&(this.limitOrderData.openVolObs.set(""),this.limitOrderData.validitySelector.setSelected(0),this.limitOrderData.dateSelector.setDate(InfrontUtil.today()),this.setActiveStatus(!0))},r.prototype.snapshot=function(t){if(t&&0<t.length){var n=t[0];InfrontUtil.mergeRecursive(this.currentInstrument,n[e.MWSConstants.instrument],!1),n.hasOwnProperty(e.MWSConstants.tick_size_id)&&this.getTickSizes(n[e.MWSConstants.tick_size_id])}},r.prototype.instrumentSelected=function(t,n){var i=this;if(void 0===n&&(n=!0),this.removeBindings(),this.currentIceBerg.set(0),t!=this.currentInstrument&&(this.tickSizes=[]),this.currentInstrument=t,this.kidUrl.set(""),this.currentInstrument){if(n&&this.store(r.kOEStoredInstrument,this.currentInstrument.toJson()),this.currentInstrument.ticker&&this.ticker.set(this.currentInstrument.ticker),this.isInitialized){this.currentPrice=-1,this.updateOwned(),this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,this.currentInstrument);var s=e.CacheKeyFactory.createInstrumentKey(this.currentInstrument);this.unbinds.push(this.cache.customBind(s,"instrument/currency",e.BindingFactory.createInlineBinding(function(e){i.instrumentCurrency.set(e),i.setupTradingPowerCurrencyConverter()}))),this.unbinds.push(this.cache.customSymbolBind(this.currentInstrument,IDS.RealtimeTags.MinimumIcebergSize,e.BindingFactory.createInlineBinding(function(e){i.currentIceBerg.set(e)}))),this.unbinds.push(this.cache.customSymbolBind(this.currentInstrument,IDS.RealtimeTags.TickId,e.BindingFactory.createInlineBinding(function(e){0<e&&i.getTickSizes(e)}))),this.unbinds.push(this.cache.customBind(s,e.MWSConstants.isin,e.BindingFactory.createInlineBinding(function(e){i.currentInstrument&&(i.currentInstrument.isin=e)}))),this.subscribes.setInstrument(this.currentInstrument),e.ComputedFields.S_MARKET_PRICE().createComputedFieldInCache(this.cache,null,s),this.marketPriceBinding=new e.ObservableBinding,this.unbinds.push(this.cache.customBind(s,["s_market_price"],this.marketPriceBinding)),this.contractSizeBinding=new e.ObservableBinding,this.unbinds.push(this.cache.customBind(s,[e.QuoteFields.CONTRACT_SIZE],this.contractSizeBinding)),new e.ComputedObservable([this.marketPriceBinding,this.contractSizeBinding],function(e){i.updateTotal()},!1),this.insertStandardOrderTypes(),this.getCustomFields(),this.getAlgos(),this.isModifyMode()&&this.initModifyOrderTypeSettings();var o=s+r.kOEStoredVolume,l=this.getStoredGlobalValue(o);this.volumeBinding.set(l),InfrontUtil.setZeroTimeout(function(){i.volumeBinding&&i.volumeBinding.requestFocus()})}if(this.infront.instrumentInfoPromise(this.currentInstrument.feed,this.currentInstrument.ticker).then(function(t){i.decimals.set(t[e.MWSConstants.precision_code])}).catch(function(e){IDS.DEBUG_VERBOSE&&IDS.log(e)}),this.currentInstrument.feed&&this.currentInstrument.ticker&&this.options.kidLinkDefinition){var c,d,u=e.CacheKeyFactory.createInstrumentKey(this.currentInstrument),h=new RegExp("\\*"+this.options.customKidMidUrlParameter+"\\*","ig"),p=this.options.kidLinkDefinition.URL.toLowerCase(),m=-1<p.search(/\*feednu\*/gi),g=-1<p.search(/\*symbol\*/gi),f=-1<p.search(/\*isin\*/gi),v=-1<p.search(/\*exchsym\*/gi),y=-1<p.search(/\*currency\*/gi),b=-1<p.search(/\*symboltypeid\*/gi),T=-1<p.search(/\*subtypeid\*/gi),S=-1<p.search(/\*underlyingticker\*/gi),C=-1<p.search(/\*pid\*/gi),I=-1<p.search(/\*sid\*/gi),_=-1<p.search(/\*preferredlang\*/gi),M=InfrontUtil.isString(this.options.customKidMidUrlParameter)&&-1<p.search(h),E=-1<p.search(/\*NordnetMarketplace\*/gi),w=new InfrontUtil.MultiCallbackHandler(function(){var t=i.options.kidLinkDefinition.URL,n=i.currentInstrument[e.MWSConstants.instrument_type]?i.currentInstrument[e.MWSConstants.instrument_type]:i.cache.get(u,[e.MWSConstants.instrument,e.MWSConstants.instrument_type]),r=a.InstrumentDataType(n).toString(),s=i.currentInstrument[e.MWSConstants.instrument_subtype]?i.currentInstrument[e.MWSConstants.instrument_subtype]:i.cache.get(u,[e.MWSConstants.instrument,e.MWSConstants.instrument_subtype]),o=a.InstrumentSubType(s).toString();if(i.showKID(n,s)){if(m&&(t=t.replace(/\*feednu\*/gi,i.currentInstrument.feed.toString())),g&&(t=t.replace(/\*symbol\*/gi,i.currentInstrument.ticker)),f&&(t=t.replace(/\*isin\*/gi,c)),v&&(InfrontUtil.isFunction(i.options.customKidMidCalculation)&&(d=i.options.customKidMidCalculation(i.currentInstrument.feed,d)),t=t.replace(/\*exchsym\*/gi,d)),M&&(InfrontUtil.isFunction(i.options.customKidMidCalculation)&&(d=i.options.customKidMidCalculation(i.currentInstrument.feed,d)),t=t.replace(h,d)),E&&(d=i.customKidMidCalculation(i.currentInstrument.feed,d),t=t.replace(/\*NordnetMarketplace\*/gi,d)),y&&(t=t.replace(/\*currency\*/gi,i.cache.get(u,[e.MWSConstants.instrument,e.MWSConstants.currency]))),b&&(t=t.replace(/\*symboltypeid\*/gi,r)),T&&(t=t.replace(/\*subtypeid\*/gi,o)),S){var l=i.cache.get(u,[e.MWSConstants.instrument,e.MWSConstants.under_ticker]);t=t.replace(/\*underlyingticker\*/gi,l)}C&&(t=t.replace(/\*pid\*/gi,i.infront.getTradingSession().values.pid.toString())),I&&(t=t.replace(/\*sid\*/gi,i.infront.getTradingSession().values.sid.toString())),_&&(t=t.replace(/\*preferredlang\*/gi,i.infrontUI.language.toUpperCase())),i.kidUrl.set(t),i.kidTitle.set(i.options.kidLinkDefinition.DisplayName)}});this.cache.guaranteedAsyncGet(w.addCallback(function(e){c=e}),new e.FieldReference(u,[e.MWSConstants.instrument,e.MWSConstants.isin])),this.getFeedMetadata(this.currentInstrument.feed,w.addCallback(function(e){e&&e.mic&&(d=e.mic)})),this.infront.registerTradingConnectedEventObserverWithCallbackIfConnected(w.addCallback(function(){}))}}this.validateInput()},r.prototype.customKidMidCalculation=function(e,t){switch(e){case 14:return"17";case 15:return"19";case 26:return"4";case 28:return"18";case 100:return"24";case 102:return"54";case 2e3:return"4";case 2163:return"25";case 2186:return"4";case 2196:return"62";case 2206:return"115";case 2234:return"36";case 2235:return"XNGM"==t?"36":"62";case 2236:case 2237:return"64";case 5730:return"54";case 6090:case 6092:return"18";case 17665:return"14";case 17667:return"23";case 17669:return"14";case 17677:return"55";case 17921:return"11";case 17922:return"40";case 17923:return"12";case 17931:return"53";case 17938:return"NMTF"==t?"66":"13";case 17943:return"35";case 17942:case 17944:return"XNGM"==t?"35":"61";case 17952:return"53";case 17962:return"30";case 17963:return"32";case 17964:return"33";case 17965:return"31";case 17971:return"47";case 17982:case 17997:return"30";case 18011:return"40";case 18040:case 18041:return"XNGM"==t?"48":"63";case 18051:return"52";case 18177:return"MERK"==t?"49":"15";case 18179:return"34";case 18207:case 18221:return"15"}return""},r.prototype.showKID=function(e,t){if(277==this.infront.getTradingSession().values.pid)return!0;switch(e){case"NONE":case"STOCK":case"NEWS":case"COMMODITY":case"INDEX":case"FOREX":case"INDICATOR":return!1;case"EURO_OPTION":case"FUTURES":case"US_OPTION":case"OPTION":case"COMBO":case"CFD":case"CERTIFICATE":return!0;case"BOND":return"NONE"!=t&&"BOND_TREASURY"!=t;case"FUND":return"NONE"!=t;default:return!0}},r.prototype.accepts=function(){return[InterLibraryLink.DataType.price,InterLibraryLink.DataType.infrontInstrument]},r.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.price&&"number"==typeof e.value&&(this.isAlgoOrderType()?this.algoWidget&&this.algoWidget.setPrice(e.value):(this.hasPrice&&this.priceBinding.set(InfrontUtil.formatNumber(e.value,this.decimals.get())),this.customFieldsWidget&&this.customFieldsWidget.setPrice(e.value)))},r.prototype.link=function(e){this.targetManager.addTarget(e),this.currentInstrument&&e.receiveMessage({type:InterLibraryLink.DataType.infrontInstrument,value:this.currentInstrument})},r.prototype.unlink=function(e){this.targetManager.removeTarget(e)},r.prototype.isModifyMode=function(){return 0<this.options.modifyOrderId&&""!=this.options.modifyPortfolio},r.prototype.modify=function(e){if(this.reset(),this.infrontUI.ensureTradingLoggedIn(this.options.rememberCanceledLogin),this.searchBox&&this.searchBox.setEnabled(!0),this.options.modifyOrderId=e.modifyOrderId,this.options.modifyPortfolio=e.modifyPortfolio,this.options.kidLinkDefinition=e.kidLinkDefinition,this.options.customKidMidCalculation=e.customKidMidCalculation,this.options.customKidMidUrlParameter=e.customKidMidUrlParameter,this.isModifyMode()){this.setOrderEntryState(t.MODIFY);var n=this.tradingManager.getCurrentPortfolio();n&&n.name==e.modifyPortfolio?this.currentPortfolioChanged(n):this.tradingManager.setCurrentPortfolioName(e.modifyPortfolio)}else this.setSearchBoxInstrument(e.instrument),e.instrument&&this.instrumentSelected(e.instrument),InfrontUtil.isNumber(e.initialPrice)&&this.priceBinding.set(e.initialPrice.toString())},r.prototype.reset=function(){this.owned.set(0),this.orderAction=i.INSERT,this.setOrderEntryState(t.DATA_ENTRY),this.statusMessage.set(""),this.errorMessage.set(""),this.initSteps=0,this.searchBox&&(this.options.keepInstrumentOnNew||this.searchBox.clear(),this.searchBox.setEnabled(!0)),this.options.keepInstrumentOnNew||(this.currentInstrument=null),this.currentOrder=null,this.modifyOptions=null,this.buyOrSell=null,this.options.modifyOrderId=0,this.options.modifyPortfolio="",this.algoId=null,this.hasParentOrder=!1,this.disableOrderTypeSelector.set(!1),this.portfolioObserver.setDisabled(!1),this.priceBinding.set(""),this.resetAdvancedOptions(),this.orderStatusUnbind&&(this.orderStatusUnbind(),this.orderStatusUnbind=null),this.updateOwned(),this.isSendingRequest=!1,this.getCustomFields(),this.getAlgos()},r.prototype.initWhenReady=function(){this.initSteps++,3<=this.initSteps&&this.isModifyMode()&&this.initModifyOrderTypeSettings()},r.prototype.updateTotal=function(){if(this.currentInstrument){var e=this.contractSizeBinding.get()||1;if(this.hasPrice&&-1<this.currentPrice&&0<this.currentVolume)this.orderTotal.set(this.currentPrice*this.currentVolume*e);else if(!this.hasPrice&&0<this.currentVolume){var t=this.marketPriceBinding.get()||0;this.orderTotal.set(t*this.currentVolume*e)}else this.orderTotal.set(0)}},r.prototype.updateOwned=function(){if(this.ownedUnbinding&&this.ownedUnbinding(),this.owned.set(0),this.currentInstrument&&this.currentPortfolio.get()){var t=e.CacheKeyFactory.createPotentialPositionKey(this.currentPortfolio.get().name,this.currentInstrument);this.ownedUnbinding=this.cache.customBind(t,e.MWSConstants.volume,this.owned)}},r.prototype.conformsToOpenVolumeRules=function(e){return e>=this.currentIceBerg.get()||0==e||isNaN(e)?(this.openVolumeValid.set(!0),!0):(this.openVolumeValid.set(!1),!1)},r.prototype.conformsToTickSizeRules=function(e){for(var t=!0,n=0;n<this.tickSizes.length;n++){var i=this.tickSizes[n];if(e<=i.upper_bound){var r=i.lower_bound+Math.round((e-i.lower_bound)/i.size)*i.size;1e-4<Math.abs(r-e)&&(t=!1);break}}return this.tickSizeValid.set(t),!0},r.prototype.validateInput=function(){var e=null!=this.currentInstrument&&(!this.priceBinding.isEnabled()||this.priceBinding.isValid())&&this.volumeBinding.isValid()&&this.isTradingConnected();if(e){var t=InfrontUtil.parseFloatValue(this.priceBinding.get());e=this.conformsToTickSizeRules(t)}if(e){var n=!0;this.isAlgoOrderType()?this.algoWidget&&(n=this.algoWidget.validateInput()):(null!=this.limitOrderData.openVolObs&&(n=this.limitOrderData.openVolObs.isValid()),e&&this.limitOrderData.commentObs&&(n=n&&this.limitOrderData.commentObs.isValid()),e&&this.customFieldsWidget&&this.customFieldsWidget.fields.items.length&&(n=this.customFieldsWidget.validateInput())),this.advancedValid.set(n),e=n}this.disableBuySell.set(!e)},r.prototype.OpenVolumeChanged=function(e){this.currentOpenVolume=parseInt(e),this.conformsToOpenVolumeRules(this.currentOpenVolume),this.validateInput()},r.prototype.volumeInputChanged=function(e){this.currentVolume=parseInt(e),this.updateTotal(),this.validateInput()},r.prototype.priceInputChanged=function(e){this.currentPrice=InfrontUtil.parseFloatValue(e),this.updateTotal(),this.validateInput()},r.prototype.getOrderType=function(){return this.orderTypesMapping[this.selectedOrderTypeIx]},r.prototype.setOrderType=function(e){if(this.orderTypesMapping)for(var t=0;t<this.orderTypesMapping.length;t++)this.orderTypesMapping[t]==e&&(this.forceOrderTypeUpdate=!0,this.orderTypeObserver.setSelected(t),this.forceOrderTypeUpdate=!1)},r.prototype.getOpenVolume=function(){var e=this.limitOrderData.openVolObs.get();return InfrontUtil.isNumeric(e)?InfrontUtil.parseFloatValue(e):null},r.prototype.createOrder=function(t){var n=this,i=new e.InsertOrderOptions;i.activeOrder=!0,i.instrument=this.currentInstrument,i.portfolio=this.currentPortfolio.get().name,i.buyOrSell=t,i.volume=parseFloat(this.volumeBinding.get()),i.orderType=this.getOrderType(),this.isAlgoOrderType()?this.algoWidget&&this.algoWidget.populateOrder(i):(i.price=0,this.hasPrice&&(i.price=InfrontUtil.parseFloatValue(this.priceBinding.get())),i.activeOrder=this.limitOrderData.activeObs.getValue(),i.openVolume=this.getOpenVolume(),this.customFieldsWidget&&this.customFieldsWidget.populateOrder(i),this.limitOrderData&&this.limitOrderData.populateOrder(i)),i.onError=function(e,t){n.isSendingRequest=!1,n.displayErrorMessage("Insert order failed",t)},i.onData=function(e){return n.insertOrderCallback(e)},this.currentOrder=i},r.prototype.createModifyOrder=function(){var t=this,n=new e.ModifyOrderOptions;n.instrument=this.currentInstrument;var i=parseInt(this.volumeBinding.get());if(this.hasTradingFeature2(IDS.ServerProperties2.AlgoModifyRemainingVolume)){var r=e.CacheKeyFactory.createOrderIdKey(this.currentPortfolio.get().name,this.options.modifyOrderId),a=this.cache.get(r,[e.MWSConstants.volume_filled]);InfrontUtil.isNumber(a)?n.volume=i+a:n.volume=i}else n.volume=i;this.isAlgoOrderType()?this.algoWidget&&this.algoWidget.modifyOrder(n):(n.price=0,this.hasPrice&&(n.price=InfrontUtil.parseFloatValue(this.priceBinding.get())),this.hasTradingFeature(IDS.ServerProperties.ModifyOrderActivate,this.currentInstrument.feed)&&(n.activeOrder=this.limitOrderData.activeObs.getValue()),this.hasTradingFeature3(IDS.ServerProperties3.NoOpenVolumeModify)||(n.openVolume=this.getOpenVolume()||0),this.customFieldsWidget&&this.customFieldsWidget.modifyOrder(n),this.hasTradingFeature2(IDS.ServerProperties2.NoValidityModify)||this.limitOrderData&&this.limitOrderData.modifyOrder(n)),n.onError=function(e,n){t.isSendingRequest=!1,t.displayErrorMessage("Modify order failed",n)},n.onData=function(e){return t.modifyOrderCallback(e)},this.modifyOptions=n},r.prototype.populateFromCurrentOrder=function(){var t=!0,n=this.currentOrder;return n&&(this.currentInstrument=n.instrument,n.portfolio!=this.currentPortfolio.get().name&&(t=!1),this.volumeBinding.set(n.volume.toString()),n.orderType==e.OrderType.STRATEGY?this.algoWidget&&this.algoWidget.populateFromCurrentOrder(n):(this.hasPrice?this.priceBinding.set(n.price?n.price.toString():""):this.priceBinding.set(""),this.limitOrderData&&this.limitOrderData.populateFromCurrentOrder(n),this.setActiveStatus(n.activeOrder),n.openVolume&&InfrontUtil.isNumber(n.openVolume)&&0<n.openVolume&&this.limitOrderData.openVolObs.set(n.openVolume.toString()),this.customFieldsWidget&&this.customFieldsWidget.populateFromCurrentOrder(n))),t},r.prototype.populateFromModifyOrder=function(){var e=this.modifyOptions;this.volumeBinding.set(e.volume.toString()),this.isAlgoOrderType()?this.algoWidget&&this.algoWidget.populateFromModifyOrder(e):(this.hasPrice?this.priceBinding.set(e.price.toString()):this.priceBinding.set(""),this.hasTradingFeature2(IDS.ServerProperties2.NoValidityModify)||this.limitOrderData&&this.limitOrderData.populateFromModifyOrder(e),e.openVolume&&InfrontUtil.isNumber(e.openVolume)&&0<e.openVolume&&this.limitOrderData.openVolObs.set(e.openVolume.toString()),this.customFieldsWidget&&this.customFieldsWidget.populateFromModifyOrder(e))},r.prototype.getBuyOrSellStr=function(){if(null==this.buyOrSell||""==this.buyOrSell)return"";if(this.buyOrSell.toUpperCase()==e.MWSBuyOrSell.BUY)var t="cell-status-positive",n=this.infrontUI.languageHandler.get(this.languageKey,"buy");else t="cell-status-negative",n=this.infrontUI.languageHandler.get(this.languageKey,"sell");return'<span class="cell-w-order-entry__buy-or-sell '+t+'">'+n+"</span>"},r.prototype.getTGW=function(){return this.infront.getCurrentTGW()},r.prototype.getTGWStr=function(){return""},r.prototype.inputFieldSelected=function(){this.orderState.get()==t.ERROR&&this.resetOrderEntryState()},r.prototype.resetOrderEntryState=function(){this.isModifyMode()?this.setOrderEntryState(t.MODIFY):this.setOrderEntryState(t.DATA_ENTRY)},r.prototype.setOrderEntryState=function(e){this.orderState.get()!=e&&(e==t.ERROR?(this.searchBox&&this.searchBox.setEnabled(!1),this.limitOrderData.validitySelector&&this.limitOrderData.validitySelector.setDisabled(this.limitOrderData.validityItems.length()<=1),this.limitOrderData.dateSelector&&this.limitOrderData.dateSelector.setEnabled(!0),this.limitOrderData.timeSelector&&this.limitOrderData.timeSelector.setEnabled(!0),this.customFieldsWidget&&this.customFieldsWidget.setConfirmMode(!1),this.algoWidget&&this.algoWidget.setConfirmMode(!1)):e==t.SUCCESS||e==t.CONFIRM?(this.searchBox.setEnabled(!1),this.customFieldsWidget&&this.customFieldsWidget.setConfirmMode(!0),this.algoWidget&&this.algoWidget.setConfirmMode(!0),this.limitOrderData.validitySelector&&this.limitOrderData.validitySelector.setDisabled(!0),this.limitOrderData.dateSelector&&this.limitOrderData.dateSelector.setEnabled(!1),this.limitOrderData.timeSelector&&this.limitOrderData.timeSelector.setEnabled(!1)):(this.caption.set(this.widgetTitle+this.getTGWStr()),this.searchBox&&this.searchBox.setEnabled(!0),this.customFieldsWidget&&this.customFieldsWidget.setConfirmMode(!1),this.algoWidget&&this.algoWidget.setConfirmMode(!1),this.limitOrderData.validitySelector&&this.limitOrderData.validitySelector.setDisabled(this.limitOrderData.validityItems.length()<=1),this.limitOrderData.dateSelector&&this.limitOrderData.dateSelector.setEnabled(!0),this.limitOrderData.timeSelector&&this.limitOrderData.timeSelector.setEnabled(!0),this.isAlgoOrderType()?this.priceBinding.setEnabled(!1):this.priceBinding.setEnabled(this.hasPrice)),this.orderState.set(e),this.disableOrderTypeSelector.set(this.isModifyMode()||this.disableInput.get()))},r.prototype.prepareOrder=function(e){this.createOrder(e),this.options.confirmation?(this.caption.set(this.getBuyOrSellStr()+this.infrontUI.languageHandler.get(this.languageKey,"confirmCaption")+this.getTGWStr()),this.orderAction=i.INSERT,this.populateFromCurrentOrder()?this.setOrderEntryState(t.CONFIRM):this.displayErrorMessage("Order validation failed","portfolio mis-match")):this.insertOrder()},r.prototype.showOrderStatus=function(t,n){var i=this;if(this.orderStatusUnbind&&this.orderStatusUnbind(),InfrontUtil.isNumber(n)&&0<n){var r=e.CacheKeyFactory.createOrderIdKey(t,n),a=[];a.push(this.cache.customBind(r,e.MWSConstants.order_status,e.BindingFactory.createInlineBinding(function(e){i.statusMessage.set(InfrontUtil.formatEnumString(e))}))),a.push(this.cache.customBind(r,e.MWSConstants.error_message,e.BindingFactory.createInlineBinding(function(e){i.errorMessage.set(InfrontUtil.formatEnumString(e))}))),this.orderStatusUnbind=function(){for(var e=0;e<a.length;e++)a[e]()}}},r.prototype.insertOrder=function(){this.isSendingRequest||(this.currentOrder?(this.isSendingRequest=!0,this.infront.trInsertOrder(this.currentOrder),this.storeVolume(this.currentOrder.instrument,this.currentOrder.volume)):this.displayErrorMessage("Insert order failed","Current order object missing"))},r.prototype.insertModifyOrder=function(){this.isSendingRequest||(this.modifyOptions?(this.isSendingRequest=!0,this.infront.trModifyOrder(this.options.modifyPortfolio,this.options.modifyOrderId,this.modifyOptions),this.storeVolume(this.modifyOptions.instrument,this.modifyOptions.volume)):this.displayErrorMessage("Modify order failed","Modify order object missing"))},r.prototype.storeVolume=function(t,n){var i=e.CacheKeyFactory.createInstrumentKey(t)+r.kOEStoredVolume;this.storeGlobal(i,n)},r.prototype.deleteOrder=function(){var t=this,n=new e.DataOptions;n.onData=function(e){return t.deleteOrderCallback(e)},n.onError=function(e,n){t.displayErrorMessage("Delete order failed",n)},this.infront.trDeleteOrder(this.options.modifyPortfolio,this.options.modifyOrderId,n)},r.prototype.buyClicked=function(){this.buyOrSell=e.MWSBuyOrSell.BUY,this.prepareOrder(e.BuyOrSell.Buy)},r.prototype.sellClicked=function(){this.buyOrSell=e.MWSBuyOrSell.SELL,this.prepareOrder(e.BuyOrSell.Sell)},r.prototype.confirmClicked=function(){switch(this.orderAction){case i.INSERT:this.insertOrder();break;case i.MODIFY:this.insertModifyOrder();break;case i.DELETE:this.deleteOrder()}},r.prototype.cancelClicked=function(){this.buyOrSell=null,this.resetOrderEntryState()},r.prototype.modifyClicked=function(){this.createModifyOrder(),this.options.confirmation?(this.populateFromModifyOrder(),this.orderAction=i.MODIFY,this.caption.set(this.getBuyOrSellStr()+this.infrontUI.languageHandler.get(this.languageKey,"confirmCaption")+this.getTGWStr()),this.setOrderEntryState(t.CONFIRM)):this.insertModifyOrder()},r.prototype.deleteClicked=function(){this.options.confirmation?(this.orderAction=i.DELETE,this.caption.set(this.getBuyOrSellStr()+this.infrontUI.languageHandler.get(this.languageKey,"deleteCaption")+this.getTGWStr()),this.setOrderEntryState(t.CONFIRM)):this.deleteOrder()},r.prototype.newClicked=function(){this.reset()},r.prototype.closeClicked=function(){this.options.closeCallback&&this.options.closeCallback()},r.prototype.deleteOrderCallback=function(e){this.statusMessage.set("Order deleted"),this.options.closeOnComplete&&this.options.closeCallback?this.options.closeCallback():this.setOrderEntryState(t.SUCCESS)},r.prototype.insertOrderCallback=function(n){this.isSendingRequest=!1,this.options.closeOnComplete&&this.options.closeCallback?this.options.closeCallback():(this.caption.set(this.getBuyOrSellStr()+this.infrontUI.languageHandler.get(this.languageKey,"orderPlaced")+this.getTGWStr()),this.showOrderStatus(this.currentPortfolio.get().name,n[e.MWSConstants.order_id]),this.setOrderEntryState(t.SUCCESS))},r.prototype.modifyOrderCallback=function(e){this.isSendingRequest=!1,this.options.closeOnComplete&&this.options.closeCallback?this.options.closeCallback():(this.caption.set(this.getBuyOrSellStr()+this.infrontUI.languageHandler.get(this.languageKey,"orderModified")+this.getTGWStr()),this.showOrderStatus(this.options.modifyPortfolio,this.options.modifyOrderId),this.setOrderEntryState(t.SUCCESS))},r.prototype.displayErrorMessage=function(e,n){this.statusMessage.set(n),this.setOrderEntryState(t.ERROR)},r.prototype.updatePortfolioGUI=function(e){for(var t=0;t<this.portfolios.length();t++)if(this.portfolios.data[t].name==e){this.portfolioObserver.setSelected(t);break}},r.prototype.availablePortfoliosChanged=function(t){var n=this;if(t){for(this.portfolios.replaceWith(t);this.portfolioElement.firstChild;)this.portfolioElement.removeChild(this.portfolioElement.firstChild);if(1==t.length){var i=document.createElement("div");i.innerHTML=t[0].name,i.setAttribute("class","cell-w-order-entry__single-value"),this.portfolioElement.appendChild(i)}else this.portfolioElement.appendChild(e.WidgetDOMFactory.create_WOrderEntry_Select_DOM(this.portfolios,"name",this.portfolioObserver,this.orderState,this.disableInput,!0)),this.portfolioObserver.observe(function(e){n.updateUIForSelectedPortfolio(e)});null!=this.currentPortfolio.get()&&this.updatePortfolioGUI(this.currentPortfolio.get().name)}},r.prototype.currentPortfolioChanged=function(n){var i=this;if(this.orderState.get()==t.MODIFY&&n)if(""!=n.name&&0!=this.options.modifyOrderId){var r=e.CacheKeyFactory.createOrderIdKey(n.name,this.options.modifyOrderId);this.cache.asyncGet(function(e){i.initModify()},r,"order_id")}else this.statusMessage.set("Invalid portfolio / order id."),this.setOrderEntryState(t.ERROR);var a=null==n?"":n.name;null!=this.currentPortfolio.get()&&this.currentPortfolio.get().name==a||(this.currentPortfolio.set(n),this.updatePortfolioGUI(a)),this.setupTradingPowerCurrencyConverter(),this.updateOwned()},r.prototype.setupTradingPowerCurrencyConverter=function(){var t=this,n=this.currentPortfolio.get(),i=this.currentInstrument,r=e.MWSConstants.base_trading_power;if(n&&i){var a=this.baseCurrency.get(),s=this.instrumentCurrency.get();if(s&&a&&s!=a){r+="_"+s;var o=e.CacheKeyFactory.createPortfolioDataKey(n),l=new e.FieldReference(o,e.MWSConstants.base_trading_power),c=new e.FieldReference(o,r);this.infront.getCurrencyConverter().createConvertedFieldFromCache(l,a,s,c)}}if(n){this.tpUnbinding&&this.tpUnbinding(),this.tpUnbinding=this.cache.customBind(e.CacheKeyFactory.createPortfolioDataKey(n),r,this.tradingPower);var d=new e.ObservableBinding(function(e){var n=t.tradingManager.currentPortfolioCurrency;n&&n!==t.baseCurrency.get()&&(t.baseCurrency.set(n),t.setupTradingPowerCurrencyConverter())});this.tradingPower.observe(d)}},r.prototype.applyAdvancedMode=function(e){var t=this.advancedMode.get(),n=t?this.infrontUI.languageHandler.get(this.languageKey,"hideAdvanced"):this.infrontUI.languageHandler.get(this.languageKey,"showAdvanced");this.advancedCaption.set(n),e&&this.options.advancedOptionsCallback&&this.options.advancedOptionsCallback(t)},r.prototype.toggleAdvancedMode=function(e){e.currentTarget.classList.contains("cell-tabs__horizontal__tab--selected")||(this.advancedMode.set(!this.advancedMode.get()),this.applyAdvancedMode(!0))},r.prototype.setAdvancedMode=function(e,t){void 0===t&&(t=!1),this.advancedMode.set(e),this.applyAdvancedMode(t)},r.kComputedVolume="computedVolume",r.kLanguageKey="orderEntry",r.LABEL="label",r.defaultTradableInstrumentTypes=[InfrontConstants.InstrumentType.STOCK,InfrontConstants.InstrumentType.BOND,InfrontConstants.InstrumentType.FUND],r.kOEStoredTradableFeeds="oe-stored-tradable-feeds",r.kOEStoredInstrument="com.goinfront.wtk.oe.stored.instrumentString",r.kOEStoredVolume="oe-stored-volume",r}(e.TradingWidgetBase);e.OrderEntryWidget=l}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.computedAvgPrice=!1,t}return __extends(t,e),t}(e.TradingWidgetOptions);e.OrderStackWidgetOptions=t;var n=function(){function e(){}return e.TRAILING_STOP_LOSS_TICK="InfrontCondor_TrailTick",e.TRAILING_STOP_LOSS_PCT="InfrontCondor_TrailPct",e.STOP_LOSS="InfrontCondor_StopLmt",e}();e.AlgoID=n;var i=function(i){function a(t,n,s){var o=i.call(this,t,n,"orderWidget",s)||this;o.orderTypesWithoutPrice=e.OrderType.QUOTE_ORDER+e.OrderType.MARKET+e.OrderType.AT_MARKET+e.OrderType.BEST_POSSIBLE+e.OrderType.AT_MARKET_AND_KILL+e.OrderType.MARKET_TO_LIMIT+e.OrderType.STOP_LOSS+e.OrderType.BEST_TO_LIMIT+e.OrderType.STRATEGY+e.OrderType.MARKET_FOK+e.OrderType.MARKET_FAK,o.itemUnbinds={},o.statusLabels={},o.limitLabels={},o.conditionLabels={},o.suffixLabels={},o.overrideStatus={};var l=[[e.MWSConstants.order_status],[e.MWSConstants.created]];return o.decimals=new e.Observable(3),o.items=new e.ContinouslySortedCacheKeyObservableArray(l,o.cache,[function(e,t){return a.includedStates.indexOf(e)-a.includedStates.indexOf(t)},e.CompareFunctions.compareDateStringsDesc]),o.items.observe(new e.ArrayBinding(o.element,o,null)),o.items.observe(o),o.sync=new r(o.items,o.infront.getCache(),[e.MWSConstants.order_status],function(e){return-1!=a.includedStates.indexOf(e)}),o.subscribes.addFields([e.QuoteFields.ASK,e.QuoteFields.BID]),o}return __extends(a,i),a.prototype.returnDefaultWidgetOptions=function(){return new t},a.prototype.newInit=function(){this.overrideStatus={},i.prototype.newInit.call(this)},a.prototype.newBuildUI=function(){i.prototype.newBuildUI.call(this)},a.prototype.newDestroyUI=function(){for(var e in this.itemUnbinds)this.unbindItem(e);this.syncUnbind&&(this.syncUnbind(),this.syncUnbind=null),this.overrideStatus={},this.items.clear(),i.prototype.newDestroyUI.call(this)},a.prototype.isActiveOrder=function(t){var n=this.cache.get(t,e.MWSConstants.order_status);return-1!=a.activeStates.indexOf(n)},a.prototype.orderClicked=function(t,n,i){if(this.options.orderClicked&&this.isActiveOrder(t)){var r=this.cache.get(t,e.MWSConstants.order_id);this.options.orderClicked(this.infront.getTradingManager().getCurrentPortfolio().name,r)}},a.prototype.orderSupportsPrice=function(e){var t=!0;return e&&(t=this.orderTypesWithoutPrice.indexOf(e)<0),t},a.prototype.statusHandler=function(t){var n=this,i=this.cache.get(t,[e.MWSConstants.algo_id]);this.infront.getTradingManager().getStrategy(this.cache.get(t,"instrument/feed"),i,function(i){n.statusLabels[t].set(i[e.MWSConstants.label])})},a.prototype.limitHandler=function(t){var i=this,r=this.cache.get(t,[e.MWSConstants.algo_id]);if(r&&""!=r)switch(r){case n.STOP_LOSS:var a=this.cache.customBind(t,[e.MWSConstants.algo_params]+"/orderlimitpx",e.BindingFactory.createInlineBinding(function(e){i.updateLimit(t,e)}));break;case n.TRAILING_STOP_LOSS_PCT:case n.TRAILING_STOP_LOSS_TICK:a=this.cache.customBind(t,[e.MWSConstants.algo_params]+"/traillimit",e.BindingFactory.createInlineBinding(function(e){i.updateLimit(t,e)}))}else{var s=this.cache.get(t,[e.MWSConstants.order_type]);this.orderSupportsPrice(s)?a=this.cache.customBind(t,[e.MWSConstants.price],e.BindingFactory.createInlineBinding(function(e){i.updateLimit(t,e)})):(this.overrideStatus[t]=s,this.updateLimit(t,this.infrontUI.languageHandler.get("orderEntry","MARKET")),this.updateCondition(t,""),this.getCustomFields(t,function(n){for(var r="",a="",s=0,o=n;s<o.length;s++){var l=o[s];if(l.type==e.CustomFieldItem.STOP_PRICE||l.type==e.CustomFieldItem.PRICE){var c=i.cache.get(t,[e.MWSConstants.custom_tags,l.id.toString().toLowerCase()]);if(null!=c&&""!=c){var d=c.split("=");2==d.length&&(c=d[1]),r=c,a=l.label+": ";break}}}if(""!=r){var u=i.cache.get(t,[e.MWSConstants.instrument,e.MWSConstants.currency]);i.updateCondition(t,"("+a+r+" "+u+")")}}))}return a},a.prototype.getCustomFields=function(t,n){var i=this.getInstrumentFromOrder(t);if(InfrontUtil.isFunction(n)&&i){var r=new e.GetCustomFieldsOptions;r.feed=i.feed,r.onData=function(t){n(t[e.MWSConstants.custom_fields])},r.onError=function(e,t){InfrontUtil.errorLogCallback(e,t)},this.infront.trGetCustomFields(r)}},a.prototype.conditionHandler=function(t){var i,r=this,a=this.cache.get(t,[e.MWSConstants.algo_id]);if(a&&""!=a)switch(a){case n.STOP_LOSS:i=this.cache.customBind(t,[e.MWSConstants.algo_params]+"/triggerpx",e.BindingFactory.createInlineBinding(function(e){e="(Trigger: "+e+")",r.updateCondition(t,e)}));break;case n.TRAILING_STOP_LOSS_PCT:i=this.cache.customBind(t,[e.MWSConstants.algo_params]+"/pctfromlast",e.BindingFactory.createInlineBinding(function(e){e="(Dev: "+e+")",r.updateCondition(t,e)}));break;case n.TRAILING_STOP_LOSS_TICK:i=this.cache.customBind(t,[e.MWSConstants.algo_params]+"/ticksfromlast",e.BindingFactory.createInlineBinding(function(e){e="(Dev: "+e+")",r.updateCondition(t,e)}))}return i},a.prototype.suffixHandler=function(t){var i,r=this.cache.get(t,[e.MWSConstants.algo_id]);if(r&&""!=r)switch(r){case n.STOP_LOSS:break;case n.TRAILING_STOP_LOSS_PCT:i="%",this.updateSuffix(t,i);break;case n.TRAILING_STOP_LOSS_TICK:i="&nbsp;ticks",this.updateSuffix(t,i)}},a.prototype.updateLimit=function(e,t){this.limitLabels.hasOwnProperty(e)&&this.limitLabels[e].set(t)},a.prototype.updateCondition=function(e,t){this.conditionLabels.hasOwnProperty(e)&&this.conditionLabels[e].set(t)},a.prototype.updateSuffix=function(e,t){this.suffixLabels.hasOwnProperty(e)&&this.suffixLabels[e].set(t)},a.prototype.updateOrderStatus=function(t,n){-1!=a.activeStates.indexOf(n)?this.subscribe(t):this.unsubscribe(t),this.statusLabels.hasOwnProperty(t)&&(n==e.OrderStatus.MONITOR_ORDER?this.statusHandler(t):this.statusLabels[t].set(this.infrontUI.languageHandler.get(this.languageKey,n)))},a.prototype.createRow=function(t,n){var i=this,r=this.cache.customBind(t,[e.MWSConstants.order_status],e.BindingFactory.createInlineBinding(function(e){i.overrideStatus.hasOwnProperty(t)&&i.overrideStatus[t]?i.updateOrderStatus(t,i.overrideStatus[t]):i.updateOrderStatus(t,e)})),a=new e.Observable(e.UI.kDefaultDecimals),s=this.getInstrumentFromOrder(t);this.infront.instrumentInfoPromise(s.feed,s.ticker).then(function(t){a.set(t[e.MWSConstants.precision_code])}).catch(function(e){IDS.DEBUG_VERBOSE&&IDS.log(e)});var o=new e.Observable;o.set(""),this.limitLabels[t]=o;var l=this.limitHandler(t),c=new e.Observable;c.set(""),this.conditionLabels[t]=c;var d=this.conditionHandler(t),u=new e.Observable;u.set(""),this.suffixLabels[t]=u,this.suffixHandler(t);var h=new e.Observable;h.set("");var p=this.getBidAskFromOrderPosition(t);h.set(this.infrontUI.languageHandler.get(this.languageKey,p));var m=new e.ObservableBinding;m.set("");var g=e.CacheKeyFactory.createInstrumentKey(this.getInstrumentFromOrder(t)),f=this.cache.customBind(g,[p],m),v=new e.ObservableBinding;v.set("");var y=this.options.computedAvgPrice?e.TradingManager.kSAvgPrice:e.TradingManager.kAvgPrice,b=this.cache.customBind(t,[y],v);this.itemUnbinds[t]={orderStatusUnbind:r,limitValueUnbind:l,conditionValueUnbind:d,bidAskUnbind:f,avgPriceUnbind:b};var T=new e.Observable;this.statusLabels[t]=T;var S=this.cache.get(t,"order_status"),C=this.overrideStatus.hasOwnProperty(t)&&this.overrideStatus[t];return e.WidgetDOMFactory.create_WOrder_DOM(a,T,o,c,u,S,h,m,v,C,function(e){return i.orderClicked(t,n,e)},this.cache,t,this.infrontUI.languageHandler)},a.prototype.currentPortfolioChanged=function(t){if(this.widgetState>e.WidgetState.Constructed){var n=null==t?"":t.name;n!=this.portfolioName&&(this.portfolioName=n,this.syncUnbind&&(this.syncUnbind(),this.syncUnbind=null),this.items.clear(),null!=t&&(this.syncUnbind=this.cache.bindToArray(e.CacheKeyFactory.createPortfolioOrdersKey(t),this.sync)))}},a.prototype.getInstrumentFromOrder=function(t){var n=this.cache.get(t,[e.MWSConstants.instrument,e.MWSConstants.ticker]),i=this.cache.get(t,[e.MWSConstants.instrument,e.MWSConstants.feed]);return new e.Instrument(i,n)},a.prototype.getBidAskFromOrderPosition=function(t){return this.cache.get(t,e.MWSConstants.buy_or_sell)==e.MWSBuyOrSell.BUY?e.MWSConstants.ask:e.MWSConstants.bid},a.prototype.unsubscribe=function(e){var t=this.getInstrumentFromOrder(e);this.subscribes.removeInstrument(t)},a.prototype.subscribe=function(e){var t=this.getInstrumentFromOrder(e);this.subscribes.addInstrument(t)},a.prototype.reInit=function(e){for(var t=0;t<e.length;t++)this.itemAdded(e[t],t)},a.prototype.unbindItem=function(e){this.itemUnbinds.hasOwnProperty(e)&&(this.itemUnbinds[e].orderStatusUnbind(),this.itemUnbinds[e].limitValueUnbind&&this.itemUnbinds[e].limitValueUnbind(),this.itemUnbinds[e].conditionValueUnbind&&this.itemUnbinds[e].conditionValueUnbind(),this.itemUnbinds[e].bidAskUnbind&&this.itemUnbinds[e].bidAskUnbind(),this.itemUnbinds[e].avgPriceUnbind&&this.itemUnbinds[e].avgPriceUnbind(),delete this.itemUnbinds[e])},a.prototype.itemAdded=function(e,t){this.setHasContent(0<this.items.length(),e)},a.prototype.itemRemoved=function(e,t){this.setHasContent(0<this.items.length()),this.unsubscribe(e),this.unbindItem(e)},a.prototype.itemMoved=function(e,t,n){},a.prototype.supportsHasContent=function(){return!0},a.includedStates=[e.OrderStatus.EXCHANGE_ORDER,e.OrderStatus.WORKING_ORDER,e.OrderStatus.MONITOR_ORDER,e.OrderStatus.PENDING_INSERT_ORDER,e.OrderStatus.EXECUTED_ORDER,e.OrderStatus.OFFLINE_ORDER,e.OrderStatus.ORDER_REQUEST,e.OrderStatus.INACTIVE_ORDER,e.OrderStatus.DELETED_ORDER],a.activeStates=[e.OrderStatus.EXCHANGE_ORDER,e.OrderStatus.WORKING_ORDER,e.OrderStatus.OFFLINE_ORDER,e.OrderStatus.MONITOR_ORDER,e.OrderStatus.PENDING_INSERT_ORDER,e.OrderStatus.INACTIVE_ORDER,e.OrderStatus.ORDER_REQUEST],a}(e.TradingWidgetBase);e.OrderStackWidget=i;var r=function(){function t(e,t,n,i){this.target=e,this.cache=t,this.filterField=n,this.filterFunction=i,this.unbinds={}}return t.prototype.setSource=function(e){this.source.unbind(this),this.target.clear(),this.source=e,this.source.observe(this)},t.prototype.reInit=function(e){for(var t=0;t<e.length;t++)this.bindItem(e[t])},t.prototype.itemAdded=function(e,t){this.bindItem(e)},t.prototype.itemRemoved=function(e,t){this.unbindItem(e)},t.prototype.itemMoved=function(e,t,n){},t.prototype.bindItem=function(t){var n=this,i=this.cache.customBind(t,this.filterField,e.BindingFactory.createInlineBinding(function(e){n.filterFunction(e)?-1==n.target.indexOf(t)&&n.target.push(t):n.target.remove(t)}));this.unbinds[t]=i},t.prototype.unbindItem=function(e){this.unbinds.hasOwnProperty(e)&&(this.unbinds[e](),delete this.unbinds[e])},t}()}(Infront||(Infront={})),function(e){var t=function(){function t(){this.overlayVisible=new e.Observable,this.overlayVisible.set(!1);var t=new e.LanguageOptions;this.languageHandler=new e.Language(t),this.buildUI()}return t.prototype.show=function(){this.overlayVisible.set(!0),InfrontUtil.addClassName(document.body,"cell-fixed")},t.prototype.hide=function(){this.overlayVisible.set(!1),InfrontUtil.removeClassName(document.body,"cell-fixed")},t.prototype.getCloseBtn=function(){return this.closeBtn},t.prototype.getBox=function(){return this.box},t.prototype.buildUI=function(){var t=this,n=e.WidgetDOMFactory.create_Overlay_DOM(document.body,this.overlayVisible,function(e){return t.hide()},this.languageHandler);this.box=n.lightbox,this.closeBtn=n.closeBtn},t}();e.Overlay=t}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxItems=3,t}return __extends(t,e),t}(e.TradingWidgetOptions);e.PortfolioRankingWidgetOptions=t;var n=function(n){function a(t,r,s){var o=n.call(this,t,r,a.kLanguageKey,s)||this,l=e.PositionFields.BASE_PL_TODAY();return l.applySpecAndDefaults(null,o.languageHandler),o.winners=new e.ContinouslySortedColumnCacheKeyObservableArray(l,e.SortOrder.Desc,o.infront.getCache()),o.losers=new e.ContinouslySortedColumnCacheKeyObservableArray(l,e.SortOrder.Asc,o.infront.getCache()),o.winnersCap=new e.ObservableArrayCap(o.winners,o.options.maxItems,a.kPaddingItem),o.losersCap=new e.ObservableArrayCap(o.losers,o.options.maxItems,a.kPaddingItem),o.winnersSync=new e.ObservableArraySync(o.winners),o.losersSync=new e.ObservableArraySync(o.losers),o.unbindingManager=new e.UnbindingManager,o.biggestLoser=new i(o.infront.getCache(),o.losers),o.biggestWinner=new i(o.infront.getCache(),o.winners),o.biggestAbsValue=new e.ComputedObservable([o.biggestLoser.topValue,o.biggestWinner.topValue],function(e){return Math.max(Math.abs(e[0]),Math.abs(e[1]))}),o.subscribes.addField(e.QuoteFields.PCT_CHANGE),o}return __extends(a,n),a.prototype.returnDefaultWidgetOptions=function(){return new t},a.prototype.newInit=function(){n.prototype.newInit.call(this)},a.prototype.subscribe=function(e){this.subscribes.addInstrument(this.getInstrumentFromCache(e))},a.prototype.unsubscribe=function(e){this.subscribes.removeInstrument(this.getInstrumentFromCache(e))},a.prototype.newBuildUI=function(){this.elements=e.WidgetDOMFactory.create_WPortfolioRanking_DOM(this.element,this.widgetTitle),n.prototype.newBuildUI.call(this)},a.prototype.createBindings=function(){var t=this,i=new e.ArrayBinding(this.elements.leftColumn,this,this),r=new e.ArrayBinding(this.elements.rightColumn,this,this);this.rebindUI=function(){t.winnersCap.observe(i),t.losersCap.observe(r)},this.unbinds.push(function(){t.winnersCap.unbind(i),t.losersCap.unbind(r)}),n.prototype.createBindings.call(this)},a.prototype.removeBindings=function(){this.winnersSyncUnbind&&(this.winnersSyncUnbind(),this.winnersSyncUnbind=null),this.losersSyncUnbind&&(this.losersSyncUnbind(),this.losersSyncUnbind=null),n.prototype.removeBindings.call(this)},a.prototype.newDestroyUI=function(){this.winnersSyncUnbind&&(this.winnersSyncUnbind(),this.winnersSyncUnbind=null),this.losersSyncUnbind&&(this.losersSyncUnbind(),this.losersSyncUnbind=null),this.winners.clear(),this.losers.clear(),this.unbindingManager.unbind(this.element,!0),n.prototype.newDestroyUI.call(this)},a.prototype.getInstrumentFromCache=function(t){var n=this.infront.getCache().get(t,[e.MWSConstants.instrument,e.MWSConstants.feed]),i=this.infront.getCache().get(t,[e.MWSConstants.instrument,e.MWSConstants.ticker]);return new e.Instrument(n,i)},a.prototype.createRow=function(t,n){var i=this.infront.getCache(),r=e.CacheKeyFactory.createInstrumentKey(this.getInstrumentFromCache(t)),s=document.createElement("div");s.className="cell-w-portfolio-ranking__item";var o=document.createElement("div");s.appendChild(o),o.className="cell-w-portfolio-ranking__top-row  cell-clear";var l=document.createElement("div");o.appendChild(l),l.className="cell-w-portfolio-ranking__top-row--ticker";var c=document.createElement("div");o.appendChild(c),c.className="cell-w-portfolio-ranking__top-row--values";var d=document.createElement("span");c.appendChild(d),d.className="cell-10-margin-right";var u=document.createElement("span");c.appendChild(u);var h=document.createElement("div");s.appendChild(h),h.className="cell-w-portfolio-ranking__bottom-row  cell-clear";var p=document.createElement("span");o.appendChild(p),p.className="cell-w-portfolio-ranking__bottom-row--change-value";var m=document.createElement("span");p.appendChild(m),p.appendChild(document.createTextNode(" "));var g=document.createElement("span");p.appendChild(g);var f=e.BindingFactory.createShortenNumberBinding(g,"innerHTML",!0);this.unbindingManager.registerUnbind(g,i.customBind(t,e.TradingManager.kBasePLToday,f));var v=document.createElement("div");if(h.appendChild(v),v.className="cell-w-portfolio-ranking__bottom-row--bar",t!=a.kPaddingItem){var y=e.BindingFactory.createValueBinding(l);this.unbindingManager.registerUnbind(l,i.customBind(t,[e.MWSConstants.instrument,e.MWSConstants.ticker],y));var b=e.BindingFactory.createPercentBinding(d,2,void 0,!0);this.unbindingManager.registerUnbind(d,i.customBind(r,e.MWSConstants.pct_change,b));var T=e.BindingFactory.createNumberFormatValueBinding(u,"innerHTML",2,!0);this.unbindingManager.registerUnbind(u,i.customBind(r,e.MWSConstants.last,T)),m.innerHTML=this.infront.getBaseCurrency();var S=new e.ObservableBinding,C=i.customBind(t,e.TradingManager.kBasePLToday,S),I=new e.ComputedObservable([S,this.biggestAbsValue],function(e){return InfrontUtil.isNumber(e[0])&&InfrontUtil.isNumber(e[1])?0==e[1]?100:Math.abs(e[0])/e[1]*100:0}),_=e.BindingFactory.createHTMLAttributeBinding(v,"style",function(e){return"width: "+e.toString()+"%;"});I.observe(_),this.unbindingManager.registerUnbind(v,function(){I.unbind(_),I.unbindAll(),C()})}else InfrontUtil.addClassName(s,"cell-w-portfolio-ranking__item--empty"),l.innerHTML="&nbsp;",m.innerHTML="&nbsp;";return s},a.prototype.htmlElementTreeAdded=function(e,t,n){this.subscribe(t)},a.prototype.htmlElementTreeRemoved=function(e,t,n){this.unsubscribe(t),this.unbindingManager.unbind(e,!0)},a.prototype.htmlElementTreeMoved=function(e,t,n,i){},a.prototype.currentPortfolioChanged=function(e){this.removeBindings(),this.winners.clear(),this.losers.clear()},a.prototype.currentPortfolioReady=function(t){var n=this;new r(this.infront.getCache(),e.CacheKeyFactory.createPortfolioPositionsKey(t),[e.TradingManager.kBasePLToday],function(e){return InfrontUtil.isNumber(e)},function(){var i=new e.CacheBasedFilter(n.infront.getCache(),n.winnersSync,[e.TradingManager.kBasePLToday],function(e,t){return e},function(e){return InfrontUtil.isNumber(e[0])&&0<=e[0]}),r=new e.CacheBasedFilter(n.infront.getCache(),n.losersSync,[e.TradingManager.kBasePLToday],function(e,t){return e},function(e){return InfrontUtil.isNumber(e[0])&&e[0]<0}),a=e.CacheKeyFactory.createPortfolioPositionsKey(t),s=n.infront.getCache().bindToArray(a,i);n.winnersSyncUnbind=function(){s(),i.destroy()};var o=n.infront.getCache().bindToArray(a,r);n.losersSyncUnbind=function(){o(),r.destroy()},n.rebindUI()})},a.kLanguageKey="portfolioRanking",a.kPaddingItem="PortfolioRankingWidgetPADDING",a}(e.TradingWidgetBase);e.PortfolioRankingWidget=n;var i=function(){function t(t,n){this.cache=t,this.topValue=new e.ObservableBinding,this.array=n,this.array.observe(this)}return t.prototype.setTopItem=function(t){this.topElementUnbind&&(this.topElementUnbind(),this.topElementUnbind=null),t&&(this.topElementUnbind=this.cache.customBind(t,e.TradingManager.kBasePLToday,this.topValue))},t.prototype.reInit=function(e){e&&0<e.length&&this.setTopItem(e[0])},t.prototype.itemAdded=function(e,t){0==t&&this.setTopItem(e)},t.prototype.itemRemoved=function(e,t){0==t&&(0<this.array.length()?this.setTopItem(this.array.item(0)):this.setTopItem(null))},t.prototype.itemMoved=function(e,t,n){0==n&&this.setTopItem(e)},t}();e.TopElementObserver=i;var r=function(){function t(e,t,n,i,r){this.cache=e,this.monitorField=n,this.evaluateFunc=i,this.ready=r,this.readyMap={},this.unbindMap={},this.arrayUnbind=this.cache.bindToArray(t,this)}return t.prototype.check=function(){var e=this,t=!0;for(var n in this.readyMap)if(this.readyMap.hasOwnProperty(n)&&!this.readyMap[n]){t=!1;break}t&&(InfrontUtil.setZeroTimeout(function(){for(var t in e.unbindMap)e.unbindMap.hasOwnProperty(t)&&(e.unbindMap[t](),delete e.unbindMap[t])}),this.arrayUnbind&&(this.arrayUnbind(),this.arrayUnbind=null),this.ready&&(this.ready(),this.ready=null))},t.prototype.register=function(t){var n=this;this.readyMap[t]=!1;var i=this.cache.customBind(t,this.monitorField,e.BindingFactory.createInlineBinding(function(e){n.readyMap[t]=n.evaluateFunc(e),n.check()}));this.unbindMap[t]=i},t.prototype.reInit=function(e){for(var t=0;t<e.length;t++)this.register(e[t])},t.prototype.itemAdded=function(e,t){},t.prototype.itemRemoved=function(e,t){},t.prototype.itemMoved=function(e,t,n){},t}()}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="VALUE",t}return __extends(t,e),t}(e.ValueWidgetOptions);e.PortfolioSingleValueWidgetOptions=t;var n=function(n){function i(e,t,i){var r=n.call(this,e,t,i)||this;return r.infrontUI.AddTradingManagerObserver(r),r.options.valueName?r.infront.getTradingManager().needValue(r.options.valueName):InfrontUtil.errorLog("Attempting to create PortfolioSingleValueWidget without valueName",r.options),r}return __extends(i,n),i.prototype.newInit=function(){this.newDestroyUI(),n.prototype.newInit.call(this)},i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.availablePortfoliosChanged=function(e){},i.prototype.currentPortfolioChanged=function(e){},i.prototype.currentPortfolioReady=function(e){(null==e?"":e.name)!=this.portfolioName&&(this.portfolioName=null==e?"":e.name,this.rowId=e,this.newInit())},i.prototype.newBuildUI=function(){var e=this;n.prototype.newBuildUI.call(this),null!=this.options.onClick&&this.addEventListener(this.rootEl,"click",function(t){t.stopPropagation(),e.options.onClick()})},i.prototype.finalize=function(){this.infrontUI.RemoveTradingManagerObserver(this),n.prototype.finalize.call(this)},i.prototype.assignCacheKey=function(){this.portfolioName&&this.options.valueName&&(this.cacheKey=e.CacheKeyFactory.createPotentialValueKey(this.portfolioName,this.options.valueName))},i}(e.ValueWidget);e.PortfolioSingleValueWidget=n;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.base=!1,t}return __extends(t,e),t}(e.ValueWidgetOptions);e.TradingPowerWidgetOptions=i;var r=function(t){function n(e,i,r){var a=this;return r.base?(r.name=InfrontConstants.Fields.BASE_TRADING_POWER,r.currencyField=n.kBaseCurrencyCacheField):r.name=InfrontConstants.Fields.TRADING_POWER,(a=t.call(this,e,i,r)||this).infrontUI.AddTradingManagerObserver(a),a}return __extends(n,t),n.prototype.newInit=function(){this.newDestroyUI(),t.prototype.newInit.call(this)},n.prototype.returnDefaultWidgetOptions=function(){return new i},n.prototype.newBuildUI=function(){t.prototype.newBuildUI.call(this)},n.prototype.availablePortfoliosChanged=function(e){},n.prototype.currentPortfolioChanged=function(e){this.updatePortfolio(e)},n.prototype.currentPortfolioReady=function(e){this.updatePortfolio(e)},n.prototype.updatePortfolio=function(e){this.portfolio!=e&&(this.portfolio=e,this.rowId=e,this.newInit())},n.prototype.assignCacheKey=function(){this.cacheKey=this.portfolio?e.CacheKeyFactory.createPortfolioDataKey(this.portfolio):void 0},n.prototype.finalize=function(){this.infrontUI.RemoveTradingManagerObserver(this),t.prototype.finalize.call(this)},n.kBaseCurrencyCacheField="base_currency",n}(e.ValueWidget);e.TradingPowerWidget=r}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.TradingWidgetOptions);e.PortfolioValuesWidgetOptions=t;var n=function(n){function i(t,i,r){var a=n.call(this,t,i,"portfolioValues",r)||this;if(a.options.values)for(var s=0;s<a.options.values.length;s++)a.options.values[s]=a.options.values[s].toLowerCase();if(a.items=new e.SortedObservableArray(function(e,t){if(a.options.values){var n=a.infront.getCache().get(e,"key"),i=a.infront.getCache().get(t,"key");return a.options.values.indexOf(n)-a.options.values.indexOf(i)}return 0}),a.sync=new e.ObservableArraySync(a.items),a.filter=new e.CacheBasedFilter(a.infront.getCache(),a.sync,["key","value"],function(e,t){return e},function(e){var t=!0;return InfrontUtil.isString(e[0])?a.options.values&&(t=-1<a.options.values.indexOf(e[0])):t=!1,a.options.filter&&(t=t&&a.options.filter(e[0],e[1])),t}),a.options.values)for(s=0;s<a.options.values.length;s++)a.infront.getTradingManager().needValue(a.options.values[s]);return a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newInit=function(){n.prototype.newInit.call(this)},i.prototype.newBuildUI=function(){var t=this,i=e.WidgetDOMFactory.create_WPortfolioValues_DOM(this.element,this.widgetTitle),r=i.tbody;i.thead.appendChild(this.createNoTradingContentDisplay());var a=new e.ArrayBinding(r,this,null);this.items.observe(a),this.unbinds.push(function(){t.items.unbind(a)}),n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){this.syncUnbind&&(this.syncUnbind(),this.syncUnbind=null),this.items.clear(),n.prototype.newDestroyUI.call(this)},i.prototype.onTradingConnected=function(){this.setNoTradingContentDisplay(!0),this.options.tradingLoginCallback&&this.options.tradingLoginCallback(!0)},i.prototype.onTradingDisconnected=function(){this.setNoTradingContentDisplay(!1),this.options.tradingLoginCallback&&this.options.tradingLoginCallback(!1)},i.prototype.createRow=function(t,n){var i,r;r=t,i=this.infront.getCache().get(t,"key");var a=this.infrontUI.languageHandler.get("portfolioValues",i);return a||(a=this.infront.getCache().get(t,"name")),e.WidgetDOMFactory.create_WPortfolioValuesRow_DOM(a,"total_base_pl_today_pct"==i,this.infront.getCache(),r)},i.prototype.htmlElementTreeAdded=function(e,t,n){},i.prototype.htmlElementTreeRemoved=function(t,n,i){e.WidgetDOMFactory.unbindAll(t)},i.prototype.htmlElementTreeMoved=function(e,t,n,i){},i.prototype.currentPortfolioChanged=function(t){var n=null==t?"":t.name;this.currentPortfolio&&this.currentPortfolio.name==n||(this.currentPortfolio=t,this.syncUnbind&&this.syncUnbind(),this.filter.reset(),this.items.clear(),null!=t&&(this.syncUnbind=this.infront.getCache().bindToArray(e.CacheKeyFactory.createPortfolioValuesKey(this.currentPortfolio),this.filter)))},i}(e.TradingWidgetBase);e.PortfolioValuesWidget=n}(Infront||(Infront={})),function(e){var t,n=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.layout=e.ListLayout.CARD,n.displayRowColumns=["AVG_PRICE","LAST","CURRENCY","INVESTED"],n}return __extends(n,t),n}(e.PositionsWidgetOptions);e.PositionsFlexWidgetOptions=n,(t=e.TableState||(e.TableState={}))[t.INITIALIZING=0]="INITIALIZING",t[t.UI_INITIALIZED=1]="UI_INITIALIZED",t[t.INITIALIZING_TRADING=2]="INITIALIZING_TRADING",t[t.UI_TRADING_INITIALIZED=3]="UI_TRADING_INITIALIZED",t[t.RELOADING=4]="RELOADING";var i=function(t){function i(n,i,r,a){var s=this,o=[[e.MWSConstants.instrument,e.MWSConstants.market]];null!=a.instrumentSubtypes&&0<a.instrumentSubtypes.length||null!=a.hideInstrumentSubtypes&&0<a.hideInstrumentSubtypes.length?(o.push([e.MWSConstants.instrument,e.MWSConstants.instrument_type]),o.push([e.MWSConstants.instrument,e.MWSConstants.instrument_subtype])):(null!=a.instrumentTypes&&0<a.instrumentTypes.length||null!=a.hideInstrumentTypes&&0<a.hideInstrumentTypes.length)&&o.push([e.MWSConstants.instrument,e.MWSConstants.instrument_type]);var l=new e.LanguageOptions;if(l.language="no",new e.Language(l),null!=(s=t.call(this,n,"positions",r,a,o,function(e){return s.filter(e)})||this).columnManager.findColumn("PL_TODAY")&&s.infront.getTradingManager().enableTodaysPL(),s.options.columns.push(s.createTickerColumn()),s.itemCacheKeys=[],s.mode=new e.Observable(s.options.layout),s.displayColumns=[],s.infrontUI=r,s.options.displayRowColumns&&0<s.options.displayRowColumns.length)for(var c=s.columnManager.columns,d=0;d<s.options.displayRowColumns.length;d++)s.displayColumns.push(s.createColumn(s.options.displayRowColumns[d],s.infrontUI.languageHandler)),c=c.filter(function(e){var t=s.options.displayRowColumns[d].name?s.options.displayRowColumns[d].name.toUpperCase():s.options.displayRowColumns[d].toUpperCase();return e.name!==t}),s.columnManager.columns=c;return s.isEmpty=new e.Observable(!0),s.expandables=[],s.unbindingManager=new e.UnbindingManager,s.initializeOrders(),s}return __extends(i,t),i.prototype.createTickerColumn=function(){return{name:"TICKER",hover:"FULL_NAME",className:"cell-text-left",type:"computed",flag:!0,computeFields:["TICKER","FULL_NAME"],compute:function(e,t){return t[0]&&t[0].startsWith("0P0")?t[1]:t[0]}}},i.prototype.initializeOrders=function(){var t=this;this.ordersfilterFields=["order_status","order_type","algo_id",e.MWSConstants.volume_filled],this.orderItems=new e.ObservableArray,this.ordersSync=new e.ObservableArraySync(this.orderItems);var n=new e.ArrayBinding(null,this,null);this.unbinds.push(function(){t.orderItems.unbind(n)}),this.orderItems.observe(this)},i.prototype.setLayout=function(e){for(this.options.layout=e,this.mode.set(e);this.element.hasChildNodes();)this.element.removeChild(this.element.lastChild);this.newBuildUI()},i.prototype.newBuildUI=function(){var t=this,n=e.WidgetDOMFactory.create_WTradingTableFlex_DOM(this.element,this.showPortfolioSelect?null:this.widgetTitle,this.portfolioNameObs,this.showPortfolio,this.showPortfolioSelect,this.options.showDeleteAll,this.deleteAllClick,this.options.titleClick,this.isEmpty,this.mode,this.infrontUI.languageHandler);InfrontUtil.isString(this.options.className)&&(this.element.className=this.options.className);var i=n.thead,r=n.tbody,a=n.portfolioContainer;i.appendChild(e.ColumnManager.createCompactCardHeader(this.columnManager,this.displayColumns));var s=new e.ArrayBinding(r,this,this);this.items.observe(s),this.unbinds.push(function(){t.items.unbind(s)}),this.showPortfolioSelect&&this.createPortfolioSelect(a),this.progressIndicator=new e.ProgressIndicator(n.progressIndicator),this.createBindings(),this.widgetState=e.WidgetState.UiBuilt,this.newSubscribe()},i.prototype.linkEvent=function(e){},i.prototype.returnDefaultWidgetOptions=function(){return new n},i.prototype.createArrayCacheKey=function(t){return e.CacheKeyFactory.createPortfolioPositionsKey(t)},i.prototype.filter=function(e){var t=this.filterMarket(e[0]);return 2==e.length?t=t&&this.filterInstrumentType(e[1]):2<e.length&&(t=t&&this.filterInstrumentType(e[1],e[2])),t},i.prototype.filterMarket=function(e){return this.options.loans?e==i.kLoanMarket:e!=i.kLoanMarket},i.prototype.filterInstrumentType=function(e,t){var n=null!=this.options.hideInstrumentTypes&&-1<this.options.hideInstrumentTypes.indexOf(e)||null!=this.options.hideInstrumentSubtypes&&-1<this.options.hideInstrumentSubtypes.indexOf(t);return(null==this.options.instrumentTypes||-1<this.options.instrumentTypes.indexOf(e))&&(null==this.options.instrumentSubtypes||-1<this.options.instrumentSubtypes.indexOf(t))&&!n},i.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n,[e.FieldSource.Position,e.FieldSource.Historical,e.FieldSource.Snapshot,e.FieldSource.Unknown])},i.prototype.itemAdded=function(n,i){this.iterateCacheItems(e.MWSConstants.instrument_type,null,e.MWSConstants.instrument,null,n),-1<n.indexOf(e.MWSConstants.order+"_"+this.portfolioNameObs.get())||t.prototype.itemAdded.call(this,n,i)},i.prototype.createOrderInfoElement=function(e){for(var t=this.getRowId(e),n=0;n<this.expandables.length;n++)if(t.feed==this.expandables[n].instrument.feed&&t.ticker===this.expandables[n].instrument.ticker){this.expandables[n];break}},i.prototype.createRow=function(t,n){var i,r=this.getRowId(t);switch(this.itemCacheKeys.push(t),this.columnManager.createComputedFieldsInCache(t,t),this.options.layout){case e.ListLayout.CARD:i=e.ColumnManager.createElementCardRowFromCache(this.options,this.columnManager,r,t,this.decimals[t],this.trCounter,this.displayColumns);break;case e.ListLayout.COMPACT:i=e.ColumnManager.createCompactCardSection(this.options,this.columnManager,r,t,this.decimals[t],this.trCounter,this.displayColumns);break;case e.ListLayout.DIV:case e.ListLayout.TABLE:default:i=e.ColumnManager.createElementRowFromCache(this.options,this.columnManager,r,t,this.decimals[t],this.trCounter)}return this.expandables.push({rowId:t,element:i}),this.trCounter++,i&&this.isEmpty.set(!1),i},i.prototype.onTradingConnected=function(){t.prototype.onTradingConnected.call(this)},i.prototype.toggleOptions=function(e){this.expandedAlert.get()===e?this.expandedAlert.set(null):this.expandedAlert.set(e)},i.prototype.currentPortfolioChanged=function(n){t.prototype.currentPortfolioChanged.call(this,n),null!=n&&(this.ordersUnbind=this.infront.getCache().bindToArray(e.CacheKeyFactory.createPortfolioOrdersKey(n),this.ordersSync))},i.prototype.currentPortfolioReady=function(n){t.prototype.currentPortfolioReady.call(this,n),this.ordersUnbind&&(this.ordersUnbind(),this.ordersUnbind=null),this.ordersUnbind=this.infront.getCache().bindToArray(e.CacheKeyFactory.createPortfolioOrdersKey(n),this.ordersSync)},i.kLoanMarket="Loan",i}(e.TradingTableWidgetBase);e.PositionsFlexWidget=i}(Infront||(Infront={})),function(e){var t=function(){function e(e){this.element=e,this.els=[],this.classes=[];for(var t=4;0<t;t--)this.classes.push("cell-preloader__box cell-preloader__box--"+t);this.delay=150,this.timeoutHandle=null,this.buildUI()}return e.prototype.observe=function(e){this.boundObservable=e,this.boundObservable.observe(this)},e.prototype.unbind=function(){this.boundObservable&&(this.boundObservable.unbind(this),this.boundObservable=null)},e.prototype.buildUI=function(){this.root=document.createElement("div"),this.root.className="cell-preloader";for(var e=0;e<4;e++)this.els.push(document.createElement("div"));this.apply(),this.root.appendChild(this.els[0]),this.root.appendChild(this.els[1]),this.root.appendChild(this.els[3]),this.root.appendChild(this.els[2]),this.root.style.visibility="hidden",this.element.appendChild(this.root)},e.prototype.start=function(){var e=this;null==this.timeoutHandle&&(this.root.style.visibility="visible",this.timeoutHandle=setTimeout(function(){return e.tick()},this.delay))},e.prototype.stop=function(){null!=this.timeoutHandle&&(this.root.style.visibility="hidden",clearTimeout(this.timeoutHandle),this.timeoutHandle=null)},e.prototype.tick=function(){var e=this;InfrontUtil.shiftArray(this.classes,!1),this.apply(),this.timeoutHandle=setTimeout(function(){return e.tick()},this.delay)},e.prototype.apply=function(){for(var e=0;e<this.els.length;e++)this.els[e].className=this.classes[e]},e.prototype.destroy=function(){this.unbind(),this.element.removeChild(this.root),this.root=null},e.prototype.valueUpdated=function(e){!0===e?this.start():this.stop()},e}();e.ProgressIndicator=t}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="LAST",t}return __extends(t,e),t}(e.ValueWidgetOptions);e.QuoteWidgetOptions=t;var n=function(e){function n(t,n,i){var r=e.call(this,t,n,i)||this;return r.rowId=r.options.instrument,r}return __extends(n,e),n.prototype.returnDefaultWidgetOptions=function(){return new t},n}(e.ValueWidget);e.QuoteWidget=n}(Infront||(Infront={})),function(e){var t,n,i,r,a,s;(n=t=e.RankingField||(e.RankingField={}))[n.LV_PCT_CHANGE=0]="LV_PCT_CHANGE",n[n.PCT_CHANGE=1]="PCT_CHANGE",n[n.TURNOVER=2]="TURNOVER",n[n.VOLUME=3]="VOLUME",(r=i=e.RankingPeriod||(e.RankingPeriod={}))[r.INTRADAY=0]="INTRADAY",r[r.ONE_WEEK=1]="ONE_WEEK",r[r.ONE_MONTH=2]="ONE_MONTH",r[r.ONE_YEAR=3]="ONE_YEAR",r[r.YTD=4]="YTD",(s=a=e.CustomRanking||(e.CustomRanking={}))[s.LARGE_CAP=0]="LARGE_CAP",s[s.MID_CAP=1]="MID_CAP",s[s.SMALL_CAP=2]="SMALL_CAP",s[s.FIRST_NORTH=3]="FIRST_NORTH",s[s.MAIN_INDEX=4]="MAIN_INDEX";var o=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.streaming=!0,r.rankingPeriod=i.INTRADAY,r.rankingField=t.PCT_CHANGE,r.sortOrder=e.SortOrder.Desc,r.customRanking=void 0,r.enablePeriodSelector=!0,r.columns=["TICKER","LAST","CHANGE","PCT_CHANGE","ONEXCH_VOLUME","ONEXCH_TURNOVER"],r}return __extends(r,n),r}(e.CommonListOptions);e.RankingWidgetOptions=o;var l=function(n){function r(r,a,s){var o=this,l="widgetTitleDefault";s.widgetTitle||(s.rankingField==t.PCT_CHANGE||s.rankingField==t.LV_PCT_CHANGE?l=s.sortOrder==e.SortOrder.Asc?"widgetTitleLosers":"widgetTitleWinners":s.rankingField==t.TURNOVER?l=s.sortOrder==e.SortOrder.Asc?l:"widgetTitleHighestTurnovers":s.rankingField==t.VOLUME&&(l=s.sortOrder==e.SortOrder.Asc?l:"widgetTitleHighestVolumes")),(o=n.call(this,r,a,"ranking",s,l)||this).options.enablePeriodSelector?(o.options.rankingField!=t.PCT_CHANGE&&o.options.rankingField!=t.LV_PCT_CHANGE&&IDS.log("RankingWidget: Only ranking by PCT_CHANGE or LV_PCT_CHANGE is supported when enablePeriodSelector is set to true. RankingField restored to Infront.RankingField.PCT_CHANGE"),o.options.rankingField=o.options.rankingField!=t.PCT_CHANGE&&o.options.rankingField!=t.LV_PCT_CHANGE?t.PCT_CHANGE:o.options.rankingField):o.options.rankingPeriod!=i.INTRADAY&&(o.options.rankingField=o.options.rankingField!=t.PCT_CHANGE&&o.options.rankingField!=t.LV_PCT_CHANGE?t.PCT_CHANGE:o.options.rankingField),o.decimals=e.UI.kDefaultDecimals,o.periods=[o.infrontUI.languageHandler.get("ranking","today"),o.infrontUI.languageHandler.get("ranking","lastWeek"),o.infrontUI.languageHandler.get("ranking","lastMonth"),o.infrontUI.languageHandler.get("ranking","lastYear"),o.infrontUI.languageHandler.get("ranking","ytd")],o.periodValues=[i.INTRADAY,i.ONE_WEEK,i.ONE_MONTH,i.ONE_YEAR,i.YTD],o.periodObserver=new e.SelectInputBinding,o.periodObserver.setSelected(o.options.rankingPeriod),o.periodObserver.observe(function(e){o.periodeSelected(e)});var c=o.columnManager.createQuoteOptions().fields,d=c.indexOf("LAST");return 0<=d&&c.splice(d,1),0<=(d=c.indexOf("TURNOVER"))&&c.splice(d,1),0<=(d=c.indexOf("PCT_CHANGE"))&&c.splice(d,1),o.subscribes.addFields(c),o.setListItems(),InfrontUtil.isNumber(o.options.rows)&&(o.cap=new e.ObservableArrayCap(o.items,o.options.rows),o.items.setCap(o.options.rows)),o.localCache={},o.linkController=new e.InstrumentListLinkControllerDelegate(o.infront.getCache()),o}return __extends(r,n),r.prototype.sortColumnChanged=function(e,t,n){},r.prototype.setColumnManager=function(){var t=this;this.currentPeriod=this.options.rankingPeriod,this.initColumns(),this.columnManager=new e.ColumnManager(this.options,this.infront,this.infrontUI,null,this.subscribes),this.columnManager.setLinkTriggerCallback(function(e,n,i){return t.linkEvent(i.instrument)})},r.prototype.setListItems=function(){var t=this.columnManager.findColumn(this.getRankingFieldName().snapshotField);this.itemsToShow=new e.ContinouslySortedCachedInstrumentObservableArray(t,this.getTickerField(),this.infront.getCache(),this.options.sortOrder),this.items=this.itemsToShow},r.prototype.returnDefaultWidgetOptions=function(){return new o},r.prototype.newInit=function(){var e=this;this.setStreaming(),this.getFeedMetadata(this.options.feed,function(t){t&&InfrontUtil.isNumber(t.decimals)&&(e.decimals=t.decimals),n.prototype.newInit.call(e)})},r.prototype.setStreaming=function(){this.isStreaming=this.options.streaming&&this.infront.isStreaming()},r.prototype.newBuildUI=function(){var t=this,i=e.WidgetDOMFactory.create_WRanking_DOM(this.element,this.widgetTitle,!this.isStreaming,this.options.navButton,this.navButtonClick,this.options.enablePeriodSelector,this.periods,this.periodObserver,this.infrontUI.languageHandler);this.periodObserver.setSelected(this.options.rankingPeriod),i.thead.appendChild(this.createHeaderRow());var r=new e.ArrayBinding(i.tbody,this,this);this.cap?(this.cap.observe(r),this.unbindingManager.registerUnbind(i.tbody,function(){t.cap.unbind(r)})):(this.items.observe(r),this.unbindingManager.registerUnbind(i.tbody,function(){t.items.unbind(r)})),this.progressIndicator=new e.ProgressIndicator(this.element),n.prototype.newBuildUI.call(this)},r.prototype.newSubscribe=function(){var t=this;this.streamingUnsub&&(this.streamingUnsub(),this.streamingUnsub=null),this.items.clear();var i=this.columnManager.findColumn(this.getRankingFieldName().snapshotField);if(this.items.setSortingField(i,this.options.sortOrder),this.isStreaming){var r=new e.RankedListOptions;r.sortOrder=this.getSortOrder(),r.onError=InfrontUtil.errorLogCallback,r.onData=function(e){t.setInstruments(e,!0)},this.streamingUnsub=this.infront.rankedListSubscription(this.options.feed,r)}else{var a=[],s=new InfrontUtil.MultiCallbackHandler(function(){t.setInstruments(a)}).addCallbackWithError(function(e){for(var n=t.infront.getCache().getSnapshotOnDataCallback(),i=e,r=0;r<i.length;r++)n(i[r]);t.isStreaming||(a=i)},InfrontUtil.errorLogCallback),o=new e.RankedListOptions;o.fields=this.columnManager.createQuoteOptions().fields,-1==o.fields.indexOf("HIST_PERFORMANCE")&&o.fields.push("HIST_PERFORMANCE"),o.sortOrder=this.getSortOrder(),this.options.instrumentTypes&&(o.instrumentTypes=this.options.instrumentTypes),this.options.chain&&(o.chain=this.options.chain),o.onData=s.callback,o.onError=s.error,this.infront.rankedList(this.options.feed,o)}this.columnManager.subscribe(),n.prototype.newSubscribe.call(this)},r.prototype.newUnsubscribe=function(){this.columnManager.unsubscribe(),this.streamingUnsub&&(this.streamingUnsub(),this.streamingUnsub=null),this.subscribes.removeAllFields(),n.prototype.newUnsubscribe.call(this)},r.prototype.getHistoryColumnPrefix=function(){var e;switch(this.currentPeriod){case i.INTRADAY:e="";break;case i.ONE_WEEK:e="ONE_W_";break;case i.ONE_MONTH:e="ONE_M_";break;case i.ONE_YEAR:e="ONE_Y_";break;case i.YTD:e="YTD_"}return e},r.prototype.initColumns=function(){var e;this.histColumns={},this.turnOverCol={index:-1,colName:""},this.pctChangeColumn=this.turnOverCol,this.volumeColumn=this.turnOverCol;for(var t=[],n=this.getHistoryColumnPrefix(),r=0;r<this.options.columns.length;r++){var a=this.options.columns[r];switch(e=InfrontUtil.isString(a)?a:a.name){case"CHANGE":case"HIGH":case"LOW":case"PREVIOUS_CLOSE":this.histColumns[r]=e;break;case"PCT_CHANGE":this.pctChangeColumn={index:r,colName:e},this.histColumns[r]=e;break;case"LV_PCT_CHANGE":this.pctChangeColumn={index:r,colName:e},this.histColumns[r]="PCT_CHANGE";break;case"ONEXCH_TURNOVER":case"TURNOVER":this.turnOverCol={index:r,colName:e};break;case"ONEXCH_VOLUME":case"ACC_VOLUME":case"VOLUME":this.volumeColumn={index:r,colName:e}}if(this.currentPeriod==i.INTRADAY)t.push(a);else{var s=a;this.histColumns[r]&&(InfrontUtil.isString(s)?s=n+this.histColumns[r]:s.name=n+this.histColumns[r]),t.push(s)}}this.options.columns=t},r.prototype.updateHistColumns=function(){var e=this.getHistoryColumnPrefix();for(var t in this.histColumns)this.removeColumn(Number(t)),this.insertColumn(e+this.histColumns[t],Number(t))},r.prototype.setInstruments=function(t,n){void 0===n&&(n=!1);for(var r,a=[],s=function(t){var n=new e.Instrument(t.instrument.feed,t.instrument.ticker);return n[e.MWSConstants.last]=t.last,n[e.MWSConstants.turnover]=t.turnover,n[e.MWSConstants.change]=t.change,n[e.MWSConstants.pct_change]=t.pct_change,n},o=0;o<t.length;o++){var l=t[o];switch(l.operation){case IDS.RankOperation.InsertOrUpdate:if(r=s(l),null==this.items.find(function(e){return r.equals(e)})){if(this.currentPeriod!=i.INTRADAY||!this.isStreaming){var c=e.CacheKeyFactory.createInstrumentKey(r);this.localCache[c]={instrument:r}}this.items.push(r),a.push(r)}break;case IDS.RankOperation.Delete:r=s(l);for(var d=this.items.data.length-1;-1<d;d--){var u=this.items.data[d];if(u.ticker===r.ticker&&u.feed==r.feed){this.items.removeItemAt(d),this.currentPeriod==i.INTRADAY&&this.isStreaming||(c=e.CacheKeyFactory.createInstrumentKey(r),delete this.localCache[c]);break}}break;case IDS.RankOperation.DeleteAll:0<this.items.length()&&this.subscribes.resetSubscriptions(),this.currentPeriod==i.INTRADAY&&this.isStreaming||(this.localCache={})}}n&&(this.subscribes.addInstruments(a),this.subscribes.removeInstruments([]))},r.prototype.newDestroyUI=function(){this.streamingUnsub&&(this.streamingUnsub(),this.streamingUnsub=null),this.unbindingManager.unbind(this.element,!0),n.prototype.newDestroyUI.call(this)},r.prototype.createRow=function(t,n){var i=e.CacheKeyFactory.createInstrumentKey(t);return this.isStreaming||this.infront.snapshot(t,this.columnManager.getSubscriptionFields()),this.createElementRowFromCache(t,i,this.decimals)},r.prototype.rowClicked=function(t){if(this.options.onInstrumentSelected){var n=e.CacheKeyFactory.createInstrumentKey(t);this.options.onInstrumentSelected(this.infront.getCache().getInstrument(n))}},r.prototype.linkEvent=function(e){this.linkController.instrumentClicked(e)},r.prototype.getColumnManager=function(){return this.columnManager},r.prototype.periodeSelected=function(e){-1<e&&this.currentPeriod!=this.periodValues[e]&&(this.items.clear(),this.columnManager.unsubscribe(),this.currentPeriod=this.periodValues[e],this.updateHistColumns(),this.newSubscribe())},r.prototype.getSortOrder=function(){var t=this.getRankingFieldName(),n=this.options.sortOrder==e.SortOrder.Desc?"DESC":"ASC",i=t.rankingField;if(null!=this.options.customRanking)switch(this.options.customRanking){case a.LARGE_CAP:i="CUST_1";break;case a.MID_CAP:i="CUST_2";break;case a.SMALL_CAP:i="CUST_3";break;case a.FIRST_NORTH:i="CUST_4";break;case a.MAIN_INDEX:i="CUST_5"}return i+"_"+n},r.prototype.getTickerField=function(){return this.columnManager.findColumn(e.MWSConstants.ticker.toUpperCase())||null},r.prototype.getRankingFieldName=function(){var e,n;if(this.options.rankingField==t.TURNOVER&&(-1!==this.turnOverCol.index?n=e=this.turnOverCol.colName:this.options.rankingField=t.VOLUME),this.options.rankingField==t.VOLUME&&(-1!==this.volumeColumn.index?n=e=this.volumeColumn.colName:this.options.rankingField=t.PCT_CHANGE),this.options.rankingField==t.PCT_CHANGE||this.options.rankingField==t.LV_PCT_CHANGE){var r=this.getHistoryColumnPrefix();n=e=-1!==this.pctChangeColumn.index?r+(this.currentPeriod==i.INTRADAY?this.pctChangeColumn.colName:"PCT_CHANGE"):r+(this.options.rankingField==t.LV_PCT_CHANGE&&this.currentPeriod==i.INTRADAY?"LV_PCT_CHANGE":"PCT_CHANGE")}return{rankingField:e,snapshotField:n}},r.prototype.htmlElementTreeAdded=function(e,t,n){},r.prototype.htmlElementTreeRemoved=function(e,t,n){this.unbindingManager.unbind(e,!0)},r.prototype.htmlElementTreeMoved=function(e,t,n,i){},r.prototype.link=function(e){this.linkController.link(e)},r.prototype.unlink=function(e){this.linkController.unlink(e)},r}(e.CommonListWidgetBase);e.RankingWidget=l}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.WidgetOptions);e.ScreenerActiveFiltersWidgetOptions=t;var n=function(){function t(t,n,i){this.header=new e.Observable,this.activeFilters=new e.ObservableArray,this.activeFiltersCount=new e.Observable,this.filterGroup=n;var r=function(){n.unselectAllFilterParams()},a=function(){n.toggleExpand()},s=function(e){n.unselectFilterParam(e)};if(this.header.set(n.header),n instanceof e.RangeSelectFilter&&n.activeFilterType==e.FilterTypeEnum.RangeSelect)this.filterElement=e.WidgetDOMFactory.create_CScreenerActiveRangeFilterGroup_DOM(t,this.header,n.startPointLabel,n.endPointLabel,n.activeFilterRangeSeparatorLabel,a,r,s);else if(n.activeFilterSelectionCount){var o=" "+i.languageHandler.get("screenerActiveFilters","selected");this.filterElement=e.WidgetDOMFactory.create_CScreenerActiveFilterShowCountGroup_DOM(t,this.header,this.activeFilters.lengthObservable,o,a,r,s)}else this.filterElement=e.WidgetDOMFactory.create_CScreenerActiveFilterGroup_DOM(t,this.header,this.activeFilters,a,r,s)}return t.prototype.removeGroup=function(){this.filterGroup.unselectAllFilterParams()},t.prototype.destroy=function(){this.filterElement.parentElement.removeChild(this.filterElement)},t}(),i=function(t){function n(n,i,r){var a=t.call(this,n,i,r)||this;return a.activeFilters.replaceWith([i.selectedFilter]),!i.header&&i.selectedFilter&&(a.headerValBinding=e.BindingFactory.createInlineBinding(function(e){return a.header.set(e)}),i.selectedFilter.text.observe(a.headerValBinding)),a}return __extends(n,t),n.prototype.update=function(t){var n=this;this.activeFilters.replaceWith([t.selectedFilter]),this.headerValBinding||t.header||!t.selectedFilter||(this.headerValBinding=e.BindingFactory.createInlineBinding(function(e){return n.header.set(e)}),t.selectedFilter.text.observe(this.headerValBinding))},n}(e.ActiveFilterDisplayComponent=n);e.ActiveSingleSelectFilterDisplay=i;var r=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r.activeFilters.replaceWith(n.selectedFilters),r}return __extends(t,e),t.prototype.update=function(e){this.activeFilters.replaceWith(e.selectedFilters)},t}(n);e.ActiveMultiSelectFilterDisplay=r;var a=function(n){function a(t,i,r){var s=n.call(this,t,i,a.kLanguageKey,r)||this;return s.activeFilters={},s.showRemoveAllFilters=new e.Observable(!1),s.targetManager=new InfrontUtil.LinkTargetManager,s}return __extends(a,n),a.prototype.returnDefaultWidgetOptions=function(){return new t},a.prototype.newBuildUI=function(){var t=this;this.filterContainer=e.WidgetDOMFactory.create_WScreenerActiveFilter_DOM(this.element,this.options.widgetTitle,this.showRemoveAllFilters,function(){t.removeAllFiltersClicked()},this.languageHandler)},a.prototype.addOrUpdateFilter=function(t){t.hideFromActiveFilters||(this.activeFilters[t.id]?t.hasSelected?this.activeFilters[t.id].update(t):this.removeFilter(t):t.hasSelected&&(t instanceof e.MultiSelectFilter||t instanceof e.RadioSelectFilter||t instanceof e.RangeSelectFilter?this.activeFilters[t.id]=new r(this.filterContainer,t,this.infrontUI):this.activeFilters[t.id]=new i(this.filterContainer,t,this.infrontUI)),this.showRemoveAllFilters.set(0<Object.getOwnPropertyNames(this.activeFilters).length))},a.prototype.removeAllFiltersClicked=function(){for(var e=0,t=Object.getOwnPropertyNames(this.activeFilters);e<t.length;e++){var n=t[e];this.activeFilters[n].removeGroup()}},a.prototype.removeFilter=function(e,t){void 0===t&&(t=!1),this.activeFilters[e.id].destroy(),delete this.activeFilters[e.id],this.showRemoveAllFilters.set(0<Object.getOwnPropertyNames(this.activeFilters).length)},a.prototype.accepts=function(){return[InterLibraryLink.DataType.infrontFilter]},a.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.infrontFilter&&this.addOrUpdateFilter(e.value)},a.prototype.link=function(e){-1!=e.accepts().indexOf(InterLibraryLink.DataType.infrontFilter)&&this.targetManager.addTarget(e)},a.prototype.unlink=function(e){this.targetManager.removeTarget(e)},a.kLanguageKey="screenerActiveFilters",a}(e.WidgetBase);e.ScreenerActiveFiltersWidget=a}(Infront||(Infront={})),function(e){var t,n,i,r,a,s;(n=t=e.FilterEnum||(e.FilterEnum={}))[n.Morningstar=0]="Morningstar",n[n.Risklevel=1]="Risklevel",(r=i=e.FilterTypeEnum||(e.FilterTypeEnum={}))[r.Select=0]="Select",r[r.Multiselect=1]="Multiselect",r[r.FreeText=2]="FreeText",r[r.RadioSelect=3]="RadioSelect",r[r.RangeSelect=4]="RangeSelect",(s=a=e.FilterState||(e.FilterState={}))[s.Unselected=-1]="Unselected",s[s.Selected=1]="Selected";var o=function(){this.selectedFilters=[]};e.FilterChangeEvent=o;var l=function(e,t,n,i){void 0===i&&(i=!1),this.text=e,this.filterCondition=t,this.preSelected=i,this.className=n||""},c=function(e){function t(t,n,i,r){return void 0===i&&(i="filter-value-item"),void 0===r&&(r=!1),e.call(this,t,function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(InfrontUtil.isNumber(r)&&0<=n.indexOf(r))return!0}return!1},i,r)||this}return __extends(t,e),t}(e.FilterItem=l);e.FilterItemValue=c;var d=function(e){function t(t,n,i,r){return void 0===i&&(i="filter-string-item"),void 0===r&&(r=!1),e.call(this,t,function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(InfrontUtil.isString(r)&&0<=n.indexOf(r))return!0}return!1},i,r)||this}return __extends(t,e),t}(l);e.FilterItemString=d;var u=function(t,n){this.selected=new e.Observable(!1),this.text=new e.Observable,this.aria=new e.Observable,this.count=new e.Observable,this.matchingItems={},this.text.set(t.text),this.filterFunction=t.filterCondition,this.id=n,this.className=t.className};e.FilterGroupItem=u;var h=function(e){this.filterFields=InfrontUtil.isArray(e.filterFields)?e.filterFields:[e.filterFields],this.filterType=e.filterType,this.header=e.header,this.className=this.getClassName(e.className),this.hideFromActiveFilters=e.hideFromActiveFilters,this.activeFilterType=e.activeFilterType,this.activeFilterSelectionCount=e.activeFilterSelectionCount},p=function(e){function t(t){var n=e.call(this,t)||this;return n.filterItems=InfrontUtil.isArray(t.filterItems)?t.filterItems:[t.filterItems],n}return __extends(t,e),t.prototype.getClassName=function(e){return e||"select-filter"},t}(e.FilterSpec=h),m=function(e){function t(t){var n=e.call(this,t)||this;return n.filterItems=[],n.placeholder=t.placeholder?t.placeholder:"",n}return __extends(t,e),t.prototype.getClassName=function(e){return e||"free-text-filter"},t}(e.SelectFilterSpec=p);e.FreeTextFilterSpec=m;var g=function(e){function t(t){var n=e.call(this,t)||this;return n.filterItems=InfrontUtil.isArray(t.filterItems)?t.filterItems:[t.filterItems],n.defaultExpanded=!!t.defaultExpanded&&t.defaultExpanded,n}return __extends(t,e),t.prototype.getClassName=function(e){return e||"multi-select-filter"},t}(h);e.MultiSelectFilterGroupSpec=g;var f=function(e){function t(t){var n=e.call(this,t)||this;return n.filterItems=InfrontUtil.isArray(t.filterItems)?t.filterItems:[t.filterItems],n.defaultExpanded=!!t.defaultExpanded&&t.defaultExpanded,n}return __extends(t,e),t.prototype.getClassName=function(e){return e||"radio-select-filter"},t}(h);e.RadioSelectFilterGroupSpec=f;var v=function(e){function t(t){var n=e.call(this,t)||this;return n.filterItems=InfrontUtil.isArray(t.filterItems)?t.filterItems:[t.filterItems],n.defaultExpanded=!!t.defaultExpanded&&t.defaultExpanded,n}return __extends(t,e),t.prototype.getClassName=function(e){return e||"range-select-filter"},t}(h);e.RangeSelectFilterGroupSpec=v;var y=function(){function t(t,n,i,r,a,s){var o=this;this.filterFields=[],this.filterFieldTags=[],this.itemUnbinds={},this.isInitialising=!0,this.id=t,this.cache=r,this.screener=a,this.changeCallback=function(){s(o)};for(var l=0,c=n.filterFields;l<c.length;l++){var d=c[l],u=e.FieldsHelper.createFieldFromSpec(d);this.filterFields.push(u),this.filterFieldTags.push(u.getFieldTag())}this.className=n.className?n.className:"",this.header=n.header,this.cacheFilterObserver=i,this.hideFromActiveFilters=n.hideFromActiveFilters,this.activeFilterType=n.activeFilterType,this.activeFilterSelectionCount=n.activeFilterSelectionCount}return t.prototype.destroy=function(){this.unbindAll()},t.prototype.addCacheInstrumentBindning=function(n){var i=this;n.filterValues[this.id]||(n.filterValues[this.id]=[]);for(var r=function(r){var s=e.CacheKeyFactory.createInstrumentKey(n.originalItem);a.itemUnbinds[s+r]=a.cache.inlineSymbolBind(n.originalItem,a.filterFieldTags[r],function(e){!function(e){n.filterValues[i.id][r]=e;var a=i.passes(InfrontUtil.isArray(e)?e:[e]),s=a!==n.filterResults[i.id];n.filterResults[i.id]=a,s?(n.updateStatus(),t.statusUpdates++):t.skippedUpdates++}(e)})},a=this,s=0;s<this.filterFields.length;s++)r(s)},t.prototype.unbindAll=function(){for(var e in this.itemUnbinds)this.itemUnbinds[e](),delete this.itemUnbinds[e]},t.statusUpdates=0,t.skippedUpdates=0,t}(),b=function(t){function n(n,i,r,a,s,o,l,c,d){var h=t.call(this,n,r,a,s,o,c)||this;h.filters=[],h.selectedFilters=[],h.itemCount=0,h.cacheFilterObserver.addFilter(h),h.strings=i.languageHandler,h.selectedCount=new e.Observable,h.selectedCount.set(0),h.selected=null;var p=e.BindingFactory.createInlineBinding(function(e){h.hasSelected=0<e,h.changeCallback()});h.selectedCount.observe(p),h.expandedCallback=function(){d(h)},h.wrapperHeight=new e.Observable(0),h.expandedGroup=new e.Observable(r.defaultExpanded||!1),h.filtersTabIndex=new e.Observable(h.expandedGroup.get()?"0":"-1"),h.collapsable=l;for(var m=0,g=r.filterItems;m<g.length;m++){var f=g[m];h.filters.push(new u(f,"id"+h.itemCount++)),f.preSelected&&h.selectFilterParam(h.filters[h.filters.length-1])}return h}return __extends(n,t),n.prototype.buildUI=function(t){var n=this,i=e.WidgetDOMFactory.create_CRadioFilterSelector_DOM(t,this.header,this.className,this.selectedCount,this.filters,function(e){e.selected.get()?n.unselectFilterParam(e):n.selectFilterParam(e)},this.expandedGroup,this.filtersTabIndex,function(){return n.toggleExpand()},this.collapsable,this.wrapperHeight,this.strings);this.wrapperHeight.set(Math.round(i.getBoundingClientRect().height));for(var r=[],a=i.children.length;a--;r.unshift(i.children[a]));},n.prototype.selectFilterParam=function(e){1==this.selectedFilters.length&&(this.selectedFilters.pop().selected.set(!1),this.selectedCount.set(0)),this.selectedFilters.push(e),this.cacheFilterObserver.filterParamUpdated(this),e.selected.set(!0),this.selectedCount.set(1)},n.prototype.unselectFilterParam=function(e){var t=this.selectedFilters.indexOf(e);-1<t&&(this.selectedFilters.splice(t,1),this.cacheFilterObserver.filterParamUpdated(this),e.selected.set(!1),this.unselectAllFilterParams())},n.prototype.unselectAllFilterParams=function(){for(var e=0,t=this.selectedFilters;e<t.length;e++)t[e].selected.set(!1);this.selectedFilters=[],this.cacheFilterObserver.filterParamUpdated(this),this.selectedCount.set(0)},n.prototype.toggleExpand=function(){this.expandedGroup.set(!this.expandedGroup.get()),this.filtersTabIndex.set(this.expandedGroup.get()?"0":"-1"),this.expandedGroup.get()&&this.expandedCallback()},n.prototype.passes=function(e){if(0==this.selectedFilters.length)return!0;for(var t=0,n=this.selectedFilters;t<n.length;t++)if(n[t].filterFunction(e))return!0;return!1},n}(e.FilterGroup=y);e.RadioSelectFilter=b;var T=function(t){function n(n,i,r,a,s,o,l,c,d){var h=t.call(this,n,i,r,s,o,c)||this;h.filters=[],h.selectedFilters=[],h.startPoint=-1,h.endPoint=0,h.itemCount=0,h.cacheFilterObserver.addFilter(h),h.selectedCount=new e.Observable,h.selectedCount.set(0),h.selected=null,h.infrontUI=a;var p=e.BindingFactory.createInlineBinding(function(e){h.hasSelected=0<e,h.changeCallback()});h.selectedCount.observe(p),h.expandedCallback=function(){d(h)},h.wrapperHeight=new e.Observable(0),h.expandedGroup=new e.Observable(i.defaultExpanded||!1),h.filtersTabIndex=new e.Observable(h.expandedGroup.get()?"0":"-1"),h.collapsable=l;var m=0;h.hasPreselected=!1;for(var g=0,f=i.filterItems;g<f.length;g++){var v=f[g];h.filters.push(new u(v,"id"+h.itemCount++)),v.preSelected&&(h.hasPreselected=!0,h.startPoint<0&&(h.startPoint=m),h.endPoint<m&&(h.endPoint=m),h.selectFilterParam(h.filters[h.filters.length-1])),m++}return h.hasPreselected||(h.startPoint=0,h.endPoint=h.filters.length-1),h.oneStep=1/(h.filters.length-1),h.startPointLabel=new e.Observable,h.endPointLabel=new e.Observable,h.activeFilterRangeSeparatorLabel=new e.Observable,h}return __extends(n,t),n.prototype.buildUI=function(t){var n=this,i=e.WidgetDOMFactory.create_CRangeFilterSelector_DOM(t,this.header,this.className,this.backgroundSelectedWidth,this.backgroundSelectedLeft,this.selectedCount,this.filters,function(e){e.selected.get()},this.expandedGroup,this.filtersTabIndex,function(){return n.toggleExpand()},this.collapsable,this.wrapperHeight),r=i.rangeWrapper,a=(i.filtergroupContainer,i.filtergroupHolder);this.backgroundSelectedBar=document.createElement("div"),this.backgroundSelectedBar.className="cell-funds-filter__range-selected-background",a.insertBefore(this.backgroundSelectedBar,a.childNodes[0]),this.backgroundBar=document.createElement("div"),this.backgroundBar.className="cell-funds-filter__range-background",a.insertBefore(this.backgroundBar,this.backgroundSelectedBar),this.bullet1=document.createElement("div"),this.bullet1.className="cell-funds-filter__range-bullet cell-funds-filter__range-bullet-1",a.appendChild(this.bullet1),this.bullet1.onmousedown=function(e){n.dragBullet(e)},this.bullet2=document.createElement("div"),this.bullet2.className="cell-funds-filter__range-bullet cell-funds-filter__range-bullet-2",a.appendChild(this.bullet2),this.bullet2.onmousedown=function(e){n.dragBullet(e)},this.stepElement=i.filtergroupContainer.childNodes[0].childNodes[0],this.stepWidth2=this.stepElement.getBoundingClientRect().width/2,this.wrapperHeight.set(Math.round(r.getBoundingClientRect().height+parseInt(window.getComputedStyle(r).getPropertyValue("margin-top"))+parseInt(window.getComputedStyle(r).getPropertyValue("margin-bottom")))),this.hasPreselected?this.setFilterRange(this.startPoint,this.endPoint):this.setRange(null)},n.prototype.dragBullet=function(e){this.movingBullet=e.currentTarget;var t=this.movingBullet,n=e.screenX,i=this;this.stepWidth2=this.stepElement.getBoundingClientRect().width/2;var r=t.getBoundingClientRect().width/2,a=this.backgroundBar.getBoundingClientRect(),s=e.screenX-t.getBoundingClientRect().left;window.addEventListener("mousemove",l),window.addEventListener("mouseup",function e(t){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",e),t.screenX!=n&&(i.setRange(o),i.setFilterRange(),i.movingBullet=null)});var o=0;function l(e){var n=e.screenX-a.left-s;n<-r+i.stepWidth2&&(n=-r+i.stepWidth2),n>a.width-i.stepWidth2-r&&(n=a.width-i.stepWidth2-r),o=Math.floor((n+i.stepWidth2+2*r)/(a.width-2*i.stepWidth2)/i.oneStep),t.style.left=o*i.oneStep*(a.width-2*i.stepWidth2)-r+i.stepWidth2+"px",i.setRange(o,!0)}},n.prototype.setSelectedBackground=function(){var e=this.bullet1.getBoundingClientRect().width,t=this.getLeftB().getBoundingClientRect().left,n=this.getRightB().getBoundingClientRect().left-t;t=t-this.backgroundBar.getBoundingClientRect().left+e/2,this.backgroundSelectedBar.style.marginLeft=t+"px",this.backgroundSelectedBar.style.width=n+"px"},n.prototype.getLeftB=function(){return this.bullet1.getBoundingClientRect().left<this.bullet2.getBoundingClientRect().left?this.bullet1:this.bullet2},n.prototype.getRightB=function(){return this.bullet1.getBoundingClientRect().left>=this.bullet2.getBoundingClientRect().left?this.bullet1:this.bullet2},n.prototype.setFilterRange=function(e,t){null!=e&&(this.startPoint=e),null!=t&&(this.endPoint=t),this.setRange(null);for(var n=0;n<this.filters.length;n++)n>=this.startPoint&&n<=this.endPoint?this.selectFilterParam(this.filters[n]):this.unselectFilterParam(this.filters[n]);this.selectedCount.set(this.endPoint-this.startPoint+1),this.activeFilterRangeSeparatorLabel.set(" "+this.infrontUI.languageHandler.get("screenerActiveFilters","to")+" "),this.startPointLabel.set(this.filters[this.startPoint].text.get()),this.endPointLabel.set(this.filters[this.endPoint].text.get()),this.startPoint==this.endPoint&&(this.activeFilterRangeSeparatorLabel.set(""),this.startPointLabel.set(this.filters[this.startPoint].text.get()),this.endPointLabel.set("")),this.cacheFilterObserver.filterParamUpdated(this)},n.prototype.setRange=function(e,t){if(null!=this.movingBullet&&null!=e&&(this.movingBullet==this.getLeftB()?this.startPoint=e:this.movingBullet==this.getRightB()&&(this.endPoint=e),this.endPoint<this.startPoint)){var n=this.endPoint;this.endPoint=this.startPoint,this.startPoint=n}if(null==t){var i=this.backgroundBar.getBoundingClientRect(),r=this.bullet1.getBoundingClientRect().width,a=this.getLeftB(),s=this.getRightB();a.style.left=this.startPoint*this.oneStep*(i.width-2*this.stepWidth2)-r/2+this.stepWidth2+"px",s.style.left=this.endPoint*this.oneStep*(i.width-2*this.stepWidth2)-r/2+this.stepWidth2+"px"}this.setSelectedBackground()},n.prototype.selectFilterParam=function(e){-1==this.selectedFilters.indexOf(e)&&(this.selectedFilters.push(e),e.selected.set(!0))},n.prototype.unselectFilterParam=function(e){var t=this.selectedFilters.indexOf(e);-1<t&&(this.selectedFilters.splice(t,1),e.selected.set(!1))},n.prototype.unselectAllFilterParams=function(){for(var e=0,t=this.selectedFilters;e<t.length;e++)t[e].selected.set(!1);this.selectedFilters=[],this.cacheFilterObserver.filterParamUpdated(this),this.selectedCount.set(0)},n.prototype.toggleExpand=function(){this.expandedGroup.set(!this.expandedGroup.get()),this.filtersTabIndex.set(this.expandedGroup.get()?"0":"-1"),this.expandedGroup.get()&&this.expandedCallback()},n.prototype.passes=function(e){if(0==this.selectedFilters.length)return!0;for(var t=0,n=this.selectedFilters;t<n.length;t++)if(n[t].filterFunction(e))return!0;return!1},n}(y);e.RangeSelectFilter=T;var S=function(t){function n(n,i,r,a,s,o,l,c,d){var h=t.call(this,n,r,a,s,o,c)||this;h.filters=[],h.selectedFilters=[],h.itemCount=0,h.strings=i.languageHandler,h.cacheFilterObserver.addFilter(h),h.selectedCount=new e.Observable,h.selectedCount.set(0);var p=e.BindingFactory.createInlineBinding(function(e){h.hasSelected=0<e,h.changeCallback()});h.selectedCount.observe(p),h.expandedCallback=function(){d(h)},h.wrapperHeight=new e.Observable(0),h.expandedGroup=new e.Observable(r.defaultExpanded||!1),h.filtersTabIndex=new e.Observable(h.expandedGroup.get()?"0":"-1"),h.collapsable=l;for(var m=0,g=r.filterItems;m<g.length;m++){var f=g[m];h.filters.push(new u(f,"id"+h.itemCount++)),f.preSelected&&h.selectFilterParam(h.filters[h.filters.length-1])}return h}return __extends(n,t),n.prototype.buildUI=function(t){var n=this,i=e.WidgetDOMFactory.create_CFilterSelector_DOM(t,this.header,this.className,this.selectedCount,this.filters,function(e){e.selected.get()?n.unselectFilterParam(e):n.selectFilterParam(e)},this.expandedGroup,this.filtersTabIndex,function(){return n.toggleExpand()},this.collapsable,this.wrapperHeight,this.strings);this.wrapperHeight.set(Math.round(i.getBoundingClientRect().height));var r=i.children;if(this.filterFields&&0<this.filterFields.length&&"RISK_LEVEL"===this.filterFields[0].name){var a=0,s=e.BindingFactory.createInlineBinding(function(e){void 0!==t[a]&&r[a].setAttribute("aria-label","There is "+e+" items in "+n.filters[a].text.get()+" category"),a++});this.filters.forEach(function(e){e.count.observe(s)})}},n.prototype.selectFilterParam=function(e){-1==this.selectedFilters.indexOf(e)&&(this.selectedFilters.push(e),this.cacheFilterObserver.filterParamUpdated(this),e.selected.set(!0),this.selectedCount.set(this.selectedCount.get()+1))},n.prototype.unselectFilterParam=function(e){var t=this.selectedFilters.indexOf(e);-1<t&&(this.selectedFilters.splice(t,1),this.cacheFilterObserver.filterParamUpdated(this),e.selected.set(!1),this.selectedCount.set(this.selectedCount.get()-1))},n.prototype.unselectAllFilterParams=function(){for(var e=0,t=this.selectedFilters;e<t.length;e++)t[e].selected.set(!1);this.selectedFilters=[],this.cacheFilterObserver.filterParamUpdated(this),this.selectedCount.set(0)},n.prototype.toggleExpand=function(){this.expandedGroup.set(!this.expandedGroup.get()),this.filtersTabIndex.set(this.expandedGroup.get()?"0":"-1"),this.expandedGroup.get()&&this.expandedCallback()},n.prototype.passes=function(e){if(0==this.selectedFilters.length)return!0;for(var t=0,n=this.selectedFilters;t<n.length;t++)if(n[t].filterFunction(e))return!0;return!1},n}(y);e.MultiSelectFilter=S;var C=function(t){function n(e,n,i,r,a,s){var o=t.call(this,e,n,i,r,a,s)||this;return o.cacheFilterObserver.addFilter(o),n.filterItems&&n.filterItems[0]&&(o.filter=new u(n.filterItems[0],"id0"),n.filterItems[0].preSelected&&o.setSelectedFilter(o.filter)),o}return __extends(n,t),n.prototype.buildUI=function(t){var n=this,i=e.WidgetDOMFactory.create_CFilterSingleSelector_DOM(t,this.header,this.className,this.filter,function(){n.filter.selected.get()?n.unselectFilterParam(n.filter):n.setSelectedFilter(n.filter)});this.elementField=i.filterContainer;var r=i.columnElement;if(this.filter&&this.filter.text&&null!==this.filter.text.get()&&"&"===this.filter.text.get().charAt(0)){var a=this.filter.text.get().trim().split(";"),s=e.BindingFactory.createHTMLAttributeBinding(r,"aria-label",function(e){return"The number of star is "+(a.length-1)+" out of 5 and the number of items is "+e});this.filter.count.observe(s)}},n.prototype.toggleExpand=function(){var e=this;this.elementField.classList.add("cell-funds-filter-list-wrapper--blink"),setTimeout(function(){e.elementField.classList.remove("cell-funds-filter-list-wrapper--blink")},1e3)},n.prototype.setSelectedFilter=function(e){e.selected.set(!0),this.selectedFilter=e,this.hasSelected=!0,this.changeCallback(),this.cacheFilterObserver.filterParamUpdated(this)},n.prototype.unselectFilterParam=function(e){this.unselectAllFilterParams()},n.prototype.unselectAllFilterParams=function(){this.filter&&this.filter.selected.set(!1),this.selectedFilter=void 0,this.hasSelected=!1,this.changeCallback(),this.cacheFilterObserver.filterParamUpdated(this)},n.prototype.passes=function(e){return!(this.selectedFilter&&!this.selectedFilter.filterFunction(e))},n}(y),I=function(t){function n(e,n,i,r,a,s,o){var l=t.call(this,e,i,r,a,s,o)||this;return l.placeholder=i.placeholder,l.strings=n.languageHandler,l.changeCallback=function(){o(l)},l}return __extends(n,t),n.prototype.buildUI=function(t){var n=this,i=document.createElement("label");i.htmlFor="searchBox",i.innerText=this.placeholder,i.className="cell-label-hide",t.appendChild(i),this.elementField=e.WidgetDOMFactory.create_CFilterFreeTextSearch_DOM(t,this.header,this.className,this.strings),this.elementField.placeholder=this.placeholder,this.elementField.setAttribute("aria-label",this.placeholder),this.elementField.addEventListener("keyup",function(e){var t=400;setTimeout(function(){t=0,n.replaceText(n.elementField.value)},t)})},n.prototype.valuesContainsString=function(e,t){return t=t.toLowerCase(),e.some(function(e){return!!e&&("string"!=typeof e&&(e=e.toString()),0<=e.toLowerCase().indexOf(t))})},n.prototype.replaceText=function(e){var t=this;if(""==e)this.unselectAllFilterParams();else if(this.selectedFilter)this.selectedFilter.filterFunction=function(n){return t.valuesContainsString(n,e)},this.selectedFilter.text.set(e),this.cacheFilterObserver.filterParamUpdated(this),this.changeCallback();else{var n=new l(e,function(n){return t.valuesContainsString(n,e)},"free-text-filter");this.setSelectedFilter(new u(n,e))}},n.prototype.unselectAllFilterParams=function(){this.elementField.value="",t.prototype.unselectAllFilterParams.call(this)},n}(e.SelectFilter=C);e.FreeTextFilter=I;var _=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.filters=[t.Morningstar,t.Risklevel],n.collapsable=!0,n}return __extends(n,e),n}(e.WidgetOptions);e.ScreenerWidgetOptions=_;var M=function(n){function r(t,i,a){var s=n.call(this,t,i,r.kLanguageKey,a)||this;return s.filterGroups=[],s.title=new e.Observable,s.targetManager=new InfrontUtil.LinkTargetManager,s}return __extends(r,n),r.prototype.returnDefaultWidgetOptions=function(){return new _},r.prototype.newInit=function(){var t=this;if(!this.options.feed||this.options.instruments&&0<this.options.instruments.length){if(this.options.instruments&&0<this.options.instruments.length){this.instruments=this.options.instruments,this.infront.getSymbols(this.instruments,["INSTRUMENT_TYPE"],null,0,!1),this.instrumentObserver=new A(this.cache,this.instruments);for(var i=0,r=this.options.filters;i<r.length;i++){var a=r[i];this.addFilter(a)}this.instrumentObserver.finalizeInit(),n.prototype.newInit.call(this)}}else{var s=new e.ReferenceDataOptions;s.feedNumber=this.options.feed,s.onError=function(e,n){t.showProgressIndicator.set(!1)},s.onData=function(e){t.instruments=e.instruments;var n=e.symbols;t.waitForDataAndContinueInit(n)},this.infront.referenceData(s)}},r.prototype.waitForDataAndContinueInit=function(e){var t=this;window.setTimeout(function(){if(t.allSymbolsHasStaticData(e)){t.instrumentObserver=new A(t.cache,t.instruments);for(var i=0,r=t.options.filters;i<r.length;i++){var a=r[i];t.addFilter(a)}t.instrumentObserver.finalizeInit(),n.prototype.newInit.call(t),t.options.customReferenceData&&t.customBindFields()}else t.waitForDataAndContinueInit(e)},100)},r.prototype.customBindFields=function(){for(var t=[],n=0,i=this.instruments;n<i.length;n++){var r=i[n],a=new e.Instrument(this.options.customReferenceData.feed,r.ticker);t.push(a)}this.infront.snapshot(t,["BID","ASK"])},r.prototype.newBuildUI=function(){this.filterContainer=e.WidgetDOMFactory.create_WScreener_DOM(this.element,this.title,this.options.collapsable);for(var t=0,i=this.filterGroups;t<i.length;t++)i[t].buildUI(this.filterContainer);n.prototype.newBuildUI.call(this)},r.prototype.createBindings=function(){this.instrumentObserver&&this.instrumentObserver.observe(this),n.prototype.createBindings.call(this)},r.prototype.newSubscribe=function(){for(var t=[],i=0,r=this.filterGroups;i<r.length;i++){var a=r[i];t=t.concat(a.filterFields)}if(this.instrumentObserver)for(var s=0,o=this.instrumentObserver.itemsToFilter;s<o.length;s++)o[s].updateStatus();var l=e.FieldsHelper.getSubscriptionFieldsArray(t);this.subscribes.addFields(l),this.subscribes.addInstruments(this.instruments),n.prototype.newSubscribe.call(this)},r.prototype.newUnsubscribe=function(){this.subscribes.removeAllFields(),n.prototype.newUnsubscribe.call(this)},r.prototype.removeBindings=function(){this.instrumentObserver&&this.instrumentObserver.unbind(this),n.prototype.removeBindings.call(this)},r.prototype.allSymbolsHasStaticData=function(e){for(var t in e)if(this.options.customRequiredFields)for(var n=0,i=this.options.customRequiredFields;n<i.length;n++){var r=i[n];if(null==e[t].getValueOrNull(r))return!1}else if(!e[t].hasStaticContent)return!1;return!0},r.prototype.addFilter=function(e){var t,n,r=this;switch((t=InfrontUtil.isNumber(e)?this.createFilterFromTypeEnum(e):e).filterType){case i.Select:n=new C("groupId"+this.filterGroups.length,new p(t),this.instrumentObserver,this.cache,this,function(e){return r.filterChanged(e)});break;case i.FreeText:n=new I("freeTextFilter"+this.filterGroups.length,this.infrontUI,new m(t),this.instrumentObserver,this.cache,this,function(e){return r.filterChanged(e)});break;case i.RadioSelect:n=new b("groupId"+this.filterGroups.length,this.infrontUI,new f(t),this.instrumentObserver,this.cache,this,this.options.collapsable,function(e){return r.filterChanged(e)},function(e){return r.filterExpanded(e)});break;case i.RangeSelect:n=new T("groupId"+this.filterGroups.length,new v(t),this.instrumentObserver,this.infrontUI,this.cache,this,this.options.collapsable,function(e){return r.filterChanged(e)},function(e){return r.filterExpanded(e)});break;default:n=new S("groupId"+this.filterGroups.length,this.infrontUI,new g(t),this.instrumentObserver,this.cache,this,this.options.collapsable,function(e){return r.filterChanged(e)},function(e){return r.filterExpanded(e)})}this.filterGroups.push(n)},r.prototype.createFilterFromTypeEnum=function(n){var r;switch(n){case t.Morningstar:r={filterFields:"STAR_RATING",header:"Morningstar Rating",filterType:i.Multiselect,className:"morningstar-rating",filterItems:[new e.FilterItem("Not Rated",function(e){return void 0===e||0==e},"star-param-0"),new e.FilterItem("&#9733;",function(e){return 1==e},"star-param-1"),new e.FilterItem("&#9733;&#9733;",function(e){return 2==e},"star-param-2"),new e.FilterItem("&#9733;&#9733;&#9733;",function(e){return 3==e},"star-param-3"),new e.FilterItem("&#9733;&#9733;&#9733;&#9733;",function(e){return 4==e},"star-param-4"),new e.FilterItem("&#9733;&#9733;&#9733;&#9733;&#9733;",function(e){return 5==e},"star-param-5")]};break;case t.Risklevel:r={filterFields:"RISK_LEVEL",header:"Risk Level",className:"risk-level",filterType:i.Multiselect,filterItems:[new c("Low Risk",[1,2]),new c("Medium Risk",[3,4]),new c("High Risk",[5,6,7])]}}return r},r.prototype.clearAllFilters=function(){for(var e=0;e<this.filterGroups.length;e++)this.filterGroups[e].unselectAllFilterParams()},r.prototype.reInit=function(e){this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.replaceAllInstruments,e)},r.prototype.itemAdded=function(e,t){this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.infrontInstrument,e)},r.prototype.itemRemoved=function(e,t){this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.removeInfrontInstrument,e)},r.prototype.itemMoved=function(e,t,n){},r.prototype.filterChanged=function(e){if(this.targetManager&&this.targetManager.isLinked()&&this.targetManager.updateTargets(InterLibraryLink.DataType.infrontFilter,e),this.options.onChange){var t=new o;if(t.selection=e.hasSelected?a.Selected:a.Unselected,(t.parentGroup=e)instanceof C)t.filterType=i.Select,e.selectedFilter&&(t.selectedFilters=[e.selectedFilter]);else if(e instanceof b||e instanceof S){t.filterType=i.RadioSelect;for(var n=0,r=e.selectedFilters;n<r.length;n++){var s=r[n];t.selectedFilters.push(s)}}else if(e instanceof T){t.filterType=i.RangeSelect;for(var l=0,c=e.selectedFilters;l<c.length;l++)s=c[l],t.selectedFilters.push(s)}else t.filterType=i.FreeText;this.options.onChange(t)}},r.prototype.filterExpanded=function(e){for(var t=0,n=this.filterGroups;t<n.length;t++){var i=n[t];i!=e&&(i instanceof S||i instanceof b||i instanceof T)&&(i.expandedGroup.set(!1),i.filtersTabIndex.set("-1"))}},r.prototype.accepts=function(){return[InterLibraryLink.DataType.listenerAdded]},r.prototype.receiveMessage=function(e){e.type==InterLibraryLink.DataType.listenerAdded&&this.instrumentObserver&&this.instrumentObserver.itemsAfterFilter&&this.targetManager.updateTargets(InterLibraryLink.DataType.replaceAllInstruments,this.instrumentObserver.itemsAfterFilter.get())},r.prototype.link=function(e){var t=e.accepts();-1==t.indexOf(InterLibraryLink.DataType.infrontInstrument)&&-1==t.indexOf(InterLibraryLink.DataType.infrontFilter)||this.targetManager.addTarget(e)},r.prototype.unlink=function(e){this.targetManager.removeTarget(e)},r.prototype.getFilterGroup=function(e){for(var t=0,n=this.filterGroups;t<n.length;t++){var i=n[t];if(i.id==e)return i}},r.kLanguageKey="screener",r}(e.WidgetBase);e.ScreenerWidget=M;e.InstrumentObserverParam=function(){};var E=function(){function t(e,t,n){for(var i in this.filterParamObjects={},this.selectedParamIds=[],this.id=e,this.fieldSpec=t,n)this.addFilterParams(i,n[i].filterFunction)}return t.prototype.passes=function(e){if(0==this.selectedParamIds.length)return!0;for(var t=0,n=this.selectedParamIds;t<n.length;t++){var i=n[t];if(this.filterParamObjects[i].filterFunction(e))return!0}return!1},t.prototype.addFilterParams=function(t,n){this.filterParamObjects[t]={filterFunction:n,resultLength:new e.Observable}},t.prototype.selectFilterParam=function(e){this.selectedParamIds.push(e)},t.prototype.unselectFilterParam=function(e){var t=this.selectedParamIds.indexOf(e);return-1<t&&this.selectedParamIds.splice(t,1),this.filterParamObjects[e].filterFunction},t}();e.InstrumentObserverFilter=E;var w=function(){function e(e,t){this.filterResults={},this.filterValues={},this.originalItem=e,this.updateCallback=t}return e.prototype.updateStatus=function(e){void 0===e&&(e=!1);var t=!0;for(var n in this.filterResults)if(!(t=this.filterResults[n]))break;this.passes!=t?(this.passes=t,this.updateCallback(this.originalItem,t,e)):this.updateCallback(this.originalItem,t,!0)},e}();e.InstrumentFilterItem=w;var A=function(){function t(t,n){var i=this;this.instruments=[],this.filterGroups=[],this.itemsToFilter=[],this.itemsAfterFilter=new e.ObservableArray,this.isCalculatingFiltersLength=!1,this.isInitializing=!0,this.cache=t;for(var r=function(e,t,n){return i.itemUpdated(e,t,n)},a=0,s=n;a<s.length;a++){var o=s[a];this.itemsToFilter.push(new w(o,r))}}return t.prototype.finalizeInit=function(){this.isInitializing=!1;for(var e=0,t=this.itemsToFilter;e<t.length;e++)t[e].updateStatus()},t.prototype.addFilter=function(e){this.filterGroups.push(e);for(var t=0,n=this.itemsToFilter;t<n.length;t++){var i=n[t];e.addCacheInstrumentBindning(i)}},t.prototype.filterParamUpdated=function(e){for(var t=[],n=0,i=this.itemsToFilter;n<i.length;n++){var r=i[n],a=e.passes(r.filterValues[e.id]);a!=r.filterResults[e.id]&&(r.filterResults[e.id]=a,r.updateStatus(!0)),r.passes&&t.push(r.originalItem)}this.itemsAfterFilter.replaceWith(t),this.updateFilteredItemsLength()},t.prototype.observe=function(e){this.itemsAfterFilter.observe(e)},t.prototype.unbind=function(e){this.itemsAfterFilter.unbind(e)},t.prototype.destroy=function(){for(var e=0,t=this.filterGroups;e<t.length;e++)t[e].destroy();this.itemsAfterFilter.clear(),this.itemsAfterFilter=null,this.filterGroups=null},t.prototype.itemUpdated=function(e,n,i){this.isInitializing?t.itemUpdatesSkipped++:(i||(n?this.itemsAfterFilter.push(e):this.itemsAfterFilter.remove(e)),this.updateFilteredItemsLength(),t.itemUpdates++)},t.prototype.updateFilteredItemsLength=function(){var e=this;this.isCalculatingFiltersLength||this.itemLengthTimeout||(this.itemLengthTimeout=setTimeout(function(){t.itemLengthTimeoutCount++,e.itemLengthTimeout=null,e.isCalculatingFiltersLength=!0;for(var n=0,i=e.filterGroups;n<i.length;n++){var r=i[n],a=r.id;if(r instanceof S||r instanceof b||r instanceof T)for(var s=0,o=r.filters;s<o.length;s++){for(var l=o[s],c=0,d=0,u=e.itemsToFilter;d<u.length;d++){var h=u[d];if(l.filterFunction(h.filterValues[a])){for(var p=!0,m=0,g=e.filterGroups;m<g.length;m++)if((I=g[m])!=r&&!I.passes(h.filterValues[I.id])){p=!1;break}c=p?c+1:c}}l.count.set(c)}else if(r.filter){c=0;for(var f=0,v=e.itemsToFilter;f<v.length;f++)if(h=v[f],r.filter.filterFunction(h.filterValues[a])){p=!0;for(var y=0,C=e.filterGroups;y<C.length;y++){var I;if((I=C[y])!=r&&!I.passes(h.filterValues[I.id])){p=!1;break}}c=p?c+1:c}r.filter.count.set(c)}}e.isCalculatingFiltersLength=!1},1e3))},t.itemUpdatesSkipped=0,t.itemUpdates=0,t.itemLengthTimeoutCount=0,t}();e.ContinouslyFilteredInstrumentObserver=A}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultPeriod="2D",t}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.SimpleChartOverviewWidgetOptions=t;var n=function(n){function i(e,t,r){var a=n.call(this,e,t,i.kLanguageKey,r)||this;return a.subscribes.addFields([InfrontConstants.Fields.LAST_VALID,InfrontConstants.Fields.PCT_CHANGE]),a}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){var t=e.WidgetDOMFactory.create_WSimpleChartOverview_DOM(this.element,"header",this.decimals,this.options.defaultPeriod,this.cache,this.cacheKey);t.style.height=this.element.style.height,"0px"!=window.getComputedStyle(t).height&&"auto"!=window.getComputedStyle(t).height||(this.element.style.height="100%",t.style.height="100%");var i=new e.ChartWidgetOptions2;i.useOriginal=!0,i.instruments=[this.options.instrument],i.defaultPeriod=this.options.defaultPeriod,i.zoom=!1,i.streaming=!0,i.showVolume=!1,i.chartTypeID=e.ChartType.area,i.hideAxes=!0,i.noSpacing=!0,i.chartUI={tooltipVersion:"none",periodMenu:!1,expandButton:!1,chartTypeMenu:!1,indicatorMenu:!1,searchBox:!1,advancedParameters:!0},this.chartWidget=new e.ComplexChartWidget(t,this.infrontUI,i),n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){this.chartWidget&&this.chartWidget.destroy(),n.prototype.newDestroyUI.call(this)},i.kLanguageKey="SimpleChartOverview",i}(e.SingleInstrumentWidgetBase);e.SimpleChartOverviewWidget=n}(Infront||(Infront={})),function(e){var t,n,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.notional=1e6,t.currency="EUR",t.fixedRate=2,t.spread=0,t}return __extends(t,e),t}(e.WidgetOptions);e.SwapCalculatorOptions=i,(n=t=e.SwapCalculatorTab||(e.SwapCalculatorTab={})).TabMain="tabMain",n.TabCashFlow="tabCashFlow",n.TabOther="tabOther";var r=function(n){function r(e,t,i){var r=n.call(this,e,t,"swapCalculator",i)||this;return r.ready=!1,r.onDateChanged=function(e){r.updateCalculator()},r.amountChanged=function(){r.updateCalculator()},r.onSwapPayReceive=function(e){r.fixedIsPayer.set(!r.fixedIsPayer.get()),r.updateCalculator()},r.onDropDownChanged=function(e){r.updateCalculator()},r.onSelectTab=function(e){r.activeTab.set(e)},r.onReceiveSwapData=function(e){r.resultPanel&&r.resultPanel.applyResult(e),r.cashFlowPanel&&r.cashFlowPanel.applyResult(e)},r.onReceiveErrorResponse=function(e,t){r.resultPanel&&r.resultPanel.displayErrorMessage(e,t)},r}return __extends(r,n),r.prototype.newInit=function(){n.prototype.newInit.call(this)},r.prototype.newBuildUI=function(){var i=this;this.activeTab=new e.Observable(t.TabMain),this.notionalBinding=new e.TextInputBinding,this.notionalBinding.setNumeric(!0),this.notionalBinding.setValidator(function(e){return 0<InfrontUtil.parseFloatValue(e)}),this.notionalBinding.onBlur(this.amountChanged),this.notionalBinding.set(InfrontUtil.formatNumber(this.options.notional,0)),this.currencyItems=new e.ObservableArray,this.currencyBinding=new e.SelectInputBinding,this.currencyBinding.observe(function(e){return i.onDropDownChanged(e)}),this.fixedIsPayer=new e.Observable(!0),this.fixedRateBinding=new e.TextInputBinding,this.fixedRateBinding.setNumeric(!0),this.fixedRateBinding.setValidator(function(e){return InfrontUtil.isNumeric(e)}),this.fixedRateBinding.onBlur(this.amountChanged),this.fixedRateBinding.set(InfrontUtil.formatNumber(this.options.fixedRate,2)),this.spreadBinding=new e.TextInputBinding,this.spreadBinding.setNumeric(!0),this.spreadBinding.setValidator(function(e){return InfrontUtil.isNumeric(e)}),this.spreadBinding.onBlur(this.amountChanged),this.spreadBinding.set(this.options.spread.toString()),this.frequencyItems=new e.ObservableArray,this.fixedFrequencyBinding=new e.SelectInputBinding,this.fixedFrequencyBinding.observe(function(e){return i.onDropDownChanged(e)}),this.floatFrequencyBinding=new e.SelectInputBinding,this.floatFrequencyBinding.observe(function(e){return i.onDropDownChanged(e)}),this.calcMethodItems=new e.ObservableArray,this.fixedCalcMethodBinding=new e.SelectInputBinding,this.fixedCalcMethodBinding.observe(function(e){return i.onDropDownChanged(e)}),this.floatCalcMethodBinding=new e.SelectInputBinding,this.floatCalcMethodBinding.observe(function(e){return i.onDropDownChanged(e)}),this.domElements=e.WidgetDOMFactory.create_WSwapCalculator_DOM(this.element,this.widgetTitle,this.activeTab,this.notionalBinding,this.currencyBinding,this.currencyItems,this.fixedIsPayer,this.fixedRateBinding,this.spreadBinding,this.fixedFrequencyBinding,this.floatFrequencyBinding,this.frequencyItems,this.fixedCalcMethodBinding,this.floatCalcMethodBinding,this.calcMethodItems,function(e){return i.onSwapPayReceive(e)},this.languageHandler),this.createTabs(),this.createDateSelectors(),this.calculatorResponse=new e.CalculatorSwapResponse;var r=new o;this.resultPanel=new l(this.domElements.resultPanel,this.infrontUI,this.calculatorResponse,r);var c=new a;this.cashFlowPanel=new s(this.domElements.cashFlowPanel,this.infrontUI,this.calculatorResponse,c),this.initializeDropdowns(),n.prototype.newBuildUI.call(this),this.ready=!0,this.updateCalculator()},r.prototype.createTabs=function(){var n=new e.TabbedContainerOptions;n.tabs=[],n.tabs.push(new e.TabOptions(t.TabMain,this.languageHandler.get(this.languageKey,t.TabMain),!0)),n.tabs.push(new e.TabOptions(t.TabCashFlow,this.languageHandler.get(this.languageKey,t.TabCashFlow))),n.onSelect=this.onSelectTab,this.tabBar=new e.TabbedContainer(this.domElements.tabBar,n)},r.prototype.createDateSelectors=function(){this.startDateSelector=new e.DateSelector(this.domElements.startDate,this.infrontUI.languageHandler,this.onDateChanged),this.maturityDateSelector=new e.DateSelector(this.domElements.maturityDate,this.infrontUI.languageHandler,this.onDateChanged),this.maturityDateSelector.setDate(InfrontUtil.addMonths(InfrontUtil.today(),120)),this.valueDateSelector=new e.DateSelector(this.domElements.valueDate,this.infrontUI.languageHandler,this.onDateChanged),this.firstCouponDateFixedSelector=new e.DateSelector(this.domElements.firstCouponDateFixed,this.infrontUI.languageHandler,this.onDateChanged),this.firstCouponDateFixedSelector.setDate(InfrontUtil.addMonths(InfrontUtil.today(),12)),this.firstCouponDateFloatSelector=new e.DateSelector(this.domElements.firstCouponDateFloat,this.infrontUI.languageHandler,this.onDateChanged),this.firstCouponDateFloatSelector.setDate(InfrontUtil.addMonths(InfrontUtil.today(),12))},r.prototype.initializeDropdowns=function(){var t=this;["EUR","USD","GBP","JPY","NOK","SEK","DKK"].forEach(function(n){t.currencyItems.push(new e.DropdownParam(n,n))}),["monthly","quarterly","four_month_interval","semi_annually","annually"].forEach(function(n){var i=t.languageHandler.get(t.languageKey,n);t.frequencyItems.push(new e.DropdownParam(i,n))}),["german_30_360","german_30_365","french_act_360","english_act_365","isma_act_act","isma_30e_360"].forEach(function(n){var i=t.languageHandler.get(t.languageKey,n);t.calcMethodItems.push(new e.DropdownParam(i,n))})},r.prototype.getFixedRate=function(){var e=this.fixedRateBinding.get();return(InfrontUtil.parseNumber(e)/100).toString()},r.prototype.updateCalculator=function(){if(this.ready){var t=new e.CalculateSwapOptions;t.currency=this.currencyItems.item(this.currencyBinding.getSelectedIndex()).value,t.notional=InfrontUtil.parseNumber(this.notionalBinding.get()),t.frequencyFix=this.frequencyItems.item(this.fixedFrequencyBinding.getSelectedIndex()).value,t.frequencyFloat=this.frequencyItems.item(this.floatFrequencyBinding.getSelectedIndex()).value,t.interestCalculationMethodFix=this.calcMethodItems.item(this.fixedCalcMethodBinding.getSelectedIndex()).value,t.interestCalculationMethodFloat=this.calcMethodItems.item(this.floatCalcMethodBinding.getSelectedIndex()).value,t.fixIsPayer=this.fixedIsPayer.get(),t.startDate=this.startDateSelector.getDate(),t.evaluationDate=this.valueDateSelector.getDate(),t.endDate=this.maturityDateSelector.getDate(),t.firstCouponFix=this.firstCouponDateFixedSelector.getDate(),t.firstCouponFloat=this.firstCouponDateFloatSelector.getDate(),t.fixRate=InfrontUtil.parseNumber(this.fixedRateBinding.get())/100,t.floatingSpread=InfrontUtil.parseNumber(this.spreadBinding.get()),t.leverage=1,t.response=this.calculatorResponse,t.onData=this.onReceiveSwapData,t.onError=this.onReceiveErrorResponse,this.cashFlowPanel&&(this.cashFlowPanel.fixedRate=InfrontUtil.parseNumber(this.fixedRateBinding.get())),t.isIdentical(this.swapOptions)||(this.calculatorResponse.clear(),this.resultPanel.clear(),this.cashFlowPanel.clear(),this.swapOptions=t,this.infront.calculateSwap(t))}},r.prototype.returnDefaultWidgetOptions=function(){return new i},r}(e.WidgetBase);e.SwapCalculatorWidget=r;e.CashFlowDisplayItem=function(){this.date="-",this.floatingRate="-",this.floatingCashFlow="-",this.fixedRate="-",this.fixedCashFlow="-",this.netCashFlow="-",this.discountFactor="-",this.netPresentValue="-"};var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.WidgetOptions);e.SwapCalculatorCashFlowWidgetOptions=a;var s=function(t){function n(e,n,i,r){var a=t.call(this,e,n,"swapCalculator",r)||this;return a.isInitialized=!1,a}return __extends(n,t),n.prototype.newInit=function(){t.prototype.newInit.call(this)},n.prototype.clear=function(){this.cashFlowItems&&this.cashFlowItems.clear()},n.prototype.applyResult=function(t){var n=this;this.cashFlowItems.clear(),t.getArray(e.CalculatorSwapTag.swap_cash_flows).data.forEach(function(e){var t=e.present_value_fix+e.present_value_float,i=e.discount_factor_fix+e.discount_factor_float,r=t*i;e.fixedRate=n.fixedRate?InfrontUtil.formatNumber(n.fixedRate,4):"-",e.netCashFlow=t?InfrontUtil.formatNumber(t,2):"-",e.discountFactor=i?InfrontUtil.formatNumber(i,4):"-",e.netPresentValue=r?InfrontUtil.formatNumber(r,2):"-",n.cashFlowItems.push(e)})},n.prototype.displayErrorMessage=function(e,t){},n.prototype.newBuildUI=function(){this.cashFlowItems=new e.ObservableArray,e.WidgetDOMFactory.create_WSwapCalculator_cashFlow_DOM(this.element,this.cashFlowItems,this.languageHandler),t.prototype.newBuildUI.call(this),this.isInitialized=!0},n.prototype.returnDefaultWidgetOptions=function(){return new a},n}(e.WidgetBase);e.SwapCalculatorCashFlowWidget=s;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.WidgetOptions);e.SwapCalculatorResultWidgetOptions=o;var l=function(t){function n(e,n,i,r){var a=t.call(this,e,n,"swapCalculator",r)||this;return a.isInitialized=!1,a.calculatorResponse=i,a}return __extends(n,t),n.prototype.newInit=function(){t.prototype.newInit.call(this)},n.prototype.clear=function(){this.isInitialized&&(this.NPV.set(void 0),this.leg1NPV.set(void 0),this.leg2NPV.set(void 0),this.premium.set(void 0),this.parRate.set(void 0),this.principal.set(void 0),this.accrued.set(void 0),this.marketValue.set(void 0))},n.prototype.applyResult=function(e){this.isInitialized&&(this.hasValidResponse.set(!0),this.statusText.set(""))},n.prototype.displayErrorMessage=function(e,t){this.hasValidResponse.set(!1),this.statusText.set(this.languageHandler.get("calculatorStatus","statusCode_"+e))},n.prototype.newBuildUI=function(){this.NPV=this.calculatorResponse.getField(e.CalculatorSwapTag.present_value),this.leg1NPV=this.calculatorResponse.getField(e.CalculatorSwapTag.present_value_fix_leg),this.leg2NPV=this.calculatorResponse.getField(e.CalculatorSwapTag.present_value_float_leg),this.premium=this.calculatorResponse.getField(e.CalculatorSwapTag.premium),this.parRate=this.calculatorResponse.getField(e.CalculatorSwapTag.par_rate),this.principal=this.calculatorResponse.getField(e.CalculatorSwapTag.principal),this.accrued=this.calculatorResponse.getField(e.CalculatorSwapTag.accrued_interest),this.marketValue=this.calculatorResponse.getField(e.CalculatorSwapTag.total_sum),this.statusText=new e.Observable,this.hasValidResponse=new e.Observable(!1),e.WidgetDOMFactory.create_WSwapCalculator_result_DOM(this.element,this.leg1NPV,this.leg2NPV,this.NPV,this.premium,this.parRate,this.principal,this.accrued,this.marketValue,this.statusText,this.hasValidResponse,this.languageHandler),t.prototype.newBuildUI.call(this),this.isInitialized=!0},n.prototype.returnDefaultWidgetOptions=function(){return new o},n}(e.WidgetBase);e.SwapCalculatorResultWidget=l}(Infront||(Infront={})),function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columns=["TRADE_ID","TICKER","PRICE","VOLUME"],t}return __extends(t,e),t}(e.TradingTableWidgetOptions);e.TradesWidgetOptions=t;var n=function(n){function i(e,t,i){return n.call(this,e,"trades",t,i)||this}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.createArrayCacheKey=function(t){return e.CacheKeyFactory.createPortfolioTradesKey(t)},i.prototype.convertCacheKey=function(t,i){if(i.source!=e.FieldSource.Order)return n.prototype.convertCacheKey.call(this,t,i);var r=this.cache.get(t,["portfolio"]),a=this.cache.get(t,["order_id"]);return e.CacheKeyFactory.createOrderIdKey(r,a)},i.prototype.createColumn=function(t,n){return e.FieldsHelper.createFieldFromSpec(t,n,[e.FieldSource.Trade,e.FieldSource.Snapshot,e.FieldSource.Order,e.FieldSource.Unknown])},i.prototype.linkEvent=function(){},i}(e.TradingTableWidgetBase);e.TradesWidget=n}(Infront||(Infront={})),function(e){var t=function(e,t){this.key=e,this.value=t};e.LoginField=t;var n=function(){function n(t,n,i,r,a,s){var o=this;this.warningMsg=new e.Observable(""),this.infront=r,this.infrontUI=i,this.message=s||"",this.routings=t||[],this.sidPidMatches=n,this.showControls=new e.Observable,this.showControls.set(!0),this.routingSelectBinding=new e.SelectInputBinding,this.routingSelectBinding.observe(function(e){-1<e&&(o.selectedRoutingIndex=e,o.routingSelected(o.routings[e]))}),this.onKeyPress=function(t){"Enter"==t[e.MWSConstants.key]&&o.okClick(),t instanceof KeyboardEvent&&o.warningMsg.set(o.isCapsLock(t)?o.infrontUI.languageHandler.get("tradingLogin","capsLockWarning"):"")},this.onLoginFailed=function(e){o.progressIndicator.stop(),o.showControls.set(!0),o.observer.tradingLoginDialogReset(),o.message=e.message},this.onLoginSuccess=function(e){o.progressIndicator.stop(),o.hide()},this.selectedRoutingIndex=0,this.observer=a}return n.prototype.show=function(t){this.message=t||"",this.buildUI(),InfrontUtil.addEventListener(document.body,"keypress",this.onKeyPress),document.body.appendChild(this.widgetRoot),this.infront.registerEventObserver(e.TradingLoginFailedEvent.kEventName,this.onLoginFailed),this.infront.registerTradingConnectedEventObserverWithCallbackIfConnected(this.onLoginSuccess)},n.prototype.hide=function(){this.infront.unregisterEventObserver(e.TradingLoginFailedEvent.kEventName,this.onLoginFailed),this.infront.unregisterEventObserver(e.TradingConnectedEvent.kEventName,this.onLoginFailed),InfrontUtil.removeEventListener(document.body,"keypress",this.onKeyPress),this.widgetRoot&&(document.body.removeChild(this.widgetRoot),e.WidgetDOMFactory.unbindAll(this.widgetRoot),this.widgetRoot=null,this.inputContainer=null)},n.prototype.buildUI=function(){var t=this,n=e.WidgetDOMFactory.create_DTradingLogin_DOM(this.routings,this.routingSelectBinding,function(e){return t.okClick()},function(e){return t.cancelClick()},this.message,this.showControls,this.infrontUI.languageHandler);this.inputContainer=n.inputContainer,this.widgetRoot=n.widgetRoot,this.progressIndicator=new e.ProgressIndicator(this.widgetRoot),this.routingSelectBinding.setSelected(this.selectedRoutingIndex)},n.prototype.isCapsLock=function(e){if(!e.key||1<e.key.length)return!1;var t=e.shiftKey||!1,n=InfrontUtil.isLetter(e.key),i=e.key.toUpperCase();return!!(n&&i==e.key&&!t||n&&i!=e.key&&t)},n.prototype.routingSelected=function(t){if(this.inputContainer){for(this.progressIndicator.stop(),this.showControls.set(!0),this.observer.tradingLoginDialogReset(),e.WidgetDOMFactory.unbindAll(this.inputContainer);this.inputContainer.lastChild;)this.inputContainer.removeChild(this.inputContainer.lastChild);var n;if(this.inputBindings={},this.sidPidMatches.indexOf(t)<0){n=t[e.MWSConstants.input_fields];for(var i=0;i<n.length;i++)this.inputBindings[n[i][e.MWSConstants.key]]=new e.TextInputBinding}}else n=[];e.WidgetDOMFactory.create_DTradingLoginInputFields_DOM(this.inputContainer,n,this.inputBindings,this.warningMsg,this.infrontUI.languageHandler)},n.prototype.okClick=function(){this.progressIndicator.start(),this.showControls.set(!1);var n=this.routings[this.selectedRoutingIndex],i=[];for(var r in this.inputBindings)if(this.inputBindings.hasOwnProperty(r)){var a=this.inputBindings[r];i.push(new t(r,a.getElement().value))}this.observer.tradingLoginInformationProvided(n[e.MWSConstants.provider],n[e.MWSConstants.service],i),this.infrontUI.cancelClicked.set(!1)},n.prototype.cancelClick=function(){this.observer.tradingLoginDialogCanceled(),this.infrontUI.cancelClicked.set(!0),this.hide()},n}();e.TradingLoginDialog=n}(Infront||(Infront={})),function(e){var t=function(){function t(t,n,i){void 0===i&&(i=e.BlinkType.Neutral),this.clearCallback=function(){},this.boundEl=t,this.blinkType=i,this.duration=n,this.initialized=!1,this.lastValue=null,this.upClassName=e.CssConstants.kUpdateUp,this.downClassName=e.CssConstants.kUpdateDown,this.neutralClassName=e.CssConstants.kUpdateNeutral,this.upFlashClassName=e.CssConstants.kUpdateFlashUp,this.downFlashClassName=e.CssConstants.kUpdateFlashDown}return t.prototype.valueUpdated=function(t){var n=this;if(this.initialized){this.hasUpdated||(InfrontUtil.removeClassName(this.boundEl,e.CssConstants.kUpdateNone),this.hasUpdated=!0),clearTimeout(this.timeoutHandle),this.clearCallback();var i=null;if(this.blinkType==e.BlinkType.Neutral)i=this.neutralClassName;else if(this.blinkType==e.BlinkType.UpDown&&"number"==typeof t)i=t==this.lastValue?void 0:t>this.lastValue?this.upClassName:this.downClassName;else if(this.blinkType==e.BlinkType.UpDownSame&&"number"==typeof t)i=t==this.lastValue?this.neutralClassName:t>this.lastValue?this.upClassName:this.downClassName;else if(this.blinkType==e.BlinkType.UpDownFlash&&"number"==typeof t)i=t==this.lastValue?this.neutralClassName:t>this.lastValue?this.upFlashClassName:this.downFlashClassName;else if(this.blinkType==e.BlinkType.Percent){this.duration=0;var r=t/2;100<=t?InfrontUtil.addInlineStyle(this.boundEl,"background:linear-gradient(90deg, rgba(59, 231, 103, 0.4) "+r+"%, transparent "+r+"%);"):InfrontUtil.addInlineStyle(this.boundEl,"background:linear-gradient(90deg, rgba(255, 90, 90, 0.4) "+r+"%, transparent "+r+"%);")}i&&(InfrontUtil.addClassName(this.boundEl,i),this.clearCallback=function(){InfrontUtil.removeClassName(n.boundEl,i)},this.duration&&(this.timeoutHandle=setTimeout(this.clearCallback,this.duration)))}this.lastValue=t,this.initialized=!0},t}();e.CssUpdateBinding=t}(Infront||(Infront={})),function(e){function t(e,t,n){return e}function n(e){return e}var i,r;(r=i=e.SortOrder||(e.SortOrder={}))[r.Desc=0]="Desc",r[r.Asc=1]="Asc",r[r.None=2]="None";var a=function(){function t(e,t,i,r,a){void 0===r&&(r=n),this.unbinds={},this.compareFunction=i,this.sortFieldSpec=e,this.cacheKeyConverter=r,this.cache=t,this.itemValueUpdated=a}return t.prototype.compareItems=function(e,t){var n=this.cacheKeyConverter(e),i=this.cacheKeyConverter(t),r=this.cache.get(n,this.sortFieldSpec),a=this.cache.get(i,this.sortFieldSpec),s=null!=r&&!("number"==typeof r&&(isNaN(r)||!isFinite(r))),o=null!=a&&!("number"==typeof a&&(isNaN(a)||!isFinite(a)));if(s&&o){var l=this.compareFunction(r,a);return InfrontUtil.isNumber(l)?l:0}return s?-1:o?1:0},t.prototype.updateCompare=function(e,t,n,i){void 0===i&&(i=!0),this.unbindAll(),this.sortFieldSpec=t,this.compareFunction=n,i&&this.rebindItems(e)},t.prototype.bindItem=function(t){var n=this,i=t,r=e.BindingFactory.createInlineBinding(function(e){n.itemValueUpdated&&n.itemValueUpdated(t)});this.unbinds[i]=this.cache.customBind(i,this.sortFieldSpec,r)},t.prototype.unbindItem=function(e){this.unbinds[e]&&(this.unbinds[e](),delete this.unbinds[e])},t.prototype.unbindAll=function(){for(var e in this.unbinds)this.unbinds.hasOwnProperty(e)&&(this.unbinds[e](),delete this.unbinds[e])},t.prototype.rebindItems=function(e){this.unbindAll();for(var t=e.length(),n=0;n<t;n++){var i=e.item(n);this.bindItem(i)}},t}();e.CacheKeyFieldSpecSorting=a;var s=function(e){function t(t,i,r,a){void 0===a&&(a=n);var s=e.call(this)||this;return s.cacheKeySorters=[],s.cache=i,s.cacheKeyConverter=a,s.createCacheKeyConverters(t,r),s}return __extends(t,e),t.prototype.createCacheKeyConverters=function(e,t){var n=this;if(t.length==e.length){for(var i=0;i<e.length;i++)this.cacheKeySorters.push(new a(e[i],this.cache,t[i],this.cacheKeyConverter,function(e){n.itemValueUpdated(e)}));this.sort(function(e,t){return n.compareItems(e,t)});for(var r=0,s=this.cacheKeySorters;r<s.length;r++)s[r].rebindItems(this)}else InfrontUtil.errorLog("SortFields & Comparefunctions length mismatch",[e,t])},t.prototype.updateSorting=function(e,t){for(var n=0,i=this.cacheKeySorters;n<i.length;n++)i[n].unbindAll();this.cacheKeySorters=[],this.createCacheKeyConverters(e,t)},t.prototype.setSortFieldSpec=function(e){var t=this;if(e.length==this.cacheKeySorters.length){for(var n=0;n<this.cacheKeySorters.length;n++)this.cacheKeySorters[n].sortFieldSpec=e[n];this.sort(function(e,n){return t.compareItems(e,n)})}else InfrontUtil.errorLog("setSortFieldSpec - CachekeySorters & sortFieldSpecs length mismatch",[this.cacheKeySorters,e])},t.prototype.compareItems=function(e,t){for(var n=0;n<this.cacheKeySorters.length;n++){var i=this.cacheKeySorters[n].compareItems(e,t);if(0!=i)return i}return 0},t.prototype.itemValueUpdated=function(t){if(1<this.length()){var n=this.indexOf(t);if(!this.sortsAfter(t,n-1)||this.sortsAfter(t,n+1)){for(var i=Math.max(n+1,this.data.length-n),r=-1,a=1;a<=i;a++){if(this.sortsAtIndex(t,n-a)){r=n-a;break}if(this.sortsAtIndex(t,n+1+a)){r=n+a+1;break}}e.prototype.move.call(this,t,r)}}},t.prototype.sortsAtIndex=function(e,t){if(t<0)return!1;if(t>this.length())return!1;var n=0<t?this.item(t-1):null,i=t<this.length()?this.item(t):null,r=0==t||this.compareItems(n,e)<=0,a=this.compareItems(e,i)<=0;return r&&a},t.prototype.sortsAfter=function(e,t){return t<0||!(t>=this.length())&&0<=this.compareItems(e,this.item(t))},t.prototype.findInsertIndex=function(e,t,n){if(n-t<5){for(var i=t,r=t;r<=n;r++)if(0<=this.compareItems(e,this.data[r])&&(n<=r||this.compareItems(e,this.data[r+1])<=0)){i=r+1;break}return i}var a=Math.floor(t+(n-t)/2);return 0<this.compareItems(e,this.data[a])?this.findInsertIndex(e,a,n):this.findInsertIndex(e,t,a)},t.prototype.push=function(t){var n=this.findInsertIndex(t,0,this.data.length-1);e.prototype.insert.call(this,t,n);for(var i=0;i<this.cacheKeySorters.length;i++)this.cacheKeySorters[i].bindItem(t)},t.prototype.insert=function(e,t){this.push(e)},t.prototype.remove=function(t){if(-1<this.data.indexOf(t)){for(var n=0;n<this.cacheKeySorters.length;n++)this.cacheKeySorters[n].unbindItem(t);e.prototype.remove.call(this,t)}},t.prototype.removeItemAt=function(t){if(-1<t&&t<this.data.length)for(var n=this.data[t],i=0;i<this.cacheKeySorters.length;i++)this.cacheKeySorters[i].unbindItem(n);e.prototype.removeItemAt.call(this,t)},t}(e.ObservableArray),o=function(e){function t(t,i,r,a){return void 0===a&&(a=n),e.call(this,[t],i,[r],a)||this}return __extends(t,e),t}(e.ContinouslySortedCacheKeyObservableArray=s),l=function(e){function n(n,i,r,a){void 0===a&&(a=t);var s=e.call(this,n?n.getFieldSpec():[],r,n?n.getCompareFunction(i):null,function(e){return s.columnCacheKeyConverter(e,s.sortColumn,r)})||this;return s.sortColumn=n,s.sortOrder=i,s.columnCacheKeyConverter=a,s}return __extends(n,e),n.prototype.setSortColumn=function(t,n){this.sortColumn=t,this.sortOrder=n,e.prototype.updateSorting.call(this,[this.sortColumn.getFieldSpec()],[this.sortColumn.getCompareFunction(this.sortOrder)])},n.prototype.setSortOrder=function(e){this.setSortColumn(this.sortColumn,e)},n}(e.ContinouslySingleSortedCacheKeyObservableArray=o);e.ContinouslySortedColumnCacheKeyObservableArray=l;var c=function(t){function n(e,n,r,a,s,o,l){void 0===a&&(a=i.Desc),void 0===s&&(s=null),void 0===o&&(o=null),void 0===l&&(l=0);var c=t.call(this)||this;return c.cache=r,c.cap=l,c.defaultSortingField=e,c.defaultSortingFieldSpec=c.defaultSortingField?c.defaultSortingField.getFieldSpec():null,c.defaultSortOrder=a,c.sortingField=e,c.sortingFieldSpec=e?e.getFieldSpec():null,c.secondarySortingField=n,c.secondarySortingFieldSpec=n?n.getFieldSpec():null,c.sortOrder=a,c.compareFunction=s,c.secondaryCompareFunction=o,c}return __extends(n,t),n.prototype.setCap=function(e){this.cap=e;for(var t=this.data.length;e<t;t--)this.removeItemAt(t)},n.prototype.setSecondarySortingField=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!0),e?(this.secondarySortingField=e,this.secondarySortingFieldSpec=e.getFieldSpec(),this.secondaryCompareFunction=t):(this.secondarySortingField=null,this.secondarySortingFieldSpec=null),n&&this.doSetSortingField(this.sortingFieldSpec,this.sortOrder,this.compareFunction,!0)},n.prototype.getDefaultSortingColumn=function(){return this.defaultSortingField},n.prototype.setSortingField=function(e,t,n){if(void 0===t&&(t=i.Desc),void 0===n&&(n=null),t==i.None&&(e=this.defaultSortingField,t=this.defaultSortOrder),e){var r=e.getFieldSpec();(this.sortingField!=e||t!=this.sortOrder||n&&n!=this.compareFunction)&&(this.sortingField=e,this.doSetSortingField(r,t,n,!0))}else(!InfrontUtil.arraysAreEqual(this.sortingFieldSpec,r)||t!=this.sortOrder||n&&n!=this.compareFunction||!e)&&this.doSetSortingField(r,t,n,!0)},n.prototype.doSetSortingField=function(t,r,a,s){var o=this;void 0===r&&(r=i.Desc),void 0===a&&(a=null),void 0===s&&(s=!0),this.sortingFieldSpec=t,this.sortOrder=r,this.compareFunction=a,this.foreach(function(e){e.hasOwnProperty(n.unbindKey)&&(e[n.unbindKey](),delete e[n.unbindKey])}),null!=this.sortingFieldSpec&&(this.sortNow(s),this.foreach(function(t){var i=o.getInstrument(t);if(i){var r=e.CacheKeyFactory.createInstrumentKey(i),a=o.cache.customBind(r,o.sortingFieldSpec,e.BindingFactory.createInlineBinding(function(e){o.valueUpdated(t,o.getFieldValue(t),o.getFieldValue(t,!0))}));t[n.unbindKey]=a}}))},n.prototype.getFieldValue=function(t,n){void 0===n&&(n=!1);var i,r,a=null;r=n?(i=this.secondarySortingField,this.secondarySortingFieldSpec):(i=this.sortingField,this.sortingFieldSpec);var s=this.getInstrument(t);if(s&&i&&r){var o,l=e.CacheKeyFactory.createInstrumentKey(s);a=i.translate&&!i.sortUsingOriginalValue?i.translate(t,this.cache.get(l,r)):i.type==e.FieldType.Custom?i&&i.content?"function"==typeof i.content?i.content(t,s):i.content:null:this.cache.get(l,r),o=InfrontUtil.isNumber(a)?a:InfrontUtil.parseNumber(""+a)}return null!=o?o:a},n.prototype.sortNow=function(e){var n=this;void 0===e&&(e=!0);var i=[].concat(this.get());if(i.sort(function(e,t){var i=n.getFieldValue(e),r=n.getFieldValue(t),a=n.compareValues(i,r);return 0==a&&n.secondarySortingField&&(i=n.getFieldValue(e,!0),r=n.getFieldValue(t,!0),a=n.secondaryCompareValues(i,r)),a}),e)for(var r=0;r<i.length;r++)t.prototype.move.call(this,i[r],r);else this.data=i},n.prototype.compareValues=function(e,t){return null==e&&null==t?0:null==e?1:null==t?-1:null!=this.compareFunction?this.compareFunction(e,t,this.sortOrder):this.compareValuesDefault(e,t)},n.prototype.secondaryCompareValues=function(e,t){return this.secondarySortingField?null==e&&null==t?0:null==e?1:null==t?-1:null!=this.secondaryCompareFunction?this.secondaryCompareFunction(e,t,this.sortOrder):this.compareValuesDefault(e,t):0},n.prototype.compareValuesDefault=function(e,t){if(!this.sortingField)return 0;if(null==e&&null==t)return 0;if(null==e)return 1;if(null==t)return-1;var n=0;return"string"==typeof e||"string"==typeof t?this.simpleStringCompare(""+e,""+t):("number"==typeof e&&(n=this.sortOrder==i.Desc?t-e:e-t),n)},n.prototype.simpleStringCompare=function(e,t){return e=e?e.toLowerCase():e,t=t?t.toLowerCase():t,this.sortOrder==i.Desc?e<t?-1:t<e?1:0:t<e?-1:e<t?1:0},n.prototype.shouldInsertAfter=function(e,t,n){var i=this.item(n),r=this.getFieldValue(i),a=this.getFieldValue(i,!0);if(n==this.length()-1){var s=this.compareValues(r,e);return 0==s&&(s=this.secondaryCompareValues(a,t)),s<=0}var o=this.compareValues(r,e);0==o&&(o=this.secondaryCompareValues(a,t)),i=this.item(n+1);var l=this.getFieldValue(i),c=this.compareValues(e,l);if(0==c){var d=this.getFieldValue(i,!0);c=this.secondaryCompareValues(t,d)}return o<=0&&c<=0},n.prototype.sortsAfter=function(e,t,n){if(n<0)return!0;if(n>=this.length())return!1;var i=this.item(n),r=this.getFieldValue(i),a=this.compareValues(r,e);return 0==a&&(r=this.getFieldValue(i,!0),a=this.secondaryCompareValues(r,t)),a<=0},n.prototype.sortsAtIndex=function(e,t,n,i){if(i<0)return!1;if(i>this.length())return!1;var r,a,s=null,o=null;0<i&&(r=this.item(i-1),s=this.getFieldValue(r)),i<this.length()&&(a=this.item(i),o=this.getFieldValue(a));var l=this.compareValues(s,t);0==l&&(s=0<i?this.getFieldValue(r,!0):null,l=this.secondaryCompareValues(s,n));var c=this.compareValues(t,o);return 0==c&&(o=i<this.length()?this.getFieldValue(a,!0):null,c=this.secondaryCompareValues(n,o)),(0==i||l<=0)&&c<=0},n.prototype.findInsertIndex=function(e,t,n,i){if(i-n<5){for(var r=n,a=n;a<=i;a++)this.shouldInsertAfter(e,t,a)&&(r=a+1);return r}var s=Math.floor(n+(i-n)/2);return this.sortsAfter(e,t,s)?this.findInsertIndex(e,t,s,i):this.findInsertIndex(e,t,n,s)},n.prototype.valueUpdated=function(e,n,i){if(1<this.length()){var r=this.indexOf(e);if(!this.sortsAfter(n,i,r-1)||this.sortsAfter(n,i,r+1)){for(var a=Math.max(r+1,this.data.length-r),s=-1,o=1;o<=a;o++){if(this.sortsAtIndex(e,n,i,r-o)){s=r-o;break}if(this.sortsAtIndex(e,n,i,r+1+o)){s=r+o+1;break}}t.prototype.move.call(this,e,s)}this.isCapped()&&r>=this.cap&&this.removeItemIfHasSortValueAt(r)}},n.prototype.removeItemIfHasSortValueAt=function(e){var t=this.data[e];this.getFieldValue(t)&&this.remove(t)},n.prototype.isCapped=function(){return 0<this.cap},n.prototype.insert=function(i,r){var a=this;if(null==this.sortingFieldSpec)t.prototype.insert.call(this,i,r);else{var s,o=this.getInstrument(i);o&&(s=e.CacheKeyFactory.createInstrumentKey(o));var l=this.getFieldValue(i),c=this.getFieldValue(i,!0),d=this.findInsertIndex(l,c,0,this.length()-1);if((!this.isCapped()||this.cap>d)&&(t.prototype.insert.call(this,i,d),o)){var u=this.cache.customBind(s,this.sortingFieldSpec,e.BindingFactory.createInlineBinding(function(e){a.valueUpdated(i,a.getFieldValue(i),a.getFieldValue(i,!0))}));i[n.unbindKey]=u}}},n.prototype.push=function(e){null!=this.sortingField?this.insert(e,0):t.prototype.push.call(this,e)},n.prototype.remove=function(e){t.prototype.remove.call(this,e),e.hasOwnProperty(n.unbindKey)&&(e[n.unbindKey](),delete e[n.unbindKey])},n.prototype.move=function(e,n){null!=this.sortingField&&t.prototype.move.call(this,e,n)},n.prototype.removeItemAt=function(e){var i=t.prototype.removeItemAt.call(this,e);if(i.hasOwnProperty(n.unbindKey))try{i[n.unbindKey](),delete i[n.unbindKey]}catch(i){IDS.log("removeItemAt failed at index",e)}return i},n.prototype.replaceWith=function(e){this.clear();var t=this.sortingFieldSpec,n=this.sortOrder,i=this.compareFunction;this.setSortingField(null);for(var r=0;r<e.length;r++)this.data.push(e[r]);this.doSetSortingField(t,n,i,!1);for(var a=0;a<this.obs.length;a++)this.obs[a].reInit(this.data);this.updateLengthObservable()},n.prototype.getInstrument=function(e){return this.instrumentProperty?e[this.instrumentProperty]:e},n.unbindKey="_ContinouslySortedCachedInstrumentObservableArray_Unbind",n}(e.ObservableArray);e.ContinouslySortedCachedInstrumentObservableArray=c}(Infront||(Infront={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.SingleInstrumentWidgetOptions);e.ValuePairWidgetOptions=t;var n=function(n){function i(t,r,a){var s=n.call(this,t,r,i.kLanguageKey,a)||this;return s.leftColumn=e.FieldsHelper.createFieldFromSpec(s.options.leftField,s.infrontUI.languageHandler),s.rightColumn=e.FieldsHelper.createFieldFromSpec(s.options.rightField,s.infrontUI.languageHandler),s}return __extends(i,n),i.prototype.returnDefaultWidgetOptions=function(){return new t},i.prototype.newBuildUI=function(){var t=e.WidgetDOMFactory.create_WValuePair_DOM(this.element,this.leftColumn.heading,this.rightColumn.heading),i=new e.InstrumentSingleValueWidgetOptions;i.useOriginal=!0,i.instrument=this.options.instrument,i.decimals=this.options.decimals,InfrontUtil.isString(this.options.leftField)?i.name=this.options.leftField:InfrontUtil.mergeRecursive(i,this.options.leftField),this.leftWidget=new e.InstrumentSingleValueWidget(t.leftWidget,this.infrontUI,i);var r=new e.InstrumentSingleValueWidgetOptions;r.useOriginal=!0,r.instrument=this.options.instrument,r.decimals=this.options.decimals,InfrontUtil.isString(this.options.rightField)?r.name=this.options.rightField:InfrontUtil.mergeRecursive(r,this.options.rightField),this.rightWidget=new e.InstrumentSingleValueWidget(t.rightWidget,this.infrontUI,r),n.prototype.newBuildUI.call(this)},i.prototype.newDestroyUI=function(){this.leftWidget&&this.leftWidget.destroy(),this.rightWidget&&this.rightWidget.destroy(),n.prototype.newDestroyUI.call(this)},i.kLanguageKey="valuePair",i}(e.SingleInstrumentWidgetBase);e.ValuePairWidget=n}(Infront||(Infront={})),function(e){var t,n,i,r;(n=t||(t={}))[n.NewsStory=0]="NewsStory",n[n.SymbolOverview=1]="SymbolOverview",n[n.Chart=2]="Chart",n[n.Alerts=3]="Alerts",(r=i=e.CardType||(e.CardType={}))[r.None=0]="None",r[r.News=1]="News",r[r.EquityCalendar=2]="EquityCalendar",r[r.MacroCalendar=3]="MacroCalendar",r[r.MotionDetection=4]="MotionDetection",r[r.Alert=5]="Alert",e.cardTypeToStr=function(e){switch(e){case i.News:return"News";case i.EquityCalendar:return"EquityCalendar";case i.MacroCalendar:return"MacroCalendar";case i.MotionDetection:return"MotionDetection";case i.Alert:return"Alert";default:return"?"}};var a=function(){function e(){this.items={}}return e.prototype.addEvent=function(e,t){this.items[e]||(this.items[e]=[]),this.items[e].push(t)},e.prototype.getEvents=function(e){return this.items[e]},e.prototype.deleteCard=function(e){delete this.items[e]},e.prototype.moveEventToTop=function(e){var t=this,n=this.getEvents(e);this.deleteCard(e),n.forEach(function(n){t.addEvent(e,n)})},e.prototype.clear=function(){this.items={}},e}();e.EventList=a;var s="cell-w-wire__card__footer__clicker--expanded",o=function(){function t(t,n,r,a,s,o,l,c){void 0===c&&(c=null);var d=this;this.unsubscribe=function(){},this.unbinds=[],this.collapsedItems=2,this.scoreThreshold=0,this.cardType=i.None,this.infront=a,this.languageHandler=s,this.scoreThreshold=l,this.makeTerminalLinks=IDS.localTerminalLoopback||!0,this.terminalUniqueId=c,this.title=new e.Observable(t.getCaption()),this.isRead=new e.Observable(!1),this.showSymbolInfoBar=new e.Observable(!1),this.index=new e.Observable(r),this.expanded=new e.Observable(!1),this.toggleText=new e.Observable,this.listItems=new e.ObservableArray,this.timeString=new e.Observable,this.debugStr=new e.Observable,(this.showScore=n)&&this.debugStr.set(Math.round(t.metaData.eventScore).toString()),this.unixTime=new e.Observable(t.metaData.dateTime.getTime()),this.createCard(function(){d.titleClick()},function(){d.toggleClick()}),this.initialize(t),this.createBindings(s,o),this.applyEventData(t)}return t.prototype.getRoot=function(){return null},t.prototype.createCard=function(e,t){},t.prototype.initialize=function(e){},t.prototype.applyEventData=function(e){this.isRead.set(!1)},t.prototype.toggleClick=function(){this.expanded.set(!this.expanded.get())},t.prototype.titleClick=function(){IDS.log("Title clicked")},t.prototype.update=function(e,t,n){this.applyEventData(e),this.index.set(t),this.unixTime.set(e.metaData.dateTime.getTime())},t.prototype.createBindings=function(t,n){var i=this,r=e.BindingFactory.createInlineBinding(function(e){var n=(e-i.unixTime.get())/6e4;i.timeString.set(i.getTimeString(n,i.unixTime.get(),t))});n.observe(r,e.InitialUpdate.None);var a=e.BindingFactory.createInlineBinding(function(e){var r=(n.get()-e)/6e4;i.timeString.set(i.getTimeString(r,e,t))});this.unixTime.observe(a,e.InitialUpdate.Synchronous);var s=e.BindingFactory.createInlineBinding(function(e){i.expandCollapse(e)});this.expanded.observe(s,e.InitialUpdate.Synchronous)},t.prototype.expandCollapse=function(e){},t.prototype.setExpandedClass=function(e,t){e?InfrontUtil.addClassName(t,s):InfrontUtil.removeClassName(t,s)},t.prototype.getExpandCollapseLabel=function(e){return e?this.languageHandler.get("wire","collapseLabel")+" "+this.collapsedItems:this.languageHandler.get("wire","expandLabel")},t.prototype.getFeedFlagClass=function(e){var t="";if(e&&e.feedInfo){var n=IDS.CountryIdToCode(e.feedInfo.country);n&&(t="cell-flag  cell-flag-"+n.toLowerCase())}return t},t.prototype.getSymbolFullName=function(e){var t="";return e&&(t=e.getValueOrNull(IDS.RealtimeTags.FullName)+" ["+e.feedInfo.exchCode+"]"),t},t.prototype.getTimeString=function(e,t,n){return(e=Math.floor(e))<30?e<1?n.get("wire","Just now"):e<2?e+" "+n.get("wire","minuteAgo"):e+" "+n.get("wire","minutesAgo"):this.getDateOrTime(new Date(t))},t.prototype.getDateOrTime=function(e){return InfrontUtil.isToday(e)?InfrontUtil.formatDateTime(e,InfrontUtil.formatSettings.timeFormat,this.languageHandler):InfrontUtil.formatDateTime(e,InfrontUtil.formatSettings.dateTimeFormat,this.languageHandler)},t.prototype.destroy=function(){this.unsubscribe(),this.unbinds.forEach(function(e){e()})},t}(),l=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return __extends(r,n),r.prototype.getRoot=function(){return this.domElements.wireCard},r.prototype.createCard=function(t,n){this.cardType=i.News;var r=document.createElement("div");this.domElements=e.WidgetDOMFactory.create_CWireNewsCard_DOM(r,this.title,t,this.isRead,this.index,this.listItems,this.showSymbolInfoBar,this.timeString,this.debugStr,this.expanded,this.toggleText,n,this.languageHandler)},r.prototype.initialize=function(t){var n=this;this.newsEvent=t;var i=this.newsEvent.getFirstSymbol(),r=i?new e.Instrument(i.feed,i.ticker):void 0;this.instrumentObservable=new e.Observable(r);var a=t.getFlashItems();a.forEach(function(e){e.timeStr=n.getDateOrTime(e.dateTime)}),this.listItems.replaceWith(a)},r.prototype.showDebug=function(){if(IDS.DEBUG_WIRE_SYMBOLS&&this.newsEvent.symbolInfo){var e=this.newsEvent.getFirstSymbol(),t=this.infront.loginServer().getFeedExchangeCode(e.feed);this.debugStr.set(e.ticker+" ["+t+"] - "+this.debugStr.get())}},r.prototype.titleClick=function(){var t=this.newsEvent,n=new InterLibraryLink.Message;n.type=InterLibraryLink.DataType.infrontNewsItem,n.value=new e.NewsObject(IDS.NewsFlags.Event,t.getCaption(),t.metaData.dateTime.toISOString(),t.header.newsId,t.header.feed,void 0),InterLibraryLink.ControllerLinkFactory.broadcastMessage([55555],n)},r.prototype.createBindings=function(i,r){var a=this;this.unsubscribe();var s=e.BindingFactory.createInlineBinding(function(n){n?a.unsubscribe=a.infront.getSymbols([n],["LAST","PCT_CHANGE"],function(i){var r,s;a.showSymbolInfoBar.set(!0),a.domElements.feedFlag.className=a.getFeedFlagClass(i),(r=a.domElements.tickerField).innerHTML=n.ticker,r.title=a.getSymbolFullName(i),(s=a.getLink(t.SymbolOverview,a.newsEvent))&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(s),r.href=s),r.onclick=function(){var e=new InterLibraryLink.Message;e.type=InterLibraryLink.DataType.infrontInstrument,e.value=n,InterLibraryLink.ControllerLinkFactory.broadcastMessage([55555],e)},a.unbinds.push(a.infront.cache.customSymbolBind(n,IDS.RealtimeTags.ChangePct,e.BindingFactory.createInlineBinding(function(e){null!=e&&(a.domElements.todaysChangeField.innerHTML=InfrontUtil.formatPercent(e,2),a.domElements.todaysChangeField.className=0<e?"cell-status-positive":e<0?"cell-status-negative":"cell-status-neutral")}))),r=a.domElements.todaysChangeField,(s=a.getLink(t.Chart,a.newsEvent))&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(s),r.href=s),r.onclick=function(){var e=new InterLibraryLink.Message;e.type=InterLibraryLink.DataType.field,e.value={instrument:n,field:IDS.RealtimeTags.ChangePct,value:i.getValueOrNull(IDS.RealtimeTags.ChangePct)},InterLibraryLink.ControllerLinkFactory.broadcastMessage([55555],e)},a.showScore&&a.debugStr.set(Math.round(a.newsEvent.metaData.eventScore).toString())},1,!0):(a.showDebug(),a.showSymbolInfoBar.set(!1))});this.instrumentObservable.observe(s,e.InitialUpdate.Synchronous);var o=e.BindingFactory.createInlineBinding(function(e){a.expandCollapse(a.expanded.get())});this.listItems.lengthObservable.observe(o,e.InitialUpdate.None),n.prototype.createBindings.call(this,i,r)},r.prototype.expandCollapse=function(e){var t=this.listItems.lengthObservable.get();t<=this.collapsedItems?this.toggleText.set(void 0):(this.setExpandedClass(e,this.domElements.footerLink),this.toggleText.set((e?"":t+" ")+this.getExpandCollapseLabel(e)))},r.prototype.getExpandCollapseLabel=function(e){return e?this.languageHandler.get("wire","collapseLabel")+" "+this.collapsedItems:this.languageHandler.get("wire","expandLabelNews")},r.prototype.getLink=function(e,n){var i,r=this.terminalUniqueId?"&UniqueID="+this.terminalUniqueId:"";switch(e){case t.NewsStory:var a=n.header;if(this.makeTerminalLinks&&a.feed&&a.newsId)return"infront://readstory/?Feed="+a.feed+"&StoryID="+a.newsId;break;case t.SymbolOverview:if(i=n.getFirstSymbol(),this.makeTerminalLinks&&i&&i.feed&&i.ticker)return"infront://window/trade?ActivePage=Overview&FeedNu="+i.feed+"&SymbolTicker="+i.ticker+r;break;case t.Chart:if(i=n.getFirstSymbol(),this.makeTerminalLinks&&i&&i.feed&&i.ticker)return"infront://window/chart?FeedNu="+i.feed+"&SymbolTicker="+i.ticker+r}},r.prototype.applyNewsEventData=function(e){if(e.header){var n=this.getLink(t.NewsStory,e);n&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(n),this.domElements.header.href=n);var i=e.header.newsTags?e.header.newsTags:[];if(InfrontUtil.removeAllChildNodes(this.domElements.cardPills),e.header.contentType){var r=document.createElement("span");r.className="cell-w-wire__card__pill-wrapper__pill",r.innerHTML=e.header.contentType.replace(" ","&nbsp;")+" ",this.domElements.cardPills.appendChild(r)}for(var a=0,s=i;a<s.length;a++){var o=s[a],l=document.createElement("span");l.className="cell-w-wire__card__pill-wrapper__pill  cell-w-wire__card__pill-wrapper__pill--type",l.innerHTML=o.replace(" ","&nbsp;")+" ",this.domElements.cardPills.appendChild(l)}this.title.set(e.header?e.header.caption:"")}},r.prototype.applyEventData=function(e){if(n.prototype.applyEventData.call(this,e),this.applyNewsEventData(e),this.domElements&&this.domElements.wireCard){var t=e.metaData.eventScore<this.scoreThreshold?" cell-w-wire__card--filtered":"";this.domElements.wireCard.className="cell-w-wire__card"+t}},r.prototype.update=function(t,i,r){var a,s=this;if(n.prototype.update.call(this,t,i,r),this.newsEvent=t,a=this.newsEvent.getFirstSymbol()){var o=new e.Instrument(a.feed,a.ticker);e.Instrument.isSameInstrument(o,this.instrumentObservable.get())||this.instrumentObservable.set(o)}t.getFlashItems().forEach(function(e){var t=s.listItems.find(function(t){return t.newsId==e.newsId});t?(t.assign(e),t.timeStr=s.getDateOrTime(e.dateTime)):(e.timeStr=s.getDateOrTime(e.dateTime),s.listItems.insert(e,0))});var l=(a=t.getFirstSymbol())?new e.Instrument(a.feed,a.ticker):void 0;this.instrumentObservable.set(l)},r}(e.WireEventCard=o);e.WireNewsEventCard=l;var c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.getRoot=function(){return this.domElements.wireCard},n.prototype.createCard=function(t,n){this.cardType=i.EquityCalendar;var r=document.createElement("div");this.domElements=e.WidgetDOMFactory.create_CWireEquityCalendarCard_DOM(r,this.title,t,this.isRead,this.index,this.listItems,this.showSymbolInfoBar,this.timeString,this.expanded,this.toggleText,n,this.languageHandler)},n.prototype.initialize=function(e){this.showSymbolInfoBar.set(!1),this.addCalendarItem(e)},n.prototype.titleClick=function(){IDS.log("titleClick WireEquityCalendarEventCard:",this.listItems.data)},n.prototype.createBindings=function(n,i){var r=this,a=e.BindingFactory.createInlineBinding(function(e){r.expandCollapse(r.expanded.get())});this.listItems.lengthObservable.observe(a,e.InitialUpdate.None),t.prototype.createBindings.call(this,n,i)},n.prototype.getLink=function(){if(this.makeTerminalLinks){var e=[];return this.listItems.foreach(function(t){-1===e.indexOf(t.calendarFlag)&&e.push(t.calendarFlag)}),"infront://openwindow/cMarketCalendarW/"+(0<e.length?"?countries="+e.join(","):"")}return null},n.prototype.applyCalendarEventData=function(e){var t=InfrontUtil.formatDateTime(new Date,InfrontUtil.formatSettings.dateFormat,this.languageHandler);this.title.set(t+" - "+this.languageHandler.get("wire","equityCalendarEvents"));var n=this.getLink();n&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(n),this.domElements.openCalendar.href=n)},n.prototype.expandCollapse=function(e){var t=this.listItems.lengthObservable.get();t<=this.collapsedItems?this.toggleText.set(void 0):(this.setExpandedClass(e,this.domElements.footerLink),this.toggleText.set((e?"":t+" ")+this.getExpandCollapseLabel(e)))},n.prototype.applyEventData=function(e){t.prototype.applyEventData.call(this,e),this.applyCalendarEventData(e)},n.prototype.addCalendarItem=function(e){var t=e.calendarItem,n=this.listItems.find(function(e){return t.calendarType===e.calendarType&&t.calendarSubject===e.calendarSubject&&t.calendarFlag===e.calendarFlag&&t.calendarSource===e.calendarSource});n?(n.assign(t),n.flag="cell-flag cell-flag-"+t.calendarFlag.toLowerCase(),n.calendarTypeStr=this.languageHandler.get("wire","calendarType_"+t.calendarType)):(t.flag="cell-flag cell-flag-"+t.calendarFlag.toLowerCase(),t.calendarTypeStr=this.languageHandler.get("wire","calendarType_"+t.calendarType),this.listItems.push(t))},n.prototype.update=function(e,n,i){t.prototype.update.call(this,e,n,i),this.addCalendarItem(e)},n.prototype.getTimeString=function(e,t,n){return InfrontUtil.formatDateTime(new Date,InfrontUtil.formatSettings.dateFormat,n)},n}(o);e.WireEquityCalendarEventCard=c;var d=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.getRoot=function(){return this.domElements.wireCard},n.prototype.createCard=function(t,n){this.cardType=i.MacroCalendar;var r=document.createElement("div");this.domElements=e.WidgetDOMFactory.create_CWireMacroCalendarCard_DOM(r,this.title,t,this.isRead,this.index,this.listItems,this.showSymbolInfoBar,this.timeString,this.expanded,this.toggleText,n,this.languageHandler)},n.prototype.initialize=function(e){this.showSymbolInfoBar.set(!1),this.addCalendarItem(e)},n.prototype.titleClick=function(){IDS.log("titleClick WireMacroCalendarEventCard:",this.listItems.data)},n.prototype.createBindings=function(n,i){var r=this,a=e.BindingFactory.createInlineBinding(function(e){r.expandCollapse(r.expanded.get())});this.listItems.lengthObservable.observe(a,e.InitialUpdate.None),t.prototype.createBindings.call(this,n,i)},n.prototype.getLink=function(){if(this.makeTerminalLinks){var e=[];return this.listItems.foreach(function(t){-1===e.indexOf(t.calendarFlag)&&e.push(t.calendarFlag)}),"infront://openwindow/cMarketCalendarW/"+(0<e.length?"?countries="+e.join(","):"")}return null},n.prototype.applyCalendarEventData=function(e){var t=InfrontUtil.formatDateTime(new Date,InfrontUtil.formatSettings.dateFormat,this.languageHandler);this.title.set(t+" - "+this.languageHandler.get("wire","macroCalendarEvents"));var n=this.getLink();n&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(n),this.domElements.openCalendar.href=n)},n.prototype.expandCollapse=function(e){var t=this.listItems.lengthObservable.get();t<=this.collapsedItems?this.toggleText.set(void 0):(this.setExpandedClass(e,this.domElements.footerLink),this.toggleText.set((e?"":t+" ")+this.getExpandCollapseLabel(e)))},n.prototype.applyEventData=function(e){t.prototype.applyEventData.call(this,e),this.applyCalendarEventData(e)},n.prototype.addCalendarItem=function(e){var t=e.calendarItem,n=this.listItems.find(function(e){return t.calendarType===e.calendarType&&t.calendarSubject===e.calendarSubject&&t.calendarFlag===e.calendarFlag&&t.dateTime===e.dateTime&&t.calendarSource===e.calendarSource});n?(n.assign(t),n.flag="cell-flag cell-flag-"+t.calendarFlag.toLowerCase(),n.calendarTypeStr=this.languageHandler.get("wire","calendarType_"+t.calendarType)):(t.flag="cell-flag cell-flag-"+t.calendarFlag.toLowerCase(),t.calendarTypeStr=this.languageHandler.get("wire","macroType_"+t.calendarType),this.listItems.push(t))},n.prototype.update=function(e,n,i){t.prototype.update.call(this,e,n,i),this.addCalendarItem(e)},n.prototype.getTimeString=function(e,t,n){return InfrontUtil.formatDateTime(new Date,InfrontUtil.formatSettings.dateFormat,n)},n}(o);e.WireMacroCalendarEventCard=d;var u=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return __extends(r,n),r.prototype.getRoot=function(){return this.domElements.wireCard},r.prototype.createCard=function(t,n){this.cardType=i.MotionDetection;var r=document.createElement("div");this.domElements=e.WidgetDOMFactory.create_CWireMotionDetectionCard_DOM(r,this.title,t,this.isRead,this.index,this.listItems,this.showSymbolInfoBar,this.timeString,this.debugStr,this.expanded,this.toggleText,n,this.languageHandler)},r.prototype.initialize=function(t){this.motionEvent=t;var n=this.motionEvent.symbolInfo,i=n?new e.Instrument(n.feed,n.ticker):void 0;this.instrumentObservable=new e.Observable(i),this.showDebug()},r.prototype.showDebug=function(){if(IDS.DEBUG_WIRE_SYMBOLS&&this.motionEvent.symbolInfo){var e=this.motionEvent.symbolInfo,t=this.infront.getFeedExchangeCode(e.feed);this.debugStr.set(e.ticker+" ["+t+"] - "+this.debugStr.get())}},r.prototype.titleClick=function(){IDS.log("titleClick WireMotionDetectionCard:",this.motionEvent)},r.prototype.createBindings=function(i,r){var a=this;this.unsubscribe();var s=e.BindingFactory.createInlineBinding(function(n){n?a.unsubscribe=a.infront.getSymbols([n],["PCT_CHANGE"],function(i){var r,s;a.showSymbolInfoBar.set(!0),a.domElements.feedFlag.className=a.getFeedFlagClass(i),(r=a.domElements.tickerField).innerHTML=n.ticker,r.title=a.getSymbolFullName(i),(s=a.getLink(t.SymbolOverview,a.motionEvent))&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(s),r.href=s),r.onclick=function(){var e=new InterLibraryLink.Message;e.type=InterLibraryLink.DataType.infrontInstrument,e.value=n,InterLibraryLink.ControllerLinkFactory.broadcastMessage([55555],e)},a.unbinds.push(a.infront.cache.customSymbolBind(n,IDS.RealtimeTags.ChangePct,e.BindingFactory.createInlineBinding(function(e){null!=e&&(a.domElements.todaysChangeField.innerHTML=InfrontUtil.formatPercent(e,2),a.domElements.todaysChangeField.className=0<e?"cell-status-positive":e<0?"cell-status-negative":"cell-status-neutral")}))),r=a.domElements.todaysChangeField,(s=a.getLink(t.Chart,a.motionEvent))&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(s),r.href=s),r.onclick=function(){var e=new InterLibraryLink.Message;e.type=InterLibraryLink.DataType.field,e.value={instrument:n,field:IDS.RealtimeTags.ChangePct,value:i.getValueOrNull(IDS.RealtimeTags.ChangePct)},InterLibraryLink.ControllerLinkFactory.broadcastMessage([55555],e)},a.showScore&&a.debugStr.set(Math.round(a.motionEvent.metaData.eventScore).toString())},1,!0):(a.showDebug(),a.showSymbolInfoBar.set(!1))});this.instrumentObservable.observe(s,e.InitialUpdate.Synchronous),n.prototype.createBindings.call(this,i,r)},r.prototype.expandCollapse=function(e){},r.prototype.getLink=function(e,n){var i,r=this.terminalUniqueId?"&UniqueID="+this.terminalUniqueId:"";switch(e){case t.SymbolOverview:if(i=n.symbolInfo,this.makeTerminalLinks&&i&&i.feed&&i.ticker)return"infront://window/trade?ActivePage=Overview&FeedNu="+i.feed+"&SymbolTicker="+i.ticker+r;break;case t.Chart:if(i=n.symbolInfo,this.makeTerminalLinks&&i&&i.feed&&i.ticker)return"infront://window/chart?FeedNu="+i.feed+"&SymbolTicker="+i.ticker+r}},r.prototype.getDirectionStr=function(e){return 0<e?this.languageHandler.get("wire","up"):this.languageHandler.get("wire","down")},r.prototype.applyMotionDetectionData=function(e){var n=this.getLink(t.SymbolOverview,e);n&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(n),this.domElements.header.href=n),InfrontUtil.removeAllChildNodes(this.domElements.cardPills);var i=e.motionDetectionItem,r=i.motionDetectionSubType,a=this.languageHandler.get("wire","motionDetectionType_"+i.motionDetectionType),s=document.createElement("span");switch(s.className="cell-w-wire__card__pill-wrapper__pill cell-w-wire__card__pill-wrapper__pill--motion",s.innerHTML=this.languageHandler.get("wire","motionDetection"),i.motionDetectionType){case IDS.MotionDetectionType.OpenChange:a=(a=(a=a.replace("[symbol]",e.symbolInfo.ticker)).replace("[direction]",this.getDirectionStr(i.motionDetectionValue))).replace("[value]",Math.abs(i.motionDetectionValue).toFixed(2));break;case IDS.MotionDetectionType.HighLow:0<r&&r<=16?a=this.languageHandler.get("wire","highLowSubtype_"+r)+" "+InfrontUtil.formatNumber(i.motionDetectionValue,2):IDS.log("Unknown HighLow subtype",e);break;case IDS.MotionDetectionType.UnusualVolume:a=(a=a.replace("[symbol]",e.symbolInfo.ticker)).replace("[value]",i.motionDetectionValue.toFixed(1));break;case IDS.MotionDetectionType.EMA10VsLast:break;case IDS.MotionDetectionType.ChangeVsIndex:a=(a=(a=(a=(a=a.replace("[symbol]",e.symbolInfo.ticker)).replace("[direction]",this.getDirectionStr(i.motionDetectionValue))).replace("[value]",i.motionDetectionValue.toFixed(2))).replace("[ix-direction]",this.getDirectionStr(i.motionDetectionSubValue))).replace("[sub-value]",i.motionDetectionSubValue.toFixed(2));break;case IDS.MotionDetectionType.MaCross:for(var o=document.createElement("span"),l=document.createElement("span"),c=0;c<12;c++,0!=r){var d=1<<c;0<(r&d)&&(l.className="cell-w-wire__card__pill-wrapper__pill",l.innerHTML=this.languageHandler.get("wire","maCross_"+d),s.appendChild(l),l=document.createElement("span"))}o.textContent=" "+InfrontUtil.formatNumber(i.motionDetectionValue,2),s.appendChild(o);break;case IDS.MotionDetectionType.RecentNews:break;case IDS.MotionDetectionType.FiveMinChange:a=(a=(a=a.replace("[symbol]",e.symbolInfo.ticker)).replace("[direction]",this.getDirectionStr(i.motionDetectionValue))).replace("[value]",i.motionDetectionValue.toFixed(2));break;case IDS.MotionDetectionType.RegressionLine:break;case IDS.MotionDetectionType.LargeTrade:case IDS.MotionDetectionType.LargeTradeDeferred:a=(a=(a=a.replace("[symbol]",e.symbolInfo.ticker)).replace("[value]",InfrontUtil.formatAndShorten(i.motionDetectionValue,0))).replace("[sub-value]",i.motionDetectionSubValue.toFixed(2))}this.title.set(a),this.domElements.cardPills.appendChild(s)},r.prototype.applyEventData=function(e){n.prototype.applyEventData.call(this,e),this.applyMotionDetectionData(e)},r.prototype.update=function(t,i,r){n.prototype.update.call(this,t,i,r),this.motionEvent=t;var a=this.motionEvent.symbolInfo;if(a){var s=new e.Instrument(a.feed,a.ticker);e.Instrument.isSameInstrument(s,this.instrumentObservable.get())||this.instrumentObservable.set(s)}},r}(o);e.WireMotionDetectionCard=u;var h=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return __extends(r,n),r.prototype.getRoot=function(){return this.domElements.wireCard},r.prototype.createCard=function(t,n){this.cardType=i.Alert;var r=document.createElement("div");this.domElements=e.WidgetDOMFactory.create_CWireAlertCard_DOM(r,this.title,t,this.isRead,this.index,this.listItems,this.showSymbolInfoBar,this.timeString,this.expanded,this.toggleText,n,this.languageHandler)},r.prototype.initialize=function(t){this.alertEvent=t;var n=this.alertEvent.symbolInfo,i=n?new e.Instrument(n.feed,n.ticker):void 0;this.instrumentObservable=new e.Observable(i)},r.prototype.titleClick=function(){IDS.log("titleClick WireAlertCard:",this.alertEvent)},r.prototype.createBindings=function(i,r){var a=this;this.unsubscribe();var s=e.BindingFactory.createInlineBinding(function(n){n?a.unsubscribe=a.infront.getSymbols([n],["LAST","PCT_CHANGE"],function(i){var r;a.showSymbolInfoBar.set(!0),a.domElements.feedFlag.className=a.getFeedFlagClass(i);var s=a.domElements.tickerField;s.innerHTML=n.ticker,s.title=a.getSymbolFullName(i),(r=a.getLink(t.SymbolOverview,a.alertEvent))&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(r),a.domElements.tickerField.href=r),a.domElements.tickerField.onclick=function(){var e=new InterLibraryLink.Message;e.type=InterLibraryLink.DataType.infrontInstrument,e.value=n,InterLibraryLink.ControllerLinkFactory.broadcastMessage([55555],e)},a.unbinds.push(a.infront.cache.customSymbolBind(n,IDS.RealtimeTags.ChangePct,e.BindingFactory.createInlineBinding(function(e){null!=e&&(a.domElements.todaysChangeField.innerHTML=InfrontUtil.formatPercent(e,2),a.domElements.todaysChangeField.className=0<e?"cell-status-positive":e<0?"cell-status-negative":"cell-status-neutral")}))),(r=a.getLink(t.Chart,a.alertEvent))&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(r),a.domElements.todaysChangeField.href=r),a.domElements.todaysChangeField.onclick=function(){var e=new InterLibraryLink.Message;e.type=InterLibraryLink.DataType.field,e.value={instrument:n,field:IDS.RealtimeTags.ChangePct,value:i.getValueOrNull(IDS.RealtimeTags.ChangePct)},InterLibraryLink.ControllerLinkFactory.broadcastMessage([55555],e)},(r=a.getLink(t.Alerts,a.alertEvent))&&(IDS.DEBUG_WIRE_LINKS&&IDS.log(r),a.domElements.footerLink.href=r)},1,!0):a.showSymbolInfoBar.set(!1)});this.instrumentObservable.observe(s,e.InitialUpdate.Synchronous),n.prototype.createBindings.call(this,i,r)},r.prototype.expandCollapse=function(e){this.toggleText.set(this.languageHandler.get("wire","myAlerts"))},r.prototype.getLink=function(e,n){var i,r=this.terminalUniqueId?"&UniqueID="+this.terminalUniqueId:"";switch(e){case t.SymbolOverview:if(i=n.symbolInfo,this.makeTerminalLinks&&i&&i.feed&&i.ticker)return"infront://window/trade?ActivePage=Overview&FeedNu="+i.feed+"&SymbolTicker="+i.ticker+r;break;case t.Chart:if(i=n.symbolInfo,this.makeTerminalLinks&&i&&i.feed&&i.ticker)return"infront://window/chart?FeedNu="+i.feed+"&SymbolTicker="+i.ticker+r;break;case t.Alerts:return"infront://openwindow/cAlertW/"}},r.prototype.applyAlertData=function(e){var t=document.createElement("span");t.className="cell-w-wire__card__pill-wrapper__pill cell-w-wire__card__pill-wrapper__pill--alert",t.innerHTML=this.languageHandler.get("wire","alertTriggered"),this.domElements.cardPills.appendChild(t)},r.prototype.applyEventData=function(e){n.prototype.applyEventData.call(this,e),this.applyAlertData(e)},r}(o);e.WireAlertCard=h;var p=function(){this.defaultToFirstWatchList=!0,this.selectedFeeds=[]};e.WireSettings=p;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.settings=new p,t}return __extends(t,e),t}(e.PopupOptions);e.WireSettingsPopupOptions=m;var g=function(){},f=function(t){function n(e,n,i,r,a){var s=t.call(this,e,n,a)||this;return s.marketDropDownItems=[],s.settings=new p,s.languageKey="wire",s.sliderSteps=[10,33,66,90],s.onMouseDown=function(e){var t=s.container&&s.container.contains(e.srcElement),n=s.marketsDropDown.dropdownContainer&&s.marketsDropDown.dropdownContainer.contains(e.srcElement);t||n||s.cancelClick()},s.onNewsChange=function(e){s.settings.showNews=e,s.changed=!0},s.onMotionDetectionChange=function(e){s.settings.showMotionDetection=e,s.changed=!0},s.onAlertChange=function(e){s.settings.showMyAlerts=e,s.changed=!0},s.newsPositionChanged=function(e){s.settings.scoreThresholdNews=s.sliderSteps[e]},s.motionDetectionPositionChanged=function(e){s.settings.scoreThresholdMotionDetection=s.sliderSteps[e]},s.selectedMarketsChanged=function(e){var t=[];e.forEach(function(e){t.push(Number(e.feed))}),s.settings.selectedFeeds=t,s.changed=!0,s.resubscribe=!0},s.keyUp=function(e){switch(e.code){case"Enter":s.inputIsValid()&&s.okClick();break;case"Escape":s.cancelClick()}},s.options=a,s.settings=__assign({},a.settings),s.caption=i,s.languageHandler=r,s.doBuildUI(),s}return __extends(n,t),n.prototype.doBuildUI=function(){var t=this;this.disableOk=new e.Observable(!1),this.customListItems=new e.ObservableArray,this.customListBinding=new e.SelectInputBinding,this.customListBinding.observe(function(e){return t.customListChanged(e)}),this.domElements=e.WidgetDOMFactory.create_CWireSettingsPopup_DOM(this.content,this.caption,this.customListItems,this.customListBinding,this.disableOk,function(){return t.okClick()},function(){return t.cancelClick()},function(){return t.selectClick()},this.languageHandler),this.createMarketDropdown(),this.createSliders(),this.createSwitches(),this.initializeCustomListDropdown(),this.changed=!1,this.resubscribe=!1,InfrontUtil.addEventListener(document,"mousedown",this.onMouseDown),InfrontUtil.addEventListener(document,"keyup",this.keyUp)},n.prototype.createMarketDropdown=function(){var t=this,n=[],i=[];this.options.marketInfos.forEach(function(e){var r=new g;r.region=e.country,r.feed=e.feed.toString(),r.name=e.service,n.push(r),-1<t.settings.selectedFeeds.indexOf(e.feed)&&i.push(r)});var r=new e.DropDownOptions;r.title=this.languageHandler.get(this.languageKey,"selectMarkets"),r.list=n,r.itemLabelPropertyKeys=[e.MWSConstants.description,e.MWSConstants.source_name],r.multiSelect=!0,r.showToggleAll=!0,r.overridePosition="fixed",r.preSelectedItems=i,r.onSelectedItemsChanged=this.selectedMarketsChanged,this.marketsDropDown=new e.DropDown(this.domElements.markets,r,this.languageHandler,null)},n.prototype.getSliderStep=function(e){for(var t=0;t<this.sliderSteps.length;t++)if(this.sliderSteps[t]>=e)return t;return 0},n.prototype.createSliders=function(){var t=new e.SliderOptions,n=this.sliderSteps.length;t.steps=n,t.initialPosition=this.getSliderStep(this.settings.scoreThresholdNews),t.onPositionChanged=this.newsPositionChanged,new e.Slider(this.domElements.newsSlider,t);var i=new e.SliderOptions;i.steps=n,i.initialPosition=this.getSliderStep(this.settings.scoreThresholdMotionDetection),i.onPositionChanged=this.motionDetectionPositionChanged,new e.Slider(this.domElements.motionSlider,i)},n.prototype.createSwitches=function(){new e.Switch(this.domElements.newsSwitch,this.onNewsChange,this.settings.showNews,""),new e.Switch(this.domElements.motionDetectionSwitch,this.onMotionDetectionChange,this.settings.showMotionDetection,""),new e.Switch(this.domElements.alertSwitch,this.onAlertChange,this.settings.showMyAlerts,"")},n.prototype.initializeCustomListDropdown=function(){var t=this;this.customListItems.push(new e.DropdownParam(this.languageHandler.get("wire","noList"),"")),this.options.watchListTitles.foreach(function(n){t.customListItems.push(new e.DropdownParam(n,n)),n==t.options.settings.watchList&&t.customListBinding.setSelected(t.customListItems.length()-1,!1)})},n.prototype.inputIsValid=function(){return!0},n.prototype.validateInput=function(){this.disableOk.set(!this.inputIsValid())},n.prototype.customListChanged=function(e){var t=0<e?this.options.watchListTitles.item(e-1):null;this.settings.watchList!==t&&(this.changed=!0,this.resubscribe=!0)},n.prototype.selectClick=function(){},n.prototype.okClick=function(){this.options.onOkClick&&this.options.onOkClick(this.settings,this.changed,this.resubscribe),this.destroy()},n.prototype.cancelClick=function(){this.options.onCancelClick&&this.options.onCancelClick(),this.destroy()},n.prototype.destroy=function(){InfrontUtil.removeEventListener(document,"mousedown",this.onMouseDown),InfrontUtil.removeEventListener(document,"keyup",this.keyUp),this.marketsDropDown&&(this.marketsDropDown.destroy(),this.marketsDropDown=void 0),t.prototype.destroy.call(this)},n}(e.Popup),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreThresholdMotionDetection=33,t.scoreThresholdNews=33,t.displayFilteredItems=!1,t.subscribe=!0,t.showHeader=!1,t.showMotionDetection=!0,t.showNews=!0,t.showAlerts=!0,t.showScore=!1,t.showCardIndex=!1,t.maxCardCount=150,t}return __extends(t,e),t}(e.WidgetOptions);e.WireWidgetOptions=v;var y=function(t){function n(i,r,s){var o=t.call(this,i,r,"WireWidget",s)||this;o.events=new a,o.eventCards={},o.currentIndex=1e5,o.minuteTimerObservable=new e.Observable(Date.now()),o.settings=new p,o.feeds=[],o.filteredItems={},o.setupClick=function(t){t.stopPropagation();var n=new m;n.offsetY=0,n.offsetX=0,n.anchor=e.PopupAnchorLocation.TOP_RIGHT,n.arrow=!1,n.watchListTitles=o.watchListTitles,n.marketInfos=o.marketInfos,n.settings=__assign({},o.settings),n.onOkClick=o.setupOptionsChanged;var i=o.infrontUI.languageHandler.get("wire","wireSettings");o.popupDialog=new f(null,o.domElements.popupWrapper,i,o.languageHandler,n)},o.setupOptionsChanged=function(e,t,i){if(IDS.DEBUG_WIRE_SETTINGS&&IDS.log("setupOptionsChanged:",e,"Changed:",t,"Resubscribe:",i),t){if(o.settings.scoreThresholdMotionDetection!=e.scoreThresholdMotionDetection&&(e.scoreThresholdMotionDetection==o.options.scoreThresholdMotionDetection?o.clearStoredValue(n.kWireSettingScoreThresholdMotionDetectionKey):o.store(n.kWireSettingScoreThresholdMotionDetectionKey,e.scoreThresholdMotionDetection)),o.settings.scoreThresholdNews!=e.scoreThresholdNews&&(e.scoreThresholdNews==o.options.scoreThresholdNews?o.clearStoredValue(n.kWireSettingScoreThresholdNewsKey):o.store(n.kWireSettingScoreThresholdNewsKey,e.scoreThresholdNews)),o.settings.selectedFeeds!=e.selectedFeeds)if(e.selectedFeeds==o.options.selectedFeeds)o.clearStoredValue(n.kWireSettingSelectedFeedsKey);else{var r=JSON.stringify(e.selectedFeeds);o.store(n.kWireSettingSelectedFeedsKey,r)}o.settings.showMyAlerts!=e.showMyAlerts&&(e.showMyAlerts==o.options.showAlerts?o.clearStoredValue(n.kWireSettingShowAlertsKey):o.store(n.kWireSettingShowAlertsKey,e.showMyAlerts)),o.settings.showMotionDetection!=e.showMotionDetection&&(e.showMotionDetection==o.options.showMotionDetection?o.clearStoredValue(n.kWireSettingShowMotionDetectionKey):o.store(n.kWireSettingShowMotionDetectionKey,e.showMotionDetection)),o.settings.showNews!=e.showNews&&(e.showNews==o.options.showNews?o.clearStoredValue(n.kWireSettingShowNewsKey):o.store(n.kWireSettingShowNewsKey,e.showNews)),o.settings.watchList!=e.watchList&&(e.watchList==o.options.watchList?o.clearStoredValue(n.kWireSettingWatchlistKey):o.store(n.kWireSettingWatchlistKey,e.watchList)),o.settings=__assign({},e),i?(o.clearCards(),o.newUnsubscribe(),o.newSubscribe()):o.rePopulateCards(),IDS.DEBUG_WIRE_SETTINGS&&IDS.log("Filtered items:",o.filteredItems)}},o.onConnectionStatus=function(e){e?InfrontUtil.addClassName(o.domElements.connectionStatus,n.kHiddenClassname):InfrontUtil.removeClassName(o.domElements.connectionStatus,n.kHiddenClassname)},o.onWireReconnect=function(e){o.events.clear(),o.clearCards()},o.targetManager=new InfrontUtil.LinkTargetManager,o.timerId=setInterval(function(){o.minuteTimerObservable.set(Date.now())},2e4);var l,c=o.getStoredValue(n.kWireSettingWatchlistKey),d=o.getStoredValue(n.kWireSettingScoreThresholdMotionDetectionKey),u=o.getStoredValue(n.kWireSettingScoreThresholdNewsKey),h=o.getStoredValue(n.kWireSettingSelectedFeedsKey),g=o.getStoredValue(n.kWireSettingShowMotionDetectionKey),v=o.getStoredValue(n.kWireSettingShowNewsKey),y=o.getStoredValue(n.kWireSettingShowAlertsKey);return o.settings.watchList=c||o.options.watchList,o.settings.scoreThresholdMotionDetection=d||s.scoreThresholdMotionDetection,o.settings.scoreThresholdNews=u||s.scoreThresholdNews,o.settings.showMotionDetection=null!==g?g:s.showMotionDetection,o.settings.showNews=null!==v?v:s.showNews,o.settings.showMyAlerts=null!==y?y:s.showAlerts,"string"==typeof h&&(h=JSON.parse(h)),InfrontUtil.isArray(h)&&0<h.length&&(l=h),o.options.selectedFeeds=o.settings.selectedFeeds=l||s.selectedFeeds,o.displayFilteredItems=o.options.displayFilteredItems,o.watchListTitles=new e.ObservableArray,o.infront.registerEventObserver("onWireReconnect",o.onWireReconnect),o}return __extends(n,t),n.prototype.newInit=function(){t.prototype.newInit.call(this)},n.prototype.newBuildUI=function(){var n=this;this.showHeader=new e.Observable(this.options.showHeader),this.domElements=e.WidgetDOMFactory.create_WWire_DOM(this.element,this.showHeader,this.languageHandler),InfrontUtil.addEventListener(this.domElements.setupButton,"click",this.setupClick),this.marketInfos=[];var i=new e.DataOptions;i.onError=function(e,t){IDS.log("WireWidget:",e)},i.onData=function(e){e.forEach(function(e){var t=!1;n.options.feeds&&0<n.options.feeds.indexOf(e.feed)&&(n.feeds.push(e.feed),t=!0),n.options.selectedFeeds&&0<n.options.selectedFeeds.indexOf(e.feed)&&(n.settings.selectedFeeds.push(e.feed),t=!0),t&&n.marketInfos.push(e)}),IDS.DEBUG_WIRE_SYMBOLS&&IDS.log("marketLists:",n.marketInfos,n.feeds,n.settings.selectedFeeds),t.prototype.newBuildUI.call(n)},this.infront.marketLists(i)},n.prototype.canDelete=function(e){return-1<[IDS.Wire.WireEventType.News,IDS.Wire.WireEventType.MotionDetection].indexOf(e.eventType)},n.prototype.removeCard=function(e){var t=this.eventCards[e];if(IDS.log("Removing card:",e,t,this.events.items[e]),t){var n=t.getRoot();this.domElements.wireContainer.removeChild(n),this.eventCards[e].destroy(),delete this.eventCards[e],this.events.deleteCard(e)}},n.prototype.checkIfOldCardsShouldBeRemoved=function(){if(0<this.options.maxCardCount&&this.domElements.wireContainer.children.length>this.options.maxCardCount)for(var e in this.events.items){var t=this.events.items[e];if(t&&0<t.length){var n=t[0];if(this.canDelete(n))return void this.removeCard(n.cardKey())}}},n.prototype.clearCards=function(){for(var e in this.eventCards)this.eventCards[e].destroy();this.eventCards={},this.filteredItems={},InfrontUtil.removeAllChildNodes(this.domElements.wireContainer),this.currentIndex=1e5},n.prototype.rePopulateCards=function(){var e=this;for(var t in this.clearCards(),this.events.items)this.events.items[t].forEach(function(t){e.addOrUpdateCard(t)})},n.prototype.eventIsIncluded=function(e){var t=!1;switch(e.eventType){case IDS.Wire.WireEventType.News:t=this.displayFilteredItems||this.settings.showNews&&e.metaData.eventScore>=this.settings.scoreThresholdNews;break;case IDS.Wire.WireEventType.EquityCalendar:case IDS.Wire.WireEventType.MacroCalendar:t=!0;break;case IDS.Wire.WireEventType.MotionDetection:t=this.displayFilteredItems||this.settings.showMotionDetection&&e.metaData.eventScore>=this.settings.scoreThresholdMotionDetection;break;case IDS.Wire.WireEventType.Alert:t=this.settings.showMyAlerts}if(!t){var n=this.filteredItems[IDS.Wire.wireEventTypeToStr(e.eventType)];this.filteredItems[IDS.Wire.wireEventTypeToStr(e.eventType)]=n?n+1:1}return t},n.prototype.getScoreThreshold=function(e){switch(e.eventType){case IDS.Wire.WireEventType.News:return this.settings.scoreThresholdNews;case IDS.Wire.WireEventType.MotionDetection:return this.settings.scoreThresholdMotionDetection;default:return 0}},n.prototype.moveCardToTop=function(e){var t=e.cardKey(),n=this.eventCards[t],i=n.getRoot(),r=this.domElements.wireContainer;r.removeChild(i),r.insertBefore(i,r.firstChild);var a=this.currentIndex;return IDS.DEBUG_WIRE_CARDS&&IDS.log("Moving card from:",n.index.get(),"to",a,e.getCaption()?e.getCaption():e.getEventType()),n.index.set(a),this.currentIndex--,this.events.moveEventToTop(t),a},n.prototype.showScore=function(){return!this.options.showCardIndex&&this.options.showScore},n.prototype.addOrUpdateCard=function(e){var t,n=e.cardKey(),i=this.getScoreThreshold(e);if(this.eventCards[n]){var r=this.eventCards[n].index.get();t=r>this.currentIndex+2?this.moveCardToTop(e):(IDS.DEBUG_WIRE_CARDS&&IDS.log("Updating card in place:",r,e.getCaption()?e.getCaption():e.getEventType()),r),this.eventCards[n].update(e,t,i)}else if(this.eventIsIncluded(e)){var a=this.options.uniqueId;switch(e.eventType){case IDS.Wire.WireEventType.News:this.eventCards[n]=new l(e,this.showScore(),this.currentIndex,this.infront,this.infrontUI.languageHandler,this.minuteTimerObservable,i,a);break;case IDS.Wire.WireEventType.EquityCalendar:this.eventCards[n]=new c(e,this.showScore(),this.currentIndex,this.infront,this.infrontUI.languageHandler,this.minuteTimerObservable,i,a);break;case IDS.Wire.WireEventType.MacroCalendar:this.eventCards[n]=new d(e,this.showScore(),this.currentIndex,this.infront,this.infrontUI.languageHandler,this.minuteTimerObservable,i,a);break;case IDS.Wire.WireEventType.MotionDetection:this.eventCards[n]=new u(e,this.showScore(),this.currentIndex,this.infront,this.infrontUI.languageHandler,this.minuteTimerObservable,i,a);break;case IDS.Wire.WireEventType.Alert:this.eventCards[n]=new h(e,this.showScore(),this.currentIndex,this.infront,this.infrontUI.languageHandler,this.minuteTimerObservable,i,a)}var s=this.domElements.wireContainer;0<s.children.length?s.insertBefore(this.eventCards[n].getRoot(),s.firstChild):s.appendChild(this.eventCards[n].getRoot()),t=this.currentIndex,this.currentIndex--}this.options.showCardIndex&&this.eventCards[n]&&this.eventCards[n].debugStr.set(t.toString()),this.events.addEvent(n,e),this.checkIfOldCardsShouldBeRemoved()},n.prototype.processEvents=function(e){for(var t=0,n=e.streamingEvents;t<n.length;t++){var i=n[t];i&&i.metaData&&this.addOrUpdateCard(i)}for(var r=0,a=e.equityCalendarEvents;r<a.length;r++){var s=a[r];s&&s.metaData&&this.addOrUpdateCard(s)}for(var o=0,l=e.macroCalendarEvents;o<l.length;o++){var c=l[o];c&&c.metaData&&this.addOrUpdateCard(c)}},n.prototype.processAlert=function(e){var t=new IDS.Wire.WireAlertEvent(e);this.addOrUpdateCard(t)},n.prototype.newSubscribe=function(){var n=this,i=new e.WireDataOptions;i.instruments=this.options.instruments,this.settings.selectedFeeds&&this.settings.selectedFeeds.forEach(function(t){i.instruments||(i.instruments=[]),i.instruments.push(new e.Instrument(t,"ALLSYMBOLS"))}),i.thresholdMotionDetection=this.options.scoreThresholdMotionDetection,i.thresholdNews=this.options.scoreThresholdNews,i.languages=this.options.languages,i.subscribe=this.options.subscribe,i.onData=function(e){return n.processEvents(e)},i.onConnectionStatus=this.onConnectionStatus,i.onError=function(e,t){};var r=new e.DataOptions;r.onData=function(e){n.processAlert(e)},r.onError=function(e,t){IDS.log("Alerts: ","Error code: "+e+" Error message: "+t)};var a=function(){var e=n.infront.wireData(i),a=n.infront.alerts(r);n.unsubscribe=function(){e(),a()},t.prototype.newSubscribe.call(n)};if(this.settings.watchList||this.settings.defaultToFirstWatchList){var s=!this.settings.watchList&&this.settings.defaultToFirstWatchList;this.infront.getWatchlistTitles().then(function(e){var t=!1;n.watchListTitles.replaceWith(e.data),IDS.DEBUG_WIRE_WATCH_LIST&&IDS.log("watchListTitles",e.data),e.foreach(function(e){s&&!t&&(n.settings.watchList=e),e==n.settings.watchList&&(t=!0,n.infront.getWatchlistContents(n.settings.watchList).then(function(e){var t=[];e.entries.foreach(function(e){t.push(e.instrument)}),i.instruments=i.instruments?i.instruments.concat(t):t,a()}).catch(function(e){n.options.instruments&&a(),IDS.DEBUG_WIRE_WATCH_LIST&&IDS.log("WireWidget: ","getWatchListTitles failed:",e)}))}),t||(a(),IDS.DEBUG_WIRE_WATCH_LIST&&IDS.log("WireWidget: ",n.settings.watchList,"not found on server"))}).catch(function(e){n.options.instruments&&a(),IDS.DEBUG_WIRE_WATCH_LIST&&IDS.log("WireWidget: ","getWatchlistContents failed:",e)})}else a(),this.infront.getWatchlistTitles().then(function(e){n.watchListTitles.replaceWith(e.data)}).catch(function(e){IDS.log("WireWidget: ","getWatchlistContents failed:",e)})},n.prototype.newUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),t.prototype.newUnsubscribe.call(this)},n.prototype.newDestroyUI=function(){for(var e in this.eventCards)this.eventCards[e].destroy(),this.events.clear(),delete this.eventCards[e]},n.prototype.destroy=function(){clearInterval(this.timerId),t.prototype.destroy.call(this)},n.prototype.link=function(e){var t=e.accepts();-1==t.indexOf(InterLibraryLink.DataType.infrontNewsItem)&&-1==t.indexOf(InterLibraryLink.DataType.infrontInstrument)||this.targetManager.addTarget(e)},n.prototype.unlink=function(e){this.targetManager.removeTarget(e)},n.prototype.returnDefaultWidgetOptions=function(){return new v},n.kHiddenClassname="cell-display-none",n.kWireSettingWatchlistKey="Watchlist",n.kWireSettingSelectedFeedsKey="SelectedFeeds",n.kWireSettingScoreThresholdMotionDetectionKey="ScoreThresholdMotionDetection",n.kWireSettingScoreThresholdNewsKey="ScoreThresholdNews",n.kWireSettingShowAlertsKey="ShowAlerts",n.kWireSettingShowMotionDetectionKey="ShowMotionDetection",n.kWireSettingShowNewsKey="ShowNews",n}(e.WidgetBase);e.WireWidget=y}(Infront||(Infront={})),function(e){function t(e){return getComputedStyle(e)}function n(e,t){for(var n in t){var i=t[n];"number"==typeof i&&(i+="px"),e.style[n]=i}return e}function i(e){var t=document.createElement("div");return t.className=e,t}var r="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function a(e,t){if(!r)throw new Error("No element matching method supported");return r.call(e,t)}function s(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function o(e,t){return Array.prototype.filter.call(e.children,function(e){return a(e,t)})}var l="ps",c={thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},d={focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}},u={x:null,y:null};function h(e,t){var n=e.element.classList,i=d.scrolling(t);n.contains(i)?clearTimeout(u[t]):n.add(i)}function p(e,t){u[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(d.scrolling(t))},e.settings.scrollingThreshold)}var m=function(e){this.element=e,this.handlers={}},g={isEmpty:{configurable:!0}};m.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},m.prototype.unbind=function(e,t){var n=this;this.handlers[e]=this.handlers[e].filter(function(i){return!(!t||i===t)||(n.element.removeEventListener(e,i,!1),!1)})},m.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},g.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(m.prototype,g);var f=function(){this.eventElements=[]};function v(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}f.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new m(e),this.eventElements.push(t)),t},f.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},f.prototype.unbind=function(e,t,n){var i=this.eventElement(e);i.unbind(t,n),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)},f.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},f.prototype.once=function(e,t,n){var i=this.eventElement(e),r=function(e){i.unbind(t,r),n(e)};i.bind(t,r)};var y=function(e,t,n,i,r){var a;if(void 0===i&&(i=!0),void 0===r&&(r=!1),"top"===t)a=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");a=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,n,i,r){var a=n[0],s=n[1],o=n[2],l=n[3],c=n[4],d=n[5];void 0===i&&(i=!0),void 0===r&&(r=!1);var u,m,g=e.element;e.reach[l]=null,g[o]<1&&(e.reach[l]="start"),g[o]>e[a]-e[s]-1&&(e.reach[l]="end"),t&&(g.dispatchEvent(v("ps-scroll-"+l)),t<0?g.dispatchEvent(v("ps-scroll-"+c)):0<t&&g.dispatchEvent(v("ps-scroll-"+d)),i&&(h(u=e,m=l),p(u,m))),e.reach[l]&&(t||r)&&g.dispatchEvent(v("ps-"+l+"-reach-"+e.reach[l]))}(e,n,a,i,r)};function b(e){return parseInt(e,10)||0}var T={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},S=function(e){var t=e.element,i=Math.floor(t.scrollTop);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(o(t,c.rail("x")).forEach(function(e){return s(e)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(o(t,c.rail("y")).forEach(function(e){return s(e)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=C(e,b(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=b((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=C(e,b(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=b(i*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(e,t){var i={width:t.railXWidth},r=Math.floor(e.scrollTop);t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:i.left=e.scrollLeft,t.isScrollbarXUsingBottom?i.bottom=t.scrollbarXBottom-r:i.top=t.scrollbarXTop+r,n(t.scrollbarXRail,i);var a={top:r,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?a.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:a.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:a.left=t.scrollbarYLeft+e.scrollLeft,n(t.scrollbarYRail,a),n(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),n(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(t,e),e.scrollbarXActive?t.classList.add(d.active("x")):(t.classList.remove(d.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=0),e.scrollbarYActive?t.classList.add(d.active("y")):(t.classList.remove(d.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)};function C(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function I(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],m=e.element,g=null,f=null,v=null;function y(t){m[l]=g+v*(t[r]-f),h(e,c),S(e),t.stopPropagation(),t.preventDefault()}function b(){p(e,c),e[u].classList.remove(d.clicking),e.event.unbind(e.ownerDocument,"mousemove",y)}e.event.bind(e[s],"mousedown",function(t){g=m[l],f=t[r],v=(e[i]-e[n])/(e[a]-e[o]),e.event.bind(e.ownerDocument,"mousemove",y),e.event.once(e.ownerDocument,"mouseup",b),e[u].classList.add(d.clicking),t.stopPropagation(),t.preventDefault()})}var _={"click-rail":function(e){e.event.bind(e.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=n*e.containerHeight,S(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=n*e.containerWidth,S(e),t.stopPropagation()})},"drag-thumb":function(e){I(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),I(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(a(t,":hover")||a(e.scrollbarX,":focus")||a(e.scrollbarY,":focus"))){var i,r=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(r){if("IFRAME"===r.tagName)r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(a(i=r,"input,[contenteditable]")||a(i,"select,[contenteditable]")||a(i,"textarea,[contenteditable]")||a(i,"button,[contenteditable]"))return}var s=0,o=0;switch(n.which){case 37:s=n.metaKey?-e.contentWidth:n.altKey?-e.containerWidth:-30;break;case 38:o=n.metaKey?e.contentHeight:n.altKey?e.containerHeight:30;break;case 39:s=n.metaKey?e.contentWidth:n.altKey?e.containerWidth:30;break;case 40:o=n.metaKey?-e.contentHeight:n.altKey?-e.containerHeight:-30;break;case 32:o=n.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:o=e.containerHeight;break;case 34:o=-e.containerHeight;break;case 36:o=e.contentHeight;break;case 35:o=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==s||e.settings.suppressScrollY&&0!==o||(t.scrollTop-=o,t.scrollLeft+=s,S(e),function(n,i){var r=Math.floor(t.scrollTop);if(0===n){if(!e.scrollbarYActive)return!1;if(0===r&&0<i||r>=e.contentHeight-e.containerHeight&&i<0)return!e.settings.wheelPropagation}var a=t.scrollLeft;if(0===i){if(!e.scrollbarXActive)return!1;if(0===a&&n<0||a>=e.contentWidth-e.containerWidth&&0<n)return!e.settings.wheelPropagation}return!0}(s,o)&&n.preventDefault())}})},wheel:function(e){var n=e.element;function i(i){var r,a,s,o=(a=(r=i).deltaX,s=-1*r.deltaY,void 0!==a&&void 0!==s||(a=-1*r.wheelDeltaX/6,s=r.wheelDeltaY/6),r.deltaMode&&1===r.deltaMode&&(a*=10,s*=10),a!=a&&s!=s&&(a=0,s=r.wheelDelta),r.shiftKey?[-s,-a]:[a,s]),l=o[0],d=o[1];if(!function(e,i,r){if(!T.isWebKit&&n.querySelector("select:focus"))return!0;if(!n.contains(e))return!1;for(var a=e;a&&a!==n;){if(a.classList.contains(c.consuming))return!0;var s=t(a);if([s.overflow,s.overflowX,s.overflowY].join("").match(/(scroll|auto)/)){var o=a.scrollHeight-a.clientHeight;if(0<o&&!(0===a.scrollTop&&0<r||a.scrollTop===o&&r<0))return!0;var l=a.scrollWidth-a.clientWidth;if(0<l&&!(0===a.scrollLeft&&i<0||a.scrollLeft===l&&0<i))return!0}a=a.parentNode}return!1}(i.target,l,d)){var u,h,p,m,g,f,v,y=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(d?n.scrollTop-=d*e.settings.wheelSpeed:n.scrollTop+=l*e.settings.wheelSpeed,y=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(l?n.scrollLeft+=l*e.settings.wheelSpeed:n.scrollLeft-=d*e.settings.wheelSpeed,y=!0):(n.scrollTop-=d*e.settings.wheelSpeed,n.scrollLeft+=l*e.settings.wheelSpeed),S(e),(y=y||(u=l,h=d,p=Math.floor(n.scrollTop),m=0===n.scrollTop,g=p+n.offsetHeight===n.scrollHeight,f=0===n.scrollLeft,v=n.scrollLeft+n.offsetWidth===n.scrollWidth,!(Math.abs(h)>Math.abs(u)?m||g:f||v)||!e.settings.wheelPropagation))&&!i.ctrlKey&&(i.stopPropagation(),i.preventDefault())}}void 0!==window.onwheel?e.event.bind(n,"wheel",i):void 0!==window.onmousewheel&&e.event.bind(n,"mousewheel",i)},touch:function(e){if(T.supportsTouch||T.supportsIePointer){var n=e.element,i={},r=0,a={},s=null;T.supportsTouch?(e.event.bind(n,"touchstart",u),e.event.bind(n,"touchmove",h),e.event.bind(n,"touchend",p)):T.supportsIePointer&&(window.PointerEvent?(e.event.bind(n,"pointerdown",u),e.event.bind(n,"pointermove",h),e.event.bind(n,"pointerup",p)):window.MSPointerEvent&&(e.event.bind(n,"MSPointerDown",u),e.event.bind(n,"MSPointerMove",h),e.event.bind(n,"MSPointerUp",p)))}function o(t,i){n.scrollTop-=i,n.scrollLeft-=t,S(e)}function l(e){return e.targetTouches?e.targetTouches[0]:e}function d(e){return!(e.pointerType&&"pen"===e.pointerType&&0===e.buttons||(!e.targetTouches||1!==e.targetTouches.length)&&(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function u(e){if(d(e)){var t=l(e);i.pageX=t.pageX,i.pageY=t.pageY,r=(new Date).getTime(),null!==s&&clearInterval(s)}}function h(s){if(d(s)){var u=l(s),h={pageX:u.pageX,pageY:u.pageY},p=h.pageX-i.pageX,m=h.pageY-i.pageY;if(function(e,i,r){if(!n.contains(e))return!1;for(var a=e;a&&a!==n;){if(a.classList.contains(c.consuming))return!0;var s=t(a);if([s.overflow,s.overflowX,s.overflowY].join("").match(/(scroll|auto)/)){var o=a.scrollHeight-a.clientHeight;if(0<o&&!(0===a.scrollTop&&0<r||a.scrollTop===o&&r<0))return!0;var l=a.scrollLeft-a.clientWidth;if(0<l&&!(0===a.scrollLeft&&i<0||a.scrollLeft===l&&0<i))return!0}a=a.parentNode}return!1}(s.target,p,m))return;o(p,m),i=h;var g=(new Date).getTime(),f=g-r;0<f&&(a.x=p/f,a.y=m/f,r=g),function(t,i){var r=Math.floor(n.scrollTop),a=n.scrollLeft,s=Math.abs(t),o=Math.abs(i);if(s<o){if(i<0&&r===e.contentHeight-e.containerHeight||0<i&&0===r)return 0===window.scrollY&&0<i&&T.isChrome}else if(o<s&&(t<0&&a===e.contentWidth-e.containerWidth||0<t&&0===a))return!0;return!0}(p,m)&&s.preventDefault()}}function p(){e.settings.swipeEasing&&(clearInterval(s),s=setInterval(function(){e.isInitialized?clearInterval(s):a.x||a.y?Math.abs(a.x)<.01&&Math.abs(a.y)<.01?clearInterval(s):(o(30*a.x,30*a.y),a.x*=.8,a.y*=.8):clearInterval(s)},10))}}},M=function(e,r){var a=this;if(void 0===r&&(r={}),"string"==typeof e&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var s in(this.element=e).classList.add(l),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},r)a.settings[s]=r[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o,u,h=function(){return e.classList.add(d.focus)},p=function(){return e.classList.remove(d.focus)};this.isRtl="rtl"===t(e).direction,this.isNegativeScroll=(u=e.scrollLeft,e.scrollLeft=-1,o=e.scrollLeft<0,e.scrollLeft=u,o),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new f,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=i(c.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=i(c.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",h),this.event.bind(this.scrollbarX,"blur",p),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var m=t(this.scrollbarXRail);this.scrollbarXBottom=parseInt(m.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=b(m.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=b(m.borderLeftWidth)+b(m.borderRightWidth),n(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=b(m.marginLeft)+b(m.marginRight),n(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i(c.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=i(c.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",h),this.event.bind(this.scrollbarY,"blur",p),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var g,v=t(this.scrollbarYRail);this.scrollbarYRight=parseInt(v.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=b(v.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?b((g=t(this.scrollbarY)).width)+b(g.paddingLeft)+b(g.paddingRight)+b(g.borderLeftWidth)+b(g.borderRightWidth):null,this.railBorderYWidth=b(v.borderTopWidth)+b(v.borderBottomWidth),n(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=b(v.marginTop)+b(v.marginBottom),n(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return _[e](a)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(e){return a.onScroll(e)}),S(this)};M.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,n(this.scrollbarXRail,{display:"block"}),n(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=b(t(this.scrollbarXRail).marginLeft)+b(t(this.scrollbarXRail).marginRight),this.railYMarginHeight=b(t(this.scrollbarYRail).marginTop)+b(t(this.scrollbarYRail).marginBottom),n(this.scrollbarXRail,{display:"none"}),n(this.scrollbarYRail,{display:"none"}),S(this),y(this,"top",0,!1,!0),y(this,"left",0,!1,!0),n(this.scrollbarXRail,{display:""}),n(this.scrollbarYRail,{display:""}))},M.prototype.onScroll=function(e){this.isAlive&&(S(this),y(this,"top",this.element.scrollTop-this.lastScrollTop),y(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},M.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),s(this.scrollbarX),s(this.scrollbarY),s(this.scrollbarXRail),s(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},M.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")},e.PerfectScrollbar=M}(Infront||(Infront={})),function(e,t){"object"==typeof module&&module.exports?(t.default=t,module.exports=e.document?t(e):t):"function"==typeof define&&define.amd?define("highcharts/highstock",function(){return t(e)}):(e.Highcharts&&e.Highcharts.error(16,!0),e.Highcharts=t(e))}("undefined"!=typeof window?window:this,function(e){function t(e,t,n,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,n))}var n={};return t(n,"parts/Globals.js",[],function(){var t=void 0!==e?e:"undefined"!=typeof window?window:{},n=t.document,i=t.navigator&&t.navigator.userAgent||"",r=n&&n.createElementNS&&!!n.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a=/(edge|msie|trident)/i.test(i)&&!t.opera,s=-1!==i.indexOf("Firefox"),o=-1!==i.indexOf("Chrome"),l=s&&4>parseInt(i.split("Firefox/")[1],10);return{product:"Highcharts",version:"7.2.0",deg2rad:2*Math.PI/360,doc:n,hasBidiBug:l,hasTouch:!!t.TouchEvent,isMS:a,isWebKit:-1!==i.indexOf("AppleWebKit"),isFirefox:s,isChrome:o,isSafari:!o&&-1!==i.indexOf("Safari"),isTouchDevice:/(Mobile|Android|Windows Phone)/.test(i),SVG_NS:"http://www.w3.org/2000/svg",chartCount:0,seriesTypes:{},symbolSizes:{},svg:r,win:t,marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){},charts:[],dateFormats:{}}}),t(n,"parts/Utilities.js",[n["parts/Globals.js"]],function(e){function t(e,t){return parseInt(e,t||10)}function n(e){return"string"==typeof e}function i(e){return"[object Array]"===(e=Object.prototype.toString.call(e))||"[object Array Iterator]"===e}function r(e,t){return!(!e||"object"!=typeof e||t&&i(e))}function a(e){return r(e)&&"number"==typeof e.nodeType}function s(e){var t=e&&e.constructor;return!(!r(e,!0)||a(e)||!t||!t.name||"Object"===t.name)}function o(e){return"number"==typeof e&&!isNaN(e)&&1/0>e&&-1/0<e}function l(e){return null!=e}function c(e,t,i){var r;return n(t)?l(i)?e.setAttribute(t,i):e&&e.getAttribute&&((r=e.getAttribute(t))||"class"!==t||(r=e.getAttribute(t+"Name"))):d(t,function(t,n){e.setAttribute(n,t)}),r}function d(e,t,n){for(var i in e)Object.hasOwnProperty.call(e,i)&&t.call(n||e[i],e[i],i,e)}e.timers=[];var u,h,p=e.charts,m=e.doc,g=e.win;return e.error=function(t,n,i){var r=o(t)?"Highcharts error #"+t+": www.highcharts.com/errors/"+t:t,a=function(){if(n)throw Error(r);g.console&&console.log(r)};i?e.fireEvent(i,"displayError",{code:t,message:r},a):a()},e.Fx=function(e,t,n){this.options=t,this.elem=e,this.prop=n},e.Fx.prototype={dSetter:function(){var e=this.paths[0],t=this.paths[1],n=[],i=this.now,r=e.length;if(1===i)n=this.toD;else if(r===t.length&&1>i)for(;r--;){var a=parseFloat(e[r]);n[r]=isNaN(a)?t[r]:i*parseFloat(""+(t[r]-a))+a}else n=t;this.elem.attr("d",n,null,!0)},update:function(){var e=this.elem,t=this.prop,n=this.now,i=this.options.step;this[t+"Setter"]?this[t+"Setter"]():e.attr?e.element&&e.attr(t,n,null,!0):e.style[t]=n+this.unit,i&&i.call(e,n,this)},run:function(t,n,i){var r=this,a=r.options,s=function(e){return!s.stopped&&r.step(e)},o=g.requestAnimationFrame||function(e){setTimeout(e,13)},l=function(){for(var t=0;t<e.timers.length;t++)e.timers[t]()||e.timers.splice(t--,1);e.timers.length&&o(l)};t!==n||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=t,this.end=n,this.unit=i,this.now=this.start,this.pos=0,s.elem=this.elem,s.prop=this.prop,s()&&1===e.timers.push(s)&&o(l)):(delete a.curAnim[this.prop],a.complete&&0===Object.keys(a.curAnim).length&&a.complete.call(this.elem))},step:function(e){var t=+new Date,n=this.options,i=this.elem,r=n.complete,a=n.duration,s=n.curAnim;if(i.attr&&!i.element)e=!1;else if(e||t>=a+this.startTime){this.now=this.end,this.pos=1,this.update();var o=s[this.prop]=!0;d(s,function(e){!0!==e&&(o=!1)}),o&&r&&r.call(i),e=!1}else this.pos=n.easing((t-this.startTime)/a),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0;return e},initPath:function(e,t,n){function i(e){for(l=e.length;l--;){var t="M"===e[l]||"L"===e[l],n=/[a-zA-Z]/.test(e[l+3]);t&&n&&e.splice(l+1,0,e[l+1],e[l+2],e[l+1],e[l+2])}}function r(e,t){for(;e.length<v;){e[0]=t[v-e.length];var n=e.slice(0,h);[].splice.apply(e,[0,0].concat(n)),p&&(n=e.slice(e.length-h),[].splice.apply(e,[e.length,0].concat(n)),l--)}e[0]="M"}function a(e,t){for(var n=(v-e.length)/h;0<n&&n--;)(s=e.slice().splice(e.length/m-h,h*m))[0]=t[v-h-n*h],u&&(s[h-6]=s[h-2],s[h-5]=s[h-1]),[].splice.apply(e,[e.length/m,0].concat(s)),p&&n--}t=t||"";var s,l,c=e.startX,d=e.endX,u=-1<t.indexOf("C"),h=u?7:3;t=t.split(" "),n=n.slice();var p=e.isArea,m=p?2:1;if(u&&(i(t),i(n)),c&&d){for(l=0;l<c.length;l++){if(c[l]===d[0]){var g=l;break}if(c[0]===d[d.length-c.length+l]){g=l;var f=!0;break}if(c[c.length-1]===d[d.length-c.length+l]){g=c.length-l;break}}void 0===g&&(t=[])}if(t.length&&o(g)){var v=n.length+g*m*h;f?(r(t,n),a(n,t)):(r(n,t),a(t,n))}return[t,n]},fillSetter:function(){e.Fx.prototype.strokeSetter.apply(this,arguments)},strokeSetter:function(){this.elem.attr(this.prop,e.color(this.start).tweenTo(e.color(this.end),this.pos),null,!0)}},e.merge=function(){var e,t=arguments,n={},i=function(e,t){return"object"!=typeof e&&(e={}),d(t,function(n,o){!r(n,!0)||s(n)||a(n)?e[o]=t[o]:e[o]=i(e[o]||{},n)}),e};!0===t[0]&&(n=t[1],t=Array.prototype.slice.call(t,2));var o=t.length;for(e=0;e<o;e++)n=i(n,t[e]);return n},e.syncTimeout=function(e,t,n){if(t)return setTimeout(e,t,n);e.call(0,n)},e.clearTimeout=function(e){l(e)&&clearTimeout(e)},e.extend=function(e,t){var n;for(n in e||(e={}),t)e[n]=t[n];return e},e.pick=function(){var e,t=arguments,n=t.length;for(e=0;e<n;e++){var i=t[e];if(null!=i)return i}},e.css=function(t,n){e.isMS&&!e.svg&&n&&void 0!==n.opacity&&(n.filter="alpha(opacity="+100*n.opacity+")"),e.extend(t.style,n)},e.createElement=function(t,n,i,r,a){t=m.createElement(t);var s=e.css;return n&&e.extend(t,n),a&&s(t,{padding:"0",border:"none",margin:"0"}),i&&s(t,i),r&&r.appendChild(t),t},e.extendClass=function(t,n){var i=function(){};return i.prototype=new t,e.extend(i.prototype,n),i},e.pad=function(e,t,n){return Array((t||2)+1-String(e).replace("-","").length).join(n||"0")+e},e.relativeLength=function(e,t,n){return/%$/.test(e)?t*parseFloat(e)/100+(n||0):parseFloat(e)},e.wrap=function(e,t,n){var i=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments),t=arguments,r=this;return r.proceed=function(){i.apply(r,arguments.length?arguments:t)},e.unshift(i),e=n.apply(this,e),r.proceed=null,e}},e.datePropsToTimestamps=function(t){d(t,function(n,a){r(n)&&"function"==typeof n.getTime?t[a]=n.getTime():(r(n)||i(n))&&e.datePropsToTimestamps(n)})},e.formatSingle=function(t,n,i){var r=e.defaultOptions.lang;return/f$/.test(t)?(i=(i=t.match(/\.([0-9])/))?i[1]:-1,null!==n&&(n=e.numberFormat(n,i,r.decimalPoint,-1<t.indexOf(",")?r.thousandsSep:""))):n=(i||e.time).dateFormat(t,n),n},e.format=function(t,n,i){for(var r,a,s,o,l,c="{",d=!1,u=[];t&&-1!==(c=t.indexOf(c));){if(r=t.slice(0,c),d){for(o=(a=(r=r.split(":")).shift().split(".")).length,l=n,s=0;s<o;s++)l&&(l=l[a[s]]);r.length&&(l=e.formatSingle(r.join(":"),l,i)),u.push(l)}else u.push(r);t=t.slice(c+1),c=(d=!d)?"}":"{"}return u.push(t),u.join("")},e.getMagnitude=function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},e.normalizeTickInterval=function(t,n,i,r,a){var s=t,o=t/(i=e.pick(i,1));for(n||(n=a?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===r&&(1===i?n=n.filter(function(e){return 0==e%1}):.1>=i&&(n=[1/i]))),r=0;r<n.length&&(s=n[r],!(a&&s*i>=t||!a&&o<=(n[r]+(n[r+1]||n[r]))/2));r++);return e.correctFloat(s*i,-Math.round(Math.log(.001)/Math.LN10))},e.stableSort=function(e,t){var n,i,r=e.length;for(i=0;i<r;i++)e[i].safeI=i;for(e.sort(function(e,i){return 0===(n=t(e,i))?e.safeI-i.safeI:n}),i=0;i<r;i++)delete e[i].safeI},e.arrayMin=function(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n},e.arrayMax=function(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n},e.destroyObjectProperties=function(e,t){d(e,function(n,i){n&&n!==t&&n.destroy&&n.destroy(),delete e[i]})},e.discardElement=function(t){var n=e.garbageBin;n||(n=e.createElement("div")),t&&n.appendChild(t),n.innerHTML=""},e.correctFloat=function(e,t){return parseFloat(e.toPrecision(t||14))},e.setAnimation=function(t,n){n.renderer.globalAnimation=e.pick(t,n.options.chart.animation,!0)},e.animObject=function(t){return r(t)?e.merge(t):{duration:t?500:0}},e.timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},e.numberFormat=function(n,i,r,a){n=+n||0,i=+i;var s=e.defaultOptions.lang,l=(n.toString().split(".")[1]||"").split("e")[0].length,c=n.toString().split("e");if(-1===i)i=Math.min(l,20);else if(o(i)){if(i&&c[1]&&0>c[1]){var d=i+ +c[1];0<=d?(c[0]=(+c[0]).toExponential(d).split("e")[0],i=d):(c[0]=c[0].split(".")[0]||0,n=20>i?(c[0]*Math.pow(10,c[1])).toFixed(i):0,c[1]=0)}}else i=2;var u=(Math.abs(c[1]?c[0]:n)+Math.pow(10,-Math.max(i,l)-1)).toFixed(i);return d=3<(l=String(t(u))).length?l.length%3:0,r=e.pick(r,s.decimalPoint),a=e.pick(a,s.thousandsSep),n=(0>n?"-":"")+(d?l.substr(0,d)+a:""),n+=l.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+a),i&&(n+=r+u.slice(-i)),c[1]&&0!=+n&&(n+="e"+c[1]),n},Math.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)},e.getStyle=function(n,i,r){return"width"===i?(i=Math.min(n.offsetWidth,n.scrollWidth),(r=n.getBoundingClientRect&&n.getBoundingClientRect().width)<i&&r>=i-1&&(i=Math.floor(r)),Math.max(0,i-e.getStyle(n,"padding-left")-e.getStyle(n,"padding-right"))):"height"===i?Math.max(0,Math.min(n.offsetHeight,n.scrollHeight)-e.getStyle(n,"padding-top")-e.getStyle(n,"padding-bottom")):(g.getComputedStyle||e.error(27,!0),(n=g.getComputedStyle(n,void 0))&&(n=n.getPropertyValue(i),e.pick(r,"opacity"!==i)&&(n=t(n))),n)},e.inArray=function(e,t,n){return t.indexOf(e,n)},e.find=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){var n,i=e.length;for(n=0;n<i;n++)if(t(e[n],n))return e[n]},e.keys=Object.keys,e.offset=function(e){var t=m.documentElement;return{top:(e=e.parentElement||e.parentNode?e.getBoundingClientRect():{top:0,left:0}).top+(g.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(g.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}},e.stop=function(t,n){for(var i=e.timers.length;i--;)e.timers[i].elem!==t||n&&n!==e.timers[i].prop||(e.timers[i].stopped=!0)},d({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(t,n){e[n]=function(e){return Array.prototype[t].apply(e,[].slice.call(arguments,1))}}),e.addEvent=function(t,n,i,r){void 0===r&&(r={});var a=t.addEventListener||e.addEventListenerPolyfill,s="function"==typeof t&&t.prototype?t.prototype.protoEvents=t.prototype.protoEvents||{}:t.hcEvents=t.hcEvents||{};return e.Point&&t instanceof e.Point&&t.series&&t.series.chart&&(t.series.chart.runTrackerClick=!0),a&&a.call(t,n,i,!1),s[n]||(s[n]=[]),s[n].push({fn:i,order:"number"==typeof r.order?r.order:1/0}),s[n].sort(function(e,t){return e.order-t.order}),function(){e.removeEvent(t,n,i)}},e.removeEvent=function(t,n,i){function r(n,i){var r=t.removeEventListener||e.removeEventListenerPolyfill;r&&r.call(t,n,i,!1)}function a(e){var i;if(t.nodeName){if(n){var a={};a[n]=!0}else a=e;d(a,function(t,n){if(e[n])for(i=e[n].length;i--;)r(n,e[n][i].fn)})}}var s;["protoEvents","hcEvents"].forEach(function(e){var o=t[e];o&&(n?(s=o[n]||[],i?(o[n]=s.filter(function(e){return i!==e.fn}),r(n,i)):(a(o),o[n]=[])):(a(o),t[e]={}))})},e.fireEvent=function(t,n,i,r){var a;if(i=i||{},m.createEvent&&(t.dispatchEvent||t.fireEvent)){var s=m.createEvent("Events");s.initEvent(n,!0,!0),e.extend(s,i),t.dispatchEvent?t.dispatchEvent(s):t.fireEvent(n,s)}else i.target||e.extend(i,{preventDefault:function(){i.defaultPrevented=!0},target:t,type:n}),function(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]);var r=0,s=0,o=e.length+n.length;for(a=0;a<o;a++)!1===(e[r]?n[s]?e[r].order<=n[s].order?e[r++]:n[s++]:e[r++]:n[s++]).fn.call(t,i)&&i.preventDefault()}(t.protoEvents&&t.protoEvents[n],t.hcEvents&&t.hcEvents[n]);r&&!i.defaultPrevented&&r.call(t,i)},e.animate=function(t,n,i){var a,s,l,c="";if(!r(i)){var u=arguments;i={duration:u[2],easing:u[3],complete:u[4]}}o(i.duration)||(i.duration=400),i.easing="function"==typeof i.easing?i.easing:Math[i.easing]||Math.easeInOutSine,i.curAnim=e.merge(n),d(n,function(r,o){e.stop(t,o),l=new e.Fx(t,i,o),s=null,"d"===o?(l.paths=l.initPath(t,t.d,n.d),l.toD=n.d,a=0,s=1):t.attr?a=t.attr(o):(a=parseFloat(e.getStyle(t,o))||0,"opacity"!==o&&(c="px")),s||(s=r),s&&s.match&&s.match("px")&&(s=s.replace(/px/g,"")),l.run(a,s,c)})},e.seriesType=function(t,n,i,r,a){var s=e.getOptions(),o=e.seriesTypes;return s.plotOptions[t]=e.merge(s.plotOptions[n],i),o[t]=e.extendClass(o[n]||function(){},r),o[t].prototype.type=t,a&&(o[t].prototype.pointClass=e.extendClass(e.Point,a)),o[t]},e.uniqueKey=(u=Math.random().toString(36).substring(2,9),h=0,function(){return"highcharts-"+u+"-"+h++}),e.isFunction=function(e){return"function"==typeof e},g.jQuery&&(g.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0])return t[0]?(new(e[n(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):p[c(this[0],"data-highcharts-chart")]}),{attr:c,defined:l,erase:function(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}},isArray:i,isClass:s,isDOMElement:a,isNumber:o,isObject:r,isString:n,objectEach:d,pInt:t,splat:function(e){return i(e)?e:[e]}}}),t(n,"parts/Color.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.isNumber,i=t.pInt,r=e.merge;e.Color=function(t){if(!(this instanceof e.Color))return new e.Color(t);this.init(t)},e.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(e){return[i(e[1]),i(e[2]),i(e[3]),parseFloat(e[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(e){return[i(e[1]),i(e[2]),i(e[3]),1]}}],names:{white:"#ffffff",black:"#000000"},init:function(t){var n,i;if((this.input=t=this.names[t&&t.toLowerCase?t.toLowerCase():""]||t)&&t.stops)this.stops=t.stops.map(function(t){return new e.Color(t[1])});else{if(t&&t.charAt&&"#"===t.charAt()){var r=t.length;t=parseInt(t.substr(1),16),7===r?n=[(16711680&t)>>16,(65280&t)>>8,255&t,1]:4===r&&(n=[(3840&t)>>4|(3840&t)>>8,(240&t)>>4|240&t,(15&t)<<4|15&t,1])}if(!n)for(i=this.parsers.length;i--&&!n;){var a=this.parsers[i];(r=a.regex.exec(t))&&(n=a.parse(r))}}this.rgba=n||[]},get:function(e){var t=this.input,i=this.rgba;if(this.stops){var a=r(t);a.stops=[].concat(a.stops),this.stops.forEach(function(t,n){a.stops[n]=[a.stops[n][0],t.get(e)]})}else a=i&&n(i[0])?"rgb"===e||!e&&1===i[3]?"rgb("+i[0]+","+i[1]+","+i[2]+")":"a"===e?i[3]:"rgba("+i.join(",")+")":t;return a},brighten:function(e){var t,r=this.rgba;if(this.stops)this.stops.forEach(function(t){t.brighten(e)});else if(n(e)&&0!==e)for(t=0;3>t;t++)r[t]+=i(255*e),0>r[t]&&(r[t]=0),255<r[t]&&(r[t]=255);return this},setOpacity:function(e){return this.rgba[3]=e,this},tweenTo:function(e,t){var n=this.rgba,i=e.rgba;return i.length&&n&&n.length?t=((e=1!==i[3]||1!==n[3])?"rgba(":"rgb(")+Math.round(i[0]+(n[0]-i[0])*(1-t))+","+Math.round(i[1]+(n[1]-i[1])*(1-t))+","+Math.round(i[2]+(n[2]-i[2])*(1-t))+(e?","+(i[3]+(n[3]-i[3])*(1-t)):"")+")":t=e.input||"none",t}},e.color=function(t){return new e.Color(t)}}),t(n,"parts/SvgRenderer.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.attr,i=t.defined,r=t.erase,a=t.isArray,s=t.isNumber,o=t.isObject,l=t.isString,c=t.objectEach,d=t.pInt,u=t.splat,h=e.addEvent,p=e.animate,m=e.charts,g=e.color,f=e.css,v=e.createElement,y=e.deg2rad,b=e.destroyObjectProperties,T=e.doc,S=e.extend,C=e.hasTouch,I=e.isFirefox,_=e.isMS,M=e.isWebKit,E=e.merge,w=e.noop,A=e.pick,D=e.removeEvent,O=e.stop,k=e.svg,R=e.SVG_NS,N=e.symbolSizes,L=e.win,P=e.SVGElement=function(){return this};S(P.prototype,{opacity:1,SVG_NS:R,textProps:"direction fontSize fontWeight fontFamily fontStyle color lineHeight width textAlign textDecoration textOverflow textOutline cursor".split(" "),init:function(t,n){this.element="span"===n?v(n):T.createElementNS(this.SVG_NS,n),this.renderer=t,e.fireEvent(this,"afterInit")},animate:function(t,n,i){var r=e.animObject(A(n,this.renderer.globalAnimation,!0));return A(T.hidden,T.msHidden,T.webkitHidden,!1)&&(r.duration=0),0!==r.duration?(i&&(r.complete=i),p(this,t,r)):(this.attr(t,void 0,i),c(t,function(e,t){r.step&&r.step.call(this,e,{prop:t,pos:1})},this)),this},complexColor:function(t,n,r){var s,o,l,d,u,h,p,m,g,f,v,y,b=this.renderer,T=[];e.fireEvent(this.renderer,"complexColor",{args:arguments},function(){t.radialGradient?o="radialGradient":t.linearGradient&&(o="linearGradient"),o&&(l=t[o],u=b.gradients,p=t.stops,f=r.radialReference,a(l)&&(t[o]=l={x1:l[0],y1:l[1],x2:l[2],y2:l[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&f&&!i(l.gradientUnits)&&(d=l,l=E(l,b.getRadialAttr(f,d),{gradientUnits:"userSpaceOnUse"})),c(l,function(e,t){"id"!==t&&T.push(t,e)}),c(p,function(e){T.push(e)}),T=T.join(","),u[T]?v=u[T].attr("id"):(l.id=v=e.uniqueKey(),u[T]=h=b.createElement(o).attr(l).add(b.defs),h.radAttr=d,h.stops=[],p.forEach(function(t){0===t[1].indexOf("rgba")?(s=e.color(t[1]),m=s.get("rgb"),g=s.get("a")):(m=t[1],g=1),t=b.createElement("stop").attr({offset:t[0],"stop-color":m,"stop-opacity":g}).add(h),h.stops.push(t)})),y="url("+b.url+"#"+v+")",r.setAttribute(n,y),r.gradient=T,t.toString=function(){return y})})},applyTextOutline:function(t){var i,r=this.element;-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(r.style.fill)));var a=(t=t.split(" "))[t.length-1];if((i=t[0])&&"none"!==i&&e.svg){this.fakeTS=!0,t=[].slice.call(r.getElementsByTagName("tspan")),this.ySetter=this.xSetter,i=i.replace(/(^[\d\.]+)(.*?)$/g,function(e,t,n){return 2*t+n}),this.removeTextOutline(t);var s=r.firstChild;t.forEach(function(e,t){0===t&&(e.setAttribute("x",r.getAttribute("x")),t=r.getAttribute("y"),e.setAttribute("y",t||0),null===t&&r.setAttribute("y",0)),e=e.cloneNode(1),n(e,{class:"highcharts-text-outline",fill:a,stroke:a,"stroke-width":i,"stroke-linejoin":"round"}),r.insertBefore(e,s)})}},removeTextOutline:function(e){for(var t,n=e.length;n--;)"highcharts-text-outline"===(t=e[n]).getAttribute("class")&&r(e,this.element.removeChild(t))},symbolCustomAttribs:"x y width height r start end innerR anchorX anchorY rounded".split(" "),attr:function(t,n,i,r){var a,s,o,l=this.element,d=this,u=this.symbolCustomAttribs;if("string"==typeof t&&void 0!==n){var h=t;(t={})[h]=n}return"string"==typeof t?d=(this[t+"Getter"]||this._defaultGetter).call(this,t,l):(c(t,function(n,i){s=!1,r||O(this,i),this.symbolName&&-1!==e.inArray(i,u)&&(a||(this.symbolAttr(t),a=!0),s=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),s||((o=this[i+"Setter"]||this._defaultSetter).call(this,n,i,l),!this.styledMode&&this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,n,o))},this),this.afterSetters()),i&&i.call(this),d},afterSetters:function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},updateShadows:function(e,t,n){for(var i=this.shadows,r=i.length;r--;)n.call(i[r],"height"===e?Math.max(t-(i[r].cutHeight||0),0):"d"===e?this.d:t,e,i[r])},addClass:function(e,t){var n=this.attr("class")||"";return t||(e=(e||"").split(/ /g).reduce(function(e,t){return-1===n.indexOf(t)&&e.push(t),e},n?[n]:[]).join(" ")),e!==n&&this.attr("class",e),this},hasClass:function(e){return-1!==(this.attr("class")||"").split(" ").indexOf(e)},removeClass:function(e){return this.attr("class",(this.attr("class")||"").replace(e,""))},symbolAttr:function(e){var t=this;"x y r start end width height innerR anchorX anchorY clockwise".split(" ").forEach(function(n){t[n]=A(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":"none")},crisp:function(e,t){t=t||e.strokeWidth||0;var n=Math.round(t)%2/2;return e.x=Math.floor(e.x||this.x||0)+n,e.y=Math.floor(e.y||this.y||0)+n,e.width=Math.floor((e.width||this.width||0)-2*n),e.height=Math.floor((e.height||this.height||0)-2*n),i(e.strokeWidth)&&(e.strokeWidth=t),e},css:function(e){var t=this.styles,i={},r=this.element,a="",s=!t,o=["textOutline","textOverflow","width"];if(e&&e.color&&(e.fill=e.color),t&&c(e,function(e,n){e!==t[n]&&(i[n]=e,s=!0)}),s){if(t&&(e=S(t,i)),e)if(null===e.width||"auto"===e.width)delete this.textWidth;else if("text"===r.nodeName.toLowerCase()&&e.width)var l=this.textWidth=d(e.width);if(this.styles=e,l&&!k&&this.renderer.forExport&&delete e.width,r.namespaceURI===this.SVG_NS){var u=function(e,t){return"-"+t.toLowerCase()};c(e,function(e,t){-1===o.indexOf(t)&&(a+=t.replace(/([A-Z])/g,u)+":"+e+";")}),a&&n(r,"style",a)}else f(r,e);this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),e&&e.textOutline&&this.applyTextOutline(e.textOutline))}return this},getStyle:function(e){return L.getComputedStyle(this.element||this,"").getPropertyValue(e)},strokeWidth:function(){if(!this.renderer.styledMode)return this["stroke-width"]||0;var e=this.getStyle("stroke-width");if(e.indexOf("px")===e.length-2)e=d(e);else{var t=T.createElementNS(R,"rect");n(t,{width:e,"stroke-width":0}),this.element.parentNode.appendChild(t),e=t.getBBox().width,t.parentNode.removeChild(t)}return e},on:function(e,t){var n=this,i=n.element;return C&&"click"===e?(i.ontouchstart=function(e){n.touchEventFired=Date.now(),e.preventDefault(),t.call(i,e)},i.onclick=function(e){(-1===L.navigator.userAgent.indexOf("Android")||1100<Date.now()-(n.touchEventFired||0))&&t.call(i,e)}):i["on"+e]=t,this},setRadialReference:function(e){var t=this.renderer.gradients[this.element.gradient];return this.element.radialReference=e,t&&t.radAttr&&t.animate(this.renderer.getRadialAttr(e,t.radAttr)),this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(e){return this.inverted=e,this.updateTransform(),this},updateTransform:function(){var e=this.translateX||0,t=this.translateY||0,n=this.scaleX,r=this.scaleY,a=this.inverted,s=this.rotation,o=this.matrix,l=this.element;a&&(e+=this.width,t+=this.height),e=["translate("+e+","+t+")"],i(o)&&e.push("matrix("+o.join(",")+")"),a?e.push("rotate(90) scale(-1,1)"):s&&e.push("rotate("+s+" "+A(this.rotationOriginX,l.getAttribute("x"),0)+" "+A(this.rotationOriginY,l.getAttribute("y")||0)+")"),(i(n)||i(r))&&e.push("scale("+A(n,1)+" "+A(r,1)+")"),e.length&&l.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var i,a,s,o={},c=this.renderer,d=c.alignedObjects;e?(this.alignOptions=e,this.alignByTranslate=t,(!n||l(n))&&(this.alignTo=i=n||"renderer",r(d,this),d.push(this),n=null)):(e=this.alignOptions,t=this.alignByTranslate,i=this.alignTo),n=A(n,c[i],c),i=e.align,c=e.verticalAlign,d=(n.x||0)+(e.x||0);var u=(n.y||0)+(e.y||0);return"right"===i?a=1:"center"===i&&(a=2),a&&(d+=(n.width-(e.width||0))/a),o[t?"translateX":"x"]=Math.round(d),"bottom"===c?s=1:"middle"===c&&(s=2),s&&(u+=(n.height-(e.height||0))/s),o[t?"translateY":"y"]=Math.round(u),this[this.placed?"animate":"attr"](o),this.placed=!0,this.alignAttr=o,this},getBBox:function(e,t){var n,r,a=this.renderer,s=this.element,o=this.styles,l=this.textStr,c=a.cache,d=a.cacheKeys,u=s.namespaceURI===this.SVG_NS,h=(t=A(t,this.rotation))*y,p=a.styledMode?s&&P.prototype.getStyle.call(s,"font-size"):o&&o.fontSize;if(i(l)){var m=l.toString();-1===m.indexOf("<")&&(m=m.replace(/[0-9]/g,"0")),m+=["",t||0,p,this.textWidth,o&&o.textOverflow].join()}if(m&&!e&&(n=c[m]),!n){if(u||a.forExport){try{(r=this.fakeTS&&function(e){[].forEach.call(s.querySelectorAll(".highcharts-text-outline"),function(t){t.style.display=e})})&&r("none"),n=s.getBBox?S({},s.getBBox()):{width:s.offsetWidth,height:s.offsetHeight},r&&r("")}catch(e){}(!n||0>n.width)&&(n={width:0,height:0})}else n=this.htmlGetBBox();if(a.isSVG&&(e=n.width,a=n.height,u&&(n.height=a={"11px,17":14,"13px,20":16}[o&&o.fontSize+","+Math.round(a)]||a),t&&(n.width=Math.abs(a*Math.sin(h))+Math.abs(e*Math.cos(h)),n.height=Math.abs(a*Math.cos(h))+Math.abs(e*Math.sin(h)))),m&&0<n.height){for(;250<d.length;)delete c[d.shift()];c[m]||d.push(m),c[m]=n}}return n},show:function(e){return this.attr({visibility:e?"inherit":"visible"})},hide:function(e){return e?this.attr({y:-9999}):this.attr({visibility:"hidden"}),this},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.attr({y:-9999})}})},add:function(e){var t=this.renderer,n=this.element;if(e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&t.buildText(this),this.added=!0,!e||e.handleZ||this.zIndex)var i=this.zIndexSetter();return i||(e?e.element:t.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.renderer,i=n.isSVG&&"SPAN"===t.nodeName&&e.parentGroup,a=t.ownerSVGElement,s=e.clipPath;if(t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,O(e),s&&a&&([].forEach.call(a.querySelectorAll("[clip-path],[CLIP-PATH]"),function(e){-1<e.getAttribute("clip-path").indexOf(s.element.id)&&e.removeAttribute("clip-path")}),e.clipPath=s.destroy()),e.stops){for(a=0;a<e.stops.length;a++)e.stops[a]=e.stops[a].destroy();e.stops=null}for(e.safeRemoveChild(t),n.styledMode||e.destroyShadows();i&&i.div&&0===i.div.childNodes.length;)t=i.parentGroup,e.safeRemoveChild(i.div),delete i.div,i=t;e.alignTo&&r(n.alignedObjects,e),c(e,function(t,n){e[n]&&e[n].parentGroup===e&&e[n].destroy&&e[n].destroy(),delete e[n]})},shadow:function(e,t,i){var r,a=[],s=this.element;if(e){if(!this.shadows){var o=A(e.width,3),l=(e.opacity||.15)/o,c=this.parentInverted?"(-1,-1)":"("+A(e.offsetX,1)+", "+A(e.offsetY,1)+")";for(r=1;r<=o;r++){var d=s.cloneNode(0),u=2*o+1-2*r;n(d,{stroke:e.color||"#000000","stroke-opacity":l*r,"stroke-width":u,transform:"translate"+c,fill:"none"}),d.setAttribute("class",(d.getAttribute("class")||"")+" highcharts-shadow"),i&&(n(d,"height",Math.max(n(d,"height")-u,0)),d.cutHeight=u),t?t.element.appendChild(d):s.parentNode&&s.parentNode.insertBefore(d,s),a.push(d)}this.shadows=a}}else this.destroyShadows();return this},destroyShadows:function(){(this.shadows||[]).forEach(function(e){this.safeRemoveChild(e)},this),this.shadows=void 0},xGetter:function(e){return"circle"===this.element.nodeName&&("x"===e?e="cx":"y"===e&&(e="cy")),this._defaultGetter(e)},_defaultGetter:function(e){return e=A(this[e+"Value"],this[e],this.element?this.element.getAttribute(e):null,0),/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(e,t,n){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),this[t]!==e&&(n.setAttribute(t,e),this[t]=e)},dashstyleSetter:function(e){var t,n=this["stroke-width"];if("inherit"===n&&(n=1),e=e&&e.toLowerCase()){for(t=(e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;t--;)e[t]=d(e[t])*n;e=e.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){var t={left:"start",center:"middle",right:"end"};t[e]&&(this.alignValue=e,this.element.setAttribute("text-anchor",t[e]))},opacitySetter:function(e,t,n){this[t]=e,n.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=T.createElementNS(this.SVG_NS,"title"),this.element.appendChild(t)),t.firstChild&&t.removeChild(t.firstChild),t.appendChild(T.createTextNode(String(A(e,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")))},textSetter:function(e){e!==this.textStr&&(delete this.bBox,delete this.textPxLength,this.textStr=e,this.added&&this.renderer.buildText(this))},setTextPath:function(t,n){var r=this.element,a={textAnchor:"text-anchor"},s=!1,o=this.textPathWrapper,l=!o,d=(n=E(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},n)).attributes;if(t&&n&&n.enabled){this.options&&this.options.padding&&(d.dx=-this.options.padding),o||(this.textPathWrapper=o=this.renderer.createElement("textPath"),s=!0);var u=o.element;if((n=t.element.getAttribute("id"))||t.element.setAttribute("id",n=e.uniqueKey()),l)for(t=r.getElementsByTagName("tspan");t.length;)t[0].setAttribute("y",0),u.appendChild(t[0]);s&&o.add({element:this.text?this.text.element:r}),u.setAttributeNS("http://www.w3.org/1999/xlink","href",this.renderer.url+"#"+n),i(d.dy)&&(u.parentNode.setAttribute("dy",d.dy),delete d.dy),i(d.dx)&&(u.parentNode.setAttribute("dx",d.dx),delete d.dx),c(d,function(e,t){u.setAttribute(a[t]||t,e)}),r.removeAttribute("transform"),this.removeTextOutline.call(o,[].slice.call(r.getElementsByTagName("tspan"))),this.text&&!this.renderer.styledMode&&this.attr({fill:"none","stroke-width":0}),this.applyTextOutline=this.updateTransform=w}else o&&(delete this.updateTransform,delete this.applyTextOutline,this.destroyTextPath(r,t));return this},destroyTextPath:function(e,t){var n;for(t.element.setAttribute("id",""),n=this.textPathWrapper.element.childNodes;n.length;)e.firstChild.appendChild(n[0]);e.firstChild.removeChild(this.textPathWrapper.element),delete t.textPathWrapper},fillSetter:function(e,t,n){"string"==typeof e?n.setAttribute(t,e):e&&this.complexColor(e,t,n)},visibilitySetter:function(e,t,n){"inherit"===e?n.removeAttribute(t):this[t]!==e&&n.setAttribute(t,e),this[t]=e},zIndexSetter:function(e,t){var n=this.renderer,r=this.parentGroup,a=(r||n).element||n.box,s=this.element,o=!1;n=a===n.box;var l,c=this.added;if(i(e)?(s.setAttribute("data-z-index",e),e=+e,this[t]===e&&(c=!1)):i(this[t])&&s.removeAttribute("data-z-index"),this[t]=e,c){for((e=this.zIndex)&&r&&(r.handleZ=!0),l=(t=a.childNodes).length-1;0<=l&&!o;l--){c=(r=t[l]).getAttribute("data-z-index");var u=!i(c);r!==s&&(0>e&&u&&!n&&!l?(a.insertBefore(s,t[l]),o=!0):(d(c)<=e||u&&(!i(e)||0<=e))&&(a.insertBefore(s,t[l+1]||null),o=!0))}o||(a.insertBefore(s,t[n?3:0]||null),o=!0)}return o},_defaultSetter:function(e,t,n){n.setAttribute(t,e)}}),P.prototype.yGetter=P.prototype.xGetter,P.prototype.translateXSetter=P.prototype.translateYSetter=P.prototype.rotationSetter=P.prototype.verticalAlignSetter=P.prototype.rotationOriginXSetter=P.prototype.rotationOriginYSetter=P.prototype.scaleXSetter=P.prototype.scaleYSetter=P.prototype.matrixSetter=function(e,t){this[t]=e,this.doTransform=!0},P.prototype["stroke-widthSetter"]=P.prototype.strokeSetter=function(e,t,n){this[t]=e,this.stroke&&this["stroke-width"]?(P.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===t&&0===e&&this.hasStroke?(n.removeAttribute("stroke"),this.hasStroke=!1):this.renderer.styledMode&&this["stroke-width"]&&(n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0)},t=e.SVGRenderer=function(){this.init.apply(this,arguments)},S(t.prototype,{Element:P,SVG_NS:R,init:function(e,t,i,r,a,s,o){var l,c=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"});o||c.css(this.getStyle(r)),r=c.element,e.appendChild(r),n(e,"dir","ltr"),-1===e.innerHTML.indexOf("xmlns")&&n(r,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=r,this.boxWrapper=c,this.alignedObjects=[],this.url=(I||M)&&T.getElementsByTagName("base").length?L.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(T.createTextNode("Created with Highcharts 7.2.0")),this.defs=this.createElement("defs").add(),this.allowHTML=s,this.forExport=a,this.styledMode=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(t,i,!1),I&&e.getBoundingClientRect&&((t=function(){f(e,{left:0,top:0}),l=e.getBoundingClientRect(),f(e,{left:Math.ceil(l.left)-l.left+"px",top:Math.ceil(l.top)-l.top+"px"})})(),this.unSubPixelFix=h(L,"resize",t))},definition:function(e){var t=this;return function e(n,i){var r;return u(n).forEach(function(n){var a=t.createElement(n.tagName),s={};c(n,function(e,t){"tagName"!==t&&"children"!==t&&"textContent"!==t&&(s[t]=e)}),a.attr(s),a.add(i||t.defs),n.textContent&&a.element.appendChild(T.createTextNode(n.textContent)),e(n.children||[],a),r=a}),r}(e)},getStyle:function(e){return this.style=S({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},setStyle:function(e){this.boxWrapper.css(this.getStyle(e))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),b(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:w,getRadialAttr:function(e,t){return{cx:e[0]-e[2]/2+t.cx*e[2],cy:e[1]-e[2]/2+t.cy*e[2],r:t.r*e[2]}},truncate:function(e,t,n,i,r,a,s){var o,l,c=this,d=e.rotation,u=i?1:0,h=(n||i).length,p=h,m=[],g=function(e){t.firstChild&&t.removeChild(t.firstChild),e&&t.appendChild(T.createTextNode(e))},f=function(a,o){if(void 0===m[o=o||a])if(t.getSubStringLength)try{m[o]=r+t.getSubStringLength(0,i?o+1:o)}catch(e){}else c.getSpanWidth&&(g(s(n||i,a)),m[o]=r+c.getSpanWidth(e,t));return m[o]};e.rotation=0;var v=f(t.textContent.length);if(l=r+v>a){for(;u<=h;)p=Math.ceil((u+h)/2),i&&(o=s(i,p)),v=f(p,o&&o.length-1),u===h?u=h+1:v>a?h=p-1:u=p;0===h?g(""):n&&h===n.length-1||g(o||s(n||i,p))}return i&&i.splice(0,p),e.actualWidth=v,e.rotation=d,l},escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},buildText:function(e){var t,i,r=e.element,a=this,s=a.forExport,o=A(e.textStr,"").toString(),l=-1!==o.indexOf("<"),u=r.childNodes,h=n(r,"x"),p=e.styles,m=e.textWidth,g=p&&p.lineHeight,v=p&&p.textOutline,y=p&&"ellipsis"===p.textOverflow,b=p&&"nowrap"===p.whiteSpace,S=p&&p.fontSize,C=u.length;p=m&&!e.added&&this.box;var I=function(e){var t;return a.styledMode||(t=/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:S||a.style.fontSize||12),g?d(g):a.fontMetrics(t,e.getAttribute("style")?e:r).h},_=function(e,t){return c(a.escapes,function(n,i){t&&-1!==t.indexOf(n)||(e=e.toString().replace(new RegExp(n,"g"),i))}),e},M=function(e,t){var n=e.indexOf("<");if(-1!==(n=(e=e.substring(n,e.indexOf(">")-n)).indexOf(t+"="))&&(n=n+t.length+1,'"'===(t=e.charAt(n))||"'"===t))return(e=e.substring(n+1)).substring(0,e.indexOf(t))},E=/<br.*?>/g,w=[o,y,b,g,v,S,m].join();if(w!==e.textCache){for(e.textCache=w;C--;)r.removeChild(u[C]);l||v||y||m||-1!==o.indexOf(" ")&&(!b||E.test(o))?(p&&p.appendChild(r),l?o=(o=a.styledMode?o.replace(/<(b|strong)>/g,'<span class="highcharts-strong">').replace(/<(i|em)>/g,'<span class="highcharts-emphasized">'):o.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">')).replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(E):o=[o],(o=o.filter(function(e){return""!==e})).forEach(function(o,l){var c=0,d=0,u=(o=o.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||")).split("|||");u.forEach(function(o){if(""!==o||1===u.length){var p,g,v={},C=T.createElementNS(a.SVG_NS,"tspan");if((p=M(o,"class"))&&n(C,"class",p),(p=M(o,"style"))&&(p=p.replace(/(;| |^)color([ :])/,"$1fill$2"),n(C,"style",p)),(g=M(o,"href"))&&!s&&(n(C,"onclick",'location.href="'+g+'"'),n(C,"class","highcharts-anchor"),a.styledMode||f(C,{cursor:"pointer"}))," "!==(o=_(o.replace(/<[a-zA-Z\/](.|\n)*?>/g,"")||" "))){if(C.appendChild(T.createTextNode(o)),c?v.dx=0:l&&null!==h&&(v.x=h),n(C,v),r.appendChild(C),!c&&i&&(!k&&s&&f(C,{display:"block"}),n(C,"dy",I(C))),m){var E=o.replace(/([^\^])-/g,"$1- ").split(" ");v=!b&&(1<u.length||l||1<E.length),g=0;var w=I(C);if(y)t=a.truncate(e,C,o,void 0,0,Math.max(0,m-parseInt(S||12,10)),function(e,t){return e.substring(0,t)+"\u2026"});else if(v)for(;E.length;)E.length&&!b&&0<g&&(C=T.createElementNS(R,"tspan"),n(C,{dy:w,x:h}),p&&n(C,"style",p),C.appendChild(T.createTextNode(E.join(" ").replace(/- /g,"-"))),r.appendChild(C)),a.truncate(e,C,null,E,0===g?d:0,m,function(e,t){return E.slice(0,t).join(" ").replace(/- /g,"-")}),d=e.actualWidth,g++}c++}}}),i=i||r.childNodes.length}),y&&t&&e.attr("title",_(e.textStr,["&lt;","&gt;"])),p&&p.removeChild(r),v&&e.applyTextOutline&&e.applyTextOutline(v)):r.appendChild(T.createTextNode(_(o)))}},getContrast:function(e){return(e=g(e).rgba)[0]*=1,e[1]*=1.2,e[2]*=.5,459<e[0]+e[1]+e[2]?"#000000":"#FFFFFF"},button:function(e,t,n,i,r,a,s,o,l,c){var d=this.label(e,t,n,l,null,null,c,null,"button"),u=0,p=this.styledMode;if(d.attr(E({padding:8,r:2},r)),!p){var m=(r=E({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},r)).style;delete r.style;var g=(a=E(r,{fill:"#e6e6e6"},a)).style;delete a.style;var f=(s=E(r,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},s)).style;delete s.style;var v=(o=E(r,{style:{color:"#cccccc"}},o)).style;delete o.style}return h(d.element,_?"mouseover":"mouseenter",function(){3!==u&&d.setState(1)}),h(d.element,_?"mouseout":"mouseleave",function(){3!==u&&d.setState(u)}),d.setState=function(e){1!==e&&(d.state=u=e),d.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][e||0]),p||d.attr([r,a,s,o][e||0]).css([m,g,f,v][e||0])},p||d.attr(r).css(S({cursor:"default"},m)),d.on("click",function(e){3!==u&&i.call(d,e)})},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=Math.round(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=Math.round(e[2])+t%2/2),e},path:function(e){var t=this.styledMode?{}:{fill:"none"};return a(e)?t.d=e:o(e)&&S(t,e),this.createElement("path").attr(t)},circle:function(e,t,n){return e=o(e)?e:void 0===e?{}:{x:e,y:t,r:n},(t=this.createElement("circle")).xSetter=t.ySetter=function(e,t,n){n.setAttribute("c"+t,e)},t.attr(e)},arc:function(e,t,n,i,r,a){return o(e)?(t=(i=e).y,n=i.r,e=i.x):i={innerR:i,start:r,end:a},(e=this.symbol("arc",e,t,n,n,i)).r=n,e},rect:function(e,t,i,r,a,s){a=o(e)?e.r:a;var l=this.createElement("rect");return e=o(e)?e:void 0===e?{}:{x:e,y:t,width:Math.max(i,0),height:Math.max(r,0)},this.styledMode||(void 0!==s&&(e.strokeWidth=s,e=l.crisp(e)),e.fill="none"),a&&(e.r=a),l.rSetter=function(e,t,i){l.r=e,n(i,{rx:e,ry:e})},l.rGetter=function(){return l.r},l.attr(e)},setSize:function(e,t,n){var i=this.alignedObjects,r=i.length;for(this.width=e,this.height=t,this.boxWrapper.animate({width:e,height:t},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:A(n,!0)?void 0:0});r--;)i[r].align()},g:function(e){var t=this.createElement("g");return e?t.attr({class:"highcharts-"+e}):t},image:function(e,t,n,i,r,a){var s={preserveAspectRatio:"none"},o=function(e,t){e.setAttributeNS?e.setAttributeNS("http://www.w3.org/1999/xlink","href",t):e.setAttribute("hc-svg-href",t)},l=function(t){o(c.element,e),a.call(c,t)};1<arguments.length&&S(s,{x:t,y:n,width:i,height:r});var c=this.createElement("image").attr(s);return a?(o(c.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),s=new L.Image,h(s,"load",l),s.src=e,s.complete&&l({})):o(c.element,e),c},symbol:function(e,t,n,r,a,s){var o=this,l=/^url\((.*?)\)$/,c=l.test(e),d=!c&&(this.symbols[e]?e:"circle"),u=d&&this.symbols[d],h=i(t)&&u&&u.call(this.symbols,Math.round(t),Math.round(n),r,a,s);if(u){var p=this.path(h);o.styledMode||p.attr("fill","none"),S(p,{symbolName:d,x:t,y:n,width:r,height:a}),s&&S(p,s)}else if(c){var g=e.match(l)[1];(p=this.image(g)).imgwidth=A(N[g]&&N[g].width,s&&s.width),p.imgheight=A(N[g]&&N[g].height,s&&s.height);var y=function(){p.attr({width:p.width,height:p.height})};["width","height"].forEach(function(e){p[e+"Setter"]=function(e,t){var n={},r=this["img"+t],a="width"===t?"translateX":"translateY";this[t]=e,i(r)&&(s&&"within"===s.backgroundSize&&this.width&&this.height&&(r=Math.round(r*Math.min(this.width/this.imgwidth,this.height/this.imgheight))),this.element&&this.element.setAttribute(t,r),this.alignByTranslate||(n[a]=((this[t]||0)-r)/2,this.attr(n)))}}),i(t)&&p.attr({x:t,y:n}),p.isImg=!0,i(p.imgwidth)&&i(p.imgheight)?y():(p.attr({width:0,height:0}),v("img",{onload:function(){var e=m[o.chartIndex];0===this.width&&(f(this,{position:"absolute",top:"-999em"}),T.body.appendChild(this)),N[g]={width:this.width,height:this.height},p.imgwidth=this.width,p.imgheight=this.height,p.element&&y(),this.parentNode&&this.parentNode.removeChild(this),o.imgCount--,!o.imgCount&&e&&e.onload&&e.onload()},src:g}),this.imgCount++)}return p},symbols:{circle:function(e,t,n,i){return this.arc(e+n/2,t+i/2,n/2,i/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},square:function(e,t,n,i){return["M",e,t,"L",e+n,t,e+n,t+i,e,t+i,"Z"]},triangle:function(e,t,n,i){return["M",e+n/2,t,"L",e+n,t+i,e,t+i,"Z"]},"triangle-down":function(e,t,n,i){return["M",e,t,"L",e+n,t,e+n/2,t+i,"Z"]},diamond:function(e,t,n,i){return["M",e+n/2,t,"L",e+n,t+i/2,e+n/2,t+i,e,t+i/2,"Z"]},arc:function(e,t,n,r,a){var s=a.start,o=a.r||n,l=a.r||r||n,c=a.end-.001;n=a.innerR,r=A(a.open,.001>Math.abs(a.end-a.start-2*Math.PI));var d=Math.cos(s),u=Math.sin(s),h=Math.cos(c);return c=Math.sin(c),a=["M",e+o*d,t+l*u,"A",o,l,0,s=.001>a.end-s-Math.PI?0:1,A(a.clockwise,1),e+o*h,t+l*c],i(n)&&a.push(r?"M":"L",e+n*h,t+n*c,"A",n,n,0,s,0,e+n*d,t+n*u),a.push(r?"":"Z"),a},callout:function(e,t,n,i,r){var a=Math.min(r&&r.r||0,n,i),s=a+6,o=r&&r.anchorX;r=r&&r.anchorY;var l=["M",e+a,t,"L",e+n-a,t,"C",e+n,t,e+n,t,e+n,t+a,"L",e+n,t+i-a,"C",e+n,t+i,e+n,t+i,e+n-a,t+i,"L",e+a,t+i,"C",e,t+i,e,t+i,e,t+i-a,"L",e,t+a,"C",e,t,e,t,e+a,t];return o&&o>n?r>t+s&&r<t+i-s?l.splice(13,3,"L",e+n,r-6,e+n+6,r,e+n,r+6,e+n,t+i-a):l.splice(13,3,"L",e+n,i/2,o,r,e+n,i/2,e+n,t+i-a):o&&0>o?r>t+s&&r<t+i-s?l.splice(33,3,"L",e,r+6,e-6,r,e,r-6,e,t+a):l.splice(33,3,"L",e,i/2,o,r,e,i/2,e,t+a):r&&r>i&&o>e+s&&o<e+n-s?l.splice(23,3,"L",o+6,t+i,o,t+i+6,o-6,t+i,e+a,t+i):r&&0>r&&o>e+s&&o<e+n-s&&l.splice(3,3,"L",o-6,t,o,t-6,o+6,t,n-a,t),l}},clipRect:function(t,n,i,r){var a=e.uniqueKey()+"-",s=this.createElement("clipPath").attr({id:a}).add(this.defs);return(t=this.rect(t,n,i,r,0).add(s)).id=a,t.clipPath=s,t.count=0,t},text:function(e,t,n,r){var a={};return!r||!this.allowHTML&&this.forExport?(a.x=Math.round(t||0),n&&(a.y=Math.round(n)),i(e)&&(a.text=e),e=this.createElement("text").attr(a),r||(e.xSetter=function(e,t,n){var i,r=n.getElementsByTagName("tspan"),a=n.getAttribute(t);for(i=0;i<r.length;i++){var s=r[i];s.getAttribute(t)===a&&s.setAttribute(t,e)}n.setAttribute(t,e)}),e):this.html(e,t,n)},fontMetrics:function(e,t){return e=!this.styledMode&&/px/.test(e)||!L.getComputedStyle?e||t&&t.style&&t.style.fontSize||this.style&&this.style.fontSize:t&&P.prototype.getStyle.call(t,"font-size"),{h:t=24>(e=/px/.test(e)?d(e):12)?e+3:Math.round(1.2*e),b:Math.round(.8*t),f:e}},rotCorr:function(e,t,n){var i=e;return t&&n&&(i=Math.max(i*Math.cos(t*y),4)),{x:-e/3*Math.sin(t*y),y:i}},label:function(e,t,n,r,a,o,l,c,d){var u,h,p,m,g,f,v,y,b,T=this,C=T.styledMode,I=T.g("button"!==d&&"label"),_=I.text=T.text("",0,0,l).attr({zIndex:1}),M=0,w=3,A=0,O={},k=/^url\((.*?)\)$/.test(r),R=C||k,N=function(){return C?u.strokeWidth()%2/2:(y?parseInt(y,10):0)%2/2};d&&I.addClass("highcharts-"+d);var L=function(){var e=_.element.style,t={};h=(void 0===p||void 0===m||v)&&i(_.textStr)&&_.getBBox(),I.width=(p||h.width||0)+2*w+A,I.height=(m||h.height||0)+2*w,b=w+Math.min(T.fontMetrics(e&&e.fontSize,_).b,h?h.height:1/0),R&&(u||(I.box=u=T.symbols[r]||k?T.symbol(r):T.rect(),u.addClass(("button"===d?"":"highcharts-label-box")+(d?" highcharts-"+d+"-box":"")),u.add(I),e=N(),t.x=e,t.y=(c?-b:0)+e),t.width=Math.round(I.width),t.height=Math.round(I.height),u.attr(S(t,O)),O={})},F=function(){var e=A+w,t=c?0:b;i(p)&&h&&("center"===v||"right"===v)&&(e+={center:.5,right:1}[v]*(p-h.width)),e===_.x&&t===_.y||(_.attr("x",e),_.hasBoxWidthChanged&&(h=_.getBBox(!0),L()),void 0!==t&&_.attr("y",t)),_.x=e,_.y=t},x=function(e,t){u?u.attr(e,t):O[e]=t};I.onAdd=function(){_.add(I),I.attr({text:e||0===e?e:"",x:t,y:n}),u&&i(a)&&I.attr({anchorX:a,anchorY:o})},I.widthSetter=function(e){p=s(e)?e:null},I.heightSetter=function(e){m=e},I["text-alignSetter"]=function(e){v=e},I.paddingSetter=function(e){i(e)&&e!==w&&(w=I.padding=e,F())},I.paddingLeftSetter=function(e){i(e)&&e!==A&&(A=e,F())},I.alignSetter=function(e){(e={left:0,center:.5,right:1}[e])!==M&&(M=e,h&&I.attr({x:g}))},I.textSetter=function(e){void 0!==e&&_.attr({text:e}),L(),F()},I["stroke-widthSetter"]=function(e,t){e&&(R=!0),y=this["stroke-width"]=e,x(t,e)},C?I.rSetter=function(e,t){x(t,e)}:I.strokeSetter=I.fillSetter=I.rSetter=function(e,t){"r"!==t&&("fill"===t&&e&&(R=!0),I[t]=e),x(t,e)},I.anchorXSetter=function(e,t){a=I.anchorX=e,x(t,Math.round(e)-N()-g)},I.anchorYSetter=function(e,t){o=I.anchorY=e,x(t,e-f)},I.xSetter=function(e){I.x=e,M&&(e-=M*((p||h.width)+2*w),I["forceAnimate:x"]=!0),g=Math.round(e),I.attr("translateX",g)},I.ySetter=function(e){f=I.y=Math.round(e),I.attr("translateY",f)};var U=I.css;return l={css:function(e){if(e){var t={};e=E(e),I.textProps.forEach(function(n){void 0!==e[n]&&(t[n]=e[n],delete e[n])}),_.css(t),"width"in t&&L(),"fontSize"in t&&(L(),F())}return U.call(I,e)},getBBox:function(){return{width:h.width+2*w,height:h.height+2*w,x:h.x-w,y:h.y-w}},destroy:function(){D(I.element,"mouseenter"),D(I.element,"mouseleave"),_&&(_=_.destroy()),u&&(u=u.destroy()),P.prototype.destroy.call(I),I=T=L=F=x=null}},C||(l.shadow=function(e){return e&&(L(),u&&u.shadow(e)),I}),S(I,l)}}),e.Renderer=t}),t(n,"parts/Html.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.attr,i=t.defined,r=t.pInt,a=e.createElement,s=e.css,o=e.extend,l=e.isFirefox,c=e.isMS,d=e.isWebKit,u=e.pick,h=e.SVGElement;t=e.SVGRenderer;var p=e.win;o(h.prototype,{htmlCss:function(e){var t="SPAN"===this.element.tagName&&e&&"width"in e,n=u(t&&e.width,void 0);if(t){delete e.width,this.textWidth=n;var i=!0}return e&&"ellipsis"===e.textOverflow&&(e.whiteSpace="nowrap",e.overflow="hidden"),this.styles=o(this.styles,e),s(this.element,e),i&&this.htmlUpdateTransform(),this},htmlGetBBox:function(){var e=this.element;return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var e=this.renderer,t=this.element,n=this.translateX||0,a=this.translateY||0,o=this.x||0,l=this.y||0,c=this.textAlign||"left",d={left:0,center:.5,right:1}[c],u=this.styles,h=u&&u.whiteSpace;if(s(t,{marginLeft:n,marginTop:a}),!e.styledMode&&this.shadows&&this.shadows.forEach(function(e){s(e,{marginLeft:n+1,marginTop:a+1})}),this.inverted&&[].forEach.call(t.childNodes,function(n){e.invertChild(n,t)}),"SPAN"===t.tagName){u=this.rotation;var p,m=this.textWidth&&r(this.textWidth),g=[u,c,t.innerHTML,this.textWidth,this.textAlign].join();(p=m!==this.oldTextWidth)&&!(p=m>this.oldTextWidth)&&((p=this.textPxLength)||(s(t,{width:"",whiteSpace:h||"nowrap"}),p=t.offsetWidth),p=p>m),p&&(/[ \-]/.test(t.textContent||t.innerText)||"ellipsis"===t.style.textOverflow)?(s(t,{width:m+"px",display:"block",whiteSpace:h||"normal"}),this.oldTextWidth=m,this.hasBoxWidthChanged=!0):this.hasBoxWidthChanged=!1,g!==this.cTT&&(h=e.fontMetrics(t.style.fontSize,t).b,!i(u)||u===(this.oldRotation||0)&&c===this.oldAlign||this.setSpanRotation(u,d,h),this.getSpanCorrection(!i(u)&&this.textPxLength||t.offsetWidth,h,d,u,c)),s(t,{left:o+(this.xCorr||0)+"px",top:l+(this.yCorr||0)+"px"}),this.cTT=g,this.oldRotation=u,this.oldAlign=c}}else this.alignOnAdd=!0},setSpanRotation:function(e,t,n){var i={},r=this.renderer.getTransformKey();i[r]=i.transform="rotate("+e+"deg)",i[r+(l?"Origin":"-origin")]=i.transformOrigin=100*t+"% "+n+"px",s(this.element,i)},getSpanCorrection:function(e,t,n){this.xCorr=-e*n,this.yCorr=-t}}),o(t.prototype,{getTransformKey:function(){return c&&!/Edge/.test(p.navigator.userAgent)?"-ms-transform":d?"-webkit-transform":l?"MozTransform":p.opera?"-o-transform":""},html:function(e,t,i){var r=this.createElement("span"),s=r.element,l=r.renderer,c=l.isSVG,d=function(e,t){["opacity","visibility"].forEach(function(n){e[n+"Setter"]=function(i,r,a){var s=e.div?e.div.style:t;h.prototype[n+"Setter"].call(this,i,r,a),s&&(s[r]=i)}}),e.addedSetters=!0};return r.textSetter=function(e){e!==s.innerHTML&&(delete this.bBox,delete this.oldTextWidth),this.textStr=e,s.innerHTML=u(e,""),r.doTransform=!0},c&&d(r,r.element.style),r.xSetter=r.ySetter=r.alignSetter=r.rotationSetter=function(e,t){"align"===t&&(t="textAlign"),r[t]=e,r.doTransform=!0},r.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},r.attr({text:e,x:Math.round(t),y:Math.round(i)}).css({position:"absolute"}),l.styledMode||r.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),s.style.whiteSpace="nowrap",r.css=r.htmlCss,c&&(r.add=function(e){var t=l.box.parentNode,i=[];if(this.parentGroup=e){var c=e.div;if(!c){for(;e;)i.push(e),e=e.parentGroup;i.reverse().forEach(function(e){function s(t,n){e[n]=t,"translateX"===n?u.left=t+"px":u.top=t+"px",e.doTransform=!0}var l=n(e.element,"class"),u=(c=e.div=e.div||a("div",l?{className:l}:void 0,{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px",display:e.display,opacity:e.opacity,pointerEvents:e.styles&&e.styles.pointerEvents},c||t)).style;o(e,{classSetter:function(e){return function(t){this.element.setAttribute("class",t),e.className=t}}(c),on:function(){return i[0].div&&r.on.apply({element:i[0].div},arguments),e},translateXSetter:s,translateYSetter:s}),e.addedSetters||d(e)})}}else c=t;return c.appendChild(s),r.added=!0,r.alignOnAdd&&r.htmlUpdateTransform(),r}),r}})}),t(n,"parts/Time.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isObject,r=t.objectEach,a=t.splat,s=e.extend,o=e.merge,l=e.pick,c=e.timeUnits,d=e.win;e.Time=function(e){this.update(e,!1)},e.Time.prototype={defaultOptions:{},update:function(e){var t=l(e&&e.useUTC,!0),n=this;this.options=e=o(!0,this.options||{},e),this.Date=e.Date||d.Date||Date,this.timezoneOffset=(this.useUTC=t)&&e.timezoneOffset,this.getTimezoneOffset=this.timezoneOffsetFunction(),(this.variableTimezone=!(t&&!e.getTimezoneOffset&&!e.timezone))||this.timezoneOffset?(this.get=function(e,t){var i=t.getTime(),r=i-n.getTimezoneOffset(t);return t.setTime(r),e=t["getUTC"+e](),t.setTime(i),e},this.set=function(e,t,i){if("Milliseconds"===e||"Seconds"===e||"Minutes"===e&&0==t.getTimezoneOffset()%60)t["set"+e](i);else{var r=n.getTimezoneOffset(t);r=t.getTime()-r,t.setTime(r),t["setUTC"+e](i),e=n.getTimezoneOffset(t),r=t.getTime()+e,t.setTime(r)}}):t?(this.get=function(e,t){return t["getUTC"+e]()},this.set=function(e,t,n){return t["setUTC"+e](n)}):(this.get=function(e,t){return t["get"+e]()},this.set=function(e,t,n){return t["set"+e](n)})},makeTime:function(t,n,i,r,a,s){if(this.useUTC){var o=this.Date.UTC.apply(0,arguments),c=this.getTimezoneOffset(o);o+=c;var d=this.getTimezoneOffset(o);c!==d?o+=d-c:c-36e5!==this.getTimezoneOffset(o-36e5)||e.isSafari||(o-=36e5)}else o=new this.Date(t,n,l(i,1),l(r,0),l(a,0),l(s,0)).getTime();return o},timezoneOffsetFunction:function(){var t=this,n=this.options,i=d.moment;if(!this.useUTC)return function(e){return 6e4*new Date(e).getTimezoneOffset()};if(n.timezone){if(i)return function(e){return 6e4*-i.tz(e,n.timezone).utcOffset()};e.error(25)}return this.useUTC&&n.getTimezoneOffset?function(e){return 6e4*n.getTimezoneOffset(e)}:function(){return 6e4*(t.timezoneOffset||0)}},dateFormat:function(t,i,a){if(!n(i)||isNaN(i))return e.defaultOptions.lang.invalidDate||"";t=e.pick(t,"%Y-%m-%d %H:%M:%S");var s=this,o=new this.Date(i),l=this.get("Hours",o),c=this.get("Day",o),d=this.get("Date",o),u=this.get("Month",o),h=this.get("FullYear",o),p=e.defaultOptions.lang,m=p.weekdays,g=p.shortWeekdays,f=e.pad;return o=e.extend({a:g?g[c]:m[c].substr(0,3),A:m[c],d:f(d),e:f(d,2," "),w:c,b:p.shortMonths[u],B:p.months[u],m:f(u+1),o:u+1,y:h.toString().substr(2,2),Y:h,H:f(l),k:l,I:f(l%12||12),l:l%12||12,M:f(s.get("Minutes",o)),p:12>l?"AM":"PM",P:12>l?"am":"pm",S:f(o.getSeconds()),L:f(Math.floor(i%1e3),3)},e.dateFormats),r(o,function(e,n){for(;-1!==t.indexOf("%"+n);)t=t.replace("%"+n,"function"==typeof e?e.call(s,i):e)}),a?t.substr(0,1).toUpperCase()+t.substr(1):t},resolveDTLFormat:function(e){return i(e,!0)?e:{main:(e=a(e))[0],from:e[1],to:e[2]}},getTimeTicks:function(e,t,i,r){var a,o=this,d=[],u={},h=new o.Date(t),p=e.unitRange,m=e.count||1;if(r=l(r,1),n(t)){if(o.set("Milliseconds",h,p>=c.second?0:m*Math.floor(o.get("Milliseconds",h)/m)),p>=c.second&&o.set("Seconds",h,p>=c.minute?0:m*Math.floor(o.get("Seconds",h)/m)),p>=c.minute&&o.set("Minutes",h,p>=c.hour?0:m*Math.floor(o.get("Minutes",h)/m)),p>=c.hour&&o.set("Hours",h,p>=c.day?0:m*Math.floor(o.get("Hours",h)/m)),p>=c.day&&o.set("Date",h,p>=c.month?1:Math.max(1,m*Math.floor(o.get("Date",h)/m))),p>=c.month){o.set("Month",h,p>=c.year?0:m*Math.floor(o.get("Month",h)/m));var g=o.get("FullYear",h)}p>=c.year&&o.set("FullYear",h,g-g%m),p===c.week&&(g=o.get("Day",h),o.set("Date",h,o.get("Date",h)-g+r+(g<r?-7:0))),g=o.get("FullYear",h),r=o.get("Month",h);var f=o.get("Date",h),v=o.get("Hours",h);for(t=h.getTime(),o.variableTimezone&&(a=i-t>4*c.month||o.getTimezoneOffset(t)!==o.getTimezoneOffset(i)),t=h.getTime(),h=1;t<i;)d.push(t),t=p===c.year?o.makeTime(g+h*m,0):p===c.month?o.makeTime(g,r+h*m):!a||p!==c.day&&p!==c.week?a&&p===c.hour&&1<m?o.makeTime(g,r,f,v+h*m):t+p*m:o.makeTime(g,r,f+h*m*(p===c.day?1:7)),h++;d.push(t),p<=c.hour&&1e4>d.length&&d.forEach(function(e){0==e%18e5&&"000000000"===o.dateFormat("%H%M%S%L",e)&&(u[e]="day")})}return d.info=s(e,{higherRanks:u,totalRange:p*m}),d}}}),t(n,"parts/Options.js",[n["parts/Globals.js"]],function(e){var t=e.color,n=e.merge;e.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:e.Time.prototype.defaultOptions,chart:{styledMode:!1,borderRadius:0,colorCount:10,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",alignColumns:!0,layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:e.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:e.isTouchDevice?25:10,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:t("#f7f7f7").setOpacity(.85).get(),borderWidth:1,shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}},e.setOptions=function(t){return e.defaultOptions=n(!0,e.defaultOptions,t),e.time.update(n(e.defaultOptions.global,e.defaultOptions.time),!1),e.defaultOptions},e.getOptions=function(){return e.defaultOptions},e.defaultPlotOptions=e.defaultOptions.plotOptions,e.time=new e.Time(n(e.defaultOptions.global,e.defaultOptions.time)),e.dateFormat=function(t,n,i){return e.time.dateFormat(t,n,i)}}),t(n,"parts/Tick.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isNumber,r=e.correctFloat,a=e.destroyObjectProperties,s=e.fireEvent,o=e.merge,l=e.pick,c=e.deg2rad;e.Tick=function(e,t,n,i,r){this.axis=e,this.pos=t,this.type=n||"",this.isNewLabel=this.isNew=!0,this.parameters=r||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,n||i||this.addLabel()},e.Tick.prototype={addLabel:function(){var t=this,i=t.axis,a=i.options,s=i.chart,c=i.categories,d=i.names,u=t.pos,h=l(t.options&&t.options.labels,a.labels),p=i.tickPositions,m=u===p[0],g=u===p[p.length-1];c=this.parameters.category||(c?l(c[u],d[u],u):u);var f,v,y=t.label;if(p=p.info,i.isDatetimeAxis&&p)var b=s.time.resolveDTLFormat(a.dateTimeLabelFormats[!a.grid&&p.higherRanks[u]||p.unitName]),T=b.main;t.isFirst=m,t.isLast=g,t.formatCtx={axis:i,chart:s,isFirst:m,isLast:g,dateTimeLabelFormat:T,tickPositionInfo:p,value:i.isLog?r(i.lin2log(c)):c,pos:u},a=i.labelFormatter.call(t.formatCtx,this.formatCtx),(v=b&&b.list)&&(t.shortenLabel=function(){for(f=0;f<v.length;f++)if(y.attr({text:i.labelFormatter.call(e.extend(t.formatCtx,{dateTimeLabelFormat:v[f]}))}),y.getBBox().width<i.getSlotWidth(t)-2*l(h.padding,5))return;y.attr({text:""})}),n(y)?y&&y.textStr!==a&&(!y.textWidth||h.style&&h.style.width||y.styles.width||y.css({width:null}),y.attr({text:a}),y.textPxLength=y.getBBox().width):((t.label=y=n(a)&&h.enabled?s.renderer.text(a,0,0,h.useHTML).add(i.labelGroup):null)&&(s.styledMode||y.css(o(h.style)),y.textPxLength=y.getBBox().width),t.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(e){var t=this.axis,n=t.options.labels,i=e.x,r=t.chart.chartWidth,a=t.chart.spacing,s=l(t.labelLeft,Math.min(t.pos,a[3]));a=l(t.labelRight,Math.max(t.isRadial?0:t.pos+t.len,r-a[1]));var o,d=this.label,u=this.rotation,h={left:0,center:.5,right:1}[t.labelAlign||d.attr("align")],p=d.getBBox().width,m=t.getSlotWidth(this),g=m,f=1,v={};u||"justify"!==l(n.overflow,"justify")?0>u&&i-h*p<s?o=Math.round(i/Math.cos(u*c)-s):0<u&&i+h*p>a&&(o=Math.round((r-i)/Math.cos(u*c))):(r=i+(1-h)*p,i-h*p<s?g=e.x+g*(1-h)-s:r>a&&(g=a-e.x+g*h,f=-1),(g=Math.min(m,g))<m&&"center"===t.labelAlign&&(e.x+=f*(m-g-h*(m-Math.min(p,g)))),(p>g||t.autoRotation&&(d.styles||{}).width)&&(o=g)),o&&(this.shortenLabel?this.shortenLabel():(v.width=Math.floor(o),(n.style||{}).textOverflow||(v.textOverflow="ellipsis"),d.css(v)))},getPosition:function(t,n,i,r){var a=this.axis,o=a.chart,l=r&&o.oldChartHeight||o.chartHeight;return(t={x:t?e.correctFloat(a.translate(n+i,null,null,r)+a.transB):a.left+a.offset+(a.opposite?(r&&o.oldChartWidth||o.chartWidth)-a.right-a.left:0),y:t?l-a.bottom+a.offset-(a.opposite?a.height:0):e.correctFloat(l-a.translate(n+i,null,null,r)-a.transB)}).y=Math.max(Math.min(t.y,1e5),-1e5),s(this,"afterGetPosition",{pos:t}),t},getLabelPosition:function(e,t,i,r,a,o,l,d){var u=this.axis,h=u.transA,p=u.isLinked&&u.linkedParent?u.linkedParent.reversed:u.reversed,m=u.staggerLines,g=u.tickRotCorr||{x:0,y:0},f=a.y,v=r||u.reserveSpaceDefault?0:-u.labelOffset*("center"===u.labelAlign?.5:1),y={};return n(f)||(f=0===u.side?i.rotation?-8:-i.getBBox().height:2===u.side?g.y+8:Math.cos(i.rotation*c)*(g.y-i.getBBox(!1,0).height/2)),e=e+a.x+v+g.x-(o&&r?o*h*(p?-1:1):0),t=t+f-(o&&!r?o*h*(p?1:-1):0),m&&(i=l/(d||1)%m,u.opposite&&(i=m-i-1),t+=u.labelOffset/m*i),y.x=e,y.y=Math.round(t),s(this,"afterGetLabelPosition",{pos:y,tickmarkOffset:o,index:l}),y},getMarkPath:function(e,t,n,i,r,a){return a.crispLine(["M",e,t,"L",e+(r?0:-n),t+(r?n:0)],i)},renderGridLine:function(e,t,n){var i=this.axis,r=i.options,a=this.gridLine,s={},o=this.pos,c=this.type,d=l(this.tickmarkOffset,i.tickmarkOffset),u=i.chart.renderer,h=c?c+"Grid":"grid",p=r[h+"LineWidth"],m=r[h+"LineColor"];r=r[h+"LineDashStyle"],a||(i.chart.styledMode||(s.stroke=m,s["stroke-width"]=p,r&&(s.dashstyle=r)),c||(s.zIndex=1),e&&(t=0),this.gridLine=a=u.path().attr(s).addClass("highcharts-"+(c?c+"-":"")+"grid-line").add(i.gridGroup)),a&&(n=i.getPlotLinePath({value:o+d,lineWidth:a.strokeWidth()*n,force:"pass",old:e}))&&a[e||this.isNew?"attr":"animate"]({d:n,opacity:t})},renderMark:function(e,t,n){var i=this.axis,r=i.options,a=i.chart.renderer,s=this.type,o=s?s+"Tick":"tick",c=i.tickSize(o),d=this.mark,u=!d,h=e.x;e=e.y;var p=l(r[o+"Width"],!s&&i.isXAxis?1:0);r=r[o+"Color"],c&&(i.opposite&&(c[0]=-c[0]),u&&(this.mark=d=a.path().addClass("highcharts-"+(s?s+"-":"")+"tick").add(i.axisGroup),i.chart.styledMode||d.attr({stroke:r,"stroke-width":p})),d[u?"attr":"animate"]({d:this.getMarkPath(h,e,c[0],d.strokeWidth()*n,i.horiz,a),opacity:t}))},renderLabel:function(e,t,n,r){var a=this.axis,s=a.horiz,o=a.options,c=this.label,d=o.labels,u=d.step;a=l(this.tickmarkOffset,a.tickmarkOffset);var h=!0,p=e.x;e=e.y,c&&i(p)&&(c.xy=e=this.getLabelPosition(p,e,c,s,d,a,r,u),this.isFirst&&!this.isLast&&!l(o.showFirstLabel,1)||this.isLast&&!this.isFirst&&!l(o.showLastLabel,1)?h=!1:!s||d.step||d.rotation||t||0===n||this.handleOverflow(e),u&&r%u&&(h=!1),h&&i(e.y)?(e.opacity=n,c[this.isNewLabel?"attr":"animate"](e),this.isNewLabel=!1):(c.attr("y",-9999),this.isNewLabel=!0))},render:function(t,n,i){var r=this.axis,a=r.horiz,s=this.pos,o=l(this.tickmarkOffset,r.tickmarkOffset);o=(s=this.getPosition(a,s,o,n)).x;var c=s.y;r=a&&o===r.pos+r.len||!a&&c===r.pos?-1:1,i=l(i,1),this.isActive=!0,this.renderGridLine(n,i,r),this.renderMark(s,i,r),this.renderLabel(s,n,i,t),this.isNew=!1,e.fireEvent(this,"afterRender")},destroy:function(){a(this,this.axis)}}}),t(n,"parts/Axis.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isArray,r=t.isNumber,a=t.isString,s=t.objectEach,o=t.splat,l=e.addEvent,c=e.animObject,d=e.arrayMax,u=e.arrayMin,h=e.color,p=e.correctFloat,m=e.defaultOptions,g=e.deg2rad,f=e.destroyObjectProperties,v=e.extend,y=e.fireEvent,b=e.format,T=e.getMagnitude,S=e.merge,C=e.normalizeTickInterval,I=e.pick,_=e.removeEvent,M=e.seriesTypes,E=e.syncTimeout,w=e.Tick;return t=function(){this.init.apply(this,arguments)},e.extend(t.prototype,{defaultOptions:{dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e. %b"},week:{main:"%e. %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,labels:{enabled:!0,indentation:10,x:0,style:{color:"#666666",cursor:"default",fontSize:"11px"}},maxPadding:.01,minorTickLength:2,minorTickPosition:"outside",minPadding:.01,showEmpty:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){return e.numberFormat(this.total,-1)},style:{color:"#000000",fontSize:"11px",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},init:function(t,i){var r=i.isX,a=this;a.chart=t,a.horiz=t.inverted&&!a.isZAxis?!r:r,a.isXAxis=r,a.coll=a.coll||(r?"xAxis":"yAxis"),y(this,"init",{userOptions:i}),a.opposite=i.opposite,a.side=i.side||(a.horiz?a.opposite?0:2:a.opposite?1:3),a.setOptions(i);var c=this.options,d=c.type;a.labelFormatter=c.labels.formatter||a.defaultLabelFormatter,a.userOptions=i,a.minPixelPadding=0,a.reversed=c.reversed,a.visible=!1!==c.visible,a.zoomEnabled=!1!==c.zoomEnabled,a.hasNames="category"===d||!0===c.categories,a.categories=c.categories||a.hasNames,a.names||(a.names=[],a.names.keys={}),a.plotLinesAndBandsGroups={},a.isLog="logarithmic"===d,a.isDatetimeAxis="datetime"===d,a.positiveValuesOnly=a.isLog&&!a.allowNegativeLog,a.isLinked=n(c.linkedTo),a.ticks={},a.labelEdge=[],a.minorTicks={},a.plotLinesAndBands=[],a.alternateBands={},a.len=0,a.minRange=a.userMinRange=c.minRange||c.maxZoom,a.range=c.range,a.offset=c.offset||0,a.stacks={},a.oldStacks={},a.stacksTouched=0,a.max=null,a.min=null,a.crosshair=I(c.crosshair,o(t.options.tooltip.crosshairs)[r?0:1],!1),i=a.options.events,-1===t.axes.indexOf(a)&&(r?t.axes.splice(t.xAxis.length,0,a):t.axes.push(a),t[a.coll].push(a)),a.series=a.series||[],t.inverted&&!a.isZAxis&&r&&void 0===a.reversed&&(a.reversed=!0),s(i,function(t,n){e.isFunction(t)&&l(a,n,t)}),a.lin2log=c.linearToLogConverter||a.lin2log,a.isLog&&(a.val2lin=a.log2lin,a.lin2val=a.lin2log),y(this,"afterInit")},setOptions:function(e){this.options=S(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],S(m[this.coll],e)),y(this,"afterSetOptions",{userOptions:e})},defaultLabelFormatter:function(){var t=this.axis,n=this.value,i=t.chart.time,r=t.categories,a=this.dateTimeLabelFormat,s=m.lang,o=s.numericSymbols;s=s.numericSymbolMagnitude||1e3;var l=o&&o.length,c=t.options.labels.format;if(t=t.isLog?Math.abs(n):t.tickInterval,c)var d=b(c,this,i);else if(r)d=n;else if(a)d=i.dateFormat(a,n);else if(l&&1e3<=t)for(;l--&&void 0===d;)t>=(i=Math.pow(s,l+1))&&0==10*n%i&&null!==o[l]&&0!==n&&(d=e.numberFormat(n/i,-1)+o[l]);return void 0===d&&(d=1e4<=Math.abs(n)?e.numberFormat(n,-1):e.numberFormat(n,-1,void 0,"")),d},getSeriesExtremes:function(){var e,t=this,i=t.chart;y(this,"getSeriesExtremes",null,function(){t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.buildStacks&&t.buildStacks(),t.series.forEach(function(a){if(a.visible||!i.options.chart.ignoreHiddenSeries){var s=a.options,o=s.threshold;if(t.hasVisibleSeries=!0,t.positiveValuesOnly&&0>=o&&(o=null),t.isXAxis){if((s=a.xData).length){var l=(e=a.getXExtremes(s)).min,c=e.max;r(l)||l instanceof Date||(s=s.filter(r),l=(e=a.getXExtremes(s)).min,c=e.max),s.length&&(t.dataMin=Math.min(I(t.dataMin,l),l),t.dataMax=Math.max(I(t.dataMax,c),c))}}else a.getExtremes(),c=a.dataMax,l=a.dataMin,n(l)&&n(c)&&(t.dataMin=Math.min(I(t.dataMin,l),l),t.dataMax=Math.max(I(t.dataMax,c),c)),n(o)&&(t.threshold=o),(!s.softThreshold||t.positiveValuesOnly)&&(t.softThreshold=!1)}})}),y(this,"afterGetSeriesExtremes")},translate:function(e,t,n,i,a,s){var o=this.linkedParent||this,l=1,c=0,d=i?o.oldTransA:o.transA;i=i?o.oldMin:o.min;var u=o.minPixelPadding;return a=(o.isOrdinal||o.isBroken||o.isLog&&a)&&o.lin2val,d||(d=o.transA),n&&(l*=-1,c=o.len),o.reversed&&(c-=(l*=-1)*(o.sector||o.len)),t?(e=(e*l+c-u)/d+i,a&&(e=o.lin2val(e))):(a&&(e=o.val2lin(e)),e=r(i)?l*(e-i)*d+c+l*u+(r(s)?d*s:0):void 0),e},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e){var t,n,i,a,s,o=this,l=o.chart,c=o.left,d=o.top,u=e.old,h=e.value,p=e.translatedValue,m=e.lineWidth,g=e.force,f=u&&l.oldChartHeight||l.chartHeight,v=u&&l.oldChartWidth||l.chartWidth,b=o.transB,T=function(e,t,n){return("pass"!==g&&e<t||e>n)&&(g?e=Math.min(Math.max(t,e),n):s=!0),e};return e={value:h,lineWidth:m,old:u,force:g,acrossPanes:e.acrossPanes,translatedValue:p},y(this,"getPlotLinePath",e,function(e){p=I(p,o.translate(h,null,null,u)),p=Math.min(Math.max(-1e5,p),1e5),t=i=Math.round(p+b),n=a=Math.round(f-p-b),r(p)?o.horiz?(n=d,a=f-o.bottom,t=i=T(t,c,c+o.width)):(t=c,i=v-o.right,n=a=T(n,d,d+o.height)):(s=!0,g=!1),e.path=s&&!g?null:l.renderer.crispLine(["M",t,n,"L",i,a],m||1)}),e.path},getLinearTickPositions:function(e,t,n){var i=p(Math.floor(t/e)*e);n=p(Math.ceil(n/e)*e);var r,a=[];if(p(i+e)===i&&(r=20),this.single)return[t];for(t=i;t<=n&&(a.push(t),(t=p(t+e,r))!==s);)var s=t;return a},getMinorTickInterval:function(){var e=this.options;return!0===e.minorTicks?I(e.minorTickInterval,"auto"):!1===e.minorTicks?null:e.minorTickInterval},getMinorTickPositions:function(){var e=this,t=e.options,n=e.tickPositions,i=e.minorTickInterval,r=[],a=e.pointRangePadding||0,s=e.min-a,o=(a=e.max+a)-s;if(o&&o/i<e.len/3)if(e.isLog)this.paddedTicks.forEach(function(t,n,a){n&&r.push.apply(r,e.getLogTickPositions(i,a[n-1],a[n],!0))});else if(e.isDatetimeAxis&&"auto"===this.getMinorTickInterval())r=r.concat(e.getTimeTicks(e.normalizeTimeTickInterval(i),s,a,t.startOfWeek));else for(t=s+(n[0]-s)%i;t<=a&&t!==r[0];t+=i)r.push(t);return 0!==r.length&&e.trimTicks(r),r},adjustForMinRange:function(){var e,t,i,r,a=this.options,s=this.min,o=this.max;if(this.isXAxis&&void 0===this.minRange&&!this.isLog&&(n(a.min)||n(a.max)?this.minRange=null:(this.series.forEach(function(n){for(r=n.xData,t=n.xIncrement?1:r.length-1;0<t;t--)i=r[t]-r[t-1],(void 0===e||i<e)&&(e=i)}),this.minRange=Math.min(5*e,this.dataMax-this.dataMin))),o-s<this.minRange){var l=this.dataMax-this.dataMin>=this.minRange,c=this.minRange,h=(c-o+s)/2;h=[s-h,I(a.min,s-h)],l&&(h[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),o=[(s=d(h))+c,I(a.max,s+c)],l&&(o[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),(o=u(o))-s<c&&(h[0]=o-c,h[1]=I(a.min,o-c),s=d(h))}this.min=s,this.max=o},getClosest:function(){var e;return this.categories?e=1:this.series.forEach(function(t){var i=t.closestPointRange,r=t.visible||!t.chart.options.chart.ignoreHiddenSeries;!t.noSharedTooltip&&n(i)&&r&&(e=n(e)?Math.min(e,i):i)}),e},nameToX:function(e){var t=i(this.categories),r=t?this.categories:this.names,a=e.options.x;if(e.series.requireSorting=!1,n(a)||(a=!1===this.options.uniqueNames?e.series.autoIncrement():t?r.indexOf(e.name):I(r.keys[e.name],-1)),-1===a){if(!t)var s=r.length}else s=a;return void 0!==s&&(this.names[s]=e.name,this.names.keys[e.name]=s),s},updateNames:function(){var e=this,t=this.names;0<t.length&&(Object.keys(t.keys).forEach(function(e){delete t.keys[e]}),t.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(function(t){t.xIncrement=null,t.points&&!t.isDirtyData||(e.max=Math.max(e.max,t.xData.length-1),t.processData(),t.generatePoints()),t.data.forEach(function(n,i){if(n&&n.options&&void 0!==n.name){var r=e.nameToX(n);void 0!==r&&r!==n.x&&(n.x=r,t.xData[i]=r)}})}))},setAxisTranslation:function(e){var t=this,n=t.max-t.min,i=t.axisPointRange||0,r=0,s=0,o=t.linkedParent,l=!!t.categories,c=t.transA,d=t.isXAxis;if(d||l||i){var u=t.getClosest();o?(r=o.minPointOffset,s=o.pointRangePadding):t.series.forEach(function(e){var n=l?1:d?I(e.options.pointRange,u,0):t.axisPointRange||0,o=e.options.pointPlacement;i=Math.max(i,n),t.single&&!l||(e=M.xrange&&e instanceof M.xrange?!d:d,r=Math.max(r,e&&a(o)?0:n/2),s=Math.max(s,e&&"on"===o?0:n))}),o=t.ordinalSlope&&u?t.ordinalSlope/u:1,t.minPointOffset=r*=o,t.pointRangePadding=s*=o,t.pointRange=Math.min(i,n),d&&(t.closestPointRange=u)}e&&(t.oldTransA=c),t.translationSlope=t.transA=c=t.staticScale||t.len/(n+s||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=c*r,y(this,"afterSetAxisTranslation")},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var i=this,a=i.chart,s=i.options,o=i.isLog,l=i.isDatetimeAxis,c=i.isXAxis,d=i.isLinked,u=s.maxPadding,h=s.minPadding,m=s.tickInterval,g=s.tickPixelInterval,f=i.categories,v=r(i.threshold)?i.threshold:null,b=i.softThreshold;l||f||d||this.getTickAmount();var S=I(i.userMin,s.min),_=I(i.userMax,s.max);if(d){i.linkedParent=a[i.coll][s.linkedTo];var M=i.linkedParent.getExtremes();i.min=I(M.min,M.dataMin),i.max=I(M.max,M.dataMax),s.type!==i.linkedParent.options.type&&e.error(11,1,a)}else{if(!b&&n(v))if(i.dataMin>=v)M=v,h=0;else if(i.dataMax<=v){var E=v;u=0}i.min=I(S,M,i.dataMin),i.max=I(_,E,i.dataMax)}o&&(i.positiveValuesOnly&&!t&&0>=Math.min(i.min,I(i.dataMin,i.min))&&e.error(10,1,a),i.min=p(i.log2lin(i.min),15),i.max=p(i.log2lin(i.max),15)),i.range&&n(i.max)&&(i.userMin=i.min=S=Math.max(i.dataMin,i.minFromRange()),i.userMax=_=i.max,i.range=null),y(i,"foundExtremes"),i.beforePadding&&i.beforePadding(),i.adjustForMinRange(),!(f||i.axisPointRange||i.usePercentage||d)&&n(i.min)&&n(i.max)&&(a=i.max-i.min)&&(!n(S)&&h&&(i.min-=a*h),!n(_)&&u&&(i.max+=a*u)),r(s.softMin)&&!r(i.userMin)&&s.softMin<i.min&&(i.min=S=s.softMin),r(s.softMax)&&!r(i.userMax)&&s.softMax>i.max&&(i.max=_=s.softMax),r(s.floor)&&(i.min=Math.min(Math.max(i.min,s.floor),Number.MAX_VALUE)),r(s.ceiling)&&(i.max=Math.max(Math.min(i.max,s.ceiling),I(i.userMax,-Number.MAX_VALUE))),b&&n(i.dataMin)&&(v=v||0,!n(S)&&i.min<v&&i.dataMin>=v?i.min=i.options.minRange?Math.min(v,i.max-i.minRange):v:!n(_)&&i.max>v&&i.dataMax<=v&&(i.max=i.options.minRange?Math.max(v,i.min+i.minRange):v)),i.tickInterval=i.min===i.max||void 0===i.min||void 0===i.max?1:d&&!m&&g===i.linkedParent.options.tickPixelInterval?m=i.linkedParent.tickInterval:I(m,this.tickAmount?(i.max-i.min)/Math.max(this.tickAmount-1,1):void 0,f?1:(i.max-i.min)*g/Math.max(i.len,g)),c&&!t&&i.series.forEach(function(e){e.processData(i.min!==i.oldMin||i.max!==i.oldMax)}),i.setAxisTranslation(!0),i.beforeSetTickPositions&&i.beforeSetTickPositions(),i.postProcessTickInterval&&(i.tickInterval=i.postProcessTickInterval(i.tickInterval)),i.pointRange&&!m&&(i.tickInterval=Math.max(i.pointRange,i.tickInterval)),t=I(s.minTickInterval,i.isDatetimeAxis&&i.closestPointRange),!m&&i.tickInterval<t&&(i.tickInterval=t),l||o||m||(i.tickInterval=C(i.tickInterval,null,T(i.tickInterval),I(s.allowDecimals,!(.5<i.tickInterval&&5>i.tickInterval&&1e3<i.max&&9999>i.max)),!!this.tickAmount)),this.tickAmount||(i.tickInterval=i.unsquish()),this.setTickPositions()},setTickPositions:function(){var t=this.options,i=t.tickPositions,r=this.getMinorTickInterval(),a=t.tickPositioner,s=t.startOnTick,o=t.endOnTick;this.tickmarkOffset=this.categories&&"between"===t.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===r&&this.tickInterval?this.tickInterval/5:r,this.single=this.min===this.max&&n(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==t.allowDecimals),this.tickPositions=r=i&&i.slice(),!r&&(!this.ordinalPositions&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200)?(r=[this.min,this.max],e.error(19,!1,this.chart)):r=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,t.units),this.min,this.max,t.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),r.length>this.len&&((r=[r[0],r.pop()])[0]===r[1]&&(r.length=1)),this.tickPositions=r,a&&(a=a.apply(this,[this.min,this.max])))&&(this.tickPositions=r=a),this.paddedTicks=r.slice(0),this.trimTicks(r,s,o),this.isLinked||(this.single&&2>r.length&&!this.categories&&(this.min-=.5,this.max+=.5),i||a||this.adjustTickAmount()),y(this,"afterSetTickPositions")},trimTicks:function(e,t,i){var r=e[0],a=e[e.length-1],s=this.minPointOffset||0;if(y(this,"trimTicks"),!this.isLinked){if(t&&-1/0!==r)this.min=r;else for(;this.min-s>e[0];)e.shift();if(i)this.max=a;else for(;this.max+s<e[e.length-1];)e.pop();0===e.length&&n(r)&&!this.options.tickPositions&&e.push((a+r)/2)}},alignToOthers:function(){var e,t={},n=this.options;return!1===this.chart.options.chart.alignTicks||!1===n.alignTicks||!1===n.startOnTick||!1===n.endOnTick||this.isLog||this.chart[this.coll].forEach(function(n){var i=n.options;i=[n.horiz?i.left:i.top,i.width,i.height,i.pane].join(),n.series.length&&(t[i]?e=!0:t[i]=1)}),e},getTickAmount:function(){var e=this.options,t=e.tickAmount,i=e.tickPixelInterval;!n(e.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&e.startOnTick&&e.endOnTick&&(t=2),!t&&this.alignToOthers()&&(t=Math.ceil(this.len/i)+1),4>t&&(this.finalTickAmt=t,t=5),this.tickAmount=t},adjustTickAmount:function(){var e,t=this.options,i=this.tickInterval,r=this.tickPositions,a=this.tickAmount,s=this.finalTickAmt,o=r&&r.length,l=I(this.threshold,this.softThreshold?0:null);if(this.hasData()){if(o<a){for(e=this.min;r.length<a;)r.length%2||e===l?r.push(p(r[r.length-1]+i)):r.unshift(p(r[0]-i));this.transA*=(o-1)/(a-1),this.min=t.startOnTick?r[0]:Math.min(this.min,r[0]),this.max=t.endOnTick?r[r.length-1]:Math.max(this.max,r[r.length-1])}else o>a&&(this.tickInterval*=2,this.setTickPositions());if(n(s)){for(i=t=r.length;i--;)(3===s&&1==i%2||2>=s&&0<i&&i<t-1)&&r.splice(i,1);this.finalTickAmt=void 0}}},setScale:function(){var e,t=this.series.some(function(e){return e.isDirtyData||e.isDirty||e.xAxis&&e.xAxis.isDirty});this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),(e=this.len!==this.oldAxisLength)||t||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks(),y(this,"afterSetScale")},setExtremes:function(e,t,n,i,r){var a=this,s=a.chart;n=I(n,!0),a.series.forEach(function(e){delete e.kdTree}),r=v(r,{min:e,max:t}),y(a,"setExtremes",r,function(){a.userMin=e,a.userMax=t,a.eventArgs=r,n&&s.redraw(i)})},zoom:function(e,t){var i=this.dataMin,r=this.dataMax,a=this.options,s=Math.min(i,I(a.min,i)),o=Math.max(r,I(a.max,r));return y(this,"zoom",e={newMin:e,newMax:t},function(e){var t=e.newMin,a=e.newMax;t===this.min&&a===this.max||(this.allowZoomOutside||(n(i)&&(t<s&&(t=s),t>o&&(t=o)),n(r)&&(a<s&&(a=s),a>o&&(a=o))),this.displayBtn=void 0!==t||void 0!==a,this.setExtremes(t,a,!1,void 0,{trigger:"zoom"})),e.zoomed=!0}),e.zoomed},setAxisSize:function(){var t=this.chart,n=this.options,i=n.offsets||[0,0,0,0],r=this.horiz,a=this.width=Math.round(e.relativeLength(I(n.width,t.plotWidth-i[3]+i[1]),t.plotWidth)),s=this.height=Math.round(e.relativeLength(I(n.height,t.plotHeight-i[0]+i[2]),t.plotHeight)),o=this.top=Math.round(e.relativeLength(I(n.top,t.plotTop+i[0]),t.plotHeight,t.plotTop));n=this.left=Math.round(e.relativeLength(I(n.left,t.plotLeft+i[3]),t.plotWidth,t.plotLeft)),this.bottom=t.chartHeight-s-o,this.right=t.chartWidth-a-n,this.len=Math.max(r?a:s,0),this.pos=r?n:o},getExtremes:function(){var e=this.isLog;return{min:e?p(this.lin2log(this.min)):this.min,max:e?p(this.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var t=this.isLog,n=t?this.lin2log(this.min):this.min;return t=t?this.lin2log(this.max):this.max,null===e||-1/0===e?e=n:1/0===e?e=t:n>e?e=n:t<e&&(e=t),this.translate(e,0,1,0,1)},autoLabelAlign:function(e){var t=(I(e,0)-90*this.side+720)%360;return y(this,"autoLabelAlign",e={align:"center"},function(e){15<t&&165>t?e.align="right":195<t&&345>t&&(e.align="left")}),e.align},tickSize:function(e){var t=this.options,n=t[e+"Length"],i=I(t[e+"Width"],"tick"===e&&this.isXAxis&&!this.categories?1:0);if(i&&n){"inside"===t[e+"Position"]&&(n=-n);var r=[n,i]}return y(this,"afterTickSize",e={tickSize:r}),e.tickSize},labelMetrics:function(){var e=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[e]&&this.ticks[e].label)},unsquish:function(){var e,t,i,r=this.options.labels,a=this.horiz,s=this.tickInterval,o=s,l=this.len/(((this.categories?1:0)+this.max-this.min)/s),c=r.rotation,d=this.labelMetrics(),u=Number.MAX_VALUE,h=this.max-this.min,m=function(e){var t=e/(l||1);return(t=1<t?Math.ceil(t):1)*s>h&&1/0!==e&&1/0!==l&&h&&(t=Math.ceil(h/s)),p(t*s)};return a?(i=!r.staggerLines&&!r.step&&(n(c)?[c]:l<I(r.autoRotationLimit,80)&&r.autoRotation))&&i.forEach(function(n){if(n===c||n&&-90<=n&&90>=n){var i=(t=m(Math.abs(d.h/Math.sin(g*n))))+Math.abs(n/360);i<u&&(u=i,e=n,o=t)}}):r.step||(o=m(d.h)),this.autoRotation=i,this.labelRotation=I(e,c),o},getSlotWidth:function(e){var t=this.chart,n=this.horiz,i=this.options.labels,r=Math.max(this.tickPositions.length-(this.categories?0:1),1),a=t.margin[3];return e&&e.slotWidth||n&&2>(i.step||0)&&!i.rotation&&(this.staggerLines||1)*this.len/r||!n&&(i.style&&parseInt(i.style.width,10)||a&&a-t.spacing[3]||.33*t.chartWidth)},renderUnsquish:function(){var e=this.chart,t=e.renderer,n=this.tickPositions,i=this.ticks,r=this.options.labels,s=r&&r.style||{},o=this.horiz,l=this.getSlotWidth(),c=Math.max(1,Math.round(l-2*(r.padding||5))),d={},u=this.labelMetrics(),h=r.style&&r.style.textOverflow,p=0;if(a(r.rotation)||(d.rotation=r.rotation||0),n.forEach(function(e){(e=i[e])&&e.label&&e.label.textPxLength>p&&(p=e.label.textPxLength)}),this.maxLabelLength=p,this.autoRotation)p>c&&p>u.h?d.rotation=this.labelRotation:this.labelRotation=0;else if(l){var m=c;if(!h){var g="clip";for(c=n.length;!o&&c--;){var f=n[c];(f=i[f].label)&&(f.styles&&"ellipsis"===f.styles.textOverflow?f.css({textOverflow:"clip"}):f.textPxLength>l&&f.css({width:l+"px"}),f.getBBox().height>this.len/n.length-(u.h-u.f)&&(f.specificTextOverflow="ellipsis"))}}}d.rotation&&(m=p>.5*e.chartHeight?.33*e.chartHeight:p,h||(g="ellipsis")),(this.labelAlign=r.align||this.autoLabelAlign(this.labelRotation))&&(d.align=this.labelAlign),n.forEach(function(e){var t=(e=i[e])&&e.label,n=s.width,r={};t&&(t.attr(d),e.shortenLabel?e.shortenLabel():m&&!n&&"nowrap"!==s.whiteSpace&&(m<t.textPxLength||"SPAN"===t.element.tagName)?(r.width=m,h||(r.textOverflow=t.specificTextOverflow||g),t.css(r)):t.styles&&t.styles.width&&!r.width&&!n&&t.css({width:null}),delete t.specificTextOverflow,e.rotation=d.rotation)},this),this.tickRotCorr=t.rotCorr(u.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.series.some(function(e){return e.hasData()})||this.options.showEmpty&&n(this.min)&&n(this.max)},addTitle:function(e){var t,n=this.chart.renderer,i=this.horiz,r=this.opposite,a=this.options.title,s=this.chart.styledMode;this.axisTitle||((t=a.textAlign)||(t=(i?{low:"left",middle:"center",high:"right"}:{low:r?"right":"left",middle:"center",high:r?"left":"right"})[a.align]),this.axisTitle=n.text(a.text,0,0,a.useHTML).attr({zIndex:7,rotation:a.rotation||0,align:t}).addClass("highcharts-axis-title"),s||this.axisTitle.css(S(a.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),s||a.style.width||this.isRadial||this.axisTitle.css({width:this.len}),this.axisTitle[e?"show":"hide"](e)},generateTick:function(e){var t=this.ticks;t[e]?t[e].addLabel():t[e]=new w(this,e)},getOffset:function(){var e,t=this,i=t.chart,r=i.renderer,a=t.options,o=t.tickPositions,l=t.ticks,c=t.horiz,d=t.side,u=i.inverted&&!t.isZAxis?[1,0,3,2][d]:d,h=0,p=0,m=a.title,g=a.labels,f=0,v=i.axisOffset;i=i.clipOffset;var b=[-1,1,1,-1][d],T=a.className,S=t.axisParent,C=t.hasData();if(t.showAxis=e=C||I(a.showEmpty,!0),t.staggerLines=t.horiz&&g.staggerLines,t.axisGroup||(t.gridGroup=r.g("grid").attr({zIndex:a.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(T||"")).add(S),t.axisGroup=r.g("axis").attr({zIndex:a.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(T||"")).add(S),t.labelGroup=r.g("axis-labels").attr({zIndex:g.zIndex||7}).addClass("highcharts-"+t.coll.toLowerCase()+"-labels "+(T||"")).add(S)),C||t.isLinked?(o.forEach(function(e,n){t.generateTick(e,n)}),t.renderUnsquish(),t.reserveSpaceDefault=0===d||2===d||{1:"left",3:"right"}[d]===t.labelAlign,I(g.reserveSpace,"center"===t.labelAlign||null,t.reserveSpaceDefault)&&o.forEach(function(e){f=Math.max(l[e].getLabelSize(),f)}),t.staggerLines&&(f*=t.staggerLines),t.labelOffset=f*(t.opposite?-1:1)):s(l,function(e,t){e.destroy(),delete l[t]}),m&&m.text&&!1!==m.enabled&&(t.addTitle(e),e&&!1!==m.reserveSpace)){t.titleOffset=h=t.axisTitle.getBBox()[c?"height":"width"];var _=m.offset;p=n(_)?0:I(m.margin,c?5:10)}t.renderLine(),t.offset=b*I(a.offset,v[d]?v[d]+(a.margin||0):0),t.tickRotCorr=t.tickRotCorr||{x:0,y:0},r=0===d?-t.labelMetrics().h:2===d?t.tickRotCorr.y:0,p=Math.abs(f)+p,f&&(p=p-r+b*(c?I(g.y,t.tickRotCorr.y+8*b):g.x)),t.axisTitleMargin=I(_,p),t.getMaxLabelDimensions&&(t.maxLabelDimensions=t.getMaxLabelDimensions(l,o)),c=this.tickSize("tick"),v[d]=Math.max(v[d],t.axisTitleMargin+h+b*t.offset,p,o&&o.length&&c?c[0]+b*t.offset:0),a=a.offset?0:2*Math.floor(t.axisLine.strokeWidth()/2),i[u]=Math.max(i[u],a),y(this,"afterGetOffset")},getLinePath:function(e){var t=this.chart,n=this.opposite,i=this.offset,r=this.horiz,a=this.left+(n?this.width:0)+i;return i=t.chartHeight-this.bottom-(n?this.height:0)+i,n&&(e*=-1),t.renderer.crispLine(["M",r?this.left:a,r?i:this.top,"L",r?t.chartWidth-this.right:a,r?i:t.chartHeight-this.bottom],e)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var e=this.horiz,t=this.left,n=this.top,i=this.len,r=this.options.title,a=e?t:n,s=this.opposite,o=this.offset,l=r.x||0,c=r.y||0,d=this.axisTitle,u=this.chart.renderer.fontMetrics(r.style&&r.style.fontSize,d);return d=Math.max(d.getBBox(null,0).height-u.h-1,0),i={low:a+(e?0:i),middle:a+i/2,high:a+(e?i:0)}[r.align],t=(e?n+this.height:t)+(e?1:-1)*(s?-1:1)*this.axisTitleMargin+[-d,d,u.f,-d][this.side],e={x:e?i+l:t+(s?this.width:0)+o+l,y:e?t+c-(s?this.height:0)+o:i+c},y(this,"afterGetTitlePosition",{titlePosition:e}),e},renderMinorTick:function(e){var t=this.chart.hasRendered&&r(this.oldMin),n=this.minorTicks;n[e]||(n[e]=new w(this,e,"minor")),t&&n[e].isNew&&n[e].render(null,!0),n[e].render(null,!1,1)},renderTick:function(e,t){var n=this.isLinked,i=this.ticks,a=this.chart.hasRendered&&r(this.oldMin);(!n||e>=this.min&&e<=this.max)&&(i[e]||(i[e]=new w(this,e)),a&&i[e].isNew&&i[e].render(t,!0,-1),i[e].render(t))},render:function(){var t,n,i=this,a=i.chart,o=i.options,l=i.isLog,d=i.isLinked,u=i.tickPositions,h=i.axisTitle,p=i.ticks,m=i.minorTicks,g=i.alternateBands,f=o.stackLabels,v=o.alternateGridColor,b=i.tickmarkOffset,T=i.axisLine,S=i.showAxis,C=c(a.renderer.globalAnimation);i.labelEdge.length=0,i.overlap=!1,[p,m,g].forEach(function(e){s(e,function(e){e.isActive=!1})}),(i.hasData()||d)&&(i.minorTickInterval&&!i.categories&&i.getMinorTickPositions().forEach(function(e){i.renderMinorTick(e)}),u.length&&(u.forEach(function(e,t){i.renderTick(e,t)}),b&&(0===i.min||i.single)&&(p[-1]||(p[-1]=new w(i,-1,null,!0)),p[-1].render(-1))),v&&u.forEach(function(r,s){n=void 0!==u[s+1]?u[s+1]+b:i.max-b,0==s%2&&r<i.max&&n<=i.max+(a.polar?-b:b)&&(g[r]||(g[r]=new e.PlotLineOrBand(i)),t=r+b,g[r].options={from:l?i.lin2log(t):t,to:l?i.lin2log(n):n,color:v},g[r].render(),g[r].isActive=!0)}),i._addedPlotLB||((o.plotLines||[]).concat(o.plotBands||[]).forEach(function(e){i.addPlotBandOrLine(e)}),i._addedPlotLB=!0)),[p,m,g].forEach(function(e){var t,n=[],i=C.duration;s(e,function(e,t){e.isActive||(e.render(t,!1,0),e.isActive=!1,n.push(t))}),E(function(){for(t=n.length;t--;)e[n[t]]&&!e[n[t]].isActive&&(e[n[t]].destroy(),delete e[n[t]])},e!==g&&a.hasRendered&&i?i:0)}),T&&(T[T.isPlaced?"animate":"attr"]({d:this.getLinePath(T.strokeWidth())}),T.isPlaced=!0,T[S?"show":"hide"](S)),h&&S&&(o=i.getTitlePosition(),r(o.y)?(h[h.isNew?"attr":"animate"](o),h.isNew=!1):(h.attr("y",-9999),h.isNew=!0)),f&&f.enabled&&i.renderStackTotals(),i.isDirty=!1,y(this,"afterRender")},redraw:function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(e){e.render()})),this.series.forEach(function(e){e.isDirty=!0})},keepProps:"extKey hcEvents names series userMax userMin".split(" "),destroy:function(e){var t,n=this,i=n.stacks,r=n.plotLinesAndBands;if(y(this,"destroy",{keepEvents:e}),e||_(n),s(i,function(e,t){f(e),i[t]=null}),[n.ticks,n.minorTicks,n.alternateBands].forEach(function(e){f(e)}),r)for(e=r.length;e--;)r[e].destroy();for(t in"stackTotalGroup axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach(function(e){n[e]&&(n[e]=n[e].destroy())}),n.plotLinesAndBandsGroups)n.plotLinesAndBandsGroups[t]=n.plotLinesAndBandsGroups[t].destroy();s(n,function(e,t){-1===n.keepProps.indexOf(t)&&delete n[t]})},drawCrosshair:function(e,t){var i,r,a=this.crosshair,s=I(a.snap,!0),o=this.cross;if(y(this,"drawCrosshair",{e:e,point:t}),e||(e=this.cross&&this.cross.e),this.crosshair&&!1!==(n(t)||!s)){if(s?n(t)&&(r=I("colorAxis"!==this.coll?t.crosshairPos:null,this.isXAxis?t.plotX:this.len-t.plotY)):r=e&&(this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos),n(r)&&(i=this.getPlotLinePath({value:t&&(this.isXAxis?t.x:I(t.stackY,t.y)),translatedValue:r})||null),!n(i))return void this.hideCrosshair();s=this.categories&&!this.isRadial,o||(this.cross=o=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(s?"category ":"thin ")+a.className).attr({zIndex:I(a.zIndex,2)}).add(),this.chart.styledMode||(o.attr({stroke:a.color||(s?h("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":I(a.width,1)}).css({"pointer-events":"none"}),a.dashStyle&&o.attr({dashstyle:a.dashStyle}))),o.show().attr({d:i}),s&&!a.width&&o.attr({"stroke-width":this.transA}),this.cross.e=e}else this.hideCrosshair();y(this,"afterDrawCrosshair",{e:e,point:t})},hideCrosshair:function(){this.cross&&this.cross.hide(),y(this,"afterHideCrosshair")}}),e.Axis=t}),t(n,"parts/DateTimeAxis.js",[n["parts/Globals.js"]],function(e){var t=e.Axis,n=e.getMagnitude,i=e.normalizeTickInterval,r=e.timeUnits;t.prototype.getTimeTicks=function(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)},t.prototype.normalizeTimeTickInterval=function(e,t){var a=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];t=a[a.length-1];var s,o=r[t[0]],l=t[1];for(s=0;s<a.length&&(t=a[s],o=r[t[0]],l=t[1],!(a[s+1]&&e<=(o*l[l.length-1]+r[a[s+1][0]])/2));s++);return o===r.year&&e<5*o&&(l=[1,2,5]),{unitRange:o,count:e=i(e/o,l,"year"===t[0]?Math.max(n(e/o),1):1),unitName:t[0]}}}),t(n,"parts/LogarithmicAxis.js",[n["parts/Globals.js"]],function(e){var t=e.Axis,n=e.getMagnitude,i=e.normalizeTickInterval,r=e.pick;t.prototype.getLogTickPositions=function(e,t,a,s){var o=this.options,l=this.len,c=[];if(s||(this._minorAutoInterval=null),.5<=e)e=Math.round(e),c=this.getLinearTickPositions(e,t,a);else if(.08<=e){var d,u;for(l=Math.floor(t),o=.3<e?[1,2,4]:.15<e?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];l<a+1&&!u;l++){var h=o.length;for(d=0;d<h&&!u;d++){var p=this.log2lin(this.lin2log(l)*o[d]);p>t&&(!s||m<=a)&&void 0!==m&&c.push(m),m>a&&(u=!0);var m=p}}}else t=this.lin2log(t),a=this.lin2log(a),e=s?this.getMinorTickInterval():o.tickInterval,e=r("auto"===e?null:e,this._minorAutoInterval,o.tickPixelInterval/(s?5:1)*(a-t)/((s?l/this.tickPositions.length:l)||1)),e=i(e,null,n(e)),c=this.getLinearTickPositions(e,t,a).map(this.log2lin),s||(this._minorAutoInterval=e/5);return s||(this.tickInterval=e),c},t.prototype.log2lin=function(e){return Math.log(e)/Math.LN10},t.prototype.lin2log=function(e){return Math.pow(10,e)}}),t(n,"parts/PlotLineOrBand.js",[n["parts/Globals.js"],n["parts/Axis.js"],n["parts/Utilities.js"]],function(e,t,n){var i=n.defined,r=n.erase,a=n.objectEach,s=e.arrayMax,o=e.arrayMin,l=e.destroyObjectProperties,c=e.merge,d=e.pick;e.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},e.PlotLineOrBand.prototype={render:function(){e.fireEvent(this,"render");var t=this,n=t.axis,r=n.horiz,s=t.options,o=s.label,l=t.label,u=s.to,h=s.from,p=s.value,m=i(h)&&i(u),g=i(p),f=t.svgElem,v=!f,y=[],b=s.color,T=d(s.zIndex,0),S=s.events;y={class:"highcharts-plot-"+(m?"band ":"line ")+(s.className||"")};var C={},I=n.chart.renderer,_=m?"bands":"lines";if(n.isLog&&(h=n.log2lin(h),u=n.log2lin(u),p=n.log2lin(p)),n.chart.styledMode||(g?(y.stroke=b||"#999999",y["stroke-width"]=d(s.width,1),s.dashStyle&&(y.dashstyle=s.dashStyle)):m&&(y.fill=b||"#e6ebf5",s.borderWidth&&(y.stroke=s.borderColor,y["stroke-width"]=s.borderWidth))),C.zIndex=T,_+="-"+T,(b=n.plotLinesAndBandsGroups[_])||(n.plotLinesAndBandsGroups[_]=b=I.g("plot-"+_).attr(C).add()),v&&(t.svgElem=f=I.path().attr(y).add(b)),g)y=n.getPlotLinePath({value:p,lineWidth:f.strokeWidth(),acrossPanes:s.acrossPanes});else{if(!m)return;y=n.getPlotBandPath(h,u,s)}return(v||!f.d)&&y&&y.length?(f.attr({d:y}),S&&a(S,function(e,n){f.on(n,function(e){S[n].apply(t,[e])})})):f&&(y?(f.show(!0),f.animate({d:y})):f.d&&(f.hide(),l&&(t.label=l=l.destroy()))),o&&(i(o.text)||i(o.formatter))&&y&&y.length&&0<n.width&&0<n.height&&!y.isFlat?(o=c({align:r&&m&&"center",x:r?!m&&4:10,verticalAlign:!r&&m&&"middle",y:r?m?16:10:m?6:-4,rotation:r&&!m&&90},o),this.renderLabel(o,y,m,T)):l&&l.hide(),t},renderLabel:function(e,t,n,i){var r=this.label,a=this.axis.chart.renderer;r||((r={align:e.textAlign||e.align,rotation:e.rotation,class:"highcharts-plot-"+(n?"band":"line")+"-label "+(e.className||"")}).zIndex=i,i=this.getLabelText(e),this.label=r=a.text(i,0,0,e.useHTML).attr(r).add(),this.axis.chart.styledMode||r.css(e.style)),a=t.xBounds||[t[1],t[4],n?t[6]:t[1]],t=t.yBounds||[t[2],t[5],n?t[7]:t[2]],n=o(a),i=o(t),r.align(e,!1,{x:n,y:i,width:s(a)-n,height:s(t)-i}),r.show(!0)},getLabelText:function(e){return i(e.formatter)?e.formatter.call(this):e.text},destroy:function(){r(this.axis.plotLinesAndBands,this),delete this.axis,l(this)}},e.extend(t.prototype,{getPlotBandPath:function(e,t){var n=this.getPlotLinePath({value:t,force:!0,acrossPanes:this.options.acrossPanes}),i=this.getPlotLinePath({value:e,force:!0,acrossPanes:this.options.acrossPanes}),r=[],a=this.horiz,s=1;if(e=e<this.min&&t<this.min||e>this.max&&t>this.max,i&&n){if(e){var o=i.toString()===n.toString();s=0}for(e=0;e<i.length;e+=6)a&&n[e+1]===i[e+1]?(n[e+1]+=s,n[e+4]+=s):a||n[e+2]!==i[e+2]||(n[e+2]+=s,n[e+5]+=s),r.push("M",i[e+1],i[e+2],"L",i[e+4],i[e+5],n[e+4],n[e+5],n[e+1],n[e+2],"z"),r.isFlat=o}return r},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(t,n){var i=new e.PlotLineOrBand(this,t).render(),r=this.userOptions;if(i){if(n){var a=r[n]||[];a.push(t),r[n]=a}this.plotLinesAndBands.push(i)}return i},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=this.options,i=this.userOptions,a=t.length;a--;)t[a].id===e&&t[a].destroy();[n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]].forEach(function(t){for(a=t.length;a--;)t[a].id===e&&r(t,t[a])})},removePlotBand:function(e){this.removePlotBandOrLine(e)},removePlotLine:function(e){this.removePlotBandOrLine(e)}})}),t(n,"parts/Tooltip.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isNumber,r=t.isString,a=t.splat,s=e.doc,o=e.extend,l=e.format,c=e.merge,d=e.pick,u=e.syncTimeout,h=e.timeUnits;e.Tooltip=function(){this.init.apply(this,arguments)},e.Tooltip.prototype={init:function(e,t){this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=t.split&&!e.inverted,this.shared=t.shared||this.split,this.outside=d(t.outside,!(!e.scrollablePixelsX&&!e.scrollablePixelsY))&&!this.split},cleanSplit:function(e){this.chart.series.forEach(function(t){var n=t&&t.tt;n&&(!n.isActive||e?t.tt=n.destroy():n.isActive=!1)})},applyFilter:function(){var e=this.chart;e.renderer.definition({tagName:"filter",id:"drop-shadow-"+e.index,opacity:.5,children:[{tagName:"feGaussianBlur",in:"SourceAlpha",stdDeviation:1},{tagName:"feOffset",dx:1,dy:1},{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",type:"linear",slope:.3}]},{tagName:"feMerge",children:[{tagName:"feMergeNode"},{tagName:"feMergeNode",in:"SourceGraphic"}]}]}),e.renderer.definition({tagName:"style",textContent:".highcharts-tooltip-"+e.index+"{filter:url(#drop-shadow-"+e.index+")}"})},getLabel:function(){var t,i=this,r=this.chart.renderer,a=this.chart.styledMode,s=this.options,o="tooltip"+(n(s.className)?" "+s.className:"");if(!this.label){if(this.outside&&(this.container=t=e.doc.createElement("div"),t.className="highcharts-tooltip-container",e.css(t,{position:"absolute",top:"1px",pointerEvents:s.style&&s.style.pointerEvents,zIndex:3}),e.doc.body.appendChild(t),this.renderer=r=new e.Renderer(t,0,0,{},void 0,void 0,r.styledMode)),this.split?this.label=r.g(o):(this.label=r.label("",0,0,s.shape||"callout",null,null,s.useHTML,null,o).attr({padding:s.padding,r:s.borderRadius}),a||this.label.attr({fill:s.backgroundColor,"stroke-width":s.borderWidth}).css(s.style).shadow(s.shadow)),a&&(this.applyFilter(),this.label.addClass("highcharts-tooltip-"+this.chart.index)),this.outside){var l={x:this.label.xSetter,y:this.label.ySetter};this.label.xSetter=function(e,n){l[n].call(this.label,i.distance),t.style.left=e+"px"},this.label.ySetter=function(e,n){l[n].call(this.label,i.distance),t.style.top=e+"px"}}this.label.attr({zIndex:8}).add()}return this.label},update:function(e){this.destroy(),c(!0,this.chart.options.tooltip.userOptions,e),this.init(this.chart,c(!0,this.options,e))},destroy:function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),this.renderer&&(this.renderer=this.renderer.destroy(),e.discardElement(this.container)),e.clearTimeout(this.hideTimer),e.clearTimeout(this.tooltipTimeout)},move:function(t,n,i,r){var a=this,s=a.now,l=!1!==a.options.animation&&!a.isHidden&&(1<Math.abs(t-s.x)||1<Math.abs(n-s.y)),c=a.followPointer||1<a.len;o(s,{x:l?(2*s.x+t)/3:t,y:l?(s.y+n)/2:n,anchorX:c?void 0:l?(2*s.anchorX+i)/3:i,anchorY:c?void 0:l?(s.anchorY+r)/2:r}),a.getLabel().attr(s),l&&(e.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){a&&a.move(t,n,i,r)},32))},hide:function(t){var n=this;e.clearTimeout(this.hideTimer),t=d(t,this.options.hideDelay,500),this.isHidden||(this.hideTimer=u(function(){n.getLabel()[t?"fadeOut":"hide"](),n.isHidden=!0},t))},getAnchor:function(e,t){var n,i,r=this.chart,s=r.pointer,o=r.inverted,l=r.plotTop,c=r.plotLeft,d=0,u=0;return e=a(e),this.followPointer&&t?(void 0===t.chartX&&(t=s.normalize(t)),e=[t.chartX-r.plotLeft,t.chartY-l]):e[0].tooltipPos?e=e[0].tooltipPos:(e.forEach(function(e){n=e.series.yAxis,i=e.series.xAxis,d+=e.plotX+(!o&&i?i.left-c:0),u+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!o&&n?n.top-l:0)}),d/=e.length,u/=e.length,e=[o?r.plotWidth-u:d,this.shared&&!o&&1<e.length&&t?t.chartY-l:o?r.plotHeight-d:u]),e.map(Math.round)},getPosition:function(e,t,n){var i,r=this.chart,a=this.distance,o={},l=r.inverted&&n.h||0,c=this.outside,u=c?s.documentElement.clientWidth-2*a:r.chartWidth,h=c?Math.max(s.body.scrollHeight,s.documentElement.scrollHeight,s.body.offsetHeight,s.documentElement.offsetHeight,s.documentElement.clientHeight):r.chartHeight,p=r.pointer.chartPosition,m=r.containerScaling,g=function(e){return m?e*m.scaleX:e},f=function(e){return m?e*m.scaleY:e},v=function(i){var s="x"===i;return[i,s?u:h,s?e:t].concat(c?[s?g(e):f(t),s?p.left-a+g(n.plotX+r.plotLeft):p.top-a+f(n.plotY+r.plotTop),0,s?u:h]:[s?e:t,s?n.plotX+r.plotLeft:n.plotY+r.plotTop,s?r.plotLeft:r.plotTop,s?r.plotLeft+r.plotWidth:r.plotTop+r.plotHeight])},y=v("y"),b=v("x"),T=!this.followPointer&&d(n.ttBelow,!r.inverted==!!n.negative),S=function(e,t,n,i,r,s,c){var d="y"===e?f(a):g(a),u=(n-i)/2,h=i<r-a,p=r+a+i<t,m=r-d-n+u;if(r=r+d-u,T&&p)o[e]=r;else if(!T&&h)o[e]=m;else if(h)o[e]=Math.min(c-i,0>m-l?m:m-l);else{if(!p)return!1;o[e]=Math.max(s,r+l+n>t?r:r+l)}},C=function(e,t,n,i,r){var s;return r<a||r>t-a?s=!1:o[e]=r<n/2?1:r>t-i/2?t-i-2:r-n/2,s},I=function(e){var t=y;y=b,b=t,i=e},_=function(){!1!==S.apply(0,y)?!1!==C.apply(0,b)||i||(I(!0),_()):i?o.x=o.y=0:(I(!0),_())};return(r.inverted||1<this.len)&&I(),_(),o},defaultFormatter:function(e){var t=this.points||a(this),n=[e.tooltipFooterHeaderFormatter(t[0])];return(n=n.concat(e.bodyFormatter(t))).push(e.tooltipFooterHeaderFormatter(t[0],!0)),n},refresh:function(t,n){var i=this.chart,r=this.options,s=t,o={},l=[],c=r.formatter||this.defaultFormatter;o=this.shared;var u=i.styledMode;if(r.enabled){e.clearTimeout(this.hideTimer),this.followPointer=a(s)[0].series.tooltipOptions.followPointer;var h=this.getAnchor(s,n);n=h[0];var p=h[1];!o||s.series&&s.series.noSharedTooltip?o=s.getLabelConfig():(i.pointer.applyInactiveState(s),s.forEach(function(e){e.setState("hover"),l.push(e.getLabelConfig())}),(o={x:s[0].category,y:s[0].y}).points=l,s=s[0]),this.len=l.length,c=c.call(o,this),o=s.series,this.distance=d(o.tooltipOptions.distance,16),!1===c?this.hide():(i=this.getLabel(),this.isHidden&&i.attr({opacity:1}).show(),this.split?this.renderSplit(c,a(t)):(r.style.width&&!u||i.css({width:this.chart.spacingBox.width}),i.attr({text:c&&c.join?c.join(""):c}),i.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+d(s.colorIndex,o.colorIndex)),u||i.attr({stroke:r.borderColor||s.color||o.color||"#666666"}),this.updatePosition({plotX:n,plotY:p,negative:s.negative,ttBelow:s.ttBelow,h:h[2]||0})),this.isHidden=!1),e.fireEvent(this,"refresh")}},renderSplit:function(t,n){var i,a=this,s=[],o=this.chart,l=o.renderer,c=!0,u=this.options,h=0,p=this.getLabel(),m=o.plotTop;r(t)&&(t=[!1,t]),t.slice(0,n.length+1).forEach(function(e,t){if(!1!==e&&""!==e){var r=(t=n[t-1]||{isHeader:!0,plotX:n[0].plotX,plotY:o.plotHeight}).series||a,g=r.tt,f=t.series||{},v="highcharts-color-"+d(t.colorIndex,f.colorIndex,"none");g||(g={padding:u.padding,r:u.borderRadius},o.styledMode||(g.fill=u.backgroundColor,g["stroke-width"]=u.borderWidth),r.tt=g=l.label(null,null,null,(t.isHeader?u.headerShape:u.shape)||"callout",null,null,u.useHTML).addClass("highcharts-tooltip-box "+v).attr(g).add(p)),g.isActive=!0,g.attr({text:e}),o.styledMode||g.css(u.style).shadow(u.shadow).attr({stroke:u.borderColor||t.color||f.color||"#333333"}),v=(e=g.getBBox()).width+g.strokeWidth(),t.isHeader?(h=e.height,o.xAxis[0].opposite&&(i=!0,m-=h),e=Math.max(0,Math.min(t.plotX+o.plotLeft-v/2,o.chartWidth+(o.scrollablePixelsX?o.scrollablePixelsX-o.marginRight:0)-v))):e=t.plotX+o.plotLeft-d(u.distance,16)-v,0>e&&(c=!1),t.isHeader?f=i?-h:o.plotHeight+h:f=(f=f.yAxis).pos-m+Math.max(0,Math.min(t.plotY||0,f.len)),s.push({target:f,rank:t.isHeader?1:0,size:r.tt.getBBox().height+1,point:t,x:e,tt:g})}}),this.cleanSplit(),u.positioner&&s.forEach(function(e){var t=u.positioner.call(a,e.tt.getBBox().width,e.size,e.point);e.x=t.x,e.align=0,e.target=t.y,e.rank=d(t.rank,e.rank)}),e.distribute(s,o.plotHeight+h),s.forEach(function(e){var t=e.point,n=t.series,i=n&&n.yAxis;e.tt.attr({visibility:void 0===e.pos?"hidden":"inherit",x:c||t.isHeader||u.positioner?e.x:t.plotX+o.plotLeft+a.distance,y:e.pos+m,anchorX:t.isHeader?t.plotX+o.plotLeft:t.plotX+n.xAxis.pos,anchorY:t.isHeader?o.plotTop+o.plotHeight/2:i.pos+Math.max(0,Math.min(t.plotY,i.len))})})},updatePosition:function(t){var n=this.chart,i=n.pointer,r=this.getLabel(),a=t.plotX+n.plotLeft,s=t.plotY+n.plotTop;if(i.chartPosition||(i.chartPosition=e.offset(n.container)),t=(this.options.positioner||this.getPosition).call(this,r.width,r.height,t),this.outside){var o=(this.options.borderWidth||0)+2*this.distance;this.renderer.setSize(r.width+o,r.height+o,!1),(n=n.containerScaling)&&(e.css(this.container,{transform:"scale("+n.scaleX+", "+n.scaleY+")"}),a*=n.scaleX,s*=n.scaleY),a+=i.chartPosition.left-t.x,s+=i.chartPosition.top-t.y}this.move(Math.round(t.x),Math.round(t.y||0),a,s)},getDateFormat:function(e,t,n,i){var r=this.chart.time,a=r.dateFormat("%m-%d %H:%M:%S.%L",t),s={millisecond:15,second:12,minute:9,hour:6,day:3},o="millisecond";for(l in h){if(e===h.week&&+r.dateFormat("%w",t)===n&&"00:00:00.000"===a.substr(6)){var l="week";break}if(h[l]>e){l=o;break}if(s[l]&&a.substr(s[l])!=="01-01 00:00:00.000".substr(s[l]))break;"week"!==l&&(o=l)}if(l)var c=r.resolveDTLFormat(i[l]).main;return c},getXDateFormat:function(e,t,n){t=t.dateTimeLabelFormats;var i=n&&n.closestPointRange;return(i?this.getDateFormat(i,e.x,n.options.startOfWeek,t):t.day)||t.year},tooltipFooterHeaderFormatter:function(t,n){var r=n?"footer":"header",a=t.series,s=a.tooltipOptions,o=s.xDateFormat,c=a.xAxis,d=c&&"datetime"===c.options.type&&i(t.key),u=s[r+"Format"];return n={isFooter:n,labelConfig:t},e.fireEvent(this,"headerFormatter",n,function(e){d&&!o&&(o=this.getXDateFormat(t,s,c)),d&&o&&(t.point&&t.point.tooltipDateKeys||["key"]).forEach(function(e){u=u.replace("{point."+e+"}","{point."+e+":"+o+"}")}),a.chart.styledMode&&(u=this.styledModeFormat(u)),e.text=l(u,{point:t,series:a},this.chart.time)}),n.text},bodyFormatter:function(e){return e.map(function(e){var t=e.series.tooltipOptions;return(t[(e.point.formatPrefix||"point")+"Formatter"]||e.point.tooltipFormatter).call(e.point,t[(e.point.formatPrefix||"point")+"Format"]||"")})},styledModeFormat:function(e){return e.replace('style="font-size: 10px"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex}"')}}}),t(n,"parts/Pointer.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.attr,i=t.defined,r=t.isNumber,a=t.isObject,s=t.objectEach,o=t.splat,l=e.addEvent,c=e.charts,d=e.color,u=e.css,h=e.extend,p=e.find,m=e.fireEvent,g=e.offset,f=e.pick,v=e.Tooltip;e.Pointer=function(e,t){this.init(e,t)},e.Pointer.prototype={init:function(e,t){this.options=t,this.chart=e,this.runChartClick=t.chart.events&&!!t.chart.events.click,this.pinchDown=[],this.lastValidTouch={},v&&(e.tooltip=new v(e,t.tooltip),this.followTouchMove=f(t.tooltip.followTouchMove,!0)),this.setDOMEvents()},zoomOption:function(e){var t=this.chart,n=t.options.chart,i=n.zoomType||"";t=t.inverted,/touch/.test(e.type)&&(i=f(n.pinchType,i)),this.zoomX=e=/x/.test(i),this.zoomY=i=/y/.test(i),this.zoomHor=e&&!t||i&&t,this.zoomVert=i&&!t||e&&t,this.hasZoom=e||i},normalize:function(e,t){var n=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e;t||(this.chartPosition=t=g(this.chart.container));var i=n.pageX-t.left;return t=n.pageY-t.top,(n=this.chart.containerScaling)&&(i/=n.scaleX,t/=n.scaleY),h(e,{chartX:Math.round(i),chartY:Math.round(t)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return this.chart.axes.forEach(function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},findNearestKDPoint:function(e,t,n){var i;return e.forEach(function(e){var r=!(e.noSharedTooltip&&t)&&0>e.options.findNearestPointBy.indexOf("y");if(e=e.searchPoint(n,r),(r=a(e,!0))&&!(r=!a(i,!0))){r=i.distX-e.distX;var s=i.dist-e.dist,o=(e.series.group&&e.series.group.zIndex)-(i.series.group&&i.series.group.zIndex);r=0<(0!==r&&t?r:0!==s?s:0!==o?o:i.series.index>e.series.index?-1:1)}r&&(i=e)}),i},getPointFromEvent:function(e){e=e.target;for(var t;e&&!t;)t=e.point,e=e.parentNode;return t},getChartCoordinatesFromPoint:function(e,t){var n=e.series,i=n.xAxis;n=n.yAxis;var r=f(e.clientX,e.plotX),a=e.shapeArgs;return i&&n?t?{chartX:i.len+i.pos-r,chartY:n.len+n.pos-e.plotY}:{chartX:r+i.pos,chartY:e.plotY+n.pos}:a&&a.x&&a.y?{chartX:a.x,chartY:a.y}:void 0},getHoverData:function(e,t,n,i,r,s){var o,l=[];i=!(!i||!e);var c=t&&!t.stickyTracking?[t]:n.filter(function(e){return e.visible&&!(!r&&e.directTouch)&&f(e.options.enableMouseTracking,!0)&&e.stickyTracking});return t=(o=i||!s?e:this.findNearestKDPoint(c,r,s))&&o.series,o&&(r&&!t.noSharedTooltip?(c=n.filter(function(e){return e.visible&&!(!r&&e.directTouch)&&f(e.options.enableMouseTracking,!0)&&!e.noSharedTooltip})).forEach(function(e){var t=p(e.points,function(e){return e.x===o.x&&!e.isNull});a(t)&&(e.chart.isBoosting&&(t=e.getPoint(t)),l.push(t))}):l.push(o)),{hoverPoint:o,hoverSeries:t,hoverPoints:l}},runPointActions:function(t,n){var i=this.chart,r=i.tooltip&&i.tooltip.options.enabled?i.tooltip:void 0,a=!!r&&r.shared,s=n||i.hoverPoint,o=s&&s.series||i.hoverSeries;s=(o=this.getHoverData(s,o,i.series,(!t||"touchmove"!==t.type)&&(!!n||o&&o.directTouch&&this.isDirectTouch),a,t)).hoverPoint;var d=o.hoverPoints;if(n=(o=o.hoverSeries)&&o.tooltipOptions.followPointer,a=a&&o&&!o.noSharedTooltip,s&&(s!==i.hoverPoint||r&&r.isHidden)){if((i.hoverPoints||[]).forEach(function(e){-1===d.indexOf(e)&&e.setState()}),i.hoverSeries!==o&&o.onMouseOver(),this.applyInactiveState(d),(d||[]).forEach(function(e){e.setState("hover")}),i.hoverPoint&&i.hoverPoint.firePointEvent("mouseOut"),!s.series)return;s.firePointEvent("mouseOver"),i.hoverPoints=d,i.hoverPoint=s,r&&r.refresh(a?d:s,t)}else n&&r&&!r.isHidden&&(s=r.getAnchor([{}],t),r.updatePosition({plotX:s[0],plotY:s[1]}));this.unDocMouseMove||(this.unDocMouseMove=l(i.container.ownerDocument,"mousemove",function(t){var n=c[e.hoverChartIndex];n&&n.pointer.onDocumentMouseMove(t)})),i.axes.forEach(function(n){var i=f(n.crosshair.snap,!0),r=i?e.find(d,function(e){return e.series[n.coll]===n}):void 0;r||!i?n.drawCrosshair(t,r):n.hideCrosshair()})},applyInactiveState:function(e){var t,n=[];(e||[]).forEach(function(e){t=e.series,n.push(t),t.linkedParent&&n.push(t.linkedParent),t.linkedSeries&&(n=n.concat(t.linkedSeries)),t.navigatorSeries&&n.push(t.navigatorSeries)}),this.chart.series.forEach(function(e){-1===n.indexOf(e)?e.setState("inactive",!0):e.options.inactiveOtherPoints&&e.setAllPointsToState("inactive")})},reset:function(e,t){var n=this.chart,i=n.hoverSeries,r=n.hoverPoint,a=n.hoverPoints,s=n.tooltip,l=s&&s.shared?a:r;e&&l&&o(l).forEach(function(t){t.series.isCartesian&&void 0===t.plotX&&(e=!1)}),e?s&&l&&o(l).length&&(s.refresh(l),s.shared&&a?a.forEach(function(e){e.setState(e.state,!0),e.series.isCartesian&&(e.series.xAxis.crosshair&&e.series.xAxis.drawCrosshair(null,e),e.series.yAxis.crosshair&&e.series.yAxis.drawCrosshair(null,e))}):r&&(r.setState(r.state,!0),n.axes.forEach(function(e){e.crosshair&&e.drawCrosshair(null,r)}))):(r&&r.onMouseOut(),a&&a.forEach(function(e){e.setState()}),i&&i.onMouseOut(),s&&s.hide(t),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),n.axes.forEach(function(e){e.hideCrosshair()}),this.hoverX=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(e,t){var n,i=this.chart;i.series.forEach(function(r){n=e||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&r.group&&(r.group.attr(n),r.markerGroup&&(r.markerGroup.attr(n),r.markerGroup.clip(t?i.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(n))}),i.clipRect.attr(t||i.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t=this.chart,n=t.options.chart,i=e.chartX,r=e.chartY,a=this.zoomHor,s=this.zoomVert,o=t.plotLeft,l=t.plotTop,c=t.plotWidth,u=t.plotHeight,h=this.selectionMarker,p=this.mouseDownX,m=this.mouseDownY,g=n.panKey&&e[n.panKey+"Key"];if((!h||!h.touch)&&(i<o?i=o:i>o+c&&(i=o+c),r<l?r=l:r>l+u&&(r=l+u),this.hasDragged=Math.sqrt(Math.pow(p-i,2)+Math.pow(m-r,2)),10<this.hasDragged)){var f=t.isInsidePlot(p-o,m-l);t.hasCartesianSeries&&(this.zoomX||this.zoomY)&&f&&!g&&!h&&(this.selectionMarker=h=t.renderer.rect(o,l,a?1:c,s?1:u,0).attr({class:"highcharts-selection-marker",zIndex:7}).add(),t.styledMode||h.attr({fill:n.selectionMarkerFill||d("#335cad").setOpacity(.25).get()})),h&&a&&(i-=p,h.attr({width:Math.abs(i),x:(0<i?0:i)+p})),h&&s&&(i=r-m,h.attr({height:Math.abs(i),y:(0<i?0:i)+m})),f&&!h&&n.panning&&t.pan(e,n.panning)}},drop:function(e){var t=this,n=this.chart,a=this.hasPinched;if(this.selectionMarker){var s,o={originalEvent:e,xAxis:[],yAxis:[]},l=this.selectionMarker,c=l.attr?l.attr("x"):l.x,d=l.attr?l.attr("y"):l.y,p=l.attr?l.attr("width"):l.width,g=l.attr?l.attr("height"):l.height;(this.hasDragged||a)&&(n.axes.forEach(function(n){if(n.zoomEnabled&&i(n.min)&&(a||t[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])){var r=n.horiz,l="touchend"===e.type?n.minPixelPadding:0,u=n.toValue((r?c:d)+l);r=n.toValue((r?c+p:d+g)-l),o[n.coll].push({axis:n,min:Math.min(u,r),max:Math.max(u,r)}),s=!0}}),s&&m(n,"selection",o,function(e){n.zoom(h(e,a?{animation:!1}:null))})),r(n.index)&&(this.selectionMarker=this.selectionMarker.destroy()),a&&this.scaleGroups()}n&&r(n.index)&&(u(n.container,{cursor:n._cursor}),n.cancelClick=10<this.hasDragged,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){2!==(e=this.normalize(e)).button&&(this.zoomOption(e),e.preventDefault&&e.preventDefault(),this.dragStart(e))},onDocumentMouseUp:function(t){c[e.hoverChartIndex]&&c[e.hoverChartIndex].pointer.drop(t)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition;e=this.normalize(e,n),!n||this.inClass(e.target,"highcharts-tracker")||t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||this.reset()},onContainerMouseLeave:function(t){var n=c[e.hoverChartIndex];n&&(t.relatedTarget||t.toElement)&&(n.pointer.reset(),n.pointer.chartPosition=null)},onContainerMouseMove:function(t){var n=this.chart;i(e.hoverChartIndex)&&c[e.hoverChartIndex]&&c[e.hoverChartIndex].mouseIsDown||(e.hoverChartIndex=n.index),(t=this.normalize(t)).preventDefault||(t.returnValue=!1),"mousedown"===n.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop)||n.openMenu||this.runPointActions(t)},inClass:function(e,t){for(var i;e;){if(i=n(e,"class")){if(-1!==i.indexOf(t))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries;e=e.relatedTarget||e.toElement,this.isDirectTouch=!1,!t||!e||t.stickyTracking||this.inClass(e,"highcharts-tooltip")||this.inClass(e,"highcharts-series-"+t.index)&&this.inClass(e,"highcharts-tracker")||t.onMouseOut()},onContainerClick:function(e){var t=this.chart,n=t.hoverPoint,i=t.plotLeft,r=t.plotTop;e=this.normalize(e),t.cancelClick||(n&&this.inClass(e.target,"highcharts-tracker")?(m(n.series,"click",h(e,{point:n})),t.hoverPoint&&n.firePointEvent("click",e)):(h(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-i,e.chartY-r)&&m(t,"click",e)))},setDOMEvents:function(){var t=this,n=t.chart.container,i=n.ownerDocument;n.onmousedown=function(e){t.onContainerMouseDown(e)},n.onmousemove=function(e){t.onContainerMouseMove(e)},n.onclick=function(e){t.onContainerClick(e)},this.unbindContainerMouseLeave=l(n,"mouseleave",t.onContainerMouseLeave),e.unbindDocumentMouseUp||(e.unbindDocumentMouseUp=l(i,"mouseup",t.onDocumentMouseUp)),e.hasTouch&&(l(n,"touchstart",function(e){t.onContainerTouchStart(e)}),l(n,"touchmove",function(e){t.onContainerTouchMove(e)}),e.unbindDocumentTouchEnd||(e.unbindDocumentTouchEnd=l(i,"touchend",t.onDocumentTouchEnd)))},destroy:function(){var t=this;t.unDocMouseMove&&t.unDocMouseMove(),this.unbindContainerMouseLeave(),e.chartCount||(e.unbindDocumentMouseUp&&(e.unbindDocumentMouseUp=e.unbindDocumentMouseUp()),e.unbindDocumentTouchEnd&&(e.unbindDocumentTouchEnd=e.unbindDocumentTouchEnd())),clearInterval(t.tooltipTimeout),s(t,function(e,n){t[n]=null})}}}),t(n,"parts/TouchPointer.js",[n["parts/Globals.js"]],function(e){var t=e.charts,n=e.extend,i=e.noop,r=e.pick;n(e.Pointer.prototype,{pinchTranslate:function(e,t,n,i,r,a){this.zoomHor&&this.pinchTranslateDirection(!0,e,t,n,i,r,a),this.zoomVert&&this.pinchTranslateDirection(!1,e,t,n,i,r,a)},pinchTranslateDirection:function(e,t,n,i,r,a,s,o){var l,c,d=this.chart,u=e?"x":"y",h=e?"X":"Y",p="chart"+h,m=e?"width":"height",g=d["plot"+(e?"Left":"Top")],f=o||1,v=d.inverted,y=d.bounds[e?"h":"v"],b=1===t.length,T=t[0][p],S=n[0][p],C=!b&&t[1][p],I=!b&&n[1][p];if((n=function(){!b&&20<Math.abs(T-C)&&(f=o||Math.abs(S-I)/Math.abs(T-C)),c=(g-S)/f+T,l=d["plot"+(e?"Width":"Height")]/f})(),(t=c)<y.min){t=y.min;var _=!0}else t+l>y.max&&(t=y.max-l,_=!0);_?(S-=.8*(S-s[u][0]),b||(I-=.8*(I-s[u][1])),n()):s[u]=[S,I],v||(a[u]=c-g,a[m]=l),a=v?1/f:f,r[m]=l,r[u]=t,i[v?e?"scaleY":"scaleX":"scale"+h]=f,i["translate"+h]=a*g+(S-a*T)},pinch:function(e){var t=this,a=t.chart,s=t.pinchDown,o=e.touches,l=o.length,c=t.lastValidTouch,d=t.hasZoom,u=t.selectionMarker,h={},p=1===l&&(t.inClass(e.target,"highcharts-tracker")&&a.runTrackerClick||t.runChartClick),m={};1<l&&(t.initiated=!0),d&&t.initiated&&!p&&e.preventDefault(),[].map.call(o,function(e){return t.normalize(e)}),"touchstart"===e.type?([].forEach.call(o,function(e,t){s[t]={chartX:e.chartX,chartY:e.chartY}}),c.x=[s[0].chartX,s[1]&&s[1].chartX],c.y=[s[0].chartY,s[1]&&s[1].chartY],a.axes.forEach(function(e){if(e.zoomEnabled){var t=a.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,i=e.toPixels(Math.min(r(e.options.min,e.dataMin),e.dataMin)),s=e.toPixels(Math.max(r(e.options.max,e.dataMax),e.dataMax)),o=Math.max(i,s);t.min=Math.min(e.pos,Math.min(i,s)-n),t.max=Math.max(e.pos+e.len,o+n)}}),t.res=!0):t.followTouchMove&&1===l?this.runPointActions(t.normalize(e)):s.length&&(u||(t.selectionMarker=u=n({destroy:i,touch:!0},a.plotBox)),t.pinchTranslate(s,o,h,u,m,c),t.hasPinched=d,t.scaleGroups(h,m),t.res&&(t.res=!1,this.reset(!1,0)))},touch:function(t,n){var i=this.chart;if(i.index!==e.hoverChartIndex&&this.onContainerMouseLeave({relatedTarget:!0}),e.hoverChartIndex=i.index,1===t.touches.length)if(t=this.normalize(t),i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&!i.openMenu){if(n&&this.runPointActions(t),"touchmove"===t.type)var a=!!(n=this.pinchDown)[0]&&4<=Math.sqrt(Math.pow(n[0].chartX-t.chartX,2)+Math.pow(n[0].chartY-t.chartY,2));r(a,!0)&&this.pinch(t)}else n&&this.reset();else 2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(e){this.zoomOption(e),this.touch(e,!0)},onContainerTouchMove:function(e){this.touch(e)},onDocumentTouchEnd:function(n){t[e.hoverChartIndex]&&t[e.hoverChartIndex].pointer.drop(n)}})}),t(n,"parts/MSPointer.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.objectEach,i=e.addEvent,r=e.charts,a=e.css,s=e.doc;t=e.extend;var o=e.noop,l=e.Pointer,c=e.removeEvent,d=e.win,u=e.wrap;if(!e.hasTouch&&(d.PointerEvent||d.MSPointerEvent)){var h={},p=!!d.PointerEvent,m=function(){var e=[];return e.item=function(e){return this[e]},n(h,function(t){e.push({pageX:t.pageX,pageY:t.pageY,target:t.target})}),e},g=function(t,n,i,a){"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!r[e.hoverChartIndex]||(a(t),(a=r[e.hoverChartIndex].pointer)[n]({type:i,target:t.currentTarget,preventDefault:o,touches:m()}))};t(l.prototype,{onContainerPointerDown:function(e){g(e,"onContainerTouchStart","touchstart",function(e){h[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){g(e,"onContainerTouchMove","touchmove",function(e){h[e.pointerId]={pageX:e.pageX,pageY:e.pageY},h[e.pointerId].target||(h[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){g(e,"onDocumentTouchEnd","touchend",function(e){delete h[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,p?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,p?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(s,p?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),u(l.prototype,"init",function(e,t,n){e.call(this,t,n),this.hasZoom&&a(t.container,{"-ms-touch-action":"none","touch-action":"none"})}),u(l.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(i)}),u(l.prototype,"destroy",function(e){this.batchMSEvents(c),e.call(this)})}}),t(n,"parts/Legend.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isNumber,r=e.addEvent,a=e.css,s=e.discardElement,o=e.fireEvent;t=e.isFirefox;var l=e.marginNames,c=e.merge,d=e.pick,u=e.setAnimation,h=e.stableSort,p=e.win,m=e.wrap;e.Legend=function(e,t){this.init(e,t)},e.Legend.prototype={init:function(e,t){this.chart=e,this.setOptions(t),t.enabled&&(this.render(),r(this.chart,"endResize",function(){this.legend.positionCheckboxes()}),this.proximate?this.unchartrender=r(this.chart,"render",function(){this.legend.proximatePositions(),this.legend.positionItems()}):this.unchartrender&&this.unchartrender())},setOptions:function(e){var t=d(e.padding,8);this.options=e,this.chart.styledMode||(this.itemStyle=e.itemStyle,this.itemHiddenStyle=c(this.itemStyle,e.itemHiddenStyle)),this.itemMarginTop=e.itemMarginTop||0,this.padding=t,this.initialItemY=t-5,this.symbolWidth=d(e.symbolWidth,16),this.pages=[],this.proximate="proximate"===e.layout&&!this.chart.inverted},update:function(e,t){var n=this.chart;this.setOptions(c(!0,this.options,e)),this.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,d(t,!0)&&n.redraw(),o(this,"afterUpdate")},colorizeItem:function(e,t){if(e.legendGroup[t?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var n=this.options,i=e.legendItem,r=e.legendLine,a=e.legendSymbol,s=this.itemHiddenStyle.color;n=t?n.itemStyle.color:s;var l=t&&e.color||s,c=e.options&&e.options.marker,d={fill:l};i&&i.css({fill:n,color:n}),r&&r.attr({stroke:l}),a&&(c&&a.isMarker&&(d=e.pointAttribs(),t||(d.stroke=d.fill=s)),a.attr(d))}o(this,"afterColorizeItem",{item:e,visible:t})},positionItems:function(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()},positionItem:function(e){var t=this.options,i=t.symbolPadding;t=!t.rtl;var r=e._legendItemPos,a=r[0];r=r[1];var s=e.checkbox;(e=e.legendGroup)&&e.element&&e[n(e.translateY)?"animate":"attr"]({translateX:t?a:this.legendWidth-a-2*i-4,translateY:r}),s&&(s.x=a,s.y=r)},destroyItem:function(e){var t=e.checkbox;["legendItem","legendLine","legendSymbol","legendGroup"].forEach(function(t){e[t]&&(e[t]=e[t].destroy())}),t&&s(e.checkbox)},destroy:function(){function e(e){this[e]&&(this[e]=this[e].destroy())}this.getAllItems().forEach(function(t){["legendItem","legendGroup"].forEach(e,t)}),"clipRect up down pager nav box title group".split(" ").forEach(e,this),this.display=null},positionCheckboxes:function(){var e=this.group&&this.group.alignAttr,t=this.clipHeight||this.legendHeight,n=this.titleHeight;if(e){var i=e.translateY;this.allItems.forEach(function(r){var s=r.checkbox;if(s){var o=i+n+s.y+(this.scrollOffset||0)+3;a(s,{left:e.translateX+r.checkboxOffset+s.x-20+"px",top:o+"px",display:this.proximate||o>i-6&&o<i+t-6?"":"none"})}},this)}},renderTitle:function(){var e=this.options,t=this.padding,n=e.title,i=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,t-3,t-4,null,null,null,e.useHTML,null,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(n.style),this.title.add(this.group)),n.width||this.title.css({width:this.maxLegendWidth+"px"}),i=(e=this.title.getBBox()).height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},setText:function(t){var n=this.options;t.legendItem.attr({text:n.labelFormat?e.format(n.labelFormat,t,this.chart.time):n.labelFormatter.call(t)})},renderItem:function(e){var t=this.chart,n=t.renderer,i=this.options,r=this.symbolWidth,a=i.symbolPadding,s=this.itemStyle,o=this.itemHiddenStyle,l="horizontal"===i.layout?d(i.itemDistance,20):0,u=!i.rtl,h=e.legendItem,p=!e.series,m=!p&&e.series.drawLegendSymbol?e.series:e,g=m.options;l=r+a+l+((g=this.createCheckboxForItem&&g&&g.showCheckbox)?20:0);var f=i.useHTML,v=e.options.className;h||(e.legendGroup=n.g("legend-item").addClass("highcharts-"+m.type+"-series highcharts-color-"+e.colorIndex+(v?" "+v:"")+(p?" highcharts-series-"+e.index:"")).attr({zIndex:1}).add(this.scrollGroup),e.legendItem=h=n.text("",u?r+a:-a,this.baseline||0,f),t.styledMode||h.css(c(e.visible?s:o)),h.attr({align:u?"left":"right",zIndex:2}).add(e.legendGroup),this.baseline||(this.fontMetrics=n.fontMetrics(t.styledMode?12:s.fontSize,h),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,h.attr("y",this.baseline)),this.symbolHeight=i.symbolHeight||this.fontMetrics.f,m.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,h,f)),g&&!e.checkbox&&this.createCheckboxForItem(e),this.colorizeItem(e,e.visible),!t.styledMode&&s.width||h.css({width:(i.itemWidth||this.widthOption||t.spacingBox.width)-l}),this.setText(e),t=h.getBBox(),e.itemWidth=e.checkboxOffset=i.itemWidth||e.legendItemWidth||t.width+l,this.maxItemWidth=Math.max(this.maxItemWidth,e.itemWidth),this.totalItemWidth+=e.itemWidth,this.itemHeight=e.itemHeight=Math.round(e.legendItemHeight||t.height||this.symbolHeight)},layoutItem:function(e){var t=this.options,n=this.padding,i="horizontal"===t.layout,r=e.itemHeight,a=t.itemMarginBottom||0,s=this.itemMarginTop,o=i?d(t.itemDistance,20):0,l=this.maxLegendWidth;t=t.alignColumns&&this.totalItemWidth>l?this.maxItemWidth:e.itemWidth,i&&this.itemX-n+t>l&&(this.itemX=n,this.lastLineHeight&&(this.itemY+=s+this.lastLineHeight+a),this.lastLineHeight=0),this.lastItemY=s+this.itemY+a,this.lastLineHeight=Math.max(r,this.lastLineHeight),e._legendItemPos=[this.itemX,this.itemY],i?this.itemX+=t:(this.itemY+=s+r+a,this.lastLineHeight=r),this.offsetWidth=this.widthOption||Math.max((i?this.itemX-n-(e.checkbox?0:o):t)+n,this.offsetWidth)},getAllItems:function(){var e=[];return this.chart.series.forEach(function(t){var i=t&&t.options;t&&d(i.showInLegend,!n(i.linkedTo)&&void 0,!0)&&(e=e.concat(t.legendItems||("point"===i.legendType?t.data:t)))}),o(this,"afterGetAllItems",{allItems:e}),e},getAlignment:function(){var e=this.options;return this.proximate?e.align.charAt(0)+"tv":e.floating?"":e.align.charAt(0)+e.verticalAlign.charAt(0)+e.layout.charAt(0)},adjustMargins:function(e,t){var i=this.chart,r=this.options,a=this.getAlignment();a&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(s,o){s.test(a)&&!n(e[o])&&(i[l[o]]=Math.max(i[l[o]],i.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*r[o%2?"x":"y"]+d(r.margin,12)+t[o]+(i.titleOffset[o]||0)))})},proximatePositions:function(){var t=this.chart,n=[],r="left"===this.options.align;this.allItems.forEach(function(a){var s=r;if(a.yAxis&&a.points){a.xAxis.options.reversed&&(s=!s);var o=e.find(s?a.points:a.points.slice(0).reverse(),function(e){return i(e.plotY)});s=a.legendGroup.getBBox().height;var l=a.yAxis.top-t.plotTop;a.visible?(o=o?o.plotY:a.yAxis.height,o+=l-.3*s):o=l+a.yAxis.height,n.push({target:o,size:s,item:a})}},this),e.distribute(n,t.plotHeight),n.forEach(function(e){e.item._legendItemPos[1]=t.plotTop-t.spacing[0]+e.pos})},render:function(){var t,n=this.chart,i=n.renderer,r=this.group,a=this.box,s=this.options,l=this.padding;this.itemX=l,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=e.relativeLength(s.width,n.spacingBox.width-l);var d=n.spacingBox.width-2*l-s.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(d/=2),this.maxLegendWidth=this.widthOption||d,r||(this.group=r=i.g("legend").attr({zIndex:7}).add(),this.contentGroup=i.g().attr({zIndex:1}).add(r),this.scrollGroup=i.g().add(this.contentGroup)),this.renderTitle(),d=this.getAllItems(),h(d,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),s.reversed&&d.reverse(),this.allItems=d,this.display=t=!!d.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,d.forEach(this.renderItem,this),d.forEach(this.layoutItem,this),d=(this.widthOption||this.offsetWidth)+l;var u=this.lastItemY+this.lastLineHeight+this.titleHeight;u=this.handleOverflow(u),u+=l,a||(this.box=a=i.rect().addClass("highcharts-legend-box").attr({r:s.borderRadius}).add(r),a.isNew=!0),n.styledMode||a.attr({stroke:s.borderColor,"stroke-width":s.borderWidth||0,fill:s.backgroundColor||"none"}).shadow(s.shadow),0<d&&0<u&&(a[a.isNew?"attr":"animate"](a.crisp.call({},{x:0,y:0,width:d,height:u},a.strokeWidth())),a.isNew=!1),a[t?"show":"hide"](),n.styledMode&&"none"===r.getStyle("display")&&(d=u=0),this.legendWidth=d,this.legendHeight=u,t&&(a=(i=n.spacingBox).y,/(lth|ct|rth)/.test(this.getAlignment())&&0<n.titleOffset[0]?a+=n.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<n.titleOffset[2]&&(a-=n.titleOffset[2]),a!==i.y&&(i=c(i,{y:a})),r.align(c(s,{width:d,height:u,verticalAlign:this.proximate?"top":s.verticalAlign}),!0,i)),this.proximate||this.positionItems(),o(this,"afterRender")},handleOverflow:function(e){var t=this,n=this.chart,i=n.renderer,r=this.options,a=r.y,s=this.padding;a=n.spacingBox.height+("top"===r.verticalAlign?-a:a)-s;var o,l,c=r.maxHeight,u=this.clipRect,h=r.navigation,p=d(h.animation,!0),m=h.arrowSize||12,g=this.nav,f=this.pages,v=this.allItems,y=function(e){"number"==typeof e?u.attr({height:e}):u&&(t.clipRect=u.destroy(),t.contentGroup.clip()),t.contentGroup.div&&(t.contentGroup.div.style.clip=e?"rect("+s+"px,9999px,"+(s+e)+"px,0)":"auto")},b=function(e){return t[e]=i.circle(0,0,1.3*m).translate(m/2,m/2).add(g),n.styledMode||t[e].attr("fill","rgba(0,0,0,0.0001)"),t[e]};return"horizontal"!==r.layout||"middle"===r.verticalAlign||r.floating||(a/=2),c&&(a=Math.min(a,c)),f.length=0,e>a&&!1!==h.enabled?(this.clipHeight=o=Math.max(a-20-this.titleHeight-s,0),this.currentPage=d(this.currentPage,1),this.fullHeight=e,v.forEach(function(e,t){var n=e._legendItemPos[1],i=Math.round(e.legendItem.getBBox().height),r=f.length;(!r||n-f[r-1]>o&&(l||n)!==f[r-1])&&(f.push(l||n),r++),e.pageIx=r-1,l&&(v[t-1].pageIx=r-1),t===v.length-1&&n+i-f[r-1]>o&&n!==l&&(f.push(n),e.pageIx=r),n!==l&&(l=n)}),u||(u=t.clipRect=i.clipRect(0,s,9999,0),t.contentGroup.clip(u)),y(o),g||(this.nav=g=i.g().attr({zIndex:1}).add(this.group),this.up=i.symbol("triangle",0,0,m,m).add(g),b("upTracker").on("click",function(){t.scroll(-1,p)}),this.pager=i.text("",15,10).addClass("highcharts-legend-navigation"),n.styledMode||this.pager.css(h.style),this.pager.add(g),this.down=i.symbol("triangle-down",0,0,m,m).add(g),b("downTracker").on("click",function(){t.scroll(1,p)})),t.scroll(0),e=a):g&&(y(),this.nav=g.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var n=this.pages,i=n.length,r=this.currentPage+e;e=this.clipHeight;var a=this.options.navigation,s=this.pager,o=this.padding;r>i&&(r=i),0<r&&(void 0!==t&&u(t,this.chart),this.nav.attr({translateX:o,translateY:e+this.padding+7+this.titleHeight,visibility:"visible"}),[this.up,this.upTracker].forEach(function(e){e.attr({class:1===r?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),s.attr({text:r+"/"+i}),[this.down,this.downTracker].forEach(function(e){e.attr({x:18+this.pager.getBBox().width,class:r===i?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),this.chart.styledMode||(this.up.attr({fill:1===r?a.inactiveColor:a.activeColor}),this.upTracker.css({cursor:1===r?"default":"pointer"}),this.down.attr({fill:r===i?a.inactiveColor:a.activeColor}),this.downTracker.css({cursor:r===i?"default":"pointer"})),this.scrollOffset=-n[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=r,this.positionCheckboxes())}},e.LegendSymbolMixin={drawRectangle:function(e,t){var n=e.symbolHeight,i=e.options.squareSymbol;t.legendSymbol=this.chart.renderer.rect(i?(e.symbolWidth-n)/2:0,e.baseline-n+1,i?n:e.symbolWidth,n,d(e.options.symbolRadius,n/2)).addClass("highcharts-point").attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t=this.options,n=t.marker,i=e.symbolWidth,r=e.symbolHeight,a=r/2,s=this.chart.renderer,o=this.legendGroup;e=e.baseline-Math.round(.3*e.fontMetrics.b);var l={};this.chart.styledMode||(l={"stroke-width":t.lineWidth||0},t.dashStyle&&(l.dashstyle=t.dashStyle)),this.legendLine=s.path(["M",0,e,"L",i,e]).addClass("highcharts-graph").attr(l).add(o),n&&!1!==n.enabled&&i&&(t=Math.min(d(n.radius,a),a),0===this.symbol.indexOf("url")&&(n=c(n,{width:r,height:r}),t=0),this.legendSymbol=n=s.symbol(this.symbol,i/2-t,e-t,2*t,2*t,n).addClass("highcharts-point").add(o),n.isMarker=!0)}},(/Trident\/7\.0/.test(p.navigator&&p.navigator.userAgent)||t)&&m(e.Legend.prototype,"positionItem",function(e,t){var n=this,i=function(){t._legendItemPos&&e.call(n,t)};i(),n.bubbleLegend||setTimeout(i)})}),t(n,"parts/Chart.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.attr,i=t.defined,r=t.erase,a=t.isArray,s=t.isNumber,o=t.isObject,l=t.isString,c=t.objectEach,d=t.pInt,u=t.splat,h=e.addEvent,p=e.animate,m=e.animObject,g=e.doc,f=e.Axis,v=e.createElement,y=e.defaultOptions,b=e.discardElement,T=e.charts,S=e.css,C=e.extend,I=e.find,_=e.fireEvent,M=e.Legend,E=e.marginNames,w=e.merge,A=e.Pointer,D=e.pick,O=e.removeEvent,k=e.seriesTypes,R=e.syncTimeout,N=e.win,L=e.Chart=function(){this.getArgs.apply(this,arguments)};e.chart=function(e,t,n){return new L(e,t,n)},C(L.prototype,{callbacks:[],getArgs:function(){var e=[].slice.call(arguments);(l(e[0])||e[0].nodeName)&&(this.renderTo=e.shift()),this.init(e[0],e[1])},init:function(t,n){var i,r=t.series,a=t.plotOptions||{};_(this,"init",{args:arguments},function(){t.series=null,i=w(y,t),c(i.plotOptions,function(e,t){o(e)&&(e.tooltip=a[t]&&w(a[t].tooltip)||void 0)}),i.tooltip.userOptions=t.chart&&t.chart.forExport&&t.tooltip.userOptions||t.tooltip,i.series=t.series=r,this.userOptions=t;var s=i.chart,l=s.events;this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=n,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.time=t.time&&Object.keys(t.time).length?new e.Time(t.time):e.time,this.styledMode=s.styledMode,this.hasCartesianSeries=s.showAxes;var d=this;d.index=T.length,T.push(d),e.chartCount++,l&&c(l,function(t,n){e.isFunction(t)&&h(d,n,t)}),d.xAxis=[],d.yAxis=[],d.pointCount=d.colorCounter=d.symbolCounter=0,_(d,"afterInit"),d.firstRender()})},initSeries:function(t){var n=this.options.chart;return(n=k[t.type||n.type||n.defaultSeriesType])||e.error(17,!0,this),(n=new n).init(this,t),n},orderSeries:function(e){var t=this.series;for(e=e||0;e<t.length;e++)t[e]&&(t[e].index=e,t[e].name=t[e].getName())},isInsidePlot:function(e,t,n){var i=n?t:e;return e=n?e:t,0<=i&&i<=this.plotWidth&&0<=e&&e<=this.plotHeight},redraw:function(t){_(this,"beforeRedraw");var n=this.axes,i=this.series,r=this.pointer,a=this.legend,s=this.userOptions.legend,o=this.isDirtyLegend,l=this.hasCartesianSeries,c=this.isDirtyBox,d=this.renderer,u=d.isHidden(),h=[];for(this.setResponsive&&this.setResponsive(!1),e.setAnimation(t,this),u&&this.temporaryDisplay(),this.layOutTitles(),t=i.length;t--;){var p=i[t];if(p.options.stacking){var m=!0;if(p.isDirty){var g=!0;break}}}if(g)for(t=i.length;t--;)(p=i[t]).options.stacking&&(p.isDirty=!0);i.forEach(function(e){e.isDirty&&("point"===e.options.legendType?(e.updateTotals&&e.updateTotals(),o=!0):s&&(s.labelFormatter||s.labelFormat)&&(o=!0)),e.isDirtyData&&_(e,"updatedData")}),o&&a&&a.options.enabled&&(a.render(),this.isDirtyLegend=!1),m&&this.getStacks(),l&&n.forEach(function(e){e.updateNames(),e.setScale()}),this.getMargins(),l&&(n.forEach(function(e){e.isDirty&&(c=!0)}),n.forEach(function(e){var t=e.min+","+e.max;e.extKey!==t&&(e.extKey=t,h.push(function(){_(e,"afterSetExtremes",C(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(c||m)&&e.redraw()})),c&&this.drawChartBox(),_(this,"predraw"),i.forEach(function(e){(c||e.isDirty)&&e.visible&&e.redraw(),e.isDirtyData=!1}),r&&r.reset(!0),d.draw(),_(this,"redraw"),_(this,"render"),u&&this.temporaryDisplay(!0),h.forEach(function(e){e.call()})},get:function(e){function t(t){return t.id===e||t.options&&t.options.id===e}var n,i=this.series,r=I(this.axes,t)||I(this.series,t);for(n=0;!r&&n<i.length;n++)r=I(i[n].points||[],t);return r},getAxes:function(){var e=this,t=this.options,n=t.xAxis=u(t.xAxis||{});t=t.yAxis=u(t.yAxis||{}),_(this,"getAxes"),n.forEach(function(e,t){e.index=t,e.isX=!0}),t.forEach(function(e,t){e.index=t}),n.concat(t).forEach(function(t){new f(e,t)}),_(this,"afterGetAxes")},getSelectedPoints:function(){var e=[];return this.series.forEach(function(t){e=e.concat((t[t.hasGroupedData?"points":"data"]||[]).filter(function(e){return D(e.selectedStaging,e.selected)}))}),e},getSelectedSeries:function(){return this.series.filter(function(e){return e.selected})},setTitle:function(e,t,n){this.applyDescription("title",e),this.applyDescription("subtitle",t),this.applyDescription("caption",void 0),this.layOutTitles(n)},applyDescription:function(e,t){var n=this,i="title"===e?{color:"#333333",fontSize:this.options.isStock?"16px":"18px"}:{color:"#666666"};i=this.options[e]=w(!this.styledMode&&{style:i},this.options[e],t);var r=this[e];r&&t&&(this[e]=r=r.destroy()),i&&!r&&((r=this.renderer.text(i.text,0,0,i.useHTML).attr({align:i.align,class:"highcharts-"+e,zIndex:i.zIndex||4}).add()).update=function(t){n[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[e]](t)},this.styledMode||r.css(i.style),this[e]=r)},layOutTitles:function(e){var t=[0,0,0],n=this.renderer,i=this.spacingBox;["title","subtitle","caption"].forEach(function(e){var r=this[e],a=this.options[e],s=a.verticalAlign||"top";if(e="title"===e?-3:"top"===s?t[0]+2:0,r){if(!this.styledMode)var o=a.style.fontSize;o=n.fontMetrics(o,r).b,r.css({width:(a.width||i.width+(a.widthAdjust||0))+"px"});var l=r.getBBox(a.useHTML).height;r.align(C({y:"bottom"===s?o:e+o,height:l},a),!1,"spacingBox"),a.floating||("top"===s?t[0]=Math.ceil(t[0]+l):"bottom"===s&&(t[2]=Math.ceil(t[2]+l)))}},this),t[0]&&"top"===(this.options.title.verticalAlign||"top")&&(t[0]+=this.options.title.margin),t[2]&&"bottom"===this.options.caption.verticalAlign&&(t[2]+=this.options.caption.margin);var r=!this.titleOffset||this.titleOffset.join(",")!==t.join(",");this.titleOffset=t,!this.isDirtyBox&&r&&(this.isDirtyBox=this.isDirtyLegend=r,this.hasRendered&&D(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,n=t.width;t=t.height;var r=this.renderTo;i(n)||(this.containerWidth=e.getStyle(r,"width")),i(t)||(this.containerHeight=e.getStyle(r,"height")),this.chartWidth=Math.max(0,n||this.containerWidth||600),this.chartHeight=Math.max(0,e.relativeLength(t,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},temporaryDisplay:function(t){var n=this.renderTo;if(t)for(;n&&n.style;)n.hcOrigStyle&&(e.css(n,n.hcOrigStyle),delete n.hcOrigStyle),n.hcOrigDetached&&(g.body.removeChild(n),n.hcOrigDetached=!1),n=n.parentNode;else for(;n&&n.style&&(g.body.contains(n)||n.parentNode||(n.hcOrigDetached=!0,g.body.appendChild(n)),("none"===e.getStyle(n,"display",!1)||n.hcOricDetached)&&(n.hcOrigStyle={display:n.style.display,height:n.style.height,overflow:n.style.overflow},t={display:"block",overflow:"hidden"},n!==this.renderTo&&(t.height=0),e.css(n,t),n.offsetWidth||n.style.setProperty("display","block","important")),(n=n.parentNode)!==g.body););},setClassName:function(e){this.container.className="highcharts-container "+(e||"")},getContainer:function(){var t,i,r=this.options,a=r.chart,o=this.renderTo,c=e.uniqueKey();o||(this.renderTo=o=a.renderTo),l(o)&&(this.renderTo=o=g.getElementById(o)),o||e.error(13,!0,this);var u=d(n(o,"data-highcharts-chart"));s(u)&&T[u]&&T[u].hasRendered&&T[u].destroy(),n(o,"data-highcharts-chart",this.index),o.innerHTML="",a.skipClone||o.offsetWidth||this.temporaryDisplay(),this.getChartSize(),u=this.chartWidth;var h=this.chartHeight;if(S(o,{overflow:"hidden"}),this.styledMode||(t=C({position:"relative",overflow:"hidden",width:u+"px",height:h+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},a.style)),this.container=o=v("div",{id:c},t,o),this._cursor=o.style.cursor,this.renderer=new(e[a.renderer]||e.Renderer)(o,u,h,null,a.forExport,r.exporting&&r.exporting.allowHTML,this.styledMode),this.setClassName(a.className),this.styledMode)for(i in r.defs)this.renderer.definition(r.defs[i]);else this.renderer.setStyle(a.style);this.renderer.chartIndex=this.index,_(this,"afterGetContainer")},getMargins:function(e){var t=this.spacing,n=this.margin,r=this.titleOffset;this.resetMargins(),r[0]&&!i(n[0])&&(this.plotTop=Math.max(this.plotTop,r[0]+t[0])),r[2]&&!i(n[2])&&(this.marginBottom=Math.max(this.marginBottom,r[2]+t[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(n,t),_(this,"getMargins"),e||this.getAxisMargins()},getAxisMargins:function(){var e=this,t=e.axisOffset=[0,0,0,0],n=e.colorAxis,r=e.margin,a=function(e){e.forEach(function(e){e.visible&&e.getOffset()})};e.hasCartesianSeries?a(e.axes):n&&n.length&&a(n),E.forEach(function(n,a){i(r[a])||(e[n]+=t[a])}),e.setChartSize()},reflow:function(t){var n=this,r=n.options.chart,a=n.renderTo,s=i(r.width)&&i(r.height),o=r.width||e.getStyle(a,"width");r=r.height||e.getStyle(a,"height"),a=t?t.target:N,s||n.isPrinting||!o||!r||a!==N&&a!==g||(o===n.containerWidth&&r===n.containerHeight||(e.clearTimeout(n.reflowTimeout),n.reflowTimeout=R(function(){n.container&&n.setSize(void 0,void 0,!1)},t?100:0)),n.containerWidth=o,n.containerHeight=r)},setReflow:function(e){var t=this;!1===e||this.unbindReflow?!1===e&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=h(N,"resize",function(e){t.options&&t.reflow(e)}),h(this,"destroy",this.unbindReflow))},setSize:function(t,n,i){var r=this,a=r.renderer;if(r.isResizing+=1,e.setAnimation(i,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,void 0!==t&&(r.options.chart.width=t),void 0!==n&&(r.options.chart.height=n),r.getChartSize(),!r.styledMode){var s=a.globalAnimation;(s?p:S)(r.container,{width:r.chartWidth+"px",height:r.chartHeight+"px"},s)}r.setChartSize(!0),a.setSize(r.chartWidth,r.chartHeight,i),r.axes.forEach(function(e){e.isDirty=!0,e.setScale()}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.layOutTitles(),r.getMargins(),r.redraw(i),r.oldChartHeight=null,_(r,"resize"),R(function(){r&&_(r,"endResize",null,function(){--r.isResizing})},m(s).duration)},setChartSize:function(e){var t,n,i,r,a=this.inverted,s=this.renderer,o=this.chartWidth,l=this.chartHeight,c=this.options.chart,d=this.spacing,u=this.clipOffset;this.plotLeft=t=Math.round(this.plotLeft),this.plotTop=n=Math.round(this.plotTop),this.plotWidth=i=Math.max(0,Math.round(o-t-this.marginRight)),this.plotHeight=r=Math.max(0,Math.round(l-n-this.marginBottom)),this.plotSizeX=a?r:i,this.plotSizeY=a?i:r,this.plotBorderWidth=c.plotBorderWidth||0,this.spacingBox=s.spacingBox={x:d[3],y:d[0],width:o-d[3]-d[1],height:l-d[0]-d[2]},this.plotBox=s.plotBox={x:t,y:n,width:i,height:r},o=2*Math.floor(this.plotBorderWidth/2),a=Math.ceil(Math.max(o,u[3])/2),s=Math.ceil(Math.max(o,u[0])/2),this.clipBox={x:a,y:s,width:Math.floor(this.plotSizeX-Math.max(o,u[1])/2-a),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(o,u[2])/2-s))},e||this.axes.forEach(function(e){e.setAxisSize(),e.setAxisTranslation()}),_(this,"afterSetChartSize",{skipAxes:e})},resetMargins:function(){_(this,"resetMargins");var e=this,t=e.options.chart;["margin","spacing"].forEach(function(n){var i=t[n],r=o(i)?i:[i,i,i,i];["Top","Right","Bottom","Left"].forEach(function(i,a){e[n][a]=D(t[n+i],r[a])})}),E.forEach(function(t,n){e[t]=D(e.margin[n],e.spacing[n])}),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var e,t=this.options.chart,n=this.renderer,i=this.chartWidth,r=this.chartHeight,a=this.chartBackground,s=this.plotBackground,o=this.plotBorder,l=this.styledMode,c=this.plotBGImage,d=t.backgroundColor,u=t.plotBackgroundColor,h=t.plotBackgroundImage,p=this.plotLeft,m=this.plotTop,g=this.plotWidth,f=this.plotHeight,v=this.plotBox,y=this.clipRect,b=this.clipBox,T="animate";if(a||(this.chartBackground=a=n.rect().addClass("highcharts-background").add(),T="attr"),l)var S=e=a.strokeWidth();else e=(S=t.borderWidth||0)+(t.shadow?8:0),d={fill:d||"none"},(S||a["stroke-width"])&&(d.stroke=t.borderColor,d["stroke-width"]=S),a.attr(d).shadow(t.shadow);a[T]({x:e/2,y:e/2,width:i-e-S%2,height:r-e-S%2,r:t.borderRadius}),T="animate",s||(T="attr",this.plotBackground=s=n.rect().addClass("highcharts-plot-background").add()),s[T](v),l||(s.attr({fill:u||"none"}).shadow(t.plotShadow),h&&(c?c.animate(v):this.plotBGImage=n.image(h,p,m,g,f).add())),y?y.animate({width:b.width,height:b.height}):this.clipRect=n.clipRect(b),T="animate",o||(T="attr",this.plotBorder=o=n.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),l||o.attr({stroke:t.plotBorderColor,"stroke-width":t.plotBorderWidth||0,fill:"none"}),o[T](o.crisp({x:p,y:m,width:g,height:f},-o.strokeWidth())),this.isDirtyBox=!1,_(this,"afterDrawChartBox")},propFromSeries:function(){var e,t,n,i=this,r=i.options.chart,a=i.options.series;["inverted","angular","polar"].forEach(function(s){for(e=k[r.type||r.defaultSeriesType],n=r[s]||e&&e.prototype[s],t=a&&a.length;!n&&t--;)(e=k[a[t].type])&&e.prototype[s]&&(n=!0);i[s]=n})},linkSeries:function(){var e=this,t=e.series;t.forEach(function(e){e.linkedSeries.length=0}),t.forEach(function(t){var n=t.options.linkedTo;l(n)&&(n=":previous"===n?e.series[t.index-1]:e.get(n))&&n.linkedParent!==t&&(n.linkedSeries.push(t),t.linkedParent=n,t.visible=D(t.options.visible,n.options.visible,t.visible))}),_(this,"afterLinkSeries")},renderSeries:function(){this.series.forEach(function(e){e.translate(),e.render()})},renderLabels:function(){var e=this,t=e.options.labels;t.items&&t.items.forEach(function(n){var i=C(t.style,n.style),r=d(i.left)+e.plotLeft,a=d(i.top)+e.plotTop+12;delete i.left,delete i.top,e.renderer.text(n.html,r,a).attr({zIndex:2}).css(i).add()})},render:function(){var e=this.axes,t=this.colorAxis,n=this.renderer,i=this.options,r=0,a=function(e){e.forEach(function(e){e.visible&&e.render()})};this.setTitle(),this.legend=new M(this,i.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),i=this.plotWidth,e.some(function(e){if(e.horiz&&e.visible&&e.options.labels.enabled&&e.series.length)return r=21,!0});var s=this.plotHeight=Math.max(this.plotHeight-r,0);e.forEach(function(e){e.setScale()}),this.getAxisMargins();var o=1.1<i/this.plotWidth,l=1.05<s/this.plotHeight;(o||l)&&(e.forEach(function(e){(e.horiz&&o||!e.horiz&&l)&&e.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?a(e):t&&t.length&&a(t),this.seriesGroup||(this.seriesGroup=n.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.updateContainerScaling(),this.hasRendered=!0},addCredits:function(e){var t=this;(e=w(!0,this.options.credits,e)).enabled&&!this.credits&&(this.credits=this.renderer.text(e.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){e.href&&(N.location.href=e.href)}).attr({align:e.position.align,zIndex:8}),t.styledMode||this.credits.css(e.style),this.credits.add().align(e.position),this.credits.update=function(e){t.credits=t.credits.destroy(),t.addCredits(e)})},updateContainerScaling:function(){var e=this.container;if(e.offsetWidth&&e.offsetHeight&&e.getBoundingClientRect){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth;e=t.height/e.offsetHeight,1!==n||1!==e?this.containerScaling={scaleX:n,scaleY:e}:delete this.containerScaling}},destroy:function(){var t,n=this,i=n.axes,a=n.series,s=n.container,o=s&&s.parentNode;for(_(n,"destroy"),n.renderer.forExport?r(T,n):T[n.index]=void 0,e.chartCount--,n.renderTo.removeAttribute("data-highcharts-chart"),O(n),t=i.length;t--;)i[t]=i[t].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),t=a.length;t--;)a[t]=a[t].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach(function(e){var t=n[e];t&&t.destroy&&(n[e]=t.destroy())}),s&&(s.innerHTML="",O(s),o&&b(s)),c(n,function(e,t){delete n[t]})},firstRender:function(){var e=this,t=e.options;e.isReadyToRender&&!e.isReadyToRender()||(e.getContainer(),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),(a(t.series)?t.series:[]).forEach(function(t){e.initSeries(t)}),e.linkSeries(),_(e,"beforeRender"),A&&(e.pointer=new A(e,t)),e.render(),!e.renderer.imgCount&&e.onload&&e.onload(),e.temporaryDisplay(!0))},onload:function(){this.callbacks.concat([this.callback]).forEach(function(e){e&&void 0!==this.index&&e.apply(this,[this])},this),_(this,"load"),_(this,"render"),i(this.index)&&this.setReflow(this.options.chart.reflow),this.onload=null}})}),t(n,"parts/ScrollablePlotArea.js",[n["parts/Globals.js"]],function(e){var t=e.addEvent,n=e.Chart;t(n,"afterSetChartSize",function(t){var n=this.options.chart.scrollablePlotArea,i=n&&n.minWidth;if(n=n&&n.minHeight,!this.renderer.forExport){if(i){if(this.scrollablePixelsX=i=Math.max(0,i-this.chartWidth)){this.plotWidth+=i,this.inverted?(this.clipBox.height+=i,this.plotBox.height+=i):(this.clipBox.width+=i,this.plotBox.width+=i);var r={1:{name:"right",value:i}}}}else n&&(this.scrollablePixelsY=i=Math.max(0,n-this.chartHeight))&&(this.plotHeight+=i,this.inverted?(this.clipBox.width+=i,this.plotBox.width+=i):(this.clipBox.height+=i,this.plotBox.height+=i),r={2:{name:"bottom",value:i}});r&&!t.skipAxes&&this.axes.forEach(function(t){r[t.side]?t.getPlotLinePath=function(){var n=r[t.side].name,i=this[n];this[n]=i-r[t.side].value;var a=e.Axis.prototype.getPlotLinePath.apply(this,arguments);return this[n]=i,a}:(t.setAxisSize(),t.setAxisTranslation())})}}),t(n,"render",function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()}),n.prototype.setUpScrolling=function(){var t={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};this.scrollablePixelsX&&(t.overflowX="auto"),this.scrollablePixelsY&&(t.overflowY="auto"),this.scrollingContainer=e.createElement("div",{className:"highcharts-scrolling"},t,this.renderTo),this.innerContainer=e.createElement("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},n.prototype.moveFixedElements=function(){var e,t=this.container,n=this.fixedRenderer,i=".highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-reset-zoom .highcharts-subtitle .highcharts-title .highcharts-legend-checkbox".split(" ");this.scrollablePixelsX&&!this.inverted?e=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?e=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(e=".highcharts-yaxis"),i.push(e,e+"-labels"),i.forEach(function(e){[].forEach.call(t.querySelectorAll(e),function(e){(e.namespaceURI===n.SVG_NS?n.box:n.box.parentNode).appendChild(e),e.style.pointerEvents="auto"})})},n.prototype.applyFixed=function(){var n,i=!this.fixedDiv,r=this.options.chart.scrollablePlotArea;i?(this.fixedDiv=e.createElement("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:2},null,!0),this.renderTo.insertBefore(this.fixedDiv,this.renderTo.firstChild),this.renderTo.style.overflow="visible",this.fixedRenderer=n=new e.Renderer(this.fixedDiv,this.chartWidth,this.chartHeight),this.scrollableMask=n.path().attr({fill:e.color(this.options.chart.backgroundColor||"#fff").setOpacity(e.pick(r.opacity,.85)).get(),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),this.moveFixedElements(),t(this,"afterShowResetZoom",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),n=this.chartWidth+(this.scrollablePixelsX||0);var a=this.chartHeight+(this.scrollablePixelsY||0);e.stop(this.container),this.container.style.width=n+"px",this.container.style.height=a+"px",this.renderer.boxWrapper.attr({width:n,height:a,viewBox:[0,0,n,a].join(" ")}),this.chartBackground.attr({width:n,height:a}),this.scrollablePixelsY&&(this.scrollingContainer.style.height=this.chartHeight+"px"),i&&(r.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*r.scrollPositionX),r.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*r.scrollPositionY)),a=this.axisOffset,i=this.plotTop-a[0]-1,r=this.plotLeft-a[3]-1,n=this.plotTop+this.plotHeight+a[2]+1,a=this.plotLeft+this.plotWidth+a[1]+1;var s=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),o=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);i=this.scrollablePixelsX?["M",0,i,"L",this.plotLeft-1,i,"L",this.plotLeft-1,n,"L",0,n,"Z","M",s,i,"L",this.chartWidth,i,"L",this.chartWidth,n,"L",s,n,"Z"]:this.scrollablePixelsY?["M",r,0,"L",r,this.plotTop-1,"L",a,this.plotTop-1,"L",a,0,"Z","M",r,o,"L",r,this.chartHeight,"L",a,this.chartHeight,"L",a,o,"Z"]:["M",0,0],"adjustHeight"!==this.redrawTrigger&&this.scrollableMask.attr({d:i})}}),t(n,"parts/Point.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n,i=t.defined,r=t.erase,a=t.isArray,s=t.isNumber,o=t.isObject,l=e.extend,c=e.fireEvent,d=e.format,u=e.pick,h=e.uniqueKey,p=e.removeEvent;e.Point=n=function(){},e.Point.prototype={init:function(e,t,n){return this.series=e,this.applyOptions(t,n),this.id=i(this.id)?this.id:h(),this.resolveColor(),e.chart.pointCount++,c(this,"afterInit"),this},resolveColor:function(){var e=this.series,t=e.chart.options.chart.colorCount,n=e.chart.styledMode;n||this.options.color||(this.color=e.color),e.options.colorByPoint?(n||(t=e.options.colors||e.chart.options.colors,this.color=this.color||t[e.colorCounter],t=t.length),n=e.colorCounter,e.colorCounter++,e.colorCounter===t&&(e.colorCounter=0)):n=e.colorIndex,this.colorIndex=u(this.colorIndex,n)},applyOptions:function(e,t){var i=this.series,r=i.options.pointValKey||i.pointValKey;return e=n.prototype.optionsToObject.call(this,e),l(this,e),this.options=this.options?l(this.options,e):e,e.group&&delete this.group,e.dataLabels&&delete this.dataLabels,r&&(this.y=this[r]),this.formatPrefix=(this.isNull=u(this.isValid&&!this.isValid(),null===this.x||!s(this.y)))?"null":"point",this.selected&&(this.state="select"),"name"in this&&void 0===t&&i.xAxis&&i.xAxis.hasNames&&(this.x=i.xAxis.nameToX(this)),void 0===this.x&&i&&(this.x=void 0===t?i.autoIncrement(this):t),this},setNestedProperty:function(e,t,n){return n.split(".").reduce(function(e,n,i,r){return e[n]=r.length-1===i?t:o(e[n],!0)?e[n]:{},e[n]},e),e},optionsToObject:function(t){var n={},i=this.series,r=i.options.keys,o=r||i.pointArrayMap||["y"],l=o.length,c=0,d=0;if(s(t)||null===t)n[o[0]]=t;else if(a(t))for(!r&&t.length>l&&("string"===(i=typeof t[0])?n.name=t[0]:"number"===i&&(n.x=t[0]),c++);d<l;)r&&void 0===t[c]||(0<o[d].indexOf(".")?e.Point.prototype.setNestedProperty(n,t[c],o[d]):n[o[d]]=t[c]),c++,d++;else"object"==typeof t&&(n=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0));return n},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},getZone:function(){var e=this.series,t=e.zones;e=e.zoneAxis||"y";var n,i=0;for(n=t[i];this[e]>=n.value;)n=t[++i];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=n&&n.color&&!this.options.color?n.color:this.nonZonedColor,n},destroy:function(){var e,t=this.series.chart,n=t.hoverPoints;for(e in t.pointCount--,n&&(this.setState(),r(n,this),n.length||(t.hoverPoints=null)),this===t.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel||this.dataLabels)&&(p(this),this.destroyElements()),this.legendItem&&t.legend.destroyItem(this),this)this[e]=null},destroyElements:function(e){var t,n=this,i=[];for((e=e||{graphic:1,dataLabel:1}).graphic&&i.push("graphic","shadowGroup"),e.dataLabel&&i.push("dataLabel","dataLabelUpper","connector"),t=i.length;t--;){var r=i[t];n[r]&&(n[r]=n[r].destroy())}["dataLabel","connector"].forEach(function(t){var i=t+"s";e[t]&&n[i]&&(n[i].forEach(function(e){e.element&&e.destroy()}),delete n[i])})},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,i=u(n.valueDecimals,""),r=n.valuePrefix||"",a=n.valueSuffix||"";return t.chart.styledMode&&(e=t.chart.tooltip.styledModeFormat(e)),(t.pointArrayMap||["y"]).forEach(function(t){t="{point."+t,(r||a)&&(e=e.replace(RegExp(t+"}","g"),r+t+"}"+a)),e=e.replace(RegExp(t+"}","g"),t+":,."+i+"f}")}),d(e,{point:this,series:this.series},t.chart.time)},firePointEvent:function(e,t,n){var i=this,r=this.series.options;(r.point.events[e]||i.options&&i.options.events&&i.options.events[e])&&this.importEvents(),"click"===e&&r.allowPointSelect&&(n=function(e){i.select&&i.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),c(this,e,t,n)},visible:!0}}),t(n,"parts/Series.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.erase,r=t.isArray,a=t.isNumber,s=t.isString,o=t.objectEach,l=t.splat,c=e.addEvent,d=e.animObject,u=e.arrayMax,h=e.arrayMin,p=e.correctFloat,m=e.defaultOptions,g=e.defaultPlotOptions,f=e.extend,v=e.fireEvent,y=e.merge,b=e.pick,T=e.removeEvent,S=e.SVGElement,C=e.syncTimeout,I=e.win;e.Series=e.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{lineWidth:0,lineColor:"#ffffff",enabledThreshold:2,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":e.numberFormat(this.y,-1)},padding:5,style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:50},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,isCartesian:!0,parallelArrays:["x","y"],pointClass:e.Point,requireSorting:!0,sorted:!0,init:function(t,n){v(this,"init",{options:n});var i,r=this,a=t.series;this.eventOptions=this.eventOptions||{},r.chart=t,r.options=n=r.setOptions(n),r.linkedSeries=[],r.bindAxes(),f(r,{name:n.name,state:"",visible:!1!==n.visible,selected:!0===n.selected});var s=n.events;o(s,function(t,n){e.isFunction(t)&&r.eventOptions[n]!==t&&(e.isFunction(r.eventOptions[n])&&T(r,n,r.eventOptions[n]),r.eventOptions[n]=t,c(r,n,t))}),(s&&s.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)&&(t.runTrackerClick=!0),r.getColor(),r.getSymbol(),r.parallelArrays.forEach(function(e){r[e+"Data"]||(r[e+"Data"]=[])}),r.points||r.data||r.setData(n.data,!1),r.isCartesian&&(t.hasCartesianSeries=!0),a.length&&(i=a[a.length-1]),r._i=b(i&&i._i,-1)+1,t.orderSeries(this.insert(a)),v(this,"afterInit")},insert:function(e){var t,n=this.options.index;if(a(n)){for(t=e.length;t--;)if(n>=b(e[t].options.index,e[t]._i)){e.splice(t+1,0,this);break}-1===t&&e.unshift(this),t+=1}else e.push(this);return b(t,e.length-1)},bindAxes:function(){var t,n=this,i=n.options,r=n.chart;v(this,"bindAxes",null,function(){(n.axisTypes||[]).forEach(function(a){r[a].forEach(function(e){t=e.options,(i[a]===t.index||void 0!==i[a]&&i[a]===t.id||void 0===i[a]&&0===t.index)&&(n.insert(e.series),n[a]=e,e.isDirty=!0)}),n[a]||n.optionalAxis===a||e.error(18,!0,r)})})},updateParallelArrays:function(e,t){var n=e.series,i=arguments,r=a(t)?function(i){var r="y"===i&&n.toYData?n.toYData(e):e[i];n[i+"Data"][t]=r}:function(e){Array.prototype[t].apply(n[e+"Data"],Array.prototype.slice.call(i,2))};n.parallelArrays.forEach(r)},hasData:function(){return this.visible&&void 0!==this.dataMax&&void 0!==this.dataMin||this.visible&&this.yData&&0<this.yData.length},autoIncrement:function(){var e,t=this.options,n=this.xIncrement,i=t.pointIntervalUnit,r=this.chart.time;return n=b(n,t.pointStart,0),this.pointInterval=e=b(this.pointInterval,t.pointInterval,1),i&&(t=new r.Date(n),"day"===i?r.set("Date",t,r.get("Date",t)+e):"month"===i?r.set("Month",t,r.get("Month",t)+e):"year"===i&&r.set("FullYear",t,r.get("FullYear",t)+e),e=t.getTime()-n),this.xIncrement=n+e,n},setOptions:function(e){var t=this.chart,i=t.options,r=i.plotOptions,a=t.userOptions||{};e=y(e),t=t.styledMode;var s={plotOptions:r,userOptions:e};v(this,"setOptions",s);var o=s.plotOptions[this.type],l=a.plotOptions||{};return this.userOptions=s.userOptions,a=y(o,r.series,a.plotOptions&&a.plotOptions[this.type],e),this.tooltipOptions=y(m.tooltip,m.plotOptions.series&&m.plotOptions.series.tooltip,m.plotOptions[this.type].tooltip,i.tooltip.userOptions,r.series&&r.series.tooltip,r[this.type].tooltip,e.tooltip),this.stickyTracking=b(e.stickyTracking,l[this.type]&&l[this.type].stickyTracking,l.series&&l.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||a.stickyTracking),null===o.marker&&delete a.marker,this.zoneAxis=a.zoneAxis,i=this.zones=(a.zones||[]).slice(),!a.negativeColor&&!a.negativeFillColor||a.zones||(r={value:a[this.zoneAxis+"Threshold"]||a.threshold||0,className:"highcharts-negative"},t||(r.color=a.negativeColor,r.fillColor=a.negativeFillColor),i.push(r)),i.length&&n(i[i.length-1].value)&&i.push(t?{}:{color:this.color,fillColor:this.fillColor}),v(this,"afterSetOptions",{options:a}),a},getName:function(){return b(this.options.name,"Series "+(this.index+1))},getCyclic:function(e,t,i){var r=this.chart,a=this.userOptions,s=e+"Index",o=e+"Counter",l=i?i.length:b(r.options.chart[e+"Count"],r[e+"Count"]);if(!t){var c=b(a[s],a["_"+s]);n(c)||(r.series.length||(r[o]=0),a["_"+s]=c=r[o]%l,r[o]+=1),i&&(t=i[c])}void 0!==c&&(this[s]=c),this[e]=t},getColor:function(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||g[this.type].color,this.chart.options.colors)},getSymbol:function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},findPointIndex:function(e,t){var n=e.id;e=e.x;var i,r=this.points;if(n){var s=(n=this.chart.get(n))&&n.index;void 0!==s&&(i=!0)}return void 0===s&&a(e)&&(s=this.xData.indexOf(e,t)),-1!==s&&void 0!==s&&this.cropped&&(s=s>=this.cropStart?s-this.cropStart:s),!i&&r[s]&&r[s].touched&&(s=void 0),s},drawLegendSymbol:e.LegendSymbolMixin.drawLineMarker,updateData:function(e){var t,i,r,s=this.options,o=this.points,l=[],c=this.requireSorting,d=e.length===o.length,u=!0;if(this.xIncrement=null,e.forEach(function(e,i){var u=n(e)&&this.pointClass.prototype.optionsToObject.call({series:this},e)||{},h=u.x;(u.id||a(h))&&(-1===(h=this.findPointIndex(u,r))||void 0===h?l.push(e):o[h]&&e!==s.data[h]?(o[h].update(e,!1,null,!1),o[h].touched=!0,c&&(r=h+1)):o[h]&&(o[h].touched=!0),(!d||i!==h||this.hasDerivedData)&&(t=!0))},this),t)for(e=o.length;e--;)(i=o[e])&&!i.touched&&i.remove(!1);else d?e.forEach(function(e,t){o[t].update&&e!==o[t].y&&o[t].update(e,!1,null,!1)}):u=!1;return o.forEach(function(e){e&&(e.touched=!1)}),!!u&&(l.forEach(function(e){this.addPoint(e,!1,null,null,!1)},this),!0)},setData:function(t,n,i,o){var l,c,d=this,u=d.points,h=u&&u.length||0,p=d.options,m=d.chart,g=null,f=d.xAxis,v=p.turboThreshold,y=this.xData,T=this.yData,S=(l=d.pointArrayMap)&&l.length,C=p.keys,I=0,_=1;if(l=(t=t||[]).length,n=b(n,!0),!1!==o&&l&&h&&!d.cropped&&!d.hasGroupedData&&d.visible&&!d.isSeriesBoosting&&(c=this.updateData(t)),!c){if(d.xIncrement=null,d.colorCounter=0,this.parallelArrays.forEach(function(e){d[e+"Data"].length=0}),v&&l>v){for(i=0;null===g&&i<l;)g=t[i],i++;if(a(g))for(i=0;i<l;i++)y[i]=this.autoIncrement(),T[i]=t[i];else if(r(g))if(S)for(i=0;i<l;i++)g=t[i],y[i]=g[0],T[i]=g.slice(1,S+1);else for(C&&(I=0<=(I=C.indexOf("x"))?I:0,_=0<=(_=C.indexOf("y"))?_:1),i=0;i<l;i++)g=t[i],y[i]=g[I],T[i]=g[_];else e.error(12,!1,m)}else for(i=0;i<l;i++)void 0!==t[i]&&(g={series:d},d.pointClass.prototype.applyOptions.apply(g,[t[i]]),d.updateParallelArrays(g,i));for(T&&s(T[0])&&e.error(14,!0,m),d.data=[],d.options.data=d.userOptions.data=t,i=h;i--;)u[i]&&u[i].destroy&&u[i].destroy();f&&(f.minRange=f.userMinRange),d.isDirty=m.isDirtyBox=!0,d.isDirtyData=!!u,i=!1}"point"===p.legendType&&(this.processData(),this.generatePoints()),n&&m.redraw(i)},processData:function(t){var n=this.xData,i=this.yData,r=n.length,a=0,s=this.xAxis,o=this.options,l=o.cropThreshold,c=this.getExtremesFromAll||o.getExtremesFromAll,d=this.isCartesian;o=s&&s.val2lin;var u=s&&s.isLog,h=this.requireSorting;if(d&&!this.isDirty&&!s.isDirty&&!this.yAxis.isDirty&&!t)return!1;if(s)var p=(t=s.getExtremes()).min,m=t.max;if(d&&this.sorted&&!c&&(!l||r>l||this.forceCrop))if(n[r-1]<p||n[0]>m)n=[],i=[];else if(this.yData&&(n[0]<p||n[r-1]>m)){n=(a=this.cropData(this.xData,this.yData,p,m)).xData,i=a.yData,a=a.start;var g=!0}for(l=n.length||1;--l;)if(0<(r=u?o(n[l])-o(n[l-1]):n[l]-n[l-1])&&(void 0===f||r<f))var f=r;else 0>r&&h&&(e.error(15,!1,this.chart),h=!1);this.cropped=g,this.cropStart=a,this.processedXData=n,this.processedYData=i,this.closestPointRange=this.basePointRange=f},cropData:function(e,t,n,i,r){var a,s=e.length,o=0,l=s;for(r=b(r,this.cropShoulder),a=0;a<s;a++)if(e[a]>=n){o=Math.max(0,a-r);break}for(n=a;n<s;n++)if(e[n]>i){l=n+r;break}return{xData:e.slice(o,l),yData:t.slice(o,l),start:o,end:l}},generatePoints:function(){var e,t=this.options,n=t.data,i=this.data,r=this.processedXData,a=this.processedYData,s=this.pointClass,o=r.length,c=this.cropStart||0,d=this.hasGroupedData;t=t.keys;var u,h=[];for(i||d||((i=[]).length=n.length,i=this.data=i),t&&d&&(this.options.keys=!1),u=0;u<o;u++){var p=c+u;if(d){var m=(new s).init(this,[r[u]].concat(l(a[u])));m.dataGroup=this.groupMap[u],m.dataGroup.options&&(m.options=m.dataGroup.options,f(m,m.dataGroup.options),delete m.dataLabels)}else(m=i[p])||void 0===n[p]||(i[p]=m=(new s).init(this,n[p],r[u]));m&&(m.index=p,h[u]=m)}if(this.options.keys=t,i&&(o!==(e=i.length)||d))for(u=0;u<e;u++)u!==c||d||(u+=o),i[u]&&(i[u].destroyElements(),i[u].plotX=void 0);this.data=i,this.points=h,v(this,"afterGeneratePoints")},getXExtremes:function(e){return{min:h(e),max:u(e)}},getExtremes:function(e){var t,n=this.xAxis,i=this.yAxis,s=this.processedXData||this.xData,o=[],l=0,c=0,d=0,p=this.requireSorting?this.cropShoulder:0,m=!!i&&i.positiveValuesOnly;for(i=(e=e||this.stackedYData||this.processedYData||[]).length,n&&(c=(d=n.getExtremes()).min,d=d.max),t=0;t<i;t++){var g=s[t],f=e[t],y=(a(f)||r(f))&&(f.length||0<f||!m);if(g=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!n||(s[t+p]||g)>=c&&(s[t-p]||g)<=d,y&&g)if(y=f.length)for(;y--;)a(f[y])&&(o[l++]=f[y]);else o[l++]=f}this.dataMin=h(o),this.dataMax=u(o),v(this,"afterGetExtremes")},translate:function(){this.processedXData||this.processData(),this.generatePoints();var e,t,i=this.options,s=i.stacking,o=this.xAxis,l=o.categories,c=this.yAxis,d=this.points,u=d.length,h=!!this.modifyValue,m=this.pointPlacementToXValue(),g=a(m),f=i.threshold,y=i.startFromThreshold?f:0,T=this.zoneAxis||"y",S=Number.MAX_VALUE;for(e=0;e<u;e++){var C=d[e],I=C.x,_=C.y,M=C.low,E=s&&c.stacks[(this.negStacks&&_<(y?0:f)?"-":"")+this.stackKey];if(c.positiveValuesOnly&&null!==_&&0>=_&&(C.isNull=!0),C.plotX=t=p(Math.min(Math.max(-1e5,o.translate(I,0,0,0,1,m,"flags"===this.type)),1e5)),s&&this.visible&&E&&E[I]){var w=this.getStackIndicator(w,I,this.index);if(!C.isNull)var A=E[I],D=A.points[w.key]}if(r(D)&&(M=D[0],_=D[1],M===y&&w.key===E[I].base&&(M=b(a(f)&&f,c.min)),c.positiveValuesOnly&&0>=M&&(M=null),C.total=C.stackTotal=A.total,C.percentage=A.total&&C.y/A.total*100,C.stackY=_,this.irregularWidths||A.setOffset(this.pointXOffset||0,this.barW||0)),C.yBottom=n(M)?Math.min(Math.max(-1e5,c.translate(M,0,1,0,1)),1e5):null,h&&(_=this.modifyValue(_,C)),C.plotY=_="number"==typeof _&&1/0!==_?Math.min(Math.max(-1e5,c.translate(_,0,1,0,1)),1e5):void 0,C.isInside=void 0!==_&&0<=_&&_<=c.len&&0<=t&&t<=o.len,C.clientX=g?p(o.translate(I,0,0,0,1,m)):t,C.negative=C[T]<(i[T+"Threshold"]||f||0),C.category=l&&void 0!==l[C.x]?l[C.x]:C.x,!C.isNull){void 0!==O&&(S=Math.min(S,Math.abs(t-O)));var O=t}C.zone=this.zones.length&&C.getZone()}this.closestPointRangePx=S,v(this,"afterTranslate")},getValidPoints:function(e,t,n){var i=this.chart;return(e||this.points||[]).filter(function(e){return!(t&&!i.isInsidePlot(e.plotX,e.plotY,i.inverted))&&(n||!e.isNull)})},getClipBox:function(e,t){var n=this.options,i=this.chart,r=i.inverted,a=this.xAxis,s=a&&this.yAxis;return e&&!1===n.clip&&s?e=r?{y:-i.chartWidth+s.len+s.pos,height:i.chartWidth,width:i.chartHeight,x:-i.chartHeight+a.len+a.pos}:{y:-s.pos,height:i.chartHeight,width:i.chartWidth,x:-a.pos}:(e=this.clipBox||i.clipBox,t&&(e.width=i.plotSizeX,e.x=0)),t?{width:e.width,x:e.x}:e},setClip:function(e){var t=this.chart,n=this.options,i=t.renderer,r=t.inverted,a=this.clipBox,s=this.getClipBox(e),o=this.sharedClipKey||["_sharedClip",e&&e.duration,e&&e.easing,s.height,n.xAxis,n.yAxis].join(),l=t[o],c=t[o+"m"];l||(e&&(s.width=0,r&&(s.x=t.plotSizeX+(!1!==n.clip?0:t.plotTop)),t[o+"m"]=c=i.clipRect(r?t.plotSizeX+99:-99,r?-t.plotLeft:-t.plotTop,99,r?t.chartWidth:t.chartHeight)),t[o]=l=i.clipRect(s),l.count={length:0}),e&&!l.count[this.index]&&(l.count[this.index]=!0,l.count.length+=1),(!1!==n.clip||e)&&(this.group.clip(e||a?l:t.clipRect),this.markerGroup.clip(c),this.sharedClipKey=o),e||(l.count[this.index]&&(delete l.count[this.index],--l.count.length),0===l.count.length&&o&&t[o]&&(a||(t[o]=t[o].destroy()),t[o+"m"]&&(t[o+"m"]=t[o+"m"].destroy())))},animate:function(e){var t=this.chart,n=d(this.options.animation);if(e)this.setClip(n);else{var i=this.sharedClipKey;e=t[i];var r=this.getClipBox(n,!0);e&&e.animate(r,n),t[i+"m"]&&t[i+"m"].animate({width:r.width+99,x:r.x-(t.inverted?0:99)},n),this.animate=null}},afterAnimate:function(){this.setClip(),v(this,"afterAnimate"),this.finishedAnimating=!0},drawPoints:function(){var e,t=this.points,n=this.chart,i=this.options.marker,r=this[this.specialGroup]||this.markerGroup,a=this.xAxis,s=b(i.enabled,!(a&&!a.isRadial)||null,this.closestPointRangePx>=i.enabledThreshold*i.radius);if(!1!==i.enabled||this._hasPointMarkers)for(a=0;a<t.length;a++){var o=t[a],l=(e=o.graphic)?"animate":"attr",c=o.marker||{},d=!!o.marker,u=s&&void 0===c.enabled||c.enabled,h=!1!==o.isInside;if(u&&!o.isNull){u=b(c.symbol,this.symbol);var p=this.markerAttribs(o,o.selected&&"select");e?e[h?"show":"hide"](h).animate(p):h&&(0<p.width||o.hasImage)&&(o.graphic=e=n.renderer.symbol(u,p.x,p.y,p.width,p.height,d?c:i).add(r)),e&&!n.styledMode&&e[l](this.pointAttribs(o,o.selected&&"select")),e&&e.addClass(o.getClassName(),!0)}else e&&(o.graphic=e.destroy())}},markerAttribs:function(e,t){var n=this.options.marker,i=e.marker||{},r=i.symbol||n.symbol,a=b(i.radius,n.radius);return t&&(n=n.states[t],t=i.states&&i.states[t],a=b(t&&t.radius,n&&n.radius,a+(n&&n.radiusPlus||0))),e.hasImage=r&&0===r.indexOf("url"),e.hasImage&&(a=0),e={x:Math.floor(e.plotX)-a,y:e.plotY-a},a&&(e.width=e.height=2*a),e},pointAttribs:function(e,t){var n=this.options.marker,i=e&&e.options,r=i&&i.marker||{},a=this.color,s=i&&i.color,o=e&&e.color;i=b(r.lineWidth,n.lineWidth);var l=e&&e.zone&&e.zone.color;return e=1,a=s||l||o||a,s=r.fillColor||n.fillColor||a,a=r.lineColor||n.lineColor||a,t=t||"normal",n=n.states[t],t=r.states&&r.states[t]||{},i=b(t.lineWidth,n.lineWidth,i+b(t.lineWidthPlus,n.lineWidthPlus,0)),s=t.fillColor||n.fillColor||s,{stroke:a=t.lineColor||n.lineColor||a,"stroke-width":i,fill:s,opacity:e=b(t.opacity,n.opacity,e)}},destroy:function(t){var n,r,a,s=this,l=s.chart,c=/AppleWebKit\/533/.test(I.navigator.userAgent),d=s.data||[];for(v(s,"destroy"),t||T(s),(s.axisTypes||[]).forEach(function(e){(a=s[e])&&a.series&&(i(a.series,s),a.isDirty=a.forceRedraw=!0)}),s.legendItem&&s.chart.legend.destroyItem(s),n=d.length;n--;)(r=d[n])&&r.destroy&&r.destroy();s.points=null,e.clearTimeout(s.animationTimeout),o(s,function(e,t){e instanceof S&&!e.survive&&e[c&&"group"===t?"hide":"destroy"]()}),l.hoverSeries===s&&(l.hoverSeries=null),i(l.series,s),l.orderSeries(),o(s,function(e,n){t&&"hcEvents"===n||delete s[n]})},getGraphPath:function(e,t,i){var r,a,s=this,o=s.options,l=o.step,c=[],d=[];return(r=(e=e||s.points).reversed)&&e.reverse(),(l={right:1,center:2}[l]||l&&3)&&r&&(l=4-l),!o.connectNulls||t||i||(e=this.getValidPoints(e)),e.forEach(function(r,u){var h=r.plotX,p=r.plotY,m=e[u-1];(r.leftCliff||m&&m.rightCliff)&&!i&&(a=!0),r.isNull&&!n(t)&&0<u?a=!o.connectNulls:r.isNull&&!t?a=!0:(0===u||a?u=["M",r.plotX,r.plotY]:s.getPointSpline?u=s.getPointSpline(e,r,u):l?(u=1===l?["L",m.plotX,p]:2===l?["L",(m.plotX+h)/2,m.plotY,"L",(m.plotX+h)/2,p]:["L",h,m.plotY]).push("L",h,p):u=["L",h,p],d.push(r.x),l&&(d.push(r.x),2===l&&d.push(r.x)),c.push.apply(c,u),a=!1)}),c.xMap=d,s.graphPath=c},drawGraph:function(){var e=this,t=this.options,n=(this.gappedPath||this.getGraphPath).call(this),i=this.chart.styledMode,r=[["graph","highcharts-graph"]];i||r[0].push(t.lineColor||this.color||"#cccccc",t.dashStyle),(r=e.getZonesGraphs(r)).forEach(function(r,a){var s=r[0],o=e[s],l=o?"animate":"attr";o?(o.endX=e.preventGraphAnimation?null:n.xMap,o.animate({d:n})):n.length&&(e[s]=o=e.chart.renderer.path(n).addClass(r[1]).attr({zIndex:1}).add(e.group)),o&&!i&&(s={stroke:r[2],"stroke-width":t.lineWidth,fill:e.fillGraph&&e.color||"none"},r[3]?s.dashstyle=r[3]:"square"!==t.linecap&&(s["stroke-linecap"]=s["stroke-linejoin"]="round"),o[l](s).shadow(2>a&&t.shadow)),o&&(o.startX=n.xMap,o.isArea=n.isArea)})},getZonesGraphs:function(e){return this.zones.forEach(function(t,n){n=["zone-graph-"+n,"highcharts-graph highcharts-zone-graph-"+n+" "+(t.className||"")],this.chart.styledMode||n.push(t.color||this.color,t.dashStyle||this.options.dashStyle),e.push(n)},this),e},applyZones:function(){var e,t,n,i,r,a,s=this,o=this.chart,l=o.renderer,c=this.zones,d=this.clips||[],u=this.graph,h=this.area,p=Math.max(o.chartWidth,o.chartHeight),m=this[(this.zoneAxis||"y")+"Axis"],g=o.inverted,f=!1;if(c.length&&(u||h)&&m&&void 0!==m.min){var v=m.reversed,y=m.horiz;u&&!this.showLine&&u.hide(),h&&h.hide();var T=m.getExtremes();c.forEach(function(c,S){e=v?y?o.plotWidth:0:y?0:m.toPixels(T.min)||0,e=Math.min(Math.max(b(t,e),0),p),t=Math.min(Math.max(Math.round(m.toPixels(b(c.value,T.max),!0)||0),0),p),f&&(e=t=m.toPixels(T.max)),i=Math.abs(e-t),r=Math.min(e,t),a=Math.max(e,t),m.isXAxis?(n={x:g?a:r,y:0,width:i,height:p},y||(n.x=o.plotHeight-n.x)):(n={x:0,y:g?a:r,width:p,height:i},y&&(n.y=o.plotWidth-n.y)),g&&l.isVML&&(n=m.isXAxis?{x:0,y:v?r:a,height:n.width,width:o.chartWidth}:{x:n.y-o.plotLeft-o.spacingBox.x,y:0,width:n.height,height:o.chartHeight}),d[S]?d[S].animate(n):d[S]=l.clipRect(n),u&&s["zone-graph-"+S].clip(d[S]),h&&s["zone-area-"+S].clip(d[S]),f=c.value>T.max,s.resetZones&&0===t&&(t=void 0)}),this.clips=d}else s.visible&&(u&&u.show(!0),h&&h.show(!0))},invertGroups:function(e){function t(){["group","markerGroup"].forEach(function(t){n[t]&&(i.renderer.isVML&&n[t].attr({width:n.yAxis.len,height:n.xAxis.len}),n[t].width=n.yAxis.len,n[t].height=n.xAxis.len,n[t].invert(e))})}var n=this,i=n.chart;if(n.xAxis){var r=c(i,"resize",t);c(n,"destroy",r),t(),n.invertGroups=t}},plotGroup:function(e,t,i,r,a){var s=this[e],o=!s;return o&&(this[e]=s=this.chart.renderer.g().attr({zIndex:r||.1}).add(a)),s.addClass("highcharts-"+t+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(n(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(s.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),s.attr({visibility:i})[o?"attr":"animate"](this.getPlotBox()),s},getPlotBox:function(){var e=this.chart,t=this.xAxis,n=this.yAxis;return e.inverted&&(t=n,n=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:n?n.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e=this,t=e.chart,n=e.options,i=!!e.animate&&t.renderer.isSVG&&d(n.animation).duration,r=e.visible?"inherit":"hidden",a=n.zIndex,s=e.hasRendered,o=t.seriesGroup,l=t.inverted;v(this,"render");var c=e.plotGroup("group","series",r,a,o);e.markerGroup=e.plotGroup("markerGroup","markers",r,a,o),i&&e.animate(!0),c.inverted=!(!e.isCartesian&&!e.invertable)&&l,e.drawGraph&&(e.drawGraph(),e.applyZones()),e.visible&&e.drawPoints(),e.drawDataLabels&&e.drawDataLabels(),e.redrawPoints&&e.redrawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),e.invertGroups(l),!1===n.clip||e.sharedClipKey||s||c.clip(t.clipRect),i&&e.animate(),s||(e.animationTimeout=C(function(){e.afterAnimate()},i)),e.isDirty=!1,e.hasRendered=!0,v(e,"afterRender")},redraw:function(){var e=this.chart,t=this.isDirty||this.isDirtyData,n=this.group,i=this.xAxis,r=this.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:b(i&&i.left,e.plotLeft),translateY:b(r&&r.top,e.plotTop)})),this.translate(),this.render(),t&&delete this.kdTree},kdAxisArray:["clientX","plotY"],searchPoint:function(e,t){var n=this.xAxis,i=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?n.len-e.chartY+n.pos:e.chartX-n.pos,plotY:r?i.len-e.chartX+i.pos:e.chartY-i.pos},t,e)},buildKDTree:function(e){function t(e,i,r){var a;if(a=e&&e.length){var s=n.kdAxisArray[i%r];return e.sort(function(e,t){return e[s]-t[s]}),{point:e[a=Math.floor(a/2)],left:t(e.slice(0,a),i+1,r),right:t(e.slice(a+1),i+1,r)}}}this.buildingKdTree=!0;var n=this,i=-1<n.options.findNearestPointBy.indexOf("y")?2:1;delete n.kdTree,C(function(){n.kdTree=t(n.getValidPoints(null,!n.directTouch),i,i),n.buildingKdTree=!1},n.options.kdNow||e&&"touchstart"===e.type?0:1)},searchKDTree:function(e,t,i){var r=this,a=this.kdAxisArray[0],s=this.kdAxisArray[1],o=t?"distX":"dist";if(t=-1<r.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(i),this.kdTree)return function e(t,i,l,c){var d=i.point,u=r.kdAxisArray[l%c],h=d,p=n(t[a])&&n(d[a])?Math.pow(t[a]-d[a],2):null,m=n(t[s])&&n(d[s])?Math.pow(t[s]-d[s],2):null;return m=(p||0)+(m||0),d.dist=n(m)?Math.sqrt(m):Number.MAX_VALUE,d.distX=n(p)?Math.sqrt(p):Number.MAX_VALUE,p=0>(u=t[u]-d[u])?"right":"left",i[m=0>u?"left":"right"]&&(h=(m=e(t,i[m],l+1,c))[o]<h[o]?m:d),i[p]&&Math.sqrt(u*u)<h[o]&&(h=(t=e(t,i[p],l+1,c))[o]<h[o]?t:h),h}(e,this.kdTree,t,t)},pointPlacementToXValue:function(){var e=this.options.pointPlacement;return"between"===e&&(e=.5),a(e)&&(e*=b(this.options.pointRange||this.xAxis.pointRange)),e}})}),t(n,"parts/Stacking.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.objectEach;t=e.Axis;var r=e.Chart,a=e.correctFloat,s=e.destroyObjectProperties,o=e.format,l=e.pick,c=e.Series;e.StackItem=function(e,t,n,i,r){var a=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t=t||{},this.x=i,this.total=null,this.points={},this.stack=r,this.rightCliff=this.leftCliff=0,this.alignOptions={align:t.align||(a?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(a?"middle":n?"bottom":"top"),y:t.y,x:t.x},this.textAlign=t.textAlign||(a?n?"right":"left":"center")},e.StackItem.prototype={destroy:function(){s(this,this.axis)},render:function(e){var t=this.axis.chart,n=this.options,i=n.format;i=i?o(i,this,t.time):n.formatter.call(this),this.label?this.label.attr({text:i,visibility:"hidden"}):(this.label=t.renderer.label(i,null,null,n.shape,null,null,n.useHTML,!1,"stack-labels"),i={text:i,align:this.textAlign,rotation:n.rotation,padding:l(n.padding,0),visibility:"hidden"},this.label.attr(i),t.styledMode||this.label.css(n.style),this.label.added||this.label.add(e)),this.label.labelrank=t.plotHeight},setOffset:function(e,t,i,r,a){var s=this.axis,o=s.chart;if(r=s.translate(s.usePercentage?100:r||this.total,0,0,0,1),i=s.translate(i||0),i=n(r)&&Math.abs(r-i),e=l(a,o.xAxis[0].translate(this.x))+e,s=n(r)&&this.getStackBox(o,this,e,r,t,i,s),t=this.label,e=this.isNegative,a="justify"===l(this.options.overflow,"justify"),t&&s){i=t.getBBox();var d=o.inverted?e?i.width:0:i.width/2,u=o.inverted?i.height/2:e?-4:i.height+4;this.alignOptions.x=l(this.options.x,0),t.align(this.alignOptions,null,s),r=t.alignAttr,t.show(),r.y-=u,a&&(r.x-=d,c.prototype.justifyDataLabel.call(this.axis,t,this.alignOptions,r,i,s),r.x+=d),r.x=t.alignAttr.x,t.attr({x:r.x,y:r.y}),l(!a&&this.options.crop,!0)&&((o=o.isInsidePlot(t.x+(o.inverted?0:-i.width/2),t.y)&&o.isInsidePlot(t.x+(o.inverted?e?-i.width:i.width:i.width/2),t.y+i.height))||t.hide())}},getStackBox:function(e,t,n,i,r,a,s){var o=t.axis.reversed,l=e.inverted;return e=s.height+s.pos-(l?e.plotLeft:e.plotTop),t=t.isNegative&&!o||!t.isNegative&&o,{x:l?t?i:i-a:n,y:l?e-n-r:t?e-i-a:e-i,width:l?a:r,height:l?r:a}}},r.prototype.getStacks=function(){var e=this,t=e.inverted;e.yAxis.forEach(function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),e.series.forEach(function(n){var i=n.xAxis&&n.xAxis.options||{};!n.options.stacking||!0!==n.visible&&!1!==e.options.chart.ignoreHiddenSeries||(n.stackKey=[n.type,l(n.options.stack,""),t?i.top:i.left,t?i.height:i.width].join())})},t.prototype.buildStacks=function(){var e,t=this.series,n=l(this.options.reversedStacks,!0),i=t.length;if(!this.isXAxis){for(this.usePercentage=!1,e=i;e--;)t[n?e:i-e-1].setStackedPoints();for(e=0;e<i;e++)t[e].modifyStacks()}},t.prototype.renderStackTotals=function(){var e=this.chart,t=e.renderer,n=this.stacks,r=this.stackTotalGroup;r||(this.stackTotalGroup=r=t.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),r.translate(e.plotLeft,e.plotTop),i(n,function(e){i(e,function(e){e.render(r)})})},t.prototype.resetStacks=function(){var e=this,t=e.stacks;e.isXAxis||i(t,function(t){i(t,function(n,i){n.touched<e.stacksTouched?(n.destroy(),delete t[i]):(n.total=null,n.cumulative=null)})})},t.prototype.cleanStacks=function(){if(!this.isXAxis){if(this.oldStacks)var e=this.stacks=this.oldStacks;i(e,function(e){i(e,function(e){e.cumulative=e.total})})}},c.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t=this.processedXData,i=this.processedYData,r=[],s=i.length,o=this.options,c=o.threshold,d=l(o.startFromThreshold&&c,0),u=o.stack;o=o.stacking;var h,p,m=this.stackKey,g="-"+m,f=this.negStacks,v=this.yAxis,y=v.stacks,b=v.oldStacks;for(v.stacksTouched+=1,p=0;p<s;p++){var T=t[p],S=i[p],C=this.getStackIndicator(C,T,this.index),I=C.key,_=(h=f&&S<(d?0:c))?g:m;y[_]||(y[_]={}),y[_][T]||(b[_]&&b[_][T]?(y[_][T]=b[_][T],y[_][T].total=null):y[_][T]=new e.StackItem(v,v.options.stackLabels,h,T,u)),_=y[_][T],null!==S?(_.points[I]=_.points[this.index]=[l(_.cumulative,d)],n(_.cumulative)||(_.base=I),_.touched=v.stacksTouched,0<C.index&&!1===this.singleStacks&&(_.points[I][0]=_.points[this.index+","+T+",0"][0])):_.points[I]=_.points[this.index]=null,"percent"===o?(h=h?m:g,f&&y[h]&&y[h][T]?(h=y[h][T],_.total=h.total=Math.max(h.total,_.total)+Math.abs(S)||0):_.total=a(_.total+(Math.abs(S)||0))):_.total=a(_.total+(S||0)),_.cumulative=l(_.cumulative,d)+(S||0),null!==S&&(_.points[I].push(_.cumulative),r[p]=_.cumulative)}"percent"===o&&(v.usePercentage=!0),this.stackedYData=r,v.oldStacks={}}},c.prototype.modifyStacks=function(){var e,t=this,n=t.stackKey,i=t.yAxis.stacks,r=t.processedXData,a=t.options.stacking;t[a+"Stacker"]&&[n,"-"+n].forEach(function(n){for(var s,o,l=r.length;l--;)s=r[l],e=t.getStackIndicator(e,s,t.index,n),(o=(s=i[n]&&i[n][s])&&s.points[e.key])&&t[a+"Stacker"](o,s,l)})},c.prototype.percentStacker=function(e,t,n){t=t.total?100/t.total:0,e[0]=a(e[0]*t),e[1]=a(e[1]*t),this.stackedYData[n]=e[1]},c.prototype.getStackIndicator=function(e,t,i,r){return!n(e)||e.x!==t||r&&e.key!==r?e={x:t,index:0,key:r}:e.index++,e.key=[i,t,e.index].join(),e}}),t(n,"parts/Dynamics.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.erase,r=t.isArray,a=t.isNumber,s=t.isObject,o=t.isString,l=t.objectEach,c=t.splat,d=e.addEvent,u=e.animate,h=e.Axis;t=e.Chart;var p=e.createElement,m=e.css,g=e.extend,f=e.fireEvent,v=e.merge,y=e.pick,b=e.Point,T=e.Series,S=e.seriesTypes,C=e.setAnimation;e.cleanRecursively=function(t,n){var i={};return l(t,function(r,a){s(t[a],!0)&&!t.nodeType&&n[a]?(r=e.cleanRecursively(t[a],n[a]),Object.keys(r).length&&(i[a]=r)):(s(t[a])||t[a]!==n[a])&&(i[a]=t[a])}),i},g(t.prototype,{addSeries:function(e,t,n){var i,r=this;return e&&(t=y(t,!0),f(r,"addSeries",{options:e},function(){i=r.initSeries(e),r.isDirtyLegend=!0,r.linkSeries(),f(r,"afterAddSeries",{series:i}),t&&r.redraw(n)})),i},addAxis:function(e,t,n,i){return this.createAxis(t?"xAxis":"yAxis",{axis:e,redraw:n,animation:i})},addColorAxis:function(e,t,n){return this.createAxis("colorAxis",{axis:e,redraw:t,animation:n})},createAxis:function(t,n){var i=this.options,r="colorAxis"===t,a=n.redraw,s=n.animation;n=v(n.axis,{index:this[t].length,isX:"xAxis"===t});var o=r?new e.ColorAxis(this,n):new h(this,n);return i[t]=c(i[t]||{}),i[t].push(n),r&&(this.isDirtyLegend=!0),y(a,!0)&&this.redraw(s),o},showLoading:function(e){var t=this,n=t.options,i=t.loadingDiv,r=n.loading,a=function(){i&&m(i,{left:t.plotLeft+"px",top:t.plotTop+"px",width:t.plotWidth+"px",height:t.plotHeight+"px"})};i||(t.loadingDiv=i=p("div",{className:"highcharts-loading highcharts-loading-hidden"},null,t.container),t.loadingSpan=p("span",{className:"highcharts-loading-inner"},null,i),d(t,"redraw",a)),i.className="highcharts-loading",t.loadingSpan.innerHTML=y(e,n.lang.loading,""),t.styledMode||(m(i,g(r.style,{zIndex:10})),m(t.loadingSpan,r.labelStyle),t.loadingShown||(m(i,{opacity:0,display:""}),u(i,{opacity:r.style.opacity||.5},{duration:r.showDuration||0}))),t.loadingShown=!0,a()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&(t.className="highcharts-loading highcharts-loading-hidden",this.styledMode||u(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){m(t,{display:"none"})}})),this.loadingShown=!1},propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" "),collectionsWithUpdate:"xAxis yAxis zAxis series colorAxis pane".split(" "),update:function(t,i,r,s){var d,u,h,p=this,m={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},g=t.isResponsiveOptions,b=[];if(f(p,"update",{options:t}),g||p.setResponsive(!1,!0),t=e.cleanRecursively(t,p.options),v(!0,p.userOptions,t),d=t.chart){if(v(!0,p.options.chart,d),"className"in d&&p.setClassName(d.className),"reflow"in d&&p.setReflow(d.reflow),"inverted"in d||"polar"in d||"type"in d){p.propFromSeries();var T=!0}"alignTicks"in d&&(T=!0),l(d,function(e,t){-1!==p.propsRequireUpdateSeries.indexOf("chart."+t)&&(u=!0),-1!==p.propsRequireDirtyBox.indexOf(t)&&(p.isDirtyBox=!0),g||-1===p.propsRequireReflow.indexOf(t)||(h=!0)}),!p.styledMode&&"style"in d&&p.renderer.setStyle(d.style)}!p.styledMode&&t.colors&&(this.options.colors=t.colors),t.plotOptions&&v(!0,this.options.plotOptions,t.plotOptions),t.time&&this.time===e.time&&(this.time=new e.Time(t.time)),l(t,function(e,t){p[t]&&"function"==typeof p[t].update?p[t].update(e,!1):"function"==typeof p[m[t]]&&p[m[t]](e),"chart"!==t&&-1!==p.propsRequireUpdateSeries.indexOf(t)&&(u=!0)}),this.collectionsWithUpdate.forEach(function(e){if(t[e]){if("series"===e){var i=[];p[e].forEach(function(e,t){e.options.isInternal||i.push(y(e.options.index,t))})}c(t[e]).forEach(function(t,a){(a=n(t.id)&&p.get(t.id)||p[e][i?i[a]:a])&&a.coll===e&&(a.update(t,!1),r&&(a.touched=!0)),!a&&r&&p.collectionsWithInit[e]&&(p.collectionsWithInit[e][0].apply(p,[t].concat(p.collectionsWithInit[e][1]||[]).concat([!1])).touched=!0)}),r&&p[e].forEach(function(e){e.touched||e.options.isInternal?delete e.touched:b.push(e)})}}),b.forEach(function(e){e.remove&&e.remove(!1)}),T&&p.axes.forEach(function(e){e.update({},!1)}),u&&p.series.forEach(function(e){e.update({},!1)}),t.loading&&v(!0,p.options.loading,t.loading),T=d&&d.width,d=d&&d.height,o(d)&&(d=e.relativeLength(d,T||p.chartWidth)),h||a(T)&&T!==p.chartWidth||a(d)&&d!==p.chartHeight?p.setSize(T,d,s):y(i,!0)&&p.redraw(s),f(p,"afterUpdate",{options:t,redraw:i,animation:s})},setSubtitle:function(e,t){this.applyDescription("subtitle",e),this.layOutTitles(t)},setCaption:function(e,t){this.applyDescription("caption",e),this.layOutTitles(t)}}),t.prototype.collectionsWithInit={xAxis:[t.prototype.addAxis,[!0]],yAxis:[t.prototype.addAxis,[!1]],colorAxis:[t.prototype.addColorAxis,[!1]],series:[t.prototype.addSeries]},g(b.prototype,{update:function(e,t,n,i){function r(){o.applyOptions(e),null===o.y&&c&&(o.graphic=c.destroy()),s(e,!0)&&(c&&c.element&&e&&e.marker&&void 0!==e.marker.symbol&&(o.graphic=c.destroy()),e&&e.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy()),o.connector&&(o.connector=o.connector.destroy())),a=o.index,l.updateParallelArrays(o,a),u.data[a]=s(u.data[a],!0)||s(e,!0)?o.options:y(e,u.data[a]),l.isDirty=l.isDirtyData=!0,!l.fixedBox&&l.hasCartesianSeries&&(d.isDirtyBox=!0),"point"===u.legendType&&(d.isDirtyLegend=!0),t&&d.redraw(n)}var a,o=this,l=o.series,c=o.graphic,d=l.chart,u=l.options;t=y(t,!0),!1===i?r():o.firePointEvent("update",{options:e},r)},remove:function(e,t){this.series.removePoint(this.series.data.indexOf(this),e,t)}}),g(T.prototype,{addPoint:function(e,t,n,i,r){var a=this.options,s=this.data,o=this.chart,l=this.xAxis;l=l&&l.hasNames&&l.names;var c,d=a.data,u=this.xData;t=y(t,!0);var h={series:this};this.pointClass.prototype.applyOptions.apply(h,[e]);var p=h.x,m=u.length;if(this.requireSorting&&p<u[m-1])for(c=!0;m&&u[m-1]>p;)m--;this.updateParallelArrays(h,"splice",m,0,0),this.updateParallelArrays(h,m),l&&h.name&&(l[p]=h.name),d.splice(m,0,e),c&&(this.data.splice(m,0,null),this.processData()),"point"===a.legendType&&this.generatePoints(),n&&(s[0]&&s[0].remove?s[0].remove(!1):(s.shift(),this.updateParallelArrays(h,"shift"),d.shift())),!1!==r&&f(this,"addPoint",{point:h}),this.isDirtyData=this.isDirty=!0,t&&o.redraw(i)},removePoint:function(e,t,n){var i=this,r=i.data,a=r[e],s=i.points,o=i.chart,l=function(){s&&s.length===r.length&&s.splice(e,1),r.splice(e,1),i.options.data.splice(e,1),i.updateParallelArrays(a||{series:i},"splice",e,1),a&&a.destroy(),i.isDirty=!0,i.isDirtyData=!0,t&&o.redraw()};C(n,o),t=y(t,!0),a?a.firePointEvent("remove",null,l):l()},remove:function(e,t,n,i){function r(){a.destroy(i),a.remove=null,s.isDirtyLegend=s.isDirtyBox=!0,s.linkSeries(),y(e,!0)&&s.redraw(t)}var a=this,s=a.chart;!1!==n?f(a,"remove",null,r):r()},update:function(t,n){t=e.cleanRecursively(t,this.userOptions),f(this,"update",{options:t});var i,r=this,a=r.chart,s=r.userOptions,o=r.initialType||r.type,l=t.type||s.type||a.options.chart.type,c=!(this.hasDerivedData||t.dataGrouping||l&&l!==this.type||void 0!==t.pointStart||t.pointInterval||t.pointIntervalUnit||t.keys),d=S[o].prototype,u=["group","markerGroup","dataLabelsGroup","transformGroup"],h=["eventOptions","navigatorSeries","baseSeries"],p=r.finishedAnimating&&{animation:!1},m={};for(i in c&&(h.push("data","isDirtyData","points","processedXData","processedYData","xIncrement","_hasPointMarkers","_hasPointLabels","mapMap","mapData","minY","maxY","minX","maxX"),!1!==t.visible&&h.push("area","graph"),r.parallelArrays.forEach(function(e){h.push(e+"Data")}),t.data&&this.setData(t.data,!1)),t=v(s,p,{index:void 0===s.index?r.index:s.index,pointStart:y(s.pointStart,r.xData[0])},!c&&{data:r.options.data},t),c&&t.data&&(t.data=r.options.data),(h=u.concat(h)).forEach(function(e){h[e]=r[e],delete r[e]}),r.remove(!1,null,!1,!0),d)r[i]=void 0;if(S[l||o]?g(r,S[l||o].prototype):e.error(17,!0,a),h.forEach(function(e){r[e]=h[e]}),r.init(a,t),c&&this.points){var b=r.options;!1===b.visible?(m.graphic=1,m.dataLabel=1):r._hasPointLabels||(l=b.marker,d=b.dataLabels,l&&(!1===l.enabled||"symbol"in l)&&(m.graphic=1),d&&!1===d.enabled&&(m.dataLabel=1)),this.points.forEach(function(e){e&&e.series&&(e.resolveColor(),Object.keys(m).length&&e.destroyElements(m),!1===b.showInLegend&&e.legendItem&&a.legend.destroyItem(e))},this)}t.zIndex!==s.zIndex&&u.forEach(function(e){r[e]&&r[e].attr({zIndex:t.zIndex})}),r.initialType=o,a.linkSeries(),f(this,"afterUpdate"),y(n,!0)&&a.redraw(!!c&&void 0)},setName:function(e){this.name=this.options.name=this.userOptions.name=e,this.chart.isDirtyLegend=!0}}),g(h.prototype,{update:function(e,t){var n=this.chart,i=e&&e.events||{};e=v(this.userOptions,e),n.options[this.coll].indexOf&&(n.options[this.coll][n.options[this.coll].indexOf(this.userOptions)]=e),l(n.options[this.coll].events,function(e,t){void 0===i[t]&&(i[t]=void 0)}),this.destroy(!0),this.init(n,g(e,{events:i})),n.isDirtyBox=!0,y(t,!0)&&n.redraw()},remove:function(e){for(var t=this.chart,n=this.coll,a=this.series,s=a.length;s--;)a[s]&&a[s].remove(!1);i(t.axes,this),i(t[n],this),r(t.options[n])?t.options[n].splice(this.options.index,1):delete t.options[n],t[n].forEach(function(e,t){e.options.index=e.userOptions.index=t}),this.destroy(),t.isDirtyBox=!0,y(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}})}),t(n,"parts/AreaSeries.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.objectEach,i=e.color,r=e.pick,a=e.Series;(t=e.seriesType)("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(e){var t,i=[],a=[],s=this.xAxis,o=this.yAxis,l=o.stacks[this.stackKey],c={},d=this.index,u=o.series,h=u.length,p=r(o.options.reversedStacks,!0)?1:-1;if(e=e||this.points,this.options.stacking){for(t=0;t<e.length;t++)e[t].leftNull=e[t].rightNull=null,c[e[t].x]=e[t];n(l,function(e,t){null!==e.total&&a.push(t)}),a.sort(function(e,t){return e-t});var m=u.map(function(e){return e.visible});a.forEach(function(e,n){var r,u,g=0;if(c[e]&&!c[e].isNull)i.push(c[e]),[-1,1].forEach(function(i){var s=1===i?"rightNull":"leftNull",o=0,g=l[a[n+i]];if(g)for(t=d;0<=t&&t<h;)(r=g.points[t])||(t===d?c[e][s]=!0:m[t]&&(u=l[e].points[t])&&(o-=u[1]-u[0])),t+=p;c[e][1===i?"rightCliff":"leftCliff"]=o});else{for(t=d;0<=t&&t<h;){if(r=l[e].points[t]){g=r[1];break}t+=p}g=o.translate(g,0,1,0,1),i.push({isNull:!0,plotX:s.translate(e,0,0,0,1),x:e,plotY:g,yBottom:g})}})}return i},getGraphPath:function(t){var n,i=a.prototype.getGraphPath,s=this.options,o=s.stacking,l=this.yAxis,c=[],d=[],u=this.index,h=l.stacks[this.stackKey],p=s.threshold,m=Math.round(l.getThreshold(s.threshold));s=e.pick(s.connectNulls,"percent"===o);var g=function(e,n,i){var r=t[e];e=o&&h[r.x].points[u];var a=r[i+"Null"]||0;if(i=r[i+"Cliff"]||0,r=!0,i||a){var s=(a?e[0]:e[1])+i,g=e[0]+i;r=!!a}else!o&&t[n]&&t[n].isNull&&(s=g=p);void 0!==s&&(d.push({plotX:v,plotY:null===s?m:l.getThreshold(s),isNull:r,isCliff:!0}),c.push({plotX:v,plotY:null===g?m:l.getThreshold(g),doCurve:!1}))};for(t=t||this.points,o&&(t=this.getStackPoints(t)),n=0;n<t.length;n++){var f=t[n].isNull,v=r(t[n].rectPlotX,t[n].plotX),y=r(t[n].yBottom,m);f&&!s||(s||g(n,n-1,"left"),f&&!o&&s||(d.push(t[n]),c.push({x:n,plotX:v,plotY:y})),s||g(n,n+1,"right"))}return n=i.call(this,d,!0,!0),c.reversed=!0,(f=i.call(this,c,!0,!0)).length&&(f[0]="L"),f=n.concat(f),i=i.call(this,d,!1,s),f.xMap=n.xMap,this.areaPath=f,i},drawGraph:function(){this.areaPath=[],a.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,n=this.options,s=[["area","highcharts-area",this.color,n.fillColor]];this.zones.forEach(function(t,i){s.push(["zone-area-"+i,"highcharts-area highcharts-zone-area-"+i+" "+t.className,t.color||e.color,t.fillColor||n.fillColor])}),s.forEach(function(a){var s=a[0],o=e[s],l=o?"animate":"attr",c={};o?(o.endX=e.preventGraphAnimation?null:t.xMap,o.animate({d:t})):(c.zIndex=0,(o=e[s]=e.chart.renderer.path(t).addClass(a[1]).add(e.group)).isArea=!0),e.chart.styledMode||(c.fill=r(a[3],i(a[2]).setOpacity(r(n.fillOpacity,.75)).get())),o[l](c),o.startX=t.xMap,o.shiftUnit=n.step?2:1})},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})}),t(n,"parts/SplineSeries.js",[n["parts/Globals.js"]],function(e){var t=e.pick;(e=e.seriesType)("spline","line",{},{getPointSpline:function(e,n,i){var r=n.plotX,a=n.plotY,s=e[i-1];if(i=e[i+1],s&&!s.isNull&&!1!==s.doCurve&&!n.isCliff&&i&&!i.isNull&&!1!==i.doCurve&&!n.isCliff){e=s.plotY;var o=i.plotX;i=i.plotY;var l=0,c=(1.5*r+s.plotX)/2.5,d=(1.5*a+e)/2.5,u=(1.5*a+i)/2.5;(o=(1.5*r+o)/2.5)!==c&&(l=(u-d)*(o-r)/(o-c)+a-u),u+=l,(d+=l)>e&&d>a?u=2*a-(d=Math.max(e,a)):d<e&&d<a&&(u=2*a-(d=Math.min(e,a))),u>i&&u>a?d=2*a-(u=Math.max(i,a)):u<i&&u<a&&(d=2*a-(u=Math.min(i,a))),n.rightContX=o,n.rightContY=u}return n=["C",t(s.rightContX,s.plotX),t(s.rightContY,s.plotY),t(c,r),t(d,a),r,a],s.rightContX=s.rightContY=null,n}})}),t(n,"parts/AreaSplineSeries.js",[n["parts/Globals.js"]],function(e){var t=e.seriesTypes.area.prototype;(0,e.seriesType)("areaspline","spline",e.defaultPlotOptions.area,{getStackPoints:t.getStackPoints,getGraphPath:t.getGraphPath,drawGraph:t.drawGraph,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})}),t(n,"parts/ColumnSeries.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isNumber,r=e.animObject,a=e.color,s=e.extend,o=e.merge,l=e.pick,c=e.Series;t=e.seriesType;var d=e.svg;t("column","line",{borderRadius:0,crisp:!0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){c.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&t.series.forEach(function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e=this,t=e.options,n=e.xAxis,i=e.yAxis,r=n.options.reversedStacks;r=n.reversed&&!r||!n.reversed&&r;var a,s={},o=0;!1===t.grouping?o=1:e.chart.series.forEach(function(t){var n=t.yAxis,r=t.options;if(t.type===e.type&&(t.visible||!e.chart.options.chart.ignoreHiddenSeries)&&i.len===n.len&&i.pos===n.pos){if(r.stacking){a=t.stackKey,void 0===s[a]&&(s[a]=o++);var l=s[a]}else!1!==r.grouping&&(l=o++);t.columnIndex=l}});var c=Math.min(Math.abs(n.transA)*(n.ordinalSlope||t.pointRange||n.closestPointRange||n.tickInterval||1),n.len),d=c*t.groupPadding,u=(c-2*d)/(o||1);return t=Math.min(t.maxPointWidth||n.len,l(t.pointWidth,u*(1-2*t.pointPadding))),e.columnMetrics={width:t,offset:(u-t)/2+(d+((e.columnIndex||0)+(r?1:0))*u-c/2)*(r?-1:1)},e.columnMetrics},crispCol:function(e,t,n,i){var r=this.chart,a=this.borderWidth,s=-(a%2?.5:0);return a=a%2?.5:1,r.inverted&&r.renderer.isVML&&(a+=1),this.options.crisp&&(n=Math.round(e+n)+s,n-=e=Math.round(e)+s),i=Math.round(t+i)+a,s=.5>=Math.abs(t)&&.5<i,i-=t=Math.round(t)+a,s&&i&&(--t,i+=1),{x:e,y:t,width:n,height:i}},translate:function(){var e=this,t=e.chart,i=e.options,r=e.dense=2>e.closestPointRange*e.xAxis.transA;r=e.borderWidth=l(i.borderWidth,r?0:1);var a=e.yAxis,s=i.threshold,o=e.translatedThreshold=a.getThreshold(s),d=l(i.minPointLength,5),u=e.getColumnMetrics(),h=u.width,p=e.barW=Math.max(h,1+2*r),m=e.pointXOffset=u.offset,g=e.dataMin,f=e.dataMax;t.inverted&&(o-=.5),i.pointPadding&&(p=Math.ceil(p)),c.prototype.translate.apply(e),e.points.forEach(function(i){var r=l(i.yBottom,o),c=999+Math.abs(r),u=h;c=Math.min(Math.max(-c,i.plotY),a.len+c);var v=i.plotX+m,y=p,b=Math.min(c,r),T=Math.max(c,r)-b;if(d&&Math.abs(T)<d){T=d;var S=!a.reversed&&!i.negative||a.reversed&&i.negative;i.y===s&&e.dataMax<=s&&a.min<s&&g!==f&&(S=!S),b=Math.abs(b-o)>d?r-d:o-(S?d:0)}n(i.options.pointWidth)&&(u=y=Math.ceil(i.options.pointWidth),v-=Math.round((u-h)/2)),i.barX=v,i.pointWidth=u,i.tooltipPos=t.inverted?[a.len+a.pos-t.plotLeft-c,e.xAxis.len-v-y/2,T]:[v+y/2,c+a.pos-t.plotTop,T],i.shapeType=e.pointClass.prototype.shapeType||"rect",i.shapeArgs=e.crispCol.apply(e,i.isNull?[v,o,y,0]:[v,b,y,T])})},getSymbol:e.noop,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(e,t){var n=this.options,i=this.pointAttrToOptions||{},r=i.stroke||"borderColor",s=i["stroke-width"]||"borderWidth",c=e&&e.color||this.color,d=e&&e[r]||n[r]||this.color||c,u=e&&e[s]||n[s]||this[s]||0;i=e&&e.options.dashStyle||n.dashStyle;var h=l(n.opacity,1);if(e&&this.zones.length){var p=e.getZone();c=e.options.color||p&&(p.color||e.nonZonedColor)||this.color,p&&(d=p.borderColor||d,i=p.dashStyle||i,u=p.borderWidth||u)}return t&&(t=(e=o(n.states[t],e.options.states&&e.options.states[t]||{})).brightness,c=e.color||void 0!==t&&a(c).brighten(e.brightness).get()||c,d=e[r]||d,u=e[s]||u,i=e.dashStyle||i,h=l(e.opacity,h)),r={fill:c,stroke:d,"stroke-width":u,opacity:h},i&&(r.dashstyle=i),r},drawPoints:function(){var e,t=this,n=this.chart,r=t.options,a=n.renderer,s=r.animationLimit||250;t.points.forEach(function(l){var c=l.graphic,d=c&&n.pointCount<s?"animate":"attr";i(l.plotY)&&null!==l.y?(e=l.shapeArgs,c&&c.element.nodeName!==l.shapeType&&(c=c.destroy()),c?c[d](o(e)):l.graphic=c=a[l.shapeType](e).add(l.group||t.group),r.borderRadius&&c[d]({r:r.borderRadius}),n.styledMode||c[d](t.pointAttribs(l,l.selected&&"select")).shadow(!1!==l.allowShadow&&r.shadow,null,r.stacking&&!r.borderRadius),c.addClass(l.getClassName(),!0)):c&&(l.graphic=c.destroy())})},animate:function(e){var t=this,n=this.yAxis,i=t.options,a=this.chart.inverted,o={},l=a?"translateX":"translateY";if(d)if(e)o.scaleY=.001,e=Math.min(n.pos+n.len,Math.max(n.pos,n.toPixels(i.threshold))),a?o.translateX=e-n.len:o.translateY=e,t.clipBox&&t.setClip(),t.group.attr(o);else{var c=t.group.attr(l);t.group.animate({scaleY:1},s(r(t.options.animation),{step:function(e,i){o[l]=c+i.pos*(n.pos-c),t.group.attr(o)}})),t.animate=null}},remove:function(){var e=this,t=e.chart;t.hasRendered&&t.series.forEach(function(t){t.type===e.type&&(t.isDirty=!0)}),c.prototype.remove.apply(e,arguments)}})}),t(n,"parts/BarSeries.js",[n["parts/Globals.js"]],function(e){(e=e.seriesType)("bar","column",null,{inverted:!0})}),t(n,"parts/ScatterSeries.js",[n["parts/Globals.js"]],function(e){var t=e.Series;(0,e.seriesType)("scatter","line",{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 10px"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,drawGraph:function(){this.options.lineWidth&&t.prototype.drawGraph.call(this)},applyJitter:function(){var e=this,t=this.options.jitter,n=this.points.length;t&&this.points.forEach(function(i,r){["x","y"].forEach(function(a,s){var o="plot"+a.toUpperCase();if(t[a]&&!i.isNull){var l=e[a+"Axis"],c=t[a]*l.transA;if(l&&!l.isLog){var d=Math.max(0,i[o]-c);l=Math.min(l.len,i[o]+c),s=1e4*Math.sin(r+s*n),i[o]=d+(l-d)*(s-Math.floor(s)),"x"===a&&(i.clientX=i.plotX)}}})})}}),e.addEvent(t,"afterTranslate",function(){this.applyJitter&&this.applyJitter()})}),t(n,"mixins/centered-series.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.isNumber,i=e.deg2rad,r=e.pick,a=e.relativeLength;e.CenteredSeriesMixin={getCenter:function(){var e=this.options,t=this.chart,n=2*(e.slicedOffset||0),i=t.plotWidth-2*n;t=t.plotHeight-2*n;var s=e.center;s=[r(s[0],"50%"),r(s[1],"50%"),e.size||"100%",e.innerSize||0];var o,l=Math.min(i,t);for(o=0;4>o;++o){var c=s[o];e=2>o||2===o&&/%$/.test(c),s[o]=a(c,[i,t,l,s[2]][o])+(e?n:0)}return s[3]>s[2]&&(s[3]=s[2]),s},getStartAndEndRadians:function(e,t){return e=n(e)?e:0,t=n(t)&&t>e&&360>t-e?t:e+360,{start:i*(e+-90),end:i*(t+-90)}}}}),t(n,"parts/PieSeries.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isNumber,r=e.addEvent,a=(t=e.CenteredSeriesMixin).getStartAndEndRadians,s=e.merge,o=e.noop,l=e.pick,c=e.Point,d=e.Series,u=e.seriesType,h=e.fireEvent,p=e.setAnimation;u("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0,connectorShape:"fixedOffset",crookDistance:"70%"},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:.1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:e.seriesTypes.column.prototype.pointAttribs,animate:function(e){var t=this,n=t.points,i=t.startAngleRad;e||(n.forEach(function(e){var n=e.graphic,r=e.shapeArgs;n&&(n.attr({r:e.startR||t.center[3]/2,start:i,end:i}),n.animate({r:r.r,start:r.start,end:r.end},t.options.animation))}),t.animate=null)},hasData:function(){return!!this.processedXData.length},updateTotals:function(){var e,t=0,n=this.points,i=n.length,r=this.options.ignoreHiddenPoint;for(e=0;e<i;e++){var a=n[e];t+=r&&!a.visible||a.isNull?0:a.y}for(this.total=t,e=0;e<i;e++)(a=n[e]).percentage=0<t&&(a.visible||!r)?a.y/t*100:0,a.total=t},generatePoints:function(){d.prototype.generatePoints.call(this),this.updateTotals()},getX:function(e,t,n){var i=this.center,r=this.radii?this.radii[n.index]:i[2]/2;return i[0]+(t?-1:1)*Math.cos(Math.asin(Math.max(Math.min((e-i[1])/(r+n.labelDistance),1),-1)))*(r+n.labelDistance)+(0<n.labelDistance?(t?-1:1)*this.options.dataLabels.padding:0)},translate:function(t){this.generatePoints();var n=0,i=this.options,r=i.slicedOffset,s=r+(i.borderWidth||0),o=a(i.startAngle,i.endAngle),c=this.startAngleRad=o.start;o=(this.endAngleRad=o.end)-c;var d=this.points,u=i.dataLabels.distance;i=i.ignoreHiddenPoint;var p,m=d.length;for(t||(this.center=t=this.getCenter()),p=0;p<m;p++){var g=d[p],f=c+n*o;i&&!g.visible||(n+=g.percentage/100);var v=c+n*o;g.shapeType="arc",g.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1e3*f)/1e3,end:Math.round(1e3*v)/1e3},g.labelDistance=l(g.options.dataLabels&&g.options.dataLabels.distance,u),g.labelDistance=e.relativeLength(g.labelDistance,g.shapeArgs.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,g.labelDistance),(v=(v+f)/2)>1.5*Math.PI?v-=2*Math.PI:v<-Math.PI/2&&(v+=2*Math.PI),g.slicedTranslation={translateX:Math.round(Math.cos(v)*r),translateY:Math.round(Math.sin(v)*r)};var y=Math.cos(v)*t[2]/2,b=Math.sin(v)*t[2]/2;g.tooltipPos=[t[0]+.7*y,t[1]+.7*b],g.half=v<-Math.PI/2||v>Math.PI/2?1:0,g.angle=v,f=Math.min(s,g.labelDistance/5),g.labelPosition={natural:{x:t[0]+y+Math.cos(v)*g.labelDistance,y:t[1]+b+Math.sin(v)*g.labelDistance},final:{},alignment:0>g.labelDistance?"center":g.half?"right":"left",connectorPosition:{breakAt:{x:t[0]+y+Math.cos(v)*f,y:t[1]+b+Math.sin(v)*f},touchingSliceAt:{x:t[0]+y,y:t[1]+b}}}}h(this,"afterTranslate")},drawEmpty:function(){var e=this.options;if(0===this.total){var t=this.center[0],n=this.center[1];this.graph||(this.graph=this.chart.renderer.circle(t,n,0).addClass("highcharts-graph").add(this.group)),this.graph.animate({"stroke-width":e.borderWidth,cx:t,cy:n,r:this.center[2]/2,fill:e.fillColor||"none",stroke:e.color||"#cccccc"})}else this.graph&&(this.graph=this.graph.destroy())},redrawPoints:function(){var e,t,n,i,r=this,a=r.chart,o=a.renderer,l=r.options.shadow;this.drawEmpty(),!l||r.shadowGroup||a.styledMode||(r.shadowGroup=o.g("shadow").attr({zIndex:-1}).add(r.group)),r.points.forEach(function(c){var d={};if(t=c.graphic,!c.isNull&&t){if(i=c.shapeArgs,e=c.getTranslate(),!a.styledMode){var u=c.shadowGroup;l&&!u&&(u=c.shadowGroup=o.g("shadow").add(r.shadowGroup)),u&&u.attr(e),n=r.pointAttribs(c,c.selected&&"select")}c.delayedRendering?(t.setRadialReference(r.center).attr(i).attr(e),a.styledMode||t.attr(n).attr({"stroke-linejoin":"round"}).shadow(l,u),c.delayedRendering=!1):(t.setRadialReference(r.center),a.styledMode||s(!0,d,n),s(!0,d,i,e),t.animate(d)),t.attr({visibility:c.visible?"inherit":"hidden"}),t.addClass(c.getClassName())}else t&&(c.graphic=t.destroy())})},drawPoints:function(){var e=this.chart.renderer;this.points.forEach(function(t){t.graphic||(t.graphic=e[t.shapeType](t.shapeArgs).add(t.series.group),t.delayedRendering=!0)})},searchPoint:o,sortByAngle:function(e,t){e.sort(function(e,n){return void 0!==e.angle&&(n.angle-e.angle)*t})},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getCenter:t.getCenter,getSymbol:o,drawGraph:null},{init:function(){c.prototype.init.apply(this,arguments);var e=this;e.name=l(e.name,"Slice");var t=function(t){e.slice("select"===t.type)};return r(e,"select",t),r(e,"unselect",t),e},isValid:function(){return i(this.y)&&0<=this.y},setVisible:function(e,t){var n=this,i=n.series,r=i.chart,a=i.options.ignoreHiddenPoint;t=l(t,a),e!==n.visible&&(n.visible=n.options.visible=e=void 0===e?!n.visible:e,i.options.data[i.data.indexOf(n)]=n.options,["graphic","dataLabel","connector","shadowGroup"].forEach(function(t){n[t]&&n[t][e?"show":"hide"](!0)}),n.legendItem&&r.legend.colorizeItem(n,e),e||"hover"!==n.state||n.setState(""),a&&(i.isDirty=!0),t&&r.redraw())},slice:function(e,t,i){var r=this.series;p(i,r.chart),l(t,!0),this.sliced=this.options.sliced=n(e)?e:!this.sliced,r.options.data[r.data.indexOf(this)]=this.options,this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(e){var t=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(t.x,t.y,t.r+e,t.r+e,{innerR:t.r-1,start:t.start,end:t.end})},connectorShapes:{fixedOffset:function(e,t,n){var i=t.breakAt;return t=t.touchingSliceAt,["M",e.x,e.y].concat(n.softConnector?["C",e.x+("left"===e.alignment?-5:5),e.y,2*i.x-t.x,2*i.y-t.y,i.x,i.y]:["L",i.x,i.y]).concat(["L",t.x,t.y])},straight:function(e,t){return t=t.touchingSliceAt,["M",e.x,e.y,"L",t.x,t.y]},crookedLine:function(t,n,i){n=n.touchingSliceAt;var r=this.series,a=r.center[0],s=r.chart.plotWidth,o=r.chart.plotLeft;r=t.alignment;var l=this.shapeArgs.r;return i=e.relativeLength(i.crookDistance,1),a=["L",i="left"===r?a+l+(s+o-a-l)*(1-i):o+(a-l)*i,t.y],("left"===r?i>t.x||i<n.x:i<t.x||i>n.x)&&(a=[]),["M",t.x,t.y].concat(a).concat(["L",n.x,n.y])}},getConnectorPath:function(){var e=this.labelPosition,t=this.series.options.dataLabels,n=t.connectorShape,i=this.connectorShapes;return i[n]&&(n=i[n]),n.call(this,{x:e.final.x,y:e.final.y,alignment:e.alignment},e.connectorPosition,t)}})}),t(n,"parts/DataLabels.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isArray,r=t.objectEach,a=t.splat,s=e.arrayMax,o=e.extend,l=e.format,c=e.merge;t=e.noop;var d=e.pick,u=e.relativeLength,h=e.Series,p=e.seriesTypes,m=e.stableSort;e.distribute=function(t,n,i){function r(e,t){return e.target-t.target}var a,s=!0,o=t,l=[],c=0,u=o.reducedLen||n;for(a=t.length;a--;)c+=t[a].size;if(c>u){for(m(t,function(e,t){return(t.rank||0)-(e.rank||0)}),c=a=0;c<=u;)c+=t[a].size,a++;l=t.splice(a-1,t.length)}for(m(t,r),t=t.map(function(e){return{size:e.size,targets:[e.target],align:d(e.align,.5)}});s;){for(a=t.length;a--;)s=t[a],c=(Math.min.apply(0,s.targets)+Math.max.apply(0,s.targets))/2,s.pos=Math.min(Math.max(0,c-s.size*s.align),n-s.size);for(a=t.length,s=!1;a--;)0<a&&t[a-1].pos+t[a-1].size>t[a].pos&&(t[a-1].size+=t[a].size,t[a-1].targets=t[a-1].targets.concat(t[a].targets),t[a-1].align=.5,t[a-1].pos+t[a-1].size>n&&(t[a-1].pos=n-t[a-1].size),t.splice(a,1),s=!0)}o.push.apply(o,l),a=0,t.some(function(t){var r=0;if(t.targets.some(function(){if(o[a].pos=t.pos+r,Math.abs(o[a].pos-o[a].target)>i)return o.slice(0,a+1).forEach(function(e){delete e.pos}),o.reducedLen=(o.reducedLen||n)-.1*n,o.reducedLen>.1*n&&e.distribute(o,n,i),!0;r+=o[a].size,a++}))return!0}),m(o,r)},h.prototype.drawDataLabels=function(){function t(e,t){var n,r=[];if(i(e)&&!i(t))r=e.map(function(e){return c(e,t)});else if(i(t)&&!i(e))r=t.map(function(t){return c(e,t)});else if(i(e)||i(t))for(n=Math.max(e.length,t.length);n--;)r[n]=c(e[n],t[n]);else r=c(e,t);return r}var s=this,o=s.chart,u=s.options,h=u.dataLabels,p=s.points,m=s.hasRendered||0,g=e.animObject(u.animation).duration,f=Math.min(g,200),v=!o.renderer.forExport&&d(h.defer,0<f),y=o.renderer;if(h=t(t(o.options.plotOptions&&o.options.plotOptions.series&&o.options.plotOptions.series.dataLabels,o.options.plotOptions&&o.options.plotOptions[s.type]&&o.options.plotOptions[s.type].dataLabels),h),e.fireEvent(this,"drawDataLabels"),i(h)||h.enabled||s._hasPointLabels){var b=s.plotGroup("dataLabelsGroup","data-labels",v&&!m?"hidden":"inherit",h.zIndex||6);v&&(b.attr({opacity:+m}),m||setTimeout(function(){var e=s.dataLabelsGroup;e&&(s.visible&&b.show(!0),e[u.animation?"animate":"attr"]({opacity:1},{duration:f}))},g-f)),p.forEach(function(e){a(t(h,e.dlOptions||e.options&&e.options.dataLabels)).forEach(function(t,i){var a=t.enabled&&(!e.isNull||e.dataLabelOnNull)&&function(e,t){var n=t.filter;return!n||(t=n.operator,e=e[n.property],n=n.value,">"===t&&e>n||"<"===t&&e<n||">="===t&&e>=n||"<="===t&&e<=n||"=="===t&&e==n||"==="===t&&e===n)}(e,t),c=e.dataLabels?e.dataLabels[i]:e.dataLabel,h=e.connectors?e.connectors[i]:e.connector,p=d(t.distance,e.labelDistance),m=!c;if(a){var g=e.getLabelConfig(),f=d(t[e.formatPrefix+"Format"],t.format);g=n(f)?l(f,g,o.time):(t[e.formatPrefix+"Formatter"]||t.formatter).call(g,t),f=t.style;var v=t.rotation;o.styledMode||(f.color=d(t.color,f.color,s.color,"#000000"),"contrast"===f.color&&(e.contrastColor=y.getContrast(e.color||s.color),f.color=!n(p)&&t.inside||0>p||u.stacking?e.contrastColor:"#000000"),u.cursor&&(f.cursor=u.cursor));var T={r:t.borderRadius||0,rotation:v,padding:t.padding,zIndex:1};o.styledMode||(T.fill=t.backgroundColor,T.stroke=t.borderColor,T["stroke-width"]=t.borderWidth),r(T,function(e,t){void 0===e&&delete T[t]})}!c||a&&n(g)?a&&n(g)&&(c?T.text=g:(e.dataLabels=e.dataLabels||[],c=e.dataLabels[i]=v?y.text(g,0,-9999).addClass("highcharts-data-label"):y.label(g,0,-9999,t.shape,null,null,t.useHTML,null,"data-label"),i||(e.dataLabel=c),c.addClass(" highcharts-data-label-color-"+e.colorIndex+" "+(t.className||"")+(t.useHTML?" highcharts-tracker":""))),c.options=t,c.attr(T),o.styledMode||c.css(f).shadow(t.shadow),c.added||c.add(b),t.textPath&&!t.useHTML&&c.setTextPath(e.getDataLabelPath&&e.getDataLabelPath(c)||e.graphic,t.textPath),s.alignDataLabel(e,c,t,null,m)):(e.dataLabel=e.dataLabel&&e.dataLabel.destroy(),e.dataLabels&&(1===e.dataLabels.length?delete e.dataLabels:delete e.dataLabels[i]),i||delete e.dataLabel,h&&(e.connector=e.connector.destroy(),e.connectors&&(1===e.connectors.length?delete e.connectors:delete e.connectors[i])))})})}e.fireEvent(this,"afterDrawDataLabels")},h.prototype.alignDataLabel=function(e,t,n,i,r){var a=this.chart,s=this.isCartesian&&a.inverted,l=d(e.dlBox&&e.dlBox.centerX,e.plotX,-9999),c=d(e.plotY,-9999),u=t.getBBox(),h=n.rotation,p=n.align,m=this.visible&&(e.series.forceDL||a.isInsidePlot(l,Math.round(c),s)||i&&a.isInsidePlot(l,s?i.x+1:i.y+i.height-1,s)),g="justify"===d(n.overflow,"justify");if(m){var f=a.renderer.fontMetrics(a.styledMode?void 0:n.style.fontSize,t).b;i=o({x:s?this.yAxis.len-c:l,y:Math.round(s?this.xAxis.len-l:c),width:0,height:0},i),o(n,{width:u.width,height:u.height}),h?(g=!1,l=a.renderer.rotCorr(f,h),l={x:i.x+n.x+i.width/2+l.x,y:i.y+n.y+{top:0,middle:.5,bottom:1}[n.verticalAlign]*i.height},t[r?"attr":"animate"](l).attr({align:p}),c=180<(c=(h+720)%360)&&360>c,"left"===p?l.y-=c?u.height:0:"center"===p?(l.x-=u.width/2,l.y-=u.height/2):"right"===p&&(l.x-=u.width,l.y-=c?0:u.height),t.placed=!0,t.alignAttr=l):(t.align(n,null,i),l=t.alignAttr),g&&0<=i.height?this.justifyDataLabel(t,n,l,u,i,r):d(n.crop,!0)&&(m=a.isInsidePlot(l.x,l.y)&&a.isInsidePlot(l.x+u.width,l.y+u.height)),n.shape&&!h&&t[r?"attr":"animate"]({anchorX:s?a.plotWidth-e.plotY:e.plotX,anchorY:s?a.plotHeight-e.plotX:e.plotY})}m||(t.hide(!0),t.placed=!1)},h.prototype.justifyDataLabel=function(e,t,n,i,r,a){var s=this.chart,o=t.align,l=t.verticalAlign,c=e.box?0:e.padding||0,d=n.x+c;if(0>d){"right"===o?(t.align="left",t.inside=!0):t.x=-d;var u=!0}return(d=n.x+i.width-c)>s.plotWidth&&("left"===o?(t.align="right",t.inside=!0):t.x=s.plotWidth-d,u=!0),0>(d=n.y+c)&&("bottom"===l?(t.verticalAlign="top",t.inside=!0):t.y=-d,u=!0),(d=n.y+i.height-c)>s.plotHeight&&("top"===l?(t.verticalAlign="bottom",t.inside=!0):t.y=s.plotHeight-d,u=!0),u&&(e.placed=!a,e.align(t,null,r)),u},p.pie&&(p.pie.prototype.dataLabelPositioners={radialDistributionY:function(e){return e.top+e.distributeBox.pos},radialDistributionX:function(e,t,n,i){return e.getX(n<t.top+2||n>t.bottom-2?i:n,t.half,t)},justify:function(e,t,n){return n[0]+(e.half?-1:1)*(t+e.labelDistance)},alignToPlotEdges:function(e,t,n,i){return e=e.getBBox().width,t?e+i:n-e-i},alignToConnectors:function(e,t,n,i){var r,a=0;return e.forEach(function(e){(r=e.dataLabel.getBBox().width)>a&&(a=r)}),t?a+i:n-a-i}},p.pie.prototype.drawDataLabels=function(){var t,i,r,a,o,l,u,p,m,g,f,v,y=this,b=y.data,T=y.chart,S=y.options.dataLabels,C=S.connectorPadding,I=T.plotWidth,_=T.plotHeight,M=T.plotLeft,E=Math.round(T.chartWidth/3),w=y.center,A=w[2]/2,D=w[1],O=[[],[]],k=[0,0,0,0],R=y.dataLabelPositioners;y.visible&&(S.enabled||y._hasPointLabels)&&(b.forEach(function(e){e.dataLabel&&e.visible&&e.dataLabel.shortened&&(e.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),e.dataLabel.shortened=!1)}),h.prototype.drawDataLabels.apply(y),b.forEach(function(e){e.dataLabel&&(e.visible?(O[e.half].push(e),e.dataLabel._pos=null,!n(S.style.width)&&!n(e.options.dataLabels&&e.options.dataLabels.style&&e.options.dataLabels.style.width)&&e.dataLabel.getBBox().width>E&&(e.dataLabel.css({width:.7*E}),e.dataLabel.shortened=!0)):(e.dataLabel=e.dataLabel.destroy(),e.dataLabels&&1===e.dataLabels.length&&delete e.dataLabels))}),O.forEach(function(i,r){var s,c=i.length,h=[];if(c){if(y.sortByAngle(i,r-.5),0<y.maxLabelDistance){var v=Math.max(0,D-A-y.maxLabelDistance),b=Math.min(D+A+y.maxLabelDistance,T.plotHeight);i.forEach(function(e){0<e.labelDistance&&e.dataLabel&&(e.top=Math.max(0,D-A-e.labelDistance),e.bottom=Math.min(D+A+e.labelDistance,T.plotHeight),s=e.dataLabel.getBBox().height||21,e.distributeBox={target:e.labelPosition.natural.y-e.top+s/2,size:s,rank:e.y},h.push(e.distributeBox))}),v=b+s-v,e.distribute(h,v,v/5)}for(f=0;f<c;f++){if(t=i[f],l=t.labelPosition,a=t.dataLabel,g=!1===t.visible?"hidden":"inherit",m=v=l.natural.y,h&&n(t.distributeBox)&&(void 0===t.distributeBox.pos?g="hidden":(u=t.distributeBox.size,m=R.radialDistributionY(t))),delete t.positionIndex,S.justify)p=R.justify(t,A,w);else switch(S.alignTo){case"connectors":p=R.alignToConnectors(i,r,I,M);break;case"plotEdges":p=R.alignToPlotEdges(a,r,I,M);break;default:p=R.radialDistributionX(y,t,m,v)}a._attr={visibility:g,align:l.alignment},a._pos={x:p+S.x+({left:C,right:-C}[l.alignment]||0),y:m+S.y-10},l.final.x=p,l.final.y=m,d(S.crop,!0)&&(o=a.getBBox().width,v=null,p-o<C&&1===r?(v=Math.round(o-p+C),k[3]=Math.max(v,k[3])):p+o>I-C&&0===r&&(v=Math.round(p+o-I+C),k[1]=Math.max(v,k[1])),0>m-u/2?k[0]=Math.max(Math.round(u/2-m),k[0]):m+u/2>_&&(k[2]=Math.max(Math.round(m+u/2-_),k[2])),a.sideOverflow=v)}}}),0===s(k)||this.verifyDataLabelOverflow(k))&&(this.placeDataLabels(),this.points.forEach(function(e){var t;(v=c(S,e.options.dataLabels),i=d(v.connectorWidth,1))&&(r=e.connector,(a=e.dataLabel)&&a._pos&&e.visible&&0<e.labelDistance?(g=a._attr.visibility,(t=!r)&&(e.connector=r=T.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+e.colorIndex+(e.className?" "+e.className:"")).add(y.dataLabelsGroup),T.styledMode||r.attr({"stroke-width":i,stroke:v.connectorColor||e.color||"#666666"})),r[t?"attr":"animate"]({d:e.getConnectorPath()}),r.attr("visibility",g)):r&&(e.connector=r.destroy()))}))},p.pie.prototype.placeDataLabels=function(){this.points.forEach(function(e){var t,n=e.dataLabel;n&&e.visible&&((t=n._pos)?(n.sideOverflow&&(n._attr.width=Math.max(n.getBBox().width-n.sideOverflow,0),n.css({width:n._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),n.shortened=!0),n.attr(n._attr),n[n.moved?"animate":"attr"](t),n.moved=!0):n&&n.attr({y:-9999})),delete e.distributeBox},this)},p.pie.prototype.alignDataLabel=t,p.pie.prototype.verifyDataLabelOverflow=function(e){var t=this.center,n=this.options,i=n.center,r=n.minSize||80,a=null!==n.size;if(!a){if(null!==i[0])var s=Math.max(t[2]-Math.max(e[1],e[3]),r);else s=Math.max(t[2]-e[1]-e[3],r),t[0]+=(e[3]-e[1])/2;null!==i[1]?s=Math.max(Math.min(s,t[2]-Math.max(e[0],e[2])),r):(s=Math.max(Math.min(s,t[2]-e[0]-e[2]),r),t[1]+=(e[0]-e[2])/2),s<t[2]?(t[2]=s,t[3]=Math.min(u(n.innerSize||0,s),s),this.translate(t),this.drawDataLabels&&this.drawDataLabels()):a=!0}return a}),p.column&&(p.column.prototype.alignDataLabel=function(e,t,n,i,r){var a=this.chart.inverted,s=e.series,o=e.dlBox||e.shapeArgs,l=d(e.below,e.plotY>d(this.translatedThreshold,s.yAxis.len)),u=d(n.inside,!!this.options.stacking);o&&(0>(i=c(o)).y&&(i.height+=i.y,i.y=0),0<(o=i.y+i.height-s.yAxis.len)&&(i.height-=o),a&&(i={x:s.yAxis.len-i.y-i.height,y:s.xAxis.len-i.x-i.width,width:i.height,height:i.width}),u||(a?(i.x+=l?0:i.width,i.width=0):(i.y+=l?i.height:0,i.height=0))),n.align=d(n.align,!a||u?"center":l?"right":"left"),n.verticalAlign=d(n.verticalAlign,a||u?"middle":l?"top":"bottom"),h.prototype.alignDataLabel.call(this,e,t,n,i,r),n.inside&&e.contrastColor&&t.css({color:e.contrastColor})})}),t(n,"modules/overlapping-datalabels.src.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.isArray,i=t.objectEach;t=e.Chart;var r=e.pick,a=e.addEvent,s=e.fireEvent;a(t,"render",function(){var e=[];(this.labelCollectors||[]).forEach(function(t){e=e.concat(t())}),(this.yAxis||[]).forEach(function(t){t.options.stackLabels&&!t.options.stackLabels.allowOverlap&&i(t.stacks,function(t){i(t,function(t){e.push(t.label)})})}),(this.series||[]).forEach(function(t){var i=t.options.dataLabels;t.visible&&(!1!==i.enabled||t._hasPointLabels)&&t.points.forEach(function(t){t.visible&&(n(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[]).forEach(function(n){var i=n.options;n.labelrank=r(i.labelrank,t.labelrank,t.shapeArgs&&t.shapeArgs.height),i.allowOverlap||e.push(n)})})}),this.hideOverlappingLabels(e)}),t.prototype.hideOverlappingLabels=function(e){var t,n,i,r=this,a=e.length,o=r.renderer,l=function(e){var t=e.box?0:e.padding||0,n=0;if(e&&(!e.alignAttr||e.placed)){var i=e.alignAttr||{x:e.attr("x"),y:e.attr("y")},r=e.parentGroup;return e.width||(n=e.getBBox(),e.width=n.width,e.height=n.height,n=o.fontMetrics(null,e.element).h),{x:i.x+(r.translateX||0)+t,y:i.y+(r.translateY||0)+t-n,width:e.width-2*t,height:e.height-2*t}}};for(n=0;n<a;n++)(t=e[n])&&(t.oldOpacity=t.opacity,t.newOpacity=1,t.absoluteBox=l(t));for(e.sort(function(e,t){return(t.labelrank||0)-(e.labelrank||0)}),n=0;n<a;n++){var c=(l=e[n])&&l.absoluteBox;for(t=n+1;t<a;++t){var d=(i=e[t])&&i.absoluteBox;!c||!d||l===i||0===l.newOpacity||0===i.newOpacity||d.x>c.x+c.width||d.x+d.width<c.x||d.y>c.y+c.height||d.y+d.height<c.y||((l.labelrank<i.labelrank?l:i).newOpacity=0)}}e.forEach(function(e){var t;if(e){var n=e.newOpacity;e.oldOpacity!==n&&(e.alignAttr&&e.placed?(n?e.show(!0):t=function(){e.hide(!0),e.placed=!1},e.alignAttr.opacity=n,e[e.isOld?"animate":"attr"](e.alignAttr,null,t),s(r,"afterHideOverlappingLabels")):e.attr({opacity:n})),e.isOld=!0}})}}),t(n,"parts/Interaction.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isArray,r=t.isObject,a=t.objectEach,s=e.addEvent;t=e.Chart;var o=e.createElement,l=e.css,c=e.defaultOptions,d=e.defaultPlotOptions,u=e.extend,h=e.fireEvent,p=e.hasTouch,m=e.Legend,g=e.merge,f=e.pick,v=e.Point,y=e.Series,b=e.seriesTypes,T=e.svg,S=e.TrackerMixin={drawTrackerPoint:function(){var e,t=this,n=t.chart,r=n.pointer,a=function(e){var t=r.getPointFromEvent(e);void 0!==t&&(r.isDirectTouch=!0,t.onMouseOver(e))};t.points.forEach(function(t){e=i(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[],t.graphic&&(t.graphic.element.point=t),e.forEach(function(e){e.div?e.div.point=t:e.element.point=t})}),t._hasTracking||(t.trackerGroups.forEach(function(e){t[e]&&(t[e].addClass("highcharts-tracker").on("mouseover",a).on("mouseout",function(e){r.onTrackerMouseOut(e)}),p&&t[e].on("touchstart",a),!n.styledMode&&t.options.cursor&&t[e].css(l).css({cursor:t.options.cursor}))}),t._hasTracking=!0),h(this,"afterDrawTracker")},drawTrackerGraph:function(){var e,t=this,n=t.options,i=n.trackByArea,r=[].concat(i?t.areaPath:t.graphPath),a=r.length,s=t.chart,o=s.pointer,l=s.renderer,c=s.options.tooltip.snap,d=t.tracker,u=function(){s.hoverSeries!==t&&t.onMouseOver()},m="rgba(192,192,192,"+(T?1e-4:.002)+")";if(a&&!i)for(e=a+1;e--;)"M"===r[e]&&r.splice(e+1,0,r[e+1]-c,r[e+2],"L"),(e&&"M"===r[e]||e===a)&&r.splice(e,0,"L",r[e-2]+c,r[e-1]);d?d.attr({d:r}):t.graph&&(t.tracker=l.path(r).attr({visibility:t.visible?"visible":"hidden",zIndex:2}).addClass(i?"highcharts-tracker-area":"highcharts-tracker-line").add(t.group),s.styledMode||t.tracker.attr({"stroke-linejoin":"round",stroke:m,fill:i?m:"none","stroke-width":t.graph.strokeWidth()+(i?0:2*c)}),[t.tracker,t.markerGroup].forEach(function(e){e.addClass("highcharts-tracker").on("mouseover",u).on("mouseout",function(e){o.onTrackerMouseOut(e)}),n.cursor&&!s.styledMode&&e.css({cursor:n.cursor}),p&&e.on("touchstart",u)})),h(this,"afterDrawTracker")}};b.column&&(b.column.prototype.drawTracker=S.drawTrackerPoint),b.pie&&(b.pie.prototype.drawTracker=S.drawTrackerPoint),b.scatter&&(b.scatter.prototype.drawTracker=S.drawTrackerPoint),u(m.prototype,{setItemEvents:function(e,t,n){var i=this,r=i.chart.renderer.boxWrapper,a=e instanceof v,s="highcharts-legend-"+(a?"point":"series")+"-active",o=i.chart.styledMode;(n?t:e.legendGroup).on("mouseover",function(){e.visible&&i.allItems.forEach(function(t){e!==t&&t.setState("inactive",!a)}),e.setState("hover"),e.visible&&r.addClass(s),o||t.css(i.options.itemHoverStyle)}).on("mouseout",function(){i.chart.styledMode||t.css(g(e.visible?i.itemStyle:i.itemHiddenStyle)),i.allItems.forEach(function(t){e!==t&&t.setState("",!a)}),r.removeClass(s),e.setState()}).on("click",function(t){var n=function(){e.setVisible&&e.setVisible(),i.allItems.forEach(function(t){e!==t&&t.setState(e.visible?"inactive":"",!a)})};r.removeClass(s),t={browserEvent:t},e.firePointEvent?e.firePointEvent("legendItemClick",t,n):h(e,"legendItemClick",t,n)})},createCheckboxForItem:function(e){e.checkbox=o("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),s(e.checkbox,"click",function(t){h(e.series||e,"checkboxClick",{checked:t.target.checked,item:e},function(){e.select()})})}}),u(t.prototype,{showResetZoom:function(){function e(){t.zoomOut()}var t=this,n=c.lang,i=t.options.chart.resetZoomButton,r=i.theme,a=r.states,s="chart"===i.relativeTo||"spaceBox"===i.relativeTo?null:"plotBox";h(this,"beforeShowResetZoom",null,function(){t.resetZoomButton=t.renderer.button(n.resetZoom,null,null,e,r,a&&a.hover).attr({align:i.position.align,title:n.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,s)}),h(this,"afterShowResetZoom")},zoomOut:function(){h(this,"selection",{resetSelection:!0},this.zoom)},zoom:function(e){var t,i=this,a=i.pointer,s=!1,o=i.inverted?a.mouseDownX:a.mouseDownY;!e||e.resetSelection?(i.axes.forEach(function(e){t=e.zoom()}),a.initiated=!1):e.xAxis.concat(e.yAxis).forEach(function(e){var r=e.axis,l=i.inverted?r.left:r.top,c=i.inverted?l+r.width:l+r.height,d=r.isXAxis,u=!1;(!d&&o>=l&&o<=c||d||!n(o))&&(u=!0),a[d?"zoomX":"zoomY"]&&u&&(t=r.zoom(e.min,e.max),r.displayBtn&&(s=!0))});var l=i.resetZoomButton;s&&!l?i.showResetZoom():!s&&r(l)&&(i.resetZoomButton=l.destroy()),t&&i.redraw(f(i.options.chart.animation,e&&e.animation,100>i.pointCount))},pan:function(e,t){var n,i=this,r=i.hoverPoints;h(this,"pan",{originalEvent:e},function(){r&&r.forEach(function(e){e.setState()}),("xy"===t?[1,0]:[1]).forEach(function(t){var r=(t=i[t?"xAxis":"yAxis"][0]).horiz,a=e[r?"chartX":"chartY"],s=i[r=r?"mouseDownX":"mouseDownY"],o=(t.pointRange||0)/2,l=t.reversed&&!i.inverted||!t.reversed&&i.inverted?-1:1,c=t.getExtremes(),d=t.toValue(s-a,!0)+o*l,u=(l=t.toValue(s+t.len-a,!0)-o*l)<d;s=u?l:d,d=u?d:l,0<(u=(l=Math.min(c.dataMin,o?c.min:t.toValue(t.toPixels(c.min)-t.minPixelPadding)))-s)&&(d+=u,s=l),0<(u=d-(o=Math.max(c.dataMax,o?c.max:t.toValue(t.toPixels(c.max)+t.minPixelPadding))))&&(d=o,s-=u),t.series.length&&s!==c.min&&d!==c.max&&(t.setExtremes(s,d,!1,!1,{trigger:"pan"}),n=!0),i[r]=a}),n&&i.redraw(!1),l(i.container,{cursor:"move"})})}}),u(v.prototype,{select:function(e,t){var n=this,i=n.series,r=i.chart;this.selectedStaging=e=f(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,i.options.data[i.data.indexOf(n)]=n.options,n.setState(e&&"select"),t||r.getSelectedPoints().forEach(function(e){var t=e.series;e.selected&&e!==n&&(e.selected=e.options.selected=!1,t.options.data[t.data.indexOf(e)]=e.options,e.setState(r.hoverPoints&&t.options.inactiveOtherPoints?"inactive":""),e.firePointEvent("unselect"))})}),delete this.selectedStaging},onMouseOver:function(e){var t=this.series.chart,n=t.pointer;e=e?n.normalize(e):n.getChartCoordinatesFromPoint(this,t.inverted),n.runPointActions(e,this)},onMouseOut:function(){var e=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(e.hoverPoints||[]).forEach(function(e){e.setState()}),e.hoverPoints=e.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var t=this,n=g(t.series.options.point,t.options).events;t.events=n,a(n,function(n,i){e.isFunction(n)&&s(t,i,n)}),this.hasImportedEvents=!0}},setState:function(e,t){var n,i=this.series,r=this.state,a=i.options.states[e||"normal"]||{},s=d[i.type].marker&&i.options.marker,o=s&&!1===s.enabled,l=s&&s.states&&s.states[e||"normal"]||{},c=!1===l.enabled,p=i.stateMarkerGraphic,m=this.marker||{},g=i.chart,v=i.halo,y=s&&i.markerAttribs;if(!((e=e||"")===this.state&&!t||this.selected&&"select"!==e||!1===a.enabled||e&&(c||o&&!1===l.enabled)||e&&m.states&&m.states[e]&&!1===m.states[e].enabled)){if(this.state=e,y&&(n=i.markerAttribs(this,e)),this.graphic){if(r&&this.graphic.removeClass("highcharts-point-"+r),e&&this.graphic.addClass("highcharts-point-"+e),!g.styledMode){var b=i.pointAttribs(this,e),T=f(g.options.chart.animation,a.animation);i.options.inactiveOtherPoints&&((this.dataLabels||[]).forEach(function(e){e&&e.animate({opacity:b.opacity},T)}),this.connector&&this.connector.animate({opacity:b.opacity},T)),this.graphic.animate(b,T)}n&&this.graphic.animate(n,f(g.options.chart.animation,l.animation,s.animation)),p&&p.hide()}else e&&l&&(r=m.symbol||i.symbol,p&&p.currentSymbol!==r&&(p=p.destroy()),n&&(p?p[t?"animate":"attr"]({x:n.x,y:n.y}):r&&(i.stateMarkerGraphic=p=g.renderer.symbol(r,n.x,n.y,n.width,n.height).add(i.markerGroup),p.currentSymbol=r)),!g.styledMode&&p&&p.attr(i.pointAttribs(this,e))),p&&(p[e&&this.isInside?"show":"hide"](),p.element.point=this);e=a.halo,a=(p=this.graphic||p)&&p.visibility||"inherit",e&&e.size&&p&&"hidden"!==a?(v||(i.halo=v=g.renderer.path().add(p.parentGroup)),v.show()[t?"animate":"attr"]({d:this.haloPath(e.size)}),v.attr({class:"highcharts-halo highcharts-color-"+f(this.colorIndex,i.colorIndex)+(this.className?" "+this.className:""),visibility:a,zIndex:-1}),v.point=this,g.styledMode||v.attr(u({fill:this.color||i.color,"fill-opacity":e.opacity},e.attributes))):v&&v.point&&v.point.haloPath&&v.animate({d:v.point.haloPath(0)},null,v.hide),h(this,"afterSetState")}},haloPath:function(e){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-e,this.plotY-e,2*e,2*e)}}),u(y.prototype,{onMouseOver:function(){var e=this.chart,t=e.hoverSeries;t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&h(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},onMouseOut:function(){var e=this.options,t=this.chart,n=t.tooltip,i=t.hoverPoint;t.hoverSeries=null,i&&i.onMouseOut(),this&&e.events.mouseOut&&h(this,"mouseOut"),!n||this.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),t.series.forEach(function(e){e.setState("",!0)})},setState:function(e,t){var n=this,i=n.options,r=n.graph,a=i.inactiveOtherPoints,s=i.states,o=i.lineWidth,l=i.opacity,c=f(s[e||"normal"]&&s[e||"normal"].animation,n.chart.options.chart.animation);if(i=0,e=e||"",n.state!==e&&([n.group,n.markerGroup,n.dataLabelsGroup].forEach(function(t){t&&(n.state&&t.removeClass("highcharts-series-"+n.state),e&&t.addClass("highcharts-series-"+e))}),n.state=e,!n.chart.styledMode)){if(s[e]&&!1===s[e].enabled)return;if(e&&(o=s[e].lineWidth||o+(s[e].lineWidthPlus||0),l=f(s[e].opacity,l)),r&&!r.dashstyle)for(s={"stroke-width":o},r.animate(s,c);n["zone-graph-"+i];)n["zone-graph-"+i].attr(s),i+=1;a||[n.group,n.markerGroup,n.dataLabelsGroup,n.labelBySeries].forEach(function(e){e&&e.animate({opacity:l},c)})}t&&a&&n.points&&n.setAllPointsToState(e)},setAllPointsToState:function(e){this.points.forEach(function(t){t.setState&&t.setState(e)})},setVisible:function(e,t){var n=this,i=n.chart,r=n.legendItem,a=i.options.chart.ignoreHiddenSeries,s=n.visible,o=(n.visible=e=n.options.visible=n.userOptions.visible=void 0===e?!s:e)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(function(e){n[e]&&n[e][o]()}),i.hoverSeries!==n&&(i.hoverPoint&&i.hoverPoint.series)!==n||n.onMouseOut(),r&&i.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&i.series.forEach(function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),n.linkedSeries.forEach(function(t){t.setVisible(e,!1)}),a&&(i.isDirtyBox=!0),h(n,o),!1!==t&&i.redraw()},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=this.options.selected=void 0===e?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),h(this,e?"select":"unselect")},drawTracker:S.drawTrackerGraph})}),t(n,"parts/Responsive.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.isArray,i=t.isObject,r=t.objectEach,a=t.splat;t=e.Chart;var s=e.pick;t.prototype.setResponsive=function(t,n){var i=this.options.responsive,r=[],a=this.currentResponsive;!n&&i&&i.rules&&i.rules.forEach(function(t){void 0===t._id&&(t._id=e.uniqueKey()),this.matchResponsiveRule(t,r)},this),(n=e.merge.apply(0,r.map(function(t){return e.find(i.rules,function(e){return e._id===t}).chartOptions}))).isResponsiveOptions=!0,(r=r.toString()||void 0)!==(a&&a.ruleIds)&&(a&&this.update(a.undoOptions,t,!0),r?((a=this.currentOptions(n)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:r,mergedOptions:n,undoOptions:a},this.update(n,t,!0)):this.currentResponsive=void 0)},t.prototype.matchResponsiveRule=function(e,t){var n=e.condition;(n.callback||function(){return this.chartWidth<=s(n.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=s(n.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=s(n.minWidth,0)&&this.chartHeight>=s(n.minHeight,0)}).call(this)&&t.push(e._id)},t.prototype.currentOptions=function(e){var t=this,s={};return function e(s,o,l,c){var d;r(s,function(r,s){if(!c&&-1<t.collectionsWithUpdate.indexOf(s))for(r=a(r),l[s]=[],d=0;d<r.length;d++)o[s][d]&&(l[s][d]={},e(r[d],o[s][d],l[s][d],c+1));else i(r)?(l[s]=n(r)?[]:{},e(r,o[s]||{},l[s],c+1)):l[s]=void 0===o[s]?null:o[s]})}(e,this.options,s,0),s}}),t(n,"masters/highcharts.src.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){return(0,e.extend)(e,{attr:t.attr,defined:t.defined,erase:t.erase,isArray:t.isArray,isClass:t.isClass,isDOMElement:t.isDOMElement,isNumber:t.isNumber,isObject:t.isObject,isString:t.isString,objectEach:t.objectEach,pInt:t.pInt,splat:t.splat}),e}),t(n,"parts/Scrollbar.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){function n(e,t,n){this.init(e,t,n)}var i=t.defined,r=e.addEvent;t=e.Axis;var a,s=e.correctFloat,o=e.defaultOptions,l=e.destroyObjectProperties,c=e.fireEvent,d=e.hasTouch,u=e.merge,h=e.pick,p=e.removeEvent,m={height:e.isTouchDevice?20:14,barBorderRadius:0,buttonBorderRadius:0,liveRedraw:void 0,margin:10,minWidth:6,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:1,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"#333333",trackBackgroundColor:"#f2f2f2",trackBorderColor:"#f2f2f2",trackBorderWidth:1};o.scrollbar=u(!0,m,o.scrollbar),e.swapXY=a=function(e,t){var n=e.length;if(t)for(t=0;t<n;t+=3){var i=e[t+1];e[t+1]=e[t+2],e[t+2]=i}return e},n.prototype={init:function(e,t,n){this.scrollbarButtons=[],this.renderer=e,this.userOptions=t,this.options=u(m,t),this.chart=n,this.size=h(this.options.size,this.options.height),t.enabled&&(this.render(),this.initEvents(),this.addEvents())},render:function(){var e,t=this.renderer,n=this.options,i=this.size,r=this.chart.styledMode;this.group=e=t.g("scrollbar").attr({zIndex:n.zIndex,translateY:-99999}).add(),this.track=t.rect().addClass("highcharts-scrollbar-track").attr({x:0,r:n.trackBorderRadius||0,height:i,width:i}).add(e),r||this.track.attr({fill:n.trackBackgroundColor,stroke:n.trackBorderColor,"stroke-width":n.trackBorderWidth}),this.trackBorderWidth=this.track.strokeWidth(),this.track.attr({y:-this.trackBorderWidth%2/2}),this.scrollbarGroup=t.g().add(e),this.scrollbar=t.rect().addClass("highcharts-scrollbar-thumb").attr({height:i,width:i,r:n.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=t.path(a(["M",-3,i/4,"L",-3,2*i/3,"M",0,i/4,"L",0,2*i/3,"M",3,i/4,"L",3,2*i/3],n.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),r||(this.scrollbar.attr({fill:n.barBackgroundColor,stroke:n.barBorderColor,"stroke-width":n.barBorderWidth}),this.scrollbarRifles.attr({stroke:n.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-this.scrollbarStrokeWidth%2/2,-this.scrollbarStrokeWidth%2/2),this.drawScrollbarButton(0),this.drawScrollbarButton(1)},position:function(e,t,n,i){var r=this.options.vertical,a=0,s=this.rendered?"animate":"attr";this.x=e,this.y=t+this.trackBorderWidth,this.width=n,this.xOffset=this.height=i,this.yOffset=a,r?(this.width=this.yOffset=n=a=this.size,this.xOffset=t=0,this.barWidth=i-2*n,this.x=e+=this.options.margin):(this.height=this.xOffset=i=t=this.size,this.barWidth=n-2*i,this.y+=this.options.margin),this.group[s]({translateX:e,translateY:this.y}),this.track[s]({width:n,height:i}),this.scrollbarButtons[1][s]({translateX:r?0:n-t,translateY:r?i-a:0})},drawScrollbarButton:function(e){var t=this.renderer,n=this.scrollbarButtons,i=this.options,r=this.size,s=t.g().add(this.group);n.push(s),s=t.rect().addClass("highcharts-scrollbar-button").add(s),this.chart.styledMode||s.attr({stroke:i.buttonBorderColor,"stroke-width":i.buttonBorderWidth,fill:i.buttonBackgroundColor}),s.attr(s.crisp({x:-.5,y:-.5,width:r+1,height:r+1,r:i.buttonBorderRadius},s.strokeWidth())),s=t.path(a(["M",r/2+(e?-1:1),r/2-3,"L",r/2+(e?-1:1),r/2+3,"L",r/2+(e?2:-2),r/2],i.vertical)).addClass("highcharts-scrollbar-arrow").add(n[e]),this.chart.styledMode||s.attr({fill:i.buttonArrowColor})},setRange:function(e,t){var n,r=this.options,a=r.vertical,o=r.minWidth,l=this.barWidth,c=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(i(l)){e=Math.max(e,0);var d=Math.ceil(l*e);this.calculatedWidth=n=s(l*Math.min(t,1)-d),n<o&&(d=(l-o+n)*e,n=o),o=Math.floor(d+this.xOffset+this.yOffset),l=n/2-.5,this.from=e,this.to=t,a?(this.scrollbarGroup[c]({translateY:o}),this.scrollbar[c]({height:n}),this.scrollbarRifles[c]({translateY:l}),this.scrollbarTop=o,this.scrollbarLeft=0):(this.scrollbarGroup[c]({translateX:o}),this.scrollbar[c]({width:n}),this.scrollbarRifles[c]({translateX:l}),this.scrollbarLeft=o,this.scrollbarTop=0),12>=n?this.scrollbarRifles.hide():this.scrollbarRifles.show(!0),!1===r.showFull&&(0>=e&&1<=t?this.group.hide():this.group.show()),this.rendered=!0}},initEvents:function(){var e=this;e.mouseMoveHandler=function(t){var n=e.chart.pointer.normalize(t),i=e.options.vertical?"chartY":"chartX",r=e.initPositions;!e.grabbedCenter||t.touches&&0===t.touches[0][i]||(i=(n=e.cursorToScrollbarPosition(n)[i])-(i=e[i]),e.hasDragged=!0,e.updatePosition(r[0]+i,r[1]+i),e.hasDragged&&c(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMType:t.type,DOMEvent:t}))},e.mouseUpHandler=function(t){e.hasDragged&&c(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMType:t.type,DOMEvent:t}),e.grabbedCenter=e.hasDragged=e.chartX=e.chartY=null},e.mouseDownHandler=function(t){t=e.chart.pointer.normalize(t),t=e.cursorToScrollbarPosition(t),e.chartX=t.chartX,e.chartY=t.chartY,e.initPositions=[e.from,e.to],e.grabbedCenter=!0},e.buttonToMinClick=function(t){var n=s(e.to-e.from)*e.options.step;e.updatePosition(s(e.from-n),s(e.to-n)),c(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMEvent:t})},e.buttonToMaxClick=function(t){var n=(e.to-e.from)*e.options.step;e.updatePosition(e.from+n,e.to+n),c(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMEvent:t})},e.trackClick=function(t){var n=e.chart.pointer.normalize(t),i=e.to-e.from,r=e.y+e.scrollbarTop,a=e.x+e.scrollbarLeft;e.options.vertical&&n.chartY>r||!e.options.vertical&&n.chartX>a?e.updatePosition(e.from+i,e.to+i):e.updatePosition(e.from-i,e.to-i),c(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMEvent:t})}},cursorToScrollbarPosition:function(e){var t=this.options;return t=t.minWidth>this.calculatedWidth?t.minWidth:0,{chartX:(e.chartX-this.x-this.xOffset)/(this.barWidth-t),chartY:(e.chartY-this.y-this.yOffset)/(this.barWidth-t)}},updatePosition:function(e,t){1<t&&(e=s(1-s(t-e)),t=1),0>e&&(t=s(t-e),e=0),this.from=e,this.to=t},update:function(e){this.destroy(),this.init(this.chart.renderer,u(!0,this.options,e),this.chart)},addEvents:function(){var e=this.options.inverted?[1,0]:[0,1],t=this.scrollbarButtons,n=this.scrollbarGroup.element,i=this.mouseDownHandler,a=this.mouseMoveHandler,s=this.mouseUpHandler;e=[[t[e[0]].element,"click",this.buttonToMinClick],[t[e[1]].element,"click",this.buttonToMaxClick],[this.track.element,"click",this.trackClick],[n,"mousedown",i],[n.ownerDocument,"mousemove",a],[n.ownerDocument,"mouseup",s]],d&&e.push([n,"touchstart",i],[n.ownerDocument,"touchmove",a],[n.ownerDocument,"touchend",s]),e.forEach(function(e){r.apply(null,e)}),this._events=e},removeEvents:function(){this._events.forEach(function(e){p.apply(null,e)}),this._events.length=0},destroy:function(){var e=this.chart.scroller;this.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(e){this[e]&&this[e].destroy&&(this[e]=this[e].destroy())},this),e&&this===e.scrollbar&&(e.scrollbar=null,l(e.scrollbarButtons))}},e.Scrollbar||(r(t,"afterInit",function(){var t=this;t.options&&t.options.scrollbar&&t.options.scrollbar.enabled&&(t.options.scrollbar.vertical=!t.horiz,t.options.startOnTick=t.options.endOnTick=!1,t.scrollbar=new n(t.chart.renderer,t.options.scrollbar,t.chart),r(t.scrollbar,"changed",function(n){var r=Math.min(h(t.options.min,t.min),t.min,t.dataMin),a=Math.max(h(t.options.max,t.max),t.max,t.dataMax)-r;if(t.horiz&&!t.reversed||!t.horiz&&t.reversed){var s=r+a*this.to;r+=a*this.from}else s=r+a*(1-this.from),r+=a*(1-this.to);h(this.options.liveRedraw,e.svg&&!e.isTouchDevice&&!this.chart.isBoosting)||"mouseup"===n.DOMType||!i(n.DOMType)?t.setExtremes(r,s,!0,"mousemove"!==n.DOMType,n):this.setRange(this.from,this.to)}))}),r(t,"afterRender",function(){var e=Math.min(h(this.options.min,this.min),this.min,h(this.dataMin,this.min)),t=Math.max(h(this.options.max,this.max),this.max,h(this.dataMax,this.max)),n=this.scrollbar,r=this.axisTitleMargin+(this.titleOffset||0),a=this.chart.scrollbarsOffsets,s=this.options.margin||0;n&&(this.horiz?(this.opposite||(a[1]+=r),n.position(this.left,this.top+this.height+2+a[1]-(this.opposite?s:0),this.width,this.height),this.opposite||(a[1]+=s),r=1):(this.opposite&&(a[0]+=r),n.position(this.left+this.width+2+a[0]-(this.opposite?0:s),this.top,this.width,this.height),this.opposite&&(a[0]+=s),r=0),a[r]+=n.size+n.options.margin,isNaN(e)||isNaN(t)||!i(this.min)||!i(this.max)||this.min===this.max?n.setRange(0,1):(a=(this.min-e)/(t-e),e=(this.max-e)/(t-e),this.horiz&&!this.reversed||!this.horiz&&this.reversed?n.setRange(a,e):n.setRange(1-e,1-a)))}),r(t,"afterGetOffset",function(){var e=this.horiz?2:1,t=this.scrollbar;t&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[e]+=t.size+t.options.margin)}),e.Scrollbar=n)}),t(n,"parts/Navigator.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){function n(e){this.init(e)}var i=t.defined,r=t.erase,a=t.isArray,s=t.isNumber,o=t.splat,l=e.addEvent,c=e.Axis;t=e.Chart;var d=e.color,u=e.defaultOptions,h=e.destroyObjectProperties,p=e.extend,m=e.hasTouch,g=e.isTouchDevice,f=e.merge,v=e.pick,y=e.removeEvent,b=e.Scrollbar,T=e.Series,S=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if((t=[].filter.call(t,s)).length)return Math[e].apply(0,t)},C=void 0===e.seriesTypes.areaspline?"line":"areaspline";p(u,{navigator:{height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:d("#6685c2").setOpacity(.3).get(),outlineColor:"#cccccc",outlineWidth:1,series:{type:C,fillOpacity:.05,lineWidth:1,compare:null,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},pointRange:0,threshold:null},xAxis:{overscroll:0,className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#999999"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}}),e.Renderer.prototype.symbols["navigator-handle"]=function(e,t,n,i,r){return e=r.width/2,t=Math.round(e/3)+.5,["M",-e-1,.5,"L",e,.5,"L",e,(r=r.height)+.5,"L",-e-1,r+.5,"L",-e-1,.5,"M",-t,4,"L",-t,r-3,"M",t-1,4,"L",t-1,r-3]},c.prototype.toFixedRange=function(e,t,n,i){var r=this.chart&&this.chart.fixedRange;return e=v(n,this.translate(e,!0,!this.horiz)),t=v(i,this.translate(t,!0,!this.horiz)),.7<(n=r&&(t-e)/r)&&1.3>n&&(i?e=t-r:t=e+r),s(e)&&s(t)||(e=t=void 0),{min:e,max:t}},n.prototype={drawHandle:function(e,t,n,i){var r=this.navigatorOptions.handles.height;this.handles[t][i](n?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(e,10)+.5-r)}:{translateX:Math.round(this.left+parseInt(e,10)),translateY:Math.round(this.top+this.height/2-r/2-1)})},drawOutline:function(e,t,n,i){var r=this.navigatorOptions.maskInside,a=this.outline.strokeWidth(),s=a/2;a=a%2/2;var o=this.outlineHeight,l=this.scrollbarHeight,c=this.size,d=this.left-l,u=this.top;n?e=["M",(d-=s)+o,u-l-a,"L",d+o,n=u+t+a,"L",d,n,"L",d,t=u+e+a,"L",d+o,t,"L",d+o,u+c+l].concat(r?["M",d+o,n-s,"L",d+o,t+s]:[]):e=["M",d,u+=s,"L",e+=d+l-a,u,"L",e,u+o,"L",t+=d+l-a,u+o,"L",t,u,"L",d+c+2*l,u].concat(r?["M",e-s,u,"L",t+s,u]:[]),this.outline[i]({d:e})},drawMasks:function(e,t,n,i){var r=this.left,a=this.top,s=this.height;if(n)var o=[r,r,r],l=[a,a+e,a+t],c=[s,s,s],d=[e,t-e,this.size-t];else o=[r,r+e,r+t],l=[a,a,a],c=[e,t-e,this.size-t],d=[s,s,s];this.shades.forEach(function(e,t){e[i]({x:o[t],y:l[t],width:c[t],height:d[t]})})},renderElements:function(){var e,t=this,n=t.navigatorOptions,i=n.maskInside,r=t.chart,a=r.renderer,s={cursor:r.inverted?"ns-resize":"ew-resize"};t.navigatorGroup=e=a.g("navigator").attr({zIndex:8,visibility:"hidden"}).add(),[!i,i,!i].forEach(function(i,o){t.shades[o]=a.rect().addClass("highcharts-navigator-mask"+(1===o?"-inside":"-outside")).add(e),r.styledMode||t.shades[o].attr({fill:i?n.maskFill:"rgba(0,0,0,0)"}).css(1===o&&s)}),t.outline=a.path().addClass("highcharts-navigator-outline").add(e),r.styledMode||t.outline.attr({"stroke-width":n.outlineWidth,stroke:n.outlineColor}),n.handles.enabled&&[0,1].forEach(function(i){if(n.handles.inverted=r.inverted,t.handles[i]=a.symbol(n.handles.symbols[i],-n.handles.width/2-1,0,n.handles.width,n.handles.height,n.handles),t.handles[i].attr({zIndex:7-i}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][i]).add(e),!r.styledMode){var o=n.handles;t.handles[i].attr({fill:o.backgroundColor,stroke:o.borderColor,"stroke-width":o.lineWidth}).css(s)}})},update:function(e){(this.series||[]).forEach(function(e){e.baseSeries&&delete e.baseSeries.navigatorSeries}),this.destroy(),f(!0,this.chart.options.navigator,this.options,e),this.init(this.chart)},render:function(t,n,r,a){var o,l,c=this.chart,d=this.scrollbarHeight,u=this.xAxis,h=u.fake?c.xAxis[0]:u,p=this.navigatorEnabled,m=this.rendered,g=c.inverted,f=c.xAxis[0].minRange,y=c.xAxis[0].options.maxRange;if(!this.hasDragged||i(r)){if(!s(t)||!s(n)){if(!m)return;r=0,a=v(u.width,h.width)}this.left=v(u.left,c.plotLeft+d+(g?c.plotWidth:0)),this.size=l=o=v(u.len,(g?c.plotHeight:c.plotWidth)-2*d),c=g?d:o+2*d,r=v(r,u.toPixels(t,!0)),a=v(a,u.toPixels(n,!0)),s(r)&&1/0!==Math.abs(r)||(r=0,a=c),t=u.toValue(r,!0),n=u.toValue(a,!0);var b=Math.abs(e.correctFloat(n-t));b<f?this.grabbedLeft?r=u.toPixels(n-f,!0):this.grabbedRight&&(a=u.toPixels(t+f,!0)):i(y)&&b>y&&(this.grabbedLeft?r=u.toPixels(n-y,!0):this.grabbedRight&&(a=u.toPixels(t+y,!0))),this.zoomedMax=Math.min(Math.max(r,a,0),l),this.zoomedMin=Math.min(Math.max(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(r,a),0),l),this.range=this.zoomedMax-this.zoomedMin,l=Math.round(this.zoomedMax),r=Math.round(this.zoomedMin),p&&(this.navigatorGroup.attr({visibility:"visible"}),m=m&&!this.hasDragged?"animate":"attr",this.drawMasks(r,l,g,m),this.drawOutline(r,l,g,m),this.navigatorOptions.handles.enabled&&(this.drawHandle(r,0,g,m),this.drawHandle(l,1,g,m))),this.scrollbar&&(g?(g=this.top-d,h=this.left-d+(p||!h.opposite?0:(h.titleOffset||0)+h.axisTitleMargin),d=o+2*d):(g=this.top+(p?this.height:-d),h=this.left-d),this.scrollbar.position(h,g,c,d),this.scrollbar.setRange(this.zoomedMin/(o||1),this.zoomedMax/(o||1))),this.rendered=!0}},addMouseEvents:function(){var e,t,n=this,i=n.chart,r=i.container,a=[];n.mouseMoveHandler=e=function(e){n.onMouseMove(e)},n.mouseUpHandler=t=function(e){n.onMouseUp(e)},(a=n.getPartsEvents("mousedown")).push(l(r,"mousemove",e),l(r.ownerDocument,"mouseup",t)),m&&(a.push(l(r,"touchmove",e),l(r.ownerDocument,"touchend",t)),a.concat(n.getPartsEvents("touchstart"))),n.eventsToUnbind=a,n.series&&n.series[0]&&a.push(l(n.series[0].xAxis,"foundExtremes",function(){i.navigator.modifyNavigatorAxisExtremes()}))},getPartsEvents:function(e){var t=this,n=[];return["shades","handles"].forEach(function(i){t[i].forEach(function(r,a){n.push(l(r.element,e,function(e){t[i+"Mousedown"](e,a)}))})}),n},shadesMousedown:function(e,t){e=this.chart.pointer.normalize(e);var n=this.chart,r=this.xAxis,a=this.zoomedMin,s=this.left,o=this.size,l=this.range,c=e.chartX;if(n.inverted&&(c=e.chartY,s=this.top),1===t)this.grabbedCenter=c,this.fixedWidth=l,this.dragOffset=c-a;else{if(e=c-s-l/2,0===t)e=Math.max(0,e);else if(2===t&&e+l>=o)if(e=o-l,this.reversedExtremes){e-=l;var d=this.getUnionExtremes().dataMin}else var u=this.getUnionExtremes().dataMax;e!==a&&(this.fixedWidth=l,t=r.toFixedRange(e,e+l,d,u),i(t.min)&&n.xAxis[0].setExtremes(Math.min(t.min,t.max),Math.max(t.min,t.max),!0,null,{trigger:"navigator"}))}},handlesMousedown:function(e,t){this.chart.pointer.normalize(e);var n=(e=this.chart).xAxis[0],i=this.reversedExtremes;0===t?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=i?n.min:n.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=i?n.max:n.min),e.fixedRange=null},onMouseMove:function(t){var n=this,i=n.chart,r=n.left,a=n.navigatorSize,s=n.range,o=n.dragOffset,l=i.inverted;t.touches&&0===t.touches[0].pageX||(t=i.pointer.normalize(t),i=t.chartX,l&&(r=n.top,i=t.chartY),n.grabbedLeft?(n.hasDragged=!0,n.render(0,0,i-r,n.otherHandlePos)):n.grabbedRight?(n.hasDragged=!0,n.render(0,0,n.otherHandlePos,i-r)):n.grabbedCenter&&(n.hasDragged=!0,i<o?i=o:i>a+o-s&&(i=a+o-s),n.render(0,0,i-o,i-o+s)),n.hasDragged&&n.scrollbar&&v(n.scrollbar.options.liveRedraw,e.svg&&!g&&!this.chart.isBoosting)&&(t.DOMType=t.type,setTimeout(function(){n.onMouseUp(t)},0)))},onMouseUp:function(e){var t=this.chart,n=this.xAxis,r=this.scrollbar,a=e.DOMEvent||e;if(this.hasDragged&&(!r||!r.hasDragged)||"scrollbar"===e.trigger){if(r=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos)var s=this.fixedExtreme;else if(this.zoomedMax===this.otherHandlePos)var o=this.fixedExtreme;this.zoomedMax===this.size&&(o=this.reversedExtremes?r.dataMin:r.dataMax),0===this.zoomedMin&&(s=this.reversedExtremes?r.dataMax:r.dataMin),n=n.toFixedRange(this.zoomedMin,this.zoomedMax,s,o),i(n.min)&&t.xAxis[0].setExtremes(Math.min(n.min,n.max),Math.max(n.min,n.max),!0,!this.hasDragged&&null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:a})}"mousemove"!==e.DOMType&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null)},removeEvents:function(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(e){e()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()},removeBaseSeriesEvents:function(){var e=this.baseSeries||[];this.navigatorEnabled&&e[0]&&(!1!==this.navigatorOptions.adaptToUpdatedData&&e.forEach(function(e){y(e,"updatedData",this.updatedDataHandler)},this),e[0].xAxis&&y(e[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))},init:function(e){var t=e.options,n=t.navigator,i=n.enabled,r=t.scrollbar,a=r.enabled;t=i?n.height:0;var s=a?r.height:0;this.handles=[],this.shades=[],this.chart=e,this.setBaseSeries(),this.height=t,this.scrollbarHeight=s,this.scrollbarEnabled=a,this.navigatorEnabled=i,this.navigatorOptions=n,this.scrollbarOptions=r,this.outlineHeight=t+s,this.opposite=v(n.opposite,!i&&e.inverted);var o=this;i=o.baseSeries,r=e.xAxis.length,a=e.yAxis.length;var d=i&&i[0]&&i[0].xAxis||e.xAxis[0]||{options:{}};e.isDirtyBox=!0,o.navigatorEnabled?(o.xAxis=new c(e,f({breaks:d.options.breaks,ordinal:d.options.ordinal},n.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",isX:!0,type:"datetime",index:r,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},e.inverted?{offsets:[s,0,-s,0],width:t}:{offsets:[0,-s,0,s],height:t})),o.yAxis=new c(e,f(n.yAxis,{id:"navigator-y-axis",alignTicks:!1,offset:0,index:a,isInternal:!0,zoomEnabled:!1},e.inverted?{width:t}:{height:t})),i||n.series.data?o.updateNavigatorSeries(!1):0===e.series.length&&(o.unbindRedraw=l(e,"beforeRedraw",function(){0<e.series.length&&!o.series&&(o.setBaseSeries(),o.unbindRedraw())})),o.reversedExtremes=e.inverted&&!o.xAxis.reversed||!e.inverted&&o.xAxis.reversed,o.renderElements(),o.addMouseEvents()):o.xAxis={translate:function(t,n){var i=e.xAxis[0],r=i.getExtremes(),a=i.len-2*s,o=S("min",i.options.min,r.dataMin);return i=S("max",i.options.max,r.dataMax)-o,n?t*i/a+o:a*(t-o)/i},toPixels:function(e){return this.translate(e)},toValue:function(e){return this.translate(e,!0)},toFixedRange:c.prototype.toFixedRange,fake:!0},e.options.scrollbar.enabled&&(e.scrollbar=o.scrollbar=new b(e.renderer,f(e.options.scrollbar,{margin:o.navigatorEnabled?0:10,vertical:e.inverted}),e),l(o.scrollbar,"changed",function(t){var n=o.size,i=n*this.to;n*=this.from,o.hasDragged=o.scrollbar.hasDragged,o.render(0,0,n,i),(e.options.scrollbar.liveRedraw||"mousemove"!==t.DOMType&&"touchmove"!==t.DOMType)&&setTimeout(function(){o.onMouseUp(t)})})),o.addBaseSeriesEvents(),o.addChartEvents()},getUnionExtremes:function(e){var t,n=this.chart.xAxis[0],i=this.xAxis,r=i.options,a=n.options;return e&&null===n.dataMin||(t={dataMin:v(r&&r.min,S("min",a.min,n.dataMin,i.dataMin,i.min)),dataMax:v(r&&r.max,S("max",a.max,n.dataMax,i.dataMax,i.max))}),t},setBaseSeries:function(t,n){var i=this.chart,r=this.baseSeries=[];t=t||i.options&&i.options.navigator.baseSeries||(i.series.length?e.find(i.series,function(e){return!e.options.isInternal}).index:0),(i.series||[]).forEach(function(e,n){e.options.isInternal||!e.options.showInNavigator&&(n!==t&&e.options.id!==t||!1===e.options.showInNavigator)||r.push(e)}),this.xAxis&&!this.xAxis.fake&&this.updateNavigatorSeries(!0,n)},updateNavigatorSeries:function(e,t){var n,i,r,s=this,l=s.chart,c=s.baseSeries,d=s.navigatorOptions.series,h={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:!1,isInternal:!0,states:{inactive:{opacity:1}}},m=s.series=(s.series||[]).filter(function(e){var t=e.baseSeries;return!(0>c.indexOf(t))||(t&&(y(t,"updatedData",s.updatedDataHandler),delete t.navigatorSeries),e.chart&&e.destroy(),!1)});c&&c.length&&c.forEach(function(e){var o=e.navigatorSeries,g=p({color:e.color,visible:e.visible},a(d)?u.navigator.series:d);o&&!1===s.navigatorOptions.adaptToUpdatedData||(h.name="Navigator "+c.length,n=e.options||{},r=n.navigatorOptions||{},i=f(n,h,g,r),g=r.data||g.data,s.hasNavigatorData=s.hasNavigatorData||!!g,i.data=g||n.data&&n.data.slice(0),o&&o.options?o.update(i,t):(e.navigatorSeries=l.initSeries(i),e.navigatorSeries.baseSeries=e,m.push(e.navigatorSeries)))}),(!d.data||c&&c.length)&&!a(d)||(s.hasNavigatorData=!1,(d=o(d)).forEach(function(e,t){h.name="Navigator "+(m.length+1),(i=f(u.navigator.series,{color:l.series[t]&&!l.series[t].options.isInternal&&l.series[t].color||l.options.colors[t]||l.options.colors[0]},h,e)).data=e.data,i.data&&(s.hasNavigatorData=!0,m.push(l.initSeries(i)))})),e&&this.addBaseSeriesEvents()},addBaseSeriesEvents:function(){var e=this,t=e.baseSeries||[];t[0]&&t[0].xAxis&&l(t[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes),t.forEach(function(t){l(t,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)}),l(t,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)}),!1!==this.navigatorOptions.adaptToUpdatedData&&t.xAxis&&l(t,"updatedData",this.updatedDataHandler),l(t,"remove",function(){this.navigatorSeries&&(r(e.series,this.navigatorSeries),i(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)})},this)},getBaseSeriesMin:function(e){return this.baseSeries.reduce(function(e,t){return Math.min(e,t.xData?t.xData[0]:e)},e)},modifyNavigatorAxisExtremes:function(){var e,t=this.xAxis;t.getExtremes&&(!(e=this.getUnionExtremes(!0))||e.dataMin===t.min&&e.dataMax===t.max||(t.min=e.dataMin,t.max=e.dataMax))},modifyBaseAxisExtremes:function(){var e=this.chart.navigator,t=this.getExtremes(),n=t.dataMin,i=t.dataMax;t=t.max-t.min;var r=e.stickToMin,a=e.stickToMax,o=v(this.options.overscroll,0),l=e.series&&e.series[0],c=!!this.setExtremes;if(!this.eventArgs||"rangeSelectorButton"!==this.eventArgs.trigger){if(r)var d=n,u=n+t;a&&(u=i+o,r||(d=Math.max(u-t,e.getBaseSeriesMin(l&&l.xData?l.xData[0]:-Number.MAX_VALUE)))),c&&(r||a)&&s(d)&&(this.min=this.userMin=d,this.max=this.userMax=u)}e.stickToMin=e.stickToMax=null},updatedDataHandler:function(){var e=this.chart.navigator,t=this.navigatorSeries,n=e.getBaseSeriesMin(this.xData[0]);e.stickToMax=e.reversedExtremes?0===Math.round(e.zoomedMin):Math.round(e.zoomedMax)>=Math.round(e.size),e.stickToMin=s(this.xAxis.min)&&this.xAxis.min<=n&&(!this.chart.fixedRange||!e.stickToMax),t&&!e.hasNavigatorData&&(t.options.pointStart=this.xData[0],t.setData(this.options.data,!1,null,!1))},addChartEvents:function(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(l(this.chart,"redraw",function(){var e=this.navigator,t=e&&(e.baseSeries&&e.baseSeries[0]&&e.baseSeries[0].xAxis||e.scrollbar&&this.xAxis[0]);t&&e.render(t.min,t.max)}),l(this.chart,"getMargins",function(){var e=this.navigator,t=e.opposite?"plotTop":"marginBottom";this.inverted&&(t=e.opposite?"marginRight":"plotLeft"),this[t]=(this[t]||0)+(e.navigatorEnabled||!this.inverted?e.outlineHeight:0)+e.navigatorOptions.margin}))},destroy:function(){this.removeEvents(),this.xAxis&&(r(this.chart.xAxis,this.xAxis),r(this.chart.axes,this.xAxis)),this.yAxis&&(r(this.chart.yAxis,this.yAxis),r(this.chart.axes,this.yAxis)),(this.series||[]).forEach(function(e){e.destroy&&e.destroy()}),"series xAxis yAxis shades outline scrollbarTrack scrollbarRifles scrollbarGroup scrollbar navigatorGroup rendered".split(" ").forEach(function(e){this[e]&&this[e].destroy&&this[e].destroy(),this[e]=null},this),[this.handles].forEach(function(e){h(e)},this)}},e.Navigator||(e.Navigator=n,l(c,"zoom",function(e){var t=this.chart.options,n=t.chart.zoomType,r=t.chart.pinchType,a=t.navigator;t=t.rangeSelector,this.isXAxis&&(a&&a.enabled||t&&t.enabled)&&("y"===n?e.zoomed=!1:(!g&&"xy"===n||g&&"xy"===r)&&this.options.range&&(n=this.previousZoom,i(e.newMin)?this.previousZoom=[this.min,this.max]:n&&(e.newMin=n[0],e.newMax=n[1],delete this.previousZoom))),void 0!==e.zoomed&&e.preventDefault()}),l(t,"beforeShowResetZoom",function(){var e=this.options,t=e.navigator,n=e.rangeSelector;if((t&&t.enabled||n&&n.enabled)&&(!g&&"x"===e.chart.zoomType||g&&"x"===e.chart.pinchType))return!1}),l(t,"beforeRender",function(){var e=this.options;(e.navigator.enabled||e.scrollbar.enabled)&&(this.scroller=this.navigator=new n(this))}),l(t,"afterSetChartSize",function(){var e=this.legend,t=this.navigator;if(t){var n=e&&e.options,i=t.xAxis,r=t.yAxis,a=t.scrollbarHeight;this.inverted?(t.left=t.opposite?this.chartWidth-a-t.height:this.spacing[3]+a,t.top=this.plotTop+a):(t.left=this.plotLeft+a,t.top=t.navigatorOptions.top||this.chartHeight-t.height-a-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(n&&"bottom"===n.verticalAlign&&n.enabled&&!n.floating?e.legendHeight+v(n.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),i&&r&&(this.inverted?i.options.left=r.options.left=t.left:i.options.top=r.options.top=t.top,i.setAxisSize(),r.setAxisSize())}}),l(t,"update",function(e){var t=e.options.navigator||{},n=e.options.scrollbar||{};this.navigator||this.scroller||!t.enabled&&!n.enabled||(f(!0,this.options.navigator,t),f(!0,this.options.scrollbar,n),delete e.options.navigator,delete e.options.scrollbar)}),l(t,"afterUpdate",function(e){this.navigator||this.scroller||!this.options.navigator.enabled&&!this.options.scrollbar.enabled||(this.scroller=this.navigator=new n(this),v(e.redraw,!0)&&this.redraw(e.animation))}),l(t,"afterAddSeries",function(){this.navigator&&this.navigator.setBaseSeries(null,!1)}),l(T,"afterUpdate",function(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}),t.prototype.callbacks.push(function(e){var t=e.navigator;t&&e.xAxis[0]&&(e=e.xAxis[0].getExtremes(),t.render(e.min,e.max))}))}),t(n,"parts/OrdinalAxis.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined;t=e.addEvent;var i=e.Axis,r=e.Chart,a=e.css,s=e.extend,o=e.noop,l=e.pick,c=e.timeUnits;t(e.Series,"updatedData",function(){var e=this.xAxis;e&&e.options.ordinal&&delete e.ordinalIndex}),i.prototype.getTimeTicks=function(e,t,i,r,a,s,o){var l,d,u=0,h={},p=[],m=-Number.MAX_VALUE,g=this.options.tickPixelInterval,f=this.chart.time,v=[];if(!this.options.ordinal&&!this.options.breaks||!a||3>a.length||void 0===t)return f.getTimeTicks.apply(f,arguments);var y=a.length;for(l=0;l<y;l++){var b=l&&a[l-1]>i;if(a[l]<t&&(u=l),l===y-1||a[l+1]-a[l]>5*s||b){if(a[l]>m){for(d=f.getTimeTicks(e,a[u],a[l],r);d.length&&d[0]<=m;)d.shift();d.length&&(m=d[d.length-1]),v.push(p.length),p=p.concat(d)}u=l+1}if(b)break}if(d=d.info,o&&d.unitRange<=c.hour){for(l=p.length-1,u=1;u<l;u++)if(f.dateFormat("%d",p[u])!==f.dateFormat("%d",p[u-1])){h[p[u]]="day";var T=!0}T&&(h[p[0]]="day"),d.higherRanks=h}if(d.segmentStarts=v,p.info=d,o&&n(g)){var S;for(u=v=p.length,T=[],f=[];u--;)l=this.translate(p[u]),S&&(f[u]=S-l),T[u]=S=l;for(f.sort(),(f=f[Math.floor(f.length/2)])<.6*g&&(f=null),u=p[v-1]>i?v-1:v,S=void 0;u--;)l=T[u],v=Math.abs(S-l),S&&v<.8*g&&(null===f||v<.8*f)?(h[p[u]]&&!h[p[u+1]]?(v=u+1,S=l):v=u,p.splice(v,1)):S=l}return p},s(i.prototype,{beforeSetTickPositions:function(){var e,t,n=[],i=!1,r=this.getExtremes(),a=r.min,s=r.max,o=this.isXAxis&&!!this.options.breaks;r=this.options.ordinal;var c,d=Number.MAX_VALUE,u=this.chart.options.chart.ignoreHiddenSeries;if(r||o){this.series.forEach(function(t,i){if(e=[],!(u&&!1===t.visible||!1===t.takeOrdinalPosition&&!o)&&(n=n.concat(t.processedXData),h=n.length,n.sort(function(e,t){return e-t}),d=Math.min(d,l(t.closestPointRange,d)),h)){for(i=0;i<h-1;)n[i]!==n[i+1]&&e.push(n[i+1]),i++;e[0]!==n[0]&&e.unshift(n[0]),n=e}t.isSeriesBoosting&&(c=!0)}),c&&(n.length=0);var h=n.length;if(2<h){var p=n[1]-n[0];for(t=h-1;t--&&!i;)n[t+1]-n[t]!==p&&(i=!0);!this.options.keepOrdinalPadding&&(n[0]-a>p||s-n[n.length-1]>p)&&(i=!0)}else this.options.overscroll&&(2===h?d=n[1]-n[0]:1===h?(d=this.options.overscroll,n=[n[0],n[0]+d]):d=this.overscrollPointsRange);i?(this.options.overscroll&&(this.overscrollPointsRange=d,n=n.concat(this.getOverscrollPositions())),this.ordinalPositions=n,p=this.ordinal2lin(Math.max(a,n[0]),!0),t=Math.max(this.ordinal2lin(Math.min(s,n[n.length-1]),!0),1),this.ordinalSlope=s=(s-a)/(t-p),this.ordinalOffset=a-p*s):(this.overscrollPointsRange=l(this.closestPointRange,this.overscrollPointsRange),this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=void 0)}this.isOrdinal=r&&i,this.groupIntervalFactor=null},val2lin:function(e,t){var n=this.ordinalPositions;if(n){var i,r=n.length;for(i=r;i--;)if(n[i]===e){var a=i;break}for(i=r-1;i--;)if(e>n[i]||0===i){a=i+(e=(e-n[i])/(n[i+1]-n[i]));break}t=t?a:this.ordinalSlope*(a||0)+this.ordinalOffset}else t=e;return t},lin2val:function(e,t){var n=this.ordinalPositions;if(n){var i=this.ordinalSlope,r=this.ordinalOffset,a=n.length-1;if(t)if(0>e)e=n[0];else if(e>a)e=n[a];else var s=e-(a=Math.floor(e));else for(;a--;)if(e>=(t=i*a+r)){s=(e-t)/((i=i*(a+1)+r)-t);break}return void 0!==s&&void 0!==n[a]?n[a]+(s?s*(n[a+1]-n[a]):0):e}return e},getExtendedPositions:function(){var e,t=this,n=t.chart,r=t.series[0].currentDataGrouping,a=t.ordinalIndex,s=r?r.count+r.unitName:"raw",l=t.options.overscroll,c=t.getExtremes();if(a||(a=t.ordinalIndex={}),!a[s]){var d={series:[],chart:n,getExtremes:function(){return{min:c.dataMin,max:c.dataMax+l}},options:{ordinal:!0},val2lin:i.prototype.val2lin,ordinal2lin:i.prototype.ordinal2lin};t.series.forEach(function(i){(e={xAxis:d,xData:i.xData.slice(),chart:n,destroyGroupedData:o}).xData=e.xData.concat(t.getOverscrollPositions()),e.options={dataGrouping:r?{enabled:!0,forced:!0,approximation:"open",units:[[r.unitName,[r.count]]]}:{enabled:!1}},i.processData.apply(e),d.series.push(e)}),t.beforeSetTickPositions.apply(d),a[s]=d.ordinalPositions}return a[s]},getOverscrollPositions:function(){var e=this.options.overscroll,t=this.overscrollPointsRange,i=[],r=this.dataMax;if(n(t))for(i.push(r);r<=this.dataMax+e;)r+=t,i.push(r);return i},getGroupIntervalFactor:function(e,t,n){var i=(n=n.processedXData).length,r=[],a=this.groupIntervalFactor;if(!a){for(a=0;a<i-1;a++)r[a]=n[a+1]-n[a];r.sort(function(e,t){return e-t}),r=r[Math.floor(i/2)],e=Math.max(e,n[0]),t=Math.min(t,n[i-1]),this.groupIntervalFactor=a=i*r/(t-e)}return a},postProcessTickInterval:function(e){var t=this.ordinalSlope;return t?this.options.breaks?this.closestPointRange||e:e/(t/this.closestPointRange):e}}),i.prototype.ordinal2lin=i.prototype.val2lin,t(r,"pan",function(e){var t=this.xAxis[0],n=t.options.overscroll,i=e.originalEvent.chartX,r=!1;if(t.options.ordinal&&t.series.length){var s=this.mouseDownX,o=t.getExtremes(),l=o.dataMax,c=o.min,d=o.max,u=this.hoverPoints,h=t.closestPointRange||t.overscrollPointsRange;s=(s-i)/(t.translationSlope*(t.ordinalSlope||h));var p={ordinalPositions:t.getExtendedPositions()};h=t.lin2val;var m=t.val2lin;if(p.ordinalPositions){if(1<Math.abs(s)){if(u&&u.forEach(function(e){e.setState()}),0>s){u=p;var g=t.ordinalPositions?t:p}else u=t.ordinalPositions?t:p,g=p;l>(p=g.ordinalPositions)[p.length-1]&&p.push(l),this.fixedRange=d-c,(s=t.toFixedRange(null,null,h.apply(u,[m.apply(u,[c,!0])+s,!0]),h.apply(g,[m.apply(g,[d,!0])+s,!0]))).min>=Math.min(o.dataMin,c)&&s.max<=Math.max(l,d)+n&&t.setExtremes(s.min,s.max,!0,!1,{trigger:"pan"}),this.mouseDownX=i,a(this.container,{cursor:"move"})}}else r=!0}else r=!0;r?n&&(t.max=t.dataMax+n):e.preventDefault()}),t(i,"foundExtremes",function(){this.isXAxis&&n(this.options.overscroll)&&this.max===this.dataMax&&(!this.chart.mouseIsDown||this.isInternal)&&(!this.eventArgs||this.eventArgs&&"navigator"!==this.eventArgs.trigger)&&(this.max+=this.options.overscroll,!this.isInternal&&n(this.userMin)&&(this.min+=this.options.overscroll))}),t(i,"afterSetScale",function(){this.horiz&&!this.isDirty&&(this.isDirty=this.isOrdinal&&this.chart.navigator&&!this.chart.navigator.adaptToUpdatedData)})}),t(n,"modules/broken-axis.src.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.isArray;t=e.addEvent;var i=e.pick,r=e.extend,a=e.find,s=e.fireEvent,o=e.Axis,l=e.Series,c=function(e,t){return a(t,function(t){return t.from<e&&e<t.to})};r(o.prototype,{isInBreak:function(e,t){var n=e.repeat||1/0,i=e.from,r=e.to-e.from;return t=t>=i?(t-i)%n:n-(i-t)%n,e.inclusive?t<=r:t<r&&0!==t},isInAnyBreak:function(e,t){var n,r=this.options.breaks,a=r&&r.length;if(a){for(;a--;)if(this.isInBreak(r[a],e)){var s=!0;n||(n=i(r[a].showPoints,!this.isXAxis))}var o=s&&t?s&&!n:s}return o}}),t(o,"afterInit",function(){"function"==typeof this.setBreaks&&this.setBreaks(this.options.breaks,!1)}),t(o,"afterSetTickPositions",function(){if(this.isBroken){var e,t=this.tickPositions,n=this.tickPositions.info,i=[];for(e=0;e<t.length;e++)this.isInAnyBreak(t[e])||i.push(t[e]);this.tickPositions=i,this.tickPositions.info=n}}),t(o,"afterSetOptions",function(){this.isBroken&&(this.options.ordinal=!1)}),o.prototype.setBreaks=function(e,t){function r(e){var t,n=e;for(t=0;t<a.breakArray.length;t++){var i=a.breakArray[t];if(i.to<=e)n-=i.len;else{if(i.from>=e)break;if(a.isInBreak(i,e)){n-=e-i.from;break}}}return n}var a=this,l=n(e)&&!!e.length;a.isDirty=a.isBroken!==l,a.isBroken=l,a.options.breaks=a.userOptions.breaks=e,a.forceRedraw=!0,l||a.val2lin!==r||(delete a.val2lin,delete a.lin2val),l&&(a.userOptions.ordinal=!1,a.val2lin=r,a.lin2val=function(e){var t;for(t=0;t<a.breakArray.length;t++){var n=a.breakArray[t];if(n.from>=e)break;(n.to<e||a.isInBreak(n,e))&&(e+=n.len)}return e},a.setExtremes=function(e,t,n,i,r){if(this.isBroken){for(var a,s=this.options.breaks;a=c(e,s);)e=a.to;for(;a=c(t,s);)t=a.from;t<e&&(t=e)}o.prototype.setExtremes.call(this,e,t,n,i,r)},a.setAxisTranslation=function(e){if(o.prototype.setAxisTranslation.call(this,e),this.unitLength=null,this.isBroken){e=a.options.breaks;var t,n,r=[],l=[],c=0,d=a.userMin||a.min,u=a.userMax||a.max,h=i(a.pointRangePadding,0);e.forEach(function(e){t=e.repeat||1/0,a.isInBreak(e,d)&&(d+=e.to%t-d%t),a.isInBreak(e,u)&&(u-=u%t-e.from%t)}),e.forEach(function(e){for(m=e.from,t=e.repeat||1/0;m-t>d;)m-=t;for(;m<d;)m+=t;for(n=m;n<u;n+=t)r.push({value:n,move:"in"}),r.push({value:n+(e.to-e.from),move:"out",size:e.breakSize})}),r.sort(function(e,t){return e.value===t.value?("in"===e.move?0:1)-("in"===t.move?0:1):e.value-t.value});var p=0,m=d;r.forEach(function(e){1===(p+="in"===e.move?1:-1)&&"in"===e.move&&(m=e.value),0===p&&(l.push({from:m,to:e.value,len:e.value-m-(e.size||0)}),c+=e.value-m-(e.size||0))}),a.breakArray=l,a.unitLength=u-d-c+h,s(a,"afterBreaks"),a.staticScale?a.transA=a.staticScale:a.unitLength&&(a.transA*=(u-a.min+h)/a.unitLength),h&&(a.minPixelPadding=a.transA*a.minPointOffset),a.min=d,a.max=u}}),i(t,!0)&&this.chart.redraw()},t(l,"afterGeneratePoints",function(){var e=this.xAxis,t=this.yAxis,n=this.points,i=n.length,r=this.options.connectNulls;if(e&&t&&(e.options.breaks||t.options.breaks))for(;i--;){var a=n[i];null===a.y&&!1===r||!e.isInAnyBreak(a.x,!0)&&!t.isInAnyBreak(a.y,!0)||(n.splice(i,1),this.data[i]&&this.data[i].destroyElements())}}),t(l,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,i(this.pointArrayMap,["y"]))}),e.Series.prototype.drawBreaks=function(e,t){var n,r,a,o,l=this,c=l.points;e&&t.forEach(function(t){n=e.breakArray||[],r=e.isXAxis?e.min:i(l.options.threshold,e.min),c.forEach(function(l){o=i(l["stack"+t.toUpperCase()],l[t]),n.forEach(function(t){a=!1,r<t.from&&o>t.to||r>t.from&&o<t.from?a="pointBreak":(r<t.from&&o>t.from&&o<t.to||r>t.from&&o>t.to&&o<t.from)&&(a="pointInBreak"),a&&s(e,a,{point:l,brk:t})})})})},e.Series.prototype.gappedPath=function(){var t=this.currentDataGrouping,n=t&&t.gapSize;t=this.options.gapSize;var i=this.points.slice(),r=i.length-1,a=this.yAxis;if(t&&0<r)for("value"!==this.options.gapUnit&&(t*=this.basePointRange),n&&n>t&&n>=this.basePointRange&&(t=n);r--;)i[r+1].x-i[r].x>t&&(n=(i[r].x+i[r+1].x)/2,i.splice(r+1,0,{isNull:!0,x:n}),this.options.stacking&&((n=a.stacks[this.stackKey][n]=new e.StackItem(a,a.options.stackLabels,!1,n,this.stack)).total=0));return this.getGraphPath(i)}}),t(n,"masters/modules/broken-axis.src.js",[],function(){}),t(n,"parts/DataGrouping.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isNumber;t=e.addEvent;var r=e.arrayMax,a=e.arrayMin,s=e.Axis,o=e.correctFloat,l=e.defaultPlotOptions,c=e.extend,d=e.format,u=e.merge,h=e.pick,p=e.Point,m=e.Series,g=e.Tooltip,f=e.approximations={sum:function(e){var t=e.length;if(!t&&e.hasNulls)var n=null;else if(t)for(n=0;t--;)n+=e[t];return n},average:function(e){var t=e.length;return e=f.sum(e),i(e)&&t&&(e=o(e/t)),e},averages:function(){var e=[];return[].forEach.call(arguments,function(t){e.push(f.average(t))}),void 0===e[0]?void 0:e},open:function(e){return e.length?e[0]:e.hasNulls?null:void 0},high:function(e){return e.length?r(e):e.hasNulls?null:void 0},low:function(e){return e.length?a(e):e.hasNulls?null:void 0},close:function(e){return e.length?e[e.length-1]:e.hasNulls?null:void 0},ohlc:function(e,t,n,r){if(e=f.open(e),t=f.high(t),n=f.low(n),r=f.close(r),i(e)||i(t)||i(n)||i(r))return[e,t,n,r]},range:function(e,t){return e=f.low(e),t=f.high(t),i(e)||i(t)?[e,t]:null===e&&null===t?null:void 0}},v=function(e,t,r,a){var s,o=this,l=o.data,c=o.options&&o.options.data,d=[],h=[],p=[],m=e.length,g=!!t,v=[],y=o.pointArrayMap,b=y&&y.length,T=["x"].concat(y||["y"]),S=0,C=0;a="function"==typeof a?a:f[a]?f[a]:f[o.getDGApproximation&&o.getDGApproximation()||"average"],b?y.forEach(function(){v.push([])}):v.push([]);var I=b||1;for(s=0;s<=m&&!(e[s]>=r[0]);s++);for(;s<=m;s++){for(;void 0!==r[S+1]&&e[s]>=r[S+1]||s===m;){var _=r[S];o.dataGroupInfo={start:o.cropStart+C,length:v[0].length};var M=a.apply(o,v);for(o.pointClass&&!n(o.dataGroupInfo.options)&&(o.dataGroupInfo.options=u(o.pointClass.prototype.optionsToObject.call({series:o},o.options.data[o.cropStart+C])),T.forEach(function(e){delete o.dataGroupInfo.options[e]})),void 0!==M&&(d.push(_),h.push(M),p.push(o.dataGroupInfo)),C=s,_=0;_<I;_++)v[_].length=0,v[_].hasNulls=!1;if(S+=1,s===m)break}if(s===m)break;if(y)for(_=o.cropStart+s,M=l&&l[_]||o.pointClass.prototype.applyOptions.apply({series:o},[c[_]]),_=0;_<b;_++){var E=M[y[_]];i(E)?v[_].push(E):null===E&&(v[_].hasNulls=!0)}else _=g?t[s]:null,i(_)?v[0].push(_):null===_&&(v[0].hasNulls=!0)}return{groupedXData:d,groupedYData:h,groupMap:p}},y={approximations:f,groupData:v},b=m.prototype,T=b.processData,S=b.generatePoints,C={groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},I={line:{},spline:{},area:{},areaspline:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5}},_=e.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]];return b.getDGApproximation=function(){return e.seriesTypes.arearange&&this instanceof e.seriesTypes.arearange?"range":e.seriesTypes.ohlc&&this instanceof e.seriesTypes.ohlc?"ohlc":e.seriesTypes.column&&this instanceof e.seriesTypes.column?"sum":"average"},b.groupData=v,b.processData=function(){var e,t=this.chart,i=this.options.dataGrouping,r=!1!==this.allowDG&&i&&h(i.enabled,t.options.isStock),a=this.visible||!t.options.chart.ignoreHiddenSeries,s=this.currentDataGrouping,o=!1;if(this.forceCrop=r,this.groupPixelWidth=null,this.hasProcessed=!0,r&&!this.requireSorting&&(this.requireSorting=o=!0),r=!1===T.apply(this,arguments)||!r,o&&(this.requireSorting=!1),!r){this.destroyGroupedData(),r=i.groupAll?this.xData:this.processedXData;var l=i.groupAll?this.yData:this.processedYData,c=t.plotSizeX,d=(t=this.xAxis).options.ordinal,u=this.groupPixelWidth=t.getGroupPixelWidth&&t.getGroupPixelWidth();if(u){this.isDirty=e=!0,this.points=null;var p=(o=t.getExtremes()).min;u=u*((o=o.max)-p)/c*(d=d&&t.getGroupIntervalFactor(p,o,this)||1),c=t.getTimeTicks(t.normalizeTimeTickInterval(u,i.units||_),Math.min(p,r[0]),Math.max(o,r[r.length-1]),t.options.startOfWeek,r,this.closestPointRange),r=(l=b.groupData.apply(this,[r,l,c,i.approximation])).groupedXData,d=l.groupedYData;var m=0;if(i.smoothed&&r.length){var g=r.length-1;for(r[g]=Math.min(r[g],o);g--&&0<g;)r[g]+=u/2;r[0]=Math.max(r[0],p)}for(g=1;g<c.length;g++)c.info.segmentStarts&&-1!==c.info.segmentStarts.indexOf(g)||(m=Math.max(c[g]-c[g-1],m));(p=c.info).gapSize=m,this.closestPointRange=c.info.totalRange,this.groupMap=l.groupMap,n(r[0])&&r[0]<t.min&&a&&((!n(t.options.min)&&t.min<=t.dataMin||t.min===t.dataMin)&&(t.min=r[0]),t.dataMin=r[0]),i.groupAll&&(r=(i=this.cropData(r,d,t.min,t.max,1)).xData,d=i.yData),this.processedXData=r,this.processedYData=d}else this.groupMap=null;this.hasGroupedData=e,this.currentDataGrouping=p,this.preventGraphAnimation=(s&&s.totalRange)!==(p&&p.totalRange)}},b.destroyGroupedData=function(){var e=this.groupedData;(e||[]).forEach(function(t,n){t&&(e[n]=t.destroy?t.destroy():null)}),this.groupedData=null},b.generatePoints=function(){S.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},t(p,"update",function(){if(this.dataGroup)return e.error(24,!1,this.series.chart),!1}),t(g,"headerFormatter",function(e){var t=this.chart.time,n=e.labelConfig,r=n.series,a=r.tooltipOptions,s=r.options.dataGrouping,o=a.xDateFormat,l=r.xAxis,u=a[(e.isFooter?"footer":"header")+"Format"];if(l&&"datetime"===l.options.type&&s&&i(n.key)){var h=r.currentDataGrouping;if(s=s.dateTimeLabelFormats||C.dateTimeLabelFormats,h)if(a=s[h.unitName],1===h.count)o=a[0];else{o=a[1];var p=a[2]}else!o&&s&&(o=this.getXDateFormat(n,a,l));o=t.dateFormat(o,n.key),p&&(o+=t.dateFormat(p,n.key+h.totalRange-1)),r.chart.styledMode&&(u=this.styledModeFormat(u)),e.text=d(u,{point:c(n.point,{key:o}),series:r},t),e.preventDefault()}}),t(m,"destroy",b.destroyGroupedData),t(m,"afterSetOptions",function(e){e=e.options;var t=this.type,n=this.chart.options.plotOptions,i=l[t].dataGrouping,r=this.useCommonDataGrouping&&C;(I[t]||r)&&(i||(i=u(C,I[t])),e.dataGrouping=u(r,i,n.series&&n.series.dataGrouping,n[t].dataGrouping,this.userOptions.dataGrouping))}),t(s,"afterSetScale",function(){this.series.forEach(function(e){e.hasProcessed=!1})}),s.prototype.getGroupPixelWidth=function(){var e,t,n=this.series,i=n.length,r=0,a=!1;for(e=i;e--;)(t=n[e].options.dataGrouping)&&(r=Math.max(r,h(t.groupPixelWidth,C.groupPixelWidth)));for(e=i;e--;)(t=n[e].options.dataGrouping)&&n[e].hasProcessed&&(i=(n[e].processedXData||n[e].data).length,n[e].groupPixelWidth||i>this.chart.plotSizeX/r||i&&t.forced)&&(a=!0);return a?r:0},s.prototype.setDataGrouping=function(e,t){var n;if(t=h(t,!0),e||(e={forced:!1,units:null}),this instanceof s)for(n=this.series.length;n--;)this.series[n].update({dataGrouping:e},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping=e},!1);this.ordinalSlope=null,t&&this.chart.redraw()},e.dataGrouping=y,y}),t(n,"parts/OHLCSeries.js",[n["parts/Globals.js"]],function(e){var t=e.Point,n=e.seriesType,i=e.seriesTypes;n("ohlc","column",{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0},{directTouch:!1,pointArrayMap:["open","high","low","close"],toYData:function(e){return[e.open,e.high,e.low,e.close]},pointValKey:"close",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},init:function(){i.column.prototype.init.apply(this,arguments),this.options.stacking=!1},pointAttribs:function(e,t){t=i.column.prototype.pointAttribs.call(this,e,t);var n=this.options;return delete t.fill,!e.options.color&&n.upColor&&e.open<e.close&&(t.stroke=n.upColor),t},translate:function(){var e=this,t=e.yAxis,n=!!e.modifyValue,r=["plotOpen","plotHigh","plotLow","plotClose","yBottom"];i.column.prototype.translate.apply(e),e.points.forEach(function(i){[i.open,i.high,i.low,i.close,i.low].forEach(function(a,s){null!==a&&(n&&(a=e.modifyValue(a)),i[r[s]]=t.toPixels(a,!0))}),i.tooltipPos[1]=i.plotHigh+t.pos-e.chart.plotTop})},drawPoints:function(){var e=this,t=e.chart;e.points.forEach(function(n){var i=n.graphic,r=!i;if(void 0!==n.plotY){i||(n.graphic=i=t.renderer.path().add(e.group)),t.styledMode||i.attr(e.pointAttribs(n,n.selected&&"select"));var a=i.strokeWidth()%2/2,s=Math.round(n.plotX)-a,o=Math.round(n.shapeArgs.width/2),l=["M",s,Math.round(n.yBottom),"L",s,Math.round(n.plotHigh)];if(null!==n.open){var c=Math.round(n.plotOpen)+a;l.push("M",s,c,"L",s-o,c)}null!==n.close&&(c=Math.round(n.plotClose)+a,l.push("M",s,c,"L",s+o,c)),i[r?"attr":"animate"]({d:l}).addClass(n.getClassName(),!0)}})},animate:null},{getClassName:function(){return t.prototype.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}})}),t(n,"parts/CandlestickSeries.js",[n["parts/Globals.js"]],function(e){var t=e.defaultPlotOptions,n=e.merge,i=e.seriesType,r=e.seriesTypes;i("candlestick","ohlc",n(t.column,{states:{hover:{lineWidth:2}},tooltip:t.ohlc.tooltip,threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0}),{pointAttribs:function(e,t){var n=r.column.prototype.pointAttribs.call(this,e,t),i=this.options,a=e.open<e.close,s=i.lineColor||this.color;return n["stroke-width"]=i.lineWidth,n.fill=e.options.color||a&&i.upColor||this.color,n.stroke=e.options.lineColor||a&&i.upLineColor||s,t&&(e=i.states[t],n.fill=e.color||n.fill,n.stroke=e.lineColor||n.stroke,n["stroke-width"]=e.lineWidth||n["stroke-width"]),n},drawPoints:function(){var e=this,t=e.chart,n=e.yAxis.reversed;e.points.forEach(function(i){var r=i.graphic,a=!r;if(void 0!==i.plotY){r||(i.graphic=r=t.renderer.path().add(e.group)),e.chart.styledMode||r.attr(e.pointAttribs(i,i.selected&&"select")).shadow(e.options.shadow);var s=r.strokeWidth()%2/2,o=Math.round(i.plotX)-s,l=i.plotOpen,c=i.plotClose,d=Math.min(l,c);l=Math.max(l,c);var u=Math.round(i.shapeArgs.width/2);c=n?l!==i.yBottom:Math.round(d)!==Math.round(i.plotHigh);var h=n?Math.round(d)!==Math.round(i.plotHigh):l!==i.yBottom;d=Math.round(d)+s,l=Math.round(l)+s,(s=[]).push("M",o-u,l,"L",o-u,d,"L",o+u,d,"L",o+u,l,"Z","M",o,d,"L",o,c?Math.round(n?i.yBottom:i.plotHigh):d,"M",o,l,"L",o,h?Math.round(n?i.plotHigh:i.yBottom):l),r[a?"attr":"animate"]({d:s}).addClass(i.getClassName(),!0)}})}})}),t(n,"mixins/on-series.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=e.seriesTypes,r=e.stableSort;return{getPlotBox:function(){return e.Series.prototype.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)},translate:function(){i.column.prototype.translate.apply(this);var e,t=this,a=t.options,s=t.chart,o=t.points,l=o.length-1,c=a.onSeries;c=c&&s.get(c),a=a.onKey||"y";var d,u=c&&c.options.step,h=c&&c.points,p=h&&h.length,m=s.inverted,g=t.xAxis,f=t.yAxis,v=0;if(c&&c.visible&&p){v=(c.pointXOffset||0)+(c.barW||0)/2,s=c.currentDataGrouping;var y=h[p-1].x+(s?s.totalRange:0);for(r(o,function(e,t){return e.x-t.x}),a="plot"+a[0].toUpperCase()+a.substr(1);p--&&o[l];){var b=h[p];if((s=o[l]).y=b.y,b.x<=s.x&&void 0!==b[a]){if(s.x<=y&&(s.plotY=b[a],b.x<s.x&&!u&&(d=h[p+1])&&void 0!==d[a])){var T=(s.x-b.x)/(d.x-b.x);s.plotY+=T*(d[a]-b[a]),s.y+=T*(d.y-b.y)}if(p++,0>--l)break}}}o.forEach(function(i,r){if(i.plotX+=v,(void 0===i.plotY||m)&&(0<=i.plotX&&i.plotX<=g.len?m?(i.plotY=g.translate(i.x,0,1,0,1),i.plotX=n(i.y)?f.translate(i.y,0,0,0,1):0):i.plotY=(g.opposite?0:t.yAxis.len)+g.offset:i.shapeArgs={}),(e=o[r-1])&&e.plotX===i.plotX){void 0===e.stackIndex&&(e.stackIndex=0);var a=e.stackIndex+1}i.stackIndex=a}),this.onSeries=c}}}),t(n,"parts/FlagsSeries.js",[n["parts/Globals.js"],n["parts/Utilities.js"],n["mixins/on-series.js"]],function(e,t,n){function i(e){m[e+"pin"]=function(t,n,i,r,a){var s=a&&a.anchorX;a=a&&a.anchorY,"circle"===e&&r>i&&(t-=Math.round((r-i)/2),i=r);var o=m[e](t,n,i,r);return s&&a&&(o.push("M","circle"===e?t+i/2:o[1]+o[4]/2,n>a?n:n+r,"L",s,a),o=o.concat(m.circle(s-1,a-1,2,2))),o}}var r=t.defined,a=t.isNumber,s=t.objectEach,o=e.addEvent,l=e.merge;t=e.noop;var c=e.Renderer,d=e.Series,u=e.seriesType,h=e.TrackerMixin,p=e.VMLRenderer,m=e.SVGRenderer.prototype.symbols;u("flags","column",{pointRange:0,allowOverlapX:!1,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd6eb"}},style:{fontSize:"11px",fontWeight:"bold"}},{sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:d.prototype.init,pointAttribs:function(e,t){var n=this.options,i=e&&e.color||this.color,r=n.lineColor,a=e&&e.lineWidth;return e=e&&e.fillColor||n.fillColor,t&&(e=n.states[t].fillColor,r=n.states[t].lineColor,a=n.states[t].lineWidth),{fill:e||i,stroke:r||i,"stroke-width":a||n.lineWidth||0}},translate:n.translate,getPlotBox:n.getPlotBox,drawPoints:function(){var t,n=this.points,i=this.chart,a=i.renderer,o=i.inverted,c=this.options,d=c.y,u=this.yAxis,h={},p=[];for(t=n.length;t--;){var m=n[t],g=(o?m.plotY:m.plotX)>this.xAxis.len,f=m.plotX,v=m.stackIndex,y=m.options.shape||c.shape,b=m.plotY;void 0!==b&&(b=m.plotY+d-(void 0!==v&&v*c.stackDistance)),m.anchorX=v?void 0:m.plotX;var T=v?void 0:m.plotY,S="flag"!==y;v=m.graphic,void 0!==b&&0<=f&&!g?(v||(v=m.graphic=a.label("",null,null,y,null,null,c.useHTML),i.styledMode||v.attr(this.pointAttribs(m)).css(l(c.style,m.style)),v.attr({align:S?"center":"left",width:c.width,height:c.height,"text-align":c.textAlign}).addClass("highcharts-point").add(this.markerGroup),m.graphic.div&&(m.graphic.div.point=m),i.styledMode||v.shadow(c.shadow),v.isNew=!0),0<f&&(f-=v.strokeWidth()%2),y={y:b,anchorY:T},c.allowOverlapX&&(y.x=f,y.anchorX=m.anchorX),v.attr({text:m.options.title||c.title||"A"})[v.isNew?"attr":"animate"](y),c.allowOverlapX||(h[m.plotX]?h[m.plotX].size=Math.max(h[m.plotX].size,v.width):h[m.plotX]={align:S?.5:0,size:v.width,target:f,anchorX:f}),m.tooltipPos=[f,b+u.pos-i.plotTop]):v&&(m.graphic=v.destroy())}c.allowOverlapX||(s(h,function(e){e.plotX=e.anchorX,p.push(e)}),e.distribute(p,o?u.len:this.xAxis.len,100),n.forEach(function(e){var t=e.graphic&&h[e.plotX];t&&(e.graphic[e.graphic.isNew?"attr":"animate"]({x:t.pos+t.align*t.size,anchorX:e.anchorX}),r(t.pos)?e.graphic.isNew=!1:(e.graphic.attr({x:-9999,anchorX:-9999}),e.graphic.isNew=!0))})),c.useHTML&&e.wrap(this.markerGroup,"on",function(t){return e.SVGElement.prototype.on.apply(t.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})},drawTracker:function(){var e=this.points;h.drawTrackerPoint.apply(this),e.forEach(function(t){var n=t.graphic;n&&o(n.element,"mouseover",function(){0<t.stackIndex&&!t.raised&&(t._y=n.y,n.attr({y:t._y-8}),t.raised=!0),e.forEach(function(e){e!==t&&e.raised&&e.graphic&&(e.graphic.attr({y:e._y}),e.raised=!1)})})})},animate:function(e){e?this.setClip():this.animate=null},setClip:function(){d.prototype.setClip.apply(this,arguments),!1!==this.options.clip&&this.sharedClipKey&&this.markerGroup.clip(this.chart[this.sharedClipKey])},buildKDTree:t,invertGroups:t},{isValid:function(){return a(this.y)||void 0===this.y}}),m.flag=function(e,t,n,i,r){var a=r&&r.anchorX||e;return r=r&&r.anchorY||t,m.circle(a-1,r-1,2,2).concat(["M",a,r,"L",e,t+i,e,t,e+n,t,e+n,t+i,e,t+i,"Z"])},i("circle"),i("square"),c===p&&["circlepin","flag","squarepin"].forEach(function(e){p.prototype.symbols[e]=m[e]})}),t(n,"parts/RangeSelector.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){function n(e){this.init(e)}var i=t.defined,r=t.isNumber,a=t.objectEach,s=t.pInt,o=t.splat,l=e.addEvent,c=e.Axis;t=e.Chart;var d=e.css,u=e.createElement,h=e.defaultOptions,p=e.destroyObjectProperties,m=e.discardElement,g=e.extend,f=e.fireEvent,v=e.merge,y=e.pick;g(h,{rangeSelector:{verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputPosition:{align:"right",x:0,y:0},buttonPosition:{align:"left",x:0,y:0},labelStyle:{color:"#666666"}}}),h.lang=v(h.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),n.prototype={clickButton:function(e,t){var n=this.chart,i=this.buttonOptions[e],a=n.xAxis[0],s=n.scroller&&n.scroller.getUnionExtremes()||a||{},d=s.dataMin,u=s.dataMax,h=a&&Math.round(Math.min(a.max,y(u,a.max))),p=i.type;s=i._range;var m,g=i.dataGrouping;if(null!==d&&null!==u){if(n.fixedRange=s,g&&(this.forcedDataGrouping=!0,c.prototype.setDataGrouping.call(a||{chart:this.chart},g,!1),this.frozenStates=i.preserveDataGrouping),"month"===p||"year"===p)if(a){p={range:i,max:h,chart:n,dataMin:d,dataMax:u};var f=a.minFromRange.call(p);r(p.newMax)&&(h=p.newMax)}else s=i;else if(s)f=Math.max(h-s,d),h=Math.min(f+s,u);else if("ytd"===p){if(!a)return void(this.deferredYTDClick=e);void 0===u&&(d=Number.MAX_VALUE,u=Number.MIN_VALUE,n.series.forEach(function(e){e=e.xData,d=Math.min(e[0],d),u=Math.max(e[e.length-1],u)}),t=!1),f=m=(h=this.getYTDExtremes(u,d,n.time.useUTC)).min,h=h.max}else"all"===p&&a&&(f=d,h=u);if(f+=i._offsetMin,h+=i._offsetMax,this.setSelected(e),a)a.setExtremes(f,h,y(t,1),null,{trigger:"rangeSelectorButton",rangeSelectorButton:i});else{var v=o(n.options.xAxis)[0],b=v.range;v.range=s;var T=v.min;v.min=m,l(n,"load",function(){v.range=b,v.min=T})}}},setSelected:function(e){this.selected=this.options.selected=e},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(e){var t=this,n=e.options.rangeSelector,i=n.buttons||[].concat(t.defaultButtons),r=n.selected,a=function(){var e=t.minInput,n=t.maxInput;e&&e.blur&&f(e,"blur"),n&&n.blur&&f(n,"blur")};t.chart=e,t.options=n,t.buttons=[],t.buttonOptions=i,this.unMouseDown=l(e.container,"mousedown",a),this.unResize=l(e,"resize",a),i.forEach(t.computeButtonRange),void 0!==r&&i[r]&&this.clickButton(r,!1),l(e,"load",function(){e.xAxis&&e.xAxis[0]&&l(e.xAxis[0],"setExtremes",function(n){this.max-this.min!==e.fixedRange&&"rangeSelectorButton"!==n.trigger&&"updatedData"!==n.trigger&&t.forcedDataGrouping&&!t.frozenStates&&this.setDataGrouping(!1,!1)})})},updateButtonStates:function(){var e=this,t=this.chart,n=t.xAxis[0],i=Math.round(n.max-n.min),a=!n.hasVisibleSeries,s=t.scroller&&t.scroller.getUnionExtremes()||n,o=s.dataMin,l=s.dataMax,c=(t=e.getYTDExtremes(l,o,t.time.useUTC)).min,d=t.max,u=e.selected,h=r(u),p=e.options.allButtonsEnabled,m=e.buttons;e.buttonOptions.forEach(function(t,r){var s=t._range,g=t.type,f=t.count||1,v=m[r],y=0,b=t._offsetMax-t._offsetMin;t=r===u;var T=s>l-o,S=s<n.minRange,C=!1,I=!1;s=s===i,("month"===g||"year"===g)&&i+36e5>=864e5*{month:28,year:365}[g]*f-b&&i-36e5<=864e5*{month:31,year:366}[g]*f+b?s=!0:"ytd"===g?(s=d-c+b===i,C=!t):"all"===g&&(s=n.max-n.min>=l-o,I=!t&&h&&s),g=!p&&(T||S||I||a),f=t&&s||s&&!h&&!C||t&&e.frozenStates,g?y=3:f&&(h=!0,y=2),v.state!==y&&(v.setState(y),0===y&&u===r&&e.setSelected(null))})},computeButtonRange:function(e){var t=e.type,n=e.count||1,i={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};i[t]?e._range=i[t]*n:"month"!==t&&"year"!==t||(e._range=864e5*{month:30,year:365}[t]*n),e._offsetMin=y(e.offsetMin,0),e._offsetMax=y(e.offsetMax,0),e._range+=e._offsetMax-e._offsetMin},setInputValue:function(e,t){var n=this.chart.options.rangeSelector,r=this.chart.time,a=this[e+"Input"];i(t)&&(a.previousValue=a.HCTime,a.HCTime=t),a.value=r.dateFormat(n.inputEditDateFormat||"%Y-%m-%d",a.HCTime),this[e+"DateBox"].attr({text:r.dateFormat(n.inputDateFormat||"%b %e, %Y",a.HCTime)})},showInput:function(e){var t=this.inputGroup,n=this[e+"DateBox"];d(this[e+"Input"],{left:t.translateX+n.x+"px",top:t.translateY+"px",width:n.width-2+"px",height:n.height-2+"px",border:"2px solid silver"})},hideInput:function(e){d(this[e+"Input"],{border:0,width:"1px",height:"1px"}),this.setInputValue(e)},drawInput:function(t){function n(){var e=i.value,t=(m.inputDateParser||Date.parse)(e),n=l.xAxis[0],a=l.scroller&&l.scroller.xAxis?l.scroller.xAxis:n,c=a.dataMin;a=a.dataMax,t!==i.previousValue&&(i.previousValue=t,r(t)||(t=e.split("-"),t=Date.UTC(s(t[0]),s(t[1])-1,s(t[2]))),r(t)&&(l.time.useUTC||(t+=6e4*(new Date).getTimezoneOffset()),y?t>o.maxInput.HCTime?t=void 0:t<c&&(t=c):t<o.minInput.HCTime?t=void 0:t>a&&(t=a),void 0!==t&&n.setExtremes(y?t:n.min,y?n.max:t,void 0,void 0,{trigger:"rangeSelectorInput"})))}var i,a,o=this,l=o.chart,c=l.renderer.style||{},p=l.renderer,m=l.options.rangeSelector,f=o.div,y="min"===t,b=this.inputGroup;this[t+"Label"]=a=p.label(h.lang[y?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).addClass("highcharts-range-label").attr({padding:2}).add(b),b.offset+=a.width+5,this[t+"DateBox"]=p=p.label("",b.offset).addClass("highcharts-range-input").attr({padding:2,width:m.inputBoxWidth||90,height:m.inputBoxHeight||17,"text-align":"center"}).on("click",function(){o.showInput(t),o[t+"Input"].focus()}),l.styledMode||p.attr({stroke:m.inputBoxBorderColor||"#cccccc","stroke-width":1}),p.add(b),b.offset+=p.width+(y?10:0),this[t+"Input"]=i=u("input",{name:t,className:"highcharts-range-selector",type:"text"},{top:l.plotTop+"px"},f),l.styledMode||(a.css(v(c,m.labelStyle)),p.css(v({color:"#333333"},c,m.inputStyle)),d(i,g({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:c.fontSize,fontFamily:c.fontFamily,top:"-9999em"},m.inputStyle))),i.onfocus=function(){o.showInput(t)},i.onblur=function(){i===e.doc.activeElement&&n(),o.hideInput(t),i.blur()},i.onchange=n,i.onkeypress=function(e){13===e.keyCode&&n()}},getPosition:function(){var e=this.chart,t=e.options.rangeSelector;return{buttonTop:(e="top"===t.verticalAlign?e.plotTop-e.axisOffset[0]:0)+t.buttonPosition.y,inputTop:e+t.inputPosition.y-10}},getYTDExtremes:function(e,t,n){var i=this.chart.time,r=new i.Date(e),a=i.get("FullYear",r);return n=n?i.Date.UTC(a,0,1):+new i.Date(a,0,1),t=Math.max(t||0,n),r=r.getTime(),{max:Math.min(e||r,r),min:t}},render:function(e,t){var n=this,i=n.chart,r=i.renderer,a=i.container,s=i.options,o=s.exporting&&!1!==s.exporting.enabled&&s.navigation&&s.navigation.buttonOptions,l=h.lang,c=n.div,d=s.rangeSelector,p=y(s.chart.style&&s.chart.style.zIndex,0)+1;s=d.floating;var m=n.buttons;c=n.inputGroup;var g,f=d.buttonTheme,v=d.buttonPosition,b=d.inputPosition,T=d.inputEnabled,S=f&&f.states,C=i.plotLeft,I=n.buttonGroup,_=n.rendered,M=n.options.verticalAlign,E=i.legend,w=E&&E.options,A=v.y,D=b.y,O=_||!1,k=O?"animate":"attr",R=0,N=0;if(!1!==d.enabled){_||(n.group=_=r.g("range-selector-group").attr({zIndex:7}).add(),n.buttonGroup=I=r.g("range-selector-buttons").add(_),n.zoomText=r.text(l.rangeSelectorZoom,0,15).add(I),i.styledMode||(n.zoomText.css(d.labelStyle),f["stroke-width"]=y(f["stroke-width"],0)),n.buttonOptions.forEach(function(e,t){m[t]=r.button(e.text,0,0,function(i){var r,a=e.events&&e.events.click;a&&(r=a.call(e,i)),!1!==r&&n.clickButton(t),n.isActive=!0},f,S&&S.hover,S&&S.select,S&&S.disabled).attr({"text-align":"center"}).add(I)}),!1!==T&&(n.div=c=u("div",null,{position:"relative",height:0,zIndex:p}),a.parentNode.insertBefore(c,a),n.inputGroup=c=r.g("input-group").add(_),c.offset=0,n.drawInput("min"),n.drawInput("max"))),n.zoomText[k]({x:y(C+v.x,C)});var L=y(C+v.x,C)+n.zoomText.getBBox().width+5;n.buttonOptions.forEach(function(e,t){m[t][k]({x:L}),L+=m[t].width+y(d.buttonSpacing,5)}),C=i.plotLeft-i.spacing[3],n.updateButtonStates(),o&&this.titleCollision(i)&&"top"===M&&"right"===v.align&&v.y+I.getBBox().height-12<(o.y||0)+o.height&&(R=-40),"left"===v.align?g=v.x-i.spacing[3]:"right"===v.align&&(g=v.x+R-i.spacing[1]),I.align({y:v.y,width:I.getBBox().width,align:v.align,x:g},!0,i.spacingBox),n.group.placed=O,n.buttonGroup.placed=O,!1!==T&&(R=o&&this.titleCollision(i)&&"top"===M&&"right"===b.align&&b.y-c.getBBox().height-12<(o.y||0)+o.height+i.spacing[0]?-40:0,"left"===b.align?g=C:"right"===b.align&&(g=-Math.max(i.axisOffset[1],-R)),c.align({y:b.y,width:c.getBBox().width,align:b.align,x:b.x+g-2},!0,i.spacingBox),a=c.alignAttr.translateX+c.alignOptions.x-R+c.getBBox().x+2,o=c.alignOptions.width,l=I.alignAttr.translateX+I.getBBox().x,g=I.getBBox().width+20,(b.align===v.align||l+g>a&&a+o>l&&A<D+c.getBBox().height)&&c.attr({translateX:c.alignAttr.translateX+(i.axisOffset[1]>=-R?0:-R),translateY:c.alignAttr.translateY+I.getBBox().height+10}),n.setInputValue("min",e),n.setInputValue("max",t),n.inputGroup.placed=O),n.group.align({verticalAlign:M},!0,i.spacingBox),e=n.group.getBBox().height+20,t=n.group.alignAttr.translateY,"bottom"===M&&(N=t-(e=e+(E=w&&"bottom"===w.verticalAlign&&w.enabled&&!w.floating?E.legendHeight+y(w.margin,10):0)-20)-(s?0:d.y)-(i.titleOffset?i.titleOffset[2]:0)-10),"top"===M?(s&&(N=0),i.titleOffset&&i.titleOffset[0]&&(N=i.titleOffset[0]),N+=i.margin[0]-i.spacing[0]||0):"middle"===M&&(D===A?N=0>D?t+void 0:t:(D||A)&&(N=0>D||0>A?N-Math.min(D,A):t-e+NaN)),n.group.translate(d.x,d.y+Math.floor(N)),!1!==T&&(n.minInput.style.marginTop=n.group.translateY+"px",n.maxInput.style.marginTop=n.group.translateY+"px"),n.rendered=!0}},getHeight:function(){var e=this.options,t=this.group,n=e.y,i=e.buttonPosition.y,r=e.inputPosition.y;return e.height?e.height:(e=t?t.getBBox(!0).height+13+n:0,t=Math.min(r,i),(0>r&&0>i||0<r&&0<i)&&(e+=Math.abs(t)),e)},titleCollision:function(e){return!(e.options.title.text||e.options.subtitle.text)},update:function(e){var t=this.chart;v(!0,t.options.rangeSelector,e),this.destroy(),this.init(t),t.rangeSelector.render()},destroy:function(){var e=this,t=e.minInput,i=e.maxInput;e.unMouseDown(),e.unResize(),p(e.buttons),t&&(t.onfocus=t.onblur=t.onchange=null),i&&(i.onfocus=i.onblur=i.onchange=null),a(e,function(t,i){t&&"chart"!==i&&(t.destroy?t.destroy():t.nodeType&&m(this[i])),t!==n.prototype[i]&&(e[i]=null)},this)}},c.prototype.minFromRange=function(){var e=this.range,t={month:"Month",year:"FullYear"}[e.type],n=this.max,i=this.chart.time,a=function(e,n){var r=new i.Date(e),a=i.get(t,r);return i.set(t,r,a+n),a===i.get(t,r)&&i.set("Date",r,0),r.getTime()-e};if(r(e))var s=n-e,o=e;else s=n+a(n,-e.count),this.chart&&(this.chart.fixedRange=n-s);var l=y(this.dataMin,Number.MIN_VALUE);return r(s)||(s=l),s<=l&&(s=l,void 0===o&&(o=a(s,e.count)),this.newMax=Math.min(s+o,this.dataMax)),r(n)||(s=void 0),s},e.RangeSelector||(l(t,"afterGetContainer",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new n(this))}),l(t,"beforeRender",function(){var e=this.axes,t=this.rangeSelector;t&&(r(t.deferredYTDClick)&&(t.clickButton(t.deferredYTDClick),delete t.deferredYTDClick),e.forEach(function(e){e.updateNames(),e.setScale()}),this.getAxisMargins(),t.render(),e=t.options.verticalAlign,t.options.floating||("bottom"===e?this.extraBottomMargin=!0:"middle"!==e&&(this.extraTopMargin=!0)))}),l(t,"update",function(e){var t=e.options.rangeSelector;e=this.rangeSelector;var r=this.extraBottomMargin,a=this.extraTopMargin;t&&t.enabled&&!i(e)&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=new n(this)),this.extraTopMargin=this.extraBottomMargin=!1,e&&(e.render(),t=t&&t.verticalAlign||e.options&&e.options.verticalAlign,e.options.floating||("bottom"===t?this.extraBottomMargin=!0:"middle"!==t&&(this.extraTopMargin=!0)),this.extraBottomMargin!==r||this.extraTopMargin!==a)&&(this.isDirtyBox=!0)}),l(t,"render",function(){var e=this.rangeSelector;e&&!e.options.floating&&(e.render(),"bottom"===(e=e.options.verticalAlign)?this.extraBottomMargin=!0:"middle"!==e&&(this.extraTopMargin=!0))}),l(t,"getMargins",function(){var e=this.rangeSelector;e&&(e=e.getHeight(),this.extraTopMargin&&(this.plotTop+=e),this.extraBottomMargin&&(this.marginBottom+=e))}),t.prototype.callbacks.push(function(e){function t(){n=e.xAxis[0].getExtremes(),r(n.min)&&i.render(n.min,n.max)}var n,i=e.rangeSelector;if(i){var a=l(e.xAxis[0],"afterSetExtremes",function(e){i.render(e.min,e.max)}),s=l(e,"redraw",t);t()}l(e,"destroy",function(){i&&(s(),a())})}),e.RangeSelector=n)}),t(n,"parts/StockChart.js",[n["parts/Globals.js"],n["parts/Utilities.js"]],function(e,t){var n=t.defined,i=t.isNumber,r=t.isString,a=t.splat;t=e.addEvent;var s=e.arrayMax,o=e.arrayMin,l=e.Axis,c=e.Chart,d=e.extend,u=e.format,h=e.merge,p=e.pick,m=e.Point,g=e.Renderer,f=e.Series,v=e.SVGRenderer,y=e.VMLRenderer,b=f.prototype,T=b.init,S=b.processData,C=m.prototype.tooltipFormatter;e.StockChart=e.stockChart=function(t,n,i){var s,o=r(t)||t.nodeName,l=arguments[o?1:0],d=l,u=l.series,m=e.getOptions(),g=p(l.navigator&&l.navigator.enabled,m.navigator.enabled,!0),f=g?{startOnTick:!1,endOnTick:!1}:null;return l.xAxis=a(l.xAxis||{}).map(function(e,t){return h({minPadding:0,maxPadding:0,overscroll:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},m.xAxis,m.xAxis&&m.xAxis[t],e,{type:"datetime",categories:null},f)}),l.yAxis=a(l.yAxis||{}).map(function(e,t){return s=p(e.opposite,!0),h({labels:{y:-2},opposite:s,showLastLabel:!(!e.categories&&"category"!==e.type),title:{text:null}},m.yAxis,m.yAxis&&m.yAxis[t],e)}),l.series=null,(l=h({chart:{panning:!0,pinchType:"x"},navigator:{enabled:g},scrollbar:{enabled:p(m.scrollbar.enabled,!0)},rangeSelector:{enabled:p(m.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:p(m.tooltip.split,!0),crosshairs:!0},legend:{enabled:!1}},l,{isStock:!0})).series=d.series=u,o?new c(t,l,i):new c(l,n)},t(f,"setOptions",function(t){function n(t){return e.seriesTypes[t]&&r instanceof e.seriesTypes[t]}var i,r=this;this.chart.options.isStock&&(n("column")||n("columnrange")?i={borderWidth:0,shadow:!1}:!n("line")||n("scatter")||n("sma")||(i={marker:{enabled:!1,radius:2}}),i&&(t.plotOptions[this.type]=h(t.plotOptions[this.type],i)))}),t(l,"autoLabelAlign",function(e){var t=this.chart,n=this.options;t=t._labelPanes=t._labelPanes||{};var i=this.options.labels;this.chart.options.isStock&&"yAxis"===this.coll&&(!t[n=n.top+","+n.height]&&i.enabled&&(15===i.x&&(i.x=0),void 0===i.align&&(i.align="right"),t[n]=this,e.align="right",e.preventDefault()))}),t(l,"destroy",function(){var e=this.chart,t=this.options&&this.options.top+","+this.options.height;t&&e._labelPanes&&e._labelPanes[t]===this&&delete e._labelPanes[t]}),t(l,"getPlotLinePath",function(t){var a,s,o,l,c=this,d=this.isLinked&&!this.series?this.linkedParent.series:this.series,u=c.chart,h=u.renderer,m=c.left,g=c.top,f=[],v=[],y=t.translatedValue,b=t.value,T=t.force;if(u.options.isStock&&!1!==t.acrossPanes&&"xAxis"===c.coll||"yAxis"===c.coll){t.preventDefault(),v=function(e){var t="xAxis"===e?"yAxis":"xAxis";return e=c.options[t],i(e)?[u[t][e]]:r(e)?[u.get(e)]:d.map(function(e){return e[t]})}(c.coll),(c.isXAxis?u.yAxis:u.xAxis).forEach(function(e){if(!n(e.options.id)||-1===e.options.id.indexOf("navigator")){var t=e.isXAxis?"yAxis":"xAxis";t=n(e.options[t])?u[t][e.options[t]]:u[t][0],c===t&&v.push(e)}});var S=v.length?[]:[c.isXAxis?u.yAxis[0]:u.xAxis[0]];v.forEach(function(t){-1!==S.indexOf(t)||e.find(S,function(e){return e.pos===t.pos&&e.len===t.len})||S.push(t)});var C=p(y,c.translate(b,null,null,t.old));i(C)&&(c.horiz?S.forEach(function(e){var t;s=e.pos,l=s+e.len,a=o=Math.round(C+c.transB),"pass"!==T&&(a<m||a>m+c.width)&&(T?a=o=Math.min(Math.max(m,a),m+c.width):t=!0),t||f.push("M",a,s,"L",o,l)}):S.forEach(function(e){var t;a=e.pos,o=a+e.len,s=l=Math.round(g+c.height-C),"pass"!==T&&(s<g||s>g+c.height)&&(T?s=l=Math.min(Math.max(g,s),c.top+c.height):t=!0),t||f.push("M",a,s,"L",o,l)})),t.path=0<f.length?h.crispPolyLine(f,t.lineWidth||1):null}}),v.prototype.crispPolyLine=function(e,t){var n;for(n=0;n<e.length;n+=6)e[n+1]===e[n+4]&&(e[n+1]=e[n+4]=Math.round(e[n+1])-t%2/2),e[n+2]===e[n+5]&&(e[n+2]=e[n+5]=Math.round(e[n+2])+t%2/2);return e},g===y&&(y.prototype.crispPolyLine=v.prototype.crispPolyLine),t(l,"afterHideCrosshair",function(){this.crossLabel&&(this.crossLabel=this.crossLabel.hide())}),t(l,"afterDrawCrosshair",function(e){var t,i;if(n(this.crosshair.label)&&this.crosshair.label.enabled&&this.cross){var r=this.chart,a=this.options.crosshair.label,s=this.horiz,o=this.opposite,l=this.left,c=this.top,h=this.crossLabel,m=a.format,g="",f="inside"===this.options.tickPosition,v=!1!==this.crosshair.snap,y=0,b=e.e||this.cross&&this.cross.e,T=e.point,S=this.lin2log;if(this.isLog){e=S(this.min);var C=S(this.max)}else e=this.min,C=this.max;S=s?"center":o?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center",h||(h=this.crossLabel=r.renderer.label(null,null,null,a.shape||"callout").addClass("highcharts-crosshair-label"+(this.series[0]&&" highcharts-color-"+this.series[0].colorIndex)).attr({align:a.align||S,padding:p(a.padding,8),r:p(a.borderRadius,3),zIndex:2}).add(this.labelGroup),r.styledMode||h.attr({fill:a.backgroundColor||this.series[0]&&this.series[0].color||"#666666",stroke:a.borderColor||"","stroke-width":a.borderWidth||0}).css(d({color:"#ffffff",fontWeight:"normal",fontSize:"11px",textAlign:"center"},a.style))),s?(S=v?T.plotX+l:b.chartX,c+=o?0:this.height):(S=o?this.width+l:0,c=v?T.plotY+c:b.chartY),m||a.formatter||(this.isDatetimeAxis&&(g="%b %d, %Y"),m="{value"+(g?":"+g:"")+"}"),g=v?T[this.isXAxis?"x":"y"]:this.toValue(s?b.chartX:b.chartY),h.attr({text:m?u(m,{value:g},r.time):a.formatter.call(this,g),x:S,y:c,visibility:g<e||g>C?"hidden":"visible"}),a=h.getBBox(),s?(f&&!o||!f&&o)&&(c=h.y-a.height):c=h.y-a.height/2,s?(t=l-a.x,i=l+this.width-a.x):(t="left"===this.labelAlign?l:0,i="right"===this.labelAlign?l+this.width:r.chartWidth),h.translateX<t&&(y=t-h.translateX),h.translateX+a.width>=i&&(y=-(h.translateX+a.width-i)),h.attr({x:S+y,y:c,anchorX:s?S:this.opposite?0:r.chartWidth,anchorY:s?this.opposite?r.chartHeight:0:c+a.height/2})}}),b.init=function(){T.apply(this,arguments),this.setCompare(this.options.compare)},b.setCompare=function(e){this.modifyValue="value"===e||"percent"===e?function(t,n){var i=this.compareValue;if(void 0!==t&&void 0!==i)return t="value"===e?t-i:t/i*100-(100===this.options.compareBase?0:100),n&&(n.change=t),t}:null,this.userOptions.compare=e,this.chart.hasRendered&&(this.isDirty=!0)},b.processData=function(e){var t,n=-1,r=!0===this.options.compareStart?0:1;if(S.apply(this,arguments),this.xAxis&&this.processedYData){var a=this.processedXData,s=this.processedYData,o=s.length;for(this.pointArrayMap&&(n=this.pointArrayMap.indexOf(this.options.pointValKey||this.pointValKey||"y")),t=0;t<o-r;t++){var l=s[t]&&-1<n?s[t][n]:s[t];if(i(l)&&a[t+r]>=this.xAxis.min&&0!==l){this.compareValue=l;break}}}},t(f,"afterGetExtremes",function(){if(this.modifyValue){var e=[this.modifyValue(this.dataMin),this.modifyValue(this.dataMax)];this.dataMin=o(e),this.dataMax=s(e)}}),l.prototype.setCompare=function(e,t){this.isXAxis||(this.series.forEach(function(t){t.setCompare(e)}),p(t,!0)&&this.chart.redraw())},m.prototype.tooltipFormatter=function(t){return t=t.replace("{point.change}",(0<this.change?"+":"")+e.numberFormat(this.change,p(this.series.tooltipOptions.changeDecimals,2))),C.apply(this,[t])},t(f,"render",function(){var e=this.chart;if(!(e.is3d&&e.is3d()||e.polar)&&this.xAxis&&!this.xAxis.isRadial){var t=this.yAxis.len;if(this.xAxis.axisLine){var n=e.plotTop+e.plotHeight-this.yAxis.pos-this.yAxis.len,i=Math.floor(this.xAxis.axisLine.strokeWidth()/2);0<=n&&(t-=Math.max(i-n,0))}!this.clipBox&&this.animate?(this.clipBox=h(e.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=t):e[this.sharedClipKey]&&(e[this.sharedClipKey].animate({width:this.xAxis.len,height:t}),e[this.sharedClipKey+"m"]&&e[this.sharedClipKey+"m"].animate({width:this.xAxis.len}))}}),t(c,"update",function(e){"scrollbar"in(e=e.options)&&this.navigator&&(h(!0,this.options.scrollbar,e.scrollbar),this.navigator.update({},!1),delete e.scrollbar)})}),t(n,"masters/modules/stock.src.js",[],function(){}),t(n,"masters/highstock.src.js",[n["masters/highcharts.src.js"]],function(e){return e.product="Highstock",e}),n["masters/highstock.src.js"]._modules=n,n["masters/highstock.src.js"]}),function(e){"object"==typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):e(Highcharts)}(function(e){!function(e){var t=e.defaultOptions,n=e.doc,i=e.Chart,r=e.addEvent,a=e.removeEvent,s=e.fireEvent,o=e.createElement,l=e.discardElement,c=e.css,d=e.merge,u=e.pick,h=e.each,p=e.objectEach,m=e.extend,g=e.win,f=g.navigator.userAgent,v=e.SVGRenderer,y=e.Renderer.prototype.symbols,b=/Edge\/|Trident\/|MSIE /.test(f),T=/firefox/i.test(f);m(t.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),t.navigation={buttonOptions:{theme:{},symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24}},t.exporting={type:"image/png",url:"https://export.highcharts.com/",printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:"printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},e.post=function(e,t,i){var r=o("form",d({method:"post",action:e,enctype:"multipart/form-data"},i),{display:"none"},n.body);p(t,function(e,t){o("input",{type:"hidden",name:t,value:e},null,r)}),r.submit(),l(r)},m(i.prototype,{sanitizeSVG:function(e,t){if(t&&t.exporting&&t.exporting.allowHTML){var n=e.match(/<\/svg>(.*?$)/);n&&n[1]&&(n='<foreignObject x="0" y="0" width="'+t.chart.width+'" height="'+t.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+n[1]+"</body></foreignObject>",e=e.replace("</svg>",n+"</svg>"))}return e.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(\S+)("|&quot;)\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+\:)href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xa0").replace(/&shy;/g,"\xad")},getChartHTML:function(){return this.inlineStyles(),this.container.innerHTML},getSVG:function(t){var i,r,a,c,u,p=d(this.options,t);return r=o("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},n.body),a=this.renderTo.style.width,u=this.renderTo.style.height,a=p.exporting.sourceWidth||p.chart.width||/px$/.test(a)&&parseInt(a,10)||600,u=p.exporting.sourceHeight||p.chart.height||/px$/.test(u)&&parseInt(u,10)||400,m(p.chart,{animation:!1,renderTo:r,forExport:!0,renderer:"SVGRenderer",width:a,height:u}),p.exporting.enabled=!1,delete p.data,p.series=[],h(this.series,function(e){(c=d(e.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:e.visible})).isInternal||p.series.push(c)}),h(this.axes,function(t){t.userOptions.internalKey||(t.userOptions.internalKey=e.uniqueKey())}),i=new e.Chart(p,this.callback),t&&h(["xAxis","yAxis","series"],function(e){var n={};t[e]&&(n[e]=t[e],i.update(n))}),h(this.axes,function(t){var n=e.find(i.axes,function(e){return e.options.internalKey===t.userOptions.internalKey}),r=(a=t.getExtremes()).userMin,a=a.userMax;n&&(void 0!==r&&r!==n.min||void 0!==a&&a!==n.max)&&n.setExtremes(r,a,!0,!1)}),a=i.getChartHTML(),s(this,"getSVG",{chartCopy:i}),a=this.sanitizeSVG(a,p),p=null,i.destroy(),l(r),a},getSVGForExport:function(e,t){var n=this.options.exporting;return this.getSVG(d({chart:{borderRadius:0}},n.chartOptions,t,{exporting:{sourceWidth:e&&e.sourceWidth||n.sourceWidth,sourceHeight:e&&e.sourceHeight||n.sourceHeight}}))},exportChart:function(t,n){n=this.getSVGForExport(t,n),t=d(this.options.exporting,t),e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale,svg:n},t.formAttributes)},print:function(){var e,t,i=this,r=i.container,a=[],o=r.parentNode,l=n.body,c=l.childNodes,d=i.options.exporting.printMaxWidth;i.isPrinting||(i.isPrinting=!0,i.pointer.reset(null,0),s(i,"beforePrint"),(t=d&&i.chartWidth>d)&&(e=[i.options.chart.width,void 0,!1],i.setSize(d,void 0,!1)),h(c,function(e,t){1===e.nodeType&&(a[t]=e.style.display,e.style.display="none")}),l.appendChild(r),setTimeout(function(){g.focus(),g.print(),setTimeout(function(){o.appendChild(r),h(c,function(e,t){1===e.nodeType&&(e.style.display=a[t])}),i.isPrinting=!1,t&&i.setSize.apply(i,e),s(i,"afterPrint")},1e3)},1))},contextMenu:function(t,i,a,s,l,d,u){var p,m=this,g=m.chartWidth,f=m.chartHeight,v="cache-"+t,y=m[v],b=Math.max(l,d);y||(m.exportContextMenu=m[v]=y=o("div",{className:t},{position:"absolute",zIndex:1e3,padding:b+"px",pointerEvents:"auto"},m.fixedDiv||m.container),p=o("div",{className:"highcharts-menu"},null,y),y.hideMenu=function(){c(y,{display:"none"}),u&&u.setState(0),m.openMenu=!1,e.clearTimeout(y.hideTimer)},m.exportEvents.push(r(y,"mouseleave",function(){y.hideTimer=setTimeout(y.hideMenu,500)}),r(y,"mouseenter",function(){e.clearTimeout(y.hideTimer)}),r(n,"mouseup",function(e){m.pointer.inClass(e.target,t)||y.hideMenu()}),r(y,"click",function(){m.openMenu&&y.hideMenu()})),h(i,function(t){var n;("string"==typeof t&&(t=m.options.exporting.menuItemDefinitions[t]),e.isObject(t,!0))&&(n=t.separator?o("hr",null,null,p):o("div",{className:"highcharts-menu-item",onclick:function(e){e&&e.stopPropagation(),y.hideMenu(),t.onclick&&t.onclick.apply(m,arguments)},innerHTML:t.text||m.options.lang[t.textKey]},null,p),m.exportDivElements.push(n))}),m.exportDivElements.push(p,y),m.exportMenuWidth=y.offsetWidth,m.exportMenuHeight=y.offsetHeight),i={display:"block"},a+m.exportMenuWidth>g?i.right=g-a-l-b+"px":i.left=a-b+"px",s+d+m.exportMenuHeight>f&&"top"!==u.alignOptions.verticalAlign?i.bottom=f-s-b+"px":i.top=s+d-b+"px",c(y,i),m.openMenu=!0},addButton:function(e){var t,n,i=this,r=i.renderer,a=d(i.options.navigation.buttonOptions,e),s=a.onclick,o=a.menuItems,l=a.symbolSize||12;if(i.btnCount||(i.btnCount=0),i.exportDivElements||(i.exportDivElements=[],i.exportSVGElements=[]),!1!==a.enabled){var c,h=a.theme,p=(g=h.states)&&g.hover,g=g&&g.select;delete h.states,s?c=function(e){e&&e.stopPropagation(),s.call(i,e)}:o&&(c=function(e){e&&e.stopPropagation(),i.contextMenu(n.menuClassName,o,n.translateX,n.translateY,n.width,n.height,n),n.setState(2)}),a.text&&a.symbol?h.paddingLeft=u(h.paddingLeft,25):a.text||m(h,{width:a.width,height:a.height,padding:0}),(n=r.button(a.text,0,0,c,h,p,g).addClass(e.className).attr({title:u(i.options.lang[a._titleKey||a.titleKey],"")})).menuClassName=e.menuClassName||"highcharts-menu-"+i.btnCount++,a.symbol&&(t=r.symbol(a.symbol,a.symbolX-l/2,a.symbolY-l/2,l,l,{width:l,height:l}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(n)),n.add(i.exportingGroup).align(m(a,{width:n.width,x:u(a.x,i.buttonOffset)}),!0,"spacingBox"),i.buttonOffset+=(n.width+a.buttonSpacing)*("right"===a.align?-1:1),i.exportSVGElements.push(n,t)}},destroyExport:function(t){var n=t?t.target:this;t=n.exportSVGElements;var i,r=n.exportDivElements,s=n.exportEvents;t&&(h(t,function(e,t){e&&(e.onclick=e.ontouchstart=null,i="cache-"+e.menuClassName,n[i]&&delete n[i],n.exportSVGElements[t]=e.destroy())}),t.length=0),n.exportingGroup&&(n.exportingGroup.destroy(),delete n.exportingGroup),r&&(h(r,function(t,i){e.clearTimeout(t.hideTimer),a(t,"mouseleave"),n.exportDivElements[i]=t.onmouseout=t.onmouseover=t.ontouchstart=t.onclick=null,l(t)}),r.length=0),s&&(h(s,function(e){e()}),s.length=0)}}),v.prototype.inlineToAttributes="fill stroke strokeLinecap strokeLinejoin strokeWidth textAnchor x y".split(" "),v.prototype.inlineBlacklist=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/],v.prototype.unstyledElements=["clipPath","defs","desc"],i.prototype.inlineStyles=function(){function e(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}var t,i,r=(u=this.renderer).inlineToAttributes,a=u.inlineBlacklist,s=u.inlineWhitelist,o=u.unstyledElements,l={},u=n.createElement("iframe");c(u,{width:"1px",height:"1px",visibility:"hidden"}),n.body.appendChild(u),(i=u.contentWindow.document).open(),i.write('<svg xmlns="http://www.w3.org/2000/svg"></svg>'),i.close(),function n(c){function u(t,n){if(y=S=!1,s){for(C=s.length;C--&&!S;)S=s[C].test(n);y=!S}for("transform"===n&&"none"===t&&(y=!0),C=a.length;C--&&!y;)y=a[C].test(n)||"function"==typeof t;y||f[n]===t&&"svg"!==c.nodeName||l[c.nodeName][n]===t||(-1!==r.indexOf(n)?c.setAttribute(e(n),t):I+=e(n)+":"+t+";")}var m,f,v,y,S,C,I="";if(1===c.nodeType&&-1===o.indexOf(c.nodeName)){if(m=g.getComputedStyle(c,null),f="svg"===c.nodeName?{}:g.getComputedStyle(c.parentNode,null),l[c.nodeName]||(t=i.getElementsByTagName("svg")[0],v=i.createElementNS(c.namespaceURI,c.nodeName),t.appendChild(v),l[c.nodeName]=d(g.getComputedStyle(v,null)),"text"===c.nodeName&&delete l.text.fill,t.removeChild(v)),T||b)for(var _ in m)u(m[_],_);else p(m,u);I&&(m=c.getAttribute("style"),c.setAttribute("style",(m?m+";":"")+I)),"svg"===c.nodeName&&c.setAttribute("stroke-width","1px"),"text"!==c.nodeName&&h(c.children||c.childNodes,n)}}(this.container.querySelector("svg")),t.parentNode.removeChild(t)},y.menu=function(e,t,n,i){return["M",e,t+2.5,"L",e+n,t+2.5,"M",e,t+i/2+.5,"L",e+n,t+i/2+.5,"M",e,t+i-1.5,"L",e+n,t+i-1.5]},i.prototype.renderExporting=function(){var e=this,t=e.options.exporting,n=t.buttons,i=e.isDirtyExporting||!e.exportSVGElements;e.buttonOffset=0,e.isDirtyExporting&&e.destroyExport(),i&&!1!==t.enabled&&(e.exportEvents=[],e.exportingGroup=e.exportingGroup||e.renderer.g("exporting-group").attr({zIndex:3}).add(),p(n,function(t){e.addButton(t)}),e.isDirtyExporting=!1),r(e,"destroy",e.destroyExport)},r(i,"init",function(){var e=this;h(["exporting","navigation"],function(t){e[t]={update:function(n,i){e.isDirtyExporting=!0,d(!0,e.options[t],n),u(i,!0)&&e.redraw()}}})}),i.prototype.callbacks.push(function(e){e.renderExporting(),r(e,"redraw",e.renderExporting)})}(e)}),function(e){"object"==typeof module&&module.exports?(e.default=e,module.exports=e):"function"==typeof define&&define.amd?define("highcharts/modules/offline-exporting",["highcharts","highcharts/modules/exporting"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(e,t,n,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,n))}t(e=e?e._modules:{},"mixins/download-url.js",[e["parts/Globals.js"]],function(e){var t=e.win,n=t.navigator,i=t.document,r=t.URL||t.webkitURL||t,a=/Edge\/\d+/.test(n.userAgent);e.dataURLtoBlob=function(e){if((e=e.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<e.length&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&t.Blob&&r.createObjectURL){var n=t.atob(e[3]),i=new t.ArrayBuffer(n.length);i=new t.Uint8Array(i);for(var a=0;a<i.length;++a)i[a]=n.charCodeAt(a);return e=new t.Blob([i],{type:e[1]}),r.createObjectURL(e)}},e.downloadURL=function(r,s){var o=i.createElement("a");if("string"==typeof r||r instanceof String||!n.msSaveOrOpenBlob){if((a||2e6<r.length)&&!(r=e.dataURLtoBlob(r)))throw Error("Failed to convert to blob");if(void 0!==o.download)o.href=r,o.download=s,i.body.appendChild(o),o.click(),i.body.removeChild(o);else try{var l=t.open(r,"chart");if(null==l)throw Error("Failed to open window")}catch(e){t.location.href=r}}else n.msSaveOrOpenBlob(r,s)}}),t(e,"modules/offline-exporting.src.js",[e["parts/Globals.js"]],function(e){function t(t,n){var i=s.getElementsByTagName("head")[0],r=s.createElement("script");r.type="text/javascript",r.src=t,r.onload=n,r.onerror=function(){e.error("Error loading script "+t)},i.appendChild(r)}var n=e.addEvent,i=e.merge,r=e.win,a=r.navigator,s=r.document,o=r.URL||r.webkitURL||r,l=/Edge\/|Trident\/|MSIE /.test(a.userAgent),c=l?150:0;e.CanVGRenderer={},e.svgToDataUrl=function(e){var t=-1<a.userAgent.indexOf("WebKit")&&0>a.userAgent.indexOf("Chrome");try{if(!t&&0>a.userAgent.toLowerCase().indexOf("firefox"))return o.createObjectURL(new r.Blob([e],{type:"image/svg+xml;charset-utf-16"}))}catch(e){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e)},e.imageToDataUrl=function(e,t,n,i,a,o,l,d,u){var h=new r.Image,p=function(){setTimeout(function(){var r=s.createElement("canvas"),o=r.getContext&&r.getContext("2d");try{if(o){r.height=h.height*i,r.width=h.width*i,o.drawImage(h,0,0,r.width,r.height);try{var c=r.toDataURL(t);a(c,t,n,i)}catch(r){g(e,t,n,i)}}else l(e,t,n,i)}finally{u&&u(e,t,n,i)}},c)},m=function(){d(e,t,n,i),u&&u(e,t,n,i)},g=function(){h=new r.Image,g=o,h.crossOrigin="Anonymous",h.onload=p,h.onerror=m,h.src=e};h.onload=p,h.onerror=m,h.src=e},e.downloadSVGLocal=function(n,i,l,c){function d(e,t){return t=new r.jsPDF("l","pt",[e.width.baseVal.value+2*t,e.height.baseVal.value+2*t]),[].forEach.call(e.querySelectorAll('*[visibility="hidden"]'),function(e){e.parentNode.removeChild(e)}),r.svg2pdf(e,t,{removeInvalid:!0}),t.output("datauristring")}function u(){m.innerHTML=n;var t,i=m.getElementsByTagName("text");[].forEach.call(i,function(e){["font-family","font-size"].forEach(function(t){for(var n=e;n&&n!==m;){if(n.style[t]){e.style[t]=n.style[t];break}n=n.parentNode}}),e.style["font-family"]=e.style["font-family"]&&e.style["font-family"].split(" ").splice(-1),t=e.getElementsByTagName("title"),[].forEach.call(t,function(t){e.removeChild(t)})}),i=d(m.firstChild,0);try{e.downloadURL(i,f),c&&c()}catch(e){l(e)}}var h=!0,p=i.libURL||e.getOptions().exporting.libURL,m=s.createElement("div"),g=i.type||"image/png",f=(i.filename||"chart")+"."+("image/svg+xml"===g?"svg":g.split("/")[1]),v=i.scale||1;if(p="/"!==p.slice(-1)?p+"/":p,"image/svg+xml"===g)try{if(a.msSaveOrOpenBlob){var y=new MSBlobBuilder;y.append(n);var b=y.getBlob("image/svg+xml")}else b=e.svgToDataUrl(n);e.downloadURL(b,f),c&&c()}catch(e){l(e)}else if("application/pdf"===g)r.jsPDF&&r.svg2pdf?u():(h=!0,t(p+"jspdf.js",function(){t(p+"svg2pdf.js",function(){u()})}));else{b=e.svgToDataUrl(n);var T=function(){try{o.revokeObjectURL(b)}catch(e){}};e.imageToDataUrl(b,g,{},v,function(t){try{e.downloadURL(t,f),c&&c()}catch(e){l(e)}},function(){var i=s.createElement("canvas"),o=i.getContext("2d"),d=n.match(/^<svg[^>]*width\s*=\s*"?(\d+)"?[^>]*>/)[1]*v,u=n.match(/^<svg[^>]*height\s*=\s*"?(\d+)"?[^>]*>/)[1]*v,m=function(){o.drawSvg(n,0,0,d,u);try{e.downloadURL(a.msSaveOrOpenBlob?i.msToBlob():i.toDataURL(g),f),c&&c()}catch(e){l(e)}finally{T()}};i.width=d,i.height=u,r.canvg?m():(h=!0,t(p+"rgbcolor.js",function(){t(p+"canvg.js",function(){m()})}))},l,l,function(){h&&T()})}},e.Chart.prototype.getSVGForLocalExport=function(t,i,r,a){var s,o,l,c,d=this,u=0,h=function(){u===m.length&&a(d.sanitizeSVG(s.innerHTML,o))},p=function(e,t,n){++u,n.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",e),h()};d.unbindGetSVG=n(d,"getSVG",function(e){o=e.chartCopy.options,s=e.chartCopy.container.cloneNode(!0)}),d.getSVGForExport(t,i);var m=s.getElementsByTagName("image");try{if(!m.length)return void a(d.sanitizeSVG(s.innerHTML,o));var g=0;for(l=m.length;g<l;++g){var f=m[g];(c=f.getAttributeNS("http://www.w3.org/1999/xlink","href"))?e.imageToDataUrl(c,"image/png",{imageElement:f},t.scale,p,r,r,r):(++u,f.parentNode.removeChild(f),h())}}catch(e){r(e)}d.unbindGetSVG()},e.Chart.prototype.exportChartLocal=function(t,n){var i=this,r=e.merge(i.options.exporting,t),a=function(t){!1===r.fallbackToExportServer?r.error?r.error(r,t):e.error(28,!0):i.exportChart(r)};t=function(){return[].some.call(i.container.getElementsByTagName("image"),function(e){return""!==(e=e.getAttribute("href"))&&0!==e.indexOf("data:")})},l&&i.styledMode&&(e.SVGRenderer.prototype.inlineWhitelist=[/^blockSize/,/^border/,/^caretColor/,/^color/,/^columnRule/,/^columnRuleColor/,/^cssFloat/,/^cursor/,/^fill$/,/^fillOpacity/,/^font/,/^inlineSize/,/^length/,/^lineHeight/,/^opacity/,/^outline/,/^parentRule/,/^rx$/,/^ry$/,/^stroke/,/^textAlign/,/^textAnchor/,/^textDecoration/,/^transform/,/^vectorEffect/,/^visibility/,/^x$/,/^y$/]),l&&("application/pdf"===r.type||i.container.getElementsByTagName("image").length&&"image/svg+xml"!==r.type)||"application/pdf"===r.type&&t()?a("Image type not supported for this chart/browser."):i.getSVGForLocalExport(r,n,a,function(t){-1<t.indexOf("<foreignObject")&&"image/svg+xml"!==r.type?a("Image type not supported for charts with embedded HTML"):e.downloadSVGLocal(t,e.extend({filename:i.getFilename()},r),a)})},i(!0,e.getOptions().exporting,{libURL:"https://code.highcharts.com/7.2.0/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}})}),t(e,"masters/modules/offline-exporting.src.js",[],function(){})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return tt.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){return void 0===e}function r(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,i){return Se(e,t,n,i,!0).utc()}function d(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function u(e){if(null==e._isValid){var t=d(e),n=nt.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function h(e){var t=c(NaN);return null!=e?l(d(t),e):d(t).userInvalidated=!0,t}function p(e,t){var n,r,a;if(i(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),i(t._i)||(e._i=t._i),i(t._f)||(e._f=t._f),i(t._l)||(e._l=t._l),i(t._strict)||(e._strict=t._strict),i(t._tzm)||(e._tzm=t._tzm),i(t._isUTC)||(e._isUTC=t._isUTC),i(t._offset)||(e._offset=t._offset),i(t._pf)||(e._pf=d(t)),i(t._locale)||(e._locale=t._locale),it.length>0)for(n=0;n<it.length;n++)i(a=t[r=it[n]])||(e[r]=a);return e}function m(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===rt&&(rt=!0,e.updateOffset(this),rt=!1)}function g(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function f(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function v(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=f(t)),n}function y(e,t,n){var i,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&v(e[i])!==v(t[i]))&&s++;return s+a}function b(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,n){var i=!0;return l(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),i){for(var r,a=[],s=0;s<arguments.length;s++){if(r="","object"==typeof arguments[s]){for(var o in r+="\n["+s+"] ",arguments[0])r+=o+": "+arguments[0][o]+", ";r=r.slice(0,-2)}else r=arguments[s];a.push(r)}b(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)},n)}function S(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),at[t]||(b(n),at[t]=!0)}function C(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function I(e,t){var i,r=l({},e);for(i in t)o(t,i)&&(n(e[i])&&n(t[i])?(r[i]={},l(r[i],e[i]),l(r[i],t[i])):null!=t[i]?r[i]=t[i]:delete r[i]);for(i in e)o(e,i)&&!o(t,i)&&n(e[i])&&(r[i]=l({},r[i]));return r}function _(e){null!=e&&this.set(e)}function M(e,t){var n=e.toLowerCase();ot[n]=ot[n+"s"]=ot[t]=e}function E(e){return"string"==typeof e?ot[e]||ot[e.toLowerCase()]:void 0}function w(e){var t,n,i={};for(n in e)o(e,n)&&((t=E(n))&&(i[t]=e[n]));return i}function A(e,t){lt[e]=t}function D(t,n){return function(i){return null!=i?(k(this,t,i),e.updateOffset(this,n),this):O(this,t)}}function O(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function k(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function R(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function N(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(ht[e]=r),t&&(ht[t[0]]=function(){return R(r.apply(this,arguments),t[1],t[2])}),n&&(ht[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function P(e,t){return e.isValid()?(t=F(t,e.localeData()),ut[t]=ut[t]||function(e){var t,n,i=e.match(ct);for(t=0,n=i.length;t<n;t++)ht[i[t]]?i[t]=ht[i[t]]:i[t]=L(i[t]);return function(t){var r,a="";for(r=0;r<n;r++)a+=C(i[r])?i[r].call(t,e):i[r];return a}}(t),ut[t](e)):e.localeData().invalidDate()}function F(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(dt.lastIndex=0;i>=0&&dt.test(e);)e=e.replace(dt,n),dt.lastIndex=0,i-=1;return e}function x(e,t,n){Dt[e]=C(t)?t:function(e,i){return e&&n?n:t}}function U(e,t){return o(Dt,e)?Dt[e](t._strict,t._locale):new RegExp(function(e){return B(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}))}(e))}function B(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),r(t)&&(i=function(e,n){n[t]=v(e)}),n=0;n<e.length;n++)Ot[e[n]]=i}function H(e,t){W(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function V(e,t,n){null!=t&&o(Ot,e)&&Ot[e](t,n._a,n,e)}function G(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function z(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=c([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=Wt.call(this._shortMonthsParse,s))?r:null:-1!==(r=Wt.call(this._longMonthsParse,s))?r:null:"MMM"===t?-1!==(r=Wt.call(this._shortMonthsParse,s))?r:-1!==(r=Wt.call(this._longMonthsParse,s))?r:null:-1!==(r=Wt.call(this._longMonthsParse,s))?r:-1!==(r=Wt.call(this._shortMonthsParse,s))?r:null}function q(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=v(t);else if(!r(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),G(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Y(t){return null!=t?(q(this,t),e.updateOffset(this,!0),this):O(this,"Month")}function K(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],a=[];for(t=0;t<12;t++)n=c([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),a.sort(e),t=0;t<12;t++)i[t]=B(i[t]),r[t]=B(r[t]);for(t=0;t<24;t++)a[t]=B(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function X(e){return j(e)?366:365}function j(e){return e%4==0&&e%100!=0||e%400==0}function Z(e,t,n,i,r,a,s){var o=new Date(e,t,n,i,r,a,s);return e<100&&e>=0&&isFinite(o.getFullYear())&&o.setFullYear(e),o}function J(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Q(e,t,n){var i=7+t-n;return-((7+J(e,0,i).getUTCDay()-t)%7)+i-1}function $(e,t,n,i,r){var a,s,o=1+7*(t-1)+(7+n-i)%7+Q(e,i,r);return o<=0?s=X(a=e-1)+o:o>X(e)?(a=e+1,s=o-X(e)):(a=e,s=o),{year:a,dayOfYear:s}}function ee(e,t,n){var i,r,a=Q(e.year(),t,n),s=Math.floor((e.dayOfYear()-a-1)/7)+1;return s<1?i=s+te(r=e.year()-1,t,n):s>te(e.year(),t,n)?(i=s-te(e.year(),t,n),r=e.year()+1):(r=e.year(),i=s),{week:i,year:r}}function te(e,t,n){var i=Q(e,t,n),r=Q(e+1,t,n);return(X(e)-i+r)/7}function ne(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=c([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=Wt.call(this._weekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Wt.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=Wt.call(this._minWeekdaysParse,s))?r:null:"dddd"===t?-1!==(r=Wt.call(this._weekdaysParse,s))?r:-1!==(r=Wt.call(this._shortWeekdaysParse,s))?r:-1!==(r=Wt.call(this._minWeekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Wt.call(this._shortWeekdaysParse,s))?r:-1!==(r=Wt.call(this._weekdaysParse,s))?r:-1!==(r=Wt.call(this._minWeekdaysParse,s))?r:null:-1!==(r=Wt.call(this._minWeekdaysParse,s))?r:-1!==(r=Wt.call(this._weekdaysParse,s))?r:-1!==(r=Wt.call(this._shortWeekdaysParse,s))?r:null}function ie(){function e(e,t){return t.length-e.length}var t,n,i,r,a,s=[],o=[],l=[],d=[];for(t=0;t<7;t++)n=c([2e3,1]).day(t),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),a=this.weekdays(n,""),s.push(i),o.push(r),l.push(a),d.push(i),d.push(r),d.push(a);for(s.sort(e),o.sort(e),l.sort(e),d.sort(e),t=0;t<7;t++)o[t]=B(o[t]),l[t]=B(l[t]),d[t]=B(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function re(){return this.hours()%12||12}function ae(e,t){N(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function se(e,t){return t._meridiemParse}function oe(e){return e?e.toLowerCase().replace("_","-"):e}function le(e){var t=null;if(!nn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=$t._abbr,require("./locale/"+e),ce(t)}catch(e){}return nn[e]}function ce(e,t){var n;return e&&((n=i(t)?ue(e):de(e,t))&&($t=n)),$t._abbr}function de(e,t){if(null!==t){var n=tn;if(t.abbr=e,null!=nn[e])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=nn[e]._config;else if(null!=t.parentLocale){if(null==nn[t.parentLocale])return rn[t.parentLocale]||(rn[t.parentLocale]=[]),rn[t.parentLocale].push({name:e,config:t}),null;n=nn[t.parentLocale]._config}return nn[e]=new _(I(n,t)),rn[e]&&rn[e].forEach(function(e){de(e.name,e.config)}),ce(e),nn[e]}return delete nn[e],null}function ue(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return $t;if(!t(e)){if(n=le(e))return n;e=[e]}return function(e){for(var t,n,i,r,a=0;a<e.length;){for(t=(r=oe(e[a]).split("-")).length,n=(n=oe(e[a+1]))?n.split("-"):null;t>0;){if(i=le(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&y(r,n,!0)>=t-1)break;t--}a++}return null}(e)}function he(e){var t,n=e._a;return n&&-2===d(e).overflow&&(t=n[Rt]<0||n[Rt]>11?Rt:n[Nt]<1||n[Nt]>G(n[kt],n[Rt])?Nt:n[Lt]<0||n[Lt]>24||24===n[Lt]&&(0!==n[Pt]||0!==n[Ft]||0!==n[xt])?Lt:n[Pt]<0||n[Pt]>59?Pt:n[Ft]<0||n[Ft]>59?Ft:n[xt]<0||n[xt]>999?xt:-1,d(e)._overflowDayOfYear&&(t<kt||t>Nt)&&(t=Nt),d(e)._overflowWeeks&&-1===t&&(t=Ut),d(e)._overflowWeekday&&-1===t&&(t=Bt),d(e).overflow=t),e}function pe(e){var t,n,i,r,a,s,o=e._i,l=an.exec(o)||sn.exec(o);if(l){for(d(e).iso=!0,t=0,n=ln.length;t<n;t++)if(ln[t][1].exec(l[1])){r=ln[t][0],i=!1!==ln[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=cn.length;t<n;t++)if(cn[t][1].exec(l[3])){a=(l[2]||" ")+cn[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!on.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=r+(a||"")+(s||""),ye(e)}else e._isValid=!1}function me(e){var t,n,i,r,a,s,o,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=un.exec(t)){if(i=n[1]?"ddd"+(5===n[1].length?", ":" "):"",r="D MMM "+(n[2].length>10?"YYYY ":"YY "),a="HH:mm"+(n[4]?":ss":""),n[1]){var c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(n[2]).getDay()];if(n[1].substr(0,3)!==c)return d(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:0===o?s=" +0000":s=((o="YXWVUTSRQPONZABCDEFGHIKLM".indexOf(n[5][1].toUpperCase())-12)<0?" -":" +")+(""+o).replace(/^-?/,"0").match(/..$/)[0]+"00";break;case 4:s=l[n[5]];break;default:s=l[" GMT"]}n[5]=s,e._i=n.splice(1).join("")," ZZ",e._f=i+r+a+" ZZ",ye(e),d(e).rfc2822=!0}else e._isValid=!1}function ge(e,t,n){return null!=e?e:null!=t?t:n}function fe(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ve(e){var t,n,i,r,a=[];if(!e._d){for(i=fe(e),e._w&&null==e._a[Nt]&&null==e._a[Rt]&&function(e){var t,n,i,r,a,s,o,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,s=4,n=ge(t.GG,e._a[kt],ee(Ce(),1,4).year),i=ge(t.W,1),((r=ge(t.E,1))<1||r>7)&&(l=!0);else{a=e._locale._week.dow,s=e._locale._week.doy;var c=ee(Ce(),a,s);n=ge(t.gg,e._a[kt],c.year),i=ge(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||t.e>6)&&(l=!0)):r=a}i<1||i>te(n,a,s)?d(e)._overflowWeeks=!0:null!=l?d(e)._overflowWeekday=!0:(o=$(n,i,r,a,s),e._a[kt]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=ge(e._a[kt],i[kt]),(e._dayOfYear>X(r)||0===e._dayOfYear)&&(d(e)._overflowDayOfYear=!0),n=J(r,0,e._dayOfYear),e._a[Rt]=n.getUTCMonth(),e._a[Nt]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Lt]&&0===e._a[Pt]&&0===e._a[Ft]&&0===e._a[xt]&&(e._nextDay=!0,e._a[Lt]=0),e._d=(e._useUTC?J:Z).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Lt]=24)}}function ye(t){if(t._f!==e.ISO_8601)if(t._f!==e.RFC_2822){t._a=[],d(t).empty=!0;var n,i,r,a,s,o=""+t._i,l=o.length,c=0;for(r=F(t._f,t._locale).match(ct)||[],n=0;n<r.length;n++)a=r[n],(i=(o.match(U(a,t))||[])[0])&&((s=o.substr(0,o.indexOf(i))).length>0&&d(t).unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),c+=i.length),ht[a]?(i?d(t).empty=!1:d(t).unusedTokens.push(a),V(a,i,t)):t._strict&&!i&&d(t).unusedTokens.push(a);d(t).charsLeftOver=l-c,o.length>0&&d(t).unusedInput.push(o),t._a[Lt]<=12&&!0===d(t).bigHour&&t._a[Lt]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[Lt]=function(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(t._locale,t._a[Lt],t._meridiem),ve(t),he(t)}else me(t);else pe(t)}function be(e){var n=e._i,i=e._f;return e._locale=e._locale||ue(e._l),null===n||void 0===i&&""===n?h({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),g(n)?new m(he(n)):(a(n)?e._d=n:t(i)?function(e){var t,n,i,r,a;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)a=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],ye(t),u(t)&&(a+=d(t).charsLeftOver,a+=10*d(t).unusedTokens.length,d(t).score=a,(null==i||a<i)&&(i=a,n=t));l(e,n||t)}(e):i?ye(e):Te(e),u(e)||(e._d=null),e))}function Te(o){var l=o._i;i(l)?o._d=new Date(e.now()):a(l)?o._d=new Date(l.valueOf()):"string"==typeof l?function(t){var n=dn.exec(t._i);null!==n?t._d=new Date(+n[1]):(pe(t),!1===t._isValid&&(delete t._isValid,me(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t))))}(o):t(l)?(o._a=s(l.slice(0),function(e){return parseInt(e,10)}),ve(o)):n(l)?function(e){if(!e._d){var t=w(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ve(e)}}(o):r(l)?o._d=new Date(l):e.createFromInputFallback(o)}function Se(e,i,r,a,s){var o={};return!0!==r&&!1!==r||(a=r,r=void 0),(n(e)&&function(e){var t;for(t in e)return!1;return!0}(e)||t(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=r,o._i=e,o._f=i,o._strict=a,function(e){var t=new m(he(be(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(o)}function Ce(e,t,n,i){return Se(e,t,n,i,!1)}function Ie(e,n){var i,r;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return Ce();for(i=n[0],r=1;r<n.length;++r)n[r].isValid()&&!n[r][e](i)||(i=n[r]);return i}function _e(e){var t=w(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===mn.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<mn.length;++i)if(e[mn[i]]){if(n)return!1;parseFloat(e[mn[i]])!==v(e[mn[i]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*o*60*60,this._days=+s+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=ue(),this._bubble()}function Me(e){return e instanceof _e}function Ee(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function we(e,t){N(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+R(~~(e/60),2)+t+R(~~e%60,2)})}function Ae(e,t){var n=(t||"").match(e);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(gn)||["-",0,0],r=60*i[1]+v(i[2]);return 0===r?0:"+"===i[0]?r:-r}function De(t,n){var i,r;return n._isUTC?(i=n.clone(),r=(g(t)||a(t)?t.valueOf():Ce(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+r),e.updateOffset(i,!1),i):Ce(t).local()}function Oe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function ke(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Re(e,t){var n,i,a,s=e,l=null;return Me(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:r(e)?(s={},t?s[t]=e:s.milliseconds=e):(l=fn.exec(e))?(n="-"===l[1]?-1:1,s={y:0,d:v(l[Nt])*n,h:v(l[Lt])*n,m:v(l[Pt])*n,s:v(l[Ft])*n,ms:v(Ee(1e3*l[xt]))*n}):(l=vn.exec(e))?(n="-"===l[1]?-1:1,s={y:Ne(l[2],n),M:Ne(l[3],n),w:Ne(l[4],n),d:Ne(l[5],n),h:Ne(l[6],n),m:Ne(l[7],n),s:Ne(l[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(a=function(e,t){var n;return e.isValid()&&t.isValid()?(t=De(t,e),e.isBefore(t)?n=Le(e,t):((n=Le(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Ce(s.from),Ce(s.to)),(s={}).ms=a.milliseconds,s.M=a.months),i=new _e(s),Me(e)&&o(e,"_locale")&&(i._locale=e._locale),i}function Ne(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Le(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Pe(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(S(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Fe(this,Re(n="string"==typeof n?+n:n,i),e),this}}function Fe(t,n,i,r){var a=n._milliseconds,s=Ee(n._days),o=Ee(n._months);t.isValid()&&(r=null==r||r,a&&t._d.setTime(t._d.valueOf()+a*i),s&&k(t,"Date",O(t,"Date")+s*i),o&&q(t,O(t,"Month")+o*i),r&&e.updateOffset(t,s||o))}function xe(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ue(e))&&(this._locale=t),this)}function Ue(){return this._locale}function Be(e,t){N(0,[e,e.length],0,t)}function We(e,t,n,i,r){var a;return null==e?ee(this,i,r).year:(t>(a=te(e,i,r))&&(t=a),He.call(this,e,t,n,i,r))}function He(e,t,n,i,r){var a=$(e,t,n,i,r),s=J(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Ve(e,t){t[xt]=v(1e3*("0."+e))}function Ge(e){return e}function ze(e,t,n,i){var r=ue(),a=c().set(i,t);return r[n](a,e)}function qe(e,t,n){if(r(e)&&(t=e,e=void 0),e=e||"",null!=t)return ze(e,t,n,"month");var i,a=[];for(i=0;i<12;i++)a[i]=ze(e,i,n,"month");return a}function Ye(e,t,n,i){"boolean"==typeof e?(r(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,r(t)&&(n=t,t=void 0),t=t||"");var a=ue(),s=e?a._week.dow:0;if(null!=n)return ze(t,(n+s)%7,i,"day");var o,l=[];for(o=0;o<7;o++)l[o]=ze(t,(o+s)%7,i,"day");return l}function Ke(e,t,n,i){var r=Re(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Xe(e){return e<0?Math.floor(e):Math.ceil(e)}function je(e){return 4800*e/146097}function Ze(e){return 146097*e/4800}function Je(e){return function(){return this.as(e)}}function Qe(e){return function(){return this.isValid()?this._data[e]:NaN}}function $e(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function et(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Yn(this._milliseconds)/1e3,i=Yn(this._days),r=Yn(this._months);e=f(n/60),t=f(e/60),n%=60,e%=60;var a=f(r/12),s=r%=12,o=i,l=t,c=e,d=n,u=this.asSeconds();return u?(u<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(o?o+"D":"")+(l||c||d?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var tt,nt=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1},it=e.momentProperties=[],rt=!1,at={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var st=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n},ot={},lt={},ct=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,dt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ut={},ht={},pt=/\d/,mt=/\d\d/,gt=/\d{3}/,ft=/\d{4}/,vt=/[+-]?\d{6}/,yt=/\d\d?/,bt=/\d\d\d\d?/,Tt=/\d\d\d\d\d\d?/,St=/\d{1,3}/,Ct=/\d{1,4}/,It=/[+-]?\d{1,6}/,_t=/\d+/,Mt=/[+-]?\d+/,Et=/Z|[+-]\d\d:?\d\d/gi,wt=/Z|[+-]\d\d(?::?\d\d)?/gi,At=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Dt={},Ot={},kt=0,Rt=1,Nt=2,Lt=3,Pt=4,Ft=5,xt=6,Ut=7,Bt=8,Wt=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};N("M",["MM",2],"Mo",function(){return this.month()+1}),N("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),N("MMMM",0,0,function(e){return this.localeData().months(this,e)}),M("month","M"),A("month",8),x("M",yt),x("MM",yt,mt),x("MMM",function(e,t){return t.monthsShortRegex(e)}),x("MMMM",function(e,t){return t.monthsRegex(e)}),W(["M","MM"],function(e,t){t[Rt]=v(e)-1}),W(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[Rt]=r:d(n).invalidMonth=e});var Ht=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Vt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Gt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),zt=At,qt=At;N("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),M("year","y"),A("year",1),x("Y",Mt),x("YY",yt,mt),x("YYYY",Ct,ft),x("YYYYY",It,vt),x("YYYYYY",It,vt),W(["YYYYY","YYYYYY"],kt),W("YYYY",function(t,n){n[kt]=2===t.length?e.parseTwoDigitYear(t):v(t)}),W("YY",function(t,n){n[kt]=e.parseTwoDigitYear(t)}),W("Y",function(e,t){t[kt]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var Yt=D("FullYear",!0);N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),M("week","w"),M("isoWeek","W"),A("week",5),A("isoWeek",5),x("w",yt),x("ww",yt,mt),x("W",yt),x("WW",yt,mt),H(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=v(e)});N("d",0,"do","day"),N("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),N("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),N("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),M("day","d"),M("weekday","e"),M("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),x("d",yt),x("e",yt),x("E",yt),x("dd",function(e,t){return t.weekdaysMinRegex(e)}),x("ddd",function(e,t){return t.weekdaysShortRegex(e)}),x("dddd",function(e,t){return t.weekdaysRegex(e)}),H(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:d(n).invalidWeekday=e}),H(["d","e","E"],function(e,t,n,i){t[i]=v(e)});var Kt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zt=At,Jt=At,Qt=At;N("H",["HH",2],0,"hour"),N("h",["hh",2],0,re),N("k",["kk",2],0,function(){return this.hours()||24}),N("hmm",0,0,function(){return""+re.apply(this)+R(this.minutes(),2)}),N("hmmss",0,0,function(){return""+re.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)}),N("Hmm",0,0,function(){return""+this.hours()+R(this.minutes(),2)}),N("Hmmss",0,0,function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)}),ae("a",!0),ae("A",!1),M("hour","h"),A("hour",13),x("a",se),x("A",se),x("H",yt),x("h",yt),x("k",yt),x("HH",yt,mt),x("hh",yt,mt),x("kk",yt,mt),x("hmm",bt),x("hmmss",Tt),x("Hmm",bt),x("Hmmss",Tt),W(["H","HH"],Lt),W(["k","kk"],function(e,t,n){var i=v(e);t[Lt]=24===i?0:i}),W(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),W(["h","hh"],function(e,t,n){t[Lt]=v(e),d(n).bigHour=!0}),W("hmm",function(e,t,n){var i=e.length-2;t[Lt]=v(e.substr(0,i)),t[Pt]=v(e.substr(i)),d(n).bigHour=!0}),W("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[Lt]=v(e.substr(0,i)),t[Pt]=v(e.substr(i,2)),t[Ft]=v(e.substr(r)),d(n).bigHour=!0}),W("Hmm",function(e,t,n){var i=e.length-2;t[Lt]=v(e.substr(0,i)),t[Pt]=v(e.substr(i))}),W("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[Lt]=v(e.substr(0,i)),t[Pt]=v(e.substr(i,2)),t[Ft]=v(e.substr(r))});var $t,en=D("Hours",!0),tn={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Vt,monthsShort:Gt,week:{dow:0,doy:6},weekdays:Kt,weekdaysMin:jt,weekdaysShort:Xt,meridiemParse:/[ap]\.?m?\.?/i},nn={},rn={},an=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on=/Z|[+-]\d\d(?::?\d\d)?/,ln=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],cn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],dn=/^\/?Date\((\-?\d+)/i,un=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;e.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var hn=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ce.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:h()}),pn=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ce.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:h()}),mn=["year","quarter","month","week","day","hour","minute","second","millisecond"];we("Z",":"),we("ZZ",""),x("Z",wt),x("ZZ",wt),W(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ae(wt,e)});var gn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var fn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,vn=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Re.fn=_e.prototype,Re.invalid=function(){return Re(NaN)};var yn=Pe(1,"add"),bn=Pe(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Tn=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Be("gggg","weekYear"),Be("ggggg","weekYear"),Be("GGGG","isoWeekYear"),Be("GGGGG","isoWeekYear"),M("weekYear","gg"),M("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),x("G",Mt),x("g",Mt),x("GG",yt,mt),x("gg",yt,mt),x("GGGG",Ct,ft),x("gggg",Ct,ft),x("GGGGG",It,vt),x("ggggg",It,vt),H(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=v(e)}),H(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),N("Q",0,"Qo","quarter"),M("quarter","Q"),A("quarter",7),x("Q",pt),W("Q",function(e,t){t[Rt]=3*(v(e)-1)}),N("D",["DD",2],"Do","date"),M("date","D"),A("date",9),x("D",yt),x("DD",yt,mt),x("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),W(["D","DD"],Nt),W("Do",function(e,t){t[Nt]=v(e.match(yt)[0])});var Sn=D("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),M("dayOfYear","DDD"),A("dayOfYear",4),x("DDD",St),x("DDDD",gt),W(["DDD","DDDD"],function(e,t,n){n._dayOfYear=v(e)}),N("m",["mm",2],0,"minute"),M("minute","m"),A("minute",14),x("m",yt),x("mm",yt,mt),W(["m","mm"],Pt);var Cn=D("Minutes",!1);N("s",["ss",2],0,"second"),M("second","s"),A("second",15),x("s",yt),x("ss",yt,mt),W(["s","ss"],Ft);var In,_n=D("Seconds",!1);for(N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,function(){return 10*this.millisecond()}),N(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),N(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),N(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),N(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),N(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),M("millisecond","ms"),A("millisecond",16),x("S",St,pt),x("SS",St,mt),x("SSS",St,gt),In="SSSS";In.length<=9;In+="S")x(In,_t);for(In="S";In.length<=9;In+="S")W(In,Ve);var Mn=D("Milliseconds",!1);N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var En=m.prototype;En.add=yn,En.calendar=function(t,n){var i=t||Ce(),r=De(i,this).startOf("day"),a=e.calendarFormat(this,r)||"sameElse",s=n&&(C(n[a])?n[a].call(this,i):n[a]);return this.format(s||this.localeData().calendar(a,this,Ce(i)))},En.clone=function(){return new m(this)},En.diff=function(e,t,n){var i,r,a,s;return this.isValid()?(i=De(e,this)).isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),"year"===(t=E(t))||"month"===t||"quarter"===t?(s=function(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(r,"months");return t-a<0?(n=e.clone().add(r-1,"months"),i=(t-a)/(a-n)):(n=e.clone().add(r+1,"months"),i=(t-a)/(n-a)),-(r+i)||0}(this,i),"quarter"===t?s/=3:"year"===t&&(s/=12)):(a=this-i,s="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-r)/864e5:"week"===t?(a-r)/6048e5:a),n?s:f(s)):NaN:NaN},En.endOf=function(e){return void 0===(e=E(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},En.format=function(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=P(this,t);return this.localeData().postformat(n)},En.from=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||Ce(e).isValid())?Re({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},En.fromNow=function(e){return this.from(Ce(),e)},En.to=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||Ce(e).isValid())?Re({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},En.toNow=function(e){return this.to(Ce(),e)},En.get=function(e){return C(this[e=E(e)])?this[e]():this},En.invalidAt=function(){return d(this).overflow},En.isAfter=function(e,t){var n=g(e)?e:Ce(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=E(i(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},En.isBefore=function(e,t){var n=g(e)?e:Ce(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=E(i(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},En.isBetween=function(e,t,n,i){return("("===(i=i||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))},En.isSame=function(e,t){var n,i=g(e)?e:Ce(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=E(t||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},En.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},En.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},En.isValid=function(){return u(this)},En.lang=Tn,En.locale=xe,En.localeData=Ue,En.max=pn,En.min=hn,En.parsingFlags=function(){return l({},d(this))},En.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:lt[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=w(e)),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit]);else if(C(this[e=E(e)]))return this[e](t);return this},En.startOf=function(e){switch(e=E(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},En.subtract=bn,En.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},En.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},En.toDate=function(){return new Date(this.valueOf())},En.toISOString=function(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?P(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):C(Date.prototype.toISOString)?this.toDate().toISOString():P(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},En.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},En.toJSON=function(){return this.isValid()?this.toISOString():null},En.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},En.unix=function(){return Math.floor(this.valueOf()/1e3)},En.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},En.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},En.year=Yt,En.isLeapYear=function(){return j(this.year())},En.weekYear=function(e){return We.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},En.isoWeekYear=function(e){return We.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},En.quarter=En.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},En.month=Y,En.daysInMonth=function(){return G(this.year(),this.month())},En.week=En.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},En.isoWeek=En.isoWeeks=function(e){var t=ee(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},En.weeksInYear=function(){var e=this.localeData()._week;return te(this.year(),e.dow,e.doy)},En.isoWeeksInYear=function(){return te(this.year(),1,4)},En.date=Sn,En.day=En.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},En.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},En.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},En.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},En.hour=En.hours=en,En.minute=En.minutes=Cn,En.second=En.seconds=_n,En.millisecond=En.milliseconds=Mn,En.utcOffset=function(t,n,i){var r,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ae(wt,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&n&&(r=Oe(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==t&&(!n||this._changeInProgress?Fe(this,Re(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Oe(this)},En.utc=function(e){return this.utcOffset(0,e)},En.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Oe(this),"m")),this},En.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ae(Et,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},En.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ce(e).utcOffset():0,(this.utcOffset()-e)%60==0)},En.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},En.isLocal=function(){return!!this.isValid()&&!this._isUTC},En.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},En.isUtc=ke,En.isUTC=ke,En.zoneAbbr=function(){return this._isUTC?"UTC":""},En.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},En.dates=T("dates accessor is deprecated. Use date instead.",Sn),En.months=T("months accessor is deprecated. Use month instead",Y),En.years=T("years accessor is deprecated. Use year instead",Yt),En.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),En.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!i(this._isDSTShifted))return this._isDSTShifted;var e={};if(p(e,this),(e=be(e))._a){var t=e._isUTC?c(e._a):Ce(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var wn=_.prototype;wn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return C(i)?i.call(t,n):i},wn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},wn.invalidDate=function(){return this._invalidDate},wn.ordinal=function(e){return this._ordinal.replace("%d",e)},wn.preparse=Ge,wn.postformat=Ge,wn.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return C(r)?r(e,t,n,i):r.replace(/%d/i,e)},wn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return C(n)?n(t):n.replace(/%s/i,t)},wn.set=function(e){var t,n;for(n in e)C(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},wn.months=function(e,n){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ht).test(n)?"format":"standalone"][e.month()]:t(this._months)?this._months:this._months.standalone},wn.monthsShort=function(e,n){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ht.test(n)?"format":"standalone"][e.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},wn.monthsParse=function(e,t,n){var i,r,a;if(this._monthsParseExact)return z.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=c([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},wn.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||K.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=qt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},wn.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||K.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=zt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},wn.week=function(e){return ee(e,this._week.dow,this._week.doy).week},wn.firstDayOfYear=function(){return this._week.doy},wn.firstDayOfWeek=function(){return this._week.dow},wn.weekdays=function(e,n){return e?t(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][e.day()]:t(this._weekdays)?this._weekdays:this._weekdays.standalone},wn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},wn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},wn.weekdaysParse=function(e,t,n){var i,r,a;if(this._weekdaysParseExact)return ne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=c([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},wn.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ie.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Zt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},wn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ie.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},wn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ie.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},wn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},wn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ce("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=T("moment.lang is deprecated. Use moment.locale instead.",ce),e.langData=T("moment.langData is deprecated. Use moment.localeData instead.",ue);var An=Math.abs,Dn=Je("ms"),On=Je("s"),kn=Je("m"),Rn=Je("h"),Nn=Je("d"),Ln=Je("w"),Pn=Je("M"),Fn=Je("y"),xn=Qe("milliseconds"),Un=Qe("seconds"),Bn=Qe("minutes"),Wn=Qe("hours"),Hn=Qe("days"),Vn=Qe("months"),Gn=Qe("years"),zn=Math.round,qn={ss:44,s:45,m:45,h:22,d:26,M:11},Yn=Math.abs,Kn=_e.prototype;return Kn.isValid=function(){return this._isValid},Kn.abs=function(){var e=this._data;return this._milliseconds=An(this._milliseconds),this._days=An(this._days),this._months=An(this._months),e.milliseconds=An(e.milliseconds),e.seconds=An(e.seconds),e.minutes=An(e.minutes),e.hours=An(e.hours),e.months=An(e.months),e.years=An(e.years),this},Kn.add=function(e,t){return Ke(this,e,t,1)},Kn.subtract=function(e,t){return Ke(this,e,t,-1)},Kn.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=E(e))||"year"===e)return t=this._days+i/864e5,n=this._months+je(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Ze(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Kn.asMilliseconds=Dn,Kn.asSeconds=On,Kn.asMinutes=kn,Kn.asHours=Rn,Kn.asDays=Nn,Kn.asWeeks=Ln,Kn.asMonths=Pn,Kn.asYears=Fn,Kn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12):NaN},Kn._bubble=function(){var e,t,n,i,r,a=this._milliseconds,s=this._days,o=this._months,l=this._data;return a>=0&&s>=0&&o>=0||a<=0&&s<=0&&o<=0||(a+=864e5*Xe(Ze(o)+s),s=0,o=0),l.milliseconds=a%1e3,e=f(a/1e3),l.seconds=e%60,t=f(e/60),l.minutes=t%60,n=f(t/60),l.hours=n%24,s+=f(n/24),o+=r=f(je(s)),s-=Xe(Ze(r)),i=f(o/12),o%=12,l.days=s,l.months=o,l.years=i,this},Kn.get=function(e){return e=E(e),this.isValid()?this[e+"s"]():NaN},Kn.milliseconds=xn,Kn.seconds=Un,Kn.minutes=Bn,Kn.hours=Wn,Kn.days=Hn,Kn.weeks=function(){return f(this.days()/7)},Kn.months=Vn,Kn.years=Gn,Kn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var i=Re(e).abs(),r=zn(i.as("s")),a=zn(i.as("m")),s=zn(i.as("h")),o=zn(i.as("d")),l=zn(i.as("M")),c=zn(i.as("y")),d=r<=qn.ss&&["s",r]||r<qn.s&&["ss",r]||a<=1&&["m"]||a<qn.m&&["mm",a]||s<=1&&["h"]||s<qn.h&&["hh",s]||o<=1&&["d"]||o<qn.d&&["dd",o]||l<=1&&["M"]||l<qn.M&&["MM",l]||c<=1&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=n,$e.apply(null,d)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Kn.toISOString=et,Kn.toString=et,Kn.toJSON=et,Kn.locale=xe,Kn.localeData=Ue,Kn.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",et),Kn.lang=Tn,N("X",0,0,"unix"),N("x",0,0,"valueOf"),x("x",Mt),x("X",/[+-]?\d+(\.\d{1,3})?/),W("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),W("x",function(e,t,n){n._d=new Date(v(e))}),e.version="2.18.1",function(e){tt=e}(Ce),e.fn=En,e.min=function(){var e=[].slice.call(arguments,0);return Ie("isBefore",e)},e.max=function(){var e=[].slice.call(arguments,0);return Ie("isAfter",e)},e.now=function(){return Date.now?Date.now():+new Date},e.utc=c,e.unix=function(e){return Ce(1e3*e)},e.months=function(e,t){return qe(e,t,"months")},e.isDate=a,e.locale=ce,e.invalid=h,e.duration=Re,e.isMoment=g,e.weekdays=function(e,t,n){return Ye(e,t,n,"weekdays")},e.parseZone=function(){return Ce.apply(null,arguments).parseZone()},e.localeData=ue,e.isDuration=Me,e.monthsShort=function(e,t){return qe(e,t,"monthsShort")},e.weekdaysMin=function(e,t,n){return Ye(e,t,n,"weekdaysMin")},e.defineLocale=de,e.updateLocale=function(e,t){if(null!=t){var n,i=tn;null!=nn[e]&&(i=nn[e]._config),(n=new _(t=I(i,t))).parentLocale=nn[e],nn[e]=n,ce(e)}else null!=nn[e]&&(null!=nn[e].parentLocale?nn[e]=nn[e].parentLocale:null!=nn[e]&&delete nn[e]);return nn[e]},e.locales=function(){return st(nn)},e.weekdaysShort=function(e,t,n){return Ye(e,t,n,"weekdaysShort")},e.normalizeUnits=E,e.relativeTimeRounding=function(e){return void 0===e?zn:"function"==typeof e&&(zn=e,!0)},e.relativeTimeThreshold=function(e,t){return void 0!==qn[e]&&(void 0===t?qn[e]:(qn[e]=t,"s"===e&&(qn.ss=t-1),!0))},e.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},e.prototype=En,e}),function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(e){"use strict";var t,n={},i={},r={},a={};e&&"string"==typeof e.version||E("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var s=e.version.split("."),o=+s[0],l=+s[1];function c(e){return 96<e?e-87:64<e?e-29:e-48}function d(e){var t=0,n=e.split("."),i=n[0],r=n[1]||"",a=1,s=0,o=1;for(45===e.charCodeAt(0)&&(o=-(t=1));t<i.length;t++)s=60*s+c(i.charCodeAt(t));for(t=0;t<r.length;t++)a/=60,s+=c(r.charCodeAt(t))*a;return s*o}function u(e){for(var t=0;t<e.length;t++)e[t]=d(e[t])}function h(e,t){var n,i=[];for(n=0;n<t.length;n++)i[n]=e[t[n]];return i}function p(e){var t=e.split("|"),n=t[2].split(" "),i=t[3].split(""),r=t[4].split(" ");return u(n),u(i),u(r),function(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}(r,i.length),{name:t[0],abbrs:h(t[1].split(" "),i),offsets:h(n,i),untils:r,population:0|t[5]}}function m(e){e&&this._set(p(e))}function g(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=t.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function f(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function v(e,t){for(var n,i;i=6e4*((t.at-e.at)/12e4|0);)(n=new g(new Date(e.at+i))).offset===e.offset?e=n:t=n;return e}function y(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function b(e,t){var n,i;for(u(t),n=0;n<t.length;n++)i=t[n],a[i]=a[i]||{},a[i][e]=!0}function T(e){return(e||"").toLowerCase().replace(/\//g,"_")}function S(e){var t,i,a,s;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)s=T(i=(a=e[t].split("|"))[0]),n[s]=e[t],r[s]=i,b(s,a[2].split(" "))}function C(e,t){e=T(e);var a,s=n[e];return s instanceof m?s:"string"==typeof s?(s=new m(s),n[e]=s):i[e]&&t!==C&&(a=C(i[e],C))?((s=n[e]=new m)._set(a),s.name=r[e],s):null}function I(e){var t,n,a,s;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)a=T((n=e[t].split("|"))[0]),s=T(n[1]),i[a]=s,r[a]=n[0],i[s]=a,r[s]=n[1]}function _(e){S(e.zones),I(e.links),w.dataVersion=e.version}function M(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function E(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function w(t){var n=Array.prototype.slice.call(arguments,0,-1),i=arguments[arguments.length-1],r=C(i),a=e.utc.apply(null,n);return r&&!e.isMoment(t)&&M(a)&&a.add(r.parse(a),"minutes"),a.tz(i),a}(o<2||2==o&&l<6)&&E("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),m.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,i=this.untils;for(t=0;t<i.length;t++)if(n<i[t])return t},parse:function(e){var t,n,i,r,a=+e,s=this.offsets,o=this.untils,l=o.length-1;for(r=0;r<l;r++)if(t=s[r],n=s[r+1],i=s[r?r-1:r],t<n&&w.moveAmbiguousForward?t=n:i<t&&w.moveInvalidForward&&(t=i),a<o[r]-6e4*t)return s[r];return s[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return E("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},f.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},w.version="0.5.25",w.dataVersion="",w._zones=n,w._links=i,w._names=r,w.add=S,w.link=I,w.load=_,w.zone=C,w.zoneExists=function e(t){return e.didShowError||(e.didShowError=!0,E("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!C(t)},w.guess=function(e){return t&&!e||(t=function(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&3<e.length){var t=r[T(e)];if(t)return t;E("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,i,s,o=function(){var e,t,n,i=(new Date).getFullYear()-2,r=new g(new Date(i,0,1)),a=[r];for(n=1;n<48;n++)(t=new g(new Date(i,n,1))).offset!==r.offset&&(e=v(r,t),a.push(e),a.push(new g(new Date(e.at+6e4)))),r=t;for(n=0;n<4;n++)a.push(new g(new Date(i+n,0,1))),a.push(new g(new Date(i+n,6,1)));return a}(),l=o.length,c=function(e){var t,n,i,s=e.length,o={},l=[];for(t=0;t<s;t++)for(n in i=a[e[t].offset]||{})i.hasOwnProperty(n)&&(o[n]=!0);for(t in o)o.hasOwnProperty(t)&&l.push(r[t]);return l}(o),d=[];for(i=0;i<c.length;i++){for(n=new f(C(c[i]),l),s=0;s<l;s++)n.scoreOffsetAt(o[s]);d.push(n)}return d.sort(y),0<d.length?d[0].zone.name:void 0}()),t},w.names=function(){var e,t=[];for(e in r)r.hasOwnProperty(e)&&(n[e]||n[i[e]])&&r[e]&&t.push(r[e]);return t.sort()},w.Zone=m,w.unpack=p,w.unpackBase60=d,w.needsOffset=M,w.moveInvalidForward=!0,w.moveAmbiguousForward=!1;var A,D=e.fn;function O(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function k(e){return function(){return this._z=null,e.apply(this,arguments)}}e.tz=w,e.defaultZone=null,e.updateOffset=function(t,n){var i,r=e.defaultZone;if(void 0===t._z&&(r&&M(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(r.parse(t),"minutes")),t._z=r),t._z)if(i=t._z.utcOffset(t),Math.abs(i)<16&&(i/=60),void 0!==t.utcOffset){var a=t._z;t.utcOffset(-i,n),t._z=a}else t.zone(i,n)},D.tz=function(t,n){if(t){if("string"!=typeof t)throw new Error("Time zone name must be a string, got "+t+" ["+typeof t+"]");return this._z=C(t),this._z?e.updateOffset(this,n):E("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},D.zoneName=O(D.zoneName),D.zoneAbbr=O(D.zoneAbbr),D.utc=k(D.utc),D.local=k(D.local),D.utcOffset=(A=D.utcOffset,function(){return 0<arguments.length&&(this._z=null),A.apply(this,arguments)}),e.tz.setDefault=function(t){return(o<2||2==o&&l<9)&&E("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?C(t):null,e};var R=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(R)?(R.push("_z"),R.push("_a")):R&&(R._z=null),_({version:"2019a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|WET WEST CET CEST|0 -10 -10 -20|01012320102|3bX0 11A0 dDd0 17b0 11B0 1cN0 2Dy0 1cN0 1fB0 1cL0|26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Bissau|-01 GMT|10 0|01|cap0|39e4","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|LX0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1WL0 rd0 1Rz0 wp0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1qL0 Xd0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1ny0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 WL0 1qN0 Rb0 1wp0 On0 1zd0 Lz0 1EN0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0|15e6","Africa/Casablanca|+00 +01|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4mn0 SyN0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600|32e5","Africa/Ceuta|WET WEST CET CEST|0 -10 -10 -20|0101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|aS00 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4VB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|85e3","Africa/El_Aaiun|-01 +00 +01|10 0 -10|01212121212121212121212121212121212121212121212121212121212121212121|fi10 6L0 AL0 1Nd0 XX0 1Cp0 pz0 1cBB0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 e00 28M0 e00 2600 gM0 2600|20e4","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Juba|CAT CAST EAT|-20 -30 -30|0101010101010101010101010101010102|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0","Africa/Khartoum|CAT CAST EAT|-20 -30 -30|01010101010101010101010101010101020|LW0 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0 HjL0|51e5","Africa/Monrovia|MMT GMT|I.u 0|01|4SoI.u|11e5","Africa/Ndjamena|WAT WAST|-10 -20|010|nNb0 Wn0|13e5","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00","Africa/Tripoli|EET CET CEST|-20 -10 -20|0121212121212121210120120|tda0 A10 1db0 1cN0 1db0 1dd0 1db0 1eN0 1bb0 1e10 1cL0 1c10 1db0 1dd0 1db0 1cN0 1db0 1q10 fAn0 1ep0 1db0 AKq0 TA0 1o00|11e5","Africa/Tunis|CET CEST|-10 -20|0101010101010101010|hOn0 WM0 1rA0 11c0 nwo0 Ko0 1cM0 1cM0 1rA0 10M0 zuM0 10N0 1aN0 1qM0 WM0 1qM0 11A0 1o00|20e5","Africa/Windhoek|SAST CAT WAT|-20 -20 -10|01212121212121212121212121212121212121212121212121|Ndy0 9Io0 16P0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|BST BDT AHST HST HDT|b0 a0 a0 a0 90|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AHST AHDT YST AKST AKDT|a0 90 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kc0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Puerto_Rico|AST|40|0||24e5","America/Araguaina|-03 -02|30 20|01010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 ny10 Lz0|14e4","America/Argentina/Buenos_Aires|-03 -02|30 20|01010101010101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 A4p0 uL0 1qN0 WL0","America/Argentina/Catamarca|-03 -02 -04|30 20 40|01010101210102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 7B0 8zb0 uL0","America/Argentina/Cordoba|-03 -02 -04|30 20 40|01010101210101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0 1qN0 WL0","America/Argentina/Jujuy|-03 -02 -04|30 20 40|010101202101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1ze0 TX0 1ld0 WK0 1wp0 TX0 A4p0 uL0","America/Argentina/La_Rioja|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0","America/Argentina/Mendoza|-03 -02 -04|30 20 40|01010120202102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1u20 SL0 1vd0 Tb0 1wp0 TW0 ri10 Op0 7TX0 uL0","America/Argentina/Rio_Gallegos|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rlB0 7B0 8zb0 uL0","America/Argentina/Salta|-03 -02 -04|30 20 40|010101012101010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 A4p0 uL0","America/Argentina/San_Juan|-03 -02 -04|30 20 40|010101012010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 rld0 m10 8lb0 uL0","America/Argentina/San_Luis|-03 -02 -04|30 20 40|010101202020102020|9Rf0 Db0 zvd0 Bz0 1tB0 XX0 1q20 SL0 AN0 vDb0 m10 8lb0 8L0 jd0 1qN0 WL0 1qN0","America/Argentina/Tucuman|-03 -02 -04|30 20 40|0101010121010201010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 rlB0 4N0 8BX0 uL0 1qN0 WL0","America/Argentina/Ushuaia|-03 -02 -04|30 20 40|01010101010102010|9Rf0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 rkN0 8p0 8zb0 uL0","America/Asuncion|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|6FE0 3CL0 3Dd0 10L0 1pB0 10n0 1pB0 10n0 1pB0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1lB0 14n0 1dd0 1cL0 1fd0 WL0 1rd0 1aL0 1dB0 Xz0 1qp0 Xb0 1qN0 10L0 1rB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 WN0 1qL0 11B0 1nX0 1ip0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 TX0 1tB0 19X0 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Bahia_Banderas|PST MST MDT CDT CST|80 70 60 50 60|012121212121212121212121212121343434343434343434343434343434343434343434|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|84e3","America/Bahia|-03 -02|30 20|010101010101010101010101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 l5B0 Rb0|27e5","America/Barbados|AST ADT|40 30|010101010|i7G0 IL0 1ip0 17b0 1ip0 17b0 1ld0 13b0|28e4","America/Belem|-03 -02|30 20|0101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0|20e5","America/Belize|CST CDT|60 50|01010|9xG0 qn0 lxB0 mn0|57e3","America/Boa_Vista|-04 -03|40 30|01010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 smp0 WL0 1tB0 2L0|62e2","America/Bogota|-05 -04|50 40|010|Snh0 2en0|90e5","America/Boise|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 Dd0 1Kn0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e4","America/Cambridge_Bay|MST MDT CST CDT EST|70 60 60 50 50|01010101010101010101010101010101010101012342101010101010101010101010101010101010101010101010101010101010|p7J0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11A0 1nX0 2K0 WQ0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e2","America/Campo_Grande|-04 -03|40 30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|77e4","America/Cancun|CST EST EDT CDT|60 50 40 50|012121230303030303030303030303030303030301|t9G0 yLB0 1lb0 14p0 1lb0 14p0 Lz0 xB0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|-04 -0430|40 4u|010|1wmv0 kqo0|29e5","America/Cayenne|-03|30|0||58e3","America/Chicago|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|CST CDT MDT MST|60 50 60 70|01010232323232323232323232323232323232323232323232323232323232323232323|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|81e4","America/Costa_Rica|CST CDT|60 50|010101010|mgS0 Db0 1Kp0 Db0 pRB0 15b0 1kp0 mL0|12e5","America/Phoenix|MST|70|0||42e5","America/Cuiaba|-04 -03|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 4a10 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|54e4","America/Danmarkshavn|-03 -02 GMT|30 20 0|0101010101010101010101010101010102|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 DC0|8","America/Dawson_Creek|PST PDT MST|80 70 70|0101012|Ka0 1cL0 1cN0 1fz0 1cN0 ML0|12e3","America/Dawson|YST PST PDT|90 80 70|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|9ix0 fNd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|13e2","America/Denver|MST MDT|70 60|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Detroit|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|85H0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e5","America/Edmonton|MST MDT|70 60|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E90 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|10e5","America/Eirunepe|-05 -04|50 40|01010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0 yTd0 d5X0|31e3","America/El_Salvador|CST CDT|60 50|01010|Gcu0 WL0 1qN0 WL0|11e5","America/Tijuana|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fmy0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|20e5","America/Fort_Nelson|PST PDT MST|80 70 70|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010102|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Fort_Wayne|EST EDT|50 40|01010101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Fortaleza|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 5z0 2mN0 On0|34e5","America/Glace_Bay|AST ADT|40 30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|5E60 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3","America/Godthab|-03 -02|30 20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXh0 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e3","America/Goose_Bay|AST ADT ADDT|40 30 20|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|76e2","America/Grand_Turk|EST EDT AST|50 40 40|01010101010101010101010101010101010101010101010101010101010101010101010101210101010101010101010101010|mG70 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Guatemala|CST CDT|60 50|010101010|9tG0 An0 mtd0 Nz0 ifB0 17b0 zDB0 11z0|13e5","America/Guayaquil|-05 -04|50 40|010|TKR0 rz0|27e5","America/Guyana|-0345 -03 -04|3J 30 40|012|dyPJ Bxbf|80e4","America/Halifax|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Havana|CST CDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K50 1cL0 1cN0 1fz0 1cN0 14n0 1ld0 14L0 1kN0 15b0 1kp0 1cL0 1cN0 1fz0 1a10 1fz0 1fB0 11z0 14p0 1nX0 11B0 1nX0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 1a10 1in0 1a10 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 17c0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 11A0 6i00 Rc0 1wo0 U00 1tA0 Rc0 1wo0 U00 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/Hermosillo|PST MST MDT|80 70 60|01212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0|64e4","America/Indiana/Knox|CST CDT EST|60 50 50|01010101010101010101010101010101010101010101210101010101010101010101010101010101010101010101010|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 z8o0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Marengo|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1e6p0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Petersburg|CST CDT EST EDT|60 50 50 40|0101010101010101210123232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 19co0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Tell_City|EST EDT CDT CST|50 40 50 60|01023232323232323232323232323232323232323232323232323|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vevay|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1lnd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vincennes|EST EDT CDT CST|50 40 50 60|01023201010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Winamac|EST EDT CDT CST|50 40 50 60|01023101010101010101010101010101010101010101010101010|K70 1cL0 1qhd0 1o00 Rd0 1za0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Inuvik|PST MST MDT|80 70 60|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|mGa0 2pz0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|35e2","America/Iqaluit|EST EDT CST CDT|50 40 60 50|0101010101010101010101010101010101010101230101010101010101010101010101010101010101010101010101010101010|p7H0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|67e2","America/Jamaica|EST EDT|50 40|010101010101010101010|9Kv0 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0|94e4","America/Juneau|PST PDT YDT YST AKST AKDT|80 70 80 90 90 80|0101010101010101010102010101345454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cM0 1cM0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|33e3","America/Kentucky/Louisville|EST EDT CDT|50 40 50|010101010201010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Kentucky/Monticello|CST CDT EST EDT|60 50 50 40|010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232323232|K80 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/La_Paz|-04|40|0||19e5","America/Lima|-05 -04|50 40|010101010|CVF0 zX0 1O10 zX0 6Gp0 zX0 98p0 zX0|11e6","America/Los_Angeles|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/Maceio|-03 -02|30 20|0101010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 8Q10 WL0 1tB0 5z0 2mN0 On0|93e4","America/Managua|CST EST CDT|60 50 50|010202010102020|86u0 4mn0 9Up0 Dz0 1K10 Dz0 s3F0 1KH0 DB0 9In0 k8p0 19X0 1o30 11y0|22e5","America/Manaus|-04 -03|40 30|010101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0|19e5","America/Martinique|AST ADT|40 30|010|oXg0 19X0|39e4","America/Matamoros|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|45e4","America/Mazatlan|PST MST MDT|80 70 60|012121212121212121212121212121212121212121212121212121212121212121212121|80 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|44e4","America/Menominee|EST CDT CST|50 50 60|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|85H0 1cM0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|85e2","America/Merida|CST EST CDT|60 50 50|0102020202020202020202020202020202020202020202020202020202020202020202020|t9G0 2hz0 wu30 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|11e5","America/Metlakatla|PST PDT AKST AKDT|80 70 90 80|0101010101010101010101010101023232302323232323232323232323232|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1hU10 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Mexico_City|CST CDT|60 50|01010101010101010101010101010101010101010101010101010101010101010101010|13Vk0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|20e6","America/Miquelon|AST -03 -02|40 30 20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|p9g0 gQ10 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Moncton|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K60 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14n1 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 ReX 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|64e3","America/Monterrey|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010|IqU0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0|41e5","America/Montevideo|-03 -02 -0130 -0230|30 20 1u 2u|0101023010101010101010101010101010101010101010101010|JD0 jX0 4vB0 xz0 3Cp0 mmu 1a10 IMu Db0 4c10 uL0 1Nd0 An0 1SN0 uL0 mp0 28L0 iPB0 un0 1SN0 xz0 1zd0 Lz0 1zd0 Rb0 1zd0 On0 1wp0 Rb0 s8p0 1fB0 1ip0 11z0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Toronto|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e5","America/New_York|EST EDT|50 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Nipigon|EST EDT|50 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avj0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|16e2","America/Nome|BST BDT YST AKST AKDT|b0 a0 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Kd0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cl0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|38e2","America/Noronha|-02 -01|20 10|01010101010101010|CxC0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|30e2","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010123232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/Center|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/New_Salem|MST MDT CST CDT|70 60 60 50|010101010101010101010101010101010101010101010101010101010101010101012323232323232323232323232323232323232323232323232323232|K90 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Ojinaga|CST CDT MDT MST|60 50 60 70|01010232323232323232323232323232323232323232323232323232323232323232323|13Vk0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Pangnirtung|AST ADT EDT EST CST CDT|40 30 40 50 60 50|0101010101010101010101010101010232323232453232323232323232323232323232323232323232323232323232323232323|p7G0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1o00 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Paramaribo|-0330 -03|3u 30|01|zSPu|24e4","America/Port-au-Prince|EST EDT|50 40|01010101010101010101010101010101010101010101010101010101010101010101010|wu50 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14q0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 i6n0 1nX0 11B0 1nX0 d430 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Rio_Branco|-05 -04|50 40|010101010|CxF0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0 d5X0|31e4","America/Porto_Velho|-04 -03|40 30|0101010|CxE0 Rb0 1tB0 IL0 1Fd0 FX0|37e4","America/Punta_Arenas|-03 -04|30 40|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0","America/Rainy_River|CST CDT|60 50|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avk0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|842","America/Rankin_Inlet|CST CDT EST|60 50 50|0101010101010101010101010101010101010101012101010101010101010101010101010101010101010101010101010101010|p7I0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e2","America/Recife|-03 -02|30 20|01010101010101010|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0|33e5","America/Regina|CST|60|0||19e4","America/Resolute|CST CDT EST|60 50 50|0101010101010101010101010101010101010101012101010101012101010101010101010101010101010101010101010101010|p7I0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|229","America/Santarem|-04 -03|40 30|01010101|CxE0 Rb0 1tB0 IL0 1Fd0 FX0 NBd0|21e4","America/Santiago|-03 -04|30 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|62e5","America/Santo_Domingo|-0430 EST AST|4u 50 40|0101010101212|ksu 1Cou yLu 1RAu wLu 1QMu xzu 1Q0u xXu 1PAu 13jB0 e00|29e5","America/Sao_Paulo|-03 -02|30 20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|CxD0 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0 1HB0 FX0 1HB0 IL0 1HB0 FX0 1HB0 IL0 1EN0 FX0 1HB0 FX0 1HB0 IL0 1EN0 IL0 1HB0 FX0 1HB0 FX0 1HB0 FX0 1HB0|20e6","America/Scoresbysund|-02 -01 +00|20 10 0|0102121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|oXg0 1a00 1cK0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|452","America/Sitka|PST PDT YST AKST AKDT|80 70 90 90 80|0101010101010101010101010101234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|90e2","America/St_Johns|NST NDT NDDT|3u 2u 1u|010101010101010101010101010101010101020101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K5u 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","America/Swift_Current|MST CST|70 60|01|5E90|16e3","America/Tegucigalpa|CST CDT|60 50|0101010|Gcu0 WL0 1qN0 WL0 GRd0 AL0|11e5","America/Thule|AST ADT|40 30|010101010101010101010101010101010101010101010101010101010101010101010101010101010|PHG0 1cL0 1cN0 1cL0 1fB0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|656","America/Thunder_Bay|EST EDT|50 40|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K70 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","America/Vancouver|PST PDT|80 70|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|Ka0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Whitehorse|PST PDT|80 70|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|p7K0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e3","America/Winnipeg|CST CDT|60 50|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|K80 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|66e4","America/Yakutat|YST YDT AKST AKDT|90 80 90 80|0101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|Kb0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cn0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|642","America/Yellowknife|MST MDT|70 60|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|p7J0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|19e3","Antarctica/Casey|+08 +11|-80 -b0|0101010|1ARS0 T90 40P0 KL0 blz0 3m10|10","Antarctica/Davis|+07 +05|-70 -50|01010|1ART0 VB0 3Wn0 KN0|70","Pacific/Port_Moresby|+10|-a0|0||25e4","Antarctica/Macquarie|AEDT AEST +11|-b0 -a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010102|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0|1","Antarctica/Mawson|+06 +05|-60 -50|01|1ARU0|60","Pacific/Auckland|NZST NZDT|-c0 -d0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|14e5","Antarctica/Palmer|-03 -02 -04|30 20 40|01020202020202020202020202020202020202020202020202020202020202020202020|9Rf0 Db0 jsN0 14N0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40","Antarctica/Rothera|-00 -03|0 30|01|gOo0|130","Asia/Riyadh|+03|-30|0||57e5","Antarctica/Troll|-00 +00 +02|0 0 -20|012121212121212121212121212121212121212121212121212121|1puo0 hd0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|40","Asia/Urumqi|+06|-60|0||32e5","Europe/Berlin|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXd0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e5","Asia/Almaty|+06 +07 +05|-60 -70 -50|0101010101010101010102010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|15e5","Asia/Amman|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|8kK0 KL0 1oN0 11b0 1oN0 11b0 1pd0 1dz0 1cp0 11b0 1op0 11b0 fO10 1db0 1e10 1cL0 1cN0 1cL0 1cN0 1fz0 1pd0 10n0 1ld0 14n0 1hB0 15b0 1ip0 19X0 1cN0 1cL0 1cN0 17b0 1ld0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1So0 y00 1fc0 1dc0 1co0 1dc0 1cM0 1cM0 1cM0 1o00 11A0 1lc0 17c0 1cM0 1cM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|25e5","Asia/Anadyr|+13 +14 +12 +11|-d0 -e0 -c0 -b0|010202020202020202023202020202020202020202020202020202020232|rmX0 1db0 2q10 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|13e3","Asia/Aqtau|+05 +06 +04|-50 -60 -40|0101010101010101010201010120202020202020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|15e4","Asia/Aqtobe|+05 +06 +04|-50 -60 -40|01010101010101010102010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0|27e4","Asia/Ashgabat|+05 +06 +04|-50 -60 -40|01010101010101010101020|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0|41e4","Asia/Atyrau|+05 +06 +04|-50 -60 -40|010101010101010101020101010101010102020202020|sAj0 2pX0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 2sp0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0","Asia/Baghdad|+03 +04|-30 -40|01010101010101010101010101010101010101010101010101010|u190 11b0 1cp0 1dz0 1dd0 1db0 1cN0 1cp0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1de0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0|66e5","Asia/Qatar|+04 +03|-40 -30|01|5QI0|96e4","Asia/Baku|+04 +05 +03|-40 -50 -30|010101010101010101010201010101010101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 9Je0 1o00 11z0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|+07|-70|0||15e6","Asia/Barnaul|+07 +08 +06|-70 -80 -60|01010101010101010101020101010102020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 p90 LE0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0","Asia/Beirut|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|61a0 En0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1op0 11b0 dA10 17b0 1iN0 17b0 1iN0 17b0 1iN0 17b0 1vB0 SL0 1mp0 13z0 1iN0 17b0 1iN0 17b0 1jd0 12n0 1a10 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|22e5","Asia/Bishkek|+06 +07 +05|-60 -70 -50|0101010101010101010102020202020202020202020202020|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2e00 1tX0 17b0 1ip0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1cPu 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0|87e4","Asia/Brunei|+08|-80|0||42e4","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09 +10 +08|-90 -a0 -80|0101010101010101010102010101010101010101010101010101010101010120|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3re0|33e4","Asia/Choibalsan|+07 +08 +10 +09|-70 -80 -a0 -90|012323232323232323232323232323232323232323232313131|jsF0 cKn0 1da0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 3Db0 h1f0 1cJ0 1cP0 1cJ0|38e3","Asia/Shanghai|CST CDT|-80 -90|0101010101010|DKG0 Rb0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6","Asia/Colombo|+0530 +0630 +06|-5u -6u -60|0120|14giu 11zu n3cu|22e5","Asia/Dhaka|+06 +07|-60 -70|010|1A5R0 1i00|16e6","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|M00 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 Nb0 1AN0 Nb0 bcp0 19X0 1gp0 19X0 3ld0 1xX0 Vd0 1Bz0 Sp0 1vX0 10p0 1dz0 1cN0 1cL0 1db0 1db0 1g10 1an0 1ap0 1db0 1fd0 1db0 1cN0 1db0 1dd0 1db0 1cp0 1dz0 1c10 1dX0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 19z0 1fB0 1qL0 11B0 1on0 Wp0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0|26e5","Asia/Dili|+09 +08|-90 -80|010|fpr0 Xld0|19e4","Asia/Dubai|+04|-40|0||39e5","Asia/Dushanbe|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2hB0|76e4","Asia/Famagusta|EET EEST +03|-20 -30 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101012010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00","Asia/Gaza|IST IDT EET EEST|-20 -30 -20 -30|010101010101010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 11z0 1o10 14o0 1lA1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|18e5","Asia/Hebron|IST IDT EET EEST|-20 -30 -20 -30|01010101010101010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 12L0 1mN0 14o0 1lc0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0|25e4","Asia/Ho_Chi_Minh|+08 +07|-80 -70|01|dfs0|90e5","Asia/Hong_Kong|HKT HKST|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|73e5","Asia/Hovd|+06 +07 +08|-60 -70 -80|01212121212121212121212121212121212121212121212121|jsG0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+08 +09 +07|-80 -90 -70|010101010101010101010201010101010101010101010101010101010101010|rn40 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4","Europe/Istanbul|EET EEST +04 +03|-20 -30 -40 -30|01010101010101010123232323231010101010101010101010101010101010101010101010101010101010101013|MK0 11z0 1o10 11z0 1qN0 11z0 1ze0 11B0 WM0 1qO0 WI0 1nX0 1rB0 10L0 11B0 1in0 17d0 1in0 2pX0 19E0 1fU0 16Q0 1iI0 16Q0 1iI0 1Vd0 pb0 3Kp0 14o0 1de0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1a00 1fA0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|aXa0 Db0 1fB0 Rb0 bXd0 gM0 8Q00 IM0 1wM0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 1hB0 1dX0 1ep0 1aL0 1eN0 17X0 1nf0 11z0 1tB0 19W0 1e10 17b0 1ep0 1gL0 18N0 1fz0 1eN0 17b0 1gq0 1gn0 19d0 1dz0 1c10 17X0 1hB0 1gn0 19d0 1dz0 1c10 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Kamchatka|+12 +13 +11|-c0 -d0 -b0|0101010101010101010102010101010101010101010101010101010101020|rn00 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|18e4","Asia/Karachi|+05 PKT PKST|-50 -50 -60|01212121|2Xv0 1fy00 1cL0 dK10 11b0 1610 1jX0|24e6","Asia/Kathmandu|+0530 +0545|-5u -5J|01|CVuu|12e5","Asia/Khandyga|+09 +10 +08 +11|-90 -a0 -80 -b0|01010101010101010101020101010101010101010101010131313131313131310|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 qK0 yN0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|66e2","Asia/Krasnoyarsk|+07 +08 +06|-70 -80 -60|010101010101010101010201010101010101010101010101010101010101010|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|10e5","Asia/Kuala_Lumpur|+0730 +08|-7u -80|01|td4u|71e5","Asia/Macau|CST CDT|-80 -90|01010101010101010|H7u 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|57e4","Asia/Magadan|+11 +12 +10|-b0 -c0 -a0|0101010101010101010102010101010101010101010101010101010101010120|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST PDT|-80 -90|010|k0E0 1db0|24e6","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cPa0 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|32e4","Asia/Novokuznetsk|+07 +08 +06|-70 -80 -60|0101010101010101010102010101010101010101010101010101010101020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|55e4","Asia/Novosibirsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101020202020202020202020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 ml0 Os0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 4eN0|15e5","Asia/Omsk|+06 +07 +05|-60 -70 -50|010101010101010101010201010101010101010101010101010101010101010|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|12e5","Asia/Oral|+05 +06 +04|-50 -60 -40|010101010101010202020202020202020202020202020|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 1cM0 IM0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0|27e4","Asia/Pontianak|WITA WIB|-80 -70|01|HNs0|23e4","Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5","Asia/Qostanay|+05 +06 +04|-50 -60 -40|0101010101010101010201010101010101010101010101|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0","Asia/Qyzylorda|+05 +06|-50 -60|010101010101010101010101010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 3ao0 1EM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 zQl0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010202020202020202020202020202020|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 2pB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|58e4","Asia/Samarkand|+05 +06|-50 -60|010101010101010101010|rn70 3Db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|36e4","Asia/Seoul|KST KDT|-90 -a0|01010|Gf50 11A0 1o00 11A0|23e6","Asia/Srednekolymsk|+11 +12 +10|-b0 -c0 -a0|010101010101010101010201010101010101010101010101010101010101010|rn10 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|35e2","Asia/Taipei|CST CDT|-80 -90|0101010|akg0 1db0 1cN0 1db0 97B0 AL0|74e5","Asia/Tashkent|+06 +07 +05|-60 -70 -50|0101010101010101010102|rn60 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0|23e5","Asia/Tbilisi|+04 +05 +03|-40 -50 -30|01010101010101010101020202010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cK0 1cL0 1cN0 1cL0 1cN0 2pz0 1cL0 1fB0 3Nz0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 An0 Os0 WM0|11e5","Asia/Tehran|+0330 +04 +05 +0430|-3u -40 -50 -4u|0121030303030303030303030303030303030303030303030303030303030303030303030303030303030|j4ku TXu 1pz0 sN0 vAu 1cL0 1dB0 1en0 pNB0 UL0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 64p0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0|14e6","Asia/Thimphu|+0530 +06|-5u -60|01|HcGu|79e3","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+07 +08 +06|-70 -80 -60|01010101010101010101020101010101010101010101020202020202020202020|rn50 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 co0 1bB0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3Qp0|10e5","Asia/Ulaanbaatar|+07 +08 +09|-70 -80 -90|01212121212121212121212121212121212121212121212121|jsF0 cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 kEp0 1cJ0 1cP0 1cJ0|12e5","Asia/Ust-Nera|+09 +12 +11 +10|-90 -c0 -b0 -a0|0121212121212121212123212121212121212121212121212121212121212123|rn30 1d90 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0 7zD0|65e2","Asia/Vladivostok|+10 +11 +09|-a0 -b0 -90|010101010101010101010201010101010101010101010101010101010101010|rn20 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|60e4","Asia/Yakutsk|+09 +10 +08|-90 -a0 -80|010101010101010101010201010101010101010101010101010101010101010|rn30 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|28e4","Asia/Yekaterinburg|+05 +06 +04|-50 -60 -40|010101010101010101010201010101010101010101010101010101010101010|rn70 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|14e5","Asia/Yerevan|+04 +05 +03|-40 -50 -30|01010101010101010101020202020101010101010101010101010101010|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2pB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 4RX0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|13e5","Atlantic/Azores|-01 +00 WET|10 0 0|0101010101010101010101010101010121010101010101010101010101010101010101010101010101010101010101010101010101010|hAN0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|25e4","Atlantic/Bermuda|AST ADT|40 30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|avi0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|65e3","Atlantic/Canary|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXc0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4","Atlantic/Cape_Verde|-02 -01|20 10|01|elE0|50e4","Atlantic/Faroe|WET WEST|0 -10|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|49e3","Atlantic/Madeira|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hAM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e4","Atlantic/South_Georgia|-02|20|0||30","Atlantic/Stanley|-04 -03 -02|40 30 20|01212101010101010101010101010101010101010101010101010101|wrg0 WL0 1qL0 U10 1tz0 2mN0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 U10 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qN0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 U10 1tz0 U10 1tz0 U10|21e2","Australia/Sydney|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|40e5","Australia/Adelaide|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 WM0 1qM0 Rc0 1zc0 U00 1tA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|11e5","Australia/Brisbane|AEST AEDT|-a0 -b0|010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0|20e5","Australia/Broken_Hill|ACST ACDT|-9u -au|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r4u LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|18e3","Australia/Currie|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|746","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845 +0945|-8J -9J|0101010101010|bHRf Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|368","Australia/Hobart|AEDT AEST|-b0 -a0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|qg0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|21e4","Australia/Lord_Howe|AEST +1030 +1130 +11|-a0 -au -bu -b0|01212121213131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|raC0 1zdu Rb0 1zd0 On0 1zd0 On0 1zd0 On0 1zd0 TXu 1qMu WLu 1tAu WLu 1tAu TXu 1tAu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu 11zu 1o0u 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 11Au 1nXu 1qMu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu 11zu 1o0u WLu 1qMu 14nu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu|347","Australia/Lindeman|AEST AEDT|-a0 -b0|0101010101010|4r40 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0|10","Australia/Melbourne|AEST AEDT|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4r40 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0|39e5","Australia/Perth|AWST AWDT|-80 -90|0101010101010|bHS0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0|18e5","Europe/Brussels|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|21e5","Pacific/Easter|-06 -07 -05|60 70 50|010101010101010101010101020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202|yP0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 2pA0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1o10 11z0 1qN0 WL0 1fB0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|30e2","EET|EET EEST|-20 -30|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00","Europe/Dublin|IST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Etc/GMT-1|+01|-10|0|","Pacific/Guadalcanal|+11|-b0|0||11e4","Pacific/Tarawa|+12|-c0|0||29e3","Etc/GMT-13|+13|-d0|0|","Etc/GMT-14|+14|-e0|0|","Etc/GMT-2|+02|-20|0|","Indian/Maldives|+05|-50|0||35e4","Pacific/Palau|+09|-90|0||21e3","Etc/GMT+1|-01|10|0|","Pacific/Tahiti|-10|a0|0||18e4","Etc/GMT+11|-11|b0|0|","Etc/GMT+12|-12|c0|0|","Etc/GMT+5|-05|50|0|","Etc/GMT+6|-06|60|0|","Etc/GMT+7|-07|70|0|","Etc/GMT+8|-08|80|0|","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0|","Europe/Andorra|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|B7d0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|79e3","Europe/Astrakhan|+04 +05 +03|-40 -50 -30|0101010101010101020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|10e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|cOK0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|35e5","Europe/London|BST GMT|-10 0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|4re0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|10e6","Europe/Belgrade|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|wdd0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Europe/Prague|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muN0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|13e5","Europe/Bucharest|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|mRa0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|19e5","Europe/Budapest|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXc0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5","Europe/Zurich|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|38e4","Europe/Chisinau|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010101012323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 gL0 WO0 1cM0 1cM0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11D0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|67e4","Europe/Gibraltar|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|tLB0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|30e3","Europe/Helsinki|EET EEST|-20 -30|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|rm00 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Europe/Kaliningrad|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010102323232323232323232323232323232323232323232343|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|44e4","Europe/Kiev|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101010123232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 Db0 3220 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|34e5","Europe/Kirov|+04 +05 +03|-40 -50 -30|010101010101010102020202020202020202020202020202020202020202|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|48e4","Europe/Lisbon|CET WET WEST CEST|-10 0 -10 -20|01212121212121212121212121212121203030302121212121212121212121212121212121212121212121212121212121212121212121|go00 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|27e5","Europe/Madrid|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|apy0 1a10 1fz0 1a10 19X0 1cN0 1fz0 1a10 1fC0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|62e5","Europe/Malta|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1co0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4","Europe/Minsk|MSK MSD EEST EET +03|-30 -40 -30 -20 -30|010101010101010101023232323232323232323232323232323232323234|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fc0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0|19e5","Europe/Paris|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|fbc0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e6","Europe/Moscow|MSK MSD EEST EET MSK|-30 -40 -30 -20 -40|0101010101010101010102301010101010101010101010101010101010101040|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|16e6","Europe/Riga|MSK MSD EEST EET|-30 -40 -30 -20|010101010101010102323232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|64e4","Europe/Rome|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|XX0 LA0 1zc0 Oo0 1C00 Oo0 1C00 LA0 1zc0 Oo0 1C00 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|39e5","Europe/Samara|+04 +05 +03|-40 -50 -30|01010101010101010202010101010101010101010101010101010101020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2y10 14m0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 2sp0 WM0|12e5","Europe/Saratov|+04 +05 +03|-40 -50 -30|0101010101010102020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 5810","Europe/Simferopol|MSK MSD EET EEST MSK|-30 -40 -20 -30 -40|0101010101010101010232323101010323232323232323232323232323232323240|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 4eL0 1cL0 1cN0 1cL0 1cN0 dX0 WL0 1cN0 1cL0 1fB0 1o30 11B0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0|33e4","Europe/Sofia|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|muJ0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|12e5","Europe/Tallinn|MSK MSD EEST EET|-30 -40 -30 -20|0101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|41e4","Europe/Tirane|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|axz0 10n0 1op0 11z0 1pd0 11z0 1qN0 WL0 1qp0 Xb0 1qp0 Xb0 1qp0 11z0 1lB0 11z0 1qN0 11z0 1iN0 16n0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|42e4","Europe/Ulyanovsk|+04 +05 +03 +02|-40 -50 -30 -20|010101010101010102023202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1fA0 2pB0 IM0 rX0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 3rd0|13e5","Europe/Uzhgorod|MSK MSD CET EET EEST|-30 -40 -10 -20 -30|010101010101010101023434343434343434343434343434343434343434343434343434343434343434343434343434343|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 1Nf0 2pw0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|11e4","Europe/Vienna|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|oXb0 19X0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|18e5","Europe/Vilnius|MSK MSD EEST EET CEST CET|-30 -40 -30 -20 -20 -10|01010101010101010232323232323232323454323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|54e4","Europe/Volgograd|+04 +05 +03|-40 -50 -30|0101010101010102020202020202020202020202020202020202020202020|rn80 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 2pB0 1cM0 1cM0 1cM0 1fA0 1cM0 3Co0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0 9Jd0|10e5","Europe/Warsaw|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|17e5","Europe/Zaporozhye|MSK MSD EEST EET|-30 -40 -30 -20|01010101010101010101023232323232323232323232323232323232323232323232323232323232323232323232323232323|rn90 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cK0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00|77e4","Pacific/Honolulu|HST|a0|0||37e4","Indian/Chagos|+05 +06|-50 -60|01|13ij0|30e2","Indian/Mauritius|+04 +05|-40 -50|01010|v5U0 14L0 12kr0 11z0|15e4","Pacific/Kwajalein|-12 +12|c0 -c0|01|Vxo0|14e3","MET|MET MEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00","Pacific/Chatham|+1245 +1345|-cJ -dJ|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|bKC0 IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|600","Pacific/Apia|-11 -10 +14 +13|b0 a0 -e0 -d0|0101232323232323232323232323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00|37e3","Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4","Pacific/Efate|+11 +12|-b0 -c0|010101010101010101010|xpN0 1cL0 1oN0 10L0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 Lz0 1Nd0 An0|66e3","Pacific/Enderbury|-12 -11 +13|c0 b0 -d0|012|nIc0 B7X0|1","Pacific/Fakaofo|-11 +13|b0 -d0|01|1Gfn0|483","Pacific/Fiji|+12 +13|-c0 -d0|010101010101010101010101010101010101010101010101|1ace0 LA0 1EM0 IM0 nJc0 LA0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 1VA0|88e4","Pacific/Galapagos|-05 -06|50 60|0101|CVF0 gNd0 rz0|25e3","Pacific/Guam|GST GDT ChST|-a0 -b0 -a0|010101010102|JQ0 Rb0 1wp0 Rb0 5xd0 rX0 5sN0 zb1 1C0X On0 ULb0|17e4","Pacific/Kiritimati|-1040 -10 +14|aE a0 -e0|012|nIaE B7Xk|51e2","Pacific/Kosrae|+12 +11|-c0 -b0|01|1aAA0|66e2","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Nauru|+1130 +12|-bu -c0|01|maCu|10e3","Pacific/Niue|-1130 -11|bu b0|01|libu|12e2","Pacific/Norfolk|+1130 +1230 +11|-bu -cu -b0|0102|bHOu On0 1COp0|25e4","Pacific/Noumea|+11 +12|-b0 -c0|0101010|jhp0 xX0 1PB0 yn0 HeP0 Ao0|98e3","Pacific/Pitcairn|-0830 -08|8u 80|01|18Vku|56","Pacific/Rarotonga|-1030 -0930 -10|au 9u a0|012121212121212121212121212|lyWu IL0 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu|13e3","Pacific/Tongatapu|+13 +14|-d0 -e0|010101010|1csd0 15A0 1wo0 xz0 1Q10 xz0 zWN0 s00|75e3","WET|WET WEST|0 -10|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Cairo|Egypt","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|US/Alaska","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Catamarca|America/Argentina/ComodRivadavia","America/Argentina/Catamarca|America/Catamarca","America/Argentina/Cordoba|America/Cordoba","America/Argentina/Cordoba|America/Rosario","America/Argentina/Jujuy|America/Jujuy","America/Argentina/Mendoza|America/Mendoza","America/Cayenne|Etc/GMT+3","America/Chicago|CST6CDT","America/Chicago|US/Central","America/Denver|America/Shiprock","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Detroit|US/Michigan","America/Edmonton|Canada/Mountain","America/Fort_Wayne|America/Indiana/Indianapolis","America/Fort_Wayne|America/Indianapolis","America/Fort_Wayne|US/East-Indiana","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Indiana/Knox|America/Knox_IN","America/Indiana/Knox|US/Indiana-Starke","America/Jamaica|Jamaica","America/Kentucky/Louisville|America/Louisville","America/La_Paz|Etc/GMT+4","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Manaus|Brazil/West","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|Mexico/General","America/New_York|EST5EDT","America/New_York|US/Eastern","America/Noronha|Brazil/DeNoronha","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|EST","America/Phoenix|America/Creston","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Puerto_Rico|America/Anguilla","America/Puerto_Rico|America/Antigua","America/Puerto_Rico|America/Aruba","America/Puerto_Rico|America/Blanc-Sablon","America/Puerto_Rico|America/Curacao","America/Puerto_Rico|America/Dominica","America/Puerto_Rico|America/Grenada","America/Puerto_Rico|America/Guadeloupe","America/Puerto_Rico|America/Kralendijk","America/Puerto_Rico|America/Lower_Princes","America/Puerto_Rico|America/Marigot","America/Puerto_Rico|America/Montserrat","America/Puerto_Rico|America/Port_of_Spain","America/Puerto_Rico|America/St_Barthelemy","America/Puerto_Rico|America/St_Kitts","America/Puerto_Rico|America/St_Lucia","America/Puerto_Rico|America/St_Thomas","America/Puerto_Rico|America/St_Vincent","America/Puerto_Rico|America/Tortola","America/Puerto_Rico|America/Virgin","America/Regina|Canada/Saskatchewan","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Tijuana|America/Ensenada","America/Tijuana|America/Santa_Isabel","America/Tijuana|Mexico/BajaNorte","America/Toronto|America/Montreal","America/Toronto|America/Nassau","America/Toronto|Canada/Eastern","America/Vancouver|Canada/Pacific","America/Whitehorse|Canada/Yukon","America/Winnipeg|Canada/Central","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Brunei|Asia/Kuching","Asia/Brunei|Etc/GMT-8","Asia/Dhaka|Asia/Dacca","Asia/Dubai|Asia/Muscat","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Reunion","Asia/Ho_Chi_Minh|Asia/Saigon","Asia/Hong_Kong|Hongkong","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Singapore","Asia/Macau|Asia/Macao","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|Europe/Nicosia","Asia/Qatar|Asia/Bahrain","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Riyadh|Antarctica/Syowa","Asia/Riyadh|Asia/Aden","Asia/Riyadh|Asia/Kuwait","Asia/Riyadh|Etc/GMT-3","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|PRC","Asia/Taipei|ROC","Asia/Tehran|Iran","Asia/Thimphu|Asia/Thimbu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Urumqi|Antarctica/Vostok","Asia/Urumqi|Asia/Kashgar","Asia/Urumqi|Etc/GMT-6","Atlantic/Faroe|Atlantic/Faeroe","Atlantic/South_Georgia|Etc/GMT+2","Australia/Adelaide|Australia/South","Australia/Brisbane|Australia/Queensland","Australia/Broken_Hill|Australia/Yancowinna","Australia/Darwin|Australia/North","Australia/Hobart|Australia/Tasmania","Australia/Lord_Howe|Australia/LHI","Australia/Melbourne|Australia/Victoria","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/NSW","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belgrade|Europe/Ljubljana","Europe/Belgrade|Europe/Podgorica","Europe/Belgrade|Europe/Sarajevo","Europe/Belgrade|Europe/Skopje","Europe/Belgrade|Europe/Zagreb","Europe/Berlin|Arctic/Longyearbyen","Europe/Berlin|Atlantic/Jan_Mayen","Europe/Berlin|Europe/Copenhagen","Europe/Berlin|Europe/Oslo","Europe/Berlin|Europe/Stockholm","Europe/Brussels|CET","Europe/Brussels|Europe/Amsterdam","Europe/Brussels|Europe/Luxembourg","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Helsinki|Europe/Mariehamn","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Portugal","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Europe/Monaco","Europe/Prague|Europe/Bratislava","Europe/Rome|Europe/San_Marino","Europe/Rome|Europe/Vatican","Europe/Warsaw|Poland","Europe/Zurich|Europe/Busingen","Europe/Zurich|Europe/Vaduz","Indian/Maldives|Etc/GMT-5","Indian/Maldives|Indian/Kerguelen","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Gambier|Etc/GMT+9","Pacific/Guadalcanal|Etc/GMT-11","Pacific/Guadalcanal|Pacific/Pohnpei","Pacific/Guadalcanal|Pacific/Ponape","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kwajalein|Kwajalein","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Palau|Etc/GMT-9","Pacific/Port_Moresby|Antarctica/DumontDUrville","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tahiti|Etc/GMT+10","Pacific/Tarawa|Etc/GMT-12","Pacific/Tarawa|Pacific/Funafuti","Pacific/Tarawa|Pacific/Majuro","Pacific/Tarawa|Pacific/Wake","Pacific/Tarawa|Pacific/Wallis"]}),e}),piAId="7522",piCId="101419",piHostname="pi.pardot.com",function(){function e(){var e=document.createElement("script");e.type="text/javascript",e.src=("https:"==document.location.protocol?"https://pi":"http://cdn")+".pardot.com/pd.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1)}(),function(e,t,n,i,r){var a=t.createElement(n),s=t.getElementsByTagName(n)[0];a.async=1,a.id="demandbase_js_lib",a.src="https://tag.demandbase.com/31241db7.min.js",s.parentNode.insertBefore(a,s)}(window,document,"script");